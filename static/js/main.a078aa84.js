/*! For license information please see main.a078aa84.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,i){var n=i(791),o=i(296);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,r={};function l(e,t){d(e,t),d(e+"Capture",t)}function d(e,t){for(r[e]=t,e=0;e<t.length;e++)a.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),p=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},f={};function m(e,t,i,n,o,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function w(e,t,i,n){var o=g.hasOwnProperty(t)?g[t]:null;(null!==o?0!==o.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,i,n){if(null===t||"undefined"===typeof t||function(e,t,i,n){if(null!==i&&0===i.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==i?!i.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,i,n))return!0;if(n)return!1;if(null!==i)switch(i.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,i,o,n)&&(i=null),n||null===o?function(e){return!!p.call(f,e)||!p.call(u,e)&&(c.test(e)?f[e]=!0:(u[e]=!0,!1))}(t)&&(null===i?e.removeAttribute(t):e.setAttribute(t,""+i)):o.mustUseProperty?e[o.propertyName]=null===i?3!==o.type&&"":i:(t=o.attributeName,n=o.attributeNamespace,null===i?e.removeAttribute(t):(i=3===(o=o.type)||4===o&&!0===i?"":""+i,n?e.setAttributeNS(n,t,i):e.setAttribute(t,i))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),C=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),A=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var F=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var O,B=Object.assign;function z(e){if(void 0===O)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var j=!1;function R(e,t){if(!e||j)return"";j=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&"string"===typeof d.stack){for(var o=d.stack.split("\n"),s=n.stack.split("\n"),a=o.length-1,r=s.length-1;1<=a&&0<=r&&o[a]!==s[r];)r--;for(;1<=a&&0<=r;a--,r--)if(o[a]!==s[r]){if(1!==a||1!==r)do{if(a--,0>--r||o[a]!==s[r]){var l="\n"+o[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=r);break}}}finally{j=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?z(e):""}function _(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=R(e.type,!1);case 11:return e=R(e.type.render,!1);case 1:return e=R(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case C:return"Portal";case I:return"Profiler";case M:return"StrictMode";case V:return"Suspense";case E:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return H(e(t))}catch(i){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function U(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof i&&"function"===typeof i.get&&"function"===typeof i.set){var o=i.get,s=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),n="";return e&&(n=q(e)?e.checked?"true":"false":e.value),(e=n)!==i&&(t.setValue(e),!0)}function Z(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var i=t.checked;return B({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=i?i:e._wrapperState.initialChecked})}function G(e,t){var i=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;i=U(null!=t.value?t.value:i),e._wrapperState={initialChecked:n,initialValue:i,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function K(e,t){J(e,t);var i=U(t.value),n=t.type;if(null!=i)"number"===n?(0===i&&""===e.value||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,i):t.hasOwnProperty("defaultValue")&&ee(e,t.type,U(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}""!==(i=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==i&&(e.name=i)}function ee(e,t,i){"number"===t&&Z(e.ownerDocument)===e||(null==i?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var te=Array.isArray;function ie(e,t,i,n){if(e=e.options,t){t={};for(var o=0;o<i.length;o++)t["$"+i[o]]=!0;for(i=0;i<e.length;i++)o=t.hasOwnProperty("$"+e[i].value),e[i].selected!==o&&(e[i].selected=o),o&&n&&(e[i].defaultSelected=!0)}else{for(i=""+U(i),t=null,o=0;o<e.length;o++){if(e[o].value===i)return e[o].selected=!0,void(n&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return B({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var i=t.value;if(null==i){if(i=t.children,t=t.defaultValue,null!=i){if(null!=t)throw Error(s(92));if(te(i)){if(1<i.length)throw Error(s(93));i=i[0]}t=i}null==t&&(t=""),i=t}e._wrapperState={initialValue:U(i)}}function se(e,t){var i=U(t.value),n=U(t.defaultValue);null!=i&&((i=""+i)!==e.value&&(e.value=i),null==t.defaultValue&&e.defaultValue!==i&&(e.defaultValue=i)),null!=n&&(e.defaultValue=""+n)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function re(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?re(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var de,he,pe=(he=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((de=de||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=de.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,i,n){MSApp.execUnsafeLocalFunction((function(){return he(e,t)}))}:he);function ce(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&3===i.nodeType)return void(i.nodeValue=t)}e.textContent=t}var ue={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,i){return null==t||"boolean"===typeof t||""===t?"":i||"number"!==typeof t||0===t||ue.hasOwnProperty(e)&&ue[e]?(""+t).trim():t+"px"}function ge(e,t){for(var i in e=e.style,t)if(t.hasOwnProperty(i)){var n=0===i.indexOf("--"),o=me(i,t[i],n);"float"===i&&(i="cssFloat"),n?e.setProperty(i,o):e[i]=o}}Object.keys(ue).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ue[t]=ue[e]}))}));var ye=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,xe=null,Me=null;function Ie(e){if(e=bo(e)){if("function"!==typeof Ce)throw Error(s(280));var t=e.stateNode;t&&(t=Co(t),Ce(e.stateNode,e.type,t))}}function Te(e){xe?Me?Me.push(e):Me=[e]:xe=e}function Ae(){if(xe){var e=xe,t=Me;if(Me=xe=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function ke(e,t){return e(t)}function Ve(){}var Ee=!1;function De(e,t,i){if(Ee)return e(t,i);Ee=!0;try{return ke(e,t,i)}finally{Ee=!1,(null!==xe||null!==Me)&&(Ve(),Ae())}}function Ne(e,t){var i=e.stateNode;if(null===i)return null;var n=Co(i);if(null===n)return null;i=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(i&&"function"!==typeof i)throw Error(s(231,t,typeof i));return i}var Fe=!1;if(h)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Fe=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(he){Fe=!1}function Pe(e,t,i,n,o,s,a,r,l){var d=Array.prototype.slice.call(arguments,3);try{t.apply(i,d)}catch(h){this.onError(h)}}var Oe=!1,Be=null,ze=!1,je=null,Re={onError:function(e){Oe=!0,Be=e}};function _e(e,t,i,n,o,s,a,r,l){Oe=!1,Be=null,Pe.apply(Re,arguments)}function He(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(i=t.return),e=t.return}while(e)}return 3===t.tag?i:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ue(e){if(He(e)!==e)throw Error(s(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(s(188));return t!==e?null:e}for(var i=e,n=t;;){var o=i.return;if(null===o)break;var a=o.alternate;if(null===a){if(null!==(n=o.return)){i=n;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===i)return Ue(o),e;if(a===n)return Ue(o),t;a=a.sibling}throw Error(s(188))}if(i.return!==n.return)i=o,n=a;else{for(var r=!1,l=o.child;l;){if(l===i){r=!0,i=o,n=a;break}if(l===n){r=!0,n=o,i=a;break}l=l.sibling}if(!r){for(l=a.child;l;){if(l===i){r=!0,i=a,n=o;break}if(l===n){r=!0,n=a,i=o;break}l=l.sibling}if(!r)throw Error(s(189))}}if(i.alternate!==n)throw Error(s(190))}if(3!==i.tag)throw Error(s(188));return i.stateNode.current===i?e:t}(e))?Ye(e):null}function Ye(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ye(e);if(null!==t)return t;e=e.sibling}return null}var Qe=o.unstable_scheduleCallback,Ze=o.unstable_cancelCallback,Xe=o.unstable_shouldYield,Ge=o.unstable_requestPaint,Je=o.unstable_now,Ke=o.unstable_getCurrentPriorityLevel,$e=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,it=o.unstable_LowPriority,nt=o.unstable_IdlePriority,ot=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(rt(e)/lt|0)|0},rt=Math.log,lt=Math.LN2;var dt=64,ht=4194304;function pt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ct(e,t){var i=e.pendingLanes;if(0===i)return 0;var n=0,o=e.suspendedLanes,s=e.pingedLanes,a=268435455&i;if(0!==a){var r=a&~o;0!==r?n=pt(r):0!==(s&=a)&&(n=pt(s))}else 0!==(a=i&~o)?n=pt(a):0!==s&&(n=pt(s));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&o)&&((o=n&-n)>=(s=t&-t)||16===o&&0!==(4194240&s)))return t;if(0!==(4&n)&&(n|=16&i),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)o=1<<(i=31-at(t)),n|=e[i],t&=~o;return n}function ut(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=dt;return 0===(4194240&(dt<<=1))&&(dt=64),e}function gt(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function yt(e,t,i){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=i}function vt(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var n=31-at(i),o=1<<n;o&t|e[n]&t&&(e[n]|=t),i&=~o}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var St,Ct,xt,Mt,It,Tt=!1,At=[],kt=null,Vt=null,Et=null,Dt=new Map,Nt=new Map,Ft=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pt(e,t){switch(e){case"focusin":case"focusout":kt=null;break;case"dragenter":case"dragleave":Vt=null;break;case"mouseover":case"mouseout":Et=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nt.delete(t.pointerId)}}function Ot(e,t,i,n,o,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:i,eventSystemFlags:n,nativeEvent:s,targetContainers:[o]},null!==t&&(null!==(t=bo(t))&&Ct(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Bt(e){var t=wo(e.target);if(null!==t){var i=He(t);if(null!==i)if(13===(t=i.tag)){if(null!==(t=We(i)))return e.blockedOn=t,void It(e.priority,(function(){xt(i)}))}else if(3===t&&i.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var i=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==i)return null!==(t=bo(i))&&Ct(t),e.blockedOn=i,!1;var n=new(i=e.nativeEvent).constructor(i.type,i);be=n,i.target.dispatchEvent(n),be=null,t.shift()}return!0}function jt(e,t,i){zt(e)&&i.delete(t)}function Rt(){Tt=!1,null!==kt&&zt(kt)&&(kt=null),null!==Vt&&zt(Vt)&&(Vt=null),null!==Et&&zt(Et)&&(Et=null),Dt.forEach(jt),Nt.forEach(jt)}function _t(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Rt)))}function Ht(e){function t(t){return _t(t,e)}if(0<At.length){_t(At[0],e);for(var i=1;i<At.length;i++){var n=At[i];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==kt&&_t(kt,e),null!==Vt&&_t(Vt,e),null!==Et&&_t(Et,e),Dt.forEach(t),Nt.forEach(t),i=0;i<Ft.length;i++)(n=Ft[i]).blockedOn===e&&(n.blockedOn=null);for(;0<Ft.length&&null===(i=Ft[0]).blockedOn;)Bt(i),null===i.blockedOn&&Ft.shift()}var Wt=b.ReactCurrentBatchConfig,Ut=!0;function qt(e,t,i,n){var o=wt,s=Wt.transition;Wt.transition=null;try{wt=1,Qt(e,t,i,n)}finally{wt=o,Wt.transition=s}}function Yt(e,t,i,n){var o=wt,s=Wt.transition;Wt.transition=null;try{wt=4,Qt(e,t,i,n)}finally{wt=o,Wt.transition=s}}function Qt(e,t,i,n){if(Ut){var o=Xt(e,t,i,n);if(null===o)Un(e,t,n,Zt,i),Pt(e,n);else if(function(e,t,i,n,o){switch(t){case"focusin":return kt=Ot(kt,e,t,i,n,o),!0;case"dragenter":return Vt=Ot(Vt,e,t,i,n,o),!0;case"mouseover":return Et=Ot(Et,e,t,i,n,o),!0;case"pointerover":var s=o.pointerId;return Dt.set(s,Ot(Dt.get(s)||null,e,t,i,n,o)),!0;case"gotpointercapture":return s=o.pointerId,Nt.set(s,Ot(Nt.get(s)||null,e,t,i,n,o)),!0}return!1}(o,e,t,i,n))n.stopPropagation();else if(Pt(e,n),4&t&&-1<Lt.indexOf(e)){for(;null!==o;){var s=bo(o);if(null!==s&&St(s),null===(s=Xt(e,t,i,n))&&Un(e,t,n,Zt,i),s===o)break;o=s}null!==o&&n.stopPropagation()}else Un(e,t,n,null,i)}}var Zt=null;function Xt(e,t,i,n){if(Zt=null,null!==(e=wo(e=Se(n))))if(null===(t=He(e)))e=null;else if(13===(i=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===i){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zt=e,null}function Gt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ke()){case $e:return 1;case et:return 4;case tt:case it:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Jt=null,Kt=null,$t=null;function ei(){if($t)return $t;var e,t,i=Kt,n=i.length,o="value"in Jt?Jt.value:Jt.textContent,s=o.length;for(e=0;e<n&&i[e]===o[e];e++);var a=n-e;for(t=1;t<=a&&i[n-t]===o[s-t];t++);return $t=o.slice(e,1<t?1-t:void 0)}function ti(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function ii(){return!0}function ni(){return!1}function oi(e){function t(t,i,n,o,s){for(var a in this._reactName=t,this._targetInst=n,this.type=i,this.nativeEvent=o,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?ii:ni,this.isPropagationStopped=ni,this}return B(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ii)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ii)},persist:function(){},isPersistent:ii}),t}var si,ai,ri,li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},di=oi(li),hi=B({},li,{view:0,detail:0}),pi=oi(hi),ci=B({},hi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mi,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ri&&(ri&&"mousemove"===e.type?(si=e.screenX-ri.screenX,ai=e.screenY-ri.screenY):ai=si=0,ri=e),si)},movementY:function(e){return"movementY"in e?e.movementY:ai}}),ui=oi(ci),fi=oi(B({},ci,{dataTransfer:0})),mi=oi(B({},hi,{relatedTarget:0})),gi=oi(B({},li,{animationName:0,elapsedTime:0,pseudoElement:0})),yi=B({},li,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vi=oi(yi),wi=oi(B({},li,{data:0})),bi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Si={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ci={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xi(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ci[e])&&!!t[e]}function Mi(){return xi}var Ii=B({},hi,{key:function(e){if(e.key){var t=bi[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ti(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Si[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mi,charCode:function(e){return"keypress"===e.type?ti(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ti(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ti=oi(Ii),Ai=oi(B({},ci,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),ki=oi(B({},hi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mi})),Vi=oi(B({},li,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ei=B({},ci,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Di=oi(Ei),Ni=[9,13,27,32],Fi=h&&"CompositionEvent"in window,Li=null;h&&"documentMode"in document&&(Li=document.documentMode);var Pi=h&&"TextEvent"in window&&!Li,Oi=h&&(!Fi||Li&&8<Li&&11>=Li),Bi=String.fromCharCode(32),zi=!1;function ji(e,t){switch(e){case"keyup":return-1!==Ni.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ri(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var _i=!1;var Hi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hi[e.type]:"textarea"===t}function Ui(e,t,i,n){Te(n),0<(t=Yn(t,"onChange")).length&&(i=new di("onChange","change",null,i,n),e.push({event:i,listeners:t}))}var qi=null,Yi=null;function Qi(e){zn(e,0)}function Zi(e){if(Q(So(e)))return e}function Xi(e,t){if("change"===e)return t}var Gi=!1;if(h){var Ji;if(h){var Ki="oninput"in document;if(!Ki){var $i=document.createElement("div");$i.setAttribute("oninput","return;"),Ki="function"===typeof $i.oninput}Ji=Ki}else Ji=!1;Gi=Ji&&(!document.documentMode||9<document.documentMode)}function en(){qi&&(qi.detachEvent("onpropertychange",tn),Yi=qi=null)}function tn(e){if("value"===e.propertyName&&Zi(Yi)){var t=[];Ui(t,Yi,e,Se(e)),De(Qi,t)}}function nn(e,t,i){"focusin"===e?(en(),Yi=i,(qi=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function on(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Zi(Yi)}function sn(e,t){if("click"===e)return Zi(t)}function an(e,t){if("input"===e||"change"===e)return Zi(t)}var rn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ln(e,t){if(rn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++){var o=i[n];if(!p.call(t,o)||!rn(e[o],t[o]))return!1}return!0}function dn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hn(e,t){var i,n=dn(e);for(e=0;n;){if(3===n.nodeType){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=dn(n)}}function pn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function cn(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var i="string"===typeof t.contentWindow.location.href}catch(n){i=!1}if(!i)break;t=Z((e=t.contentWindow).document)}return t}function un(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fn(e){var t=cn(),i=e.focusedElem,n=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&pn(i.ownerDocument.documentElement,i)){if(null!==n&&un(i))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if((e=(t=i.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=i.textContent.length,s=Math.min(n.start,o);n=void 0===n.end?s:Math.min(n.end,o),!e.extend&&s>n&&(o=n,n=s,s=o),o=hn(i,s);var a=hn(i,n);o&&a&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=i;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof i.focus&&i.focus(),i=0;i<t.length;i++)(e=t[i]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mn=h&&"documentMode"in document&&11>=document.documentMode,gn=null,yn=null,vn=null,wn=!1;function bn(e,t,i){var n=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;wn||null==gn||gn!==Z(n)||("selectionStart"in(n=gn)&&un(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},vn&&ln(vn,n)||(vn=n,0<(n=Yn(yn,"onSelect")).length&&(t=new di("onSelect","select",null,t,i),e.push({event:t,listeners:n}),t.target=gn)))}function Sn(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Cn={animationend:Sn("Animation","AnimationEnd"),animationiteration:Sn("Animation","AnimationIteration"),animationstart:Sn("Animation","AnimationStart"),transitionend:Sn("Transition","TransitionEnd")},xn={},Mn={};function In(e){if(xn[e])return xn[e];if(!Cn[e])return e;var t,i=Cn[e];for(t in i)if(i.hasOwnProperty(t)&&t in Mn)return xn[e]=i[t];return e}h&&(Mn=document.createElement("div").style,"AnimationEvent"in window||(delete Cn.animationend.animation,delete Cn.animationiteration.animation,delete Cn.animationstart.animation),"TransitionEvent"in window||delete Cn.transitionend.transition);var Tn=In("animationend"),An=In("animationiteration"),kn=In("animationstart"),Vn=In("transitionend"),En=new Map,Dn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nn(e,t){En.set(e,t),l(t,[e])}for(var Fn=0;Fn<Dn.length;Fn++){var Ln=Dn[Fn];Nn(Ln.toLowerCase(),"on"+(Ln[0].toUpperCase()+Ln.slice(1)))}Nn(Tn,"onAnimationEnd"),Nn(An,"onAnimationIteration"),Nn(kn,"onAnimationStart"),Nn("dblclick","onDoubleClick"),Nn("focusin","onFocus"),Nn("focusout","onBlur"),Nn(Vn,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),On=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pn));function Bn(e,t,i){var n=e.type||"unknown-event";e.currentTarget=i,function(e,t,i,n,o,a,r,l,d){if(_e.apply(this,arguments),Oe){if(!Oe)throw Error(s(198));var h=Be;Oe=!1,Be=null,ze||(ze=!0,je=h)}}(n,t,void 0,e),e.currentTarget=null}function zn(e,t){t=0!==(4&t);for(var i=0;i<e.length;i++){var n=e[i],o=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var a=n.length-1;0<=a;a--){var r=n[a],l=r.instance,d=r.currentTarget;if(r=r.listener,l!==s&&o.isPropagationStopped())break e;Bn(o,r,d),s=l}else for(a=0;a<n.length;a++){if(l=(r=n[a]).instance,d=r.currentTarget,r=r.listener,l!==s&&o.isPropagationStopped())break e;Bn(o,r,d),s=l}}}if(ze)throw e=je,ze=!1,je=null,e}function jn(e,t){var i=t[go];void 0===i&&(i=t[go]=new Set);var n=e+"__bubble";i.has(n)||(Wn(t,e,2,!1),i.add(n))}function Rn(e,t,i){var n=0;t&&(n|=4),Wn(i,e,n,t)}var _n="_reactListening"+Math.random().toString(36).slice(2);function Hn(e){if(!e[_n]){e[_n]=!0,a.forEach((function(t){"selectionchange"!==t&&(On.has(t)||Rn(t,!1,e),Rn(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[_n]||(t[_n]=!0,Rn("selectionchange",!1,t))}}function Wn(e,t,i,n){switch(Gt(t)){case 1:var o=qt;break;case 4:o=Yt;break;default:o=Qt}i=o.bind(null,t,i,e),o=void 0,!Fe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),n?void 0!==o?e.addEventListener(t,i,{capture:!0,passive:o}):e.addEventListener(t,i,!0):void 0!==o?e.addEventListener(t,i,{passive:o}):e.addEventListener(t,i,!1)}function Un(e,t,i,n,o){var s=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var a=n.tag;if(3===a||4===a){var r=n.stateNode.containerInfo;if(r===o||8===r.nodeType&&r.parentNode===o)break;if(4===a)for(a=n.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;a=a.return}for(;null!==r;){if(null===(a=wo(r)))return;if(5===(l=a.tag)||6===l){n=s=a;continue e}r=r.parentNode}}n=n.return}De((function(){var n=s,o=Se(i),a=[];e:{var r=En.get(e);if(void 0!==r){var l=di,d=e;switch(e){case"keypress":if(0===ti(i))break e;case"keydown":case"keyup":l=Ti;break;case"focusin":d="focus",l=mi;break;case"focusout":d="blur",l=mi;break;case"beforeblur":case"afterblur":l=mi;break;case"click":if(2===i.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=ui;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=ki;break;case Tn:case An:case kn:l=gi;break;case Vn:l=Vi;break;case"scroll":l=pi;break;case"wheel":l=Di;break;case"copy":case"cut":case"paste":l=vi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Ai}var h=0!==(4&t),p=!h&&"scroll"===e,c=h?null!==r?r+"Capture":null:r;h=[];for(var u,f=n;null!==f;){var m=(u=f).stateNode;if(5===u.tag&&null!==m&&(u=m,null!==c&&(null!=(m=Ne(f,c))&&h.push(qn(f,m,u)))),p)break;f=f.return}0<h.length&&(r=new l(r,d,null,i,o),a.push({event:r,listeners:h}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(r="mouseover"===e||"pointerover"===e)||i===be||!(d=i.relatedTarget||i.fromElement)||!wo(d)&&!d[mo])&&(l||r)&&(r=o.window===o?o:(r=o.ownerDocument)?r.defaultView||r.parentWindow:window,l?(l=n,null!==(d=(d=i.relatedTarget||i.toElement)?wo(d):null)&&(d!==(p=He(d))||5!==d.tag&&6!==d.tag)&&(d=null)):(l=null,d=n),l!==d)){if(h=ui,m="onMouseLeave",c="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(h=Ai,m="onPointerLeave",c="onPointerEnter",f="pointer"),p=null==l?r:So(l),u=null==d?r:So(d),(r=new h(m,f+"leave",l,i,o)).target=p,r.relatedTarget=u,m=null,wo(o)===n&&((h=new h(c,f+"enter",d,i,o)).target=u,h.relatedTarget=p,m=h),p=m,l&&d)e:{for(c=d,f=0,u=h=l;u;u=Qn(u))f++;for(u=0,m=c;m;m=Qn(m))u++;for(;0<f-u;)h=Qn(h),f--;for(;0<u-f;)c=Qn(c),u--;for(;f--;){if(h===c||null!==c&&h===c.alternate)break e;h=Qn(h),c=Qn(c)}h=null}else h=null;null!==l&&Zn(a,r,l,h,!1),null!==d&&null!==p&&Zn(a,p,d,h,!0)}if("select"===(l=(r=n?So(n):window).nodeName&&r.nodeName.toLowerCase())||"input"===l&&"file"===r.type)var g=Xi;else if(Wi(r))if(Gi)g=an;else{g=on;var y=nn}else(l=r.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===r.type||"radio"===r.type)&&(g=sn);switch(g&&(g=g(e,n))?Ui(a,g,i,o):(y&&y(e,r,n),"focusout"===e&&(y=r._wrapperState)&&y.controlled&&"number"===r.type&&ee(r,"number",r.value)),y=n?So(n):window,e){case"focusin":(Wi(y)||"true"===y.contentEditable)&&(gn=y,yn=n,vn=null);break;case"focusout":vn=yn=gn=null;break;case"mousedown":wn=!0;break;case"contextmenu":case"mouseup":case"dragend":wn=!1,bn(a,i,o);break;case"selectionchange":if(mn)break;case"keydown":case"keyup":bn(a,i,o)}var v;if(Fi)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else _i?ji(e,i)&&(w="onCompositionEnd"):"keydown"===e&&229===i.keyCode&&(w="onCompositionStart");w&&(Oi&&"ko"!==i.locale&&(_i||"onCompositionStart"!==w?"onCompositionEnd"===w&&_i&&(v=ei()):(Kt="value"in(Jt=o)?Jt.value:Jt.textContent,_i=!0)),0<(y=Yn(n,w)).length&&(w=new wi(w,e,null,i,o),a.push({event:w,listeners:y}),v?w.data=v:null!==(v=Ri(i))&&(w.data=v))),(v=Pi?function(e,t){switch(e){case"compositionend":return Ri(t);case"keypress":return 32!==t.which?null:(zi=!0,Bi);case"textInput":return(e=t.data)===Bi&&zi?null:e;default:return null}}(e,i):function(e,t){if(_i)return"compositionend"===e||!Fi&&ji(e,t)?(e=ei(),$t=Kt=Jt=null,_i=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Oi&&"ko"!==t.locale?null:t.data}}(e,i))&&(0<(n=Yn(n,"onBeforeInput")).length&&(o=new wi("onBeforeInput","beforeinput",null,i,o),a.push({event:o,listeners:n}),o.data=v))}zn(a,t)}))}function qn(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Yn(e,t){for(var i=t+"Capture",n=[];null!==e;){var o=e,s=o.stateNode;5===o.tag&&null!==s&&(o=s,null!=(s=Ne(e,i))&&n.unshift(qn(e,s,o)),null!=(s=Ne(e,t))&&n.push(qn(e,s,o))),e=e.return}return n}function Qn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Zn(e,t,i,n,o){for(var s=t._reactName,a=[];null!==i&&i!==n;){var r=i,l=r.alternate,d=r.stateNode;if(null!==l&&l===n)break;5===r.tag&&null!==d&&(r=d,o?null!=(l=Ne(i,s))&&a.unshift(qn(i,l,r)):o||null!=(l=Ne(i,s))&&a.push(qn(i,l,r))),i=i.return}0!==a.length&&e.push({event:t,listeners:a})}var Xn=/\r\n?/g,Gn=/\u0000|\uFFFD/g;function Jn(e){return("string"===typeof e?e:""+e).replace(Xn,"\n").replace(Gn,"")}function Kn(e,t,i){if(t=Jn(t),Jn(e)!==t&&i)throw Error(s(425))}function $n(){}var eo=null,to=null;function io(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var no="function"===typeof setTimeout?setTimeout:void 0,oo="function"===typeof clearTimeout?clearTimeout:void 0,so="function"===typeof Promise?Promise:void 0,ao="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof so?function(e){return so.resolve(null).then(e).catch(ro)}:no;function ro(e){setTimeout((function(){throw e}))}function lo(e,t){var i=t,n=0;do{var o=i.nextSibling;if(e.removeChild(i),o&&8===o.nodeType)if("/$"===(i=o.data)){if(0===n)return e.removeChild(o),void Ht(t);n--}else"$"!==i&&"$?"!==i&&"$!"!==i||n++;i=o}while(i);Ht(t)}function ho(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function po(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var i=e.data;if("$"===i||"$!"===i||"$?"===i){if(0===t)return e;t--}else"/$"===i&&t++}e=e.previousSibling}return null}var co=Math.random().toString(36).slice(2),uo="__reactFiber$"+co,fo="__reactProps$"+co,mo="__reactContainer$"+co,go="__reactEvents$"+co,yo="__reactListeners$"+co,vo="__reactHandles$"+co;function wo(e){var t=e[uo];if(t)return t;for(var i=e.parentNode;i;){if(t=i[mo]||i[uo]){if(i=t.alternate,null!==t.child||null!==i&&null!==i.child)for(e=po(e);null!==e;){if(i=e[uo])return i;e=po(e)}return t}i=(e=i).parentNode}return null}function bo(e){return!(e=e[uo]||e[mo])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function So(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Co(e){return e[fo]||null}var xo=[],Mo=-1;function Io(e){return{current:e}}function To(e){0>Mo||(e.current=xo[Mo],xo[Mo]=null,Mo--)}function Ao(e,t){Mo++,xo[Mo]=e.current,e.current=t}var ko={},Vo=Io(ko),Eo=Io(!1),Do=ko;function No(e,t){var i=e.type.contextTypes;if(!i)return ko;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var o,s={};for(o in i)s[o]=t[o];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Fo(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Lo(){To(Eo),To(Vo)}function Po(e,t,i){if(Vo.current!==ko)throw Error(s(168));Ao(Vo,t),Ao(Eo,i)}function Oo(e,t,i){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return i;for(var o in n=n.getChildContext())if(!(o in t))throw Error(s(108,W(e)||"Unknown",o));return B({},i,n)}function Bo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ko,Do=Vo.current,Ao(Vo,e),Ao(Eo,Eo.current),!0}function zo(e,t,i){var n=e.stateNode;if(!n)throw Error(s(169));i?(e=Oo(e,t,Do),n.__reactInternalMemoizedMergedChildContext=e,To(Eo),To(Vo),Ao(Vo,e)):To(Eo),Ao(Eo,i)}var jo=null,Ro=!1,_o=!1;function Ho(e){null===jo?jo=[e]:jo.push(e)}function Wo(){if(!_o&&null!==jo){_o=!0;var e=0,t=wt;try{var i=jo;for(wt=1;e<i.length;e++){var n=i[e];do{n=n(!0)}while(null!==n)}jo=null,Ro=!1}catch(o){throw null!==jo&&(jo=jo.slice(e+1)),Qe($e,Wo),o}finally{wt=t,_o=!1}}return null}var Uo=[],qo=0,Yo=null,Qo=0,Zo=[],Xo=0,Go=null,Jo=1,Ko="";function $o(e,t){Uo[qo++]=Qo,Uo[qo++]=Yo,Yo=e,Qo=t}function es(e,t,i){Zo[Xo++]=Jo,Zo[Xo++]=Ko,Zo[Xo++]=Go,Go=e;var n=Jo;e=Ko;var o=32-at(n)-1;n&=~(1<<o),i+=1;var s=32-at(t)+o;if(30<s){var a=o-o%5;s=(n&(1<<a)-1).toString(32),n>>=a,o-=a,Jo=1<<32-at(t)+o|i<<o|n,Ko=s+e}else Jo=1<<s|i<<o|n,Ko=e}function ts(e){null!==e.return&&($o(e,1),es(e,1,0))}function is(e){for(;e===Yo;)Yo=Uo[--qo],Uo[qo]=null,Qo=Uo[--qo],Uo[qo]=null;for(;e===Go;)Go=Zo[--Xo],Zo[Xo]=null,Ko=Zo[--Xo],Zo[Xo]=null,Jo=Zo[--Xo],Zo[Xo]=null}var ns=null,os=null,ss=!1,as=null;function rs(e,t){var i=Nd(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,null===(t=e.deletions)?(e.deletions=[i],e.flags|=16):t.push(i)}function ls(e,t){switch(e.tag){case 5:var i=e.type;return null!==(t=1!==t.nodeType||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,os=ho(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,os=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(i=null!==Go?{id:Jo,overflow:Ko}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},(i=Nd(18,null,null,0)).stateNode=t,i.return=e,e.child=i,ns=e,os=null,!0);default:return!1}}function ds(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function hs(e){if(ss){var t=os;if(t){var i=t;if(!ls(e,t)){if(ds(e))throw Error(s(418));t=ho(i.nextSibling);var n=ns;t&&ls(e,t)?rs(n,i):(e.flags=-4097&e.flags|2,ss=!1,ns=e)}}else{if(ds(e))throw Error(s(418));e.flags=-4097&e.flags|2,ss=!1,ns=e}}}function ps(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function cs(e){if(e!==ns)return!1;if(!ss)return ps(e),ss=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!io(e.type,e.memoizedProps)),t&&(t=os)){if(ds(e))throw us(),Error(s(418));for(;t;)rs(e,t),t=ho(t.nextSibling)}if(ps(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var i=e.data;if("/$"===i){if(0===t){os=ho(e.nextSibling);break e}t--}else"$"!==i&&"$!"!==i&&"$?"!==i||t++}e=e.nextSibling}os=null}}else os=ns?ho(e.stateNode.nextSibling):null;return!0}function us(){for(var e=os;e;)e=ho(e.nextSibling)}function fs(){os=ns=null,ss=!1}function ms(e){null===as?as=[e]:as.push(e)}var gs=b.ReactCurrentBatchConfig;function ys(e,t){if(e&&e.defaultProps){for(var i in t=B({},t),e=e.defaultProps)void 0===t[i]&&(t[i]=e[i]);return t}return t}var vs=Io(null),ws=null,bs=null,Ss=null;function Cs(){Ss=bs=ws=null}function xs(e){var t=vs.current;To(vs),e._currentValue=t}function Ms(e,t,i){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===i)break;e=e.return}}function Is(e,t){ws=e,Ss=bs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(br=!0),e.firstContext=null)}function Ts(e){var t=e._currentValue;if(Ss!==e)if(e={context:e,memoizedValue:t,next:null},null===bs){if(null===ws)throw Error(s(308));bs=e,ws.dependencies={lanes:0,firstContext:e}}else bs=bs.next=e;return t}var As=null;function ks(e){null===As?As=[e]:As.push(e)}function Vs(e,t,i,n){var o=t.interleaved;return null===o?(i.next=i,ks(t)):(i.next=o.next,o.next=i),t.interleaved=i,Es(e,n)}function Es(e,t){e.lanes|=t;var i=e.alternate;for(null!==i&&(i.lanes|=t),i=e,e=e.return;null!==e;)e.childLanes|=t,null!==(i=e.alternate)&&(i.childLanes|=t),i=e,e=e.return;return 3===i.tag?i.stateNode:null}var Ds=!1;function Ns(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ls(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ps(e,t,i){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Vl)){var o=n.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),n.pending=t,Es(e,i)}return null===(o=n.interleaved)?(t.next=t,ks(n)):(t.next=o.next,o.next=t),n.interleaved=t,Es(e,i)}function Os(e,t,i){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&i))){var n=t.lanes;i|=n&=e.pendingLanes,t.lanes=i,vt(e,i)}}function Bs(e,t){var i=e.updateQueue,n=e.alternate;if(null!==n&&i===(n=n.updateQueue)){var o=null,s=null;if(null!==(i=i.firstBaseUpdate)){do{var a={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};null===s?o=s=a:s=s.next=a,i=i.next}while(null!==i);null===s?o=s=t:s=s.next=t}else o=s=t;return i={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:n.shared,effects:n.effects},void(e.updateQueue=i)}null===(e=i.lastBaseUpdate)?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function zs(e,t,i,n){var o=e.updateQueue;Ds=!1;var s=o.firstBaseUpdate,a=o.lastBaseUpdate,r=o.shared.pending;if(null!==r){o.shared.pending=null;var l=r,d=l.next;l.next=null,null===a?s=d:a.next=d,a=l;var h=e.alternate;null!==h&&((r=(h=h.updateQueue).lastBaseUpdate)!==a&&(null===r?h.firstBaseUpdate=d:r.next=d,h.lastBaseUpdate=l))}if(null!==s){var p=o.baseState;for(a=0,h=d=l=null,r=s;;){var c=r.lane,u=r.eventTime;if((n&c)===c){null!==h&&(h=h.next={eventTime:u,lane:0,tag:r.tag,payload:r.payload,callback:r.callback,next:null});e:{var f=e,m=r;switch(c=t,u=i,m.tag){case 1:if("function"===typeof(f=m.payload)){p=f.call(u,p,c);break e}p=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(c="function"===typeof(f=m.payload)?f.call(u,p,c):f)||void 0===c)break e;p=B({},p,c);break e;case 2:Ds=!0}}null!==r.callback&&0!==r.lane&&(e.flags|=64,null===(c=o.effects)?o.effects=[r]:c.push(r))}else u={eventTime:u,lane:c,tag:r.tag,payload:r.payload,callback:r.callback,next:null},null===h?(d=h=u,l=p):h=h.next=u,a|=c;if(null===(r=r.next)){if(null===(r=o.shared.pending))break;r=(c=r).next,c.next=null,o.lastBaseUpdate=c,o.shared.pending=null}}if(null===h&&(l=p),o.baseState=l,o.firstBaseUpdate=d,o.lastBaseUpdate=h,null!==(t=o.shared.interleaved)){o=t;do{a|=o.lane,o=o.next}while(o!==t)}else null===s&&(o.shared.lanes=0);Bl|=a,e.lanes=a,e.memoizedState=p}}function js(e,t,i){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],o=n.callback;if(null!==o){if(n.callback=null,n=i,"function"!==typeof o)throw Error(s(191,o));o.call(n)}}}var Rs=(new n.Component).refs;function _s(e,t,i,n){i=null===(i=i(n,t=e.memoizedState))||void 0===i?t:B({},t,i),e.memoizedState=i,0===e.lanes&&(e.updateQueue.baseState=i)}var Hs={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,i){e=e._reactInternals;var n=td(),o=id(e),s=Ls(n,o);s.payload=t,void 0!==i&&null!==i&&(s.callback=i),null!==(t=Ps(e,s,o))&&(nd(t,e,o,n),Os(t,e,o))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var n=td(),o=id(e),s=Ls(n,o);s.tag=1,s.payload=t,void 0!==i&&null!==i&&(s.callback=i),null!==(t=Ps(e,s,o))&&(nd(t,e,o,n),Os(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=td(),n=id(e),o=Ls(i,n);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=Ps(e,o,n))&&(nd(t,e,n,i),Os(t,e,n))}};function Ws(e,t,i,n,o,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!ln(i,n)||!ln(o,s))}function Us(e,t,i){var n=!1,o=ko,s=t.contextType;return"object"===typeof s&&null!==s?s=Ts(s):(o=Fo(t)?Do:Vo.current,s=(n=null!==(n=t.contextTypes)&&void 0!==n)?No(e,o):ko),t=new t(i,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Hs,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=s),t}function qs(e,t,i,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(i,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(i,n),t.state!==e&&Hs.enqueueReplaceState(t,t.state,null)}function Ys(e,t,i,n){var o=e.stateNode;o.props=i,o.state=e.memoizedState,o.refs=Rs,Ns(e);var s=t.contextType;"object"===typeof s&&null!==s?o.context=Ts(s):(s=Fo(t)?Do:Vo.current,o.context=No(e,s)),o.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(_s(e,t,s,i),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&Hs.enqueueReplaceState(o,o.state,null),zs(e,i,o,n),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function Qs(e,t,i){if(null!==(e=i.ref)&&"function"!==typeof e&&"object"!==typeof e){if(i._owner){if(i=i._owner){if(1!==i.tag)throw Error(s(309));var n=i.stateNode}if(!n)throw Error(s(147,e));var o=n,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=o.refs;t===Rs&&(t=o.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!i._owner)throw Error(s(290,e))}return e}function Zs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xs(e){return(0,e._init)(e._payload)}function Gs(e){function t(t,i){if(e){var n=t.deletions;null===n?(t.deletions=[i],t.flags|=16):n.push(i)}}function i(i,n){if(!e)return null;for(;null!==n;)t(i,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Ld(e,t)).index=0,e.sibling=null,e}function a(t,i,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<i?(t.flags|=2,i):n:(t.flags|=2,i):(t.flags|=1048576,i)}function r(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,i,n){return null===t||6!==t.tag?((t=zd(i,e.mode,n)).return=e,t):((t=o(t,i)).return=e,t)}function d(e,t,i,n){var s=i.type;return s===x?p(e,t,i.props.children,n,i.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===N&&Xs(s)===t.type)?((n=o(t,i.props)).ref=Qs(e,t,i),n.return=e,n):((n=Pd(i.type,i.key,i.props,null,e.mode,n)).ref=Qs(e,t,i),n.return=e,n)}function h(e,t,i,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==i.containerInfo||t.stateNode.implementation!==i.implementation?((t=jd(i,e.mode,n)).return=e,t):((t=o(t,i.children||[])).return=e,t)}function p(e,t,i,n,s){return null===t||7!==t.tag?((t=Od(i,e.mode,n,s)).return=e,t):((t=o(t,i)).return=e,t)}function c(e,t,i){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=zd(""+t,e.mode,i)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case S:return(i=Pd(t.type,t.key,t.props,null,e.mode,i)).ref=Qs(e,null,t),i.return=e,i;case C:return(t=jd(t,e.mode,i)).return=e,t;case N:return c(e,(0,t._init)(t._payload),i)}if(te(t)||P(t))return(t=Od(t,e.mode,i,null)).return=e,t;Zs(e,t)}return null}function u(e,t,i,n){var o=null!==t?t.key:null;if("string"===typeof i&&""!==i||"number"===typeof i)return null!==o?null:l(e,t,""+i,n);if("object"===typeof i&&null!==i){switch(i.$$typeof){case S:return i.key===o?d(e,t,i,n):null;case C:return i.key===o?h(e,t,i,n):null;case N:return u(e,t,(o=i._init)(i._payload),n)}if(te(i)||P(i))return null!==o?null:p(e,t,i,n,null);Zs(e,i)}return null}function f(e,t,i,n,o){if("string"===typeof n&&""!==n||"number"===typeof n)return l(t,e=e.get(i)||null,""+n,o);if("object"===typeof n&&null!==n){switch(n.$$typeof){case S:return d(t,e=e.get(null===n.key?i:n.key)||null,n,o);case C:return h(t,e=e.get(null===n.key?i:n.key)||null,n,o);case N:return f(e,t,i,(0,n._init)(n._payload),o)}if(te(n)||P(n))return p(t,e=e.get(i)||null,n,o,null);Zs(t,n)}return null}function m(o,s,r,l){for(var d=null,h=null,p=s,m=s=0,g=null;null!==p&&m<r.length;m++){p.index>m?(g=p,p=null):g=p.sibling;var y=u(o,p,r[m],l);if(null===y){null===p&&(p=g);break}e&&p&&null===y.alternate&&t(o,p),s=a(y,s,m),null===h?d=y:h.sibling=y,h=y,p=g}if(m===r.length)return i(o,p),ss&&$o(o,m),d;if(null===p){for(;m<r.length;m++)null!==(p=c(o,r[m],l))&&(s=a(p,s,m),null===h?d=p:h.sibling=p,h=p);return ss&&$o(o,m),d}for(p=n(o,p);m<r.length;m++)null!==(g=f(p,o,m,r[m],l))&&(e&&null!==g.alternate&&p.delete(null===g.key?m:g.key),s=a(g,s,m),null===h?d=g:h.sibling=g,h=g);return e&&p.forEach((function(e){return t(o,e)})),ss&&$o(o,m),d}function g(o,r,l,d){var h=P(l);if("function"!==typeof h)throw Error(s(150));if(null==(l=h.call(l)))throw Error(s(151));for(var p=h=null,m=r,g=r=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=u(o,m,v.value,d);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(o,m),r=a(w,r,g),null===p?h=w:p.sibling=w,p=w,m=y}if(v.done)return i(o,m),ss&&$o(o,g),h;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=c(o,v.value,d))&&(r=a(v,r,g),null===p?h=v:p.sibling=v,p=v);return ss&&$o(o,g),h}for(m=n(o,m);!v.done;g++,v=l.next())null!==(v=f(m,o,g,v.value,d))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),r=a(v,r,g),null===p?h=v:p.sibling=v,p=v);return e&&m.forEach((function(e){return t(o,e)})),ss&&$o(o,g),h}return function e(n,s,a,l){if("object"===typeof a&&null!==a&&a.type===x&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case S:e:{for(var d=a.key,h=s;null!==h;){if(h.key===d){if((d=a.type)===x){if(7===h.tag){i(n,h.sibling),(s=o(h,a.props.children)).return=n,n=s;break e}}else if(h.elementType===d||"object"===typeof d&&null!==d&&d.$$typeof===N&&Xs(d)===h.type){i(n,h.sibling),(s=o(h,a.props)).ref=Qs(n,h,a),s.return=n,n=s;break e}i(n,h);break}t(n,h),h=h.sibling}a.type===x?((s=Od(a.props.children,n.mode,l,a.key)).return=n,n=s):((l=Pd(a.type,a.key,a.props,null,n.mode,l)).ref=Qs(n,s,a),l.return=n,n=l)}return r(n);case C:e:{for(h=a.key;null!==s;){if(s.key===h){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){i(n,s.sibling),(s=o(s,a.children||[])).return=n,n=s;break e}i(n,s);break}t(n,s),s=s.sibling}(s=jd(a,n.mode,l)).return=n,n=s}return r(n);case N:return e(n,s,(h=a._init)(a._payload),l)}if(te(a))return m(n,s,a,l);if(P(a))return g(n,s,a,l);Zs(n,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(i(n,s.sibling),(s=o(s,a)).return=n,n=s):(i(n,s),(s=zd(a,n.mode,l)).return=n,n=s),r(n)):i(n,s)}}var Js=Gs(!0),Ks=Gs(!1),$s={},ea=Io($s),ta=Io($s),ia=Io($s);function na(e){if(e===$s)throw Error(s(174));return e}function oa(e,t){switch(Ao(ia,t),Ao(ta,e),Ao(ea,$s),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}To(ea),Ao(ea,t)}function sa(){To(ea),To(ta),To(ia)}function aa(e){na(ia.current);var t=na(ea.current),i=le(t,e.type);t!==i&&(Ao(ta,e),Ao(ea,i))}function ra(e){ta.current===e&&(To(ea),To(ta))}var la=Io(0);function da(e){for(var t=e;null!==t;){if(13===t.tag){var i=t.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||"$?"===i.data||"$!"===i.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ha=[];function pa(){for(var e=0;e<ha.length;e++)ha[e]._workInProgressVersionPrimary=null;ha.length=0}var ca=b.ReactCurrentDispatcher,ua=b.ReactCurrentBatchConfig,fa=0,ma=null,ga=null,ya=null,va=!1,wa=!1,ba=0,Sa=0;function Ca(){throw Error(s(321))}function xa(e,t){if(null===t)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!rn(e[i],t[i]))return!1;return!0}function Ma(e,t,i,n,o,a){if(fa=a,ma=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ca.current=null===e||null===e.memoizedState?rr:lr,e=i(n,o),wa){a=0;do{if(wa=!1,ba=0,25<=a)throw Error(s(301));a+=1,ya=ga=null,t.updateQueue=null,ca.current=dr,e=i(n,o)}while(wa)}if(ca.current=ar,t=null!==ga&&null!==ga.next,fa=0,ya=ga=ma=null,va=!1,t)throw Error(s(300));return e}function Ia(){var e=0!==ba;return ba=0,e}function Ta(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ya?ma.memoizedState=ya=e:ya=ya.next=e,ya}function Aa(){if(null===ga){var e=ma.alternate;e=null!==e?e.memoizedState:null}else e=ga.next;var t=null===ya?ma.memoizedState:ya.next;if(null!==t)ya=t,ga=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ga=e).memoizedState,baseState:ga.baseState,baseQueue:ga.baseQueue,queue:ga.queue,next:null},null===ya?ma.memoizedState=ya=e:ya=ya.next=e}return ya}function ka(e,t){return"function"===typeof t?t(e):t}function Va(e){var t=Aa(),i=t.queue;if(null===i)throw Error(s(311));i.lastRenderedReducer=e;var n=ga,o=n.baseQueue,a=i.pending;if(null!==a){if(null!==o){var r=o.next;o.next=a.next,a.next=r}n.baseQueue=o=a,i.pending=null}if(null!==o){a=o.next,n=n.baseState;var l=r=null,d=null,h=a;do{var p=h.lane;if((fa&p)===p)null!==d&&(d=d.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),n=h.hasEagerState?h.eagerState:e(n,h.action);else{var c={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};null===d?(l=d=c,r=n):d=d.next=c,ma.lanes|=p,Bl|=p}h=h.next}while(null!==h&&h!==a);null===d?r=n:d.next=l,rn(n,t.memoizedState)||(br=!0),t.memoizedState=n,t.baseState=r,t.baseQueue=d,i.lastRenderedState=n}if(null!==(e=i.interleaved)){o=e;do{a=o.lane,ma.lanes|=a,Bl|=a,o=o.next}while(o!==e)}else null===o&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function Ea(e){var t=Aa(),i=t.queue;if(null===i)throw Error(s(311));i.lastRenderedReducer=e;var n=i.dispatch,o=i.pending,a=t.memoizedState;if(null!==o){i.pending=null;var r=o=o.next;do{a=e(a,r.action),r=r.next}while(r!==o);rn(a,t.memoizedState)||(br=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),i.lastRenderedState=a}return[a,n]}function Da(){}function Na(e,t){var i=ma,n=Aa(),o=t(),a=!rn(n.memoizedState,o);if(a&&(n.memoizedState=o,br=!0),n=n.queue,Ua(Pa.bind(null,i,n,e),[e]),n.getSnapshot!==t||a||null!==ya&&1&ya.memoizedState.tag){if(i.flags|=2048,ja(9,La.bind(null,i,n,o,t),void 0,null),null===El)throw Error(s(349));0!==(30&fa)||Fa(i,t,o)}return o}function Fa(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},null===(t=ma.updateQueue)?(t={lastEffect:null,stores:null},ma.updateQueue=t,t.stores=[e]):null===(i=t.stores)?t.stores=[e]:i.push(e)}function La(e,t,i,n){t.value=i,t.getSnapshot=n,Oa(t)&&Ba(e)}function Pa(e,t,i){return i((function(){Oa(t)&&Ba(e)}))}function Oa(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!rn(e,i)}catch(n){return!0}}function Ba(e){var t=Es(e,1);null!==t&&nd(t,e,1,-1)}function za(e){var t=Ta();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ka,lastRenderedState:e},t.queue=e,e=e.dispatch=ir.bind(null,ma,e),[t.memoizedState,e]}function ja(e,t,i,n){return e={tag:e,create:t,destroy:i,deps:n,next:null},null===(t=ma.updateQueue)?(t={lastEffect:null,stores:null},ma.updateQueue=t,t.lastEffect=e.next=e):null===(i=t.lastEffect)?t.lastEffect=e.next=e:(n=i.next,i.next=e,e.next=n,t.lastEffect=e),e}function Ra(){return Aa().memoizedState}function _a(e,t,i,n){var o=Ta();ma.flags|=e,o.memoizedState=ja(1|t,i,void 0,void 0===n?null:n)}function Ha(e,t,i,n){var o=Aa();n=void 0===n?null:n;var s=void 0;if(null!==ga){var a=ga.memoizedState;if(s=a.destroy,null!==n&&xa(n,a.deps))return void(o.memoizedState=ja(t,i,s,n))}ma.flags|=e,o.memoizedState=ja(1|t,i,s,n)}function Wa(e,t){return _a(8390656,8,e,t)}function Ua(e,t){return Ha(2048,8,e,t)}function qa(e,t){return Ha(4,2,e,t)}function Ya(e,t){return Ha(4,4,e,t)}function Qa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Za(e,t,i){return i=null!==i&&void 0!==i?i.concat([e]):null,Ha(4,4,Qa.bind(null,t,e),i)}function Xa(){}function Ga(e,t){var i=Aa();t=void 0===t?null:t;var n=i.memoizedState;return null!==n&&null!==t&&xa(t,n[1])?n[0]:(i.memoizedState=[e,t],e)}function Ja(e,t){var i=Aa();t=void 0===t?null:t;var n=i.memoizedState;return null!==n&&null!==t&&xa(t,n[1])?n[0]:(e=e(),i.memoizedState=[e,t],e)}function Ka(e,t,i){return 0===(21&fa)?(e.baseState&&(e.baseState=!1,br=!0),e.memoizedState=i):(rn(i,t)||(i=mt(),ma.lanes|=i,Bl|=i,e.baseState=!0),t)}function $a(e,t){var i=wt;wt=0!==i&&4>i?i:4,e(!0);var n=ua.transition;ua.transition={};try{e(!1),t()}finally{wt=i,ua.transition=n}}function er(){return Aa().memoizedState}function tr(e,t,i){var n=id(e);if(i={lane:n,action:i,hasEagerState:!1,eagerState:null,next:null},nr(e))or(t,i);else if(null!==(i=Vs(e,t,i,n))){nd(i,e,n,td()),sr(i,t,n)}}function ir(e,t,i){var n=id(e),o={lane:n,action:i,hasEagerState:!1,eagerState:null,next:null};if(nr(e))or(t,o);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,r=s(a,i);if(o.hasEagerState=!0,o.eagerState=r,rn(r,a)){var l=t.interleaved;return null===l?(o.next=o,ks(t)):(o.next=l.next,l.next=o),void(t.interleaved=o)}}catch(d){}null!==(i=Vs(e,t,o,n))&&(nd(i,e,n,o=td()),sr(i,t,n))}}function nr(e){var t=e.alternate;return e===ma||null!==t&&t===ma}function or(e,t){wa=va=!0;var i=e.pending;null===i?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function sr(e,t,i){if(0!==(4194240&i)){var n=t.lanes;i|=n&=e.pendingLanes,t.lanes=i,vt(e,i)}}var ar={readContext:Ts,useCallback:Ca,useContext:Ca,useEffect:Ca,useImperativeHandle:Ca,useInsertionEffect:Ca,useLayoutEffect:Ca,useMemo:Ca,useReducer:Ca,useRef:Ca,useState:Ca,useDebugValue:Ca,useDeferredValue:Ca,useTransition:Ca,useMutableSource:Ca,useSyncExternalStore:Ca,useId:Ca,unstable_isNewReconciler:!1},rr={readContext:Ts,useCallback:function(e,t){return Ta().memoizedState=[e,void 0===t?null:t],e},useContext:Ts,useEffect:Wa,useImperativeHandle:function(e,t,i){return i=null!==i&&void 0!==i?i.concat([e]):null,_a(4194308,4,Qa.bind(null,t,e),i)},useLayoutEffect:function(e,t){return _a(4194308,4,e,t)},useInsertionEffect:function(e,t){return _a(4,2,e,t)},useMemo:function(e,t){var i=Ta();return t=void 0===t?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var n=Ta();return t=void 0!==i?i(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=tr.bind(null,ma,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},Ta().memoizedState=e},useState:za,useDebugValue:Xa,useDeferredValue:function(e){return Ta().memoizedState=e},useTransition:function(){var e=za(!1),t=e[0];return e=$a.bind(null,e[1]),Ta().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var n=ma,o=Ta();if(ss){if(void 0===i)throw Error(s(407));i=i()}else{if(i=t(),null===El)throw Error(s(349));0!==(30&fa)||Fa(n,t,i)}o.memoizedState=i;var a={value:i,getSnapshot:t};return o.queue=a,Wa(Pa.bind(null,n,a,e),[e]),n.flags|=2048,ja(9,La.bind(null,n,a,i,t),void 0,null),i},useId:function(){var e=Ta(),t=El.identifierPrefix;if(ss){var i=Ko;t=":"+t+"R"+(i=(Jo&~(1<<32-at(Jo)-1)).toString(32)+i),0<(i=ba++)&&(t+="H"+i.toString(32)),t+=":"}else t=":"+t+"r"+(i=Sa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},lr={readContext:Ts,useCallback:Ga,useContext:Ts,useEffect:Ua,useImperativeHandle:Za,useInsertionEffect:qa,useLayoutEffect:Ya,useMemo:Ja,useReducer:Va,useRef:Ra,useState:function(){return Va(ka)},useDebugValue:Xa,useDeferredValue:function(e){return Ka(Aa(),ga.memoizedState,e)},useTransition:function(){return[Va(ka)[0],Aa().memoizedState]},useMutableSource:Da,useSyncExternalStore:Na,useId:er,unstable_isNewReconciler:!1},dr={readContext:Ts,useCallback:Ga,useContext:Ts,useEffect:Ua,useImperativeHandle:Za,useInsertionEffect:qa,useLayoutEffect:Ya,useMemo:Ja,useReducer:Ea,useRef:Ra,useState:function(){return Ea(ka)},useDebugValue:Xa,useDeferredValue:function(e){var t=Aa();return null===ga?t.memoizedState=e:Ka(t,ga.memoizedState,e)},useTransition:function(){return[Ea(ka)[0],Aa().memoizedState]},useMutableSource:Da,useSyncExternalStore:Na,useId:er,unstable_isNewReconciler:!1};function hr(e,t){try{var i="",n=t;do{i+=_(n),n=n.return}while(n);var o=i}catch(s){o="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:o,digest:null}}function pr(e,t,i){return{value:e,source:null,stack:null!=i?i:null,digest:null!=t?t:null}}function cr(e,t){try{console.error(t.value)}catch(i){setTimeout((function(){throw i}))}}var ur="function"===typeof WeakMap?WeakMap:Map;function fr(e,t,i){(i=Ls(-1,i)).tag=3,i.payload={element:null};var n=t.value;return i.callback=function(){ql||(ql=!0,Yl=n),cr(0,t)},i}function mr(e,t,i){(i=Ls(-1,i)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var o=t.value;i.payload=function(){return n(o)},i.callback=function(){cr(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(i.callback=function(){cr(0,t),"function"!==typeof n&&(null===Ql?Ql=new Set([this]):Ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),i}function gr(e,t,i){var n=e.pingCache;if(null===n){n=e.pingCache=new ur;var o=new Set;n.set(t,o)}else void 0===(o=n.get(t))&&(o=new Set,n.set(t,o));o.has(i)||(o.add(i),e=Td.bind(null,e,t,i),t.then(e,e))}function yr(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vr(e,t,i,n,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,1===i.tag&&(null===i.alternate?i.tag=17:((t=Ls(-1,1)).tag=2,Ps(i,t,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var wr=b.ReactCurrentOwner,br=!1;function Sr(e,t,i,n){t.child=null===e?Ks(t,null,i,n):Js(t,e.child,i,n)}function Cr(e,t,i,n,o){i=i.render;var s=t.ref;return Is(t,o),n=Ma(e,t,i,n,s,o),i=Ia(),null===e||br?(ss&&i&&ts(t),t.flags|=1,Sr(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,qr(e,t,o))}function xr(e,t,i,n,o){if(null===e){var s=i.type;return"function"!==typeof s||Fd(s)||void 0!==s.defaultProps||null!==i.compare||void 0!==i.defaultProps?((e=Pd(i.type,null,n,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Mr(e,t,s,n,o))}if(s=e.child,0===(e.lanes&o)){var a=s.memoizedProps;if((i=null!==(i=i.compare)?i:ln)(a,n)&&e.ref===t.ref)return qr(e,t,o)}return t.flags|=1,(e=Ld(s,n)).ref=t.ref,e.return=t,t.child=e}function Mr(e,t,i,n,o){if(null!==e){var s=e.memoizedProps;if(ln(s,n)&&e.ref===t.ref){if(br=!1,t.pendingProps=n=s,0===(e.lanes&o))return t.lanes=e.lanes,qr(e,t,o);0!==(131072&e.flags)&&(br=!0)}}return Ar(e,t,i,n,o)}function Ir(e,t,i){var n=t.pendingProps,o=n.children,s=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ao(Ll,Fl),Fl|=i;else{if(0===(1073741824&i))return e=null!==s?s.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ao(Ll,Fl),Fl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==s?s.baseLanes:i,Ao(Ll,Fl),Fl|=n}else null!==s?(n=s.baseLanes|i,t.memoizedState=null):n=i,Ao(Ll,Fl),Fl|=n;return Sr(e,t,o,i),t.child}function Tr(e,t){var i=t.ref;(null===e&&null!==i||null!==e&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function Ar(e,t,i,n,o){var s=Fo(i)?Do:Vo.current;return s=No(t,s),Is(t,o),i=Ma(e,t,i,n,s,o),n=Ia(),null===e||br?(ss&&n&&ts(t),t.flags|=1,Sr(e,t,i,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,qr(e,t,o))}function kr(e,t,i,n,o){if(Fo(i)){var s=!0;Bo(t)}else s=!1;if(Is(t,o),null===t.stateNode)Ur(e,t),Us(t,i,n),Ys(t,i,n,o),n=!0;else if(null===e){var a=t.stateNode,r=t.memoizedProps;a.props=r;var l=a.context,d=i.contextType;"object"===typeof d&&null!==d?d=Ts(d):d=No(t,d=Fo(i)?Do:Vo.current);var h=i.getDerivedStateFromProps,p="function"===typeof h||"function"===typeof a.getSnapshotBeforeUpdate;p||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(r!==n||l!==d)&&qs(t,a,n,d),Ds=!1;var c=t.memoizedState;a.state=c,zs(t,n,a,o),l=t.memoizedState,r!==n||c!==l||Eo.current||Ds?("function"===typeof h&&(_s(t,i,h,n),l=t.memoizedState),(r=Ds||Ws(t,i,r,n,c,l,d))?(p||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=d,n=r):("function"===typeof a.componentDidMount&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,Fs(e,t),r=t.memoizedProps,d=t.type===t.elementType?r:ys(t.type,r),a.props=d,p=t.pendingProps,c=a.context,"object"===typeof(l=i.contextType)&&null!==l?l=Ts(l):l=No(t,l=Fo(i)?Do:Vo.current);var u=i.getDerivedStateFromProps;(h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(r!==p||c!==l)&&qs(t,a,n,l),Ds=!1,c=t.memoizedState,a.state=c,zs(t,n,a,o);var f=t.memoizedState;r!==p||c!==f||Eo.current||Ds?("function"===typeof u&&(_s(t,i,u,n),f=t.memoizedState),(d=Ds||Ws(t,i,d,n,c,f,l)||!1)?(h||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(n,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||r===e.memoizedProps&&c===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||r===e.memoizedProps&&c===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),a.props=n,a.state=f,a.context=l,n=d):("function"!==typeof a.componentDidUpdate||r===e.memoizedProps&&c===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||r===e.memoizedProps&&c===e.memoizedState||(t.flags|=1024),n=!1)}return Vr(e,t,i,n,s,o)}function Vr(e,t,i,n,o,s){Tr(e,t);var a=0!==(128&t.flags);if(!n&&!a)return o&&zo(t,i,!1),qr(e,t,s);n=t.stateNode,wr.current=t;var r=a&&"function"!==typeof i.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&a?(t.child=Js(t,e.child,null,s),t.child=Js(t,null,r,s)):Sr(e,t,r,s),t.memoizedState=n.state,o&&zo(t,i,!0),t.child}function Er(e){var t=e.stateNode;t.pendingContext?Po(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Po(0,t.context,!1),oa(e,t.containerInfo)}function Dr(e,t,i,n,o){return fs(),ms(o),t.flags|=256,Sr(e,t,i,n),t.child}var Nr,Fr,Lr,Pr,Or={dehydrated:null,treeContext:null,retryLane:0};function Br(e){return{baseLanes:e,cachePool:null,transitions:null}}function zr(e,t,i){var n,o=t.pendingProps,a=la.current,r=!1,l=0!==(128&t.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&0!==(2&a)),n?(r=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ao(la,1&a),null===e)return hs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=o.children,e=o.fallback,r?(o=t.mode,r=t.child,l={mode:"hidden",children:l},0===(1&o)&&null!==r?(r.childLanes=0,r.pendingProps=l):r=Bd(l,o,0,null),e=Od(e,o,i,null),r.return=t,e.return=t,r.sibling=e,t.child=r,t.child.memoizedState=Br(i),t.memoizedState=Or,e):jr(t,l));if(null!==(a=e.memoizedState)&&null!==(n=a.dehydrated))return function(e,t,i,n,o,a,r){if(i)return 256&t.flags?(t.flags&=-257,Rr(e,t,r,n=pr(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=n.fallback,o=t.mode,n=Bd({mode:"visible",children:n.children},o,0,null),(a=Od(a,o,r,null)).flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,0!==(1&t.mode)&&Js(t,e.child,null,r),t.child.memoizedState=Br(r),t.memoizedState=Or,a);if(0===(1&t.mode))return Rr(e,t,r,null);if("$!"===o.data){if(n=o.nextSibling&&o.nextSibling.dataset)var l=n.dgst;return n=l,Rr(e,t,r,n=pr(a=Error(s(419)),n,void 0))}if(l=0!==(r&e.childLanes),br||l){if(null!==(n=El)){switch(r&-r){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(n.suspendedLanes|r))?0:o)&&o!==a.retryLane&&(a.retryLane=o,Es(e,o),nd(n,e,o,-1))}return gd(),Rr(e,t,r,n=pr(Error(s(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=kd.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,os=ho(o.nextSibling),ns=t,ss=!0,as=null,null!==e&&(Zo[Xo++]=Jo,Zo[Xo++]=Ko,Zo[Xo++]=Go,Jo=e.id,Ko=e.overflow,Go=t),t=jr(t,n.children),t.flags|=4096,t)}(e,t,l,o,n,a,i);if(r){r=o.fallback,l=t.mode,n=(a=e.child).sibling;var d={mode:"hidden",children:o.children};return 0===(1&l)&&t.child!==a?((o=t.child).childLanes=0,o.pendingProps=d,t.deletions=null):(o=Ld(a,d)).subtreeFlags=14680064&a.subtreeFlags,null!==n?r=Ld(n,r):(r=Od(r,l,i,null)).flags|=2,r.return=t,o.return=t,o.sibling=r,t.child=o,o=r,r=t.child,l=null===(l=e.child.memoizedState)?Br(i):{baseLanes:l.baseLanes|i,cachePool:null,transitions:l.transitions},r.memoizedState=l,r.childLanes=e.childLanes&~i,t.memoizedState=Or,o}return e=(r=e.child).sibling,o=Ld(r,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=i),o.return=t,o.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=o,t.memoizedState=null,o}function jr(e,t){return(t=Bd({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Rr(e,t,i,n){return null!==n&&ms(n),Js(t,e.child,null,i),(e=jr(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function _r(e,t,i){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Ms(e.return,t,i)}function Hr(e,t,i,n,o){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:i,tailMode:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=i,s.tailMode=o)}function Wr(e,t,i){var n=t.pendingProps,o=n.revealOrder,s=n.tail;if(Sr(e,t,n.children,i),0!==(2&(n=la.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&_r(e,i,t);else if(19===e.tag)_r(e,i,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ao(la,n),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(i=t.child,o=null;null!==i;)null!==(e=i.alternate)&&null===da(e)&&(o=i),i=i.sibling;null===(i=o)?(o=t.child,t.child=null):(o=i.sibling,i.sibling=null),Hr(t,!1,o,i,s);break;case"backwards":for(i=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===da(e)){t.child=o;break}e=o.sibling,o.sibling=i,i=o,o=e}Hr(t,!0,i,null,s);break;case"together":Hr(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ur(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qr(e,t,i){if(null!==e&&(t.dependencies=e.dependencies),Bl|=t.lanes,0===(i&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(i=Ld(e=t.child,e.pendingProps),t.child=i,i.return=t;null!==e.sibling;)e=e.sibling,(i=i.sibling=Ld(e,e.pendingProps)).return=t;i.sibling=null}return t.child}function Yr(e,t){if(!ss)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;null!==t;)null!==t.alternate&&(i=t),t=t.sibling;null===i?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var n=null;null!==i;)null!==i.alternate&&(n=i),i=i.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Qr(e){var t=null!==e.alternate&&e.alternate.child===e.child,i=0,n=0;if(t)for(var o=e.child;null!==o;)i|=o.lanes|o.childLanes,n|=14680064&o.subtreeFlags,n|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)i|=o.lanes|o.childLanes,n|=o.subtreeFlags,n|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=n,e.childLanes=i,t}function Zr(e,t,i){var n=t.pendingProps;switch(is(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qr(t),null;case 1:case 17:return Fo(t.type)&&Lo(),Qr(t),null;case 3:return n=t.stateNode,sa(),To(Eo),To(Vo),pa(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(cs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==as&&(rd(as),as=null))),Fr(e,t),Qr(t),null;case 5:ra(t);var o=na(ia.current);if(i=t.type,null!==e&&null!=t.stateNode)Lr(e,t,i,n,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(s(166));return Qr(t),null}if(e=na(ea.current),cs(t)){n=t.stateNode,i=t.type;var a=t.memoizedProps;switch(n[uo]=t,n[fo]=a,e=0!==(1&t.mode),i){case"dialog":jn("cancel",n),jn("close",n);break;case"iframe":case"object":case"embed":jn("load",n);break;case"video":case"audio":for(o=0;o<Pn.length;o++)jn(Pn[o],n);break;case"source":jn("error",n);break;case"img":case"image":case"link":jn("error",n),jn("load",n);break;case"details":jn("toggle",n);break;case"input":G(n,a),jn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},jn("invalid",n);break;case"textarea":oe(n,a),jn("invalid",n)}for(var l in ve(i,a),o=null,a)if(a.hasOwnProperty(l)){var d=a[l];"children"===l?"string"===typeof d?n.textContent!==d&&(!0!==a.suppressHydrationWarning&&Kn(n.textContent,d,e),o=["children",d]):"number"===typeof d&&n.textContent!==""+d&&(!0!==a.suppressHydrationWarning&&Kn(n.textContent,d,e),o=["children",""+d]):r.hasOwnProperty(l)&&null!=d&&"onScroll"===l&&jn("scroll",n)}switch(i){case"input":Y(n),$(n,a,!0);break;case"textarea":Y(n),ae(n);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(n.onclick=$n)}n=o,t.updateQueue=n,null!==n&&(t.flags|=4)}else{l=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=re(i)),"http://www.w3.org/1999/xhtml"===e?"script"===i?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=l.createElement(i,{is:n.is}):(e=l.createElement(i),"select"===i&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,i),e[uo]=t,e[fo]=n,Nr(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(i,n),i){case"dialog":jn("cancel",e),jn("close",e),o=n;break;case"iframe":case"object":case"embed":jn("load",e),o=n;break;case"video":case"audio":for(o=0;o<Pn.length;o++)jn(Pn[o],e);o=n;break;case"source":jn("error",e),o=n;break;case"img":case"image":case"link":jn("error",e),jn("load",e),o=n;break;case"details":jn("toggle",e),o=n;break;case"input":G(e,n),o=X(e,n),jn("invalid",e);break;case"option":default:o=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},o=B({},n,{value:void 0}),jn("invalid",e);break;case"textarea":oe(e,n),o=ne(e,n),jn("invalid",e)}for(a in ve(i,o),d=o)if(d.hasOwnProperty(a)){var h=d[a];"style"===a?ge(e,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&pe(e,h):"children"===a?"string"===typeof h?("textarea"!==i||""!==h)&&ce(e,h):"number"===typeof h&&ce(e,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(r.hasOwnProperty(a)?null!=h&&"onScroll"===a&&jn("scroll",e):null!=h&&w(e,a,h,l))}switch(i){case"input":Y(e),$(e,n,!1);break;case"textarea":Y(e),ae(e);break;case"option":null!=n.value&&e.setAttribute("value",""+U(n.value));break;case"select":e.multiple=!!n.multiple,null!=(a=n.value)?ie(e,!!n.multiple,a,!1):null!=n.defaultValue&&ie(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=$n)}switch(i){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Qr(t),null;case 6:if(e&&null!=t.stateNode)Pr(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(s(166));if(i=na(ia.current),na(ea.current),cs(t)){if(n=t.stateNode,i=t.memoizedProps,n[uo]=t,(a=n.nodeValue!==i)&&null!==(e=ns))switch(e.tag){case 3:Kn(n.nodeValue,i,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Kn(n.nodeValue,i,0!==(1&e.mode))}a&&(t.flags|=4)}else(n=(9===i.nodeType?i:i.ownerDocument).createTextNode(n))[uo]=t,t.stateNode=n}return Qr(t),null;case 13:if(To(la),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ss&&null!==os&&0!==(1&t.mode)&&0===(128&t.flags))us(),fs(),t.flags|=98560,a=!1;else if(a=cs(t),null!==n&&null!==n.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[uo]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Qr(t),a=!1}else null!==as&&(rd(as),as=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=i,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&la.current)?0===Pl&&(Pl=3):gd())),null!==t.updateQueue&&(t.flags|=4),Qr(t),null);case 4:return sa(),Fr(e,t),null===e&&Hn(t.stateNode.containerInfo),Qr(t),null;case 10:return xs(t.type._context),Qr(t),null;case 19:if(To(la),null===(a=t.memoizedState))return Qr(t),null;if(n=0!==(128&t.flags),null===(l=a.rendering))if(n)Yr(a,!1);else{if(0!==Pl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=da(e))){for(t.flags|=128,Yr(a,!1),null!==(n=l.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=i,i=t.child;null!==i;)e=n,(a=i).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Ao(la,1&la.current|2),t.child}e=e.sibling}null!==a.tail&&Je()>Wl&&(t.flags|=128,n=!0,Yr(a,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=da(l))){if(t.flags|=128,n=!0,null!==(i=e.updateQueue)&&(t.updateQueue=i,t.flags|=4),Yr(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ss)return Qr(t),null}else 2*Je()-a.renderingStartTime>Wl&&1073741824!==i&&(t.flags|=128,n=!0,Yr(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(i=a.last)?i.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Je(),t.sibling=null,i=la.current,Ao(la,n?1&i|2:1&i),t):(Qr(t),null);case 22:case 23:return cd(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Fl)&&(Qr(t),6&t.subtreeFlags&&(t.flags|=8192)):Qr(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Xr(e,t){switch(is(t),t.tag){case 1:return Fo(t.type)&&Lo(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return sa(),To(Eo),To(Vo),pa(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ra(t),null;case 13:if(To(la),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return To(la),null;case 4:return sa(),null;case 10:return xs(t.type._context),null;case 22:case 23:return cd(),null;default:return null}}Nr=function(e,t){for(var i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Fr=function(){},Lr=function(e,t,i,n){var o=e.memoizedProps;if(o!==n){e=t.stateNode,na(ea.current);var s,a=null;switch(i){case"input":o=X(e,o),n=X(e,n),a=[];break;case"select":o=B({},o,{value:void 0}),n=B({},n,{value:void 0}),a=[];break;case"textarea":o=ne(e,o),n=ne(e,n),a=[];break;default:"function"!==typeof o.onClick&&"function"===typeof n.onClick&&(e.onclick=$n)}for(h in ve(i,n),i=null,o)if(!n.hasOwnProperty(h)&&o.hasOwnProperty(h)&&null!=o[h])if("style"===h){var l=o[h];for(s in l)l.hasOwnProperty(s)&&(i||(i={}),i[s]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(r.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in n){var d=n[h];if(l=null!=o?o[h]:void 0,n.hasOwnProperty(h)&&d!==l&&(null!=d||null!=l))if("style"===h)if(l){for(s in l)!l.hasOwnProperty(s)||d&&d.hasOwnProperty(s)||(i||(i={}),i[s]="");for(s in d)d.hasOwnProperty(s)&&l[s]!==d[s]&&(i||(i={}),i[s]=d[s])}else i||(a||(a=[]),a.push(h,i)),i=d;else"dangerouslySetInnerHTML"===h?(d=d?d.__html:void 0,l=l?l.__html:void 0,null!=d&&l!==d&&(a=a||[]).push(h,d)):"children"===h?"string"!==typeof d&&"number"!==typeof d||(a=a||[]).push(h,""+d):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(r.hasOwnProperty(h)?(null!=d&&"onScroll"===h&&jn("scroll",e),a||l===d||(a=[])):(a=a||[]).push(h,d))}i&&(a=a||[]).push("style",i);var h=a;(t.updateQueue=h)&&(t.flags|=4)}},Pr=function(e,t,i,n){i!==n&&(t.flags|=4)};var Gr=!1,Jr=!1,Kr="function"===typeof WeakSet?WeakSet:Set,$r=null;function el(e,t){var i=e.ref;if(null!==i)if("function"===typeof i)try{i(null)}catch(n){Id(e,t,n)}else i.current=null}function tl(e,t,i){try{i()}catch(n){Id(e,t,n)}}var il=!1;function nl(e,t,i){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var o=n=n.next;do{if((o.tag&e)===e){var s=o.destroy;o.destroy=void 0,void 0!==s&&tl(t,i,s)}o=o.next}while(o!==n)}}function ol(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var i=t=t.next;do{if((i.tag&e)===e){var n=i.create;i.destroy=n()}i=i.next}while(i!==t)}}function sl(e){var t=e.ref;if(null!==t){var i=e.stateNode;e.tag,e=i,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[uo],delete t[fo],delete t[go],delete t[yo],delete t[vo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rl(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||rl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function dl(e,t,i){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===i.nodeType?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(8===i.nodeType?(t=i.parentNode).insertBefore(e,i):(t=i).appendChild(e),null!==(i=i._reactRootContainer)&&void 0!==i||null!==t.onclick||(t.onclick=$n));else if(4!==n&&null!==(e=e.child))for(dl(e,t,i),e=e.sibling;null!==e;)dl(e,t,i),e=e.sibling}function hl(e,t,i){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(4!==n&&null!==(e=e.child))for(hl(e,t,i),e=e.sibling;null!==e;)hl(e,t,i),e=e.sibling}var pl=null,cl=!1;function ul(e,t,i){for(i=i.child;null!==i;)fl(e,t,i),i=i.sibling}function fl(e,t,i){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(ot,i)}catch(r){}switch(i.tag){case 5:Jr||el(i,t);case 6:var n=pl,o=cl;pl=null,ul(e,t,i),cl=o,null!==(pl=n)&&(cl?(e=pl,i=i.stateNode,8===e.nodeType?e.parentNode.removeChild(i):e.removeChild(i)):pl.removeChild(i.stateNode));break;case 18:null!==pl&&(cl?(e=pl,i=i.stateNode,8===e.nodeType?lo(e.parentNode,i):1===e.nodeType&&lo(e,i),Ht(e)):lo(pl,i.stateNode));break;case 4:n=pl,o=cl,pl=i.stateNode.containerInfo,cl=!0,ul(e,t,i),pl=n,cl=o;break;case 0:case 11:case 14:case 15:if(!Jr&&(null!==(n=i.updateQueue)&&null!==(n=n.lastEffect))){o=n=n.next;do{var s=o,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&tl(i,t,a),o=o.next}while(o!==n)}ul(e,t,i);break;case 1:if(!Jr&&(el(i,t),"function"===typeof(n=i.stateNode).componentWillUnmount))try{n.props=i.memoizedProps,n.state=i.memoizedState,n.componentWillUnmount()}catch(r){Id(i,t,r)}ul(e,t,i);break;case 21:ul(e,t,i);break;case 22:1&i.mode?(Jr=(n=Jr)||null!==i.memoizedState,ul(e,t,i),Jr=n):ul(e,t,i);break;default:ul(e,t,i)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var i=e.stateNode;null===i&&(i=e.stateNode=new Kr),t.forEach((function(t){var n=Vd.bind(null,e,t);i.has(t)||(i.add(t),t.then(n,n))}))}}function gl(e,t){var i=t.deletions;if(null!==i)for(var n=0;n<i.length;n++){var o=i[n];try{var a=e,r=t,l=r;e:for(;null!==l;){switch(l.tag){case 5:pl=l.stateNode,cl=!1;break e;case 3:case 4:pl=l.stateNode.containerInfo,cl=!0;break e}l=l.return}if(null===pl)throw Error(s(160));fl(a,r,o),pl=null,cl=!1;var d=o.alternate;null!==d&&(d.return=null),o.return=null}catch(h){Id(o,t,h)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var i=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&n){try{nl(3,e,e.return),ol(3,e)}catch(g){Id(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Id(e,e.return,g)}}break;case 1:gl(t,e),vl(e),512&n&&null!==i&&el(i,i.return);break;case 5:if(gl(t,e),vl(e),512&n&&null!==i&&el(i,i.return),32&e.flags){var o=e.stateNode;try{ce(o,"")}catch(g){Id(e,e.return,g)}}if(4&n&&null!=(o=e.stateNode)){var a=e.memoizedProps,r=null!==i?i.memoizedProps:a,l=e.type,d=e.updateQueue;if(e.updateQueue=null,null!==d)try{"input"===l&&"radio"===a.type&&null!=a.name&&J(o,a),we(l,r);var h=we(l,a);for(r=0;r<d.length;r+=2){var p=d[r],c=d[r+1];"style"===p?ge(o,c):"dangerouslySetInnerHTML"===p?pe(o,c):"children"===p?ce(o,c):w(o,p,c,h)}switch(l){case"input":K(o,a);break;case"textarea":se(o,a);break;case"select":var u=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?ie(o,!!a.multiple,f,!1):u!==!!a.multiple&&(null!=a.defaultValue?ie(o,!!a.multiple,a.defaultValue,!0):ie(o,!!a.multiple,a.multiple?[]:"",!1))}o[fo]=a}catch(g){Id(e,e.return,g)}}break;case 6:if(gl(t,e),vl(e),4&n){if(null===e.stateNode)throw Error(s(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(g){Id(e,e.return,g)}}break;case 3:if(gl(t,e),vl(e),4&n&&null!==i&&i.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(g){Id(e,e.return,g)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(o=e.child).flags&&(a=null!==o.memoizedState,o.stateNode.isHidden=a,!a||null!==o.alternate&&null!==o.alternate.memoizedState||(Hl=Je())),4&n&&ml(e);break;case 22:if(p=null!==i&&null!==i.memoizedState,1&e.mode?(Jr=(h=Jr)||p,gl(t,e),Jr=h):gl(t,e),vl(e),8192&n){if(h=null!==e.memoizedState,(e.stateNode.isHidden=h)&&!p&&0!==(1&e.mode))for($r=e,p=e.child;null!==p;){for(c=$r=p;null!==$r;){switch(f=(u=$r).child,u.tag){case 0:case 11:case 14:case 15:nl(4,u,u.return);break;case 1:el(u,u.return);var m=u.stateNode;if("function"===typeof m.componentWillUnmount){n=u,i=u.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Id(n,i,g)}}break;case 5:el(u,u.return);break;case 22:if(null!==u.memoizedState){Cl(c);continue}}null!==f?(f.return=u,$r=f):Cl(c)}p=p.sibling}e:for(p=null,c=e;;){if(5===c.tag){if(null===p){p=c;try{o=c.stateNode,h?"function"===typeof(a=o.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=c.stateNode,r=void 0!==(d=c.memoizedProps.style)&&null!==d&&d.hasOwnProperty("display")?d.display:null,l.style.display=me("display",r))}catch(g){Id(e,e.return,g)}}}else if(6===c.tag){if(null===p)try{c.stateNode.nodeValue=h?"":c.memoizedProps}catch(g){Id(e,e.return,g)}}else if((22!==c.tag&&23!==c.tag||null===c.memoizedState||c===e)&&null!==c.child){c.child.return=c,c=c.child;continue}if(c===e)break e;for(;null===c.sibling;){if(null===c.return||c.return===e)break e;p===c&&(p=null),c=c.return}p===c&&(p=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:gl(t,e),vl(e),4&n&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var i=e.return;null!==i;){if(rl(i)){var n=i;break e}i=i.return}throw Error(s(160))}switch(n.tag){case 5:var o=n.stateNode;32&n.flags&&(ce(o,""),n.flags&=-33),hl(e,ll(e),o);break;case 3:case 4:var a=n.stateNode.containerInfo;dl(e,ll(e),a);break;default:throw Error(s(161))}}catch(r){Id(e,e.return,r)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wl(e,t,i){$r=e,bl(e,t,i)}function bl(e,t,i){for(var n=0!==(1&e.mode);null!==$r;){var o=$r,s=o.child;if(22===o.tag&&n){var a=null!==o.memoizedState||Gr;if(!a){var r=o.alternate,l=null!==r&&null!==r.memoizedState||Jr;r=Gr;var d=Jr;if(Gr=a,(Jr=l)&&!d)for($r=o;null!==$r;)l=(a=$r).child,22===a.tag&&null!==a.memoizedState?xl(o):null!==l?(l.return=a,$r=l):xl(o);for(;null!==s;)$r=s,bl(s,t,i),s=s.sibling;$r=o,Gr=r,Jr=d}Sl(e)}else 0!==(8772&o.subtreeFlags)&&null!==s?(s.return=o,$r=s):Sl(e)}}function Sl(e){for(;null!==$r;){var t=$r;if(0!==(8772&t.flags)){var i=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Jr||ol(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Jr)if(null===i)n.componentDidMount();else{var o=t.elementType===t.type?i.memoizedProps:ys(t.type,i.memoizedProps);n.componentDidUpdate(o,i.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&js(t,a,n);break;case 3:var r=t.updateQueue;if(null!==r){if(i=null,null!==t.child)switch(t.child.tag){case 5:case 1:i=t.child.stateNode}js(t,r,i)}break;case 5:var l=t.stateNode;if(null===i&&4&t.flags){i=l;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&i.focus();break;case"img":d.src&&(i.src=d.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var h=t.alternate;if(null!==h){var p=h.memoizedState;if(null!==p){var c=p.dehydrated;null!==c&&Ht(c)}}}break;default:throw Error(s(163))}Jr||512&t.flags&&sl(t)}catch(u){Id(t,t.return,u)}}if(t===e){$r=null;break}if(null!==(i=t.sibling)){i.return=t.return,$r=i;break}$r=t.return}}function Cl(e){for(;null!==$r;){var t=$r;if(t===e){$r=null;break}var i=t.sibling;if(null!==i){i.return=t.return,$r=i;break}$r=t.return}}function xl(e){for(;null!==$r;){var t=$r;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{ol(4,t)}catch(l){Id(t,i,l)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var o=t.return;try{n.componentDidMount()}catch(l){Id(t,o,l)}}var s=t.return;try{sl(t)}catch(l){Id(t,s,l)}break;case 5:var a=t.return;try{sl(t)}catch(l){Id(t,a,l)}}}catch(l){Id(t,t.return,l)}if(t===e){$r=null;break}var r=t.sibling;if(null!==r){r.return=t.return,$r=r;break}$r=t.return}}var Ml,Il=Math.ceil,Tl=b.ReactCurrentDispatcher,Al=b.ReactCurrentOwner,kl=b.ReactCurrentBatchConfig,Vl=0,El=null,Dl=null,Nl=0,Fl=0,Ll=Io(0),Pl=0,Ol=null,Bl=0,zl=0,jl=0,Rl=null,_l=null,Hl=0,Wl=1/0,Ul=null,ql=!1,Yl=null,Ql=null,Zl=!1,Xl=null,Gl=0,Jl=0,Kl=null,$l=-1,ed=0;function td(){return 0!==(6&Vl)?Je():-1!==$l?$l:$l=Je()}function id(e){return 0===(1&e.mode)?1:0!==(2&Vl)&&0!==Nl?Nl&-Nl:null!==gs.transition?(0===ed&&(ed=mt()),ed):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Gt(e.type)}function nd(e,t,i,n){if(50<Jl)throw Jl=0,Kl=null,Error(s(185));yt(e,i,n),0!==(2&Vl)&&e===El||(e===El&&(0===(2&Vl)&&(zl|=i),4===Pl&&ld(e,Nl)),od(e,n),1===i&&0===Vl&&0===(1&t.mode)&&(Wl=Je()+500,Ro&&Wo()))}function od(e,t){var i=e.callbackNode;!function(e,t){for(var i=e.suspendedLanes,n=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),r=1<<a,l=o[a];-1===l?0!==(r&i)&&0===(r&n)||(o[a]=ut(r,t)):l<=t&&(e.expiredLanes|=r),s&=~r}}(e,t);var n=ct(e,e===El?Nl:0);if(0===n)null!==i&&Ze(i),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=i&&Ze(i),1===t)0===e.tag?function(e){Ro=!0,Ho(e)}(dd.bind(null,e)):Ho(dd.bind(null,e)),ao((function(){0===(6&Vl)&&Wo()})),i=null;else{switch(bt(n)){case 1:i=$e;break;case 4:i=et;break;case 16:default:i=tt;break;case 536870912:i=nt}i=Ed(i,sd.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function sd(e,t){if($l=-1,ed=0,0!==(6&Vl))throw Error(s(327));var i=e.callbackNode;if(xd()&&e.callbackNode!==i)return null;var n=ct(e,e===El?Nl:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=yd(e,n);else{t=n;var o=Vl;Vl|=2;var a=md();for(El===e&&Nl===t||(Ul=null,Wl=Je()+500,ud(e,t));;)try{wd();break}catch(l){fd(e,l)}Cs(),Tl.current=a,Vl=o,null!==Dl?t=0:(El=null,Nl=0,t=Pl)}if(0!==t){if(2===t&&(0!==(o=ft(e))&&(n=o,t=ad(e,o))),1===t)throw i=Ol,ud(e,0),ld(e,n),od(e,Je()),i;if(6===t)ld(e,n);else{if(o=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var i=t.updateQueue;if(null!==i&&null!==(i=i.stores))for(var n=0;n<i.length;n++){var o=i[n],s=o.getSnapshot;o=o.value;try{if(!rn(s(),o))return!1}catch(r){return!1}}}if(i=t.child,16384&t.subtreeFlags&&null!==i)i.return=t,t=i;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=yd(e,n))&&(0!==(a=ft(e))&&(n=a,t=ad(e,a))),1===t))throw i=Ol,ud(e,0),ld(e,n),od(e,Je()),i;switch(e.finishedWork=o,e.finishedLanes=n,t){case 0:case 1:throw Error(s(345));case 2:case 5:Cd(e,_l,Ul);break;case 3:if(ld(e,n),(130023424&n)===n&&10<(t=Hl+500-Je())){if(0!==ct(e,0))break;if(((o=e.suspendedLanes)&n)!==n){td(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=no(Cd.bind(null,e,_l,Ul),t);break}Cd(e,_l,Ul);break;case 4:if(ld(e,n),(4194240&n)===n)break;for(t=e.eventTimes,o=-1;0<n;){var r=31-at(n);a=1<<r,(r=t[r])>o&&(o=r),n&=~a}if(n=o,10<(n=(120>(n=Je()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Il(n/1960))-n)){e.timeoutHandle=no(Cd.bind(null,e,_l,Ul),n);break}Cd(e,_l,Ul);break;default:throw Error(s(329))}}}return od(e,Je()),e.callbackNode===i?sd.bind(null,e):null}function ad(e,t){var i=Rl;return e.current.memoizedState.isDehydrated&&(ud(e,t).flags|=256),2!==(e=yd(e,t))&&(t=_l,_l=i,null!==t&&rd(t)),e}function rd(e){null===_l?_l=e:_l.push.apply(_l,e)}function ld(e,t){for(t&=~jl,t&=~zl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-at(t),n=1<<i;e[i]=-1,t&=~n}}function dd(e){if(0!==(6&Vl))throw Error(s(327));xd();var t=ct(e,0);if(0===(1&t))return od(e,Je()),null;var i=yd(e,t);if(0!==e.tag&&2===i){var n=ft(e);0!==n&&(t=n,i=ad(e,n))}if(1===i)throw i=Ol,ud(e,0),ld(e,t),od(e,Je()),i;if(6===i)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cd(e,_l,Ul),od(e,Je()),null}function hd(e,t){var i=Vl;Vl|=1;try{return e(t)}finally{0===(Vl=i)&&(Wl=Je()+500,Ro&&Wo())}}function pd(e){null!==Xl&&0===Xl.tag&&0===(6&Vl)&&xd();var t=Vl;Vl|=1;var i=kl.transition,n=wt;try{if(kl.transition=null,wt=1,e)return e()}finally{wt=n,kl.transition=i,0===(6&(Vl=t))&&Wo()}}function cd(){Fl=Ll.current,To(Ll)}function ud(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(-1!==i&&(e.timeoutHandle=-1,oo(i)),null!==Dl)for(i=Dl.return;null!==i;){var n=i;switch(is(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Lo();break;case 3:sa(),To(Eo),To(Vo),pa();break;case 5:ra(n);break;case 4:sa();break;case 13:case 19:To(la);break;case 10:xs(n.type._context);break;case 22:case 23:cd()}i=i.return}if(El=e,Dl=e=Ld(e.current,null),Nl=Fl=t,Pl=0,Ol=null,jl=zl=Bl=0,_l=Rl=null,null!==As){for(t=0;t<As.length;t++)if(null!==(n=(i=As[t]).interleaved)){i.interleaved=null;var o=n.next,s=i.pending;if(null!==s){var a=s.next;s.next=o,n.next=a}i.pending=n}As=null}return e}function fd(e,t){for(;;){var i=Dl;try{if(Cs(),ca.current=ar,va){for(var n=ma.memoizedState;null!==n;){var o=n.queue;null!==o&&(o.pending=null),n=n.next}va=!1}if(fa=0,ya=ga=ma=null,wa=!1,ba=0,Al.current=null,null===i||null===i.return){Pl=1,Ol=t,Dl=null;break}e:{var a=e,r=i.return,l=i,d=t;if(t=Nl,l.flags|=32768,null!==d&&"object"===typeof d&&"function"===typeof d.then){var h=d,p=l,c=p.tag;if(0===(1&p.mode)&&(0===c||11===c||15===c)){var u=p.alternate;u?(p.updateQueue=u.updateQueue,p.memoizedState=u.memoizedState,p.lanes=u.lanes):(p.updateQueue=null,p.memoizedState=null)}var f=yr(r);if(null!==f){f.flags&=-257,vr(f,r,l,0,t),1&f.mode&&gr(a,h,t),d=h;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(d),t.updateQueue=g}else m.add(d);break e}if(0===(1&t)){gr(a,h,t),gd();break e}d=Error(s(426))}else if(ss&&1&l.mode){var y=yr(r);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),vr(y,r,l,0,t),ms(hr(d,l));break e}}a=d=hr(d,l),4!==Pl&&(Pl=2),null===Rl?Rl=[a]:Rl.push(a),a=r;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Bs(a,fr(0,d,t));break e;case 1:l=d;var v=a.type,w=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Ql||!Ql.has(w)))){a.flags|=65536,t&=-t,a.lanes|=t,Bs(a,mr(a,l,t));break e}}a=a.return}while(null!==a)}Sd(i)}catch(b){t=b,Dl===i&&null!==i&&(Dl=i=i.return);continue}break}}function md(){var e=Tl.current;return Tl.current=ar,null===e?ar:e}function gd(){0!==Pl&&3!==Pl&&2!==Pl||(Pl=4),null===El||0===(268435455&Bl)&&0===(268435455&zl)||ld(El,Nl)}function yd(e,t){var i=Vl;Vl|=2;var n=md();for(El===e&&Nl===t||(Ul=null,ud(e,t));;)try{vd();break}catch(o){fd(e,o)}if(Cs(),Vl=i,Tl.current=n,null!==Dl)throw Error(s(261));return El=null,Nl=0,Pl}function vd(){for(;null!==Dl;)bd(Dl)}function wd(){for(;null!==Dl&&!Xe();)bd(Dl)}function bd(e){var t=Ml(e.alternate,e,Fl);e.memoizedProps=e.pendingProps,null===t?Sd(e):Dl=t,Al.current=null}function Sd(e){var t=e;do{var i=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(i=Zr(i,t,Fl)))return void(Dl=i)}else{if(null!==(i=Xr(i,t)))return i.flags&=32767,void(Dl=i);if(null===e)return Pl=6,void(Dl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Dl=t);Dl=t=e}while(null!==t);0===Pl&&(Pl=5)}function Cd(e,t,i){var n=wt,o=kl.transition;try{kl.transition=null,wt=1,function(e,t,i,n){do{xd()}while(null!==Xl);if(0!==(6&Vl))throw Error(s(327));i=e.finishedWork;var o=e.finishedLanes;if(null===i)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=i.lanes|i.childLanes;if(function(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<i;){var o=31-at(i),s=1<<o;t[o]=0,n[o]=-1,e[o]=-1,i&=~s}}(e,a),e===El&&(Dl=El=null,Nl=0),0===(2064&i.subtreeFlags)&&0===(2064&i.flags)||Zl||(Zl=!0,Ed(tt,(function(){return xd(),null}))),a=0!==(15990&i.flags),0!==(15990&i.subtreeFlags)||a){a=kl.transition,kl.transition=null;var r=wt;wt=1;var l=Vl;Vl|=4,Al.current=null,function(e,t){if(eo=Ut,un(e=cn())){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(i=(i=e.ownerDocument)&&i.defaultView||window).getSelection&&i.getSelection();if(n&&0!==n.rangeCount){i=n.anchorNode;var o=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{i.nodeType,a.nodeType}catch(S){i=null;break e}var r=0,l=-1,d=-1,h=0,p=0,c=e,u=null;t:for(;;){for(var f;c!==i||0!==o&&3!==c.nodeType||(l=r+o),c!==a||0!==n&&3!==c.nodeType||(d=r+n),3===c.nodeType&&(r+=c.nodeValue.length),null!==(f=c.firstChild);)u=c,c=f;for(;;){if(c===e)break t;if(u===i&&++h===o&&(l=r),u===a&&++p===n&&(d=r),null!==(f=c.nextSibling))break;u=(c=u).parentNode}c=f}i=-1===l||-1===d?null:{start:l,end:d}}else i=null}i=i||{start:0,end:0}}else i=null;for(to={focusedElem:e,selectionRange:i},Ut=!1,$r=t;null!==$r;)if(e=(t=$r).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$r=e;else for(;null!==$r;){t=$r;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:ys(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(S){Id(t,t.return,S)}if(null!==(e=t.sibling)){e.return=t.return,$r=e;break}$r=t.return}m=il,il=!1}(e,i),yl(i,e),fn(to),Ut=!!eo,to=eo=null,e.current=i,wl(i,e,o),Ge(),Vl=l,wt=r,kl.transition=a}else e.current=i;if(Zl&&(Zl=!1,Xl=e,Gl=o),a=e.pendingLanes,0===a&&(Ql=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(i.stateNode),od(e,Je()),null!==t)for(n=e.onRecoverableError,i=0;i<t.length;i++)o=t[i],n(o.value,{componentStack:o.stack,digest:o.digest});if(ql)throw ql=!1,e=Yl,Yl=null,e;0!==(1&Gl)&&0!==e.tag&&xd(),a=e.pendingLanes,0!==(1&a)?e===Kl?Jl++:(Jl=0,Kl=e):Jl=0,Wo()}(e,t,i,n)}finally{kl.transition=o,wt=n}return null}function xd(){if(null!==Xl){var e=bt(Gl),t=kl.transition,i=wt;try{if(kl.transition=null,wt=16>e?16:e,null===Xl)var n=!1;else{if(e=Xl,Xl=null,Gl=0,0!==(6&Vl))throw Error(s(331));var o=Vl;for(Vl|=4,$r=e.current;null!==$r;){var a=$r,r=a.child;if(0!==(16&$r.flags)){var l=a.deletions;if(null!==l){for(var d=0;d<l.length;d++){var h=l[d];for($r=h;null!==$r;){var p=$r;switch(p.tag){case 0:case 11:case 15:nl(8,p,a)}var c=p.child;if(null!==c)c.return=p,$r=c;else for(;null!==$r;){var u=(p=$r).sibling,f=p.return;if(al(p),p===h){$r=null;break}if(null!==u){u.return=f,$r=u;break}$r=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}$r=a}}if(0!==(2064&a.subtreeFlags)&&null!==r)r.return=a,$r=r;else e:for(;null!==$r;){if(0!==(2048&(a=$r).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,$r=v;break e}$r=a.return}}var w=e.current;for($r=w;null!==$r;){var b=(r=$r).child;if(0!==(2064&r.subtreeFlags)&&null!==b)b.return=r,$r=b;else e:for(r=w;null!==$r;){if(0!==(2048&(l=$r).flags))try{switch(l.tag){case 0:case 11:case 15:ol(9,l)}}catch(C){Id(l,l.return,C)}if(l===r){$r=null;break e}var S=l.sibling;if(null!==S){S.return=l.return,$r=S;break e}$r=l.return}}if(Vl=o,Wo(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(ot,e)}catch(C){}n=!0}return n}finally{wt=i,kl.transition=t}}return!1}function Md(e,t,i){e=Ps(e,t=fr(0,t=hr(i,t),1),1),t=td(),null!==e&&(yt(e,1,t),od(e,t))}function Id(e,t,i){if(3===e.tag)Md(e,e,i);else for(;null!==t;){if(3===t.tag){Md(t,e,i);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Ql||!Ql.has(n))){t=Ps(t,e=mr(t,e=hr(i,e),1),1),e=td(),null!==t&&(yt(t,1,e),od(t,e));break}}t=t.return}}function Td(e,t,i){var n=e.pingCache;null!==n&&n.delete(t),t=td(),e.pingedLanes|=e.suspendedLanes&i,El===e&&(Nl&i)===i&&(4===Pl||3===Pl&&(130023424&Nl)===Nl&&500>Je()-Hl?ud(e,0):jl|=i),od(e,t)}function Ad(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ht,0===(130023424&(ht<<=1))&&(ht=4194304)));var i=td();null!==(e=Es(e,t))&&(yt(e,t,i),od(e,i))}function kd(e){var t=e.memoizedState,i=0;null!==t&&(i=t.retryLane),Ad(e,i)}function Vd(e,t){var i=0;switch(e.tag){case 13:var n=e.stateNode,o=e.memoizedState;null!==o&&(i=o.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(s(314))}null!==n&&n.delete(t),Ad(e,i)}function Ed(e,t){return Qe(e,t)}function Dd(e,t,i,n){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nd(e,t,i,n){return new Dd(e,t,i,n)}function Fd(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ld(e,t){var i=e.alternate;return null===i?((i=Nd(e.tag,t,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=14680064&e.flags,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Pd(e,t,i,n,o,a){var r=2;if(n=e,"function"===typeof e)Fd(e)&&(r=1);else if("string"===typeof e)r=5;else e:switch(e){case x:return Od(i.children,o,a,t);case M:r=8,o|=8;break;case I:return(e=Nd(12,i,t,2|o)).elementType=I,e.lanes=a,e;case V:return(e=Nd(13,i,t,o)).elementType=V,e.lanes=a,e;case E:return(e=Nd(19,i,t,o)).elementType=E,e.lanes=a,e;case F:return Bd(i,o,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:r=10;break e;case A:r=9;break e;case k:r=11;break e;case D:r=14;break e;case N:r=16,n=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Nd(r,i,t,o)).elementType=e,t.type=n,t.lanes=a,t}function Od(e,t,i,n){return(e=Nd(7,e,n,t)).lanes=i,e}function Bd(e,t,i,n){return(e=Nd(22,e,n,t)).elementType=F,e.lanes=i,e.stateNode={isHidden:!1},e}function zd(e,t,i){return(e=Nd(6,e,null,t)).lanes=i,e}function jd(e,t,i){return(t=Nd(4,null!==e.children?e.children:[],e.key,t)).lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Rd(e,t,i,n,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=n,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function _d(e,t,i,n,o,s,a,r,l){return e=new Rd(e,t,i,r,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Nd(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ns(s),e}function Hd(e){if(!e)return ko;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Fo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var i=e.type;if(Fo(i))return Oo(e,i,t)}return t}function Wd(e,t,i,n,o,s,a,r,l){return(e=_d(i,n,!0,e,0,s,0,r,l)).context=Hd(null),i=e.current,(s=Ls(n=td(),o=id(i))).callback=void 0!==t&&null!==t?t:null,Ps(i,s,o),e.current.lanes=o,yt(e,o,n),od(e,n),e}function Ud(e,t,i,n){var o=t.current,s=td(),a=id(o);return i=Hd(i),null===t.context?t.context=i:t.pendingContext=i,(t=Ls(s,a)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Ps(o,t,a))&&(nd(e,o,a,s),Os(e,o,a)),a}function qd(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Yd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var i=e.retryLane;e.retryLane=0!==i&&i<t?i:t}}function Qd(e,t){Yd(e,t),(e=e.alternate)&&Yd(e,t)}Ml=function(e,t,i){if(null!==e)if(e.memoizedProps!==t.pendingProps||Eo.current)br=!0;else{if(0===(e.lanes&i)&&0===(128&t.flags))return br=!1,function(e,t,i){switch(t.tag){case 3:Er(t),fs();break;case 5:aa(t);break;case 1:Fo(t.type)&&Bo(t);break;case 4:oa(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,o=t.memoizedProps.value;Ao(vs,n._currentValue),n._currentValue=o;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Ao(la,1&la.current),t.flags|=128,null):0!==(i&t.child.childLanes)?zr(e,t,i):(Ao(la,1&la.current),null!==(e=qr(e,t,i))?e.sibling:null);Ao(la,1&la.current);break;case 19:if(n=0!==(i&t.childLanes),0!==(128&e.flags)){if(n)return Wr(e,t,i);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ao(la,la.current),n)break;return null;case 22:case 23:return t.lanes=0,Ir(e,t,i)}return qr(e,t,i)}(e,t,i);br=0!==(131072&e.flags)}else br=!1,ss&&0!==(1048576&t.flags)&&es(t,Qo,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Ur(e,t),e=t.pendingProps;var o=No(t,Vo.current);Is(t,i),o=Ma(null,t,n,e,o,i);var a=Ia();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Fo(n)?(a=!0,Bo(t)):a=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Ns(t),o.updater=Hs,t.stateNode=o,o._reactInternals=t,Ys(t,n,e,i),t=Vr(null,t,n,!0,a,i)):(t.tag=0,ss&&a&&ts(t),Sr(null,t,o,i),t=t.child),t;case 16:n=t.elementType;e:{switch(Ur(e,t),e=t.pendingProps,n=(o=n._init)(n._payload),t.type=n,o=t.tag=function(e){if("function"===typeof e)return Fd(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===k)return 11;if(e===D)return 14}return 2}(n),e=ys(n,e),o){case 0:t=Ar(null,t,n,e,i);break e;case 1:t=kr(null,t,n,e,i);break e;case 11:t=Cr(null,t,n,e,i);break e;case 14:t=xr(null,t,n,ys(n.type,e),i);break e}throw Error(s(306,n,""))}return t;case 0:return n=t.type,o=t.pendingProps,Ar(e,t,n,o=t.elementType===n?o:ys(n,o),i);case 1:return n=t.type,o=t.pendingProps,kr(e,t,n,o=t.elementType===n?o:ys(n,o),i);case 3:e:{if(Er(t),null===e)throw Error(s(387));n=t.pendingProps,o=(a=t.memoizedState).element,Fs(e,t),zs(t,n,null,i);var r=t.memoizedState;if(n=r.element,a.isDehydrated){if(a={element:n,isDehydrated:!1,cache:r.cache,pendingSuspenseBoundaries:r.pendingSuspenseBoundaries,transitions:r.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Dr(e,t,n,i,o=hr(Error(s(423)),t));break e}if(n!==o){t=Dr(e,t,n,i,o=hr(Error(s(424)),t));break e}for(os=ho(t.stateNode.containerInfo.firstChild),ns=t,ss=!0,as=null,i=Ks(t,null,n,i),t.child=i;i;)i.flags=-3&i.flags|4096,i=i.sibling}else{if(fs(),n===o){t=qr(e,t,i);break e}Sr(e,t,n,i)}t=t.child}return t;case 5:return aa(t),null===e&&hs(t),n=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,r=o.children,io(n,o)?r=null:null!==a&&io(n,a)&&(t.flags|=32),Tr(e,t),Sr(e,t,r,i),t.child;case 6:return null===e&&hs(t),null;case 13:return zr(e,t,i);case 4:return oa(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Js(t,null,n,i):Sr(e,t,n,i),t.child;case 11:return n=t.type,o=t.pendingProps,Cr(e,t,n,o=t.elementType===n?o:ys(n,o),i);case 7:return Sr(e,t,t.pendingProps,i),t.child;case 8:case 12:return Sr(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(n=t.type._context,o=t.pendingProps,a=t.memoizedProps,r=o.value,Ao(vs,n._currentValue),n._currentValue=r,null!==a)if(rn(a.value,r)){if(a.children===o.children&&!Eo.current){t=qr(e,t,i);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){r=a.child;for(var d=l.firstContext;null!==d;){if(d.context===n){if(1===a.tag){(d=Ls(-1,i&-i)).tag=2;var h=a.updateQueue;if(null!==h){var p=(h=h.shared).pending;null===p?d.next=d:(d.next=p.next,p.next=d),h.pending=d}}a.lanes|=i,null!==(d=a.alternate)&&(d.lanes|=i),Ms(a.return,i,t),l.lanes|=i;break}d=d.next}}else if(10===a.tag)r=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(r=a.return))throw Error(s(341));r.lanes|=i,null!==(l=r.alternate)&&(l.lanes|=i),Ms(r,i,t),r=a.sibling}else r=a.child;if(null!==r)r.return=a;else for(r=a;null!==r;){if(r===t){r=null;break}if(null!==(a=r.sibling)){a.return=r.return,r=a;break}r=r.return}a=r}Sr(e,t,o.children,i),t=t.child}return t;case 9:return o=t.type,n=t.pendingProps.children,Is(t,i),n=n(o=Ts(o)),t.flags|=1,Sr(e,t,n,i),t.child;case 14:return o=ys(n=t.type,t.pendingProps),xr(e,t,n,o=ys(n.type,o),i);case 15:return Mr(e,t,t.type,t.pendingProps,i);case 17:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:ys(n,o),Ur(e,t),t.tag=1,Fo(n)?(e=!0,Bo(t)):e=!1,Is(t,i),Us(t,n,o),Ys(t,n,o,i),Vr(null,t,n,!0,e,i);case 19:return Wr(e,t,i);case 22:return Ir(e,t,i)}throw Error(s(156,t.tag))};var Zd="function"===typeof reportError?reportError:function(e){console.error(e)};function Xd(e){this._internalRoot=e}function Gd(e){this._internalRoot=e}function Jd(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Kd(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $d(){}function eh(e,t,i,n,o){var s=i._reactRootContainer;if(s){var a=s;if("function"===typeof o){var r=o;o=function(){var e=qd(a);r.call(e)}}Ud(t,a,e,o)}else a=function(e,t,i,n,o){if(o){if("function"===typeof n){var s=n;n=function(){var e=qd(a);s.call(e)}}var a=Wd(t,n,e,0,null,!1,0,"",$d);return e._reactRootContainer=a,e[mo]=a.current,Hn(8===e.nodeType?e.parentNode:e),pd(),a}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof n){var r=n;n=function(){var e=qd(l);r.call(e)}}var l=_d(e,0,!1,null,0,!1,0,"",$d);return e._reactRootContainer=l,e[mo]=l.current,Hn(8===e.nodeType?e.parentNode:e),pd((function(){Ud(t,l,i,n)})),l}(i,t,e,o,n);return qd(a)}Gd.prototype.render=Xd.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Ud(e,t,null,null)},Gd.prototype.unmount=Xd.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;pd((function(){Ud(null,e,null,null)})),t[mo]=null}},Gd.prototype.unstable_scheduleHydration=function(e){if(e){var t=Mt();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Ft.length&&0!==t&&t<Ft[i].priority;i++);Ft.splice(i,0,e),0===i&&Bt(e)}},St=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=pt(t.pendingLanes);0!==i&&(vt(t,1|i),od(t,Je()),0===(6&Vl)&&(Wl=Je()+500,Wo()))}break;case 13:pd((function(){var t=Es(e,1);if(null!==t){var i=td();nd(t,e,1,i)}})),Qd(e,1)}},Ct=function(e){if(13===e.tag){var t=Es(e,134217728);if(null!==t)nd(t,e,134217728,td());Qd(e,134217728)}},xt=function(e){if(13===e.tag){var t=id(e),i=Es(e,t);if(null!==i)nd(i,e,t,td());Qd(e,t)}},Mt=function(){return wt},It=function(e,t){var i=wt;try{return wt=e,t()}finally{wt=i}},Ce=function(e,t,i){switch(t){case"input":if(K(e,i),t=i.name,"radio"===i.type&&null!=t){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var n=i[t];if(n!==e&&n.form===e.form){var o=Co(n);if(!o)throw Error(s(90));Q(n),K(n,o)}}}break;case"textarea":se(e,i);break;case"select":null!=(t=i.value)&&ie(e,!!i.multiple,t,!1)}},ke=hd,Ve=pd;var th={usingClientEntryPoint:!1,Events:[bo,So,Co,Te,Ae,hd]},ih={findFiberByHostInstance:wo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nh={bundleType:ih.bundleType,version:ih.version,rendererPackageName:ih.rendererPackageName,rendererConfig:ih.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:ih.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oh.isDisabled&&oh.supportsFiber)try{ot=oh.inject(nh),st=oh}catch(he){}}t.createPortal=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jd(t))throw Error(s(200));return function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:C,key:null==n?null:""+n,children:e,containerInfo:t,implementation:i}}(e,t,null,i)},t.createRoot=function(e,t){if(!Jd(e))throw Error(s(299));var i=!1,n="",o=Zd;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(i=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=_d(e,1,!1,null,0,i,0,n,o),e[mo]=t.current,Hn(8===e.nodeType?e.parentNode:e),new Xd(t)}},164:function(e,t,i){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=i(463)},374:function(e,t,i){var n=i(791),o=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,r=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,i){var n,s={},d=null,h=null;for(n in void 0!==i&&(d=""+i),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(h=t.ref),t)a.call(t,n)&&!l.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:o,type:e,key:d,ref:h,props:s,_owner:r.current}}t.jsx=d},117:function(e,t){var i=Symbol.for("react.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),r=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),u=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,i){this.props=e,this.context=t,this.refs=g,this.updater=i||f}function v(){}function w(e,t,i){this.props=e,this.context=t,this.refs=g,this.updater=i||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,m(b,y.prototype),b.isPureReactComponent=!0;var S=Array.isArray,C=Object.prototype.hasOwnProperty,x={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,n){var o,s={},a=null,r=null;if(null!=t)for(o in void 0!==t.ref&&(r=t.ref),void 0!==t.key&&(a=""+t.key),t)C.call(t,o)&&!M.hasOwnProperty(o)&&(s[o]=t[o]);var l=arguments.length-2;if(1===l)s.children=n;else if(1<l){for(var d=Array(l),h=0;h<l;h++)d[h]=arguments[h+2];s.children=d}if(e&&e.defaultProps)for(o in l=e.defaultProps)void 0===s[o]&&(s[o]=l[o]);return{$$typeof:i,type:e,key:a,ref:r,props:s,_owner:x.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var A=/\/+/g;function k(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function V(e,t,o,s,a){var r=typeof e;"undefined"!==r&&"boolean"!==r||(e=null);var l=!1;if(null===e)l=!0;else switch(r){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case i:case n:l=!0}}if(l)return a=a(l=e),e=""===s?"."+k(l,0):s,S(a)?(o="",null!=e&&(o=e.replace(A,"$&/")+"/"),V(a,t,o,"",(function(e){return e}))):null!=a&&(T(a)&&(a=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,o+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(A,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",S(e))for(var d=0;d<e.length;d++){var h=s+k(r=e[d],d);l+=V(r,t,o,h,a)}else if(h=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=u&&e[u]||e["@@iterator"])?e:null}(e),"function"===typeof h)for(e=h.call(e),d=0;!(r=e.next()).done;)l+=V(r=r.value,t,o,h=s+k(r,d++),a);else if("object"===r)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function E(e,t,i){if(null==e)return e;var n=[],o=0;return V(e,n,"","",(function(e){return t.call(i,e,o++)})),n}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N={current:null},F={transition:null},L={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:F,ReactCurrentOwner:x};t.Children={map:E,forEach:function(e,t,i){E(e,(function(){t.apply(this,arguments)}),i)},count:function(e){var t=0;return E(e,(function(){t++})),t},toArray:function(e){return E(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=o,t.Profiler=a,t.PureComponent=w,t.StrictMode=s,t.Suspense=h,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=m({},e.props),s=e.key,a=e.ref,r=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,r=x.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(d in t)C.call(t,d)&&!M.hasOwnProperty(d)&&(o[d]=void 0===t[d]&&void 0!==l?l[d]:t[d])}var d=arguments.length-2;if(1===d)o.children=n;else if(1<d){l=Array(d);for(var h=0;h<d;h++)l[h]=arguments[h+2];o.children=l}return{$$typeof:i,type:e.type,key:s,ref:a,props:o,_owner:r}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:r,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:d,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=F.transition;F.transition={};try{e()}finally{F.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return N.current.useCallback(e,t)},t.useContext=function(e){return N.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return N.current.useDeferredValue(e)},t.useEffect=function(e,t){return N.current.useEffect(e,t)},t.useId=function(){return N.current.useId()},t.useImperativeHandle=function(e,t,i){return N.current.useImperativeHandle(e,t,i)},t.useInsertionEffect=function(e,t){return N.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.current.useMemo(e,t)},t.useReducer=function(e,t,i){return N.current.useReducer(e,t,i)},t.useRef=function(e){return N.current.useRef(e)},t.useState=function(e){return N.current.useState(e)},t.useSyncExternalStore=function(e,t,i){return N.current.useSyncExternalStore(e,t,i)},t.useTransition=function(){return N.current.useTransition()},t.version="18.2.0"},791:function(e,t,i){e.exports=i(117)},184:function(e,t,i){e.exports=i(374)},813:function(e,t){function i(e,t){var i=e.length;e.push(t);e:for(;0<i;){var n=i-1>>>1,o=e[n];if(!(0<s(o,t)))break e;e[n]=t,e[i]=o,i=n}}function n(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],i=e.pop();if(i!==t){e[0]=i;e:for(var n=0,o=e.length,a=o>>>1;n<a;){var r=2*(n+1)-1,l=e[r],d=r+1,h=e[d];if(0>s(l,i))d<o&&0>s(h,l)?(e[n]=h,e[d]=i,n=d):(e[n]=l,e[r]=i,n=r);else{if(!(d<o&&0>s(h,i)))break e;e[n]=h,e[d]=i,n=d}}}return t}function s(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var r=Date,l=r.now();t.unstable_now=function(){return r.now()-l}}var d=[],h=[],p=1,c=null,u=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=n(h);null!==t;){if(null===t.callback)o(h);else{if(!(t.startTime<=e))break;o(h),t.sortIndex=t.expirationTime,i(d,t)}t=n(h)}}function S(e){if(g=!1,b(e),!m)if(null!==n(d))m=!0,F(C);else{var t=n(h);null!==t&&L(S,t.startTime-e)}}function C(e,i){m=!1,g&&(g=!1,v(T),T=-1),f=!0;var s=u;try{for(b(i),c=n(d);null!==c&&(!(c.expirationTime>i)||e&&!V());){var a=c.callback;if("function"===typeof a){c.callback=null,u=c.priorityLevel;var r=a(c.expirationTime<=i);i=t.unstable_now(),"function"===typeof r?c.callback=r:c===n(d)&&o(d),b(i)}else o(d);c=n(d)}if(null!==c)var l=!0;else{var p=n(h);null!==p&&L(S,p.startTime-i),l=!1}return l}finally{c=null,u=s,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,M=!1,I=null,T=-1,A=5,k=-1;function V(){return!(t.unstable_now()-k<A)}function E(){if(null!==I){var e=t.unstable_now();k=e;var i=!0;try{i=I(!0,e)}finally{i?x():(M=!1,I=null)}}else M=!1}if("function"===typeof w)x=function(){w(E)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,N=D.port2;D.port1.onmessage=E,x=function(){N.postMessage(null)}}else x=function(){y(E,0)};function F(e){I=e,M||(M=!0,x())}function L(e,i){T=y((function(){e(t.unstable_now())}),i)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,F(C))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return u},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(e){switch(u){case 1:case 2:case 3:var t=3;break;default:t=u}var i=u;u=t;try{return e()}finally{u=i}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=u;u=e;try{return t()}finally{u=i}},t.unstable_scheduleCallback=function(e,o,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var r=-1;break;case 2:r=250;break;case 5:r=1073741823;break;case 4:r=1e4;break;default:r=5e3}return e={id:p++,callback:o,priorityLevel:e,startTime:s,expirationTime:r=s+r,sortIndex:-1},s>a?(e.sortIndex=s,i(h,e),null===n(d)&&e===n(h)&&(g?(v(T),T=-1):g=!0,L(S,s-a))):(e.sortIndex=r,i(d,e),m||f||(m=!0,F(C))),e},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(e){var t=u;return function(){var i=u;u=t;try{return e.apply(this,arguments)}finally{u=i}}}},296:function(e,t,i){e.exports=i(813)}},t={};function i(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,i),s.exports}!function(){var e=i(164),t=i(791),n="ej2_instances",o=0,s=!1;function a(e,t){var i=t;return i.unshift(void 0),new(Function.prototype.bind.apply(e,i))}function r(e){var t,i=new Uint16Array(5);(window.msCrypto||window.crypto).getRandomValues(i);var n="ej2"+function(e){for(var t="",i=0;i<5;i++)t+=(i?",":"")+e[parseInt(i.toString(),10)];return t}(i),o=function(i){i.source===window&&"string"===typeof i.data&&i.data.length<=32&&i.data===n&&(e(),t())};return window.addEventListener("message",o,!1),window.postMessage(n,"*"),t=function(){window.removeEventListener("message",o),e=o=n=void 0}}function l(e,t){for(var i=t,n=e.replace(/\[/g,".").replace(/\]/g,"").split("."),o=0;o<n.length&&!g(i);o++)i=i[n[parseInt(o.toString(),10)]];return i}function d(e,t,i){var n,o,s=e.replace(/\[/g,".").replace(/\]/g,"").split("."),a=i||{},r=a,l=s.length;for(n=0;n<l;n++)o=s[parseInt(n.toString(),10)],n+1===l?r[""+o]=void 0===t?{}:t:m(r[""+o])&&(r[""+o]={}),r=r[""+o];return a}function h(e,t){delete e[""+t]}var p="undefined"!==typeof window?window:{};function c(e){return!m(e)&&e.constructor==={}.constructor}function u(e,t){if(!m(t))for(var i=e,n=t,o="deepMerge",s=0,a=Object.keys(t);s<a.length;s++){var r=a[s];m(i[""+o])||-1===i[""+o].indexOf(r)||!c(n[""+r])&&!Array.isArray(n[""+r])?i[""+r]=n[""+r]:f(i[""+r],i[""+r],n[""+r],!0)}}function f(e,t,i,n){var o=e&&"object"===typeof e?e:{},s=arguments.length;n&&(s-=1);for(var a=function(e){if(!r[e])return"continue";var t=r[e];Object.keys(t).forEach((function(e){var i,s=o[""+e],a=t[""+e],r=Array.isArray(a)&&Array.isArray(s)&&a.length!==s.length,l=!S()||!(s instanceof Event)&&!r;n&&l&&(c(a)||Array.isArray(a))?c(a)?(i=s||{},Array.isArray(i)&&i.hasOwnProperty("isComplexArray")?f(i,{},a,n):o[""+e]=f(i,{},a,n)):(i=S()?s&&Object.keys(a).length:s||[],o[""+e]=f([],i,a,i&&i.length||a&&a.length)):o[""+e]=a}))},r=arguments,l=1;l<s;l++)a(l);return o}function m(e){return void 0===e||null===e}function g(e){return"undefined"===typeof e}function y(e){return e+"_"+o++}function v(e,t){return e===t||!(e===document||!e)&&v(e.parentNode,t)}function w(e){try{throw new Error(e)}catch(t){throw t.message+"\n"+t.stack}}function b(e){var t=e+"";return t.match(/auto|cm|mm|in|px|pt|pc|%|em|ex|ch|rem|vw|vh|vmin|vmax/)?t:t+"px"}function S(){return s}function C(e){var t="xPath";return e instanceof Node||!S()||m(e[""+t])?e:document.evaluate(e[""+t],document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}function x(e,t){var i="string"===typeof e?document.querySelector(e):e;if(i[""+n])for(var o=0,s=i[""+n];o<s.length;o++){var a=s[o];if(a instanceof t)return a}return null}var M,I={latn:{_digits:"0123456789",_type:"numeric"}},T={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"\u221e",nan:"NaN",exponential:"E"},A=[0,1,2,3,4,5,6,7,8,9],k=function(){function e(){}return e.getMainObject=function(e,t){return l(S()?t:"main."+t,e)},e.getNumberingSystem=function(e){return l("supplemental.numberingSystems",e)||this.numberingSystems},e.reverseObject=function(e,t){for(var i={},n=0,o=t||Object.keys(e);n<o.length;n++){var s=o[n];i.hasOwnProperty(e[s])||(i[e[s]]=s)}return i},e.getSymbolRegex=function(e){var t=e.map((function(e){return e.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")})).join("|");return new RegExp(t,"g")},e.getSymbolMatch=function(e){for(var t={},i=0,n=Object.keys(T);i<n.length;i++){var o=n[i];t[e[o]]=T[o]}return t},e.constructRegex=function(e){for(var t=e.length,i="",n=0;n<t;n++)i+=n!==t-1?e[parseInt(n.toString(),10)]+"|":e[parseInt(n.toString(),10)];return i},e.convertValueParts=function(e,t,i){return e.replace(t,(function(e){return i[e]}))},e.getDefaultNumberingSystem=function(e){var t={};return t.obj=l("numbers",e),t.nSystem=l("defaultNumberingSystem",t.obj),t},e.getCurrentNumericOptions=function(e,t,i,n){var o={},s=this.getDefaultNumberingSystem(e);if(!g(s.nSystem)||n){var a=n?l("obj.mapperDigits",s):l(s.nSystem+"._digits",t);g(a)||(o.numericPair=this.reverseObject(a,A),o.numberParseRegex=new RegExp(this.constructRegex(a),"g"),o.numericRegex="["+a[0]+"-"+a[9]+"]",i&&(o.numericRegex=a[0]+"-"+a[9],o.symbolNumberSystem=l(n?"numberSymbols":"symbols-numberSystem-"+s.nSystem,s.obj),o.symbolMatch=this.getSymbolMatch(o.symbolNumberSystem),o.numberSystem=s.nSystem))}return o},e.getNumberMapper=function(e,t,i){var n={mapper:{}},o=this.getDefaultNumberingSystem(e);if(!g(o.nSystem)){n.numberSystem=o.nSystem,n.numberSymbols=l("symbols-numberSystem-"+o.nSystem,o.obj),n.timeSeparator=l("timeSeparator",n.numberSymbols);var s=l(o.nSystem+"._digits",t);if(!g(s))for(var a=0,r=A;a<r.length;a++){var d=r[a];n.mapper[d]=s[d]}}return n},e.nPair="numericPair",e.nRegex="numericRegex",e.numberingSystems=I,e}(),V={DJF:"Fdj",ERN:"Nfk",ETB:"Br",NAD:"$",ZAR:"R",XAF:"FCFA",GHS:"GH\u20b5",XDR:"XDR",AED:"\u062f.\u0625.\u200f",BHD:"\u062f.\u0628.\u200f",DZD:"\u062f.\u062c.\u200f",EGP:"\u062c.\u0645.\u200f",ILS:"\u20aa",IQD:"\u062f.\u0639.\u200f",JOD:"\u062f.\u0627.\u200f",KMF:"CF",KWD:"\u062f.\u0643.\u200f",LBP:"\u0644.\u0644.\u200f",LYD:"\u062f.\u0644.\u200f",MAD:"\u062f.\u0645.\u200f",MRU:"\u0623.\u0645.",OMR:"\u0631.\u0639.\u200f",QAR:"\u0631.\u0642.\u200f",SAR:"\u0631.\u0633.\u200f",SDG:"\u062c.\u0633.",SOS:"S",SSP:"\xa3",SYP:"\u0644.\u0633.\u200f",TND:"\u062f.\u062a.\u200f",YER:"\u0631.\u064a.\u200f",CLP:"$",INR:"\u20b9",TZS:"TSh",EUR:"\u20ac",AZN:"\u20bc",RUB:"\u20bd",BYN:"Br",ZMW:"K",BGN:"\u043b\u0432.",NGN:"\u20a6",XOF:"CFA",BDT:"\u09f3",CNY:"\xa5",BAM:"\u041a\u041c",UGX:"USh",USD:"$",CZK:"K\u010d",GBP:"\xa3",DKK:"kr.",KES:"Ksh",CHF:"CHF",MVR:"\u0783.",BTN:"Nu.",XCD:"EC$",AUD:"$",BBD:"$",BIF:"FBu",BMD:"$",BSD:"$",BWP:"P",BZD:"$",CAD:"$",NZD:"$",FJD:"$",FKP:"\xa3",GIP:"\xa3",GMD:"D",GYD:"$",HKD:"$",IDR:"Rp",JMD:"$",KYD:"$",LRD:"$",MGA:"Ar",MOP:"MOP$",MUR:"Rs",MWK:"MK",MYR:"RM",PGK:"K",PHP:"\u20b1",PKR:"Rs",RWF:"RF",SBD:"$",SCR:"SR",SEK:"kr",SGD:"$",SHP:"\xa3",SLL:"Le",ANG:"NAf.",SZL:"E",TOP:"T$",TTD:"$",VUV:"VT",WST:"WS$",ARS:"$",BOB:"Bs",BRL:"R$",COP:"$",CRC:"\u20a1",CUP:"$",DOP:"$",GTQ:"Q",HNL:"L",MXN:"$",NIO:"C$",PAB:"B/.",PEN:"S/",PYG:"\u20b2",UYU:"$",VES:"Bs.S",IRR:"\u0631\u064a\u0627\u0644",GNF:"FG",CDF:"FC",HTG:"G",XPF:"FCFP",HRK:"kn",HUF:"Ft",AMD:"\u058f",ISK:"kr",JPY:"\xa5",GEL:"\u20be",CVE:"\u200b",KZT:"\u20b8",KHR:"\u17db",KPW:"\u20a9",KRW:"\u20a9",KGS:"\u0441\u043e\u043c",AOA:"Kz",LAK:"\u20ad",MZN:"MTn",MKD:"\u0434\u0435\u043d",MNT:"\u20ae",BND:"$",MMK:"K",NOK:"kr",NPR:"\u0930\u0941",AWG:"Afl.",SRD:"$",PLN:"z\u0142",AFN:"\u060b",STN:"Db",MDL:"L",RON:"lei",UAH:"\u20b4",LKR:"\u0dbb\u0dd4.",ALL:"Lek\xeb",RSD:"\u0434\u0438\u043d.",TJS:"\u0441\u043c\u043d",THB:"\u0e3f",TMT:"m.",TRY:"\u20ba",UZS:"\u0441\u045e\u043c",VND:"\u20ab",TWD:"NT$"};!function(e){var t=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990];e.getHijriDate=function(e){var i=e.getDate(),n=e.getMonth(),o=e.getFullYear(),s=n+1,a=o;s<3&&(a-=1,s+=12);var r=Math.floor(a/100),l=r-Math.floor(r/4)-2,d=Math.floor(365.25*(a+4716))+Math.floor(30.6001*(s+1))+i-l-1524,h=d+(l=(r=Math.floor((d-1867216.25)/36524.25))-Math.floor(r/4)+1)+1524,p=Math.floor((h-122.1)/365.25),c=Math.floor(365.25*p),u=Math.floor((h-c)/30.6001);i=h-c-Math.floor(30.6001*u),(n=Math.floor((h-c)/20.6001))>13&&(p+=1,n-=12),n-=1,o=p-4716;var f=d-24e5,m=10631/30,g=d-1948084,y=Math.floor(g/10631);g-=10631*y;var v=Math.floor((g-.1335)/m),w=30*y+v;g-=Math.floor(v*m+.1335);var b=Math.floor((g+28.5001)/29.5);13===b&&(b=12);for(var S=g-Math.floor(29.5001*b-29),C=0;C<t.length&&!(t[parseInt(C.toString(),10)]>f);C++);var x=C+16260,M=Math.floor((x-1)/12),I=M+1,T=x-12*M,A=f-t[C-1]+1;return(A+"").length>2&&(A=S,T=b,I=w),{year:I,month:T,date:A}},e.toGregorian=function(e,i,n){var o=n+t[12*(e-1)+1+(i-1)-16260-1]-1+24e5,s=Math.floor(o+.5),a=Math.floor((s-1867216.25)/36524.25),r=(a=s+1+a-Math.floor(a/4))+1524,l=Math.floor((r-122.1)/365.25),d=Math.floor(365.25*l),h=Math.floor((r-d)/30.6001),p=r-d-Math.floor(30.6001*h),c=h-(h>13.5?13:1),u=l-(c>2.5?4716:4715);return u<=0&&c--,new Date(u+"/"+c+"/"+p)}}(M||(M={}));var E=/\/MMMMM|MMMM|MMM|a|LLLL|LLL|EEEEE|EEEE|E|K|cccc|ccc|WW|W|G+|z+/gi,D="stand-alone",N=["sun","mon","tue","wed","thu","fri","sat"],F={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate",f:"getMilliseconds"},L={M:"month",d:"day",E:"weekday",c:"weekday",y:"year",m:"minute",h:"hour",H:"hour",s:"second",L:"month",a:"designator",z:"timeZone",Z:"timeZone",G:"era",f:"milliseconds"},P=function(){function e(){}return e.dateFormat=function(e,t,i){var n=this,o=ne.getDependables(i,e,t.calendar),s=l("parserObject.numbers",o),a=o.dateObject,r={isIslamic:ne.islamicRegex.test(t.calendar)};S()&&t.isServerRendered&&(t=ne.compareBlazorDateFormats(t,e));var d=t.format||ne.getResultantPattern(t.skeleton,o.dateObject,t.type,!1,S()?e:"");if(r.dateSeperator=S()?l("dateSeperator",a):ne.getDateSeparator(o.dateObject),g(d))w("Format options or type given must be invalid");else{d=ne.ConvertDateToWeekFormat(d),S()&&(d=d.replace(/tt/,"a")),r.pattern=d,r.numMapper=S()?f({},s):k.getNumberMapper(o.parserObject,k.getNumberingSystem(i));for(var h=0,p=d.match(E)||[];h<p.length;h++){var c=p[h],u=c.length,m=c[0];switch("K"===m&&(m="h"),m){case"E":case"c":S()?r.weekday=l("days."+ne.monthIndex[u],a):r.weekday=o.dateObject[ne.days][D][ne.monthIndex[u]];break;case"M":case"L":S()?r.month=l("months."+ne.monthIndex[u],a):r.month=o.dateObject[ne.month][D][ne.monthIndex[u]];break;case"a":r.designator=S()?l("dayPeriods",a):l("dayPeriods.format.wide",a);break;case"G":var y=u<=3?"eraAbbr":4===u?"eraNames":"eraNarrow";r.era=S()?l("eras",a):l("eras."+y,o.dateObject);break;case"z":r.timeZone=l("dates.timeZoneNames",o.parserObject)}}}return function(e){return isNaN(e.getDate())?null:n.intDateFormatter(e,r)}},e.intDateFormatter=function(e,t){for(var i="",n=t.pattern.match(ne.dateParseRegex),o=this.getCurrentDateValue(e,t.isIslamic),s=0,a=n;s<a.length;s++){var r=a[s],l=r.length,d=r[0];"K"===d&&(d="h");var h=void 0,p="",c=void 0,u=void 0,f="";switch(d){case"M":case"L":h=o.month,l>2?i+=t.month[h]:c=!0;break;case"E":case"c":i+=t.weekday[N[e.getDay()]];break;case"H":case"h":case"m":case"s":case"d":case"f":if(c=!0,"d"===d)h=o.date;else if("f"===d){c=!1,u=!0;var g=(p=(p=e[F[d]]().toString()).substring(0,l)).length;if(l!==g){if(l>3)continue;for(var y=0;y<l-g;y++)p="0"+p.toString()}f+=p}else h=e[F[d]]();"h"===d&&(h=h%12||12);break;case"y":u=!0,f+=o.year,2===l&&(f=f.substr(f.length-2));break;case"a":var v=e.getHours()<12?"am":"pm";i+=t.designator[v];break;case"G":var w=e.getFullYear()<0?0:1,b=t.era[w];m(b)&&(b=t.era[w?0:1]),i+=b||"";break;case"'":i+="''"===r?"'":r.replace(/'/g,"");break;case"z":var S=e.getTimezoneOffset(),C=l<4?"+H;-H":t.timeZone.hourFormat;C=C.replace(/:/g,t.numMapper.timeSeparator),0===S?i+=t.timeZone.gmtZeroFormat:(u=!0,f=this.getTimeZoneValue(S,C)),f=t.timeZone.gmtFormat.replace(/\{0\}/,f);break;case":":i+=t.numMapper.numberSymbols.timeSeparator;break;case"/":i+=t.dateSeperator;break;case"W":c=!0,h=ne.getWeekOfYear(e);break;default:i+=r}c&&(u=!0,f=this.checkTwodigitNumber(h,l)),u&&(i+=k.convertValueParts(f,ne.latnParseRegex,t.numMapper.mapper))}return i},e.getCurrentDateValue=function(e,t){return t?M.getHijriDate(e):{year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate()}},e.checkTwodigitNumber=function(e,t){var i=e+"";return 2===t&&2!==i.length?"0"+i:i},e.getTimeZoneValue=function(e,t){var i=this,n=t.split(";")[e>0?1:0],o=Math.abs(e);return n.replace(/HH?|mm/g,(function(e){var t=e.length,n=-1!==e.indexOf("H");return i.checkTwodigitNumber(Math.floor(n?o/60:o%60),t)}))},e}(),O={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},B=["infinity","nan","group","decimal","exponential"],z=function(){function e(){}return e.numberFormatter=function(e,t,i){var n,o=this,s=f({},t),a={},r={},d=ne.getDependables(i,e,"",!0),h=d.numericObject;r.numberMapper=S()?f({},h):k.getNumberMapper(d.parserObject,k.getNumberingSystem(i),!0),r.currencySymbol=S()?l("currencySymbol",h):ne.getCurrencySymbol(d.numericObject,s.currency||K,t.altSymbol),r.percentSymbol=S()?l("numberSymbols.percentSign",h):r.numberMapper.numberSymbols.percentSign,r.minusSymbol=S()?l("numberSymbols.minusSign",h):r.numberMapper.numberSymbols.minusSign;var p=r.numberMapper.numberSymbols;if(t.format&&!ne.formatRegex.test(t.format))a=ne.customFormat(t.format,r,d.numericObject);else{if(f(s,ne.getProperNumericSkeleton(t.format||"N")),s.isCurrency="currency"===s.type,s.isPercent="percent"===s.type,S()||(n=ne.getSymbolPattern(s.type,r.numberMapper.numberSystem,d.numericObject,s.isAccount)),s.groupOne=this.checkValueRange(s.maximumSignificantDigits,s.minimumSignificantDigits,!0),this.checkValueRange(s.maximumFractionDigits,s.minimumFractionDigits,!1,!0),g(s.fractionDigits)||(s.minimumFractionDigits=s.maximumFractionDigits=s.fractionDigits),g(s.useGrouping)&&(s.useGrouping=!0),s.isCurrency&&!S()&&(n=n.replace(/\u00A4/g,ne.defaultCurrency)),S())a.nData=f({},{},l(s.type+"nData",h)),a.pData=f({},{},l(s.type+"pData",h)),"currency"===s.type&&t.currency&&ne.replaceBlazorCurrency([a.pData,a.nData],r.currencySymbol,t.currency);else{var c=n.split(";");a.nData=ne.getFormatData(c[1]||"-"+c[0],!0,r.currencySymbol),a.pData=ne.getFormatData(c[0],!1,r.currencySymbol),s.useGrouping&&(s.groupSeparator=p[B[2]],s.groupData=this.getGroupingDetails(c[0]))}if(g(s.minimumFractionDigits)&&(s.minimumFractionDigits=a.nData.minimumFraction),g(s.maximumFractionDigits)){var u=a.nData.maximumFraction;s.maximumFractionDigits=g(u)&&s.isPercent?0:u}var m=s.minimumFractionDigits,y=s.maximumFractionDigits;g(m)||g(y)||m>y&&(s.maximumFractionDigits=m)}return f(a.nData,s),f(a.pData,s),function(e){return isNaN(e)?p[B[1]]:isFinite(e)?o.intNumberFormatter(e,a,r):p[B[0]]}},e.getGroupingDetails=function(e){var t={},i=e.match(ne.negativeDataRegex);if(i&&i[4]){var n=i[4],o=n.lastIndexOf(",");if(-1!==o){var s=n.split(".")[0];t.primary=s.length-o-1;var a=n.lastIndexOf(",",o-1);-1!==a&&(t.secondary=o-1-a)}}return t},e.checkValueRange=function(e,t,i,n){var o=n?"f":"s",s=0,a=O["l"+o],r=O["m"+o];if(g(e)||(this.checkRange(e,a,n),s++),g(t)||(this.checkRange(t,r,n),s++),2===s){if(!(e<t))return!0;w(r+"specified must be less than the"+a)}else i&&1===s&&w("Both"+r+"and"+r+"must be present");return!1},e.checkRange=function(e,t,i){var n=i?[0,20]:[1,21];(e<n[0]||e>n[1])&&w(t+"value must be within the range"+n[0]+"to"+n[1])},e.intNumberFormatter=function(e,t,i){var n;if(!g(t.nData.type)){e<0?(e*=-1,n=t.nData):n=0===e&&t.zeroData||t.pData;var o="";return n.isPercent&&(e*=100),n.groupOne?o=this.processSignificantDigits(e,n.minimumSignificantDigits,n.maximumSignificantDigits):(o=this.processFraction(e,n.minimumFractionDigits,n.maximumFractionDigits),n.minimumIntegerDigits&&(o=this.processMinimumIntegers(o,n.minimumIntegerDigits))),"scientific"===n.type&&(o=(o=e.toExponential(n.maximumFractionDigits)).replace("e",i.numberMapper.numberSymbols[B[4]])),o=o.replace(".",i.numberMapper.numberSymbols[B[3]]),o="#,###,,;(#,###,,)"===n.format?this.customPivotFormat(parseInt(o)):o,n.useGrouping&&(o=this.groupNumbers(o,n.groupData.primary,n.groupSeparator||",",i.numberMapper.numberSymbols[B[3]]||".",n.groupData.secondary)),o=k.convertValueParts(o,ne.latnParseRegex,i.numberMapper.mapper),"N/A"===n.nlead?n.nlead:n.nlead+o+n.nend}},e.processSignificantDigits=function(e,t,i){var n=e+"";return n.length<t?e.toPrecision(t):+(n=e.toPrecision(i))+""},e.groupNumbers=function(e,t,i,n,o){for(var s=!m(o)&&0!==o,a=e.split(n),r=a[0],l=r.length,d="";l>t;)d=r.slice(l-t,l)+(d.length?i+d:""),l-=t,s&&(t=o,s=!1);return a[0]=r.slice(0,l)+(d.length?i:"")+d,a.join(n)},e.processFraction=function(e,t,i){var n=(e+"").split(".")[1],o=n?n.length:0;if(t&&o<t){var s="";if(0!==o){s+=e;for(var a=0;a<t-o;a++)s+="0";return s}return s=e.toFixed(t),e.toFixed(t)}return!m(i)&&(o>i||0===i)?e.toFixed(i):e+""},e.processMinimumIntegers=function(e,t){var i=e.split("."),n=i[0],o=n.length;if(o<t){for(var s=0;s<t-o;s++)n="0"+n;i[0]=n}return i.join(".")},e.customPivotFormat=function(e){if(e>=5e5){var t=(e/=1e6).toString().split("."),i=(t[0],t[1]);return i&&+i.substring(0,1)>=5?Math.ceil(e).toString():Math.floor(e).toString()}return""},e}(),j="stand-alone",R=/^[0-9]*$/,_={minute:"setMinutes",hour:"setHours",second:"setSeconds",day:"setDate",month:"setMonth",milliseconds:"setMilliseconds"},H=function(){function e(){}return e.dateParser=function(e,t,i){var n=this,o=ne.getDependables(i,e,t.calendar),s=k.getCurrentNumericOptions(o.parserObject,k.getNumberingSystem(i),!1,S()),a={};S()&&t.isServerRendered&&(t=ne.compareBlazorDateFormats(t,e));var r,d=t.format||ne.getResultantPattern(t.skeleton,o.dateObject,t.type,!1,S()?e:""),h="";if(g(d))w("Format options or type given must be invalid");else{d=ne.ConvertDateToWeekFormat(d),a={isIslamic:ne.islamicRegex.test(t.calendar),pattern:d,evalposition:{},culture:e};for(var p=d.match(ne.dateParseRegex)||[],c=p.length,u=0,f=0,y=!1,v=s.numericRegex,b=S()?o.parserObject.numbers:k.getNumberMapper(o.parserObject,k.getNumberingSystem(i)),C=0;C<c;C++){var x=p[parseInt(C.toString(),10)],I=x.length,T="K"===x[0]?"h":x[0],A=void 0,V=void 0,E=L[T],D=2===I?"":"?";switch(y&&(u=f,y=!1),T){case"E":case"c":var N=void 0;N=S()?l("days."+ne.monthIndex[I],o.dateObject):o.dateObject[ne.days][j][ne.monthIndex[I]];var F=k.reverseObject(N);h+="("+Object.keys(F).join("|")+")";break;case"M":case"L":case"d":case"m":case"s":case"h":case"H":case"f":if(V=!0,("M"===T||"L"===T)&&I>2){var P=void 0;P=S()?l("months."+ne.monthIndex[I],o.dateObject):o.dateObject.months[j][ne.monthIndex[I]],a[E]=k.reverseObject(P),h+="("+Object.keys(a[E]).join("|")+")"}else if("f"===T){if(I>3)continue;A=!0,h+="("+v+v+"?"+v+"?)"}else A=!0,h+="("+v+v+D+")";"h"===T&&(a.hour12=!0);break;case"W":h+="("+v+(1===I?"?":"")+v+")";break;case"y":V=A=!0,h+=2===I?"("+v+v+")":"("+v+"{"+I+",})";break;case"a":V=!0;var O=S()?l("dayPeriods",o.dateObject):l("dayPeriods.format.wide",o.dateObject);a[E]=k.reverseObject(O),h+="("+Object.keys(a[E]).join("|")+")";break;case"G":V=!0;var B=I<=3?"eraAbbr":4===I?"eraNames":"eraNarrow";a[E]=k.reverseObject(S()?l("eras",o.dateObject):l("eras."+B,o.dateObject)),h+="("+Object.keys(a[E]).join("|")+"?)";break;case"z":V=0!==(new Date).getTimezoneOffset(),a[E]=l("dates.timeZoneNames",o.parserObject);var z=a[E],R=(r=I<4)?"+H;-H":z.hourFormat;R=R.replace(/:/g,b.timeSeparator),h+="("+this.parseTimeZoneRegx(R,z,v)+")?",y=!0,f=r?6:12;break;case"'":h+="("+x.replace(/'/g,"")+")?";break;default:h+="([\\D])"}V&&(a.evalposition[""+E]={isNumber:A,pos:C+1+u,hourOnly:r}),C!==c-1||m(h)||(a.parserRegex=new RegExp("^"+h+"$","i"))}}return function(e){var t=n.internalDateParse(e,a,s);if(m(t)||!Object.keys(t).length)return null;if(a.isIslamic){var i={},o=t.year,r=t.day,l=t.month,d=o?o+"":"",h=2===d.length;o&&l&&r&&!h||(i=M.getHijriDate(new Date)),h&&(o=parseInt((i.year+"").slice(0,2)+d,10));var p=M.toGregorian(o||i.year,l||i.month,r||i.date);t.year=p.getFullYear(),t.month=p.getMonth()+1,t.day=p.getDate()}return n.getDateObject(t)}},e.getDateObject=function(e,t){var i=t||new Date;i.setMilliseconds(0);var n=e.year,o=e.designator,s=e.timeZone;if(!g(n)){if((n+"").length<=2)n+=100*Math.floor(i.getFullYear()/100);i.setFullYear(n)}for(var a=0,r=["hour","minute","second","milliseconds","month","day"];a<r.length;a++){var l=r[a],d=e[l];if(g(d)&&"day"===l&&i.setDate(1),!g(d))if("month"===l){if((d-=1)<0||d>11)return new Date("invalid");var h=i.getDate();i.setDate(1),i[_[l]](d);var p=new Date(i.getFullYear(),d+1,0).getDate();i.setDate(h<p?h:p)}else{if("day"===l){var c=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();if(d<1||d>c)return null}i[_[l]](d)}}if(!g(o)){var u=i.getHours();"pm"===o?i.setHours(u+(12===u?0:12)):12===u&&i.setHours(0)}if(!g(s)){var f=s-i.getTimezoneOffset();0!==f&&i.setMinutes(i.getMinutes()+f)}return i},e.internalDateParse=function(e,t,i){var n=e.match(t.parserRegex),o={hour:0,minute:0,second:0};if(m(n))return null;for(var s=0,a=Object.keys(t.evalposition);s<a.length;s++){var r=a[s],l=t.evalposition[""+r],d=n[l.pos];if(l.isNumber)o[r]=this.internalNumberParser(d,i);else if("timeZone"!==r||g(d))d="month"!==r||t.isIslamic||"en"!==t.culture&&"en-GB"!==t.culture&&"en-US"!==t.culture?d:d[0].toUpperCase()+d.substring(1).toLowerCase(),o[r]=t[r][d];else{var h=l.pos,p=void 0,c=n[h+1],u=!g(c);l.hourOnly?p=60*this.getZoneValue(u,c,n[h+4],i):(p=60*this.getZoneValue(u,c,n[h+7],i),p+=this.getZoneValue(u,n[h+4],n[h+10],i)),m(p)||(o[""+r]=p)}}return t.hour12&&(o.hour12=!0),o},e.internalNumberParser=function(e,t){return e=k.convertValueParts(e,t.numberParseRegex,t.numericPair),R.test(e)?+e:null},e.parseTimeZoneRegx=function(e,t,i){var n,o,s=t.gmtFormat,a="("+i+")("+i+")";return n=e.replace("+","\\+"),o=(n=-1!==e.indexOf("HH")?n.replace(/HH|mm/g,"("+a+")"):n.replace(/H|m/g,"("+a+"?)")).split(";").map((function(e){return s.replace("{0}",e)})),n=o.join("|")+"|"+t.gmtZeroFormat},e.getZoneValue=function(e,t,i,n){var o=e?t:i;if(!o)return 0;var s=this.internalNumberParser(o,n);return e?-s:s},e}(),W=/^([^0-9]*)(([0-9,]*[0-9]+)(\.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$/,U=/,/g,q=["minusSign","infinity"],Y=function(){function e(){}return e.numberParser=function(e,t,i){var n,o=this,s=ne.getDependables(i,e,"",!0),a={custom:!0};ne.formatRegex.test(t.format)||!t.format?(f(a,ne.getProperNumericSkeleton(t.format||"N")),a.custom=!1,a.fractionDigits||t.maximumFractionDigits&&(a.maximumFractionDigits=t.maximumFractionDigits)):f(a,ne.customFormat(t.format,null,null));var r,d=l("numbers",s.parserObject);if(n=k.getCurrentNumericOptions(s.parserObject,k.getNumberingSystem(i),!0,S()),a.symbolRegex=k.getSymbolRegex(Object.keys(n.symbolMatch)),a.infinity=n.symbolNumberSystem[q[1]],S())a.nData=f({},{},l(a.type+"nData",d)),a.pData=f({},{},l(a.type+"pData",d)),"currency"===a.type&&t.currency&&ne.replaceBlazorCurrency([a.pData,a.nData],l("currencySymbol",d),t.currency);else if(r=ne.getSymbolPattern(a.type,n.numberSystem,s.numericObject,a.isAccount)){var h=(r=r.replace(/\u00A4/g,ne.defaultCurrency)).split(";");a.nData=ne.getFormatData(h[1]||"-"+h[0],!0,""),a.pData=ne.getFormatData(h[0],!0,"")}return function(e){return o.getParsedNumber(e,a,n)}},e.getParsedNumber=function(e,t,i){var n,o,s,a,r,l;if(-1!==e.indexOf(t.infinity))return 1/0;e=k.convertValueParts(e,t.symbolRegex,i.symbolMatch),0===(e=-1!==(e=k.convertValueParts(e,i.numberParseRegex,i.numericPair)).indexOf("-")?e.replace("-.","-0."):e).indexOf(".")&&(e="0"+e);var d=e.match(W);if(m(d))return NaN;a=d[1],s=d[2];var h=d[5];return r=d[6],o=(n=t.custom?a===t.nData.nlead&&r===t.nData.nend:-1!==a.indexOf(t.nData.nlead)&&-1!==r.indexOf(t.nData.nend))?t.nData.isPercent:t.pData.isPercent,s=s.replace(U,""),h&&(s+=h),l=+s,("percent"===t.type||o)&&(l/=100),(t.custom||t.fractionDigits)&&(l=parseFloat(l.toFixed(t.custom?n?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.fractionDigits))),t.maximumFractionDigits&&(l=this.convertMaxFracDigits(s,t,l,n)),n&&(l*=-1),l},e.convertMaxFracDigits=function(e,t,i,n){var o=e.split(".");return o[1]&&o[1].length>t.maximumFractionDigits&&(i=+i.toFixed(t.custom?n?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.maximumFractionDigits)),i},e}(),Q=function(){function e(e){this.ranArray=[],this.boundedEvents={},m(e)||(this.context=e)}return e.prototype.on=function(e,t,i,n){if(!m(t)){var o=i||this.context;this.notExist(e)?this.boundedEvents[""+e]=[{handler:t,context:o}]:m(n)?this.isHandlerPresent(this.boundedEvents[""+e],t)||this.boundedEvents[""+e].push({handler:t,context:o}):-1===this.ranArray.indexOf(n)&&(this.ranArray.push(n),this.boundedEvents[""+e].push({handler:t,context:o,id:n}))}},e.prototype.off=function(e,t,i){if(!this.notExist(e)){var n=l(e,this.boundedEvents);if(t){for(var o=0;o<n.length;o++)if(i){if(n[parseInt(o.toString(),10)].id===i){n.splice(o,1);var s=this.ranArray.indexOf(i);-1!==s&&this.ranArray.splice(s,1);break}}else if(t===n[parseInt(o.toString(),10)].handler){n.splice(o,1);break}}else delete this.boundedEvents[""+e]}},e.prototype.notify=function(e,t,i,n){if(this.notExist(e))i&&i.call(this,t);else{t&&(t.name=e);var o=l(e,this.boundedEvents).slice(0);if(window.Blazor)return this.blazorCallback(o,t,i,n,0);for(var s=0,a=o;s<a.length;s++){var r=a[s];r.handler.call(r.context,t)}i&&i.call(this,t)}},e.prototype.blazorCallback=function(e,t,i,n,o){var s=this,a=o===e.length-1;if(o<e.length){var r=e[parseInt(o.toString(),10)],l=r.handler.call(r.context,t);if(l&&"function"===typeof l.then){if(!i)return l;l.then((function(l){if(l="string"===typeof l&&s.isJson(l)?JSON.parse(l,s.dateReviver):l,f(t,t,l,!0),!i||!a)return s.blazorCallback(e,t,i,n,o+1);i.call(r.context,t)})).catch((function(e){n&&n.call(r.context,"string"===typeof e&&s.isJson(e)?JSON.parse(e,s.dateReviver):e)}))}else{if(!i||!a)return this.blazorCallback(e,t,i,n,o+1);i.call(r.context,t)}}},e.prototype.dateReviver=function(e,t){return S&&"string"===typeof t&&null!==t.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?new Date(t):t},e.prototype.isJson=function(e){try{JSON.parse(e)}catch(t){return!1}return!0},e.prototype.destroy=function(){this.boundedEvents=this.context=void 0},e.prototype.notExist=function(e){return!1===this.boundedEvents.hasOwnProperty(e)||this.boundedEvents[e].length<=0},e.prototype.isHandlerPresent=function(e,t){for(var i=0,n=e;i<n.length;i++){if(n[i].handler===t)return!0}return!1},e}(),Z=new Q,X=!1,G={},J="en-US",K="USD",$=["numericObject","dateObject"],ee=function(){function e(e){e&&(this.culture=e)}return e.prototype.getDateFormat=function(e){return P.dateFormat(this.getCulture(),e||{type:"date",skeleton:"short"},G)},e.prototype.getNumberFormat=function(e){return e&&!e.currency&&(e.currency=K),S()&&e&&!e.format&&(e.minimumFractionDigits=0),z.numberFormatter(this.getCulture(),e||{},G)},e.prototype.getDateParser=function(e){return H.dateParser(this.getCulture(),e||{skeleton:"short",type:"date"},G)},e.prototype.getNumberParser=function(e){return S()&&e&&!e.format&&(e.minimumFractionDigits=0),Y.numberParser(this.getCulture(),e||{format:"N"},G)},e.prototype.formatNumber=function(e,t){return this.getNumberFormat(t)(e)},e.prototype.formatDate=function(e,t){return this.getDateFormat(t)(e)},e.prototype.parseDate=function(e,t){return this.getDateParser(t)(e)},e.prototype.parseNumber=function(e,t){return this.getNumberParser(t)(e)},e.prototype.getDatePattern=function(e,t){return ne.getActualDateTimeFormat(this.getCulture(),e,G,t)},e.prototype.getNumberPattern=function(e,t){return ne.getActualNumberFormat(this.getCulture(),e,G,t)},e.prototype.getFirstDayOfWeek=function(){return ne.getWeekData(this.getCulture(),G)},e.prototype.getCulture=function(){return this.culture||J},e}();function te(e,t){var i=ne.getDependables(G,e,"",!0)[$[0]],n=ne.getDependables(G,e,"")[$[1]],o=l("defaultNumberingSystem",i),s=S()?l("numberSymbols",i):l("symbols-numberSystem-"+o,i),a=ne.getSymbolPattern(t||"decimal",o,i,!1);return f(s,ne.getFormatData(a,!0,"",!0),{dateSeparator:ne.getDateSeparator(n)})}function ie(e){return ne.getDependables(G,"",e,!1)[$[1]]}var ne,oe={"en-US":{d:"M/d/y",D:"EEEE, MMMM d, y",f:"EEEE, MMMM d, y h:mm a",F:"EEEE, MMMM d, y h:mm:s a",g:"M/d/y h:mm a",G:"M/d/yyyy h:mm:ss tt",m:"MMMM d",M:"MMMM d",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:m:s tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",U:"dddd, MMMM d, yyyy h:mm:ss tt",y:"MMMM yyyy",Y:"MMMM yyyy"}};!function(e){e.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,e.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*[0#\ ]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,e.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;var t=/[0-9]/g;e.defaultCurrency="$";var i=["infinity","nan","group","decimal"],n=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,o={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};e.dateConverterMapper=/dddd|ddd/gi;var s="sun";e.islamicRegex=/^islamic/;var a={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};e.formatRegex=/(^[ncpae]{1})([0-1]?[0-9]|20)?$/i,e.currencyFormatRegex=/(^[ca]{1})([0-1]?[0-9]|20)?$/i,e.curWithoutNumberRegex=/(c|a)$/gi;var r={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};function d(t,i,n,o,s){var a,r=n||"date";if(s)a=u({skeleton:t},s).format||u({skeleton:"d"},"en-US").format;else{if(-1!==e.basicPatterns.indexOf(t)){if(a=l(r+"Formats."+t,i),"dateTime"===r){var d=l("dateFormats."+t,i),h=l("timeFormats."+t,i);a=a.replace("{1}",d).replace("{0}",h)}}else a=l("dateTimeFormats.availableFormats."+t,i);g(a)&&"yMd"===t&&(a="M/d/y")}return a}function h(t,i,n,o){var s={},a=n||"gregorian";if(s.parserObject=k.getMainObject(t,i)||(S()?e.blazorDefaultObject:e.defaultObject),o)s.numericObject=l("numbers",s.parserObject);else{var r=S()?"dates":"dates.calendars."+a;s.dateObject=l(r,s.parserObject)}return s}function p(e,t,i,n){return l(e+"Formats-numberSystem-"+t+(n?".accounting":".standard"),i)||(n?l(e+"Formats-numberSystem-"+t+".standard",i):"")}function c(t){var i=t.match(e.dateConverterMapper);if(i&&S()){var n=3===i[0].length?"EEE":"EEEE";return t.replace(e.dateConverterMapper,n)}return t}function u(e,t){var i=e.format||e.skeleton,n=l((t||"en-US")+"."+i,oe);return n||(n=l("en-US."+i,oe)),n&&(n=c(n),e.format=n.replace(/tt/,"a")),e}function y(t){var i=t.match(e.formatRegex),n={},o=i[1].toUpperCase();return n.isAccount="A"===o,n.type=e.patternMatcher[o],t.length>1&&(n.fractionDigits=parseInt(i[2],10)),n}function v(i,n,o,s){var a=s?{}:{nlead:"",nend:""},r=i.match(e.customRegex);if(r){s||(a.nlead=w(r[1],o),a.nend=w(r[10],o),a.groupPattern=r[4]);var l=r[7];if(l&&n){var d=l.match(t);m(d)?a.minimumFraction=0:a.minimumFraction=d.length,a.maximumFraction=l.length-1}}return a}function w(t,i){return t?t.replace(e.defaultCurrency,i):""}function b(e,t,i){return l("currencies."+t+(i?"."+i:".symbol"),e)||l("currencies."+t+".symbol-alt-narrow",e)||"$"}function C(t,n,o){var s={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},a=t.match(e.customRegex);if(m(a)||""===a[5]&&"N/A"!==t)return s.type=void 0,s;s.nlead=a[1],s.nend=a[10];var r=a[6],l=!!r.match(/\ $/g),d=-1!==r.replace(/\ $/g,"").indexOf(" ");s.useGrouping=-1!==r.indexOf(",")||d,r=r.replace(/,/g,"");var h=a[7];if(-1!==r.indexOf("0")&&(s.minimumIntegerDigits=r.length-r.indexOf("0")),m(h)||(s.minimumFractionDigits=h.lastIndexOf("0"),s.maximumFractionDigits=h.lastIndexOf("#"),-1===s.minimumFractionDigits&&(s.minimumFractionDigits=0),(-1===s.maximumFractionDigits||s.maximumFractionDigits<s.minimumFractionDigits)&&(s.maximumFractionDigits=s.minimumFractionDigits)),m(n)?f(s,x([s.nlead,s.nend],"%","%")):(f(s,x([s.nlead,s.nend],"$",n.currencySymbol)),s.isCurrency||f(s,x([s.nlead,s.nend],"%",n.percentSymbol))),!m(o)){var c=p(s.type,n.numberMapper.numberSystem,o,!1);s.useGrouping&&(s.groupSeparator=d?" ":n.numberMapper.numberSymbols[i[2]],s.groupData=z.getGroupingDetails(c.split(";")[0])),s.nlead=s.nlead.replace(/'/g,""),s.nend=l?" "+s.nend.replace(/'/g,""):s.nend.replace(/'/g,"")}return s}function x(e,t,i){for(var n={nlead:e[0],nend:e[1]},o=0;o<2;o++){var s=e[parseInt(o.toString(),10)],a=s.indexOf(t);if(-1!==a&&(a<s.indexOf("'")||a>s.lastIndexOf("'"))){n[r[o]]=s.substr(0,a)+i+s.substr(a+1),n[r[t]]=!0,n.type=n.isCurrency?"currency":"percent";break}}return n}function M(e,t,i){e+=".";for(var n=0;n<t;n++)e+="0";if(t<i)for(var o=i-t,s=0;s<o;s++)e+="#";return e}function I(e,t){for(var i=e.split("."),n="",o=0;o<t;o++)n+="0";return i[1]?n+"."+i[1]:n}function T(e){var t=e.split("."),i=t[0],n=3-i.length%3;e="";for(var o=(i=(n&&1===n?"#":2===n?"##":"")+i).length-1;o>0;o-=3)e=","+i[o-2]+i[o-1]+i[parseInt(o.toString(),10)]+e;return e=e.slice(1),t[1]?e+"."+t[1]:e}e.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi,e.basicPatterns=["short","medium","long","full"],e.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhu\u02bbl-Q.",12:"Dhu\u02bbl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabi\u02bb I",4:"Rabi\u02bb II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Sha\u02bbban",9:"Ramadan",10:"Shawwal",11:"Dhu\u02bbl-Qi\u02bbdah",12:"Dhu\u02bbl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"\u20ac","symbol-alt-narrow":"\u20ac"},GBP:{displayName:"British Pound","symbol-alt-narrow":"\xa3"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"\xd7",perMille:"\u2030",infinity:"\u221e",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"\xa4#,##0.00",accounting:"\xa4#,##0.00;(\xa4#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}},e.blazorDefaultObject={numbers:{mapper:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},mapperDigits:"0123456789",numberSymbols:{decimal:".",group:",",plusSign:"+",minusSign:"-",percentSign:"%",nan:"NaN",timeSeparator:":",infinity:"\u221e"},timeSeparator:":",currencySymbol:"$",currencypData:{nlead:"$",nend:"",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentpData:{nlead:"",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentnData:{nlead:"-",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},currencynData:{nlead:"($",nend:")",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalnData:{nlead:"-",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalpData:{nlead:"",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2}},dates:{dayPeriods:{am:"AM",pm:"PM"},dateSeperator:"/",days:{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}},months:{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}},eras:{1:"AD"}}},e.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"},e.month="months",e.days="days",e.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"},e.getResultantPattern=d,e.getDependables=h,e.getSymbolPattern=p,e.ConvertDateToWeekFormat=c,e.compareBlazorDateFormats=u,e.getProperNumericSkeleton=y,e.getFormatData=v,e.changeCurrencySymbol=w,e.getCurrencySymbol=b,e.customFormat=function(e,t,i){for(var n={},o=e.split(";"),s=["pData","nData","zeroData"],a=0;a<o.length;a++)n[s[a]]=C(o[a],t,i);return m(n.nData)&&(n.nData=f({},n.pData),n.nData.nlead=m(t)?"-"+n.nData.nlead:t.minusSymbol+n.nData.nlead),n},e.customNumberFormat=C,e.isCurrencyPercent=x,e.getDateSeparator=function(e){var t=(l("dateFormats.short",e)||"").match(/[d\u200fM\u200f]([^d\u200fM])[d\u200fM\u200f]/i);return t?t[1]:"/"},e.getActualDateTimeFormat=function(e,t,i,s){var a=h(i,e,t.calendar);S()&&(t=u(t,e));var r=t.format||d(t.skeleton,a.dateObject,t.type);if(s){if(r=r.replace(n,(function(e){return o[e]})),-1!==r.indexOf("z")){var p=r.match(/z/g).length,c=void 0,f={timeZone:{}};f.numMapper=k.getNumberMapper(a.parserObject,k.getNumberingSystem(i)),f.timeZone=l("dates.timeZoneNames",a.parserObject);var m=(new Date).getTimezoneOffset(),g=p<4?"+H;-H":f.timeZone.hourFormat;g=g.replace(/:/g,f.numMapper.timeSeparator),0===m?c=f.timeZone.gmtZeroFormat:(c=P.getTimeZoneValue(m,g),c=f.timeZone.gmtFormat.replace(/\{0\}/,c)),r=r.replace(/[z]+/,'"'+c+'"')}r=r.replace(/ $/,"")}return r},e.getActualNumberFormat=function(t,i,n,o){var s,a,r=h(n,t,"",!0),d={custom:!0},c=r.numericObject,u={},m=(i.format||"").match(e.currencyFormatRegex),g=e.formatRegex.test(i.format)?y(i.format||"N"):{},w={};if(m){w.numberMapper=S()?f({},r.numericObject):k.getNumberMapper(r.parserObject,k.getNumberingSystem(n),!0);var C=S()?l("currencySymbol",r.numericObject):b(r.numericObject,i.currency||K,i.altSymbol),x=p("currency",w.numberMapper.numberSystem,r.numericObject,/a/i.test(i.format)),A=(x=x.replace(/\u00A4/g,C)).split(";");u.hasNegativePattern=!!S()||A.length>1,u.nData=S()?l(g.type+"nData",c):v(A[1]||"-"+A[0],!0,C),u.pData=S()?l(g.type+"pData",c):v(A[0],!1,C),m[2]||i.minimumFractionDigits||i.maximumFractionDigits||(s=v(x.split(";")[0],!0,"",!0).minimumFraction)}if(e.formatRegex.test(i.format)||!i.format){if(f(d,y(i.format||"N")),d.custom=!1,a="###0",d.fractionDigits||i.minimumFractionDigits||i.maximumFractionDigits||s){d.fractionDigits&&(i.minimumFractionDigits=i.maximumFractionDigits=d.fractionDigits),a=M(a,s||d.fractionDigits||i.minimumFractionDigits||0,i.maximumFractionDigits||0)}if(i.minimumIntegerDigits&&(a=I(a,i.minimumIntegerDigits)),i.useGrouping&&(a=T(a)),"currency"===d.type||d.type&&S()){S()&&"currency"!==d.type&&(u.pData=l(d.type+"pData",c),u.nData=l(d.type+"nData",c));var V=a;a=u.pData.nlead+V+u.pData.nend,(u.hasNegativePattern||S())&&(a+=";"+u.nData.nlead+V+u.nData.nend)}"percent"!==d.type||S()||(a+=" %")}else a=i.format.replace(/'/g,'"');return Object.keys(w).length>0&&(a=o?a:function(e,t){if(-1!==e.indexOf(",")){var i=e.split(",");e=i[0]+l("numberMapper.numberSymbols.group",t)+i[1].replace(".",l("numberMapper.numberSymbols.decimal",t))}else e=e.replace(".",l("numberMapper.numberSymbols.decimal",t));return e}(a,w)),a},e.fractionDigitsPattern=M,e.minimumIntegerPattern=I,e.groupingPattern=T,e.getWeekData=function(e,t){var i=s,n=l("supplemental.weekData.firstDay",t),o=e;return/en-/.test(o)&&(o=o.slice(3)),o=o.slice(0,2).toUpperCase()+o.substr(2),n&&(i=n[""+o]||n[o.slice(0,2)]||s),a[""+i]},e.replaceBlazorCurrency=function(e,t,i){var n=l(i||"",V);if(t!==n)for(var o=0,s=e;o<s.length;o++){var a=s[o];a.nend=a.nend.replace(t,n),a.nlead=a.nlead.replace(t,n)}},e.getWeekOfYear=function(e){var t,i=new Date(e.getFullYear(),0,1),n=i.getDay();n=n>=0?n:n+7;var o=Math.floor((e.getTime()-i.getTime()-6e4*(e.getTimezoneOffset()-i.getTimezoneOffset()))/864e5)+1;if(n<4){if((t=Math.floor((o+n-1)/7)+1)>52){var s=new Date(e.getFullYear()+1,0,1).getDay();t=(s=s>=0?s:s+7)<4?1:53}}else t=Math.floor((o+n-1)/7);return t}}(ne||(ne={}));var se=/^(.*?):[ \t]*([^\r\n]*)$/gm,ae=function(){function e(e,t,i,n){this.mode=!0,this.emitError=!0,this.options={},"string"===typeof e?(this.url=e,this.type=t?t.toUpperCase():"GET",this.mode=!!m(i)||i):"object"===typeof e&&(this.options=e,u(this,this.options)),this.type=this.type?this.type.toUpperCase():"GET",this.contentType=void 0!==this.contentType?this.contentType:n}return e.prototype.send=function(e){var t=this;this.data=m(e)?this.data:e;var i={cancel:!1,httpRequest:null};return new Promise((function(e,n){t.httpRequest=new XMLHttpRequest,t.httpRequest.onreadystatechange=function(){t.stateChange(e,n)},m(t.onLoad)||(t.httpRequest.onload=t.onLoad),m(t.onProgress)||(t.httpRequest.onprogress=t.onProgress),m(t.onAbort)||(t.httpRequest.onabort=t.onAbort),m(t.onError)||(t.httpRequest.onerror=t.onError),m(t.onUploadProgress)||(t.httpRequest.upload.onprogress=t.onUploadProgress),t.httpRequest.open(t.type,t.url,t.mode),m(t.data)||null===t.contentType||t.httpRequest.setRequestHeader("Content-Type",t.contentType||"application/json; charset=utf-8"),t.beforeSend&&(i.httpRequest=t.httpRequest,t.beforeSend(i)),i.cancel||t.httpRequest.send(m(t.data)?null:t.data)}))},e.prototype.successHandler=function(e){return this.onSuccess&&this.onSuccess(e,this),e},e.prototype.failureHandler=function(e){return this.onFailure&&this.onFailure(this.httpRequest),e},e.prototype.stateChange=function(e,t){var i=this.httpRequest.responseText;if(this.dataType&&"json"===this.dataType.toLowerCase())if(""===i)i=void 0;else try{i=JSON.parse(i)}catch(n){}4===this.httpRequest.readyState&&(this.httpRequest.status>=200&&this.httpRequest.status<=299||304===this.httpRequest.status?e(this.successHandler(i)):this.emitError?t(new Error(this.failureHandler(this.httpRequest.statusText))):e())},e.prototype.getResponseHeader=function(e){var t,i;t={};for(var n=se.exec(this.httpRequest.getAllResponseHeaders());n;)t[n[1].toLowerCase()]=n[2],n=se.exec(this.httpRequest.getAllResponseHeaders());return m(i=t[e.toLowerCase()])?null:i},e}(),re=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,le=/msie|trident/i,de=/Trident\/7\./,he=/(ipad|iphone|ipod touch)/i,pe=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,ce=/android/i,ue=/trident|windows phone|edge/i,fe=/(version)[ /]([\w.]+)/i,me={OPERA:/(opera|opr)(?:.*version|)[ /]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ /]([\w.]+)/i,CHROME:/(chrome|crios)[ /]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ /]([\w.]+)/i,SAFARI:/(safari)[ /]([\w.]+)/i,WEBKIT:/(webkit)[ /]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};"undefined"!==typeof window&&(window.browserDetails=window.browserDetails||{});var ge=function(){function e(){}return e.extractBrowserDetail=function(){for(var t={culture:{}},i=[],n=0,o=Object.keys(me);n<o.length;n++){var s=o[n];if(i=e.userAgent.match(me[""+s])){if(t.name="opr"===i[1].toLowerCase()?"opera":i[1].toLowerCase(),t.name="crios"===i[1].toLowerCase()?"chrome":t.name,t.version=i[2],t.culture.name=t.culture.language=navigator.language,e.userAgent.match(de)){t.name="msie";break}var a=e.userAgent.match(fe);"safari"===t.name&&a&&(t.version=a[2]);break}}return t},e.getEvent=function(t){var i={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return e.isPointer?i[""+t].isPointer:e.isTouch?i[""+t].isTouch+(e.isDevice?"":" "+i[""+t].isDevice):i[""+t].isDevice},e.getTouchStartEvent=function(){return e.getEvent("start")},e.getTouchEndEvent=function(){return e.getEvent("end")},e.getTouchMoveEvent=function(){return e.getEvent("move")},e.getTouchCancelEvent=function(){return e.getEvent("cancel")},e.getValue=function(t,i){var n="undefined"!==typeof window?window.browserDetails:{};return"undefined"!==typeof navigator&&"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1&&!0===e.isTouch&&(n.isIos=!0,n.isDevice=!0,n.isTouch=!0,n.isPointer=!0),"undefined"===typeof n[""+t]?n[""+t]=i.test(e.userAgent):n[""+t]},Object.defineProperty(e,"userAgent",{get:function(){return e.uA},set:function(t){e.uA=t,window.browserDetails={}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"info",{get:function(){return g(window.browserDetails.info)?window.browserDetails.info=e.extractBrowserDetail():window.browserDetails.info},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIE",{get:function(){return e.getValue("isIE",le)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isTouch",{get:function(){return g(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window.navigator||window&&window.navigator&&window.navigator.maxTouchPoints>0||"ontouchstart"in window:window.browserDetails.isTouch},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isPointer",{get:function(){return g(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isMSPointer",{get:function(){return g(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isDevice",{get:function(){return e.getValue("isDevice",re)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos",{get:function(){return e.getValue("isIos",he)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos7",{get:function(){return e.getValue("isIos7",pe)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isAndroid",{get:function(){return e.getValue("isAndroid",ce)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWebView",{get:function(){return g(window.browserDetails.isWebView)?(window.browserDetails.isWebView=!(g(window.cordova)&&g(window.PhoneGap)&&g(window.phonegap)&&"object"!==window.forge),window.browserDetails.isWebView):window.browserDetails.isWebView},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWindows",{get:function(){return e.getValue("isWindows",ue)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchStartEvent",{get:function(){return g(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=e.getTouchStartEvent():window.browserDetails.touchStartEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchMoveEvent",{get:function(){return g(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=e.getTouchMoveEvent():window.browserDetails.touchMoveEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchEndEvent",{get:function(){return g(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=e.getTouchEndEvent():window.browserDetails.touchEndEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchCancelEvent",{get:function(){return g(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=e.getTouchCancelEvent():window.browserDetails.touchCancelEvent},enumerable:!0,configurable:!0}),e.uA="undefined"!==typeof navigator?navigator.userAgent:"",e}(),ye=function(){function e(){}return e.addOrGetEventData=function(e){return"__eventList"in e?e.__eventList.events:(e.__eventList={},e.__eventList.events=[])},e.add=function(t,i,n,o,s){var a,r=e.addOrGetEventData(t);a=s?function(e,t){var i;return function(){var n=this,o=arguments;clearTimeout(i),i=setTimeout((function(){return i=null,e.apply(n,o)}),t)}}(n,s):n,o&&(a=a.bind(o));for(var l=i.split(" "),d=0;d<l.length;d++)r.push({name:l[parseInt(d.toString(),10)],listener:n,debounce:a}),ge.isIE?t.addEventListener(l[parseInt(d.toString(),10)],a):t.addEventListener(l[parseInt(d.toString(),10)],a,{passive:!1});return a},e.remove=function(t,i,n){for(var o=e.addOrGetEventData(t),s=i.split(" "),a=function(e){var i,a=-1;o&&0!==o.length&&o.some((function(t,o){return t.name===s[parseInt(e.toString(),10)]&&t.listener===n&&(a=o,i=t.debounce,!0)})),-1!==a&&o.splice(a,1),i&&t.removeEventListener(s[parseInt(e.toString(),10)],i)},r=0;r<s.length;r++)a(r)},e.clearEvents=function(t){var i,n;n=f([],n,i=e.addOrGetEventData(t));for(var o=0;o<n.length;o++)t.removeEventListener(n[parseInt(o.toString(),10)].name,n[parseInt(o.toString(),10)].debounce),i.shift()},e.trigger=function(t,i,n){for(var o=0,s=e.addOrGetEventData(t);o<s.length;o++){var a=s[o];a.name===i&&a.debounce.call(this,n)}},e}(),ve=/^svg|^path|^g/;function we(e,t){var i=ve.test(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return"undefined"===typeof t||(i.innerHTML=t.innerHTML?t.innerHTML:"",void 0!==t.className&&(i.className=t.className),void 0!==t.id&&(i.id=t.id),void 0!==t.styles&&i.setAttribute("style",t.styles),void 0!==t.attrs&&Ve(i,t.attrs)),i}function be(e,t){for(var i=Ce(t),n=0,o=e;n<o.length;n++)for(var s=o[n],a=0,r=i;a<r.length;a++){var h=r[a];if(c(s)){var p=l("attributes.className",s);m(p)?d("attributes.className",h,s):new RegExp("\\b"+h+"\\b","i").test(p)||d("attributes.className",p+" "+h,s)}else s.classList.contains(h)||s.classList.add(h)}return e}function Se(e,t){for(var i=Ce(t),n=0,o=e;n<o.length;n++){var s=o[n],a=c(s);if(a?l("attributes.className",s):""!==s.className)for(var r=0,h=i;r<h.length;r++){var p=h[r];if(a){var u=l("attributes.className",s).split(" "),f=u.indexOf(p);-1!==f&&u.splice(f,1),d("attributes.className",u.join(" "),s)}else s.classList.remove(p)}}return e}function Ce(e){var t=[];return"string"===typeof e?t.push(e):t=e,t}function xe(e){var t=e;return""===t.style.visibility&&t.offsetWidth>0}function Me(e,t,i){for(var n=document.createDocumentFragment(),o=0,s=e;o<s.length;o++){var a=s[o];n.appendChild(a)}return t.insertBefore(n,t.firstElementChild),i&&Te(t),e}function Ie(e,t,i){for(var n=document.createDocumentFragment(),o=0,s=e;o<s.length;o++){var a=s[o];n.appendChild(a)}return t.appendChild(n),i&&Te(t),e}function Te(e){e.querySelectorAll("script").forEach((function(e){var t=document.createElement("script");t.text=e.innerHTML,document.head.appendChild(t),Ae(t)}))}function Ae(e){var t=e.parentNode;if(t)return t.removeChild(e)}function ke(e){var t=e.parentNode;ye.clearEvents(e),t.removeChild(e)}function Ve(e,t){for(var i=e,n=0,o=Object.keys(t);n<o.length;n++){var s=o[n];if(c(i)){var a=s;"tabindex"===s&&(a="tabIndex"),i.attributes[""+a]=t[""+s]}else i.setAttribute(s,t[""+s])}return i}function Ee(e,t,i){return void 0===t&&(t=document),e=Ne(e),t.querySelector(e)}function De(e,t,i){return void 0===t&&(t=document),e=Ne(e),t.querySelectorAll(e)}function Ne(e){var t=/(!|"|\$|%|&|'|\(|\)|\*|\/|:|;|<|=|\?|@|\]|\^|`|{|}|\||\+|~)/g;if(e.match(/#[0-9]/g)||e.match(t)){for(var i=e.split(","),n=0;n<i.length;n++){for(var o=i[parseInt(n.toString(),10)].split(" "),s=0;s<o.length;s++)if(o[parseInt(s.toString(),10)].indexOf("#")>-1&&!o[parseInt(s.toString(),10)].match(/\[.*\]/)){var a=o[parseInt(s.toString(),10)].split("#");if(a[1].match(/^\d/)||a[1].match(t)){var r=o[parseInt(s.toString(),10)].split(".");r[0]=r[0].replace(/#/,"[id='")+"']",o[parseInt(s.toString(),10)]=r.join(".")}}i[parseInt(n.toString(),10)]=o.join(" ")}return i.join(",")}return e}function Fe(e,t){var i=e;if("function"===typeof i.closest)return i.closest(t);for(;i&&1===i.nodeType;){if(Oe(i,t))return i;i=i.parentNode}return null}function Le(e,t){void 0!==t&&Object.keys(t).forEach((function(i){e.style[i]=t[i]}))}function Pe(e,t,i){be([e],t),Se([e],i)}function Oe(e,t){var i=e.matches||e.msMatchesSelector||e.webkitMatchesSelector;return i?i.call(e,t):-1!==[].indexOf.call(document.querySelectorAll(t),e)}var Be=new RegExp("]"),ze=function(){function e(e,t){this.isRendered=!1,this.isComplexArraySetter=!1,this.isServerRendered=!1,this.allowServerDataBinding=!0,this.isProtectedOnChange=!0,this.properties={},this.changedProperties={},this.oldProperties={},this.bulkChanges={},this.refreshing=!1,this.ignoreCollectionWatch=!1,this.finalUpdate=function(){},this.childChangedProperties={},this.modelObserver=new Q(this),g(t)||(this.element="string"===typeof t?document.querySelector(t):t,m(this.element)||(this.isProtectedOnChange=!1,this.addInstance())),g(e)||this.setProperties(e,!0),this.isDestroyed=!1}return e.prototype.setProperties=function(e,t){var i=this.isProtectedOnChange;this.isProtectedOnChange=!!t,u(this,e),!0!==t?(u(this.changedProperties,e),this.dataBind()):S()&&this.isRendered&&this.serverDataBind(e),this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.isProtectedOnChange=i},e.callChildDataBind=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){var o=n[i];if(t[""+o]instanceof Array)for(var s=0,a=t[""+o];s<a.length;s++){var r=a[s];void 0!==r.dataBind&&r.dataBind()}else t[""+o].dataBind()}},e.prototype.clearChanges=function(){this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.childChangedProperties={}},e.prototype.dataBind=function(){if(e.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){var t=this.isProtectedOnChange,i=this.changedProperties,n=this.oldProperties;this.clearChanges(),this.isProtectedOnChange=!0,this.onPropertyChanged(i,n),this.isProtectedOnChange=t}},e.prototype.serverDataBind=function(e){if(S()){e=e||{},f(this.bulkChanges,{},e,!0);var t="sfBlazor";this.allowServerDataBinding&&window[""+t].updateModel&&(window[""+t].updateModel(this),this.bulkChanges={})}},e.prototype.saveChanges=function(e,t,i){if(S()){var n={};n[""+e]=t,this.serverDataBind(n)}this.isProtectedOnChange||(this.oldProperties[""+e]=i,this.changedProperties[""+e]=t,this.finalUpdate(),this.finalUpdate=r(this.dataBind.bind(this)))},e.prototype.addEventListener=function(e,t){this.modelObserver.on(e,t)},e.prototype.removeEventListener=function(e,t){this.modelObserver.off(e,t)},e.prototype.trigger=function(e,t,i,n){var o=this;if(!0!==this.isDestroyed){var s=this.isProtectedOnChange;this.isProtectedOnChange=!1;var a=this.modelObserver.notify(e,t,i,n);if(Be.test(e)){var r=l(e,this);if(r){if(window.Blazor){var d=r.call(this,t);d&&"function"===typeof d.then?i?d.then((function(e){i&&(e="string"===typeof e&&o.modelObserver.isJson(e)?JSON.parse(e):e,i.call(o,e))})).catch((function(e){n&&(e="string"===typeof e&&o.modelObserver.isJson(e)?JSON.parse(e):e,n.call(o,e))})):a=d:i&&i.call(this,t)}else r.call(this,t),i&&i.call(this,t)}else i&&i.call(this,t)}return this.isProtectedOnChange=s,a}},e.prototype.addInstance=function(){var e="e-"+this.getModuleName().toLowerCase();be([this.element],["e-lib",e]),m(this.element.ej2_instances)?d("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)},e.prototype.destroy=function(){var e=this;this.element.ej2_instances=this.element.ej2_instances.filter((function(t){return t!==e})),Se([this.element],["e-"+this.getModuleName()]),0===this.element.ej2_instances.length&&Se([this.element],["e-lib"]),this.clearChanges(),this.modelObserver.destroy(),this.isDestroyed=!0},e}();function je(e,t){var i,n,o="string"===typeof e?document.getElementById(e):e;for(n=0;n<o.ej2_instances.length;n++){if(i=o.ej2_instances[parseInt(n.toString(),10)],"string"===typeof t){if(t===i.getModuleName())return i}else if(i instanceof t)return i}}function Re(e,t,i,n){return e.properties.hasOwnProperty(t)&&e.properties[t]instanceof n||(e.properties[""+t]=a(n,[e,t,i])),e.properties[""+t]}function _e(e,t,i,n,o,s){for(var r=[],l=i?i.length:0,d=0;d<l;d++){var h=n;if(s&&(h=n(i[parseInt(d.toString(),10)],e)),o){var p=a(h,[e,t,{},!0]);p.setProperties(i[parseInt(d.toString(),10)],!0),r.push(p)}else r.push(a(h,[e,t,i[parseInt(d.toString(),10)],!1]))}return r}function He(e,t){return function(){return this.properties.hasOwnProperty(t)||(this.properties[""+t]=e),this.properties[""+t]}}function We(e,t){return function(i){if(this.properties[""+t]!==i){var n=this.properties.hasOwnProperty(t)?this.properties[t]:e;this.saveChanges(t,i,n),this.properties[""+t]=i}}}function Ue(e,t,i){return function(){return Re(this,t,e,i)}}function qe(e,t,i){return function(n){Re(this,t,e,i).setProperties(n)}}function Ye(e,t,i){return function(){var n=this;if(!this.properties.hasOwnProperty(t)){var o=_e(this,t,e,i,!1);this.properties[""+t]=o}var s=void 0!==this.controlParent&&this.controlParent.ignoreCollectionWatch||this.ignoreCollectionWatch;return this.properties[t].hasOwnProperty("push")||s||["push","pop"].forEach((function(e){var o={value:Ze(e,t,i,n.properties[""+t]).bind(n),configurable:!0};Object.defineProperty(n.properties[""+t],e,o)})),this.properties[t].hasOwnProperty("isComplexArray")||Object.defineProperty(this.properties[""+t],"isComplexArray",{value:!0}),this.properties[""+t]}}function Qe(e,t,i){return function(n){this.isComplexArraySetter=!0;var o=_e(this,t,e,i,!1),s=_e(this,t,n,i,!0);this.isComplexArraySetter=!1,this.saveChanges(t,s,o),this.properties[""+t]=s}}function Ze(e,t,i,n){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=this.propName?this.getParentKey()+"."+t+"-":t+"-";switch(e){case"push":for(var a=0;a<i.length;a++){Array.prototype[""+e].apply(n,[i[parseInt(a.toString(),10)]]);var r=Xe(s+(n.length-1),i[parseInt(a.toString(),10)],!this.controlParent,e);this.serverDataBind(r,i[parseInt(a.toString(),10)],!1,e)}break;case"pop":Array.prototype[""+e].apply(n);var l=Xe(s+n.length,null,!this.controlParent,e);this.serverDataBind(l,{ejsAction:"pop"},!1,e)}return n}}function Xe(e,t,i,n){var o=e;if(i&&((o={})[""+e]=t,t&&"object"===typeof t)){o[""+e].ejsAction=n}return o}function Ge(e){return function(t,i){var n={set:We(e,i),get:He(e,i),enumerable:!0,configurable:!0};Object.defineProperty(t,i,n),tt(t,i,"prop",e)}}function Je(e,t){return function(i,n){var o={set:qe(e,n,t),get:Ue(e,n,t),enumerable:!0,configurable:!0};Object.defineProperty(i,n,o),tt(i,n,"complexProp",e,t)}}function Ke(e,t){return function(i,n){var o={set:Qe(e,n,t),get:Ye(e,n,t),enumerable:!0,configurable:!0};Object.defineProperty(i,n,o),tt(i,n,"colProp",e,t)}}function $e(){return function(e,t){var i={set:function(e){var i=this.properties[""+t];if(i!==e){var n=it(this,t);!1===g(i)&&n.context.removeEventListener(n.prefix,i),n.context.addEventListener(n.prefix,e),this.properties[""+t]=e}},get:He(void 0,t),enumerable:!0,configurable:!0};Object.defineProperty(e,t,i),tt(e,t,"event")}}function et(e){}function tt(e,t,i,n,o){g(e.propList)&&(e.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]}),e.propList[i+"s"].push({propertyName:t,defaultValue:n,type:o}),e.propList[i+"Names"].push(t)}function it(e,t){if(!1===e.hasOwnProperty("parentObj"))return{context:e,prefix:t};var i=l("propName",e);return i&&(t=i+"-"+t),it(l("parentObj",e),t)}var nt=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ot=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},st=function(e){function t(t){var i=e.call(this,t,void 0)||this;return i.easing={ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",elasticInOut:"cubic-bezier(0.5,-0.58,0.38,1.81)",elasticIn:"cubic-bezier(0.17,0.67,0.59,1.81)",elasticOut:"cubic-bezier(0.7,-0.75,0.99,1.01)"},i}var i;return nt(t,e),i=t,t.prototype.animate=function(e,t){t=t||{};var n=this.getModel(t);if("string"===typeof e)for(var o=0,s=Array.prototype.slice.call(De(e,document));o<s.length;o++){var a=s[o];n.element=a,i.delayAnimation(n)}else n.element=e,i.delayAnimation(n)},t.stop=function(e,t){e.style.animation="",e.removeAttribute("e-animate");var i=e.getAttribute("e-animation-id");if(i){var n=parseInt(i,10);cancelAnimationFrame(n),e.removeAttribute("e-animation-id")}t&&t.end&&t.end.call(this,t)},t.delayAnimation=function(e){"Disable"===ct?(e.begin&&e.begin.call(this,e),e.end&&e.end.call(this,e)):e.delay?setTimeout((function(){i.applyAnimation(e)}),e.delay):i.applyAnimation(e)},t.applyAnimation=function(e){var t=this;e.timeStamp=0;var i=0,n=0,o=0,s=e.duration;e.element.setAttribute("e-animate","true");!function a(r){try{if(r){o=0===o?r:o,e.timeStamp=r+e.timeStamp-o,o=r,!i&&e.begin&&e.begin.call(t,e),i+=1;var l=e.timeStamp/i;e.timeStamp<s&&e.timeStamp+l<s&&e.element.getAttribute("e-animate")?(e.element.style.animation=e.name+" "+e.duration+"ms "+e.timingFunction,e.progress&&e.progress.call(t,e),requestAnimationFrame(a)):(cancelAnimationFrame(n),e.element.removeAttribute("e-animation-id"),e.element.removeAttribute("e-animate"),e.element.style.animation="",e.end&&e.end.call(t,e))}else n=requestAnimationFrame(a),e.element.setAttribute("e-animation-id",n.toString())}catch(d){cancelAnimationFrame(n),e.element.removeAttribute("e-animation-id"),e.fail&&e.fail.call(t,d)}}()},t.prototype.getModel=function(e){return{name:e.name||this.name,delay:e.delay||this.delay,duration:void 0!==e.duration?e.duration:this.duration,begin:e.begin||this.begin,end:e.end||this.end,fail:e.fail||this.fail,progress:e.progress||this.progress,timingFunction:this.easing[e.timingFunction]?this.easing[e.timingFunction]:e.timingFunction||this.easing[this.timingFunction]}},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"animation"},t.prototype.destroy=function(){},ot([Ge("FadeIn")],t.prototype,"name",void 0),ot([Ge(400)],t.prototype,"duration",void 0),ot([Ge("ease")],t.prototype,"timingFunction",void 0),ot([Ge(0)],t.prototype,"delay",void 0),ot([$e()],t.prototype,"progress",void 0),ot([$e()],t.prototype,"begin",void 0),ot([$e()],t.prototype,"end",void 0),ot([$e()],t.prototype,"fail",void 0),t=i=ot([et],t)}(ze);function at(e,t,i){var n=function(e){var t={selector:e&&e.selector?e.selector:null,ignore:e&&e.ignore?e.ignore:null,rippleFlag:e&&e.rippleFlag,isCenterRipple:e&&e.isCenterRipple,duration:e&&e.duration?e.duration:350};return t}(t);return!1===n.rippleFlag||void 0===n.rippleFlag&&!pt?function(){}:(e.setAttribute("data-ripple","true"),ye.add(e,"mousedown",rt,{parent:e,rippleOptions:n}),ye.add(e,"mouseup",lt,{parent:e,rippleOptions:n,done:i}),ye.add(e,"mouseleave",dt,{parent:e,rippleOptions:n}),ge.isPointer&&ye.add(e,"transitionend",dt,{parent:e,rippleOptions:n}),function(){e.removeAttribute("data-ripple"),ye.remove(e,"mousedown",rt),ye.remove(e,"mouseup",lt),ye.remove(e,"mouseleave",dt),ye.remove(e,"transitionend",dt)})}function rt(e){var t=e.target,i=this.rippleOptions.selector,n=i?Fe(t,i):t;if(!(!n||this.rippleOptions&&Fe(t,this.rippleOptions.ignore))){var o=n.getBoundingClientRect(),s=e.pageX-document.body.scrollLeft,a=e.pageY-(!document.body.scrollTop&&document.documentElement?document.documentElement.scrollTop:document.body.scrollTop),r=Math.max(Math.abs(s-o.left),Math.abs(s-o.right)),l=Math.max(Math.abs(a-o.top),Math.abs(a-o.bottom)),d=Math.sqrt(r*r+l*l),h=2*d+"px",p=s-o.left-d,c=a-o.top-d;this.rippleOptions&&this.rippleOptions.isCenterRipple&&(p=0,c=0,h="100%"),n.classList.add("e-ripple");var u=we("div",{className:"e-ripple-element",styles:"width: "+h+";height: "+h+";left: "+p+"px;top: "+c+"px;transition-duration: "+this.rippleOptions.duration.toString()+"ms;"});n.appendChild(u),window.getComputedStyle(u).getPropertyValue("opacity"),u.style.transform="scale(1)",n!==this.parent&&ye.add(n,"mouseleave",dt,{parent:this.parent,rippleOptions:this.rippleOptions})}}function lt(e){ht(e,this)}function dt(e){ht(e,this)}function ht(e,t){var i=t.rippleOptions.duration,n=e.target,o=t.rippleOptions.selector,s=o?Fe(n,o):n;if(s&&(!s||-1!==s.className.indexOf("e-ripple"))){var a=De(".e-ripple-element",s),r=a[a.length-1];r&&(r.style.opacity="0.5"),t.parent!==s&&ye.remove(s,"mouseleave",dt),setTimeout((function(){r&&r.parentNode&&r.parentNode.removeChild(r),s.getElementsByClassName("e-ripple-element").length||s.classList.remove("e-ripple"),t.done&&t.done(e)}),i)}}var pt=!1;var ct="";var ut,ft=function(){function e(e){this.loadedModules=[],this.parent=e}return e.prototype.inject=function(e,t){var i=e.length;if(0!==i){this.loadedModules.length&&this.clearUnusedModule(e);for(var n=0;n<i;n++)for(var o=e[parseInt(n.toString(),10)],s=0,r=t;s<r.length;s++){var l=r[s],h=o.member;if(l&&l.prototype.getModuleName()===o.member&&!this.isModuleLoaded(h)){var p=a(l,o.args),c=this.getMemberName(h);o.isProperty?d(c,l,this.parent):d(c,p,this.parent);var u=o;u.member=c,this.loadedModules.push(u)}}}else this.clean()},e.prototype.clean=function(){for(var e=0,t=this.loadedModules;e<t.length;e++){var i=t[e];i.isProperty||l(i.member,this.parent).destroy()}this.loadedModules=[]},e.prototype.clearUnusedModule=function(e){for(var t=this,i=e.map((function(e){return t.getMemberName(e.member)})),n=0,o=this.loadedModules.filter((function(e){return-1===i.indexOf(e.member)}));n<o.length;n++){var s=o[n];s.isProperty||l(s.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(s),1),h(this.parent,s.member)}},e.prototype.getMemberName=function(e){return e[0].toLowerCase()+e.substring(1)+"Module"},e.prototype.isModuleLoaded=function(e){for(var t=0,i=this.loadedModules;t<i.length;t++){if(i[t].member===this.getMemberName(e))return!0}return!1},e}(),mt=function(){function e(e,t,i,n){this.isComplexArraySetter=!1,this.properties={},this.changedProperties={},this.childChangedProperties={},this.oldProperties={},this.finalUpdate=function(){},this.callChildDataBind=l("callChildDataBind",ze),this.parentObj=e,this.controlParent=this.parentObj.controlParent||this.parentObj,this.propName=t,this.isParentArray=n,this.setProperties(i,!0)}return e.prototype.updateChange=function(e,t){!0===e?this.parentObj.childChangedProperties[""+t]=e:delete this.parentObj.childChangedProperties[""+t],this.parentObj.updateChange&&this.parentObj.updateChange(e,this.parentObj.propName)},e.prototype.updateTimeOut=function(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{var e=setTimeout(this.parentObj.dataBind.bind(this.parentObj));this.finalUpdate=function(){clearTimeout(e)}}},e.prototype.clearChanges=function(){this.finalUpdate(),this.updateChange(!1,this.propName),this.oldProperties={},this.changedProperties={}},e.prototype.setProperties=function(e,t){!0===t?(u(this,e),this.updateChange(!1,this.propName),this.clearChanges()):u(this,e)},e.prototype.dataBind=function(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){var e=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(d(this.propName+"."+e,this.changedProperties,this.parentObj.changedProperties),d(this.propName+"."+e,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()},e.prototype.saveChanges=function(e,t,i,n){this.controlParent.isProtectedOnChange||(n||this.serverDataBind(e,t,!0),this.oldProperties[""+e]=i,this.changedProperties[""+e]=t,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())},e.prototype.serverDataBind=function(e,t,i,n){if(S()&&!this.parentObj.isComplexArraySetter){var o,s={},a=i?this.getParentKey(!0)+"."+e:e;if(-1!==a.indexOf(".")){var r=a.split(".");o=s;for(var l=0;l<r.length;l++){var d=l===r.length-1;o[r[parseInt(l.toString(),10)]]=d?t:{},o=d?o:o[r[parseInt(l.toString(),10)]]}}else s[""+a]={},o=s[""+a],s[""+a][""+e]=t;if(this.isParentArray){o.ejsAction=n||"none"}this.controlParent.serverDataBind(s)}},e.prototype.getParentKey=function(e){var t="",i=this.propName;if(this.isParentArray){t=this.parentObj[this.propName].indexOf(this);var n=this.parentObj[this.propName].length;n=e?n:n>0?n-1:0,i+=t=-1!==t?"-"+t:"-"+n}return this.controlParent!==this.parentObj&&(i=this.parentObj.getParentKey()+"."+this.propName+t),i},e}(),gt=["grid","pivotview","treegrid","spreadsheet","rangeNavigator","DocumentEditor","listbox","PdfViewer","richtexteditor","DashboardLayout","chart","stockChart","circulargauge","diagram","heatmap","lineargauge","maps","smithchart","barcode","sparkline","treemap","bulletChart","kanban","daterangepicker","schedule","gantt","signature","query-builder","drop-down-tree","carousel","filemanager","uploader","accordion","tab","treeview"],yt=[115,121,110,99,102,117,115,105,111,110,46,105,115,76,105,99,86,97,108,105,100,97,116,101,100],vt=function(){function e(e){this.isValidated=!1,this.isLicensed=!0,this.version="20.4",this.platform=/JavaScript|ASPNET|ASPNETCORE|ASPNETMVC|FileFormats/i,this.errors={noLicense:"<span>This application was built using a trial version of Syncfusion Essential Studio. To remove the license validation message permanently, a valid license key must be included.</span>",trailExpired:"<span>This application was built using a trial version of Syncfusion Essential Studio. To remove the license validation message permanently, a valid license key must be included.</span>",versionMismatched:"<span>The included Syncfusion license key is invalid.</span>",platformMismatched:"<span>The included Syncfusion license key is invalid.</span>",invalidKey:"<span>The included Syncfusion license key is invalid.</span>"},this.manager=function(){var e=null;return{setKey:function(t){e=t},getKey:function(){return e}}}(),this.npxManager=function(){var e="npxKeyReplace";return{getKey:function(){return e}}}(),this.manager.setKey(e)}return e.prototype.validate=function(){if(!this.isValidated&&p&&!l(bt(yt),p)&&!l("Blazor",p)){var e=void 0,t=void 0;if(this.manager&&this.manager.getKey()||this.npxManager&&"npxKeyReplace"!==this.npxManager.getKey()){var i=this.getInfoFromKey();if(i&&i.length)for(var n=0,o=i;n<o.length;n++){var s=o[n];if(!this.platform.test(s.platform)||s.invalidPlatform)e=this.errors.platformMismatched;else if(-1===s.version.indexOf(this.version))e=(e=(e=this.errors.versionMismatched).replace("##LicenseVersion",s.version)).replace("##Requireversion",this.version+".x");else if(s.expiryDate){var a=new Date(s.expiryDate),r=new Date;if(!(a!==r&&a<r))break;e=this.errors.trailExpired}}else e=this.errors.invalidKey}else{var h=l(bt([115,121,110,99,102,117,115,105,111,110,46,108,105,99,101,110,115,101,67,111,110,116,101,110,116]),p);t=l(bt([115,121,110,99,102,117,115,105,111,110,46,99,108,97,105,109,65,99,99,111,117,110,116,85,82,76]),p),e=h&&""!==h?h:this.errors.noLicense}if(e&&"undefined"!==typeof document&&!m(document)){var c=we("div",{innerHTML:"<img src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzE5OV80KSI+CjxwYXRoIGQ9Ik0xMiAyMUMxNi45NzA2IDIxIDIxIDE2Ljk3MDYgMjEgMTJDMjEgNy4wMjk0NCAxNi45NzA2IDMgMTIgM0M3LjAyOTQ0IDMgMyA3LjAyOTQ0IDMgMTJDMyAxNi45NzA2IDcuMDI5NDQgMjEgMTIgMjFaIiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBmaWxsPSIjNjE2MDYzIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS44MTI1IDlDMTIuNDMzOCA5IDEyLjkzNzUgOC40OTYzMiAxMi45Mzc1IDcuODc1QzEyLjkzNzUgNy4yNTM2OCAxMi40MzM4IDYuNzUgMTEuODEyNSA2Ljc1QzExLjE5MTIgNi43NSAxMC42ODc1IDcuMjUzNjggMTAuNjg3NSA3Ljg3NUMxMC42ODc1IDguNDk2MzIgMTEuMTkxMiA5IDExLjgxMjUgOVoiIGZpbGw9IiM3MzczNzMiLz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xOTlfNCI+CjxyZWN0IHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K' style=\"top: 6px;\n                    position: absolute;\n                    left: 16px;\n                    width: 24px;\n                    height: 24px;\"/>"+e+' <a style="text-decoration: none;color: #0D6EFD;font-weight: 500;" href='+(ut=t&&""!==t?t:"https://www.syncfusion.com/account/claim-license-key?pl=SmF2YVNjcmlwdA==&vs=MjAuNA==")+">Claim your free account</a>"});c.setAttribute("style","position: fixed;\n                top: 10px;\n                left: 10px;\n                right: 10px;\n                font-size: 14px;\n                background: #EEF2FF;\n                color: #222222;\n                z-index: 999999999;\n                text-align: left;\n                border: 1px solid #EEEEEE;\n                padding: 10px 11px 10px 50px;\n                border-radius: 8px;\n                font-family: Helvetica Neue, Helvetica, Arial;"),document.body.appendChild(c),this.isLicensed=!1}this.isValidated=!0,d(bt(yt),this.isValidated,p)}return this.isLicensed},e.prototype.getDecryptedData=function(e){try{return atob(e)}catch(t){return""}},e.prototype.getInfoFromKey=function(){try{var e="",t=[5439488,7929856,5111808,6488064,4587520,7667712,5439488,6881280,5177344,7208960,4194304,4456448,6619136,7733248,5242880,7077888,6356992,7602176,4587520,7274496,7471104,7143424],i=[],n=[],o=!1,s=!1;this.manager.getKey()?e=this.manager.getKey():(s=!0,e=this.npxManager.getKey().split("npxKeyReplace")[1]);for(var a=e.split(";"),r=0,l=a;r<l.length;r++){var d=l[r],h=this.getDecryptedData(d);if(h){var p=0,c="";if(s){var u=h[h.length-1],f=[];for(m=0;m<h.length;m++)f[parseInt(m.toString(),10)]=h[parseInt(m.toString(),10)].charCodeAt(0)-u.charCodeAt(0);for(m=0;m<f.length;m++)c+=String.fromCharCode(f[parseInt(m.toString(),10)])}else for(var m=0;m<h.length;m++,p++){p===t.length&&(p=0);var g=h.charCodeAt(m);c+=String.fromCharCode(g^t[parseInt(p.toString(),10)]>>16)}this.platform.test(c)?(i=c.split(";"),o=!1,i.length>3&&n.push({platform:i[0],version:i[1],expiryDate:i[2]})):c&&c.split(";").length>3&&(o=!0)}}return o&&!n.length?[{invalidPlatform:o}]:n.length?n:null}catch(y){return null}},e}(),wt=new vt;function bt(e){for(var t="",i=0,n=e;i<n.length;i++){var o=n[i];t+=String.fromCharCode(o)}return t}var St,Ct=function(e){return e&&function(e){wt=new vt(e)}(e),wt.validate()},xt=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Mt=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},It=0,Tt=0,At=0,kt=!0,Vt=!1,Et=!1;var Dt=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.randomId=function(){if("undefined"!==typeof window){var e=new Uint16Array(5);return(window.msCrypto||window.crypto).getRandomValues(e)}}(),n.isStringTemplate=!1,n.needsID=!1,n.isReactHybrid=!1,m(n.enableRtl)&&n.setProperties({enableRtl:X},!0),m(n.locale)&&n.setProperties({locale:J},!0),n.moduleLoader=new ft(n),n.localObserver=new Q(n),Z.on("notifyExternalChange",n.detectFunction,n,n.randomId),"undefined"===typeof window||"undefined"===typeof document||Ct()||-1!==gt.indexOf(n.getModuleName())&&(At+=1)>5&&(kt=!1),g(i)||n.appendTo(),n}return xt(t,e),t.prototype.requiredModules=function(){return[]},t.prototype.destroy=function(){this.isDestroyed||(this.enablePersistence&&this.setPersistData(),this.localObserver.destroy(),this.refreshing||(Se([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),e.prototype.destroy.call(this),this.moduleLoader.clean(),Z.off("notifyExternalChange",this.detectFunction,this.randomId)))},t.prototype.refresh=function(){this.refreshing=!0,this.moduleLoader.clean(),this.destroy(),this.clearChanges(),this.localObserver=new Q(this),this.preRender(),this.injectModules(),this.render(),this.refreshing=!1},t.prototype.accessMount=function(){this.mount&&!this.isReactHybrid&&this.mount()},t.prototype.getRootElement=function(){return this.isReactHybrid?this.actualElement:this.element},t.prototype.getLocalData=function(){var e=this.getModuleName()+this.element.id;return Et?window.localStorage.getItem(e+this.ej2StatePersistenceVersion):window.localStorage.getItem(e)},t.prototype.appendTo=function(t){if(m(t)||"string"!==typeof t?m(t)||(this.element=t):this.element=Ee(t,document),!m(this.element)){var i="e-"+this.getModuleName().toLowerCase();be([this.element],["e-control",i]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),window.addEventListener("unload",this.setPersistData.bind(this)));var n=l("ej2_instances",this.element);n&&-1!==n.indexOf(this)||e.prototype.addInstance.call(this),this.preRender(),this.injectModules(),kt||Vt||(!function(){var e='\n    <div style="\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    z-index: 99999;\n    ">\n        <div style="\n    background: #FFFFFF;\n    height: 455px;\n    width: 840px;\n    font-family: Helvetica Neue, Helvetica, Arial;\n    color: #000000;\n    box-shadow: 0px 4.8px 14.4px rgb(0 0 0 / 18%), 0px 25.6px 57.6px rgb(0 0 0 / 22%);\n    display: block;\n    margin: 8% auto;\n    border-radius: 20px;\n    ">\n            <div style="\n    position: absolute;\nwidth: 838px;\nheight: 62px;\nbackground-color: #F9F9F9;\nborder: 1px solid #EEEEEE;\nborder-top-left-radius: 20px;\nborder-top-right-radius: 20px;\n">\n                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQ2IiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMTQ2IDMyIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNNDAuNTk2NSAxNS4wMDc4SDMyLjQyNUMzMS41NTU3IDE1LjAwNzggMzAuOTAzNyAxNS4xODEyIDMwLjUxMjUgMTUuNDg0NkMzMC4xMjEzIDE1LjgzMTQgMjkuOTA0IDE2LjMwODIgMjkuOTA0IDE3LjA0NTFDMjkuOTA0IDE3LjYwODYgMzAuMDc3OCAxOC4wNDIxIDMwLjQyNTYgMTguMzAyMkMzMC43NzMzIDE4LjYwNTYgMzEuMjk0OSAxOC43MzU2IDMxLjk5MDMgMTguNzM1NkgzNi4zMzY5QzM4LjExODkgMTguNzM1NiAzOS40MjI5IDE5LjA4MjQgNDAuMTYxOCAxOS43MzI2QzQwLjk0NDIgMjAuNDI2MiA0MS4yOTE5IDIxLjU1MzIgNDEuMjkxOSAyMy4xMTM3QzQxLjI5MTkgMjQuNzE3NiA0MC44NTcyIDI1Ljg4OCAzOS45ODc5IDI2LjY2ODJDMzkuMTE4NiAyNy40MDUxIDM3LjcyNzcgMjcuNzk1MyAzNS44NTg3IDI3Ljc5NTNIMjcuMDc4N1YyNS4wMjFIMzUuMzM3MkMzNi4yOTM0IDI1LjAyMSAzNi45NDU0IDI0Ljg5MSAzNy4zMzY2IDI0LjYzMDlDMzcuNzI3NyAyNC4zNzA4IDM3LjkwMTYgMjMuODk0IDM3LjkwMTYgMjMuMjg3MUMzNy45MDE2IDIyLjYzNjkgMzcuNzI3NyAyMi4xNjAxIDM3LjM4IDIxLjlDMzcuMDMyMyAyMS42Mzk5IDM2LjQyMzggMjEuNDY2NSAzNS41NTQ1IDIxLjQ2NjVIMzEuNjQyNkMyOS44NjA1IDIxLjQ2NjUgMjguNTEzMSAyMS4xMTk4IDI3LjY4NzMgMjAuMzgyOEMyNi44NjE0IDE5LjY0NTkgMjYuNDI2OCAxOC41MTg5IDI2LjQyNjggMTcuMDAxN0MyNi40MjY4IDE1LjM1NDUgMjYuODYxNCAxNC4xNDA4IDI3LjczMDcgMTMuMzYwNkMyOC42IDEyLjU4MDMgMjkuOTkwOSAxMi4yMzM1IDMxLjkwMzQgMTIuMjMzNUg0MC41OTY1VjE1LjAwNzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik00OC4wNzI3IDI1LjI4MTFINTAuNTA2OFYxNi4zOTQ5SDUzLjU0OTNWMjcuNTM1MkM1My41NDkzIDI5LjA1MjQgNTMuMjAxNiAzMC4xNzk0IDUyLjUwNjIgMzAuOTE2M0M1MS44MTA3IDMxLjY1MzIgNTAuNzI0MSAzMiA0OS4yNDYzIDMySDQzLjMzNVYyOS42NTkySDQ4LjcyNDdDNDkuMjg5NyAyOS42NTkyIDQ5Ljc2NzkgMjkuNTI5MiA1MC4wNzIxIDI5LjIyNThDNTAuMzc2NCAyOC45NjU3IDUwLjU1MDIgMjguNTMyMiA1MC41NTAyIDI4LjAxMlYyNy44Mzg2SDQ3Ljg5ODlDNDYuMjAzNyAyNy44Mzg2IDQ0Ljk0MzIgMjcuNDkxOSA0NC4yNDc4IDI2Ljg0MTZDNDMuNTA4OSAyNi4xNDgxIDQzLjE2MTEgMjUuMDY0NCA0My4xNjExIDIzLjQ2MDVWMTYuMzk0OUg0Ni4xNjAyVjIzLjIwMDVDNDYuMTYwMiAyNC4wNjc0IDQ2LjI5MDYgMjQuNjMwOSA0Ni41NTE0IDI0Ljg5MUM0Ni43MjUzIDI1LjE1MTEgNDcuMjQ2OSAyNS4yODExIDQ4LjA3MjcgMjUuMjgxMVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTU1Ljg5NjUgMTYuMzk0OUg2MS41OTA0QzYzLjMyOTEgMTYuMzk0OSA2NC41NDYxIDE2LjY5ODMgNjUuMjg1IDE3LjM0ODVDNjYuMDIzOSAxNy45OTg4IDY2LjM3MTYgMTkuMDgyNCA2Ni4zNzE2IDIwLjU1NjNWMjcuNzk1M0g2My4zMjkxVjIwLjk0NjRDNjMuMzI5MSAyMC4wNzk0IDYzLjE5ODcgMTkuNTE1OSA2Mi45Mzc5IDE5LjI5OTJDNjIuNjc3MSAxOS4wMzkxIDYyLjE1NTUgMTguOTA5MSA2MS4zMjk3IDE4LjkwOTFINTguODk1NlYyNy44Mzg2SDU1Ljg1M1YxNi4zOTQ5SDU1Ljg5NjVaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03NC45MzQyIDI1LjM2NzhINzguMTUwNlYyNy43OTUySDc0LjAyMTRDNzIuOTc4MiAyNy43OTUyIDcyLjEwODkgMjcuNjY1MiA3MS40NTcgMjcuNDkxOEM3MC44MDUgMjcuMjc1IDcwLjE5NjUgMjYuOTI4MyA2OS43MTgzIDI2LjQ1MTRDNjkuMTk2OCAyNS45MzEzIDY4Ljc2MjEgMjUuMjgxMSA2OC40NTc4IDI0LjU0NDJDNjguMTUzNiAyMy44MDcyIDY4LjAyMzIgMjIuOTgzNiA2OC4wMjMyIDIyLjE2QzY4LjAyMzIgMjEuMjkzMSA2OC4xNTM2IDIwLjQ2OTUgNjguNDU3OCAxOS42ODkyQzY4Ljc2MjEgMTguOTA5IDY5LjE1MzMgMTguMzAyMSA2OS43MTgzIDE3Ljc4MTlDNzAuMjM5OSAxNy4zMDUxIDcwLjgwNSAxNi45NTgzIDcxLjUwMDQgMTYuNzQxNkM3Mi4xOTU5IDE2LjUyNDkgNzMuMDIxNyAxNi40MzgyIDc0LjA2NDkgMTYuNDM4Mkg3OC4xOTQxVjE4LjkwOUg3NC45MzQyQzczLjQ5OTggMTguOTA5IDcyLjU0MzYgMTkuMTY5MSA3MS45Nzg1IDE5LjY0NTlDNzEuNDU2OSAyMC4xMjI3IDcxLjE1MjcgMjAuOTg5NyA3MS4xNTI3IDIyLjIwMzRDNzEuMTUyNyAyMi44OTY5IDcxLjI4MzEgMjMuNDYwNSA3MS41MDA0IDIzLjkzNzNDNzEuNzE3NyAyNC40MTQxIDcyLjA2NTUgMjQuNzYwOSA3Mi41MDAxIDI1LjA2NDNDNzIuNzE3NCAyNS4xOTQ0IDcyLjk3ODIgMjUuMjgxMSA3My4yODI1IDI1LjM2NzhDNzMuNjMwMiAyNS4zMjQ0IDc0LjE1MTggMjUuMzY3OCA3NC45MzQyIDI1LjM2NzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik04MC44NDU2IDE4LjY0ODlINzguNjcyNFYxNi4zNTE1SDgwLjg0NTZWMTUuMTgxMUM4MC44NDU2IDE0LjAxMDggODEuMDYzIDEzLjIzMDUgODEuNDk3NiAxMi44NDA0QzgxLjkzMjMgMTIuNDUwMyA4Mi43NTgxIDEyLjIzMzUgODMuOTc1MSAxMi4yMzM1SDg2Ljg0MzhWMTQuNDAwOUg4NS40MDk1Qzg0Ljg4NzkgMTQuNDAwOSA4NC41NDAyIDE0LjQ4NzYgODQuMzIyOSAxNC42NjFDODQuMTA1NSAxNC44MzQ0IDgzLjk3NTEgMTUuMDk0NSA4My45NzUxIDE1LjQ0MTJWMTYuMzUxNUg4Ni44NDM4VjE4LjY0ODlIODMuOTc1MVYyNy43OTUzSDgwLjg0NTZWMTguNjQ4OVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTk4LjQwNTYgMjcuNzk1M0g5Mi43MTE2QzkxLjAxNjUgMjcuNzk1MyA4OS44NDI5IDI3LjQ0ODUgODkuMDYwNSAyNi43OTgzQzg4LjMyMTYgMjYuMTQ4MSA4Ny45MzA0IDI1LjA2NDQgODcuOTMwNCAyMy41OTA2VjE2LjM5NDlIOTAuOTI5NVYyMy40MTcyQzkwLjkyOTUgMjQuMTk3NCA5MS4wNTk5IDI0LjY3NDMgOTEuMzIwNyAyNC45MzQ0QzkxLjU4MTUgMjUuMTk0NCA5Mi4xMDMxIDI1LjMyNDUgOTIuOTI4OSAyNS4zMjQ1SDk1LjM2M1YxNi4zOTQ5SDk4LjQwNTZWMjcuNzk1M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTEwMC42MjIgMjUuNDExMkgxMDcuMDExQzEwNy41NzcgMjUuNDExMiAxMDguMDExIDI1LjMyNDUgMTA4LjI3MiAyNS4xNTExQzEwOC41MzMgMjQuOTc3NyAxMDguNjYzIDI0LjY3NDMgMTA4LjY2MyAyNC4zMjc1QzEwOC42NjMgMjMuOTM3NCAxMDguNTMzIDIzLjY3NzMgMTA4LjI3MiAyMy40NjA1QzEwOC4wMTEgMjMuMjg3MSAxMDcuNTc3IDIzLjIwMDUgMTA3LjA1NSAyMy4yMDA1SDEwNC40NDdDMTAyLjg4MiAyMy4yMDA1IDEwMS44MzkgMjIuOTgzNyAxMDEuMzE4IDIyLjUwNjlDMTAwLjc1MiAyMi4wMzAxIDEwMC40OTIgMjEuMjA2NSAxMDAuNDkyIDE5Ljk5MjdDMTAwLjQ5MiAxOC43NzkgMTAwLjgzOSAxNy44Njg3IDEwMS40OTEgMTcuMjYxOEMxMDIuMTQzIDE2LjY5ODMgMTAzLjE4NyAxNi4zOTQ5IDEwNC41MzQgMTYuMzk0OUgxMTEuMDU0VjE4Ljc3OUgxMDUuNzA4QzEwNC44MzggMTguNzc5IDEwNC4yNzMgMTguODY1NyAxMDQuMDEyIDE4Ljk5NTdDMTAzLjc1MiAxOS4xNjkxIDEwMy42MjEgMTkuNDI5MiAxMDMuNjIxIDE5LjgxOTRDMTAzLjYyMSAyMC4xNjYxIDEwMy43NTIgMjAuNDI2MiAxMDMuOTY5IDIwLjU5OTZDMTA0LjE4NiAyMC43NzMgMTA0LjU3NyAyMC44NTk3IDEwNS4wNTYgMjAuODU5N0gxMDcuNzk0QzEwOS4wNTQgMjAuODU5NyAxMTAuMDExIDIxLjE2MzEgMTEwLjY2MyAyMS43MjY2QzExMS4zMTUgMjIuMjkwMiAxMTEuNjYyIDIzLjE1NzEgMTExLjY2MiAyNC4yNDA4QzExMS42NjIgMjUuMjgxMSAxMTEuMzU4IDI2LjE0ODEgMTEwLjc5MyAyNi43OTgzQzExMC4yMjggMjcuNDQ4NSAxMDkuNDQ2IDI3Ljc5NTMgMTA4LjUzMyAyNy43OTUzSDEwMC43MDlWMjUuNDExMkgxMDAuNjIyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTE2LjU3NCAxNS4wOTQ0SDExMy40MDFWMTIuMjc2OUgxMTYuNTc0VjE1LjA5NDRaTTExNi41NzQgMjcuNzk1M0gxMTMuNDAxVjE2LjM5NDlIMTE2LjU3NFYyNy43OTUzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMwLjMwOSAyMi4xMTY3QzEzMC4zMDkgMjMuODkzOSAxMjkuNzQ0IDI1LjMyNDQgMTI4LjY1NyAyNi40MDgxQzEyNy41NzEgMjcuNDkxOCAxMjYuMDkzIDI4LjAxMiAxMjQuMjI0IDI4LjAxMkMxMjIuMzU1IDI4LjAxMiAxMjAuODc3IDI3LjQ5MTggMTE5Ljc5IDI2LjQwODFDMTE4LjcwNCAyNS4zMjQ0IDExOC4xMzkgMjMuODkzOSAxMTguMTM5IDIyLjExNjdDMTE4LjEzOSAyMC4zMzk0IDExOC43MDQgMTguOTA5IDExOS43OSAxNy44MjUzQzEyMC44NzcgMTYuNzQxNiAxMjIuMzk4IDE2LjIyMTQgMTI0LjIyNCAxNi4yMjE0QzEyNi4wNDkgMTYuMjIxNCAxMjcuNTI3IDE2Ljc0MTYgMTI4LjY1NyAxNy44MjUzQzEyOS43NDQgMTguODY1NiAxMzAuMzA5IDIwLjI5NjEgMTMwLjMwOSAyMi4xMTY3Wk0xMjEuMjY4IDIyLjExNjdDMTIxLjI2OCAyMy4yMDA0IDEyMS41MjkgMjQuMDY3MyAxMjIuMDUxIDI0LjY3NDJDMTIyLjU3MiAyNS4yODExIDEyMy4yNjggMjUuNTg0NSAxMjQuMTggMjUuNTg0NUMxMjUuMDkzIDI1LjU4NDUgMTI1Ljc4OSAyNS4yODExIDEyNi4zMSAyNC42NzQyQzEyNi44MzIgMjQuMDY3MyAxMjcuMDkzIDIzLjIwMDQgMTI3LjA5MyAyMi4xMTY3QzEyNy4wOTMgMjEuMDMzIDEyNi44MzIgMjAuMTY2MSAxMjYuMzEgMTkuNjAyNUMxMjUuNzg5IDE4Ljk5NTcgMTI1LjA5MyAxOC42OTIyIDEyNC4xMzcgMTguNjkyMkMxMjMuMjI0IDE4LjY5MjIgMTIyLjUyOSAxOC45OTU3IDEyMi4wMDcgMTkuNjAyNUMxMjEuNTI5IDIwLjE2NjEgMTIxLjI2OCAyMS4wMzMgMTIxLjI2OCAyMi4xMTY3WiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMxLjc4NyAxNi4zOTQ5SDEzNy40ODFDMTM5LjIxOSAxNi4zOTQ5IDE0MC40MzYgMTYuNjk4MyAxNDEuMTc1IDE3LjM0ODVDMTQxLjkxNCAxNy45OTg4IDE0Mi4yNjIgMTkuMDgyNCAxNDIuMjYyIDIwLjU1NjNWMjcuNzk1M0gxMzkuMjE5VjIwLjk0NjRDMTM5LjIxOSAyMC4wNzk0IDEzOS4wODkgMTkuNTE1OSAxMzguODI4IDE5LjI5OTJDMTM4LjU2NyAxOS4wMzkxIDEzOC4wNDYgMTguOTA5MSAxMzcuMjIgMTguOTA5MUgxMzQuNzg2VjI3LjgzODZIMTMxLjc0M1YxNi4zOTQ5SDEzMS43ODdaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDMuNzM3NDNIMFYxMC44NDY0SDcuMTI4MzFWMy43Mzc0M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTIzLjI1MTMgLTIuMTU3MjVlLTA1TDE4LjU1MTMgNS41MTY4NUwyNC4wODMxIDEwLjIwNDFMMjguNzgzMSA0LjY4NzI1TDIzLjI1MTMgLTIuMTU3MjVlLTA1WiIgZmlsbD0iI0ZGODYwMCIvPgo8cGF0aCBkPSJNMTUuNjA0MSAzLjczNzQzSDguNDc1ODNWMTAuODQ2NEgxNS42MDQxVjMuNzM3NDNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDEyLjE5MDJIMFYxOS4yOTkySDcuMTI4MzFWMTIuMTkwMloiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMTIuMTkwMkg4LjQ3NTgzVjE5LjI5OTJIMTUuNjA0MVYxMi4xOTAyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMDc5NyAxMi4xOTAySDE2Ljk1MTRWMTkuMjk5MkgyNC4wNzk3VjEyLjE5MDJaIiBmaWxsPSIjRkY4NjAwIi8+CjxwYXRoIGQ9Ik03LjEyODMxIDIwLjY4NjNIMFYyNy43OTUzSDcuMTI4MzFWMjAuNjg2M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMjAuNjg2M0g4LjQ3NTgzVjI3Ljc5NTNIMTUuNjA0MVYyMC42ODYzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMTIzMiAyMC42ODYzSDE2Ljk5NDlWMjcuNzk1M0gyNC4xMjMyVjIwLjY4NjNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik0xNDYgMTUuODMxM0MxNDYgMTYuODcxNyAxNDUuMTc0IDE3LjY5NTMgMTQ0LjEzMSAxNy42OTUzQzE0My4wODggMTcuNjk1MyAxNDIuMjYyIDE2Ljg3MTcgMTQyLjI2MiAxNS44MzEzQzE0Mi4yNjIgMTQuNzkxIDE0My4wODggMTQuMDEwNyAxNDQuMTMxIDE0LjAxMDdDMTQ1LjEzMSAxMy45Njc0IDE0NiAxNC43OTEgMTQ2IDE1LjgzMTNaTTE0Mi45NTcgMTQuNzkxQzE0Mi42OTcgMTUuMDUxMSAxNDIuNTY2IDE1LjQ0MTIgMTQyLjU2NiAxNS44MzEzQzE0Mi41NjYgMTYuNjk4MyAxNDMuMjYyIDE3LjM5MTggMTQ0LjEzMSAxNy4zOTE4QzE0NSAxNy4zOTE4IDE0NS42OTYgMTYuNjk4MyAxNDUuNjk2IDE1LjgzMTNDMTQ1LjY5NiAxNS4wMDc3IDE0NSAxNC4yNzA4IDE0NC4xNzQgMTQuMjcwOEMxNDMuNjUzIDE0LjI3MDggMTQzLjI2MiAxNC40NDQyIDE0Mi45NTcgMTQuNzkxWk0xNDQuODcgMTYuOTE1SDE0NC40NzlMMTQzLjkxNCAxNi4wOTE0VjE2LjkxNUgxNDMuNjA5VjE0Ljc0NzZIMTQzLjk1N0MxNDQuNDM1IDE0Ljc0NzYgMTQ0LjY1MyAxNC45NjQ0IDE0NC42NTMgMTUuMzU0NUMxNDQuNjUzIDE1LjY1NzkgMTQ0LjQ3OSAxNS44NzQ3IDE0NC4xNzQgMTUuOTYxNEwxNDQuODcgMTYuOTE1Wk0xNDQuMDQ0IDE1LjY1NzlDMTQ0LjI2MSAxNS42NTc5IDE0NC4zOTIgMTUuNTI3OSAxNDQuMzkyIDE1LjM1NDVDMTQ0LjM5MiAxNS4xMzc4IDE0NC4yNjEgMTUuMDUxMSAxNDQuMDAxIDE1LjA1MTFIMTQzLjkxNFYxNS42NTc5SDE0NC4wNDRaIiBmaWxsPSIjMzU0M0E4Ii8+Cjwvc3ZnPgo=" style="\n    text-align: left;\n    width: 146px;\n    position: absolute;\n    top: 14px;\n    left: 31px;\n">\n            </div>\n            <div style="\n    position: relative;\n    top: 80px;\n    left: 32px;\n    font-size: 20px;\n    text-align: left;\n    font-weight: 700;\n    letter-spacing: 0.02em;\n    font-style: normal;\n    line-height: 125%;\n    ">Claim your FREE account and get a key in less than a minute</div>\n            <ul style="\n        font-size: 15px;\n        font-weight: 400;\n        color: #333333;\n        letter-spacing: 0.01em;\n        position: relative;\n        left: 32px;\n        top: 88px;\n        line-height: 180%;\n        ">\n                <li><span>Access to a 30-day free trial of any of our products.</span></li>\n                <li><span>Access to 24x5 support by developers via the <a href="https://support.syncfusion.com/create" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">support tickets</a>, <a href="https://www.syncfusion.com/forums" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">forum</a>, <a href="https://www.syncfusion.com/feedback" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">feature &amp; feedback page</a> and chat.</span></li>\n                <li><span>200+ <a href="https://www.syncfusion.com/succinctly-free-ebooks" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">ebooks </a>on the latest technologies, industry trends, and research topics.</span>\n                </li>\n                <li><span>Largest collection of over 7,000 flat and wireframe icons for free with Syncfusion <a href="https://www.syncfusion.com/succinctly-free-ebooks" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">Metro Studio.</a></span></li>\n                <li><span>Free and unlimited access to Syncfusion technical <a href="https://www.syncfusion.com/blogs/" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">blogs</a> and <a href="https://www.syncfusion.com/resources/techportal/whitepapers" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">whitepapers.</a></span></li>\n            </ul>\n            <div style="\n            font-size: 18px;\n            font-weight: 700;\n            position: relative;\n            line-height: 125%;\n            letter-spacing: 0.02em;\n            top: 90px;\n            left: 32px;\n    ">Syncfusion is trusted by 29,000+ businesses worldwide</div>\n            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODIwIiBoZWlnaHQ9IjU2IiB2aWV3Qm94PSIwIDAgODIwIDU2IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00MjcuNjE3IDIyLjU2NTlWMjQuNzIyNkM0MjYuNTU4IDI0LjM2MzggNDI1LjM5OCAyNC4xNTQ0IDQyNC40NzQgMjQuMTU0NEM0MjMuMzMzIDI0LjE1NDQgNDIyLjY5OCAyNC40OTEyIDQyMi42OTggMjUuMDk2M0M0MjIuNjk4IDI1LjQ4MjQgNDIyLjk3NiAyNS43MzgzIDQyMy43NzMgMjYuMDg1NEw0MjUuOTE3IDI3LjAxNzRDNDI3LjYzMyAyNy43NjM5IDQyOC40OTcgMjguODUzIDQyOC40OTcgMzAuMjY4MUM0MjguNDk3IDMyLjQ1MjIgNDI2LjU0NiAzMy44MyA0MjMuNDUyIDMzLjgzQzQyMi4zMjQgMzMuODMgNDIxLjAxOCAzMy42NzM2IDQxOS42MzYgMzMuMzcwOVYzMS4xNDE2QzQyMS4wMDYgMzEuNTAyOCA0MjIuMjYyIDMxLjY5NTcgNDIzLjIzOSAzMS42OTU3QzQyNC41MTggMzEuNjk1NyA0MjUuMjAzIDMxLjM1MDYgNDI1LjIwMyAzMC43MDc0QzQyNS4yMDMgMzAuMzIwOCA0MjQuOTM1IDMwLjAzNjcgNDI0LjMyMiAyOS43NzE3TDQyMS45NzUgMjguNzU5M0M0MjAuMjM2IDI4LjAwNzggNDE5LjQzMyAyNi45OTU0IDQxOS40MzMgMjUuNTUyMUM0MTkuNDMzIDIzLjQ4MzcgNDIxLjMxNCAyMi4xNjQ5IDQyNC4yNjUgMjIuMTY0OUM0MjUuMjk4IDIyLjE2NDkgNDI2LjU3IDIyLjMxNzEgNDI3LjYxNyAyMi41NjU5VjIyLjU2NTlaTTQzMC4xNjcgMjIuMzkwOUg0MzMuNjM1VjMzLjYwMzlINDMwLjE2N1YyMi4zOTA5Wk00NDQuOTExIDIyLjM5MDlWMjQuNDQ1MUg0MzkuNjc1VjI2Ljk3NDJINDQ0LjI0OVYyOC44MzIzSDQzOS42NzVWMzEuNDU0M0g0NDQuOTc4VjMzLjYwMzlINDM2LjMwNVYyMi4zOTA5SDQ0NC45MTFaTTQ2MS4yOTQgMjIuMzkwOVYzMy42MDM5SDQ1Ny45MzlWMjYuMjIzNkw0NTQuNjUyIDMzLjY5MTVINDUyLjUzMUw0NDkuMjY2IDI2LjIyMzZWMzMuNjAzOUg0NDYuOTQ5VjIyLjM5MDlINDUxLjE4NEw0NTQuMTc4IDI5LjIxMTRMNDU3LjE1NiAyMi4zOTA5SDQ2MS4yOTRWMjIuMzkwOVpNNDcyLjU3OSAyMi4zOTA5VjI0LjQ0NTFINDY3LjMzNVYyNi45NzQySDQ3MS45MDhWMjguODMyM0g0NjcuMzM1VjMxLjQ1NDNINDcyLjYzOFYzMy42MDM5SDQ2My45NTdWMjIuMzkwOUg0NzIuNTc5Wk00ODQuNzk0IDIyLjM5MDlWMzMuNjAzOUg0ODEuMDkzTDQ3Ni45MjYgMjYuNDEyM1YzMy42MDM5SDQ3NC42MDhWMjIuMzkwOUg0NzguNDA3TDQ4Mi40ODQgMjkuNDg3NlYyMi4zOTA5SDQ4NC43OTRaTTQ5NC44NTggMjIuNTY1OVYyNC43MjI2QzQ5My44MDcgMjQuMzY2MyA0OTIuNjQgMjQuMTU0NCA0OTEuNzMyIDI0LjE1NDRDNDkwLjU3MyAyNC4xNTQ0IDQ4OS45MzkgMjQuNDg1OCA0ODkuOTM5IDI1LjA5M0M0ODkuOTM5IDI1LjQ4ODYgNDkwLjE5OCAyNS43MjUgNDkxLjAyMyAyNi4wODU5TDQ5My4xNTcgMjcuMDE3OEM0OTQuODg1IDI3Ljc3MjIgNDk1LjczOSAyOC44NTE4IDQ5NS43MzkgMzAuMjgzNUM0OTUuNzM5IDMyLjQ1NTkgNDkzLjc4NiAzMy44MzA4IDQ5MC42OTkgMzMuODMwOEM0ODkuNTY5IDMzLjgzMDggNDg4LjI1OSAzMy42NzM2IDQ4Ni44NzggMzMuMzcxN1YzMS4xNDI0QzQ4OC4yNDcgMzEuNTAyOCA0ODkuNDk5IDMxLjY5NjUgNDkwLjQ3IDMxLjY5NjVDNDkxLjc0IDMxLjY5NjUgNDkyLjQ0NCAzMS4zNTE1IDQ5Mi40NDQgMzAuNzI4NUM0OTIuNDQ0IDMwLjMxNjMgNDkyLjE5NyAzMC4wNTA0IDQ5MS41NTUgMjkuNzcyNUw0ODkuMjE4IDI4Ljc2MDFDNDg3LjQ2NyAyOC4wMDI4IDQ4Ni42NzQgMjcuMDAyIDQ4Ni42NzQgMjUuNTUzM0M0ODYuNjc0IDIzLjQ4NjIgNDg4LjU1NiAyMi4xNjY1IDQ5MS41IDIyLjE2NjVDNDkyLjUzNiAyMi4xNjUzIDQ5My44MTMgMjIuMzE3MSA0OTQuODU4IDIyLjU2NTlWMjIuNTY1OVoiIGZpbGw9IiMwMEEwQjAiLz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMzUyLjQxMyAyNi44MTlDMzUwLjk5MiAyNS4yNzU5IDM0OS42MzggMjMuODMxNSAzNDguMzQ5IDIyLjE1NzRMMzQ3LjkyIDIxLjU5OTVDMzQ5LjQwNiAyMS4zNjkzIDM1MC42OTUgMjAuMzg0OCAzNTAuNjk1IDE4Ljc0MzNDMzUwLjY5NSAxNy4yMzMxIDM0OS41MzkgMTYuMjQ4MiAzNDcuODIxIDE2LjI0ODJDMzQ2LjU5OCAxNi4yNDgyIDM0NS43MDYgMTYuMzEzNyAzNDUuMjQzIDE2LjMxMzdDMzQ0LjcxNSAxNi4zMTM3IDM0NC4yODUgMTYuMzEzNyAzNDMuNzkgMTYuMjgwOEMzNDMuODU2IDE4LjE1MjEgMzQzLjg4OSAxOC4yODM0IDM0My44ODkgMTkuNDMyMlYyMy42MzQzQzM0My44ODkgMjQuNDU1MyAzNDMuODU2IDI1LjI3NTkgMzQzLjc5IDI2LjgxODZDMzQ0LjE1MyAyNi43MjAyIDM0NC41MTcgMjYuNzIwMiAzNDQuNzgxIDI2LjcyMDJDMzQ1LjA0NSAyNi43MjAyIDM0NS40MDkgMjYuNzUzMSAzNDUuNzA2IDI2LjgxODZDMzQ1LjY0IDI1Ljc2NzkgMzQ1LjYwNyAyNC4wMjgzIDM0NS42MDcgMjMuNjM0M1YyMS4yMDUxQzM0Ny4xNiAyMy4yMDc3IDM0OS4yMDkgMjUuNjY5NSAzNTAuMDAxIDI2LjgxODZDMzUwLjM5OCAyNi43MjAyIDM1MC43MjggMjYuNzIwMiAzNTEuMTI0IDI2LjcyMDJDMzUxLjQ1NSAyNi43MjA2IDM1MS45MTggMjYuNzIwNiAzNTIuNDEzIDI2LjgxOVYyNi44MTlaTTM0OC44NzggMTkuMDA2QzM0OC44NzggMjAuMDIzNCAzNDguMzE3IDIxLjIwNTQgMzQ2Ljc5NyAyMS4yMDU0QzM0Ni40IDIxLjIwNTQgMzQ2LjAwMyAyMS4yMDU0IDM0NS42MDcgMjEuMTcyNVYxNy4wNjg4QzM0Ni4wMDMgMTYuOTcwNCAzNDYuNDk5IDE2LjkwNDYgMzQ2Ljc2MyAxNi45MDQ2QzM0OC4wODUgMTYuOTA0OSAzNDguODc4IDE3LjY2IDM0OC44NzggMTkuMDA2VjE5LjAwNlpNMzgyLjM4IDI2Ljg4NDVDMzgxLjgxOSAyNi4yOTM2IDM4MC45NiAyNS4zNDE3IDM4MC4xMzQgMjQuNDIyM0MzODAuODI4IDIzLjY2NzIgMzgxLjU1NSAyMi41NTEgMzgxLjk4NCAyMS41OTkxQzM4MS43MTkgMjEuNDY3OCAzODEuMzU2IDIxLjIwNTEgMzgxLjA5MiAyMC45NzUzQzM4MC45OTMgMjEuNzk1OSAzODAuNDMyIDIyLjg3OTIgMzc5LjYzOSAyMy44MzE1QzM3OC41MTUgMjIuNTE4NSAzNzguMjE4IDIyLjE1NzQgMzc3LjE5MyAyMC43Nzg1QzM3OC41ODEgMTkuODkyMSAzNzkuMjQyIDE4Ljg3NDMgMzc5LjI0MiAxOC4wNTM3QzM3OS4yNDIgMTcuMTAxNyAzNzguNTgxIDE2LjExNjkgMzc2Ljk2MiAxNi4xMTY5QzM3NS4yMTEgMTYuMTE2OSAzNzQuMzUyIDE3LjIwMDIgMzc0LjM1MiAxOC40ODAzQzM3NC4zNTIgMTkuMjM1NCAzNzQuNTUgMTkuODkxNyAzNzUuMzc2IDIwLjk3NTNDMzc0LjA1NCAyMS42OTc1IDM3Mi43NjYgMjIuNzQ3OSAzNzIuNzY2IDI0LjQyMjNDMzcyLjc2NiAyNi4wNjM5IDM3NC4wODcgMjYuOTE3NCAzNzUuNzA3IDI2LjkxNzRDMzc3LjE5MyAyNi45MTc0IDM3OC4xNTEgMjYuMzI2NiAzNzguOTEyIDI1LjYzNjlMMzc5LjkwMiAyNi44MTlDMzgwLjIgMjYuNzg2MSAzODAuNTMxIDI2LjcyMDYgMzgwLjg2MSAyNi43MjA2QzM4MS4zMjQgMjYuNzIwNiAzODEuODUyIDI2Ljc4NjEgMzgyLjM4IDI2Ljg4NDVWMjYuODg0NVpNMzgzLjM3MiA0MC4wMTU4QzM4MS45MTggMzguNDczIDM4MC41OTcgMzcuMDYxMiAzNzkuMzA4IDM1LjM4NzFMMzc4Ljg3OCAzNC44Mjg4QzM4MC4zMzIgMzQuNTk5MSAzODEuNjU0IDMzLjYxNSAzODEuNjU0IDMxLjk0MDFDMzgxLjY1NCAzMC40NjMyIDM4MC40OTggMjkuNDQ1NCAzNzguNzc5IDI5LjQ0NTRDMzc3LjU1NyAyOS40NDU0IDM3Ni42MzIgMjkuNTQzNSAzNzYuMTY5IDI5LjU0MzVDMzc1LjY3MyAyOS41NDM1IDM3NS4yNDQgMjkuNTQzNSAzNzQuNzQ4IDI5LjQ3NzZDMzc0LjgxNCAzMS4zODIyIDM3NC44NDggMzEuNDgwMiAzNzQuODQ4IDMyLjYyOTRWMzYuODMxMUMzNzQuODQ4IDM3LjY1MjQgMzc0LjgxNCAzOC41MDUyIDM3NC43NDggNDAuMDE1NEMzNzUuMTEyIDM5Ljk0OTYgMzc1LjQ3NSAzOS45NDk2IDM3NS43MDcgMzkuOTQ5NkMzNzYuMDA0IDM5Ljk0OTYgMzc2LjM2OCAzOS45NDk2IDM3Ni42MzIgNDAuMDE1NEMzNzYuNTY1IDM4Ljk5OCAzNzYuNTMzIDM3LjI1ODEgMzc2LjUzMyAzNi44MzExVjM0LjQzNDhDMzc4LjExOSAzNi40MDQyIDM4MC4xNjcgMzguODk5NiAzODAuOTYgNDAuMDE1NEMzODEuMzU2IDM5Ljk0OTYgMzgxLjY4NyAzOS45NDk2IDM4Mi4wODMgMzkuOTQ5NkMzODIuMzggMzkuOTUgMzgyLjg3NiAzOS45NSAzODMuMzcyIDQwLjAxNThaTTM2Mi4xNiAyNi44MTlDMzYwLjk3MSAyNS41NzE1IDM1OC44ODkgMjIuOTc4IDM1OC4wNjMgMjEuOTkzNUwzNTcuMjM3IDIwLjk3NTdDMzU4LjA5NiAxOS45NTgzIDM1OC42OSAxOS4zMzQxIDM1OS4zMTkgMTguNTc5QzM2MC4wNDUgMTcuNzkxIDM2MC43MDYgMTYuOTcwNCAzNjEuNDk5IDE2LjI0ODJDMzYxLjEzNiAxNi4zMTM3IDM2MC45MzcgMTYuMzEzNyAzNjAuNzM5IDE2LjMxMzdDMzYwLjU0MSAxNi4zMTM3IDM2MC4zNDMgMTYuMzEzNyAzNjAuMTQ0IDE2LjI0ODJDMzU5LjkxMyAxNi42MDkzIDM1OS41NSAxNy4wNjg4IDM1OS4xNTMgMTcuNTI4N0MzNTguNzU2IDE3Ljk1NTYgMzU4LjM2IDE4LjM4MjIgMzU4LjA2MyAxOC43NDMzQzM1Ny4yMzYgMTkuNjk1MiAzNTYuNzc0IDIwLjE1NDcgMzU1LjU4NSAyMS4yNzA5VjE5LjQ2NTVDMzU1LjU4NSAxOC40MTUxIDM1NS41ODUgMTcuNzI1NSAzNTUuNjUxIDE2LjI0ODJDMzU1LjMyMSAxNi4zMTM3IDM1NC45NTcgMTYuMzEzNyAzNTQuNzI2IDE2LjMxMzdDMzU0LjQ2MSAxNi4zMTM3IDM1NC4wMzIgMTYuMzEzNyAzNTMuNzY4IDE2LjI0ODJDMzUzLjgzMyAxNy44MjM5IDM1My44NjcgMTguMjgzNCAzNTMuODY3IDE5LjQzMjVWMjMuNjM0N0MzNTMuODY3IDI0LjY4NSAzNTMuODMzIDI1LjMwODggMzUzLjc2OCAyNi44MTlDMzU0LjE2NCAyNi43MjA2IDM1NC40OTUgMjYuNzIwNiAzNTQuNzI2IDI2LjcyMDZDMzU0Ljk1NyAyNi43MjA2IDM1NS4zNTMgMjYuNzUzNSAzNTUuNjUxIDI2LjgxOUMzNTUuNTg1IDI1LjE0NDkgMzU1LjU4NSAyNC4xNTk3IDM1NS41ODUgMjMuNjM0N1YyMS40MzUyQzM1Ni44MDcgMjIuODc5NiAzNTguNjkgMjUuMjQzMyAzNTkuNzQ4IDI2LjgxOUMzNjAuMTMgMjYuNzU2MyAzNjAuNTE3IDI2LjcyMzQgMzYwLjkwNSAyNi43MjA2QzM2MS4yMDIgMjYuNzIwNiAzNjEuNjY1IDI2LjcyMDYgMzYyLjE2IDI2LjgxOVYyNi44MTlaTTM3Mi42MDEgNDAuMDE1OEMzNzIuNTY4IDM5Ljg1MTkgMzcyLjUzNSAzOS43MjA2IDM3Mi41MzUgMzkuNTIzNEMzNzIuNTM1IDM5LjM5MjggMzcyLjU2OCAzOS4yMjgxIDM3Mi42MDEgMzkuMDk2NEMzNzEuMjggMzkuMTI5NyAzNjguOTAxIDM5LjE5NTIgMzY4LjM3MiAzOS4xOTUyVjM0LjY2NDlDMzY5LjY5NCAzNC42NjQ5IDM3MC45ODIgMzQuNjY0OSAzNzIuMjcgMzQuNzk2M0MzNzIuMjM4IDM0LjYzMjQgMzcyLjIwNCAzNC40Njc3IDM3Mi4yMDQgMzQuMzM2NEMzNzIuMjA0IDM0LjIwNTggMzcyLjIwNCAzNC4wNDE5IDM3Mi4yNyAzMy44NDQ3QzM3MS4zNDYgMzMuOTQyOCAzNjkuMTk4IDMzLjk3NiAzNjguMzcyIDMzLjk3NlYzMC4yNjZDMzY5LjgyNiAzMC4yNjYgMzcwLjY4NSAzMC4yNjYgMzcxLjE4IDMwLjI5OTNMMzcyLjUwMiAzMC4zNjUxQzM3Mi40MzYgMzAuMTY3OSAzNzIuNDM2IDMwLjA2OTIgMzcyLjQzNiAyOS45MDUzQzM3Mi40MzYgMjkuNzQxNCAzNzIuNDM2IDI5LjcwODEgMzcyLjUwMiAyOS40NDU4QzM3MS40MTEgMjkuNDc4MyAzNjkuOTI1IDI5LjU0MzggMzY5LjI2NCAyOS41NDM4QzM2OC44MDIgMjkuNTQzOCAzNjcuMzQ4IDI5LjUxMTMgMzY2LjU4NyAyOS40NDU4QzM2Ni42NTQgMzAuMjY2NCAzNjYuNjg2IDMxLjYxMjMgMzY2LjY4NiAzMi41NjQyVjM2Ljg2NTFDMzY2LjY4NiAzNy40ODg1IDM2Ni42MiAzOC43MzU3IDM2Ni41ODcgNDAuMDE2MkMzNjcuNTEzIDM5Ljk1MDMgMzY4LjgwMiAzOS45NTAzIDM2OS4yNjQgMzkuOTUwM0MzNzAuMDI0IDM5Ljk1IDM3MS42NDMgMzkuOTUgMzcyLjYwMSA0MC4wMTU4Wk0zNjQuNjA1IDM5LjEyOTRDMzY0LjQ0IDM4LjgwMDggMzY0LjM0MSAzOC4zMDg4IDM2NC4yNzUgMzguMDQ2MUMzNjIuOTIgMzkuMTYxOSAzNjEuOTk1IDM5LjM5MjQgMzYwLjkzOCAzOS4zOTI0QzM1OC41OTIgMzkuMzkyNCAzNTcuMzM3IDM3LjI5MTMgMzU3LjMzNyAzNC42NjQ5QzM1Ny4zMzcgMzEuNzQzNiAzNTguNzU3IDMwLjAzNjIgMzYxLjE2OSAzMC4wMzYyQzM2Mi40MjUgMzAuMDM2MiAzNjMuNjE0IDMwLjU5NDUgMzY0LjE3NiAzMS4xNTI4QzM2NC4yMDggMzAuODg5OCAzNjQuMzA4IDMwLjM2NDggMzY0LjQ3MyAzMC4wNjg4QzM2My4zMTYgMjkuNTExMyAzNjIuMjU5IDI5LjM0NjYgMzYxLjEwMiAyOS4zNDY2QzM1Ny4yMzcgMjkuMzQ2NiAzNTUuNDUzIDMxLjc0MzYgMzU1LjQ1MyAzNC44Mjg4QzM1NS40NTMgMzguMzA5MSAzNTcuNzk4IDQwLjE0NzEgMzYwLjczOSA0MC4xNDcxQzM2Mi40MjUgNDAuMTQ3MSAzNjMuODEyIDM5LjYyMjIgMzY0LjYwNSAzOS4xMjk0VjM5LjEyOTRaTTM0Mi4zMDMgMjYuODE5QzM0MC41MTkgMjMuNDA0OSAzMzguOCAxOS4xMzczIDMzNy41NzggMTYuMTE2OUgzMzcuMzhDMzM2LjU4NyAxOC4wMjA3IDMzNS4xMzMgMjEuMjcwOSAzMzQuNzM3IDIyLjE4OTlDMzM0LjI3NCAyMy4zMDYxIDMzMy4yNSAyNS41MDU2IDMzMi41ODkgMjYuODE4NkMzMzIuODAzIDI2Ljc1MzggMzMzLjAyNiAyNi43MjA2IDMzMy4yNSAyNi43MjAyQzMzMy40NDggMjYuNzIwMiAzMzMuNjEzIDI2Ljc1MzEgMzMzLjg0NSAyNi44MTg2QzMzNC4xNzUgMjUuOTMyMiAzMzQuNjM4IDI0LjgxNiAzMzUuMTMzIDIzLjYzNDNDMzM1Ljc5NCAyMy42MDE0IDMzNi4zODkgMjMuNTY4OCAzMzYuOTg0IDIzLjU2ODhDMzM3LjYxMiAyMy41Njg4IDMzOC4yNzIgMjMuNjAxNCAzMzguOTMzIDIzLjYzNDNMMzM5LjU5NCAyNS4yMUwzNDAuMjU1IDI2LjgxODZDMzQwLjcxNyAyNi43MjAyIDM0MS4wOCAyNi43MjAyIDM0MS4zMTIgMjYuNzIwMkMzNDEuNjA5IDI2LjcyMDYgMzQxLjg3MyAyNi43MjA2IDM0Mi4zMDMgMjYuODE5VjI2LjgxOVpNMzUzLjYzNiAyOS40NDU0QzM1My40MzggMjkuNTExMyAzNTMuMjczIDI5LjU0MzUgMzUzLjEwNyAyOS41NDM1QzM1Mi45MDkgMjkuNTQzNSAzNTIuNzQ0IDI5LjUxMDkgMzUyLjU0NiAyOS40NDU0QzM1Mi42NDQgMzAuNzU4NCAzNTIuNjc4IDMyLjA3MTQgMzUyLjY3OCAzMy4zNTE5VjM2LjczMzRDMzUyLjE0OSAzNi4yNzM2IDM1MC44NiAzNS4wOTE5IDM0OS4zNzQgMzMuNzEzQzM0Ny44NiAzMi4zMDc0IDM0Ni4zOTQgMzAuODUxMSAzNDQuOTc5IDI5LjM0NjZIMzQ0Ljc0OEMzNDQuNzgxIDMwLjgyNDMgMzQ0LjgxNCAzMi40IDM0NC44MTQgMzMuODExNFYzNS44Nzk5QzM0NC44MTQgMzcuNjUyOCAzNDQuODE0IDM4LjYwNDcgMzQ0LjcxNSA0MC4wMTYyQzM0NC45OCAzOS45NTAzIDM0NS4xMTIgMzkuOTUwMyAzNDUuMzEgMzkuOTUwM0MzNDUuNDQyIDM5Ljk1MDMgMzQ1LjU3NSAzOS45NTAzIDM0NS44MDYgNDAuMDE2MkMzNDUuNzQgMzguNjcwNiAzNDUuNzA3IDM2LjQ3MDggMzQ1LjcwNyAzNS44Nzk5VjMyLjU5NjhDMzQ4LjE4NSAzNC44NjI1IDM1MS4yMjQgMzcuODgyNiAzNTMuNDcxIDQwLjE0NzVIMzUzLjYwM0MzNTMuNjAzIDM4LjkzMjkgMzUzLjUzNyAzNy43MTc5IDM1My41MzcgMzYuNTA0VjM0LjYzMjdDMzUzLjUzNiAzMi40MzI1IDM1My41MzYgMzEuMzQ5MyAzNTMuNjM2IDI5LjQ0NTRaTTM0Mi41NjcgNDAuMDE1OEMzNDIuNTM0IDM5Ljg1MTkgMzQyLjUwMSAzOS43MjA2IDM0Mi41MDEgMzkuNTIzNEMzNDIuNTAxIDM5LjM5MjggMzQyLjUzNCAzOS4yMjgxIDM0Mi41NjcgMzkuMDk2NEMzNDEuMjQ2IDM5LjEyOTcgMzM4Ljg2NyAzOS4xOTUyIDMzOC4zNzEgMzkuMTk1MlYzNC42NjQ5QzMzOS42NiAzNC42NjQ5IDM0MC45NDggMzQuNjY0OSAzNDIuMjM3IDM0Ljc5NjNDMzQyLjIwNCAzNC42MzI0IDM0Mi4xNzEgMzQuNDY3NyAzNDIuMTcxIDM0LjMzNjRDMzQyLjE3MSAzNC4yMDU4IDM0Mi4xNzEgMzQuMDQxOSAzNDIuMjM3IDMzLjg0NDdDMzQxLjMxMiAzMy45NDI4IDMzOS4xOTcgMzMuOTc2IDMzOC4zNzEgMzMuOTc2VjMwLjI2NkMzMzkuNzkyIDMwLjI2NiAzNDAuNjUxIDMwLjI2NiAzNDEuMTc5IDMwLjI5OTNMMzQyLjQ2OCAzMC4zNjUxQzM0Mi40MzUgMzAuMTY3OSAzNDIuNDM1IDMwLjA2OTIgMzQyLjQzNSAyOS45MDUzQzM0Mi40MzUgMjkuNzQxNCAzNDIuNDM1IDI5LjY3NTUgMzQyLjQ2OCAyOS40NDU4QzM0MS4zNzggMjkuNDc4MyAzMzkuODkxIDI5LjU0MzggMzM5LjIzIDI5LjU0MzhDMzM4Ljc2NyAyOS41NDM4IDMzNy4zMTQgMjkuNTExMyAzMzYuNTU0IDI5LjQ0NThDMzM2LjYyIDMwLjI2NjQgMzM2LjY1MyAzMS42MTIzIDMzNi42NTMgMzIuNTY0MlYzNi44NjUxQzMzNi42NTMgMzcuNDg4NSAzMzYuNTg3IDM4LjczNTcgMzM2LjU1NCA0MC4wMTYyQzMzNy41MTIgMzkuOTUwMyAzMzguNzY3IDM5Ljk1MDMgMzM5LjIzIDM5Ljk1MDNDMzM5Ljk5IDM5Ljk1IDM0MS42NDIgMzkuOTUgMzQyLjU2NyA0MC4wMTU4VjQwLjAxNThaTTMzMS4yMDEgMjYuODE5QzMzMC42NzMgMjMuMjQwNiAzMzAuMjEgMTkuNDk4NCAzMjkuODQ3IDE2LjExNjlDMzI5Ljc0OCAxNi4xNDk4IDMyOS43MTQgMTYuMTQ5OCAzMjkuNjQ5IDE2LjExNjlDMzI4Ljk1NSAxNy4zMzE1IDMyOC4xNjIgMTguNjQ0NSAzMjcuNTY3IDE5LjU2MzlDMzI3LjAwNiAyMC40NTAzIDMyNi4zNDUgMjEuNTAwNyAzMjUuNTg1IDIyLjYxNjlDMzIzLjk5OSAyMC41ODE3IDMyMi4zNDcgMTguMDIxMSAzMjEuMjU2IDE2LjExNjlDMzIxLjE5IDE2LjE0OTggMzIxLjE1NyAxNi4xMTY5IDMyMS4wOTEgMTYuMTE2OUMzMjAuNzI4IDE5LjQ5OCAzMjAuMjMyIDIzLjI3MzIgMzE5LjczNiAyNi44MTlDMzIwLjAwMSAyNi43MjA2IDMyMC4xNjYgMjYuNzIwNiAzMjAuMjk4IDI2LjcyMDZDMzIwLjQ5NiAyNi43MjA2IDMyMC42MjggMjYuNzUzNSAzMjAuODU5IDI2LjgxOUMzMjAuOTkyIDI0LjQ1NTMgMzIxLjI1NiAyMi4xMjQ0IDMyMS41NTMgMTkuNjYyM0MzMjIuODQyIDIxLjUzMzYgMzIzLjk2NSAyMy4xNDIyIDMyNS4yMjEgMjQuODQ5M0MzMjYuMjc4IDIzLjIwNzcgMzI3LjM2OCAyMS40MzQ4IDMyOC41NTggMTkuNjI5NEMzMjguODg4IDIyLjE1NyAzMjkuMTg2IDI0LjQ1NTMgMzI5LjM1MSAyNi44MTlDMzI5Ljc4IDI2LjcyMDYgMzMwLjA3OCAyNi43MjA2IDMzMC4yNzYgMjYuNzIwNkMzMzAuNTQgMjYuNzIwNiAzMzAuODA1IDI2LjcyMDYgMzMxLjIwMSAyNi44MTlWMjYuODE5Wk0zMzQuOTY4IDMyLjIwMjhDMzM0Ljk2OCAzMC4yOTg5IDMzMy40NDggMjkuNDQ1NCAzMzEuNTk4IDI5LjQ0NTRDMzMwLjc3MiAyOS40NDU0IDMyOS44OCAyOS41NDM1IDMyOS4yNTIgMjkuNTQzNUMzMjkuMDIxIDI5LjU0MzUgMzI4LjUyNSAyOS41NDM1IDMyNy45OTcgMjkuNDc3NkMzMjguMDMgMzAuNTI4MyAzMjguMDk2IDMxLjQxNDggMzI4LjA5NiAzMi40MzIyVjM2LjkyOTVDMzI4LjA5NiAzNy45MTQ4IDMyOC4wMyAzOC45OTggMzI3Ljk5NyA0MC4wMTU0QzMyOC40MjYgMzkuOTQ5NiAzMjguNzI0IDM5Ljk0OTYgMzI4LjkyMiAzOS45NDk2QzMyOS4xNTMgMzkuOTQ5NiAzMjkuNDg0IDM5Ljk0OTYgMzI5Ljg4IDQwLjAxNTRDMzI5LjgxNSAzOS4wMzE5IDMyOS43ODIgMzguMDQ2NSAzMjkuNzgxIDM3LjA2MDlWMzUuNDJDMzMwLjE0NSAzNS40NTI2IDMzMC41MDggMzUuNDUyNiAzMzAuOTA1IDM1LjQ1MjZDMzMyLjgyIDM1LjQ1MjYgMzM0Ljk2OCAzNC43MzA0IDMzNC45NjggMzIuMjAyOFYzMi4yMDI4Wk0zMjYuMDE0IDM2Ljg5NzNDMzI2LjAxNCAzNS4yNTU4IDMyNC45MjQgMzQuNTMzNiAzMjMuMDQgMzMuNzQ1NkMzMjEuNjg2IDMzLjE4OCAzMjAuOTkyIDMyLjY5NTYgMzIwLjk5MiAzMS42NDQ1QzMyMC45OTIgMzAuNjYgMzIxLjc1MiAzMC4wMzYyIDMyMy4wMDggMzAuMDM2MkMzMjMuODM0IDMwLjAzNjIgMzI0LjU2MSAzMC4zMzE1IDMyNS4yMjIgMzAuODU2OEMzMjUuMjg3IDMwLjQ5NTcgMzI1LjQ1MyAzMC4xMzQ3IDMyNS42NTEgMjkuODM5NEMzMjQuODU4IDI5LjQ3ODMgMzIzLjk5OSAyOS4zNDcgMzIzLjA3NCAyOS4zNDdDMzIwLjM2NSAyOS4zNDcgMzE5LjUwNSAzMC44OTA1IDMxOS41MDUgMzIuMjAzNUMzMTkuNTA1IDMzLjgxMTggMzIwLjI5OSAzNC41NjcyIDMyMi4zNDcgMzUuMzU1M0MzMjMuNjM2IDM1Ljg0NyAzMjQuMjk2IDM2LjQ3MTEgMzI0LjI5NiAzNy41NTQ0QzMyNC4yOTYgMzguNzAzNSAzMjMuNDM3IDM5LjQyNTcgMzIyLjI0OCAzOS40MjU3QzMyMS41NTQgMzkuNDI1NyAzMjAuMzY1IDM5LjA2NDYgMzE5LjUzOSAzOC4zMDk5QzMxOS41MDUgMzguNzM2MSAzMTkuNTA1IDM5LjEzMDQgMzE5LjM3MyAzOS40OTE1QzMxOS45MDIgMzkuNzU0NiAzMjEuMTI1IDQwLjE0NzkgMzIyLjIxNSA0MC4xNDc5QzMyNC45OSA0MC4xNDcxIDMyNi4wMTQgMzguNDM5NyAzMjYuMDE0IDM2Ljg5NzNWMzYuODk3M1pNMzc4LjE1MiAxNy45ODgyQzM3OC4xNTIgMTguOTczIDM3Ny40NTggMTkuNjYyMyAzNzYuNzY0IDIwLjIyMDJDMzc2LjMwMSAxOS41NjM5IDM3NS43NCAxOC42NzcxIDM3NS43NCAxNy45ODgyQzM3NS43NCAxNy4yMzMxIDM3Ni4yNjggMTYuODA2MSAzNzYuOTk1IDE2LjgwNjFDMzc3Ljk4NyAxNi44MDY1IDM3OC4xNTIgMTcuNjkyNiAzNzguMTUyIDE3Ljk4ODJWMTcuOTg4MlpNMzc4LjQ4MiAyNS4wMTMyQzM3OC4xMTkgMjUuMzQxNyAzNzcuMjYgMjUuOTY1NSAzNzYuNTMzIDI1Ljk2NTVDMzc1LjU3NCAyNS45NjU1IDM3NC40MTggMjUuMjc1OSAzNzQuNDE4IDIzLjc5ODZDMzc0LjQxOCAyMi40ODU1IDM3NS4yNzcgMjEuODk0NyAzNzUuODA2IDIxLjU2NjVDMzc3LjAyOCAyMy4yNDA2IDM3Ny4wOTUgMjMuMzM5MSAzNzguNDgyIDI1LjAxMzJaTTM3OS44MDQgMzIuMjAyOEMzNzkuODA0IDMzLjI1MzUgMzc5LjI3NSAzNC40MDI2IDM3Ny43NTUgMzQuNDAyNkMzNzcuMzI2IDM0LjQwMjYgMzc2LjkyOSAzNC40MDI2IDM3Ni41MzMgMzQuMzY5M1YzMC4yNjU2QzM3Ni45MjkgMzAuMTY3NiAzNzcuNDI1IDMwLjEzNDMgMzc3LjcyMiAzMC4xMzQzQzM3OS4wMTEgMzAuMTM0MyAzNzkuODA0IDMwLjg4OTggMzc5LjgwNCAzMi4yMDI4Wk0zMzguNjAyIDIyLjgxNDFDMzM3LjkwOSAyMi44NDY2IDMzNy41NDUgMjIuODQ2NiAzMzcuMDgyIDIyLjg0NjZDMzM2LjUyMSAyMi44NDY2IDMzNi4xOSAyMi44NDY2IDMzNS40NjMgMjIuODE0MUwzMzcuMDgyIDE5LjAwNkwzMzguNjAyIDIyLjgxNDFaTTMzMy4xNTEgMzIuMzAwOEMzMzMuMTUxIDMzLjgxMTEgMzMyLjI1OCAzNC43OTU5IDMzMC44MDUgMzQuNzk1OUMzMzAuNTA3IDM0Ljc5NTkgMzMwLjE3NyAzNC43OTU5IDMyOS43OCAzNC43MzAxVjMwLjIzMjdDMzMwLjI0MyAzMC4xNjY5IDMzMC42MzkgMzAuMTMzOSAzMzEuMDM2IDMwLjEzMzlDMzMyLjQyNCAzMC4xMzQzIDMzMy4xNTEgMzEuMDIxMSAzMzMuMTUxIDMyLjMwMDhaTTM2OS41MjggMjMuNjY3NkMzNjkuNTI4IDIyLjAyNiAzNjguNDM4IDIxLjMwMzkgMzY2LjU1NSAyMC41MTYyQzM2NS4yIDE5Ljk1ODMgMzY0LjUwNiAxOS40OTg4IDM2NC41MDYgMTguNDE1MUMzNjQuNTA2IDE3LjQ2MzIgMzY1LjI2NiAxNi44MDY1IDM2Ni41MjEgMTYuODA2NUMzNjcuMzQ4IDE2LjgwNjUgMzY4LjA3NSAxNy4xMDE3IDM2OC43MzUgMTcuNjI3NUMzNjguODAyIDE3LjI2NjQgMzY4Ljk2NyAxNi45MDQ5IDM2OS4xMzEgMTYuNjQyMkMzNjguMzcyIDE2LjI4MTEgMzY3LjQ3OSAxNi4xMTcyIDM2Ni41ODcgMTYuMTE3MkMzNjMuOTQ0IDE2LjExNzIgMzYyLjk4NiAxNy42NiAzNjIuOTg2IDE5LjAwNkMzNjIuOTg2IDIwLjU4MTcgMzYzLjgxMiAyMS4zMzY4IDM2NS44NjEgMjIuMTI0NEMzNjcuMTQ5IDIyLjYxNjkgMzY3LjgxIDIzLjI0MDYgMzY3LjgxIDI0LjM1NjhDMzY3LjgxIDI1LjQ3MyAzNjYuOTUxIDI2LjE5NTIgMzY1Ljc2MiAyNi4xOTUyQzM2NS4wMzUgMjYuMTk1MiAzNjMuODc5IDI1LjgzNDEgMzYzLjA1MiAyNS4xMTE5QzM2My4wMiAyNS41Mzg5IDM2Mi45ODYgMjUuOSAzNjIuODg3IDI2LjI2MTFDMzYzLjM4MyAyNi41MjM4IDM2NC42MDYgMjYuOTE3NCAzNjUuNzI5IDI2LjkxNzRDMzY4LjUwNCAyNi45MTc0IDM2OS41MjggMjUuMjQzMyAzNjkuNTI4IDIzLjY2NzZWMjMuNjY3NloiIGZpbGw9IiMwMzY1NTUiLz4NCjxwYXRoIGQ9Ik02NDAuNDE2IDIwLjU1NzNDNjM4LjY3MSAxOS44MzU0IDYzNy42MzEgMTkuNTU1MSA2MzYuNTk4IDE5LjU1NTFDNjM1LjUxNCAxOS41NTUxIDYzNC44MTkgMTkuOTE3IDYzNC44MTkgMjAuNDc2NUM2MzQuODE5IDIyLjE2NDUgNjQwLjk2MiAyMS42ODkzIDY0MC45NjIgMjUuNTkzNkM2NDAuOTYyIDI3Ljc0NjQgNjM5LjAyNCAyOC45OTc0IDYzNi4zMzIgMjguOTk3NEM2MzQuMjIgMjguOTk3NCA2MzMuMTggMjguNDg4IDYzMS45ODMgMjcuOTExNlYyNS40OTYyQzYzMy43MSAyNi41NjM1IDYzNC43NjggMjYuOTQwMSA2MzYuMTAxIDI2Ljk0MDFDNjM3LjI1NiAyNi45NDAxIDYzNy44NzkgMjYuNTYzNSA2MzcuODc5IDI1LjkwNjNDNjM3Ljg3OSAyNC4wNjg1IDYzMS43MzcgMjQuNzQxNSA2MzEuNzM3IDIwLjcyMTNDNjMxLjczNyAxOC43ODI3IDYzMy41MzQgMTcuNDk5IDYzNi4zMzIgMTcuNDk5QzYzNy42ODIgMTcuNDk5IDYzOC45MDEgMTcuNzYzNSA2NDAuNDE2IDE4LjM3MDdWMjAuNTU3M1pNNjQ5LjAxNiAyOC40ODQxQzY0Ny45OTIgMjguODMwNiA2NDcuMTI2IDI4Ljk5NTQgNjQ2LjI2MiAyOC45OTU0QzY0My40MDIgMjguOTk1NCA2NDEuNTUyIDI3LjQ0MjIgNjQxLjU1MiAyNS4wNzkyQzY0MS41NTIgMjIuNzU5NCA2NDMuNDczIDIxLjEyMDIgNjQ2LjE1NiAyMS4xMjAyQzY0Ni45ODUgMjEuMTIwMiA2NDguMDQ0IDIxLjMxODIgNjQ4Ljg5MSAyMS42MTIzVjIzLjM4ODFDNjQ4LjIyMSAyMy4wNTYyIDY0Ny40NDQgMjIuODc0MSA2NDYuODA5IDIyLjg3NDFDNjQ1LjI3MyAyMi44NzQxIDY0NC4yODYgMjMuNzM0MyA2NDQuMjg2IDI1LjA2MTlDNjQ0LjI4NiAyNi40MDggNjQ1LjI1NiAyNy4yOTQgNjQ2LjcyIDI3LjI5NEM2NDcuMzM3IDI3LjI5NCA2NDcuODg2IDI3LjE2MjMgNjQ5LjAxNiAyNi43NjhMNjQ5LjAxNiAyOC40ODQxWk02NzEuMzIgMjQuMjA5QzY3MS40MjUgMjMuMTU0OCA2NzIuMDgxIDIyLjU0NTcgNjczLjA4NyAyMi41NDU3QzY3NC4wNzYgMjIuNTQ1NyA2NzQuNzQ2IDIzLjE3MjEgNjc0Ljg1MiAyNC4yMDlINjcxLjMyWk02NzIuOTEgMjEuMTIyOUM2NzAuNCAyMS4xMjI5IDY2OC42MTQgMjIuNzc1NSA2NjguNjE0IDI1LjEwMTJDNjY4LjYxNCAyNy40NDQxIDY3MC40NzEgMjguOTk1NCA2NzMuMzM1IDI4Ljk5NTRDNjczLjk3IDI4Ljk5NTQgNjc1LjUwNCAyOC45OTU0IDY3Ni45NjYgMjcuOTg3VjI2LjUwNDJDNjc1Ljc2OSAyNy4yOTkzIDY3NC45NzcgMjcuNTczMSA2NzMuOTU1IDI3LjU3MzFDNjcyLjM0MSAyNy41NzMxIDY3MS4zNTQgMjYuNzk0OSA2NzEuMjY1IDI1LjQ2NjZINjc3LjExQzY3Ny4yMzIgMjIuNjkzOSA2NzUuMjc5IDIxLjEyMjkgNjcyLjkxIDIxLjEyMjlWMjEuMTIyOVpNNjc4LjA5OSAyOC44NTcySDY4MC42NTRWMjEuMjYyN0g2NzguMDk5VjI4Ljg1NzJaTTY4Ny43NjcgMjYuNzgxNUM2ODcuMjM0IDI3LjIyODEgNjg2Ljc5MiAyNy40MDcyIDY4Ni4yNDYgMjcuNDA3MkM2ODUuMDQzIDI3LjQwNzIgNjg0LjI4MSAyNi40ODM4IDY4NC4yODEgMjUuMTAwNEM2ODQuMjgxIDIzLjU4NDEgNjg1LjA0MyAyMi43MTAxIDY4Ni4zMzEgMjIuNzEwMUM2ODYuNzkyIDIyLjcxMDEgNjg3LjM5NCAyMi45MDggNjg3Ljc2NyAyMy4xNTU5VjI2Ljc4MTVaTTY4Ny43NjcgMTcuNjM5MVYyMS41OTU4QzY4Ny4wNzYgMjEuMjg0NyA2ODYuMzg4IDIxLjEyMDIgNjg1LjY0NCAyMS4xMjAyQzY4My4zMTMgMjEuMTIwMiA2ODEuNyAyMi43MjY2IDY4MS43IDI1LjA1MDdDNjgxLjcgMjcuMzI0OCA2ODMuMzEzIDI4Ljk5NzQgNjg1LjUgMjguOTk3NEM2ODYuMzY3IDI4Ljk5NzQgNjg3LjAzNyAyOC43ODU2IDY4Ny43NjcgMjguMjQzNVYyOC44NTQ5SDY5MC4zMjJWMTcuNjM5MUg2ODcuNzY3Wk02OTQuMTA1IDI0LjIwOUM2OTQuMjExIDIzLjE1NDggNjk0Ljg2NCAyMi41NDU3IDY5NS44NjggMjIuNTQ1N0M2OTYuODU4IDIyLjU0NTcgNjk3LjUzNSAyMy4xNzIxIDY5Ny42NDEgMjQuMjA5SDY5NC4xMDVaTTY5NS42OTQgMjEuMTIyOUM2OTMuMTg0IDIxLjEyMjkgNjkxLjQgMjIuNzc1NSA2OTEuNCAyNS4xMDEyQzY5MS40IDI3LjQ0NDEgNjkzLjI1OSAyOC45OTU0IDY5Ni4xMTkgMjguOTk1NEM2OTYuNzUzIDI4Ljk5NTQgNjk4LjI5IDI4Ljk5NTQgNjk5Ljc1NSAyNy45ODdWMjYuNTA0MkM2OTguNTU3IDI3LjI5OTMgNjk3Ljc2MyAyNy41NzMxIDY5Ni43MzYgMjcuNTczMUM2OTUuMTMxIDI3LjU3MzEgNjk0LjE0IDI2Ljc5NDkgNjk0LjA1MSAyNS40NjY2SDY5OS44OTRDNzAwLjAxNSAyMi42OTM5IDY5OC4wNjEgMjEuMTIyOSA2OTUuNjk0IDIxLjEyMjkiIGZpbGw9IiMwMDlFNEQiLz4NCjxwYXRoIGQ9Ik03MDMuNzIxIDIzLjQzNjhINzAzLjc1OEM3MDQuNTE3IDIxLjg1NjIgNzA1LjM2NiAyMS4xMTUgNzA2LjM1MiAyMS4xMTVDNzA2Ljg2MiAyMS4xMTUgNzA3LjMwMyAyMS4yOTY0IDcwOC4wNDQgMjEuODA3Nkw3MDcuMzQxIDIzLjkxMzNDNzA2LjY3IDIzLjUxODYgNzA2LjIyOSAyMy4zNTM1IDcwNS44MjMgMjMuMzUzNUM3MDQuODg2IDIzLjM1MzUgNzA0LjI4NiAyNC4xNzc1IDcwMy43MjEgMjUuNTcwNFYyOC44NDY2SDcwMS4xNjJWMjEuMjU0MUg3MDMuNzIxVjIzLjQzNjhaTTY4MC43NzUgMTguMDY3NEM2ODEuMDE1IDE4LjY1NzUgNjgwLjU4MyAxOS40ODA1IDY3OS44MTQgMTkuOTA0QzY3OS4wNDEgMjAuMzI3MSA2NzguMjI0IDIwLjE5MjggNjc3Ljk4NiAxOS42MDI3QzY3Ny43NDMgMTkuMDExNyA2NzguMTczIDE4LjE4NzcgNjc4Ljk0NSAxNy43NjY2QzY3OS43MTYgMTcuMzQxMSA2ODAuNTMzIDE3LjQ3NTkgNjgwLjc3NSAxOC4wNjc0WiIgZmlsbD0iIzAwOUU0RCIvPg0KPHBhdGggZD0iTTY1OC4yMiAyNC4wMjMxQzY1OC4yMiAyMS45NjUxIDY1Ni43MTkgMjEuMTIyNiA2NTUuMjM5IDIxLjEyMjZDNjU0LjIzMiAyMS4xMjI2IDY1My40MDQgMjEuNTE4NCA2NTIuNjY0IDIyLjM5MjFINjUyLjYyOVYxNy42MzkySDY1MC4wNzFWMjguODM1M0g2NTIuNjI5VjI0LjAyMzFDNjUzLjIyOCAyMy4yMTYxIDY1My43MzggMjIuODcxMSA2NTQuMzM4IDIyLjg3MTFDNjU1LjEzNCAyMi44NzExIDY1NS42NjIgMjMuMzk4NiA2NTUuNjYyIDI0LjUzMjlWMjcuMjAwOEM2NTYuNTIgMjYuNzg5NiA2NTcuMzkzIDI2LjUzNzQgNjU4LjIyIDI2LjQ0MzhWMjQuMDIzMVpNNjY0LjYzNiAyMS4xMTk5QzY2My41OTQgMjEuMTE5OSA2NjIuNzk5IDIxLjQ4MTEgNjYxLjk4NCAyMi4zNDkzVjIxLjI2MjRINjU5LjQyOFYyNi40MjM0QzY2MC4zMTMgMjYuNTA1OCA2NjEuNDQzIDI2Ljg4NDcgNjYxLjk4NCAyNy41MTA0VjIzLjk2MzRDNjYyLjY1NyAyMy4wMjMyIDY2My4xMzQgMjIuNzA5NyA2NjMuNzcgMjIuNzA5N0M2NjQuNDk0IDIyLjcwOTcgNjY1LjA0NSAyMy4xNTU2IDY2NS4wNDUgMjQuMjI2NFYyOC44MzcySDY2Ny42MDJWMjQuMDI4OUM2NjcuNjAyIDIxLjc5MjYgNjY1LjkwOCAyMS4xMTk5IDY2NC42MzYgMjEuMTE5OVYyMS4xMTk5Wk02NjkuMDE1IDMxLjAxODFINjY2LjA0M1YzMi45ODY0SDY2OC45MDlWMzMuODMxMkg2NjYuMDQzVjM1Ljg2MTlINjY5LjEwM1YzNi43MDU1SDY2NS4wNDZWMzAuMTc1Mkg2NjkuMDE1TDY2OS4wMTUgMzEuMDE4MVpNNjcxLjQ0MiAzNi43MDkzSDY3Mi4zNTJWMzAuMTczM0g2NzEuNDQyVjM2LjcwOTNaTTY3Ni44NTkgMzMuMDQ4NEM2NzcuNTA0IDMzLjA0ODQgNjc3LjkwNCAzMy40NjMxIDY3Ny45MzUgMzQuMTE0Mkg2NzUuNjE2QzY3NS43NDIgMzMuNDM0MiA2NzYuMTYxIDMzLjA0ODQgNjc2Ljg1OSAzMy4wNDg0Wk02NzUuNiAzNC42ODFINjc4Ljg0MkM2NzguODQyIDMzLjA4NjkgNjc4LjA2MiAzMi4zMTggNjc2LjgzOCAzMi4zMThDNjc1LjU2OSAzMi4zMTggNjc0LjY4OCAzMy4xOTI0IDY3NC42ODggMzQuNDk2OUM2NzQuNjg4IDM1LjY4OSA2NzUuNDg0IDM2Ljc4OTggNjc2LjkxNyAzNi43ODk4QzY3Ny42OTggMzYuNzg5OCA2NzguMjAzIDM2LjYyODEgNjc4Ljc2MyAzNi4yODJWMzUuNDU2QzY3OC4yMjIgMzUuNzg1NiA2NzcuNjk4IDM1Ljk3NTggNjc3LjE0NyAzNS45NzU4QzY3Ni4yNjUgMzUuOTc1OCA2NzUuNzQyIDM1LjUzNSA2NzUuNiAzNC42ODA2VjM0LjY4MVpNNjg0Ljc4NiAzMy41MzA5QzY4NC4yNjMgMzMuMTk2NiA2ODMuOTE0IDMzLjA5ODUgNjgzLjUxNSAzMy4wOTg1QzY4Mi42ODIgMzMuMDk4NSA2ODIuMTA1IDMzLjY5NDUgNjgyLjEwNSAzNC41NjdDNjgyLjEwNSAzNS40NTYgNjgyLjcxOSAzNS45OTE2IDY4My42NjggMzUuOTkxNkM2ODQuMDU4IDM1Ljk5MTYgNjg0LjQzIDM1Ljg5NzMgNjg0Ljg4OCAzNS43MDU5VjM2LjU0MjZDNjg0LjU4MiAzNi42Nzc0IDY4My45OTcgMzYuNzg5OCA2ODMuNTE1IDM2Ljc4OThDNjgyLjEzNiAzNi43ODk4IDY4MS4xOCAzNS45MDYyIDY4MS4xOCAzNC42NDMyQzY4MS4xOCAzMy4yMTc4IDY4Mi4wNTQgMzIuMzE4IDY4My40NTMgMzIuMzE4QzY4My45ODcgMzIuMzE4IDY4NC4zNDYgMzIuNDMzOSA2ODQuNzg3IDMyLjYxNDVMNjg0Ljc4NiAzMy41MzA5Wk02ODguOTM0IDMyLjQwMDRINjkwLjM5NVYzMy4xNjUxSDY4OC45MzRWMzUuMzc1MkM2ODguOTM0IDM1Ljg4MTEgNjg5LjMyNyAzNi4wMjc0IDY4OS41OTMgMzYuMDI3NEM2ODkuOTIyIDM2LjAyNzQgNjkwLjI2MiAzNS45MiA2OTAuNjMgMzUuNzA3OVYzNi41MDM3QzY5MC4zMSAzNi42Njc4IDY4OS44MiAzNi43ODk4IDY4OS41MTkgMzYuNzg5OEM2ODguNTI4IDM2Ljc4OTggNjg4LjAyNyAzNi4yMTYxIDY4OC4wMjcgMzUuNDM5MVYzMy4xNjUxSDY4Ny4yMjRWMzMuMDcwM0w2ODguOTM0IDMxLjUxMDJWMzIuNDAwNFpNNjkzLjg3NiAzMi40MDA0VjMzLjM5NjlINjkzLjg5NUM2OTQuMzU5IDMyLjYzNDUgNjk0LjggMzIuMzE4IDY5NS4yMyAzMi4zMThDNjk1LjYwMSAzMi4zMTggNjk1Ljk0NyAzMi40ODAxIDY5Ni4zMjkgMzIuODE2Nkw2OTUuODQ3IDMzLjU2NDRDNjk1LjU3IDMzLjMwOTEgNjk1LjIxMSAzMy4xMzMxIDY5NC45OTUgMzMuMTMzMUM2OTQuMzY4IDMzLjEzMzEgNjkzLjg3NiAzMy43MjY4IDY5My44NzYgMzQuNDYyNlYzNi43MDkzSDY5Mi45NjdWMzIuNDAwNEg2OTMuODc2Wk03MDUuNjU3IDMzLjUzMDlDNzA1LjEzMSAzMy4xOTY2IDcwNC43ODIgMzMuMDk4NSA3MDQuMzgxIDMzLjA5ODVDNzAzLjU0OSAzMy4wOTg1IDcwMi45NzcgMzMuNjk0NSA3MDIuOTc3IDM0LjU2N0M3MDIuOTc3IDM1LjQ1NiA3MDMuNTkyIDM1Ljk5MTYgNzA0LjUzNSAzNS45OTE2QzcwNC45MjUgMzUuOTkxNiA3MDUuMjk1IDM1Ljg5NzMgNzA1Ljc2IDM1LjcwNTlWMzYuNTQyNkM3MDUuNDQ3IDM2LjY3NzQgNzA0Ljg2MiAzNi43ODk4IDcwNC4zOCAzNi43ODk4QzcwMy4wMDQgMzYuNzg5OCA3MDIuMDQ0IDM1LjkwNjIgNzAyLjA0NCAzNC42NDMyQzcwMi4wNDQgMzMuMjE3OCA3MDIuOTIyIDMyLjMxOCA3MDQuMzIgMzIuMzE4QzcwNC44NTUgMzIuMzE4IDcwNS4yMTIgMzIuNDMzOSA3MDUuNjU3IDMyLjYxNDVMNzA1LjY1NyAzMy41MzA5Wk02OTguNzQyIDM2LjcwOTNINjk5LjY1MlYzMi40MDA4SDY5OC43NDJWMzYuNzA5M1oiIGZpbGw9IiMwMDlFNEQiLz4NCjxwYXRoIGQ9Ik02OTkuNjg0IDMwLjg1MjVDNjk5Ljc3MyAzMS4wNjA0IDY5OS42MTggMzEuMzU0NCA2OTkuMzQ0IDMxLjUwNDFDNjk5LjA2OCAzMS42NTQzIDY5OC43NzYgMzEuNjA2MiA2OTguNjkzIDMxLjM5NzhDNjk4LjYxIDMxLjE4NzQgNjk4Ljc2MSAzMC44OTU4IDY5OS4wMzggMzAuNzQ1NkM2OTkuMzExIDMwLjU5MzUgNjk5LjYwMSAzMC42NDIxIDY5OS42ODQgMzAuODUyNVYzMC44NTI1Wk02NTguOTQgMzEuMjAwOUM2NTguNzc5IDMxLjIwMDkgNjU4LjcxMSAzMS4yMjU1IDY1OC42NDYgMzEuMjkzOEM2NTguNjIgMzEuMzIwMyA2NTguNjEgMzEuMzQ3MiA2NTguNiAzMS40MDExTDY1Ny43ODQgMzQuMjg3QzY1Ny41OTMgMzUuMjk5MiA2NTYuMjU5IDM2LjMwOTkgNjU0LjUyMSAzNi4zMDk5SDY1Mi4xMDRMNjUyLjUyMyAzNC44MjdINjU0LjA3NkM2NTQuMjM0IDM0LjgyNyA2NTQuMzU4IDM0Ljc3MjEgNjU0LjQ2MiAzNC42NjQzQzY1NC41IDM0LjYyMjUgNjU0LjU1IDM0LjU1NyA2NTQuNTU2IDM0LjQ4OTZMNjU1LjIwMSAzMS45NjgxQzY1NS4zOTEgMzAuOTU1NSA2NTYuNTM4IDI5LjgzNjkgNjU4LjI3NiAyOS44MzY5SDY2MC43NTFMNjYwLjQzNSAzMS4yMDA5SDY1OC45NFpNNjU5LjQ5NyAzMi45NTk2TDY1OS43NzMgMzIuMDI1OUg2NjIuMjg4QzY2Mi41OTggMzAuNjcyIDY2Mi4zNTQgMjkuNDE3NyA2NjEuNDczIDI4LjU5NjFDNjU5LjY4OSAyNi45MzMyIDY1NS45NTcgMjcuNDk4MyA2NTMuMTc3IDI5Ljk3NzlDNjUyLjc0MyAzMC4zNjMgNjUyLjM3NiAzMC43NzkzIDY1Mi4wNDIgMzEuMjA0OEg2NTMuNTU2TDY1My4yMDQgMzIuMTQwNEg2NTEuMzk1QzY1MS4yMjIgMzIuNDM1NCA2NTEuMDYgMzIuNzI4MSA2NTAuOTM2IDMzLjAyNUg2NTMuMDgxTDY1Mi43MzcgMzMuOTYwN0g2NTAuNjNDNjUwLjI2OSAzNS4zOTAxIDY1MC40OTkgMzYuNzIzMyA2NTEuNDA2IDM3LjU2OTlDNjUzLjE2NyAzOS4yMTE2IDY1Ni44ODggMzguNjM0NiA2NTkuNjY3IDM2LjE1NTRDNjYwLjE1MyAzNS43MjQyIDY2MC41NTUgMzUuMjU4NyA2NjAuOTE4IDM0Ljc4MDhINjU4Ljk3M0w2NTkuMjY5IDMzLjg0NzFINjYxLjU0M0M2NjEuNzEgMzMuNTUwMSA2NjEuODYzIDMzLjI1NjUgNjYxLjk4MyAzMi45NTk2SDY1OS40OTdaIiBmaWxsPSIjMDA5RTREIi8+DQo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfNThfMTExKSI+DQo8cGF0aCBkPSJNNzc1LjA2OCA0MS4yMjc0Qzc2Ni4yODUgNDIuMDQ2MyA3NTcuMTMxIDQwLjc1NjQgNzU1Ljg0OCAzMy44MTlDNzU1LjIyMSAzMC4zOTkgNzU2Ljc2NSAyNi43NzI1IDc1OC44MSAyNC41MTg0VjIzLjMxNDhDNzU1LjEyNiAyNi41OCA3NTMuMTMgMzAuNzExNSA3NTQuMjggMzUuNTkyQzc1NS43NDggNDEuODUxOCA3NjMuNjAzIDQ1LjM5NjcgNzc1LjU5NSA0NC4yMTk1Qzc4MC4zNDIgNDMuNzU0NSA3ODYuNTUgNDIuMjEyIDc5MC44NjkgMzkuODE0NFYzNi40MTA5Qzc4Ni45NDkgMzguNzcxMyA3ODAuNDY4IDQwLjcyMTEgNzc1LjA2OCA0MS4yMjc0VjQxLjIyNzRaTTc5OC4yMDUgMjMuMjMzNUM3OTYuMTIyIDEyLjk1MzMgNzc2LjM3MyAxMi4zMDE2IDc2My42NDMgMjAuMTMzOFYyMC45OTg5Qzc3Ni4zNTkgMTQuMzkxNSA3OTQuMzk1IDE0LjQzMTcgNzk2LjAzNyAyMy45MDE2Qzc5Ni41ODkgMjcuMDM0MiA3OTQuODQzIDMwLjI5NzggNzkxLjcyMyAzMi4xNzdWMzQuNjM0MkM3OTUuNDc2IDMzLjI0MzIgNzk5LjMyNCAyOC43NDQyIDc5OC4yMDUgMjMuMjMzNVYyMy4yMzM1WiIgZmlsbD0iIzBFN0RDMiIvPg0KPHBhdGggZD0iTTc5MC4xNTkgMjEuNzM2OEg3ODcuODU2VjMyLjEwM0M3ODcuODU2IDMzLjMxNzkgNzg4LjQzNyAzNC4zNzQ0IDc5MC4xNTkgMzQuNTQzMlYyMS43MzY4Wk03NjIuNzM5IDI1LjUyMTdINzYwLjQzMkw3NjAuNDMxIDMyLjI5NDNDNzYwLjQzMSAzMy41MTM0IDc2MS4wMTMgMzQuNTY4OCA3NjIuNzM5IDM0LjczNDRWMjUuNTIxN1YyNS41MjE3Wk03NjAuNDMyIDIyLjA1MjFINzYyLjczMlYyNC4yNTg0SDc2MC40MzJWMjIuMDUyMVpNNzc2LjUzIDM0LjYyNzJDNzc0LjY2NiAzNC42MjcyIDc3My44NzcgMzMuMzE3NyA3NzMuODc3IDMyLjAyOFYyMy4wMzU1SDc3Ni4xNlYyNS41MjE3SDc3Ny44NzlWMjcuMzg1M0g3NzYuMTZWMzEuODg1NEM3NzYuMTYgMzIuNDExMyA3NzYuNDA3IDMyLjcwNDQgNzc2Ljk1IDMyLjcwNDRINzc3Ljg3OVYzNC42MjcyTDc3Ni41MyAzNC42MjcyVjM0LjYyNzJaTTc4MC43MzEgMzAuNzk2MUM3ODAuNzMxIDMxLjk3NjggNzgxLjQ2MSAzMi44NDQ2IDc4Mi43NTQgMzIuODQ0NkM3ODMuNzY2IDMyLjg0NDYgNzg0LjI2NiAzMi41NjA1IDc4NC44NSAzMS45NzY4TDc4Ni4yNjEgMzMuMzM0OUM3ODUuMzU3IDM0LjIzNzkgNzg0LjQwOSAzNC43ODcgNzgyLjczNyAzNC43ODdDNzgwLjU1MiAzNC43ODcgNzc4LjQ1OSAzMy41ODE5IDc3OC40NTkgMzAuMDY4NkM3NzguNDU5IDI3LjA2NTEgNzgwLjI4OCAyNS4zNjczIDc4Mi42ODYgMjUuMzY3M0M3ODUuMTI0IDI1LjM2NzMgNzg2LjUyNSAyNy4zNTQ5IDc4Ni41MjUgMjkuOTYzOVYzMC43OTYzSDc4MC43MzFWMzAuNzk2MVpNNzgyLjU4NiAyNy4yNzU2Qzc4MS44MDUgMjcuMjc1NiA3ODEuMjA0IDI3LjY4MjMgNzgwLjk1IDI4LjIzMDlDNzgwLjgwMiAyOC41NjA3IDc4MC43NDcgMjguODE3NyA3ODAuNzMxIDI5LjIyMjlINzg0LjI0OUM3ODQuMjA0IDI4LjIzMDkgNzgzLjc1OSAyNy4yNzU2IDc4Mi41ODYgMjcuMjc1NlpNNzY4LjkzOSAyNy4zODUzQzc2OS42MDggMjcuMzg1MyA3NjkuODg3IDI3LjcxOTggNzY5Ljg4NyAyOC4yNjI2VjM0LjY0MDZINzcyLjE3VjI4LjI0OTJDNzcyLjE3IDI2Ljk1NDIgNzcxLjQ4NyAyNS41MjQxIDc2OS40ODIgMjUuNTI0MUw3NjQuNzY2IDI1LjUyMTdWMzQuNjQwNkg3NjcuMDVWMjcuMzg1M0g3NjguOTM5VjI3LjM4NTNaTTc5Mi42MzcgMjMuNTg5MUM3OTIuMTI5IDIzLjU4OTEgNzkxLjcyNCAyMy4xNzU0IDc5MS43MjQgMjIuNjYyOUM3OTEuNzI0IDIyLjE1MjkgNzkyLjEyOSAyMS43MzY4IDc5Mi42MzcgMjEuNzM2OEM3OTMuMTQyIDIxLjczNjggNzkzLjU1NiAyMi4xNTI5IDc5My41NTYgMjIuNjYyOUM3OTMuNTU2IDIzLjE3NTQgNzkzLjE0MiAyMy41ODkxIDc5Mi42MzcgMjMuNTg5MVpNNzkyLjYzNyAyMS44OTEyQzc5Mi4yMTggMjEuODkxMiA3OTEuODgyIDIyLjI0MDcgNzkxLjg4MiAyMi42NjI5Qzc5MS44ODIgMjMuMDg3NiA3OTIuMjE4IDIzLjQzMDkgNzkyLjYzNyAyMy40MzA5Qzc5My4wNTUgMjMuNDMwOSA3OTMuNDAyIDIzLjA4NzYgNzkzLjQwMiAyMi42NjI5Qzc5My40MDIgMjIuMjQwNyA3OTMuMDU1IDIxLjg5MTIgNzkyLjYzNyAyMS44OTEyWk03OTMuMDQzIDIzLjIxOEg3OTIuODcyQzc5Mi44NjQgMjMuMjE3OSA3OTIuODU3IDIzLjIxNTcgNzkyLjg1MSAyMy4yMTE2Qzc5Mi44NDUgMjMuMjA3NSA3OTIuODQgMjMuMjAxNyA3OTIuODM3IDIzLjE5NDlMNzkyLjYwNSAyMi43OTdDNzkyLjU5OCAyMi43ODg1IDc5Mi41NzkgMjIuNzc4OCA3OTIuNTczIDIyLjc3ODhINzkyLjQ2N1YyMy4xNzU0Qzc5Mi40NjcgMjMuMTk1IDc5Mi40NTMgMjMuMjE4MSA3OTIuNDI4IDIzLjIxODFINzkyLjI3NEM3OTIuMjUxIDIzLjIxODEgNzkyLjIzNSAyMy4xOTUgNzkyLjIzNSAyMy4xNzU0VjIyLjE3NDlDNzkyLjIzNSAyMi4xMTY0IDc5Mi4yNTQgMjIuMDkyNCA3OTIuMzA1IDIyLjA4NUM3OTIuMzYxIDIyLjA3OSA3OTIuNTA1IDIyLjA3MTYgNzkyLjU4NiAyMi4wNzE2Qzc5Mi44NzIgMjIuMDcxNiA3OTMuMDM5IDIyLjE1NjYgNzkzLjAzOSAyMi40MjQ0VjIyLjQ0NEM3OTMuMDM5IDIyLjYwOTQgNzkyLjk1OSAyMi42OTk1IDc5Mi44MzMgMjIuNzM5N0w3OTMuMDc0IDIzLjE1NDdDNzkzLjA3OCAyMy4xNjQgNzkzLjA4IDIzLjE3MzkgNzkzLjA4IDIzLjE4NEM3OTMuMDggMjMuMTk5NyA3OTMuMDcyIDIzLjIxOCA3OTMuMDQzIDIzLjIxOFYyMy4yMThaTTc5Mi44MjEgMjIuNDI0NEM3OTIuODIxIDIyLjMxMjcgNzkyLjc1MiAyMi4yNzczIDc5Mi42MDUgMjIuMjc3M0g3OTIuNDU5VjIyLjU5NDdDNzkyLjQ4MiAyMi41OTQ3IDc5Mi41ODYgMjIuNTk5NiA3OTIuNjA1IDIyLjU5OTZDNzkyLjc1MiAyMi41OTk2IDc5Mi44MjEgMjIuNTUgNzkyLjgyMSAyMi40NDRWMjIuNDI0NFoiIGZpbGw9IiMwRTdEQzIiLz4NCjwvZz4NCjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMV81OF8xMTEpIj4NCjxwYXRoIGQ9Ik01MzMuNzczIDIwLjk5MTFDNTI5LjI2MyAyMC45OTExIDUyNS41OTkgMjQuNjU0NyA1MjUuNTk5IDI5LjE2NDRDNTI1LjU5OSAzMy42NzQxIDUyOS4yNjMgMzcuMzM3NyA1MzMuNzczIDM3LjMzNzdDNTM4LjI4MiAzNy4zMzc3IDU0MS45NDYgMzMuNjc0MSA1NDEuOTQ2IDI5LjE2NDRDNTQxLjk0NiAyNC42NTQ3IDUzOC4yODIgMjAuOTkxMSA1MzMuNzczIDIwLjk5MTFaTTUzMy43NzMgMzYuNTE4NkM1MjkuNzEzIDM2LjUxODYgNTI2LjQxOSAzMy4yMTUgNTI2LjQxOSAyOS4xNjQ0QzUyNi40MTkgMjUuMTEzNyA1MjkuNzEzIDIxLjgxMDIgNTMzLjc3MyAyMS44MTAyQzUzNy44MzIgMjEuODEwMiA1NDEuMTI3IDI1LjExMzcgNTQxLjEyNyAyOS4xNjQ0QzU0MS4xMjcgMzMuMjE1IDUzNy44MzIgMzYuNTE4NiA1MzMuNzczIDM2LjUxODZaIiBmaWxsPSJibGFjayIvPg0KPHBhdGggZD0iTTUzNi42OSAyMy45MjUyQzUzNi42NjMgMjMuOTA3MiA1MzYuNjI3IDIzLjg5ODIgNTM2LjU5MSAyMy44OTgyQzUzNi40ODMgMjMuODk4MiA1MzYuNDAyIDIzLjk3OTIgNTM2LjQwMiAyNC4wODczVjI2LjY0MzdDNTM2LjQwMiAyNi43MzM3IDUzNi4zMyAyNi44MDU3IDUzNi4yNCAyNi44MDU3SDUzMS4yOUM1MzEuMiAyNi44MDU3IDUzMS4xMzcgMjYuNzMzNyA1MzEuMTI4IDI2LjY0MzdWMjQuMDg3M0M1MzEuMTI4IDI0LjA1MTMgNTMxLjExOSAyNC4wMjQyIDUzMS4xMDEgMjMuOTg4MkM1MzEuMDQ3IDIzLjg5ODIgNTMwLjkzIDIzLjg3MTIgNTMwLjgzOSAyMy45MjUyQzUyOS4wMTIgMjUuMDUwNCA1MjcuOTA1IDI3LjAwMzcgNTI3LjkwNSAyOS4xNjQxQzUyNy45MDUgMzEuMzI0NCA1MjkuMDEyIDMzLjI3NzcgNTMwLjg1NyAzNC40MDI5QzUzMC44ODUgMzQuNDIwOSA1MzAuOTIxIDM0LjQyOTkgNTMwLjk1NyAzNC40Mjk5QzUzMS4wNjUgMzQuNDI5OSA1MzEuMTQ2IDM0LjM0ODkgNTMxLjE0NiAzNC4yNDA5VjMxLjY4NDVDNTMxLjE0NiAzMS41OTQ0IDUzMS4yMTggMzEuNTMxNCA1MzEuMzA4IDMxLjUyMjRINTM2LjI1OEM1MzYuMzQ4IDMxLjUyMjQgNTM2LjQyIDMxLjU5NDQgNTM2LjQyIDMxLjY4NDVWMzQuMjQwOUM1MzYuNDIgMzQuMjc2OSA1MzYuNDI5IDM0LjMwMzkgNTM2LjQ0NyAzNC4zMzk5QzUzNi41MDEgMzQuNDI5OSA1MzYuNjE4IDM0LjQ1NjkgNTM2LjcwOCAzNC40MDI5QzUzOC41NTQgMzMuMjc3NyA1MzkuNjYxIDMxLjMyNDQgNTM5LjY2MSAyOS4xNjQxQzUzOS42NjEgMjcuMDAzNyA1MzguNTM2IDI1LjA1MDQgNTM2LjY5IDIzLjkyNTJWMjMuOTI1MlpNNTMwLjE5MSAzMi4zNjg2TDUzMC4yMTggMzIuNjc0Nkw1MzAuMDIgMzIuNDMxNkM1MjguNDk5IDMwLjUxNDMgNTI4LjQ5OSAyNy44MDQ4IDUzMC4wMiAyNS44ODc1TDUzMC4xOTEgMjUuNjcxNUw1MzAuMjE4IDI1LjY0NDVMNTMwLjE5MSAyNS45NTk2QzUzMC4xNjQgMjYuMjExNiA1MzAuMTU1IDI2LjQ3MjYgNTMwLjE1NSAyNi43MzM3VjMxLjU4NTRDNTMwLjE1NSAzMS44NDY1IDUzMC4xNzMgMzIuMTA3NSA1MzAuMTkxIDMyLjM2ODZaTTUzNi40MDIgMzAuMzg4M0M1MzYuNDAyIDMwLjQ3ODMgNTM2LjMzIDMwLjU1MDMgNTM2LjI0IDMwLjU1MDNINTMxLjI5QzUzMS4yIDMwLjU1MDMgNTMxLjEzNyAzMC40NzgzIDUzMS4xMjggMzAuMzg4M1YyNy45Mzk5QzUzMS4xMjggMjcuODQ5OSA1MzEuMiAyNy43Nzc4IDUzMS4yOSAyNy43Nzc4SDUzNi4yNEM1MzYuMzMgMjcuNzc3OCA1MzYuNDAyIDI3Ljg0OTkgNTM2LjQwMiAyNy45Mzk5VjMwLjM4ODNaTTUzNy41MTkgMzIuNDMxNkw1MzcuMzIxIDMyLjY3NDZMNTM3LjM0OCAzMi4zNjg2QzUzNy4zNzUgMzIuMTE2NSA1MzcuMzg0IDMxLjg1NTUgNTM3LjM4NCAzMS41OTQ0VjI2LjczMzdDNTM3LjM4NCAyNi40NzI2IDUzNy4zNzUgMjYuMjExNiA1MzcuMzQ4IDI1Ljk1OTZMNTM3LjMzOSAyNS44MjQ1TDUzNy4zMyAyNS42ODA1VjI1LjY0NDVMNTM3LjUxOSAyNS44ODc1QzUzOC4yNTcgMjYuODA1NyA1MzguNjYyIDI3Ljk3NTkgNTM4LjY2MiAyOS4xNTUxQzUzOC42NjIgMzAuMzM0MiA1MzguMjU3IDMxLjUxMzQgNTM3LjUxOSAzMi40MzE2VjMyLjQzMTZaIiBmaWxsPSJibGFjayIvPg0KPHBhdGggZD0iTTU1NC4yNzYgMjkuMDIwMkM1NTQuMjMxIDI5LjAwMjIgNTU0LjE3NyAyOC45ODQyIDU1NC4xNzcgMjguOTMwMkM1NTQuMTc3IDI4Ljg5NDIgNTU0LjE5NSAyOC44NjcyIDU1NC4yMzEgMjguODQ5MkM1NTQuMjk0IDI4LjgyMjIgNTU1Ljg1MSAyOC4yNjQxIDU1NS44NTEgMjYuNDI3OEM1NTUuODUxIDI0LjM4NDUgNTU0LjQ3NCAyMy4xNjkzIDU1Mi4xNTIgMjMuMTY5M0g1NDYuNTI2VjM1LjE3NzJINTUyLjY2NUM1NTQuNDU2IDM1LjE3NzIgNTU2LjM4MiAzMy45MDggNTU2LjM4MiAzMS44NjQ2QzU1Ni4zODIgMjkuOTExMyA1NTQuOTA2IDI5LjIyNzIgNTU0LjI3NiAyOS4wMjAyVjI5LjAyMDJaTTU0OS4zNjEgMjUuNjI2N0M1NDkuMzYxIDI1LjU4MTcgNTQ5LjM5NyAyNS41NDU2IDU0OS40NDIgMjUuNTQ1Nkg1NTEuNjc1QzU1Mi40MTMgMjUuNTQ1NiA1NTIuOTE3IDI2LjA0MDcgNTUyLjkxNyAyNi43Nzg4QzU1Mi45MTcgMjcuMzU0OSA1NTIuNDY3IDI3Ljk3NiA1NTEuNjIxIDI3Ljk3Nkg1NDkuNDQyQzU0OS4zOTcgMjcuOTc2IDU0OS4zNjEgMjcuOTQgNTQ5LjM2MSAyNy44OTVWMjUuNjI2N1pNNTUxLjY3NSAzMi44MDk4SDU0OS40NDJDNTQ5LjM5NyAzMi44MDk4IDU0OS4zNjEgMzIuNzczOCA1NDkuMzYxIDMyLjcyODhWMzAuMzM0NEM1NDkuMzYxIDMwLjI4OTQgNTQ5LjM5NyAzMC4yNTM0IDU0OS40NDIgMzAuMjUzNEg1NTEuNjIxQzU1Mi42OTIgMzAuMjUzNCA1NTMuMzA0IDMwLjcxMjUgNTUzLjMwNCAzMS41MjI2QzU1My4zMDQgMzIuMzU5NyA1NTIuNzM3IDMyLjgwOTggNTUxLjY3NSAzMi44MDk4VjMyLjgwOThaTTU3NS4zODQgMjcuOTQ5TDU3NC45NTIgMjcuODU5QzU3My45OCAyNy42NTIgNTczLjAzNSAyNy4zOTA5IDU3My4wMzUgMjYuNTUzOEM1NzMuMDM1IDI1LjcxNjcgNTczLjgxOCAyNS4zMzg2IDU3NC41OTIgMjUuMzM4NkM1NzUuNTAxIDI1LjMzODYgNTc2LjQwMSAyNS43NDM3IDU3Ny4wODYgMjYuNDQ1OEw1NzguODY4IDI0LjY4MTVDNTc4LjEwMyAyMy44MzU0IDU3Ni43NDQgMjIuODYzMiA1NzQuNTQ3IDIyLjg2MzJDNTcxLjkwMSAyMi44NjMyIDU3MC4xMTggMjQuMzY2NSA1NzAuMTE4IDI2LjYwNzhDNTcwLjExOCAyOC45NzUyIDU3MS45ODIgMjkuODY2MyA1NzMuNTQ4IDMwLjE5OTRMNTczLjk3MSAzMC4yODk0QzU3NS40OTIgMzAuNjEzNSA1NzYuMjEyIDMwLjg1NjUgNTc2LjIxMiAzMS43MjA2QzU3Ni4yMTIgMzIuNDk0NyA1NzUuNTE5IDMzLjAwNzggNTc0LjQ5MyAzMy4wMDc4QzU3My4yODcgMzMuMDA3OCA1NzIuMjE2IDMyLjQ3NjcgNTcxLjQwNiAzMS40Nzc2TDU2OS41NzggMzMuMjY4OUM1NzAuNTUxIDM0LjQyMTEgNTcxLjgzOCAzNS40NjUyIDU3NC41MjkgMzUuNDY1MkM1NzYuODI1IDM1LjQ2NTIgNTc5LjE1NiAzNC4xMzMgNTc5LjE1NiAzMS41NzY2QzU3OS4xNDcgMjguOTU3MiA1NzcuMzY1IDI4LjM2MzEgNTc1LjM4NCAyNy45NDlWMjcuOTQ5Wk01OTkuMTAzIDIzLjE2OTNWMjcuNTYyQzU5OS4xMDMgMjcuNjA3IDU5OS4wNjcgMjcuNjQzIDU5OS4wMjIgMjcuNjQzSDU5NS4zMzFDNTk1LjI4NiAyNy42NDMgNTk1LjI1IDI3LjYwNyA1OTUuMjUgMjcuNTYyVjIzLjE2OTNINTkyLjIyNlYzNS4xNzcySDU5NS4yNVYzMC40NjA0QzU5NS4yNSAzMC40MTU0IDU5NS4yODYgMzAuMzc5NCA1OTUuMzMxIDMwLjM3OTRINTk5LjAyMkM1OTkuMDY3IDMwLjM3OTQgNTk5LjEwMyAzMC40MTU0IDU5OS4xMDMgMzAuNDYwNFYzNS4xNzcySDYwMi4xNDZWMjMuMTY5M0g1OTkuMTAzWk01ODYuMTQxIDMyLjcxOThDNTg0Ljc4MiAzMi43MTk4IDU4My4zMTUgMzEuNTg1NiA1ODMuMzE1IDI5LjA5MjJDNTgzLjMxNSAyNi44MTQ4IDU4NC42OTIgMjUuNjI2NyA1ODYuMDUxIDI1LjYyNjdDNTg3LjA0MSAyNS42MjY3IDU4Ny43MzQgMjYuMDQwNyA1ODguMjgzIDI2Ljk1ODlMNTkwLjYwNiAyNS40MTk2QzU4OS40MTggMjMuNjczMyA1ODguMDA0IDIyLjg4MTIgNTg2LjAzMyAyMi44ODEyQzU4Mi4xNzEgMjIuODgxMiA1ODAuNDQzIDI2LjAwNDcgNTgwLjQ0MyAyOS4wOTIyQzU4MC40NDMgMzIuODQ1OCA1ODIuNzI5IDM1LjQ2NTIgNTg1Ljk5NyAzNS40NjUyQzU4OC40MjcgMzUuNDY1MiA1ODkuNTM1IDM0LjU3NDEgNTkwLjY5NiAzMi45MjY4TDU4OC4zNTUgMzEuMzUxNkM1ODcuODMzIDMyLjE5NzcgNTg3LjI2NiAzMi43MTk4IDU4Ni4xNDEgMzIuNzE5OFpNNTYzLjE3OCAyMi44NjMyQzU1OS44NzUgMjIuODYzMiA1NTcuNjYxIDI1LjM5MjYgNTU3LjY2MSAyOS4xNjQyQzU1Ny42NjEgMzIuOTM1OCA1NTkuODc1IDM1LjQ2NTIgNTYzLjE3OCAzNS40NjUyQzU2Ni40ODIgMzUuNDY1MiA1NjguNjk2IDMyLjkzNTggNTY4LjY5NiAyOS4xNjQyQzU2OC42OTYgMjUuMzkyNiA1NjYuNDgyIDIyLjg2MzIgNTYzLjE3OCAyMi44NjMyVjIyLjg2MzJaTTU2My4xNzggMzIuNzE5OEM1NjEuNTU4IDMyLjcxOTggNTYwLjUxNCAzMS4zMjQ2IDU2MC41MTQgMjkuMTY0MkM1NjAuNTE0IDI3LjAxMjkgNTYxLjU1OCAyNS42MjY3IDU2My4xNzggMjUuNjI2N0M1NjQuODA4IDI1LjYyNjcgNTY1Ljg2MSAyNy4wMTI5IDU2NS44NjEgMjkuMTY0MkM1NjUuODYxIDMxLjMyNDYgNTY0LjgwOCAzMi43MTk4IDU2My4xNzggMzIuNzE5OFoiIGZpbGw9IiNGODAwMDAiLz4NCjwvZz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTQ2LjM0NCAyMi4xODExQzE0Ny41OTUgMjIuMjg1NCAxNDguODQ1IDIxLjU1NTMgMTQ5LjYyNyAyMC42Mjk4QzE1MC4zOTUgMTkuNjc4MSAxNTAuOTAzIDE4LjQwMDUgMTUwLjc3MyAxNy4wOTY5QzE0OS42NjYgMTcuMTQ5MSAxNDguMjk4IDE3LjgyNjkgMTQ3LjUxNyAxOC43Nzg2QzE0Ni44IDE5LjU5OTkgMTQ2LjE4OCAyMC45Mjk2IDE0Ni4zNDQgMjIuMTgxMVpNMTQ3Ljg0MSAyMy4wNzk3QzE0OC42NTMgMjIuNzYwNiAxNDkuNjU4IDIyLjM2NTYgMTUwLjc2IDIyLjQyOTFDMTUxLjQ2MyAyMi40ODEyIDE1My40OTUgMjIuNjg5OCAxNTQuNzk4IDI0LjYxOTJDMTU0Ljc5MiAyNC42MjM3IDE1NC43NzggMjQuNjMyMyAxNTQuNzU5IDI0LjY0NUMxNTQuNDM2IDI0Ljg1NDggMTUyLjM5IDI2LjE4NzEgMTUyLjQxNCAyOC44MTY5QzE1Mi40MzkgMzEuOTQ5OSAxNTQuOTg4IDMzLjExODMgMTU1LjMyMiAzMy4yNzExQzE1NS4zNDQgMzMuMjgxMSAxNTUuMzU2IDMzLjI4NjcgMTU1LjM1OCAzMy4yODgzQzE1NS4zNTYgMzMuMjkyNiAxNTUuMzU0IDMzLjMwMSAxNTUuMzUgMzMuMzEzM0MxNTUuMjgzIDMzLjUyODggMTU0Ljg0NSAzNC45NDg5IDE1My44NDcgMzYuNDA0QzE1Mi45MjIgMzcuNzU5OCAxNTEuOTcxIDM5LjA4OTUgMTUwLjQ2IDM5LjExNTZDMTQ5Ljc0OSAzOS4xMjgzIDE0OS4yNyAzOC45MjExIDE0OC43NzIgMzguNzA1NEMxNDguMjQ3IDM4LjQ3ODUgMTQ3LjcwMSAzOC4yNDIyIDE0Ni44NCAzOC4yNDIyQzE0NS45NDcgMzguMjQyMiAxNDUuMzc2IDM4LjQ4NDggMTQ0LjgyNiAzOC43MTg0QzE0NC4zNDggMzguOTIxNCAxNDMuODg3IDM5LjExNzQgMTQzLjI0NSAzOS4xNDE3QzE0MS43ODYgMzkuMTkzOCAxNDAuNjc5IDM3LjcwNzcgMTM5Ljc1NCAzNi4zNTE5QzEzNy44NjYgMzMuNjE0MyAxMzYuNDIgMjguNjM0NCAxMzguMzc0IDI1LjI3MUMxMzkuMzI1IDIzLjU4OTMgMTQxLjA1NyAyMi41MzM0IDE0Mi45MTkgMjIuNTA3M0MxNDMuNzMyIDIyLjQ5MjUgMTQ0LjUwNyAyMi44MDA2IDE0NS4xODQgMjMuMDcwMUMxNDUuNzAyIDIzLjI3NTggMTQ2LjE2MiAyMy40NTg5IDE0Ni41NCAyMy40NTg5QzE0Ni44NzcgMjMuNDU4OSAxNDcuMzE5IDIzLjI4NTEgMTQ3Ljg0MSAyMy4wNzk3WiIgZmlsbD0iYmxhY2siLz4NCjxwYXRoIGQ9Ik0zNi44NTg3IDM3LjUyNDFIMzEuOTg3NEwzNS4wMzQyIDE5LjY2NjhIMzkuOTA1MkwzNi44NTg3IDM3LjUyNDFaIiBmaWxsPSIjMDA1NzlGIi8+DQo8cGF0aCBkPSJNNTQuNTE1NyAyMC4xMDQxQzUzLjU1NDkgMTkuNzQyOCA1Mi4wMzA5IDE5LjM0MzggNTAuMTQ2NiAxOS4zNDM4QzQ1LjMzNjEgMTkuMzQzOCA0MS45NDg2IDIxLjc3NTMgNDEuOTI3OCAyNS4yNTE2QzQxLjg4NzggMjcuODE2NSA0NC4zNTMxIDI5LjI0MSA0Ni4xOTcgMzAuMDk2MkM0OC4wODE2IDMwLjk3MDEgNDguNzIyMyAzMS41NDA1IDQ4LjcyMjMgMzIuMzE5NEM0OC43MDMxIDMzLjUxNTcgNDcuMTk5NCAzNC4wNjcyIDQ1Ljc5NjkgMzQuMDY3MkM0My44NTIxIDM0LjA2NzIgNDIuODEgMzMuNzgyOSA0MS4yMjY0IDMzLjExNzNMNDAuNTg1IDMyLjgzMkwzOS45MDMzIDM2Ljg0MDZDNDEuMDQ1OCAzNy4zMzM5IDQzLjE1MDcgMzcuNzcxNyA0NS4zMzYxIDM3Ljc5MDlDNTAuNDQ3MyAzNy43OTA5IDUzLjc3NDkgMzUuMzk3MSA1My44MTQzIDMxLjY5MjVDNTMuODMzOCAyOS42NTk3IDUyLjUzMiAyOC4xMDIgNDkuNzI1NCAyNi44MjkyQzQ4LjAyMTcgMjYuMDEyMSA0Ni45NzgzIDI1LjQ2MTIgNDYuOTc4MyAyNC42MjUyQzQ2Ljk5ODMgMjMuODY1MiA0Ny44NjA4IDIzLjA4NjggNDkuNzg0IDIzLjA4NjhDNTEuMzY3NyAyMy4wNDg2IDUyLjUzMTIgMjMuNDA5NCA1My40MTI2IDIzLjc3MDVMNTMuODUzMiAyMy45NjAxTDU0LjUxNTcgMjAuMTA0MVoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik02MC45OTI0IDMxLjE5NzlDNjEuMzkzNiAzMC4xNzIgNjIuOTM3MiAyNi4yMDE2IDYyLjkzNzIgMjYuMjAxNkM2Mi45MTcgMjYuMjM5NyA2My4zMzc2IDI1LjE1NjggNjMuNTc4MSAyNC40OTE5TDYzLjkxODYgMjYuMDMwNkM2My45MTg2IDI2LjAzMDYgNjQuODQxIDMwLjMwNTEgNjUuMDQxNCAzMS4xOTc5QzY0LjI4IDMxLjE5NzkgNjEuOTU0NiAzMS4xOTc5IDYwLjk5MjQgMzEuMTk3OVpNNjcuMDA1NCAxOS42NjY4SDYzLjIzNzRDNjIuMDc1NSAxOS42NjY4IDYxLjE5MjcgMTkuOTg5NSA2MC42OTE0IDIxLjE0ODRMNTMuNDU1OCAzNy41MjM5SDU4LjU2NzFDNTguNTY3MSAzNy41MjM5IDU5LjQwODUgMzUuMzE5OSA1OS41ODk0IDM0Ljg0NTJDNjAuMTUwMSAzNC44NDUyIDY1LjEyMjMgMzQuODQ1MiA2NS44NDM3IDM0Ljg0NTJDNjUuOTgzNSAzNS40NzIxIDY2LjQyNDkgMzcuNTIzOSA2Ni40MjQ5IDM3LjUyMzlINzAuOTM1Mkw2Ny4wMDU0IDE5LjY2NjhWMTkuNjY2OFoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik0yNy45MTggMTkuNjY2OEwyMy4xNDc1IDMxLjg0MzhMMjIuNjI2MiAyOS4zNzQxQzIxLjc0NDIgMjYuNTI0NSAxOC45NzgxIDIzLjQyODQgMTUuODkxNCAyMS44ODlMMjAuMjYxIDM3LjUwNTJIMjUuNDEyMkwzMy4wNjkgMTkuNjY2OEgyNy45MThWMTkuNjY2OFoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik0xOC43MTg0IDE5LjY2NjhIMTAuODgxMUwxMC44MDA5IDIwLjAyNzZDMTYuOTE0NSAyMS41MDk1IDIwLjk2MzUgMjUuMDgxNSAyMi42MjcgMjkuMzc0OUwyMC45MjMyIDIxLjE2NzlDMjAuNjQyNyAyMC4wMjc0IDE5Ljc4MDcgMTkuNzA0NCAxOC43MTg0IDE5LjY2NjhaIiBmaWxsPSIjRkFBNjFBIi8+DQo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDJfNThfMTExKSI+DQo8cGF0aCBkPSJNMjIxLjE1OCAxNy40OTlWMTguOTM1NkgyMzEuMzA2VjE3LjQ5OUgyMjEuMTU4Wk0yMzIuNzQ0IDE3LjQ5OVYxOC45MzU2SDI0Ny4yMDZDMjQ3LjIwNiAxOC45MzU2IDI0NS43MjkgMTcuNDk5IDI0My43NzMgMTcuNDk5SDIzMi43NDRaTTI1MC4wNDMgMTcuNDk5VjE4LjkzNTZIMjU4Ljc5M0wyNTguMjczIDE3LjQ5OUgyNTAuMDQzWk0yNjUuMDY1IDE3LjQ5OUwyNjQuNTQ2IDE4LjkzNTZIMjczLjIxNlYxNy40OTlIMjY1LjA2NVpNMjIxLjE1OCAyMC4yOTI5VjIxLjcyOTZIMjMxLjMwNlYyMC4yOTI5SDIyMS4xNThaTTIzMi43NDQgMjAuMjk1VjIxLjcyOTdIMjQ4Ljg4NEMyNDguODg0IDIxLjcyOTcgMjQ4LjY5NiAyMC42MjM5IDI0OC4zNjcgMjAuMjk1SDIzMi43NDRaTTI1MC4wNDMgMjAuMjk1VjIxLjcyOTdIMjU5Ljc1MkwyNTkuMjcxIDIwLjI5NUgyNTAuMDQzWk0yNjQuMDI3IDIwLjI5NUwyNjMuNTQ2IDIxLjcyOTdIMjczLjIxNlYyMC4yOTVIMjY0LjAyN1YyMC4yOTVaTTIyNC4wNzQgMjMuMDg2OVYyNC41MjU3SDIyOC40NjlWMjMuMDg2OUgyMjQuMDc0VjIzLjA4NjlaTTIzNS42NjEgMjMuMDg2OVYyNC41MjU3SDI0MC4wNTZWMjMuMDg2OUgyMzUuNjYxVjIzLjA4NjlaTTI0NC4zMzEgMjMuMDg2OVYyNC41MjU3SDI0OC43MjZDMjQ4LjcyNiAyNC41MjU3IDI0OS4wMDUgMjMuNzY1OSAyNDkuMDA1IDIzLjA4NjlIMjQ0LjMzMVYyMy4wODY5Wk0yNTIuOTYgMjMuMDg2OVYyNC41MjU3SDI2MC43NTJMMjYwLjIzMiAyMy4wODY5SDI1Mi45NlYyMy4wODY5Wk0yNjMuMDY5IDIzLjA4NjlMMjYyLjU0OCAyNC41MjU3SDI3MC4zNzlWMjMuMDg2OUgyNjMuMDY5VjIzLjA4NjlaTTIyNC4wNzQgMjUuODgzVjI3LjMxOTdIMjI4LjQ2OVYyNS44ODNIMjI0LjA3NFYyNS44ODNaTTIzNS42NjEgMjUuODgzVjI3LjMxOTdIMjQ2Ljg4N0MyNDYuODg3IDI3LjMxOTcgMjQ3LjgyNiAyNi41ODI1IDI0OC4xMjUgMjUuODgzSDIzNS42NjFaTTI1Mi45NiAyNS44ODNWMjcuMzE5N0gyNTcuMzU1VjI2LjUyTDI1Ny42MzQgMjcuMzE5N0gyNjUuNjg0TDI2NS45ODQgMjYuNTJWMjcuMzE5N0gyNzAuMzc5VjI1Ljg4M0gyNjIuMTI5TDI2MS42OTEgMjcuMDk5OUwyNjEuMjUxIDI1Ljg4M0gyNTIuOTZaTTIyNC4wNzQgMjguNjc3VjMwLjExMzdIMjI4LjQ2OVYyOC42NzdIMjI0LjA3NFpNMjM1LjY2MSAyOC42NzdWMzAuMTEzN0gyNDguMTI1QzI0Ny44MjYgMjkuNDE2NSAyNDYuODg3IDI4LjY3NyAyNDYuODg3IDI4LjY3N0gyMzUuNjYxWk0yNTIuOTYgMjguNjc3VjMwLjExMzdIMjU3LjM1NVYyOC42NzdIMjUyLjk2Wk0yNTguMTUzIDI4LjY3N0wyNTguNjg1IDMwLjExMzdIMjY0LjcyMUwyNjUuMjI2IDI4LjY3N0gyNTguMTUzWk0yNjUuOTg0IDI4LjY3N1YzMC4xMTM3SDI3MC4zNzlWMjguNjc3SDI2NS45ODRaTTIyNC4wNzQgMzEuNDcxVjMyLjkwNzZIMjI4LjQ2OVYzMS40NzFIMjI0LjA3NFpNMjM1LjY2MSAzMS40NzFWMzIuOTA3NkgyNDAuMDU2VjMxLjQ3MUgyMzUuNjYxWk0yNDQuMzMxIDMxLjQ3MVYzMi45MDc2SDI0OS4wMDVDMjQ5LjAwNSAzMi4yMjk2IDI0OC43MjYgMzEuNDcxIDI0OC43MjYgMzEuNDcxSDI0NC4zMzFWMzEuNDcxWk0yNTIuOTYgMzEuNDcxVjMyLjkwNzZIMjU3LjM1NVYzMS40NzFIMjUyLjk2Wk0yNTkuMTUxIDMxLjQ3MUwyNTkuNjY2IDMyLjkwNzZIMjYzLjcxM0wyNjQuMjMyIDMxLjQ3MUgyNTkuMTUxWk0yNjUuOTg0IDMxLjQ3MVYzMi45MDc2SDI3MC4zNzlWMzEuNDcxSDI2NS45ODRaTTIyMS4yMzcgMzQuMjY1VjM1LjcwMzdIMjMxLjM4NlYzNC4yNjVIMjIxLjIzN1pNMjMyLjc0NCAzNC4yNjVWMzUuNzAzN0gyNDguMzY3QzI0OC42OTYgMzUuMzc0MyAyNDguODg0IDM0LjI2NSAyNDguODg0IDM0LjI2NUgyMzIuNzQ0VjM0LjI2NVpNMjUwLjEyMyAzNC4yNjVWMzUuNzAzN0gyNTcuMzU1VjM0LjI2NUgyNTAuMTIzWk0yNjAuMTUxIDM0LjI2NUwyNjAuNjggMzUuNzAzN0gyNjIuNzM5TDI2My4yMzYgMzQuMjY1SDI2MC4xNTFaTTI2NS45ODQgMzQuMjY1VjM1LjcwMzdIMjczLjI5NVYzNC4yNjVIMjY1Ljk4NFpNMjIxLjIzNyAzNy4wNjFWMzguNDk3N0gyMzEuMzg2VjM3LjA2MUgyMjEuMjM3Wk0yMzIuNzQ0IDM3LjA2MVYzOC40OTU2SDI0My43NzNDMjQ1LjcyOSAzOC40OTU2IDI0Ny4yMDYgMzcuMDYxIDI0Ny4yMDYgMzcuMDYxSDIzMi43NDRaTTI1MC4xMjMgMzcuMDYxVjM4LjQ5NzdIMjU3LjM1NVYzNy4wNjFIMjUwLjEyM1pNMjYxLjE1NSAzNy4wNjFMMjYxLjY2NCAzOC40OTM2TDI2MS43NTIgMzguNDk1NkwyNjIuMjY5IDM3LjA2MUgyNjEuMTU1VjM3LjA2MVpNMjY1Ljk4NCAzNy4wNjFWMzguNDk3N0gyNzMuMjk1VjM3LjA2MUgyNjUuOTg0WiIgZmlsbD0iIzFGNzBDMSIvPg0KPC9nPg0KPGRlZnM+DQo8Y2xpcFBhdGggaWQ9ImNsaXAwXzU4XzExMSI+DQo8cmVjdCB3aWR0aD0iNDQuNDQ3MyIgaGVpZ2h0PSIyOS42MzE1IiBmaWxsPSJ3aGl0ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzUzLjk1NSAxNC44MTU1KSIvPg0KPC9jbGlwUGF0aD4NCjxjbGlwUGF0aCBpZD0iY2xpcDFfNThfMTExIj4NCjxyZWN0IHdpZHRoPSI3Ni41NDgxIiBoZWlnaHQ9IjE2LjM1MDciIGZpbGw9IndoaXRlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MjUuNTk5IDIwLjk4ODkpIi8+DQo8L2NsaXBQYXRoPg0KPGNsaXBQYXRoIGlkPSJjbGlwMl81OF8xMTEiPg0KPHJlY3Qgd2lkdGg9IjUyLjEzNzIiIGhlaWdodD0iMjAuOTk4NyIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyMS4xNTggMTcuNDk5KSIvPg0KPC9jbGlwUGF0aD4NCjwvZGVmcz4NCjwvc3ZnPg0K" style="\n            width: 742.5px;\n            position: relative;\n            top: 107px;\n            left: 32px;\n            ">\n            <a href='+ut+' style="\n        float: left;\n        border-radius: 56px;\n        background: #0D6EFD;\n        padding-top: 8px;\n        width: 280px;\n        height: 38px;\n        text-align: center;\n        position: relative;\n        top: 127px;\n        left: 274px;\n        font-size: 16px;\n        color: white;\n        text-decoration: none;\n        letter-spacing: 0.02em;\n    ">Claim your FREE account</a>\n            <div style="\n    font-size: 14px;\n    position: relative;\n    top: 180px;\n    left: 19px;\n    letter-spacing: 0.02em;\n    font-weight: 500;\n    line-height: 125%;\n">have a Syncfusion account? <a href="https://www.syncfusion.com/account/login?ReturnUrl=/account/login" style="text-decoration: none;\ncolor: #0D6EFD;\nfont-weight: 500;">Sign In</a></div>\n        </div>\n    </div>';if("undefined"!==typeof document&&!m(document)){var t=we("div",{innerHTML:e});document.body.appendChild(t)}}(),Vt=!0),this.render(),this.mount?this.accessMount():this.trigger("created")}},t.prototype.renderComplete=function(e){if(S()){window.sfBlazor.renderComplete(this.element,e)}this.isRendered=!0},t.prototype.dataBind=function(){this.injectModules(),e.prototype.dataBind.call(this)},t.prototype.on=function(e,t,i){if("string"===typeof e)this.localObserver.on(e,t,i);else for(var n=0,o=e;n<o.length;n++){var s=o[n];this.localObserver.on(s.event,s.handler,s.context)}},t.prototype.off=function(e,t){if("string"===typeof e)this.localObserver.off(e,t);else for(var i=0,n=e;i<n.length;i++){var o=n[i];this.localObserver.off(o.event,o.handler)}},t.prototype.notify=function(e,t){!0!==this.isDestroyed&&this.localObserver.notify(e,t)},t.prototype.getInjectedModules=function(){return this.injectedModules},t.Inject=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.prototype.injectedModules||(this.prototype.injectedModules=[]);for(var i=0;i<e.length;i++)-1===this.prototype.injectedModules.indexOf(e[parseInt(i.toString(),10)])&&this.prototype.injectedModules.push(e[parseInt(i.toString(),10)])},t.prototype.createElement=function(e,t,i){return we(e,t)},t.prototype.triggerStateChange=function(e,t){this.isReactHybrid&&(this.setState(),this.currentContext={calls:e,args:t})},t.prototype.injectModules=function(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)},t.prototype.detectFunction=function(e){var t=Object.keys(e);t.length&&(this[t[0]]=e[t[0]])},t.prototype.mergePersistData=function(){var e;m(e=Et?window.localStorage.getItem(this.getModuleName()+this.element.id+this.ej2StatePersistenceVersion):window.localStorage.getItem(this.getModuleName()+this.element.id))||""===e||this.setProperties(JSON.parse(e),!0)},t.prototype.setPersistData=function(){this.isDestroyed||(Et?window.localStorage.setItem(this.getModuleName()+this.element.id+this.ej2StatePersistenceVersion,this.getPersistData()):window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData()))},t.prototype.renderReactTemplates=function(e){m(e)||e()},t.prototype.clearTemplate=function(e,t){},t.prototype.getUniqueID=function(e){return this.isHistoryChanged()&&(It=0),St=this.pageID(location.href),Tt=history.length,e+"_"+St+"_"+It++},t.prototype.pageID=function(e){var t=0;if(0===e.length)return t;for(var i=0;i<e.length;i++){t=(t<<5)-t+e.charCodeAt(i),t&=t}return Math.abs(t)},t.prototype.isHistoryChanged=function(){return St!==this.pageID(location.href)||Tt!==history.length},t.prototype.addOnPersist=function(e){for(var t=this,i={},n=0,o=e;n<o.length;n++){var s,a=o[n];g(s=l(a,this))||d(a,this.getActualProperties(s),i)}return JSON.stringify(i,(function(e,i){return t.getActualProperties(i)}))},t.prototype.getActualProperties=function(e){return e instanceof mt?l("properties",e):e},t.prototype.ignoreOnPersist=function(e){return JSON.stringify(this.iterateJsonProperties(this.properties,e))},t.prototype.iterateJsonProperties=function(e,t){for(var i={},n=function(n){if(-1===t.indexOf(n)){var s=e[n];if("object"!==typeof s||s instanceof Array)i[""+n]=s;else{var a=t.filter((function(e){return new RegExp(n+".").test(e)})).map((function(e){return e.replace(n+".","")}));i[""+n]=o.iterateJsonProperties(o.getActualProperties(s),a)}}},o=this,s=0,a=Object.keys(e);s<a.length;s++){n(a[s])}return i},Mt([Ge(!1)],t.prototype,"enablePersistence",void 0),Mt([Ge()],t.prototype,"enableRtl",void 0),Mt([Ge()],t.prototype,"locale",void 0),t=Mt([et],t)}(ze);"undefined"!==typeof window&&window.addEventListener("popstate",(function(){It=0}));var Nt=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ft=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Lt={left:0,top:0,bottom:0,right:0},Pt={isDragged:!1},Ot=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Nt(t,e),Ft([Ge(0)],t.prototype,"left",void 0),Ft([Ge(0)],t.prototype,"top",void 0),t}(mt),Bt=function(e){function t(t,n){var o=e.call(this,n,t)||this;return o.dragLimit=i.getDefaultPosition(),o.borderWidth=i.getDefaultPosition(),o.padding=i.getDefaultPosition(),o.diffX=0,o.prevLeft=0,o.prevTop=0,o.dragProcessStarted=!1,o.eleTop=0,o.tapHoldTimer=0,o.externalInitialize=!1,o.diffY=0,o.parentScrollX=0,o.parentScrollY=0,o.droppables={},o.bind(),o}var i;return Nt(t,e),i=t,t.prototype.bind=function(){this.toggleEvents(),ge.isIE&&be([this.element],"e-block-touch"),this.droppables[this.scope]={}},t.getDefaultPosition=function(){return f({},Lt)},t.prototype.toggleEvents=function(e){var t;g(this.handle)||(t=Ee(this.handle,this.element));var i=this.enableTapHold&&ge.isDevice&&ge.isTouch?this.mobileInitialize:this.initialize;e?ye.remove(t||this.element,ge.touchStartEvent,i):ye.add(t||this.element,ge.touchStartEvent,i,this)},t.prototype.mobileInitialize=function(e){var t=this,i=e.currentTarget;this.tapHoldTimer=setTimeout((function(){t.externalInitialize=!0,t.removeTapholdTimer(),t.initialize(e,i)}),this.tapHoldThreshold),ye.add(document,ge.touchMoveEvent,this.removeTapholdTimer,this),ye.add(document,ge.touchEndEvent,this.removeTapholdTimer,this)},t.prototype.removeTapholdTimer=function(){clearTimeout(this.tapHoldTimer),ye.remove(document,ge.touchMoveEvent,this.removeTapholdTimer),ye.remove(document,ge.touchEndEvent,this.removeTapholdTimer)},t.prototype.getScrollableParent=function(e,t){return m(e)?null:e[{vertical:"scrollHeight",horizontal:"scrollWidth"}[""+t]]>e[{vertical:"clientHeight",horizontal:"clientWidth"}[""+t]]&&("vertical"===t?e.scrollTop>0:e.scrollLeft>0)?("vertical"===t?(this.parentScrollY=this.parentScrollY+(0===this.parentScrollY?e.scrollTop:e.scrollTop-this.parentScrollY),this.tempScrollHeight=e.scrollHeight):(this.parentScrollX=this.parentScrollX+(0===this.parentScrollX?e.scrollLeft:e.scrollLeft-this.parentScrollX),this.tempScrollWidth=e.scrollWidth),m(e)?e:this.getScrollableParent(e.parentNode,t)):this.getScrollableParent(e.parentNode,t)},t.prototype.getScrollableValues=function(){this.parentScrollX=0,this.parentScrollY=0;this.element.classList.contains("e-dialog")&&this.element.classList.contains("e-dlg-modal"),this.getScrollableParent(this.element.parentNode,"vertical"),this.getScrollableParent(this.element.parentNode,"horizontal")},t.prototype.initialize=function(e,t){if(this.currentStateTarget=e.target,!this.isDragStarted()){if(this.isDragStarted(!0),this.externalInitialize=!1,this.target=e.currentTarget||t,this.dragProcessStarted=!1,this.abort){var i=this.abort;"string"===typeof i&&(i=[i]);for(var n=0;n<i.length;n++)if(!m(Fe(e.target,i[parseInt(n.toString(),10)])))return void(this.isDragStarted()&&this.isDragStarted(!0))}this.preventDefault&&!g(e.changedTouches)&&"touchstart"!==e.type&&e.preventDefault(),this.element.setAttribute("aria-grabbed","true");var o=this.getCoordinates(e);if(this.initialPosition={x:o.pageX,y:o.pageY},!this.clone){var s=this.element.getBoundingClientRect();this.getScrollableValues(),e.clientX===e.pageX&&(this.parentScrollX=0),e.clientY===e.pageY&&(this.parentScrollY=0),this.relativeXPosition=o.pageX-(s.left+this.parentScrollX),this.relativeYPosition=o.pageY-(s.top+this.parentScrollY)}this.externalInitialize?this.intDragStart(e):(ye.add(document,ge.touchMoveEvent,this.intDragStart,this),ye.add(document,ge.touchEndEvent,this.intDestroy,this)),this.toggleEvents(!0),"touchstart"!==e.type&&this.isPreventSelect&&document.body.classList.add("e-prevent-select"),this.externalInitialize=!1,ye.trigger(document.documentElement,ge.touchStartEvent,e)}},t.prototype.intDragStart=function(e){this.removeTapholdTimer();var t=!g(e.changedTouches);if(!t||1===e.changedTouches.length){var i,n=this.getCoordinates(e),o=getComputedStyle(this.element);this.margin={left:parseInt(o.marginLeft,10),top:parseInt(o.marginTop,10),right:parseInt(o.marginRight,10),bottom:parseInt(o.marginBottom,10)};var s=this.element;if(this.clone&&this.dragTarget){var a=Fe(e.target,this.dragTarget);m(a)||(s=a)}this.isReplaceDragEle&&(s=this.currentStateCheck(e.target,s)),this.offset=this.calculateParentPosition(s),this.position=this.getMousePosition(e,this.isDragScroll);var r=this.initialPosition.x-n.pageX,l=this.initialPosition.y-n.pageY;if(Math.sqrt(r*r+l*l)>=this.distance||this.externalInitialize){var d=this.getHelperElement(e);if(!d||m(d))return;t&&e.preventDefault();var h=this.helperElement=d;if(this.parentClientRect=this.calculateParentPosition(h.offsetParent),this.dragStart){var p={event:e,element:s,target:this.getProperTargetElement(e),bindEvents:S()?this.bindDragEvents.bind(this):null,dragElement:h};this.trigger("dragStart",p)}this.dragArea?this.setDragArea():(this.dragLimit={left:0,right:0,bottom:0,top:0},this.borderWidth={top:0,left:0}),i={left:this.position.left-this.parentClientRect.left,top:this.position.top-this.parentClientRect.top},this.clone&&!this.enableTailMode&&(this.diffX=this.position.left-this.offset.left,this.diffY=this.position.top-this.offset.top),this.getScrollableValues();var c=getComputedStyle(s),u=parseFloat(c.marginTop);this.clone&&0!==u&&(i.top+=u),this.eleTop=isNaN(parseFloat(c.top))?0:parseFloat(c.top)-this.offset.top,this.enableScrollHandler&&!this.clone&&(i.top-=this.parentScrollY,i.left-=this.parentScrollX);var f=this.getProcessedPositionValue({top:i.top-this.diffY+"px",left:i.left-this.diffX+"px"});this.dragArea&&"string"!==typeof this.dragArea&&this.dragArea.classList.contains("e-kanban-content")&&"relative"===this.dragArea.style.position&&(i.top+=this.dragArea.scrollTop),this.dragElePosition={top:i.top,left:i.left},Le(h,this.getDragPosition({position:"absolute",left:f.left,top:f.top})),ye.remove(document,ge.touchMoveEvent,this.intDragStart),ye.remove(document,ge.touchEndEvent,this.intDestroy),S()||this.bindDragEvents(h)}}},t.prototype.bindDragEvents=function(e){xe(e)?(ye.add(document,ge.touchMoveEvent,this.intDrag,this),ye.add(document,ge.touchEndEvent,this.intDragStop,this),this.setGlobalDroppables(!1,this.element,e)):(this.toggleEvents(),document.body.classList.remove("e-prevent-select"))},t.prototype.elementInViewport=function(e){for(this.top=e.offsetTop,this.left=e.offsetLeft,this.width=e.offsetWidth,this.height=e.offsetHeight;e.offsetParent;)e=e.offsetParent,this.top+=e.offsetTop,this.left+=e.offsetLeft;return this.top>=window.pageYOffset&&this.left>=window.pageXOffset&&this.top+this.height<=window.pageYOffset+window.innerHeight&&this.left+this.width<=window.pageXOffset+window.innerWidth},t.prototype.getProcessedPositionValue=function(e){return this.queryPositionInfo?this.queryPositionInfo(e):e},t.prototype.calculateParentPosition=function(e){if(m(e))return{left:0,top:0};var t=e.getBoundingClientRect(),i=getComputedStyle(e);return{left:t.left+window.pageXOffset-parseInt(i.marginLeft,10),top:t.top+window.pageYOffset-parseInt(i.marginTop,10)}},t.prototype.intDrag=function(e){if(g(e.changedTouches)||1===e.changedTouches.length){var t,i;this.clone&&e.changedTouches&&ge.isDevice&&ge.isTouch&&e.preventDefault(),this.position=this.getMousePosition(e,this.isDragScroll);var n=this.getDocumentWidthHeight("Height");n<this.position.top&&(this.position.top=n);var o=this.getDocumentWidthHeight("Width");if(o<this.position.left&&(this.position.left=o),this.drag){var s=this.getProperTargetElement(e);this.trigger("drag",{event:e,element:this.element,target:s})}var a=this.checkTargetElement(e);if(a.target&&a.instance){var r=!0;this.hoverObject&&(this.hoverObject.instance!==a.instance?this.triggerOutFunction(e,a):r=!1),r&&(a.instance.dragData[this.scope]=this.droppables[this.scope],a.instance.intOver(e,a.target),this.hoverObject=a)}else this.hoverObject&&this.triggerOutFunction(e,a);var l=this.droppables[this.scope].helper;this.parentClientRect=this.calculateParentPosition(this.helperElement.offsetParent);var d=this.parentClientRect.left,h=this.parentClientRect.top,p=this.getCoordinates(e),c=p.pageX,u=p.pageY,f=this.position.left-this.diffX,y=this.position.top-this.diffY,v=getComputedStyle(l);if(this.dragArea){if(this.pageX!==c||this.skipDistanceCheck){var w=l.offsetWidth+(parseFloat(v.marginLeft)+parseFloat(v.marginRight));t=this.dragLimit.left>f&&f>0?this.dragLimit.left:this.dragLimit.right+window.pageXOffset<f+w&&f>0?f-(f-this.dragLimit.right)+window.pageXOffset-w:f<0?this.dragLimit.left:f}if(this.pageY!==u||this.skipDistanceCheck){var b=l.offsetHeight+(parseFloat(v.marginTop)+parseFloat(v.marginBottom));i=this.dragLimit.top>y&&y>0?this.dragLimit.top:this.dragLimit.bottom+window.pageYOffset<y+b&&y>0?y-(y-this.dragLimit.bottom)+window.pageYOffset-b:y<0?this.dragLimit.top:y}}else t=f,i=y;var S,C,x=h+this.borderWidth.top,M=d+this.borderWidth.left;this.dragProcessStarted&&(m(i)&&(i=this.prevTop),m(t)&&(t=this.prevLeft)),this.helperElement.classList.contains("e-treeview")?this.dragArea?(this.dragLimit.top=this.clone?this.dragLimit.top:0,S=i-x<0?this.dragLimit.top:i-this.borderWidth.top,C=t-M<0?this.dragLimit.left:t-this.borderWidth.left):(S=i-this.borderWidth.top,C=t-this.borderWidth.left):this.dragArea?(this.dragLimit.top=this.clone?this.dragLimit.top:0,S=i-x<0?this.dragLimit.top:i-x,C=t-M<0?this.dragElePosition.left:t-M):(S=i-x,C=t-M);var I=parseFloat(getComputedStyle(this.element).marginTop);if(I>0&&(this.clone&&(S+=I,y<0&&(I+y>=0?S=I+y:S-=I),S=this.dragLimit.bottom<S?this.dragLimit.bottom:S),i-x<0))if(y+I+(l.offsetHeight-x)>=0){var T=this.dragLimit.top+y-x;T+I+x<0?S-=I+x:S=T}else S-=I+x;if(this.dragArea&&this.helperElement.classList.contains("e-treeview"))S=S+(b=l.offsetHeight+(parseFloat(v.marginTop)+parseFloat(v.marginBottom)))>this.dragLimit.bottom?this.dragLimit.bottom-b:S;this.enableScrollHandler&&!this.clone&&(S-=this.parentScrollY,C-=this.parentScrollX),this.dragArea&&"string"!==typeof this.dragArea&&this.dragArea.classList.contains("e-kanban-content")&&"relative"===this.dragArea.style.position&&(S+=this.dragArea.scrollTop);var A=this.getProcessedPositionValue({top:S+"px",left:C+"px"});Le(l,this.getDragPosition(A)),this.elementInViewport(l)||!this.enableAutoScroll||this.helperElement.classList.contains("e-treeview")||this.helperElement.scrollIntoView();var k=document.querySelectorAll(":hover");if(this.enableAutoScroll&&this.helperElement.classList.contains("e-treeview")){0===k.length&&(k=this.getPathElements(e));var V=this.getScrollParent(k,!1);this.elementInViewport(this.helperElement)?this.getScrollPosition(V,S):this.elementInViewport(this.helperElement)||(0===(k=[].slice.call(document.querySelectorAll(":hover"))).length&&(k=this.getPathElements(e)),V=this.getScrollParent(k,!0),this.getScrollPosition(V,S))}this.dragProcessStarted=!0,this.prevLeft=t,this.prevTop=i,this.position.left=t,this.position.top=i,this.pageX=c,this.pageY=u}},t.prototype.getScrollParent=function(e,t){for(var i,n=t?e.reverse():e,o=n.length-1;o>=0;o--)if(("auto"===(i=window.getComputedStyle(n[parseInt(o.toString(),10)])["overflow-y"])||"scroll"===i)&&n[parseInt(o.toString(),10)].scrollHeight>n[parseInt(o.toString(),10)].clientHeight)return n[parseInt(o.toString(),10)];if("visible"===(i=window.getComputedStyle(document.scrollingElement)["overflow-y"]))return document.scrollingElement.style.overflow="auto",document.scrollingElement},t.prototype.getScrollPosition=function(e,t){e&&e===document.scrollingElement?e.clientHeight+document.scrollingElement.scrollTop-this.helperElement.clientHeight<t&&e.getBoundingClientRect().height+this.parentClientRect.top>t?e.scrollTop+=this.helperElement.clientHeight:e.scrollTop>t-this.helperElement.clientHeight&&(e.scrollTop-=this.helperElement.clientHeight):e&&e!==document.scrollingElement&&(e.clientHeight+e.getBoundingClientRect().top-this.helperElement.clientHeight+document.scrollingElement.scrollTop<t?e.scrollTop+=this.helperElement.clientHeight:e.getBoundingClientRect().top>t-this.helperElement.clientHeight-document.scrollingElement.scrollTop&&(e.scrollTop-=this.helperElement.clientHeight))},t.prototype.getPathElements=function(e){var t=e.clientX>0?e.clientX:0,i=e.clientY>0?e.clientY:0;return document.elementsFromPoint(t,i)},t.prototype.triggerOutFunction=function(e,t){this.hoverObject.instance.intOut(e,t.target),this.hoverObject.instance.dragData[this.scope]=null,this.hoverObject=null},t.prototype.getDragPosition=function(e){var t=f({},e);return this.axis&&("x"===this.axis?delete t.top:"y"===this.axis&&delete t.left),t},t.prototype.getDocumentWidthHeight=function(e){var t=document.body,i=document.documentElement;return Math.max(t["scroll"+e],i["scroll"+e],t["offset"+e],i["offset"+e],i["client"+e])},t.prototype.intDragStop=function(e){if(this.dragProcessStarted=!1,g(e.changedTouches)||1===e.changedTouches.length){if(-1!==["touchend","pointerup","mouseup"].indexOf(e.type)){if(this.dragStop){var t=this.getProperTargetElement(e);this.trigger("dragStop",{event:e,element:this.element,target:t,helper:this.helperElement})}this.intDestroy(e)}else this.element.setAttribute("aria-grabbed","false");var i=this.checkTargetElement(e);i.target&&i.instance&&(i.instance.dragStopCalled=!0,i.instance.dragData[this.scope]=this.droppables[this.scope],i.instance.intDrop(e,i.target)),this.setGlobalDroppables(!0),document.body.classList.remove("e-prevent-select")}},t.prototype.intDestroy=function(e){this.dragProcessStarted=!1,this.toggleEvents(),document.body.classList.remove("e-prevent-select"),this.element.setAttribute("aria-grabbed","false"),ye.remove(document,ge.touchMoveEvent,this.intDragStart),ye.remove(document,ge.touchEndEvent,this.intDragStop),ye.remove(document,ge.touchEndEvent,this.intDestroy),ye.remove(document,ge.touchMoveEvent,this.intDrag),this.isDragStarted()&&this.isDragStarted(!0)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"draggable"},t.prototype.isDragStarted=function(e){return e&&(Pt.isDragged=!Pt.isDragged),Pt.isDragged},t.prototype.setDragArea=function(){var e,t,i,n=0,o=0;if(i="string"===typeof this.dragArea?Ee(this.dragArea):this.dragArea){var s=i.getBoundingClientRect();e=i.scrollWidth?i.scrollWidth:s.right-s.left,t=i.scrollHeight?this.dragArea&&!m(this.helperElement)&&this.helperElement.classList.contains("e-treeview")?i.clientHeight:i.scrollHeight:s.bottom-s.top;for(var a=["Top","Left","Bottom","Right"],r=getComputedStyle(i),l=0;l<a.length;l++){var d=a[parseInt(l.toString(),10)],h=r["border"+d+"Width"],p=r["padding"+d],c=d.toLowerCase();this.borderWidth[""+c]=isNaN(parseFloat(h))?0:parseFloat(h),this.padding[""+c]=isNaN(parseFloat(p))?0:parseFloat(p)}n=this.dragArea&&!m(this.helperElement)&&this.helperElement.classList.contains("e-treeview")?s.top+document.scrollingElement.scrollTop:s.top,o=s.left,this.dragLimit.left=o+this.borderWidth.left+this.padding.left,this.dragLimit.top=i.offsetTop+this.borderWidth.top+this.padding.top,this.dragLimit.right=o+e-(this.borderWidth.right+this.padding.right),this.dragLimit.bottom=n+t-(this.borderWidth.bottom+this.padding.bottom)}},t.prototype.getProperTargetElement=function(e){var t,i=this.getCoordinates(e),n=this.helperElement.style.pointerEvents||"",o=-1!==e.type.indexOf("pointer")&&"safari"===ge.info.name&&parseInt(ge.info.version)>12;return v(e.target,this.helperElement)||-1!==e.type.indexOf("touch")||o?(this.helperElement.style.pointerEvents="none",t=document.elementFromPoint(i.clientX,i.clientY),this.helperElement.style.pointerEvents=n):t=e.target,t},t.prototype.currentStateCheck=function(e,t){return m(this.currentStateTarget)||this.currentStateTarget===e?m(t)?e:t:this.currentStateTarget},t.prototype.getMousePosition=function(e,t){var i,n,o=void 0!==e.srcElement?e.srcElement:e.target,s=this.getCoordinates(e),a=m(o.offsetParent);if(t?(i=this.clone?s.pageX:s.pageX+(a?0:o.offsetParent.scrollLeft)-this.relativeXPosition,n=this.clone?s.pageY:s.pageY+(a?0:o.offsetParent.scrollTop)-this.relativeYPosition):(i=this.clone?s.pageX:s.pageX+window.pageXOffset-this.relativeXPosition,n=this.clone?s.pageY:s.pageY+window.pageYOffset-this.relativeYPosition),this.element&&this.element.classList.length>0&&-1===this.element.classList.value.indexOf("e-dialog")&&document.scrollingElement){var r=document.scrollingElement.scrollHeight>0&&document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight&&document.scrollingElement.scrollTop>0;i=document.scrollingElement.scrollWidth>0&&document.scrollingElement.scrollWidth>document.scrollingElement.clientWidth&&document.scrollingElement.scrollLeft>0?i-document.scrollingElement.scrollLeft:i,n=r?n-document.scrollingElement.scrollTop:n}return{left:i-(this.margin.left+this.cursorAt.left),top:n-(this.margin.top+this.cursorAt.top)}},t.prototype.getCoordinates=function(e){return e.type.indexOf("touch")>-1?e.changedTouches[0]:e},t.prototype.getHelperElement=function(e){var t;return this.clone?this.helper?t=this.helper({sender:e,element:this.target}):(t=we("div",{className:"e-drag-helper e-block-touch",innerHTML:"Draggable"}),document.body.appendChild(t)):t=this.element,t},t.prototype.setGlobalDroppables=function(e,t,i){this.droppables[this.scope]=e?null:{draggable:t,helper:i,draggedElement:this.element}},t.prototype.checkTargetElement=function(e){var t=this.getProperTargetElement(e),i=this.getDropInstance(t);if(!i&&t&&!m(t.parentNode)){var n=Fe(t.parentNode,".e-droppable")||t.parentElement;n&&(i=this.getDropInstance(n))}return{target:t,instance:i}},t.prototype.getDropInstance=function(e){var t,i=e&&e.ej2_instances;if(i)for(var n=0,o=i;n<o.length;n++){var s=o[n];if("droppable"===s.getModuleName()){t=s;break}}return t},t.prototype.destroy=function(){this.toggleEvents(!0),e.prototype.destroy.call(this)},Ft([Je({},Ot)],t.prototype,"cursorAt",void 0),Ft([Ge(!0)],t.prototype,"clone",void 0),Ft([Ge()],t.prototype,"dragArea",void 0),Ft([Ge()],t.prototype,"isDragScroll",void 0),Ft([Ge()],t.prototype,"isReplaceDragEle",void 0),Ft([Ge(!0)],t.prototype,"isPreventSelect",void 0),Ft([$e()],t.prototype,"drag",void 0),Ft([$e()],t.prototype,"dragStart",void 0),Ft([$e()],t.prototype,"dragStop",void 0),Ft([Ge(1)],t.prototype,"distance",void 0),Ft([Ge()],t.prototype,"handle",void 0),Ft([Ge()],t.prototype,"abort",void 0),Ft([Ge()],t.prototype,"helper",void 0),Ft([Ge("default")],t.prototype,"scope",void 0),Ft([Ge("")],t.prototype,"dragTarget",void 0),Ft([Ge()],t.prototype,"axis",void 0),Ft([Ge()],t.prototype,"queryPositionInfo",void 0),Ft([Ge(!1)],t.prototype,"enableTailMode",void 0),Ft([Ge(!1)],t.prototype,"skipDistanceCheck",void 0),Ft([Ge(!0)],t.prototype,"preventDefault",void 0),Ft([Ge(!1)],t.prototype,"enableAutoScroll",void 0),Ft([Ge(!1)],t.prototype,"enableTapHold",void 0),Ft([Ge(750)],t.prototype,"tapHoldThreshold",void 0),Ft([Ge(!1)],t.prototype,"enableScrollHandler",void 0),t=i=Ft([et],t)}(ze),zt=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),jt=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Rt=function(e){function t(t,i){var n=e.call(this,i,t)||this;return n.mouseOver=!1,n.dragData={},n.dragStopCalled=!1,n.bind(),n}return zt(t,e),t.prototype.bind=function(){this.wireEvents()},t.prototype.wireEvents=function(){ye.add(this.element,ge.touchEndEvent,this.intDrop,this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"droppable"},t.prototype.intOver=function(e,t){if(!this.mouseOver){var i=this.dragData[this.scope];this.trigger("over",{event:e,target:t,dragData:i}),this.mouseOver=!0}},t.prototype.intOut=function(e,t){this.mouseOver&&(this.trigger("out",{evt:e,target:t}),this.mouseOver=!1)},t.prototype.intDrop=function(e,t){if(this.dragStopCalled){this.dragStopCalled=!1;var i,n=!0,o=this.dragData[this.scope],s=!!o&&(o.helper&&xe(o.helper));s&&(i=this.isDropArea(e,o.helper,t),this.accept&&(n=Oe(o.helper,this.accept))),s&&this.drop&&i.canDrop&&n&&this.trigger("drop",{event:e,target:i.target,droppedElement:o.helper,dragData:o}),this.mouseOver=!1}},t.prototype.isDropArea=function(e,t,i){var n={canDrop:!0,target:i||e.target},o="touchend"===e.type;if(o||n.target===t){t.style.display="none";var s=o?e.changedTouches[0]:e,a=document.elementFromPoint(s.clientX,s.clientY);n.canDrop=!1,n.canDrop=v(a,this.element),n.canDrop&&(n.target=a),t.style.display=""}return n},t.prototype.destroy=function(){ye.remove(this.element,ge.touchEndEvent,this.intDrop),e.prototype.destroy.call(this)},jt([Ge()],t.prototype,"accept",void 0),jt([Ge("default")],t.prototype,"scope",void 0),jt([$e()],t.prototype,"drop",void 0),jt([$e()],t.prototype,"over",void 0),jt([$e()],t.prototype,"out",void 0),t=jt([et],t)}(ze),_t=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ht=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Wt={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},Ut=function(e){function t(t,n){var o=e.call(this,n,t)||this;return o.keyPressHandler=function(e){for(var t=e.altKey,n=e.ctrlKey,s=e.shiftKey,a=e.which,r=0,l=Object.keys(o.keyConfigs);r<l.length;r++)for(var d=l[r],h=0,p=o.keyConfigs[""+d].split(",");h<p.length;h++){var c=p[h],u=i.getKeyConfigData(c.trim());t===u.altKey&&n===u.ctrlKey&&s===u.shiftKey&&a===u.keyCode&&(e.action=d,o.keyAction&&o.keyAction(e))}},o.bind(),o}var i;return _t(t,e),i=t,t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents()},t.prototype.getModuleName=function(){return"keyboard"},t.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.keyPressHandler)},t.prototype.unwireEvents=function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)},t.getKeyConfigData=function(e){if(e in this.configCache)return this.configCache[""+e];var t=e.toLowerCase().split("+"),n={altKey:-1!==t.indexOf("alt"),ctrlKey:-1!==t.indexOf("ctrl"),shiftKey:-1!==t.indexOf("shift"),keyCode:null};return t[t.length-1].length>1&&Number(t[t.length-1])?n.keyCode=Number(t[t.length-1]):n.keyCode=i.getKeyCode(t[t.length-1]),i.configCache[""+e]=n,n},t.getKeyCode=function(e){return Wt[""+e]||e.toUpperCase().charCodeAt(0)},t.configCache={},Ht([Ge({})],t.prototype,"keyConfigs",void 0),Ht([Ge("keyup")],t.prototype,"eventName",void 0),Ht([$e()],t.prototype,"keyAction",void 0),t=i=Ht([et],t)}(ze),qt=function(){function e(e,t,i){this.controlName=e,this.localeStrings=t,this.setLocale(i||J)}return e.prototype.setLocale=function(t){var i=this.intGetControlConstant(e.locale,t);this.currentLocale=i||this.localeStrings},e.load=function(e){this.locale=f(this.locale,e,{},!0)},e.prototype.getConstant=function(e){return m(this.currentLocale[""+e])?this.localeStrings[""+e]||"":this.currentLocale[""+e]},e.prototype.intGetControlConstant=function(e,t){return e[""+t]?e[""+t][this.controlName]:null},e.locale={},e}(),Yt=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Qt=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Zt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yt(t,e),Qt([Ge(50)],t.prototype,"swipeThresholdDistance",void 0),t}(mt),Xt=/(Up|Down)/,Gt=function(e){function t(t,i){var n=e.call(this,i,t)||this;return n.touchAction=!0,n.tapCount=0,n.startEvent=function(e){if(!0===n.touchAction){var t=n.updateChangeTouches(e);void 0!==e.changedTouches&&(n.touchAction=!1),n.isTouchMoved=!1,n.movedDirection="",n.startPoint=n.lastMovedPoint={clientX:t.clientX,clientY:t.clientY},n.startEventData=t,n.hScrollLocked=n.vScrollLocked=!1,n.tStampStart=Date.now(),n.timeOutTapHold=setTimeout((function(){n.tapHoldEvent(e)}),n.tapHoldThreshold),ye.add(n.element,ge.touchMoveEvent,n.moveEvent,n),ye.add(n.element,ge.touchEndEvent,n.endEvent,n),ye.add(n.element,ge.touchCancelEvent,n.cancelEvent,n)}},n.moveEvent=function(e){var t=n.updateChangeTouches(e);n.movedPoint=t,n.isTouchMoved=!(t.clientX===n.startPoint.clientX&&t.clientY===n.startPoint.clientY);var i={};n.isTouchMoved&&(clearTimeout(n.timeOutTapHold),n.calcScrollPoints(e),i=f(i,{},{startEvents:n.startEventData,originalEvent:e,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,scrollDirection:n.scrollDirection,velocity:n.getVelocity(t)}),n.trigger("scroll",i),n.lastMovedPoint={clientX:t.clientX,clientY:t.clientY})},n.cancelEvent=function(e){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap),n.tapCount=0,n.swipeFn(e),ye.remove(n.element,ge.touchCancelEvent,n.cancelEvent)},n.endEvent=function(e){n.swipeFn(e),n.isTouchMoved||"function"===typeof n.tap&&(n.trigger("tap",{originalEvent:e,tapCount:++n.tapCount}),n.timeOutTap=setTimeout((function(){n.tapCount=0}),n.tapThreshold)),n.modeclear()},n.swipeFn=function(e){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap);var t=n.updateChangeTouches(e),i=t.clientX-n.startPoint.clientX,o=t.clientY-n.startPoint.clientY;i=Math.floor(i<0?-1*i:i),o=Math.floor(o<0?-1*o:i),n.isTouchMoved=i>1||o>1,/Firefox/.test(ge.userAgent)&&0===t.clientX&&0===t.clientY&&"mouseup"===e.type&&(n.isTouchMoved=!1),n.endPoint=t,n.calcPoints(e);var s={originalEvent:e,startEvents:n.startEventData,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,swipeDirection:n.movedDirection,velocity:n.getVelocity(t)};if(n.isTouchMoved){var a=void 0,r=n.swipeSettings.swipeThresholdDistance;a=f(a,n.defaultArgs,s);var l=!1,d=n.element,h=n.isScrollable(d),p=Xt.test(n.movedDirection);(r<n.distanceX&&!p||r<n.distanceY&&p)&&(l=!h||n.checkSwipe(d,p)),l&&n.trigger("swipe",a)}n.modeclear()},n.modeclear=function(){n.modeClear=setTimeout((function(){n.touchAction=!0}),"function"!==typeof n.tap?0:20),n.lastTapTime=(new Date).getTime(),ye.remove(n.element,ge.touchMoveEvent,n.moveEvent),ye.remove(n.element,ge.touchEndEvent,n.endEvent),ye.remove(n.element,ge.touchCancelEvent,n.cancelEvent)},n.bind(),n}return Yt(t,e),t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents(),ge.isIE&&this.element.classList.add("e-block-touch")},t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.wireEvents=function(){ye.add(this.element,ge.touchStartEvent,this.startEvent,this)},t.prototype.unwireEvents=function(){ye.remove(this.element,ge.touchStartEvent,this.startEvent)},t.prototype.getModuleName=function(){return"touch"},t.prototype.isScrollable=function(e){var t=getComputedStyle(e),i=t.overflow+t.overflowX+t.overflowY;return!!/(auto|scroll)/.test(i)},t.prototype.tapHoldEvent=function(e){var t;this.tapCount=0,this.touchAction=!0,ye.remove(this.element,ge.touchMoveEvent,this.moveEvent),ye.remove(this.element,ge.touchEndEvent,this.endEvent),t={originalEvent:e},this.trigger("tapHold",t),ye.remove(this.element,ge.touchCancelEvent,this.cancelEvent)},t.prototype.calcPoints=function(e){var t=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.startPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.startPoint.clientY)),this.distanceX>this.distanceY?this.movedDirection=t.clientX>this.startPoint.clientX?"Right":"Left":this.movedDirection=t.clientY<this.startPoint.clientY?"Up":"Down"},t.prototype.calcScrollPoints=function(e){var t=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.lastMovedPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.lastMovedPoint.clientY)),(this.distanceX>this.distanceY||!0===this.hScrollLocked)&&!1===this.vScrollLocked?(this.scrollDirection=t.clientX>this.lastMovedPoint.clientX?"Right":"Left",this.hScrollLocked=!0):(this.scrollDirection=t.clientY<this.lastMovedPoint.clientY?"Up":"Down",this.vScrollLocked=!0)},t.prototype.getVelocity=function(e){var t=e.clientX,i=e.clientY,n=Date.now(),o=t-this.startPoint.clientX,s=i-this.startPoint.clientX,a=n-this.tStampStart;return Math.sqrt(o*o+s*s)/a},t.prototype.checkSwipe=function(e,t){var i=["scroll","offset"],n=t?["Height","Top"]:["Width","Left"];return e[i[0]+n[0]]<=e[i[1]+n[0]]||(0===e[i[0]+n[1]]||e[i[1]+n[0]]+e[i[0]+n[1]]>=e[i[0]+n[0]])},t.prototype.updateChangeTouches=function(e){return e.changedTouches&&0!==e.changedTouches.length?e.changedTouches[0]:e},Qt([$e()],t.prototype,"tap",void 0),Qt([$e()],t.prototype,"tapHold",void 0),Qt([$e()],t.prototype,"swipe",void 0),Qt([$e()],t.prototype,"scroll",void 0),Qt([Ge(350)],t.prototype,"tapThreshold",void 0),Qt([Ge(750)],t.prototype,"tapHoldThreshold",void 0),Qt([Je({},Zt)],t.prototype,"swipeSettings",void 0),t=Qt([et],t)}(ze),Jt=new RegExp("\\n|\\r|\\s\\s+","g"),Kt=new RegExp(/'|"/g),$t=new RegExp("if ?\\("),ei=new RegExp("else if ?\\("),ti=new RegExp("else"),ii=new RegExp("for ?\\("),ni=new RegExp("(/if|/for)"),oi=new RegExp("\\((.*)\\)",""),si=new RegExp("^[0-9]+$","g"),ai=new RegExp("[\\w\"'.\\s+]+","g"),ri=new RegExp('"(.*?)"',"g"),li=new RegExp("[\\w\"'@#$.\\s-+]+","g"),di=new RegExp("\\${([^}]*)}","g"),hi=/^\..*/gm,pi=/\\/gi,ci=/\\\\/gi,ui=new RegExp("[\\w\"'@#$.\\s+]+","g"),fi=/\window\./gm;function mi(e,t,i){var n="data",o=function(e,t,i,n){var o=0,s=[],a=e.match(/class="([^"]+|)\s{2}/g),r="";a&&a.forEach((function(t){r=t.replace(/\s\s+/g," "),e=e.replace(t,r)}));return e.replace(Jt,"").replace(ri,"'$1'").replace(di,(function(e,a,r,l){var d=/@|#|\$/gm,h=a.match(oi);if(h){var p=h[1];if(ei.test(a))a='";} '+a.replace(h[1],p.replace(ai,(function(e){return gi(e=e.trim(),!Kt.test(e)&&-1===s.indexOf(e),t,s,n)})))+'{ \n str = str + "';else if($t.test(a))a='"; '+a.replace(h[1],p.replace(li,(function(e){return wi(e,t,s,n)})))+'{ \n str = str + "';else if(ii.test(a)){var c=h[1].split(" of ");a='"; '+a.replace(h[1],(function(e){return s.push(c[0]),s.push(c[0]+"Index"),"var i"+(o+=1)+"=0; i"+o+" < "+gi(c[1],!0,t,s,n)+".length; i"+o+"++"}))+"{ \n "+c[0]+"= "+gi(c[1],!0,t,s,n)+"[i"+o+"]; \n var "+c[0]+"Index=i"+o+'; \n str = str + "'}else{var u=a.split("("),f=i&&i.hasOwnProperty(u[0])?"this.":"global";f=/\./.test(u[0])?"":f;var m=h[1].split(",");0===h[1].length||/data/.test(m[0])||/window./.test(m[0])||(h[1]="global"===f?t+"."+h[1]:h[1]);var g=/@|\$|#/gm,y=/\]\./gm;if(fi.test(a)&&y.test(a)||g.test(a))/@|\$|#|\]\./gm.test(a)&&(a='"+ '+("global"===f?"":f)+a.replace(h[1],p.replace(ui,(function(e){return wi(e,t,s,n)})))+'+ "');else a='" + '+("global"===f?"":f)+a.replace(p,gi(h[1].replace(/,( |)data.|,/gi,","+t+".").replace(/,( |)data.window/gi,",window"),"global"!==f,t,s,n))+'+"'}}else ti.test(a)?a='"; '+a.replace(ti,'} else { \n str = str + "'):a.match(ni)?a=a.replace(ni,'"; \n } \n str = str + "'):d.test(a)?(a.match(pi)&&(a=vi(a)),a='"+'+yi(a,-1===s.indexOf(a),t,s)+'"]+"'):a=a.match(pi)?'"+'+yi(a=vi(a),-1===s.indexOf(a),t,s)+'"]+"':""!==a?'"+'+gi(a.replace(/,/gi,"+"+t+"."),-1===s.indexOf(a),t,s,n)+'+"':" ";return a}))}(e,n,t,i);return new Function(n,'var str="'+o+"\";var valueRegEx = (/value=\\'([A-Za-z0-9 _]*)((.)([\\w)(!-;?-\u25a0\\s]+)['])/g);\n    var hrefRegex = (/(?:href)([\\s='\"./]+)([\\w-./?=&\\\\#\"]+)((.)([\\w)(!-;/?-\u25a0\\s]+)['])/g);\n    if(str.match(valueRegEx)){\n        var check = str.match(valueRegEx);\n        var str1 = str;\n        for (var i=0; i < check.length; i++) {\n            var check1 = str.match(valueRegEx)[i].split('value=')[1];\n            var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n            change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n            str1 = str1.replace(check1, change);\n        }\n        str = str.replace(str, str1);\n    }\n    else if (str.match(/(?:href='')/) === null) {\n        if(str.match(hrefRegex)) {\n            var check = str.match(hrefRegex);\n            var str1 = str;\n            for (var i=0; i < check.length; i++) {\n                var check1 = str.match(hrefRegex)[i].split('href=')[1];\n                if (check1) {\n                    var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n                    change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n                    str1 = str1.replace(check1, change);\n                }\n            }\n            str = str.replace(str, str1);\n        }\n    }\n     return str;").bind(t)}function gi(e,t,i,n,o){return!t||si.test(e)||-1!==n.indexOf(e.split(".")[0])||o?e:i+"."+e}function yi(e,t,i,n){return t&&!si.test(e)&&-1===n.indexOf(e.split(".")[0])?i+'["'+e:e}function vi(e){return e.match(ci)||(e=e.replace(pi,"\\\\")),e}function wi(e,t,i,n){e=e.trim();if(/\window\./gm.test(e))return e;var o=/'|"/gm;return/@|\$|#/gm.test(e)&&(e=yi(e,-1===i.indexOf(e),t,i)+'"]'),hi.test(e)?function(e,t,i,n){return!t||si.test(e)||-1!==n.indexOf(e.split(".")[0])||/^\..*/gm.test(e)?e:i+"."+e}(e,!o.test(e)&&-1===i.indexOf(e),t,i):gi(e,!o.test(e)&&-1===i.indexOf(e),t,i,n)}var bi=/^[\n\r.]+<tr|^<tr/,Si=/^[\n\r.]+<svg|^<path|^<g/,Ci={};function xi(){return"-"+Math.random().toString(36).substr(2,5)}function Mi(e,t,i){var n=Ii.compile(e,t,i);return function(e,t,i,o,s,a,r,l){var d=n(e,t,i,r,l),h="BlazorTemplateId";if(S()&&!s){var p=o+xi();if(Ci[""+o]||(Ci[""+o]=[]),m(a))e[""+h]=p,Ci[""+o].push(e);else for(var c=0,u=Object.keys(Ci[""+o][parseInt(a.toString(),10)]);c<u.length;c++){var f=u[c];f!==h&&e[""+f]&&(Ci[""+o][parseInt(a.toString(),10)][""+f]=e[""+f]),f===h&&(p=Ci[""+o][parseInt(a.toString(),10)][""+f])}return"rowTemplate"===i?[we("tr",{id:p,className:"e-blazor-template"})]:[we("div",{id:p,className:"e-blazor-template"})]}return"string"===typeof d?Si.test(d)?we("svg",{innerHTML:d}).childNodes:we(bi.test(d)?"table":"div",{innerHTML:d}).childNodes:d}}var Ii={compile:(new(function(){function e(){}return e.prototype.compile=function(e,t,i){return void 0===t&&(t={}),mi(e,t)},e}())).compile},Ti=["script","style","iframe[src]",'link[href*="javascript:"]','object[type="text/x-scriptlet"]','object[data^="data:text/html;base64"]','img[src^="data:text/html;base64"]','[src^="javascript:"]','[dynsrc^="javascript:"]','[lowsrc^="javascript:"]','[type^="application/x-shockwave-flash"]'],Ai=[{attribute:"href",selector:'[href*="javascript:"]'},{attribute:"background",selector:'[background^="javascript:"]'},{attribute:"style",selector:'[style*="javascript:"]'},{attribute:"style",selector:'[style*="expression("]'},{attribute:"href",selector:'a[href^="data:text/html;base64"]'}],ki=["onchange","onclick","onmouseover","onmouseout","onkeydown","onload","onerror","onblur","onfocus","onbeforeload","onbeforeunload","onkeyup","onsubmit","onafterprint","onbeforeonload","onbeforeprint","onblur","oncanplay","oncanplaythrough","onchange","onclick","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onerror","onfocus","onformchange","onforminput","onhaschange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onoffline","onoine","ononline","onpagehide","onpageshow","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreadystatechange","onredo","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","onundo","onunload","onvolumechange","onwaiting","onmouseenter","onmouseleave","onmousewheel","onstart","onpropertychange"],Vi=function(){function e(){}return e.beforeSanitize=function(){return{selectors:{tags:Ti,attributes:Ai}}},e.sanitize=function(e){var t=this.beforeSanitize();return this.serializeValue(t,e)},e.serializeValue=function(e,t){this.removeAttrs=e.selectors.attributes,this.removeTags=e.selectors.tags,this.wrapElement=document.createElement("div"),this.wrapElement.innerHTML=t,this.removeXssTags(),this.removeJsEvents(),this.removeXssAttrs();var i=this.wrapElement.innerHTML;return this.removeElement(),i.replace("&amp;","&")},e.removeElement=function(){for(var e=this.wrapElement.children,t=0;t<e.length;t++)for(var i=e[parseInt(t.toString(),10)].attributes,n=0;n<i.length;n++)this.wrapElement.children[parseInt(t.toString(),10)].removeAttribute(i[parseInt(n.toString(),10)].localName)},e.removeXssTags=function(){var e=this.wrapElement.querySelectorAll(this.removeTags.join(","));e.length>0&&e.forEach((function(e){Ae(e)}))},e.removeJsEvents=function(){var e=this.wrapElement.querySelectorAll("["+ki.join("],[")+"]");e.length>0&&e.forEach((function(e){ki.forEach((function(t){e.hasAttribute(t)&&e.removeAttribute(t)}))}))},e.removeXssAttrs=function(){var e=this;this.removeAttrs.forEach((function(t,i){var n=e.wrapElement.querySelectorAll(t.selector);n.length>0&&n.forEach((function(e){e.removeAttribute(t.attribute)}))}))},e}();function Ei(e,t,i,n,o,s){var a=n;if(n.tagName===t){var r=l("ej2_instances",n);a=e("input",{attrs:{type:i}});for(var p=["change","cssClass","label","labelPosition","id"],c=0,u=n.attributes.length;c<u;c++)-1===p.indexOf(n.attributes[c].nodeName)&&a.setAttribute(n.attributes[c].nodeName,n.attributes[c].nodeValue);Ve(n,{class:o}),n.appendChild(a),d("ej2_instances",r,a),h(n,"ej2_instances")}return a}function Di(e){for(var t,i=e.childNodes,n=0;n<i.length;n++)if(3===(t=i[n]).nodeType)return t;return null}function Ni(e,t,i){void 0===t&&(t=!1),void 0===i&&(i={});var n=e("div",{className:"e-checkbox-wrapper e-css"});if(i.cssClass&&be([n],i.cssClass.split(" ")),i.enableRtl&&n.classList.add("e-rtl"),t){var o=e("span",{className:"e-ripple-container"});at(o,{isCenterRipple:!0,duration:400}),n.appendChild(o)}var s=e("span",{className:"e-frame e-icons"});if(i.checked&&s.classList.add("e-check"),n.appendChild(s),i.label){var a=e("span",{className:"e-label"});i.disableHtmlEncode?a.textContent=i.label:a.innerHTML=i.label,n.appendChild(a)}return n}function Fi(e,t){if(t){var i=document.createEvent("MouseEvents");i.initEvent(e.type,!1,!0),t.dispatchEvent(i)}}var Li,Pi=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Oi=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};!function(e){e.Left="Left",e.Right="Right",e.Top="Top",e.Bottom="Bottom"}(Li||(Li={}));new Q;var Bi,zi,ji,Ri,_i,Hi,Wi="e-rtl",Ui="e-btn",qi="e-primary",Yi="e-icon-btn",Qi=function(e){function t(t,i){return e.call(this,t,i)||this}return Pi(t,e),t.prototype.preRender=function(){},t.prototype.render=function(){this.initialize(),this.removeRippleEffect=at(this.element,{selector:"."+Ui}),this.renderComplete()},t.prototype.initialize=function(){if(this.cssClass&&be([this.element],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.isPrimary&&this.element.classList.add(qi),!S()||S()&&"progress-btn"!==this.getModuleName()){if(this.content){var e=this.enableHtmlSanitizer?Vi.sanitize(this.content):this.content;this.element.innerHTML=e}this.setIconCss()}this.enableRtl&&this.element.classList.add(Wi),this.disabled?this.controlStatus(this.disabled):this.wireEvents()},t.prototype.controlStatus=function(e){this.element.disabled=e},t.prototype.setIconCss=function(){if(this.iconCss){var e=this.createElement("span",{className:"e-btn-icon "+this.iconCss});this.element.textContent.trim()?(e.classList.add("e-icon-"+this.iconPosition.toLowerCase()),"Top"!==this.iconPosition&&"Bottom"!==this.iconPosition||this.element.classList.add("e-"+this.iconPosition.toLowerCase()+"-icon-btn")):this.element.classList.add(Yi);var t=this.element.childNodes[0];!t||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?this.element.appendChild(e):this.element.insertBefore(e,t)}},t.prototype.wireEvents=function(){this.isToggle&&ye.add(this.element,"click",this.btnClickHandler,this)},t.prototype.unWireEvents=function(){this.isToggle&&ye.remove(this.element,"click",this.btnClickHandler)},t.prototype.btnClickHandler=function(){this.element.classList.contains("e-active")?this.element.classList.remove("e-active"):this.element.classList.add("e-active")},t.prototype.destroy=function(){var t=[qi,Wi,Yi,"e-success","e-info","e-danger","e-warning","e-flat","e-outline","e-small","e-bigger","e-active","e-round","e-top-icon-btn","e-bottom-icon-btn"];this.cssClass&&(t=t.concat(this.cssClass.split(" "))),e.prototype.destroy.call(this),Se([this.element],t),this.element.getAttribute("class")||this.element.removeAttribute("class"),this.disabled&&this.element.removeAttribute("disabled"),this.content&&(this.element.innerHTML=this.element.innerHTML.replace(this.content,""));var i=this.element.querySelector("span.e-btn-icon");i&&Ae(i),this.unWireEvents(),pt&&this.removeRippleEffect()},t.prototype.getModuleName=function(){return"btn"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.Inject=function(){},t.prototype.onPropertyChanged=function(e,t){for(var i=this.element.querySelector("span.e-btn-icon"),n=0,o=Object.keys(e);n<o.length;n++){switch(o[n]){case"isPrimary":e.isPrimary?this.element.classList.add(qi):this.element.classList.remove(qi);break;case"disabled":this.controlStatus(e.disabled);break;case"iconCss":i?e.iconCss?(i.className="e-btn-icon "+e.iconCss,this.element.textContent.trim()&&("Left"===this.iconPosition?i.classList.add("e-icon-left"):i.classList.add("e-icon-right"))):Ae(i):this.setIconCss();break;case"iconPosition":Se([this.element],["e-top-icon-btn","e-bottom-icon-btn"]),(i=this.element.querySelector("span.e-btn-icon"))&&Ae(i),this.setIconCss();break;case"cssClass":t.cssClass&&Se([this.element],t.cssClass.split(" ")),e.cssClass&&be([this.element],e.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":e.enableRtl?this.element.classList.add(Wi):this.element.classList.remove(Wi);break;case"content":Di(this.element)||this.element.classList.remove(Yi),(!S()||S()&&!this.isServerRendered&&"progress-btn"!==this.getModuleName())&&(this.enableHtmlSanitizer&&(e.content=Vi.sanitize(e.content)),this.element.innerHTML=e.content,this.setIconCss());break;case"isToggle":e.isToggle?ye.add(this.element,"click",this.btnClickHandler,this):(ye.remove(this.element,"click",this.btnClickHandler),Se([this.element],["e-active"]))}}},t.prototype.click=function(){this.element.click()},t.prototype.focusIn=function(){this.element.focus()},Oi([Ge("Left")],t.prototype,"iconPosition",void 0),Oi([Ge("")],t.prototype,"iconCss",void 0),Oi([Ge(!1)],t.prototype,"disabled",void 0),Oi([Ge(!1)],t.prototype,"isPrimary",void 0),Oi([Ge("")],t.prototype,"cssClass",void 0),Oi([Ge("")],t.prototype,"content",void 0),Oi([Ge(!1)],t.prototype,"isToggle",void 0),Oi([Ge()],t.prototype,"locale",void 0),Oi([Ge(!1)],t.prototype,"enableHtmlSanitizer",void 0),Oi([$e()],t.prototype,"created",void 0),t=Oi([et],t)}(Dt),Zi=!1;function Xi(e,t,i,n,o){if(zi=void 0,zi=o,Zi=!!n,!e)return{left:0,top:0};t||(t="left"),i||(i="top"),Ri=e.ownerDocument,ji=e;return function(e,t,i){switch(Bi=ji.getBoundingClientRect(),t+e){case"topcenter":Gi(an(),i),Ji(nn(),i);break;case"topright":Gi(sn(),i),Ji(nn(),i);break;case"centercenter":Gi(an(),i),Ji(tn(),i);break;case"centerright":Gi(sn(),i),Ji(tn(),i);break;case"centerleft":Gi(on(),i),Ji(tn(),i);break;case"bottomcenter":Gi(an(),i),Ji(en(),i);break;case"bottomright":Gi(sn(),i),Ji(en(),i);break;case"bottomleft":Gi(on(),i),Ji(en(),i);break;default:Gi(on(),i),Ji(nn(),i)}return ji=null,i}(t.toLowerCase(),i.toLowerCase(),{left:0,top:0})}function Gi(e,t){t.left=e}function Ji(e,t){t.top=e}function Ki(){return Ri.documentElement.scrollTop||Ri.body.scrollTop}function $i(){return Ri.documentElement.scrollLeft||Ri.body.scrollLeft}function en(){return Zi?Bi.bottom:Bi.bottom+Ki()}function tn(){return nn()+Bi.height/2}function nn(){return Zi?Bi.top:Bi.top+Ki()}function on(){return Bi.left+$i()}function sn(){var e=ji&&ji.classList.contains("e-date-range-wrapper")?zi?zi.width:0:zi&&Bi.width>=zi.width?zi.width:0;return Bi.right+$i()-e}function an(){return on()+Bi.width/2}function rn(e,t,i,n){if(void 0===t&&(t=null),void 0===i&&(i={X:!1,Y:!1}),!i.Y&&!i.X)return{left:0,top:0};var o=e.getBoundingClientRect();if(Hi=t,_i=e.ownerDocument,n||(n=Xi(e,"left","top")),i.X){var s=Hi?mn():Tn(),a=bn(),r=Sn(),l=a-n.left,d=n.left+o.width-r;o.width>s?n.left=l>0&&d<=0?r-o.width:d>0&&l<=0?a:l>d?r-o.width:a:l>0?n.left+=l:d>0&&(n.left-=d)}if(i.Y){var h=Hi?gn():In(),p=wn(),c=Cn(),u=p-n.top,f=n.top+o.height-c;o.height>h?n.top=u>0&&f<=0?c-o.height:f>0&&u<=0?p:u>f?c-o.height:p:u>0?n.top+=u:f>0&&(n.top-=f)}return n}function ln(e,t,i,n){void 0===t&&(t=null);var o=Xi(e,"left","top");i&&(o.left=i),n&&(o.top=n);var s=[];Hi=t,_i=e.ownerDocument;var a=e.getBoundingClientRect(),r=o.top,l=o.left,d=o.left+a.width,h=fn(r,o.top+a.height),p=pn(l,d);return h.topSide&&s.push("top"),p.rightSide&&s.push("right"),p.leftSide&&s.push("left"),h.bottomSide&&s.push("bottom"),s}function dn(e,t,i,n,o,s,a,r,l){if(void 0===a&&(a=null),void 0===r&&(r={X:!0,Y:!0}),t&&e&&o&&s&&(r.X||r.Y)){var d,h={TL:null,TR:null,BL:null,BR:null},p={TL:null,TR:null,BL:null,BR:null};if("none"===window.getComputedStyle(e).display){var c=e.style.visibility;e.style.visibility="hidden",e.style.display="block",d=e.getBoundingClientRect(),e.style.removeProperty("display"),e.style.visibility=c}else d=e.getBoundingClientRect();var u={posX:o,posY:s,offsetX:i,offsetY:n,position:{left:0,top:0}};Hi=a,_i=t.ownerDocument,function(e,t,i,n,o){i.position=Xi(e,i.posX,i.posY,n,o),t.TL=Xi(e,"left","top",n,o),t.TR=Xi(e,"right","top",n,o),t.BR=Xi(e,"left","bottom",n,o),t.BL=Xi(e,"right","bottom",n,o)}(t,h,u,l,d),hn(p,u,d),r.X&&cn(t,p,h,u,d,!0),r.Y&&h.TL.top>-1&&un(t,p,h,u,d,!0),function(e,t,i){var n=0,o=0;if(null!=e.offsetParent&&("absolute"===getComputedStyle(e.offsetParent).position||"relative"===getComputedStyle(e.offsetParent).position)){var s=Xi(e.offsetParent,"left","top",!1,i);n=s.left,o=s.top}e.style.top=t.position.top+t.offsetY-o+"px",e.style.left=t.position.left+t.offsetX-n+"px"}(e,u,d)}}function hn(e,t,i){e.TL={top:t.position.top+t.offsetY,left:t.position.left+t.offsetX},e.TR={top:e.TL.top,left:e.TL.left+i.width},e.BL={top:e.TL.top+i.height,left:e.TL.left},e.BR={top:e.TL.top+i.height,left:e.TL.left+i.width}}function pn(e,t){var i=!1,n=!1;return e-Mn()<bn()&&(i=!0),t>Sn()&&(n=!0),{leftSide:i,rightSide:n}}function cn(e,t,i,n,o,s){var a=pn(t.TL.left,t.TR.left);i.TL.left-Mn()<=bn()&&(a.leftSide=!1),i.TR.left>Sn()&&(a.rightSide=!1),(a.leftSide&&!a.rightSide||!a.leftSide&&a.rightSide)&&("right"===n.posX?n.posX="left":n.posX="right",n.offsetX=n.offsetX+o.width,n.offsetX=-1*n.offsetX,n.position=Xi(e,n.posX,n.posY,!1),hn(t,n,o),s&&cn(e,t,i,n,o,!1))}function un(e,t,i,n,o,s){var a=fn(t.TL.top,t.BL.top);i.TL.top-xn()<=wn()&&(a.topSide=!1),i.BL.top>=Cn()&&e.getBoundingClientRect().bottom<window.innerHeight&&(a.bottomSide=!1),(a.topSide&&!a.bottomSide||!a.topSide&&a.bottomSide)&&("top"===n.posY?n.posY="bottom":n.posY="top",n.offsetY=n.offsetY+o.height,n.offsetY=-1*n.offsetY,n.position=Xi(e,n.posX,n.posY,!1,o),hn(t,n,o),s&&un(e,t,i,n,o,!1))}function fn(e,t){var i=!1,n=!1;return e-xn()<wn()&&(i=!0),t>Cn()&&(n=!0),{topSide:i,bottomSide:n}}function mn(){return Hi.getBoundingClientRect().width}function gn(){return Hi.getBoundingClientRect().height}function yn(){return Hi.getBoundingClientRect().left}function vn(){return Hi.getBoundingClientRect().top}function wn(){return Hi?vn():0}function bn(){return Hi?yn():0}function Sn(){return Hi?Mn()+yn()+mn():Mn()+Tn()}function Cn(){return Hi?xn()+vn()+gn():xn()+In()}function xn(){return _i.documentElement.scrollTop||_i.body.scrollTop}function Mn(){return _i.documentElement.scrollLeft||_i.body.scrollLeft}function In(){return window.innerHeight}function Tn(){var e=window.innerWidth,t=document.documentElement.getBoundingClientRect();return e-(e-(m(document.documentElement)?0:t.width))}var An=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),kn=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Vn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return An(t,e),kn([Ge("left")],t.prototype,"X",void 0),kn([Ge("top")],t.prototype,"Y",void 0),t}(mt),En="e-popup",Dn="e-rtl",Nn="e-popup-open",Fn="e-popup-close",Ln=function(e){function t(t,i){return e.call(this,i,t)||this}return An(t,e),t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"width":Le(this.element,{width:b(e.width)});break;case"height":Le(this.element,{height:b(e.height)});break;case"zIndex":Le(this.element,{zIndex:e.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":var o=e.offsetX-t.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+o).toString()+"px";break;case"offsetY":var s=e.offsetY-t.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+s).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":"none"!==e.actionOnScroll?this.wireScrollEvents():this.unwireScrollEvents()}}},t.prototype.getModuleName=function(){return"popup"},t.prototype.resolveCollision=function(){this.checkCollision()},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.destroy=function(){this.element.classList.contains("e-popup-open")&&this.unwireEvents(),this.element.classList.remove(En,Dn,Nn,Fn),e.prototype.destroy.call(this)},t.prototype.render=function(){this.element.classList.add(En);var e={};1e3!==this.zIndex&&(e.zIndex=this.zIndex),"auto"!==this.width&&(e.width=b(this.width)),"auto"!==this.height&&(e.height=b(this.height)),Le(this.element,e),this.fixedParent=!1,this.setEnableRtl(),this.setContent()},t.prototype.wireEvents=function(){ge.isDevice&&ye.add(window,"orientationchange",this.orientationOnChange,this),"none"!==this.actionOnScroll&&this.wireScrollEvents()},t.prototype.wireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,t=this.getScrollableParent(this.getRelateToElement());e<t.length;e++){var i=t[e];ye.add(i,"scroll",this.scrollRefresh,this)}},t.prototype.unwireEvents=function(){ge.isDevice&&ye.remove(window,"orientationchange",this.orientationOnChange),"none"!==this.actionOnScroll&&this.unwireScrollEvents()},t.prototype.unwireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,t=this.getScrollableParent(this.getRelateToElement());e<t.length;e++){var i=t[e];ye.remove(i,"scroll",this.scrollRefresh)}},t.prototype.getRelateToElement=function(){var e=""===this.relateTo||m(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:e},!0),"string"===typeof this.relateTo?document.querySelector(this.relateTo):this.relateTo},t.prototype.scrollRefresh=function(e){if("reposition"===this.actionOnScroll?m(this.element)||this.element.offsetParent===e.target||this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&null==e.target.parentElement||this.refreshPosition():"hide"===this.actionOnScroll&&this.hide(),"none"!==this.actionOnScroll&&this.getRelateToElement()){var t=this.isElementOnViewport(this.getRelateToElement(),e.target);t||this.targetInvisibleStatus?t&&(this.targetInvisibleStatus=!1):(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0)}},t.prototype.isElementOnViewport=function(e,t){for(var i=this.getScrollableParent(e),n=0;n<i.length;n++)if(!this.isElementVisible(e,i[n]))return!1;return!0},t.prototype.isElementVisible=function(e,t){var i=this.checkGetBoundingClientRect(e);if(!i.height||!i.width)return!1;if(m(this.checkGetBoundingClientRect(t))){var n=window,o={top:n.scrollY,left:n.scrollX,right:n.scrollX+n.outerWidth,bottom:n.scrollY+n.outerHeight},s=Xi(e),a={top:s.top,left:s.left,right:s.left+i.width,bottom:s.top+i.height},r={top:o.bottom-a.top,left:o.right-a.left,bottom:a.bottom-o.top,right:a.right-o.left};return r.top>0&&r.left>0&&r.right>0&&r.bottom>0}var l=t.getBoundingClientRect();return!(i.bottom<l.top)&&!(i.bottom>l.bottom)&&!(i.right>l.right)&&!(i.left<l.left)},t.prototype.preRender=function(){},t.prototype.setEnableRtl=function(){this.reposition(),this.enableRtl?this.element.classList.add(Dn):this.element.classList.remove(Dn)},t.prototype.setContent=function(){if(!m(this.content))if(this.element.innerHTML="","string"===typeof this.content)this.element.textContent=this.content;else{var e=this.getRelateToElement(),t=this.content.props;e.classList.contains("e-dropdown-btn")&&!m(t)||this.element.appendChild(this.content)}},t.prototype.orientationOnChange=function(){var e=this;setTimeout((function(){e.refreshPosition()}),200)},t.prototype.refreshPosition=function(e,t){m(e)||this.checkFixedParent(e),this.reposition(),t||this.checkCollision()},t.prototype.reposition=function(){var e,t,i=this.getRelateToElement();if("number"===typeof this.position.X&&"number"===typeof this.position.Y)e={left:this.position.X,top:this.position.Y};else if("string"===typeof this.position.X&&"number"===typeof this.position.Y||"number"===typeof this.position.X&&"string"===typeof this.position.Y){var n=void 0,o=this.element.style.display;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(n=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),t=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),e="string"===typeof this.position.X?{left:t.left,top:this.position.Y}:{left:this.position.X,top:t.top},this.element.style.display=o,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=n)}else if(i){o=this.element.style.display;this.element.style.display="block",e=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),this.element.style.display=o}else e={left:0,top:0};m(e)||(this.element.style.left=e.left+"px",this.element.style.top=e.top+"px")},t.prototype.checkGetBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(t){return null}},t.prototype.getAnchorPosition=function(e,t,i,n,o){var s=this.checkGetBoundingClientRect(t),a=this.checkGetBoundingClientRect(e);if(m(s)||m(a))return null;var r=e,l={left:0,top:0};switch(t.offsetParent&&"BODY"===t.offsetParent.tagName&&"BODY"===e.tagName?l=Xi(e):(t.classList.contains("e-dlg-modal")&&"BODY"!==r.tagName&&(t=t.parentElement),l=function(e,t){var i=!1,n={left:0,top:0},o=e;if(!e||!t)return n;for(m(t.offsetParent)&&"fixed"===t.style.position&&(i=!0);(t.offsetParent||i)&&e&&t.offsetParent!==e;)n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent;for(e=o;(t.offsetParent||i)&&e&&t.offsetParent!==e;)n.left-=e.scrollLeft,n.top-=e.scrollTop,e=e.parentElement;return n}(r,t)),i.X){default:case"left":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===r.tagName&&"container"===this.targetType?l.left+=window.innerWidth/2-s.width/2:"container"===this.targetType?l.left+=a.width/2-s.width/2:l.left+=a.width/2;break;case"right":t.classList.contains("e-dlg-modal")&&"BODY"===r.tagName&&"container"===this.targetType?l.left+=window.innerWidth-s.width:"container"===this.targetType?l.left+=a.width-s.width:l.left+=a.width}switch(i.Y){default:case"top":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===r.tagName&&"container"===this.targetType?l.top+=window.innerHeight/2-s.height/2:"container"===this.targetType?l.top+=a.height/2-s.height/2:l.top+=a.height/2;break;case"bottom":t.classList.contains("e-dlg-modal")&&"BODY"===r.tagName&&"container"===this.targetType?l.top+=window.innerHeight-s.height:"container"===this.targetType?l.top+=a.height-s.height:l.top+=a.height}return l.left+=n,l.top+=o,l},t.prototype.callFlip=function(e){var t=this.getRelateToElement();dn(this.element,t,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,e,this.fixedParent)},t.prototype.callFit=function(e){if(0!==ln(this.element,this.viewPortElement).length)if(m(this.viewPortElement)){var t=rn(this.element,this.viewPortElement,e);e.X&&(this.element.style.left=t.left+"px"),e.Y&&(this.element.style.top=t.top+"px")}else{var i=this.checkGetBoundingClientRect(this.element),n=this.checkGetBoundingClientRect(this.viewPortElement);if(m(i)||m(n))return null;e&&!0===e.Y&&(n.top>i.top?this.element.style.top="0px":n.bottom<i.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(i.bottom-n.bottom)+"px")),e&&!0===e.X&&(n.right<i.right?this.element.style.left=parseInt(this.element.style.left,10)-(i.right-n.right)+"px":n.left>i.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(n.left-i.left)+"px"))}},t.prototype.checkCollision=function(){var e=this.collision.X,t=this.collision.Y;"none"===e&&"none"===t||("flip"===e&&"flip"===t?this.callFlip({X:!0,Y:!0}):"fit"===e&&"fit"===t?this.callFit({X:!0,Y:!0}):("flip"===e?this.callFlip({X:!0,Y:!1}):"flip"===t&&this.callFlip({Y:!0,X:!1}),"fit"===e?this.callFit({X:!0,Y:!1}):"fit"===t&&this.callFit({X:!1,Y:!0})))},t.prototype.show=function(e,t){var i=this;if(this.getRelateToElement().classList.contains("e-filemanager")&&(this.fmDialogContainer=this.element.getElementsByClassName("e-file-select-wrap")[0]),this.wireEvents(),!m(this.fmDialogContainer)&&ge.isIos&&(this.fmDialogContainer.style.display="block"),1e3===this.zIndex||!m(t)){var n=m(t)?this.element:t;this.zIndex=On(n),Le(this.element,{zIndex:this.zIndex})}e=m(e)||"object"!==typeof e?this.showAnimation:e,"none"===this.collision.X&&"none"===this.collision.Y||(Se([this.element],Fn),be([this.element],Nn),this.checkCollision(),Se([this.element],Nn),be([this.element],Fn)),m(e)?(Se([this.element],Fn),be([this.element],Nn),this.trigger("open")):(e.begin=function(){i.isDestroyed||(Se([i.element],Fn),be([i.element],Nn))},e.end=function(){i.isDestroyed||i.trigger("open")},new st(e).animate(this.element))},t.prototype.hide=function(e){var t=this;e=m(e)||"object"!==typeof e?this.hideAnimation:e,m(e)?(Se([this.element],Nn),be([this.element],Fn),this.trigger("close")):(e.end=function(){t.isDestroyed||(Se([t.element],Nn),be([t.element],Fn),t.trigger("close"))},new st(e).animate(this.element)),this.unwireEvents()},t.prototype.getScrollableParent=function(e){return this.checkFixedParent(e),Pn(e,this.fixedParent)},t.prototype.checkFixedParent=function(e){for(var t=e.parentElement;t&&"HTML"!==t.tagName;){var i=getComputedStyle(t);"fixed"===i.position&&!m(this.element)&&this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&"hidden"!==getComputedStyle(this.element.offsetParent).overflow&&(this.element.style.top=window.scrollY>parseInt(this.element.style.top,10)?b(window.scrollY-parseInt(this.element.style.top,10)):b(parseInt(this.element.style.top,10)-window.scrollY),this.element.style.position="fixed",this.fixedParent=!0),t=t.parentElement,!m(this.element)&&m(this.element.offsetParent)&&"fixed"===i.position&&"fixed"===this.element.style.position&&(this.fixedParent=!0)}},kn([Ge("auto")],t.prototype,"height",void 0),kn([Ge("auto")],t.prototype,"width",void 0),kn([Ge(null)],t.prototype,"content",void 0),kn([Ge("container")],t.prototype,"targetType",void 0),kn([Ge(null)],t.prototype,"viewPortElement",void 0),kn([Ge({X:"none",Y:"none"})],t.prototype,"collision",void 0),kn([Ge("")],t.prototype,"relateTo",void 0),kn([Je({},Vn)],t.prototype,"position",void 0),kn([Ge(0)],t.prototype,"offsetX",void 0),kn([Ge(0)],t.prototype,"offsetY",void 0),kn([Ge(1e3)],t.prototype,"zIndex",void 0),kn([Ge(!1)],t.prototype,"enableRtl",void 0),kn([Ge("reposition")],t.prototype,"actionOnScroll",void 0),kn([Ge(null)],t.prototype,"showAnimation",void 0),kn([Ge(null)],t.prototype,"hideAnimation",void 0),kn([$e()],t.prototype,"open",void 0),kn([$e()],t.prototype,"close",void 0),kn([$e()],t.prototype,"targetExitViewport",void 0),t=kn([et],t)}(Dt);function Pn(e,t){for(var i=getComputedStyle(e),n=[],o=/(auto|scroll)/,s=e.parentElement;s&&"HTML"!==s.tagName;){var a=getComputedStyle(s);"absolute"===i.position&&"static"===a.position||!o.test(a.overflow+a.overflowY+a.overflowX)||n.push(s),s=s.parentElement}return t||n.push(document),n}function On(e){for(var t=e.parentElement,i=[];t&&"BODY"!==t.tagName;){var n=document.defaultView.getComputedStyle(t,null).getPropertyValue("z-index"),o=document.defaultView.getComputedStyle(t,null).getPropertyValue("position");"auto"!==n&&"static"!==o&&i.push(n),t=t.parentElement}for(var s=[],a=0;a<document.body.children.length;a++)if(!e.isEqualNode(document.body.children[a])){n=document.defaultView.getComputedStyle(document.body.children[a],null).getPropertyValue("z-index"),o=document.defaultView.getComputedStyle(document.body.children[a],null).getPropertyValue("position");"auto"!==n&&"static"!==o&&s.push(n)}s.push("999");var r=[];if(!m(e.parentElement)&&"BODY"!==e.parentElement.tagName){var l=[].slice.call(e.parentElement.children);for(a=0;a<l.length;a++)if(!e.isEqualNode(l[a])){n=document.defaultView.getComputedStyle(l[a],null).getPropertyValue("z-index"),o=document.defaultView.getComputedStyle(l[a],null).getPropertyValue("position");"auto"!==n&&"static"!==o&&r.push(n)}}var d=i.concat(s,r),h=Math.max.apply(Math,d)+1;return h>2147483647?2147483647:h}var Bn,zn,jn,Rn,_n,Hn,Wn,Un,qn=["north-west","north","north-east","west","east","south-west","south","south-east"],Yn="e-resize-handle",Qn="e-focused-handle",Zn="e-dlg-resizable",Xn=["e-restrict-left"],Gn="e-resize-viewport",Jn=["north","west","east","south"],Kn=0,$n=0,eo=0,to=0,io=0,no=0,oo=null,so=null,ao=null,ro=!0,lo=0,ho=!0;function po(e){yo();var t=we("span",{attrs:{unselectable:"on",contenteditable:"false"}});t.setAttribute("class","e-dialog-border-resize e-"+e),"south"===e&&(t.style.height="2px",t.style.width="100%",t.style.bottom="0px",t.style.left="0px"),"north"===e&&(t.style.height="2px",t.style.width="100%",t.style.top="0px",t.style.left="0px"),"east"===e&&(t.style.height="100%",t.style.width="2px",t.style.right="0px",t.style.top="0px"),"west"===e&&(t.style.height="100%",t.style.width="2px",t.style.left="0px",t.style.top="0px"),Bn.appendChild(t)}function co(e){var t;return m(e)||(t="string"===typeof e?document.querySelector(e):e),t}function uo(e){m(e)&&(e=this);for(var t=Bn.querySelectorAll("."+Yn),i=0;i<t.length;i++){zn=t[i],ye.add(zn,"mousedown",mo,e);var n="msie"===ge.info.name?"pointerdown":"touchstart";ye.add(zn,n,vo,e)}var o=Bn.querySelectorAll(".e-dialog-border-resize");if(!m(o))for(i=0;i<o.length;i++){zn=o[i],ye.add(zn,"mousedown",mo,e);n="msie"===ge.info.name?"pointerdown":"touchstart";ye.add(zn,n,vo,e)}}function fo(e){return e.indexOf("mouse")>-1?"mouse":"touch"}function mo(e){if(e.preventDefault(),Bn=e.target.parentElement,yo(),io=e.pageX,no=e.pageY,e.target.classList.add(Qn),m(oo)||!0!==oo(e,this)){this.targetEle&&Bn&&Bn.querySelector("."+Zn)&&(Wn="body"===this.target?null:this.targetEle,Hn=this.targetEle.clientWidth,Rn=this.targetEle.clientHeight);var t=m(Wn)?document:Wn;ye.add(t,"mousemove",wo,this),ye.add(document,"mouseup",go,this);for(var i=0;i<Xn.length;i++)ro=!Bn.classList.contains(Xn[i])}}function go(e){var t="msie"===ge.info.name?"pointermove":"touchmove",i="msie"===ge.info.name?"pointerup":"touchend",n=m(Wn)?document:Wn,o="msie"===ge.info.name?"pointerdown":"touchstart";ye.remove(n,"mousemove",wo),ye.remove(n,t,wo),ye.remove(n,o,wo),m(document.body.querySelector("."+Qn))||document.body.querySelector("."+Qn).classList.remove(Qn),m(ao)||ao(e,this),ye.remove(document,"mouseup",go),ye.remove(document,i,go)}function yo(){Kn=parseFloat(getComputedStyle(Bn,null).getPropertyValue("width").replace("px","")),$n=parseFloat(getComputedStyle(Bn,null).getPropertyValue("height").replace("px","")),eo=Bn.getBoundingClientRect().left,to=Bn.getBoundingClientRect().top}function vo(e){Bn=e.target.parentElement,yo();var t=Bn.classList.contains("e-dialog");(e.target.classList.contains(Yn)||e.target.classList.contains("e-dialog-border-resize"))&&t&&e.target.classList.add(Qn);var i=e.touches?e.changedTouches[0]:e;if(io=i.pageX,no=i.pageY,m(oo)||!0!==oo(e,this)){var n="msie"===ge.info.name?"pointermove":"touchmove",o="msie"===ge.info.name?"pointerup":"touchend",s=m(Wn)?document:Wn;ye.add(s,n,wo,this),ye.add(document,o,go,this)}}function wo(e){if(e.target.classList.contains(Yn)&&e.target.classList.contains(Qn)?zn=e.target:m(document.body.querySelector("."+Qn))||(zn=document.body.querySelector("."+Qn)),!m(zn)){for(var t="",i=0;i<qn.length;i++)zn.classList.contains("e-"+qn[i])&&(t=qn[i]);switch(m(so)||so(e,this),t){case"south":So(e);break;case"north":Co(e);break;case"west":xo(e);break;case"east":Mo(e);break;case"south-east":So(e),Mo(e);break;case"south-west":So(e),xo(e);break;case"north-east":Co(e),Mo(e);break;case"north-west":Co(e),xo(e)}}}function bo(e){return e.getBoundingClientRect()}function So(e){var t,i=document.documentElement.clientHeight,n=!1,o=(e.touches?e.changedTouches[0]:e).pageY,s=bo(Bn);m(Wn)||(t=bo(Wn)),m(Wn)?m(Wn)&&(i-o>=0||s.top<0)&&(n=!0):n=!0;var a=$n+(o-no);a=a>jn?a:jn;var r=0;m(Wn)||(r=t.top);var l=m(Wn)?0:Wn.offsetHeight-Wn.clientHeight,d=s.top-r-l/2;if(d=d<0?0:d,s.top>0&&d+a>Rn){if(n=!1,Bn.classList.contains(Gn))return;Bn.style.height=Rn-parseInt(d.toString(),10)+"px"}else{var h=0;if(n){s.top<0&&i+(s.height+s.top)>0&&a+(h=s.top)<=30&&(a=s.height-(s.height+s.top)+30),a+s.top>=Rn&&(Bn.style.height=s.height+(i-(s.height+s.top))+"px");var p=m(Wn)?h:d;a>=jn&&a+p<=Rn&&(Bn.style.height=a+"px")}}}function Co(e){var t,i=!1,n="mouse"===fo(e.type)?e.pageY:e.touches[0].pageY,o=bo(Bn);m(Wn)||(t=bo(Wn)),(!m(Wn)&&o.top-t.top>0||m(Wn)&&n>0)&&(i=!0);var s=$n-(n-no);if(i&&s>=jn&&s<=Rn){var a=0;m(Wn)||(a=t.top);var r=to-a+(n-no);r=r>0?r:1,Bn.style.height=s+"px",Bn.style.top=r+"px"}}function xo(e){var t,i=document.documentElement.clientWidth,n=!1;m(Wn)||(t=bo(Wn));var o="mouse"===fo(e.type)?e.pageX:e.touches[0].pageX,s=bo(Bn),a=m(Wn)?0:Wn.offsetWidth-Wn.clientWidth,r=m(Wn)?0:t.left,l=m(Wn)?0:t.width;m(Un)&&(m(Wn)?Un=i:(Un=s.left-r-a/2+s.width,Un+=l-a-Un)),(!m(Wn)&&Math.floor(s.left-t.left+s.width+(t.right-s.right))-a<=Hn||m(Wn)&&o>=0)&&(n=!0);var d=Kn-(o-io);if(ro&&(d=d>Un?Un:d),n&&d>=_n&&d<=Hn){var h=0;m(Wn)||(h=t.left);var p=eo-h+(o-io);p=p>0?p:1,d!==lo&&ho&&(Bn.style.width=d+"px"),ro&&(Bn.style.left=p+"px",ho=1!==p)}lo=d}function Mo(e){var t,i=document.documentElement.clientWidth,n=!1;m(Wn)||(t=bo(Wn));var o=(e.touches?e.changedTouches[0]:e).pageX,s=bo(Bn);(!m(Wn)&&(s.left-t.left+s.width<=Hn||s.right-t.left>=s.width)||m(Wn)&&i-o>0)&&(n=!0);var a=Kn+(o-io),r=0;if(m(Wn)||(r=t.left),s.left-r+a>Hn){if(n=!1,Bn.classList.contains(Gn))return;Bn.style.width=Hn-(s.left-r)+"px"}n&&a>=_n&&a<=Hn&&(Bn.style.width=a+"px")}function Io(){for(var e=Bn.querySelectorAll("."+Yn),t=0;t<e.length;t++)Ae(e[t]);var i=Bn.querySelectorAll(".e-dialog-border-resize");if(!m(i))for(t=0;t<i.length;t++)Ae(i[t])}var To,Ao=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ko=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Vo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ao(t,e),ko([Ge(!0)],t.prototype,"isFlat",void 0),ko([Ge()],t.prototype,"buttonModel",void 0),ko([Ge("Button")],t.prototype,"type",void 0),ko([$e()],t.prototype,"click",void 0),t}(mt),Eo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ao(t,e),ko([Ge("Fade")],t.prototype,"effect",void 0),ko([Ge(400)],t.prototype,"duration",void 0),ko([Ge(0)],t.prototype,"delay",void 0),t}(mt),Do="e-dialog",No="e-rtl",Fo="e-dlg-header-content",Lo="e-dlg-header",Po="e-footer-content",Oo="e-dlg-modal",Bo="e-icon-dlg-close",zo="e-dlg-target",jo="e-scroll-disabled",Ro="e-device",_o="e-dlg-fullscreen",Ho="e-dlg-closeicon-btn",Wo="e-popup-open",Uo="Information",qo="e-scroll-disabled",Yo="e-alert-dialog",Qo="e-confirm-dialog",Zo="e-dlg-resizable",Xo="e-restrict-left",Go="e-resize-viewport",Jo="user action",Ko=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.needsID=!0,n}return Ao(t,e),t.prototype.render=function(){this.initialize(),this.initRender(),this.wireEvents(),"100%"===this.width&&(this.element.style.width=""),""!==this.minHeight&&(this.element.style.minHeight=b(this.minHeight)),this.enableResize&&(this.setResize(),"None"===this.animationSettings.effect&&this.getMinHeight()),this.renderComplete()},t.prototype.initializeValue=function(){this.dlgClosedBy=Jo},t.prototype.preRender=function(){var e=this;this.initializeValue(),this.headerContent=null,this.allowMaxHeight=!0,this.preventVisibility=!0,this.clonedEle=this.element.cloneNode(!0),this.closeIconClickEventHandler=function(t){e.dlgClosedBy="close icon",e.hide(t)},this.dlgOverlayClickEventHandler=function(t){e.dlgClosedBy="overlayClick",t.preventFocus=!1,e.trigger("overlayClick",t,(function(t){t.preventFocus||e.focusContent(),e.dlgClosedBy=Jo}))};if(this.l10n=new qt("dialog",{close:"Close"},this.locale),this.checkPositionData(),m(this.target)){var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.target=document.body,this.isProtectedOnChange=t}},t.prototype.isNumberValue=function(e){return/^[-+]?\d*\.?\d+$/.test(e)},t.prototype.checkPositionData=function(){if(!m(this.position)){if(!m(this.position.X)&&"number"!==typeof this.position.X)if(this.isNumberValue(this.position.X)){var e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.X=parseFloat(this.position.X),this.isProtectedOnChange=e}if(!m(this.position.Y)&&"number"!==typeof this.position.Y)if(this.isNumberValue(this.position.Y)){e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.Y=parseFloat(this.position.Y),this.isProtectedOnChange=e}}},t.prototype.getEle=function(e,t){for(var i=void 0,n=0;n<e.length;n++)if(e[n].classList.contains(t)){i=e[n];break}return i},t.prototype.getMinHeight=function(){var e="0px",t="0px";m(this.element.querySelector("."+Fo))||(e=getComputedStyle(this.headerContent).height);var i=this.getEle(this.element.children,Po);m(i)||(t=getComputedStyle(i).height);var n,o=parseInt(e.slice(0,e.indexOf("p")),10),s=parseInt(t.slice(0,t.indexOf("p")),10);return n=o+30+(isNaN(s)?0:s),jn=n,o+30+s},t.prototype.onResizeStart=function(e,t){return t.trigger("resizeStart",e),e.cancel},t.prototype.onResizing=function(e,t){t.trigger("resizing",e)},t.prototype.onResizeComplete=function(e,t){t.trigger("resizeStop",e)},t.prototype.setResize=function(){if(this.enableResize){if(this.isBlazorServerRender()&&!m(this.element.querySelector(".e-icons.e-resize-handle")))return;this.element.classList.add(Zo);for(var e=getComputedStyle(this.element).minHeight,t=getComputedStyle(this.element).minWidth,i="",n=0;n<this.resizeHandles.length;n++){if("All"===this.resizeHandles[n]){i="south north east west north-east north-west south-east south-west";break}var o="";switch(this.resizeHandles[n].toString()){case"SouthEast":o="south-east";break;case"SouthWest":o="south-west";break;case"NorthEast":o="north-east";break;case"NorthWest":o="north-west";break;default:o=this.resizeHandles[n].toString()}i+=o.toLocaleLowerCase()+" "}this.enableRtl&&"south-east"===i.trim()?i="south-west":this.enableRtl&&"south-west"===i.trim()&&(i="south-east"),this.isModal&&this.enableRtl?this.element.classList.add(Xo):this.isModal&&this.target===document.body&&this.element.classList.add(Go),function(e){oo=e.resizeBegin,so=e.resizing,ao=e.resizeComplete,Bn=co(e.element),Wn=co(e.boundary);for(var t=e.direction.split(" "),i=0;i<t.length;i++)if(Jn.indexOf(t[i])>=0&&t[i])po(t[i]);else if(""!==t[i].trim()){var n=we("div",{className:"e-icons "+Yn+" e-"+t[i]});Bn.appendChild(n)}jn=e.minHeight,_n=e.minWidth,Hn=e.maxWidth,Rn=e.maxHeight,e.proxy&&e.proxy.element&&e.proxy.element.classList.contains("e-dialog")?uo(e.proxy):uo()}({element:this.element,direction:i,minHeight:parseInt(e.slice(0,t.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(t.slice(0,t.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:this.target===document.body?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this),proxy:this}),this.wireWindowResizeEvent()}else Io(),this.unWireWindowResizeEvent(),this.isModal?this.element.classList.remove(Xo):this.element.classList.remove(Go),this.element.classList.remove(Zo)},t.prototype.getFocusElement=function(e){var t=e.querySelectorAll('input,select,textarea,button:enabled,a,[contenteditable="true"],[tabindex]');return{element:t[t.length-1]}},t.prototype.keyDown=function(e){var t=this;if(9===e.keyCode&&this.isModal){var i=void 0;m(this.btnObj)||(i=this.btnObj[this.btnObj.length-1]),m(this.btnObj)&&!m(this.ftrTemplateContent)&&(i=this.getFocusElement(this.ftrTemplateContent)),m(this.btnObj)&&m(this.ftrTemplateContent)&&!m(this.contentEle)&&(i=this.getFocusElement(this.contentEle)),m(i)||document.activeElement!==i.element||e.shiftKey||(e.preventDefault(),this.focusableElements(this.element).focus()),document.activeElement===this.focusableElements(this.element)&&e.shiftKey&&(e.preventDefault(),m(i)||i.element.focus())}var n,o=document.activeElement,s=["input","textarea"].indexOf(o.tagName.toLowerCase())>-1,a=!1;if(s||(a=o.hasAttribute("contenteditable")&&"true"===o.getAttribute("contenteditable")),27===e.keyCode&&this.closeOnEscape){this.dlgClosedBy="escape";var r=document.querySelector(".e-popup-open:not(.e-dialog)");(m(r)||r.classList.contains("e-toolbar-pop"))&&this.hide(e)}(13===e.keyCode&&!e.ctrlKey&&"textarea"!==o.tagName.toLowerCase()&&s&&!m(this.primaryButtonEle)||13===e.keyCode&&e.ctrlKey&&("textarea"===o.tagName.toLowerCase()||a)&&!m(this.primaryButtonEle))&&(this.buttons.some((function(e,t){n=t;var i=e.buttonModel;return!m(i)&&!0===i.isPrimary}))&&"function"===typeof this.buttons[n].click&&setTimeout((function(){t.buttons[n].click.call(t,e)})))},t.prototype.initialize=function(){m(this.target)||(this.targetEle="string"===typeof this.target?document.querySelector(this.target):this.target),this.isBlazorServerRender()||be([this.element],Do),ge.isDevice&&be([this.element],Ro),this.isBlazorServerRender()||this.setCSSClass(),this.setMaxHeight()},t.prototype.initRender=function(){var e=this;if(this.initialRender=!0,this.isBlazorServerRender()||Ve(this.element,{role:"dialog"}),1e3===this.zIndex?(this.setzIndex(this.element,!1),this.calculatezIndex=!0):this.calculatezIndex=!1,this.isBlazorServerRender()&&m(this.headerContent)&&(this.headerContent=this.element.getElementsByClassName("e-dlg-header-content")[0]),this.isBlazorServerRender()&&m(this.contentEle)&&(this.contentEle=this.element.querySelector("#"+this.element.id+"_dialog-content")),this.isBlazorServerRender()||(this.setTargetContent(),""===this.header||m(this.header)||this.setHeader(),this.renderCloseIcon(),this.setContent(),""===this.footerTemplate||m(this.footerTemplate)?m(this.buttons[0].buttonModel)||this.setButton():this.setFooterTemplate()),this.isBlazorServerRender()&&(m(this.buttons[0].buttonModel)||""!==this.footerTemplate||this.setButton()),this.allowDragging&&!m(this.headerContent)&&this.setAllowDragging(),this.isBlazorServerRender()||(Ve(this.element,{"aria-modal":this.isModal?"true":"false"}),this.isModal&&this.setIsModal()),this.isBlazorServerRender()&&m(this.dlgContainer)){this.dlgContainer=this.element.parentElement;for(var t=0,i=this.dlgContainer.children;t<i.length;t++)i[t].classList.contains("e-dlg-overlay")&&(this.dlgOverlay=i[t])}if(!0!==this.element.classList.contains(Yo)&&!0!==this.element.classList.contains(Qo)&&!m(this.element.parentElement)){var n=this.isModal?this.dlgContainer.parentElement:this.element.parentElement;this.refElement=this.createElement("div",{className:"e-dlg-ref-element"}),n.insertBefore(this.refElement,this.isModal?this.dlgContainer:this.element)}m(this.targetEle)||(this.isModal?this.targetEle.appendChild(this.dlgContainer):this.targetEle.appendChild(this.element)),this.popupObj=new Ln(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.target,actionOnScroll:"none",enableRtl:this.enableRtl,open:function(t){var i={container:e.isModal?e.dlgContainer:e.element,element:e.element,target:e.target,preventFocus:!1};e.enableResize&&e.resetResizeIcon(),e.trigger("open",i,(function(t){t.preventFocus||e.focusContent()}))},close:function(t){e.isModal&&be([e.dlgOverlay],"e-fade"),e.unBindEvent(e.element),e.isModal&&(e.dlgContainer.style.display="none"),e.trigger("close",e.closeArgs);var i=document.activeElement;m(i)||m(i.blur)||i.blur(),m(e.storeActiveElement)||m(e.storeActiveElement.focus)||e.storeActiveElement.focus()}}),this.positionChange(),this.setEnableRTL(),this.isBlazorServerRender()||(be([this.element],"e-popup-close"),this.isModal&&this.setOverlayZindex()),this.visible?this.show():this.isModal&&(this.dlgOverlay.style.display="none"),this.initialRender=!1},t.prototype.resetResizeIcon=function(){var e=this.getMinHeight();if(this.targetEle.offsetHeight<e){var t=this.enableRtl?"e-south-west":"e-south-east",i=this.element.querySelector("."+t);m(i)||(i.style.bottom="-"+e.toString()+"px")}},t.prototype.setOverlayZindex=function(e){var t;t=m(e)?parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:e,this.dlgOverlay.style.zIndex=(t-1).toString(),this.dlgContainer.style.zIndex=t.toString()},t.prototype.positionChange=function(){this.isModal&&(isNaN(parseFloat(this.position.X))||isNaN(parseFloat(this.position.Y)))?!isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))||isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()},t.prototype.setPopupPosition=function(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})},t.prototype.setAllowDragging=function(){var e=this,t="."+Fo;this.element.classList.contains("e-draggable")||(this.dragObj=new Bt(this.element,{clone:!1,isDragScroll:!0,abort:".e-dlg-closeicon-btn",handle:t,dragStart:function(t){e.trigger("dragStart",t,(function(e){S()&&e.bindEvents(t.dragElement)}))},dragStop:function(t){e.isModal&&(m(e.position)||e.dlgContainer.classList.remove("e-dlg-"+e.position.X+"-"+e.position.Y),e.element.style.position="relative"),e.trigger("dragStop",t),e.element.classList.remove(Xo)},drag:function(t){e.trigger("drag",t)}}),m(this.targetEle)||(this.dragObj.dragArea=this.targetEle))},t.prototype.setButton=function(){if(!this.isBlazorServerRender()){this.buttonContent=[],this.btnObj=[];for(var e=0;e<this.buttons.length;e++){var t=m(this.buttons[e].type)?"button":this.buttons[e].type.toLowerCase(),i=this.createElement("button",{className:this.cssClass,attrs:{type:t}});this.buttonContent.push(i.outerHTML)}this.setFooterTemplate()}e=0;for(var n,o=this.element.children;e<o.length;e++)o[e].classList.contains(Po)&&(n=o[e].querySelectorAll("button"));for(e=0;e<this.buttons.length;e++)this.isBlazorServerRender()||(this.btnObj[e]=new Qi(this.buttons[e].buttonModel)),this.isBlazorServerRender()&&(this.ftrTemplateContent=this.element.querySelector("."+Po)),!m(this.ftrTemplateContent)&&n.length>0&&("function"===typeof this.buttons[e].click&&ye.add(n[e],"click",this.buttons[e].click,this),"object"===typeof this.buttons[e].click&&ye.add(n[e],"click",this.buttonClickHandler.bind(this,e),this)),this.isBlazorServerRender()||m(this.ftrTemplateContent)||(this.btnObj[e].appendTo(this.ftrTemplateContent.children[e]),this.buttons[e].isFlat&&this.btnObj[e].element.classList.add("e-flat"),this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0])},t.prototype.buttonClickHandler=function(e){this.trigger("buttons["+e+"].click",{})},t.prototype.setContent=function(){if(this.contentEle=this.createElement("div",{className:"e-dlg-content",id:this.element.id+"_dialog-content"}),this.innerContentElement)this.contentEle.appendChild(this.innerContentElement);else if(!m(this.content)&&""!==this.content||!this.initialRender){Object.keys(window);("string"!==typeof this.content||S())&&this.content instanceof HTMLElement?this.contentEle.appendChild(this.content):this.setTemplate(this.content,this.contentEle,"content")}m(this.headerContent)?this.element.insertBefore(this.contentEle,this.element.children[0]):this.element.insertBefore(this.contentEle,this.element.children[1]),"auto"===this.height&&(this.isBlazorServerRender()||!ge.isIE||""!==this.element.style.width||m(this.width)||(this.element.style.width=b(this.width)),this.setMaxHeight())},t.prototype.setTemplate=function(e,t,i){var n,o,s;Object.keys(window);o=t.classList.contains(Lo)?this.element.id+"header":t.classList.contains(Po)?this.element.id+"footerTemplate":this.element.id+"content",m(e.outerHTML)?("string"===typeof e||"string"!==typeof e||S()&&!this.isStringTemplate)&&("string"===typeof e&&(e=this.sanitizeHelper(e)),this.isVue||"string"!==typeof e?(n=Mi(e),s=e):t.innerHTML=e):t.appendChild(e);var a=[];if(!m(n)){for(var r=0,l=n({},this,i,o,!(S()&&!this.isStringTemplate&&0===s.indexOf("<div>Blazor"))||this.isStringTemplate);r<l.length;r++){var d=l[r];a.push(d)}Ie([].slice.call(a),t)}},t.prototype.sanitizeHelper=function(e){if(this.enableHtmlSanitizer){var t=Vi.beforeSanitize();f(t,t,{cancel:!1,helper:null}),this.trigger("beforeSanitizeHtml",t),t.cancel&&!m(t.helper)?e=t.helper(e):t.cancel||(e=Vi.serializeValue(t,e))}return e},t.prototype.setMaxHeight=function(){if(this.allowMaxHeight){var e=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=!m(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px",this.element.style.display=e,ge.isIE&&"auto"===this.height&&!m(this.contentEle)&&this.element.offsetHeight<this.contentEle.offsetHeight&&(this.element.style.height="inherit")}},t.prototype.setEnableRTL=function(){this.isBlazorServerRender()||(this.enableRtl?be([this.element],No):Se([this.element],No)),m(this.element.querySelector(".e-resize-handle"))||(Io(),this.setResize())},t.prototype.setTargetContent=function(){var e=this;if(m(this.content)||""===this.content){var t=""!==this.element.innerHTML.replace(/\s|<(\/?|\/?)(!--!--)>/g,"");(this.element.children.length>0||t)&&(this.innerContentElement=document.createDocumentFragment(),[].slice.call(this.element.childNodes).forEach((function(t){8!==t.nodeType&&e.innerContentElement.appendChild(t)})))}},t.prototype.setHeader=function(){this.headerEle?this.headerEle.innerHTML="":this.headerEle=this.createElement("div",{id:this.element.id+"_title",className:Lo}),this.createHeaderContent(),this.headerContent.appendChild(this.headerEle),this.setTemplate(this.header,this.headerEle,"header"),Ve(this.element,{"aria-labelledby":this.element.id}),this.element.insertBefore(this.headerContent,this.element.children[0]),this.allowDragging&&!m(this.headerContent)&&this.setAllowDragging()},t.prototype.setFooterTemplate=function(){this.ftrTemplateContent?this.ftrTemplateContent.innerHTML="":this.ftrTemplateContent=this.createElement("div",{className:Po}),""===this.footerTemplate||m(this.footerTemplate)?this.ftrTemplateContent.innerHTML=this.buttonContent.join(""):this.setTemplate(this.footerTemplate,this.ftrTemplateContent,"footerTemplate"),this.element.appendChild(this.ftrTemplateContent)},t.prototype.createHeaderContent=function(){m(this.headerContent)&&(this.headerContent=this.createElement("div",{id:this.element.id+"_dialog-header",className:Fo}))},t.prototype.renderCloseIcon=function(){this.showCloseIcon&&(this.closeIcon=this.createElement("button",{className:Ho,attrs:{type:"button"}}),this.closeIconBtnObj=new Qi({cssClass:"e-flat",iconCss:Bo+" e-icons"}),this.closeIconTitle(),m(this.headerContent)?(this.createHeaderContent(),Me([this.closeIcon],this.headerContent),this.element.insertBefore(this.headerContent,this.element.children[0])):Me([this.closeIcon],this.headerContent),this.closeIconBtnObj.appendTo(this.closeIcon))},t.prototype.closeIconTitle=function(){this.l10n.setLocale(this.locale);var e=this.l10n.getConstant("close");this.closeIcon.setAttribute("title",e),this.closeIcon.setAttribute("aria-label",e)},t.prototype.setCSSClass=function(e){e&&(Se([this.element],e.split(" ")),this.isModal&&!m(this.dlgContainer)&&Se([this.dlgContainer],e.split(" "))),this.cssClass&&(be([this.element],this.cssClass.split(" ")),this.isModal&&!m(this.dlgContainer)&&be([this.dlgContainer],this.cssClass.split(" ")))},t.prototype.setIsModal=function(){this.dlgContainer=this.createElement("div",{className:"e-dlg-container"}),this.setCSSClass(),this.element.classList.remove(Wo),this.element.parentNode.insertBefore(this.dlgContainer,this.element),this.dlgContainer.appendChild(this.element),be([this.element],Oo),this.dlgOverlay=this.createElement("div",{className:"e-dlg-overlay"}),this.dlgOverlay.style.zIndex=(this.zIndex-1).toString(),this.dlgContainer.appendChild(this.dlgOverlay)},t.prototype.getValidFocusNode=function(e){for(var t,i=0;i<e.length;i++){if(((t=e[i]).clientHeight>0||"a"===t.tagName.toLowerCase()&&t.hasAttribute("href"))&&t.tabIndex>-1&&!t.disabled&&!this.disableElement(t,'[disabled],[aria-disabled="true"],[type="hidden"]'))return t;t=null}return t},t.prototype.focusableElements=function(e){if(!m(e)){var t=e.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');return this.getValidFocusNode(t)}return null},t.prototype.getAutoFocusNode=function(e){var t=e.querySelector("."+Ho),i=e.querySelectorAll("[autofocus]"),n=this.getValidFocusNode(i);if(S()&&(this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0]),m(n)){if(!m(n=this.focusableElements(this.contentEle)))return n;if(!m(this.primaryButtonEle))return this.element.querySelector(".e-primary")}else t=n;return t},t.prototype.disableElement=function(e,t){var i=e?e.matches||e.webkitMatchesSelector||e.msGetRegionContent:null;if(i)for(;e;e=e.parentNode)if(e instanceof Element&&i.call(e,t))return e;return null},t.prototype.focusContent=function(){var e=this.getAutoFocusNode(this.element),t=m(e)?this.element:e,i=ge.userAgent;(i.indexOf("MSIE ")>0||i.indexOf("Trident/")>0)&&this.element.focus(),t.focus(),this.unBindEvent(this.element),this.bindEvent(this.element)},t.prototype.bindEvent=function(e){ye.add(e,"keydown",this.keyDown,this)},t.prototype.unBindEvent=function(e){ye.remove(e,"keydown",this.keyDown)},t.prototype.updateSanitizeContent=function(){this.isBlazorServerRender()||(this.contentEle.innerHTML=this.sanitizeHelper(this.content))},t.prototype.isBlazorServerRender=function(){return S()&&this.isServerRendered},t.prototype.getModuleName=function(){return"dialog"},t.prototype.onPropertyChanged=function(e,t){if(this.element.classList.contains(Do))for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"content":m(this.content)||""===this.content?m(this.contentEle)||(Ae(this.contentEle),this.contentEle=null):(this.isBlazorServerRender()&&(this.contentEle=this.element.querySelector(".e-dlg-content")),m(this.contentEle)||"dialog"===this.contentEle.getAttribute("role")?this.isBlazorServerRender()&&!m(this.element.querySelector(".e-dlg-content"))||this.setContent():(this.isBlazorServerRender()||(this.contentEle.innerHTML=""),"function"===typeof this.content?(this.clearTemplate(["content"]),Ae(this.contentEle),this.contentEle=null,this.setContent()):"string"===typeof this.content?this.isBlazorServerRender()&&""===this.contentEle.innerText?this.contentEle.insertAdjacentHTML("beforeend",this.sanitizeHelper(this.content)):this.updateSanitizeContent():this.contentEle.appendChild(this.content),this.setMaxHeight()));break;case"header":""===this.header||m(this.header)?this.headerEle&&(Ae(this.headerEle),this.headerEle=null):this.isBlazorServerRender()&&!m(this.element.querySelector(".e-dlg-header-content"))||this.setHeader();break;case"footerTemplate":if(""===this.footerTemplate||m(this.footerTemplate)){if(!this.ftrTemplateContent)return;Ae(this.ftrTemplateContent),this.ftrTemplateContent=null,this.buttons=[{}]}else this.isBlazorServerRender()&&!m(this.element.querySelector(".e-footer-content"))||this.setFooterTemplate(),this.buttons=[{}];break;case"showCloseIcon":this.element.getElementsByClassName(Bo).length>0?this.showCloseIcon||""!==this.header&&!m(this.header)?this.showCloseIcon?this.isBlazorServerRender()&&this.wireEvents():Ae(this.closeIcon):(Ae(this.headerContent),this.headerContent=null):(this.isBlazorServerRender()||this.renderCloseIcon(),this.wireEvents());break;case"locale":this.showCloseIcon&&this.closeIconTitle();break;case"visible":this.visible?this.show():this.hide();break;case"isModal":this.updateIsModal();break;case"height":Le(this.element,{height:b(e.height)});break;case"width":Le(this.element,{width:b(e.width)});break;case"zIndex":this.popupObj.zIndex=this.zIndex,this.isModal&&this.setOverlayZindex(this.zIndex),this.element.style.zIndex!==this.zIndex.toString()&&(this.calculatezIndex=!1);break;case"cssClass":this.setCSSClass(t.cssClass);break;case"buttons":var o=this.buttons.length;m(this.ftrTemplateContent)||this.isBlazorServerRender()||(Ae(this.ftrTemplateContent),this.ftrTemplateContent=null);for(var s=0;s<o;s++)m(this.buttons[s].buttonModel)||(this.footerTemplate="",this.setButton());break;case"allowDragging":this.allowDragging&&!m(this.headerContent)?this.setAllowDragging():this.dragObj.destroy();break;case"target":this.setTarget(e.target);break;case"position":if(this.checkPositionData(),this.isModal){var a=m(t.position.X)?this.position.X:t.position.X,r=m(t.position.Y)?this.position.Y:t.position.Y;this.dlgContainer.classList.contains("e-dlg-"+a+"-"+r)&&this.dlgContainer.classList.remove("e-dlg-"+a+"-"+r)}this.positionChange();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize();break;case"minHeight":""!==this.minHeight&&(this.element.style.minHeight=b(this.minHeight))}}},t.prototype.setTarget=function(e){this.popupObj.relateTo=e,this.target=e,this.targetEle="string"===typeof this.target?document.querySelector(this.target):this.target,this.dragObj&&(this.dragObj.dragArea=this.targetEle),this.setMaxHeight(),this.isModal&&this.updateIsModal(),this.enableResize&&this.setResize()},t.prototype.updateIsModal=function(){if(this.element.setAttribute("aria-modal",this.isModal?"true":"false"),this.isModal)m(this.dlgOverlay)&&(this.setIsModal(),this.element.style.top="0px",this.element.style.left="0px",m(this.targetEle)||this.targetEle.appendChild(this.dlgContainer));else{for(Se([this.element],Oo),Se([document.body],[zo,jo]),Ae(this.dlgOverlay);this.dlgContainer.firstChild;)this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild,this.dlgContainer);this.dlgContainer.parentElement.removeChild(this.dlgContainer)}this.visible&&this.show(),this.positionChange(),this.isModal&&this.dlgOverlay&&ye.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},t.prototype.setzIndex=function(e,t){var i=this.isProtectedOnChange;this.isProtectedOnChange=!0;var n=On(e);this.zIndex=n>this.zIndex?n:this.zIndex,this.isProtectedOnChange=i,t&&(this.popupObj.zIndex=this.zIndex)},t.prototype.windowResizeHandler=function(){var e;e=this.targetEle.clientWidth,Hn=e,function(e){Rn=e}(this.targetEle.clientHeight),this.setMaxHeight()},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.destroy=function(){if(!this.isDestroyed){var t=[No,Oo,Zo,Xo,_o,Ro],i=["role","aria-modal","aria-labelledby","aria-describedby","aria-grabbed","tabindex","style"];if(Se([this.targetEle],[zo,jo]),!m(this.element)&&this.element.classList.contains(_o)&&Se([document.body],[zo,jo]),this.isModal&&Se([m(this.targetEle)?document.body:this.targetEle],jo),this.unWireEvents(),!m(this.btnObj))for(var n=0;n<this.btnObj.length;n++)this.btnObj[n].destroy();if(m(this.closeIconBtnObj)||this.closeIconBtnObj.destroy(),m(this.dragObj)||this.dragObj.destroy(),!m(this.popupObj.element)&&this.popupObj.element.classList.contains("e-popup")&&this.popupObj.destroy(),Se([this.element],t),m(this.cssClass)||""===this.cssClass||Se([this.element],this.cssClass.split(" ")),m(this.refElement)||m(this.refElement.parentElement)||(this.refElement.parentElement.insertBefore(this.isModal?this.dlgContainer:this.element,this.refElement),Ae(this.refElement),this.refElement=void 0),this.isModal&&!this.isBlazorServerRender()&&(Ae(this.dlgOverlay),this.dlgContainer.parentNode.insertBefore(this.element,this.dlgContainer),Ae(this.dlgContainer)),this.isBlazorServerRender()||(this.element.innerHTML=this.clonedEle.innerHTML),this.isBlazorServerRender()&&!m(this.element.children))for(n=0;n<=this.element.children.length;n++)n-=n,Ae(this.element.children[n]);for(n=0;n<i.length;n++)this.element.removeAttribute(i[n]);this.isBlazorServerRender()?this.isDestroyed=!0:e.prototype.destroy.call(this),this.isReact&&this.clearTemplate()}},t.prototype.wireWindowResizeEvent=function(){window.addEventListener("resize",this.windowResizeHandler.bind(this))},t.prototype.unWireWindowResizeEvent=function(){window.removeEventListener("resize",this.windowResizeHandler.bind(this))},t.prototype.wireEvents=function(){this.isBlazorServerRender()&&this.showCloseIcon&&(this.closeIcon=this.element.getElementsByClassName("e-dlg-closeicon-btn")[0]),this.showCloseIcon&&ye.add(this.closeIcon,"click",this.closeIconClickEventHandler,this),this.isModal&&this.dlgOverlay&&ye.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},t.prototype.unWireEvents=function(){if(this.showCloseIcon&&ye.remove(this.closeIcon,"click",this.closeIconClickEventHandler),this.isModal&&ye.remove(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler),this.buttons.length>0&&!m(this.buttons[0].buttonModel)&&""===this.footerTemplate)for(var e=0;e<this.buttons.length;e++)"function"===typeof this.buttons[e].click&&ye.remove(this.ftrTemplateContent.children[e],"click",this.buttons[e].click)},t.prototype.refreshPosition=function(){this.popupObj.refreshPosition()},t.prototype.getDimension=function(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}},t.prototype.show=function(e){var t=this;if(this.element.classList.contains(Do)){if(!this.element.classList.contains(Wo)||!m(e)){m(e)||this.fullScreen(e);var i=S()?{cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,maxHeight:this.element.style.maxHeight}:{cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,target:this.target,maxHeight:this.element.style.maxHeight};this.trigger("beforeOpen",i,(function(e){if(!e.cancel){t.element.style.maxHeight!==i.maxHeight&&(t.allowMaxHeight=!1,t.element.style.maxHeight=i.maxHeight),t.storeActiveElement=document.activeElement,t.element.tabIndex=-1,t.isModal&&!m(t.dlgOverlay)&&(t.dlgOverlay.style.display="block",t.dlgContainer.style.display="flex",Se([t.dlgOverlay],"e-fade"),m(t.targetEle)?be([document.body],[zo,jo]):(t.targetEle===document.body?t.dlgContainer.style.position="fixed":t.dlgContainer.style.position="absolute",t.dlgOverlay.style.position="absolute",t.element.style.position="relative",be([t.targetEle],[zo,jo])));var n={name:t.animationSettings.effect+"In",duration:t.animationSettings.duration,delay:t.animationSettings.delay},o=t.isModal?t.element.parentElement:t.element;t.calculatezIndex&&(t.setzIndex(o,!0),Le(t.element,{zIndex:t.zIndex}),t.isModal&&t.setOverlayZindex(t.zIndex)),"None"===t.animationSettings.effect?t.popupObj.show():t.popupObj.show(n),t.dialogOpen=!0;var s=t.isProtectedOnChange;t.isProtectedOnChange=!0,t.visible=!0,t.preventVisibility=!0,t.isProtectedOnChange=s}}))}this.isReact&&this.renderReactTemplates()}},t.prototype.hide=function(e){var t=this;if(this.element.classList.contains(Do)&&this.preventVisibility){var i=S()?{cancel:!1,isInteracted:!!e,element:this.element,container:this.isModal?this.dlgContainer:this.element,event:e}:{cancel:!1,isInteracted:!!e,element:this.element,target:this.target,container:this.isModal?this.dlgContainer:this.element,event:e,closedBy:this.dlgClosedBy};this.closeArgs=i,this.trigger("beforeClose",i,(function(e){if(!e.cancel){t.isModal&&(m(t.targetEle)||Se([t.targetEle],[zo,jo])),document.body.classList.contains(zo)&&document.body.classList.contains(jo)&&Se([document.body],[zo,jo]);var i={name:t.animationSettings.effect+"Out",duration:t.animationSettings.duration,delay:t.animationSettings.delay};"None"===t.animationSettings.effect?t.popupObj.hide():t.popupObj.hide(i),t.dialogOpen=!1;var n=t.isProtectedOnChange;t.isProtectedOnChange=!0,t.visible=!1,t.preventVisibility=!1,t.isProtectedOnChange=n}t.dlgClosedBy=Jo}))}},t.prototype.fullScreen=function(e){this.element.offsetTop,this.element.offsetLeft;if(e){this.element.style.top=document.scrollingElement.scrollTop+"px",be([this.element],_o);var t=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=m(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px",this.element.style.display=t,be([document.body],[zo,jo]),this.allowDragging&&!m(this.dragObj)&&this.dragObj.destroy()}else Se([this.element],_o),Se([document.body],[zo,jo]),this.allowDragging&&!m(this.headerContent)&&this.setAllowDragging();return e},t.prototype.getButtons=function(e){return m(e)?this.btnObj:this.btnObj[e]},ko([Ge("")],t.prototype,"content",void 0),ko([Ge(!0)],t.prototype,"enableHtmlSanitizer",void 0),ko([Ge(!1)],t.prototype,"showCloseIcon",void 0),ko([Ge(!1)],t.prototype,"isModal",void 0),ko([Ge("")],t.prototype,"header",void 0),ko([Ge(!0)],t.prototype,"visible",void 0),ko([Ge(!1)],t.prototype,"enableResize",void 0),ko([Ge(["South-East"])],t.prototype,"resizeHandles",void 0),ko([Ge("auto")],t.prototype,"height",void 0),ko([Ge("")],t.prototype,"minHeight",void 0),ko([Ge("100%")],t.prototype,"width",void 0),ko([Ge("")],t.prototype,"cssClass",void 0),ko([Ge(1e3)],t.prototype,"zIndex",void 0),ko([Ge(null)],t.prototype,"target",void 0),ko([Ge("")],t.prototype,"footerTemplate",void 0),ko([Ge(!1)],t.prototype,"allowDragging",void 0),ko([Ke([{}],Vo)],t.prototype,"buttons",void 0),ko([Ge(!0)],t.prototype,"closeOnEscape",void 0),ko([Je({},Eo)],t.prototype,"animationSettings",void 0),ko([Je({X:"center",Y:"center"},Vn)],t.prototype,"position",void 0),ko([$e()],t.prototype,"created",void 0),ko([$e()],t.prototype,"open",void 0),ko([$e()],t.prototype,"beforeSanitizeHtml",void 0),ko([$e()],t.prototype,"beforeOpen",void 0),ko([$e()],t.prototype,"close",void 0),ko([$e()],t.prototype,"beforeClose",void 0),ko([$e()],t.prototype,"dragStart",void 0),ko([$e()],t.prototype,"dragStop",void 0),ko([$e()],t.prototype,"drag",void 0),ko([$e()],t.prototype,"overlayClick",void 0),ko([$e()],t.prototype,"resizeStart",void 0),ko([$e()],t.prototype,"resizing",void 0),ko([$e()],t.prototype,"resizeStop",void 0),ko([$e()],t.prototype,"destroyed",void 0),t=ko([et],t)}(Dt);!function(e){function t(e,t){var i=new Ko(e);return i.appendTo(t),i}function i(e,t){return e.header=m(t.title)?Uo:t.title,e.content=m(t.content)?"":t.content,e.isModal=!!m(t.isModal)||t.isModal,e.showCloseIcon=!m(t.showCloseIcon)&&t.showCloseIcon,e.allowDragging=!m(t.isDraggable)&&t.isDraggable,e.closeOnEscape=!m(t.closeOnEscape)&&t.closeOnEscape,e.position=m(t.position)?{X:"center",Y:"top"}:t.position,e.animationSettings=m(t.animationSettings)?{effect:"Fade",duration:400,delay:0}:t.animationSettings,e.cssClass=m(t.cssClass)?"":t.cssClass,e.zIndex=m(t.zIndex)?1e3:t.zIndex,e.open=m(t.open)?null:t.open,e.width=m(t.width)?"auto":t.width,e.height=m(t.height)?"auto":t.height,e}function n(e,t,i){var n=i;return m(t.text)||(n.buttonModel.content=t.text),m(t.icon)||(n.buttonModel.iconCss=t.icon),m(t.cssClass)||(n.buttonModel.cssClass=t.cssClass),m(t.click)||(n.click=t.click),n}e.alert=function(e){var o,s=we("div",{className:Yo});return document.body.appendChild(s),(o=t("string"===typeof e?{content:e,position:{X:"center",Y:"top"},isModal:!0,header:Uo,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}]}:function(e){var t={buttons:[]};return t=function(e,t){var i=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}];m(t.okButton)?e.buttons=i:e.buttons[0]=n(e.buttons[0],t.okButton,i[0]);return e}(t=i(t,e),e)}(e),s)).close=function(){e&&e.close&&e.close.apply(o),o.destroy(),o.element.classList.contains("e-dlg-modal")?(o.element.parentElement.remove(),o.target.classList.remove(qo)):o.element.remove()},o},e.confirm=function(e){var o,s=we("div",{className:Qo});return document.body.appendChild(s),(o=t("string"===typeof e?{position:{X:"center",Y:"top"},content:e,isModal:!0,header:Uo,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},{buttonModel:{content:"Cancel"},click:function(){this.hide()}}]}:function(e){var t={buttons:[]};return t=function(e,t){var i={buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},o={buttonModel:{content:"Cancel"},click:function(){this.hide()}};m(t.okButton)?e.buttons[0]=i:e.buttons[0]=n(e.buttons[0],t.okButton,i);m(t.cancelButton)?e.buttons[1]=o:e.buttons[1]=n(e.buttons[1],t.cancelButton,o);return e}(t=i(t,e),e)}(e),s)).close=function(){e&&e.close&&e.close.apply(o),o.destroy(),o.element.classList.contains("e-dlg-modal")?(o.element.parentElement.remove(),o.target.classList.remove(qo)):o.element.remove()},o}}(To||(To={}));var $o=function(){function e(e,t){var i=this;this.textBoundsArray=[],this.characterBound=[],this.closeNotification=function(){i.notifyDialog.hide()},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.addTextLayer=function(e,t,i,n){var o;return document.getElementById(this.pdfViewer.element.id+"_textLayer_"+e)||((o=we("div",{id:this.pdfViewer.element.id+"_textLayer_"+e,className:"e-pv-text-layer"})).style.width=t+"px",o.style.height=i+"px",n&&n.appendChild(o)),this.pdfViewerBase.applyElementStyles(o,e),o},e.prototype.renderTextContents=function(e,t,i,n,o){var s,a,r=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+e),l=we("canvas"),d=[],h=[];i.length>1&&(0===i[0].Width&&i.length>2?(s=i[1].Y,a=i[1].Height):(s=i[0].Y,a=i[0].Height));var p=0;if(l&&r&&0===r.childNodes.length)for(var c=0;c<t.length;c++)if(t[c].includes("\r\n")||t[c].includes("\x02")||c==i.length-1||0!==n||o){d.push(i[parseInt(c.toString(),10)]),h.push(t[parseInt(c.toString(),10)]),s>i[parseInt(c.toString(),10)].Y&&0!==i[parseInt(c.toString(),10)].Width&&(s=i[parseInt(c.toString(),10)].Y),a<i[parseInt(c.toString(),10)].Height&&0!==i[parseInt(c.toString(),10)].Width&&(a=i[parseInt(c.toString(),10)].Height);for(var u=0;u<d.length;u++){var f=d[parseInt(u.toString(),10)],g=we("div",{id:this.pdfViewer.element.id+"_text_"+e+"_"+p,className:"e-pv-text",attrs:{tabindex:"-1"}}),y=h[parseInt(u.toString(),10)];" "===y&&u!=d.length-1&&0!=u&&(f.Height=d[u-1].Height,f.Y=d[u-1].Y),g.textContent=y.replace(/&nbsp;/g," ")," "!==h[u].replace(/  +/g," ")&&(g.style.whiteSpace="pre"),0===f.Width&&u!=d.length-1&&0!=u&&d[u+1].X-(d[u-1].X+d[u-1].Width)<30&&!h[u-1].includes("\r\n")&&!t[parseInt(u.toString(),10)].includes("\x02")&&(f.Width=d[u+1].X-(d[u-1].X+d[u-1].Width),f.X=d[u-1].X+d[u-1].Width,f.Width<0?f.Width=0:g.style.whiteSpace="pre"),(0!=u||d.length-1===0||f.Y-s>20&&0!=f.Width)&&0!=p&&(i[p-1].Y-i[parseInt(p.toString(),10)].Y>11||i[parseInt(p.toString(),10)].Y-i[p-1].Y>11)&&" "!=h[parseInt(u.toString(),10)]&&(s=d[parseInt(u.toString(),10)].Y,a=d[parseInt(u.toString(),10)].Height),f&&(f.Y=s,f.Height=a,this.setStyleToTextDiv(g,f.X,f.Y,f.Bottom,f.Width,f.Height)),this.setTextElementProperties(g);var v=l.getContext("2d");v.font=g.style.fontSize+" "+g.style.fontFamily;var w=v.measureText(h[parseInt(u.toString(),10)].replace(/(\r\n|\n|\r)/gm,"")).width;if(f){var b=f.Width*this.pdfViewerBase.getZoomFactor()/w;this.applyTextRotation(b,g,n,f.Rotation)}r.appendChild(g),this.resizeExcessDiv(r,g),this.pdfViewer.textSelectionModule&&this.pdfViewer.enableTextSelection&&!this.pdfViewerBase.isTextSelectionDisabled&&"e-pdfviewer-formFields"!==g.className&&"e-pdfviewer-signatureformfields"!==g.className&&"e-pdfviewer-signatureformfields-signature"!==g.className&&g.classList.add("e-pv-cursor"),p++}d=[],h=[],c<i.length-1&&(0!==i[c+1].Width||m(i[c+2])?(s=i[c+1].Y,a=i[c+1].Height):(s=i[c+2].Y,a=i[c+2].Height))}else d.push(i[parseInt(c.toString(),10)]),h.push(t[parseInt(c.toString(),10)]),s>i[parseInt(c.toString(),10)].Y&&0!==i[parseInt(c.toString(),10)].Width&&(s=i[parseInt(c.toString(),10)].Y),a<i[parseInt(c.toString(),10)].Height&&0!==i[parseInt(c.toString(),10)].Width&&(a=i[parseInt(c.toString(),10)].Height)},e.prototype.resizeTextContents=function(e,t,i,n,o){var s=this.pdfViewerBase.getElement("_textLayer_"+e),a=we("canvas");if(a)for(var r=0;r<s.childNodes.length;r++){var l=void 0,d=this.pdfViewerBase.getElement("_text_"+e+"_"+r);if(m(d))break;i&&(l=i[parseInt(r.toString(),10)])&&this.setStyleToTextDiv(d,l.X,l.Y,l.Bottom,l.Width,l.Height),this.setTextElementProperties(d);var h=a.getContext("2d");h.font=d.style.fontSize+" "+d.style.fontFamily;var p=void 0;if(t){var c=t[parseInt(r.toString(),10)];c&&(p=h.measureText(c.replace(/(\r\n|\n|\r)/gm,"")).width)}else p=h.measureText(d.textContent.replace(/(\r\n|\n|\r)/gm,"")).width;if(l){var u=l.Width*this.pdfViewerBase.getZoomFactor()/p;this.applyTextRotation(u,d,n,l.Rotation)}this.resizeExcessDiv(s,d)}else s.parentElement.removeChild(s);this.pdfViewer.textSearch&&(o||this.pdfViewer.textSearch.resizeSearchElements(e))},e.prototype.applyTextRotation=function(e,t,i,n){var o="scaleX("+e+")";0===i?t.style.transform=n>=0&&n<=90?o:"rotate("+n+"deg) "+o:1===i?t.style.transform=0===n?"rotate(90deg) "+o:-90===n?o:"rotate("+n+"deg) "+o:2===i?t.style.transform=0===n?"rotate(180deg) "+o:180===n?o:"rotate("+n+"deg) "+o:3===i&&(t.style.transform=0===n?"rotate(-90deg) "+o:90===n?o:"rotate("+n+"deg) "+o)},e.prototype.setTextElementProperties=function(e){e.style.fontFamily="serif",e.style.transformOrigin="0%"},e.prototype.resizeTextContentsOnZoom=function(e){var t,i=window.sessionStorage.getItem(this.pdfViewerBase.getDocumentId()+"_"+e+"_"+this.getPreviousZoomFactor()),n=[],o=[];if(i){var s=JSON.parse(i);n=s.textBounds,o=s.textContent,t=s.rotation}if(0!==n.length)this.textBoundsArray.push({pageNumber:e,textBounds:n}),this.resizeTextContents(e,o,n,t);else{var a=this.textBoundsArray.filter((function(t){return t.pageNumber===e}));a&&0!==a.length&&(n=a[0].textBounds,this.resizeTextContents(e,null,n,t))}},e.prototype.resizeExcessDiv=function(e,t){var i=e.getBoundingClientRect(),n=t.getBoundingClientRect();(n.width+n.left>=i.width+i.left||n.width>i.width)&&(t.style.width="auto",t.style.width=t.clientWidth+"px")},e.prototype.clearTextLayers=function(e){var t=this.pdfViewerBase.currentPageNumber-3;t=t>0?t:0;var i=this.pdfViewerBase.currentPageNumber+1;i=i<this.pdfViewerBase.pageCount?i:this.pdfViewerBase.pageCount-1;for(var n=document.querySelectorAll('div[id*="'+this.pdfViewer.element.id+'_textLayer_"]'),o=0;o<n.length;o++)if(n[parseInt(o.toString(),10)].style.display="block",this.pdfViewerBase.getMagnified()&&(this.getTextSelectionStatus()||this.getTextSearchStatus())){var s=parseInt(n[parseInt(o.toString(),10)].id.split("_textLayer_")[1]);t+1<=s&&s<=i-1||this.removeElement(n[parseInt(o.toString(),10)],e)}else this.pdfViewerBase.getPinchZoomed(),this.removeElement(n[parseInt(o.toString(),10)],e)},e.prototype.removeElement=function(e,t){t?this.removeForeignObjects(e):ge.isIE?e.parentElement?e.parentElement.removeChild(e):e.parentNode&&e.parentNode.removeChild(e):e.remove()},e.prototype.removeForeignObjects=function(e){var t=e.getElementsByClassName("foreign-object");if(t)for(var i=0;i<t.length;i++)if(ge.isDevice){if("e-pv-text-layer"===t[parseInt(i.toString(),10)].parentElement.className&&"e-pv-checkbox-outer-div"!==t[0].parentElement.className)e.removeChild(t[0]);else if("e-pv-checkbox-outer-div"===t[parseInt(i.toString(),10)].parentElement.className){var n=document.getElementById(t[0].parentElement.id);n&&n.parentElement.remove()}}else"e-pv-text-layer"===t[parseInt(i.toString(),10)].parentElement.className&&e.removeChild(t[0])},e.prototype.convertToSpan=function(e,t,i,n,o,s){var a=this.pdfViewerBase.getElement("_text_"+e+"_"+t),r=o.substring(i,n),l=document.createTextNode(r);if(s){var d=we("span");d.className=s+" e-pv-text",d.appendChild(l),a.appendChild(d)}else a.appendChild(l)},e.prototype.applySpanForSelection=function(e,t,i,n,o,s){if(this.pdfViewer.textSelectionModule)for(var a=e;a<=t;a++){var r=void 0,l=void 0,d=this.pdfViewerBase.getElement("_textLayer_"+a).childNodes;a===e?(r=i,l=d.length-1):a===t?(r=0,l=n):(r=0,l=d.length-1),e===t&&(r=i,l=n);for(var h=r;h<=l;h++){var p=this.pdfViewerBase.getElement("_text_"+a+"_"+h),c=void 0,u=void 0,f=void 0;if(p&&p.textContent){f=p.textContent.length;var m=p.textContent;p.textContent="",h===r?(c=a===e?o:0,u=f,this.convertToSpan(a,h,0,c,m,null)):h===l&&a===t?(c=0,u=s):(c=0,u=f),r===l&&e===t&&(c=o,u=s),this.convertToSpan(a,h,c,u,m,"e-pv-maintaincontent"),h===l&&a===t&&this.convertToSpan(a,h,u,m.length,m,null)}}}},e.prototype.clearDivSelection=function(){for(var e=document.querySelectorAll('div[id*="'+this.pdfViewer.element.id+'_textLayer_"]'),t=0;t<e.length;t++)for(var i=e[parseInt(t.toString(),10)].childNodes,n=0;n<i.length;n++){var o=i[parseInt(n.toString(),10)];if("e-pdfviewer-formFields"!==o.className&&"e-pdfviewer-signatureformfields"!==o.className&&"e-pdfviewer-signatureformfields-signature"!==o.className){var s=o.textContent;(o.childNodes.length>1||1===o.childNodes.length&&"SPAN"===o.childNodes[0].tagName)&&(o.textContent="",o.textContent=s)}}},e.prototype.setStyleToTextDiv=function(e,t,i,n,o,s){e.style.left=t*this.pdfViewerBase.getZoomFactor()+"px",e.style.top=i*this.pdfViewerBase.getZoomFactor()+"px";var a=s*this.pdfViewerBase.getZoomFactor();e.style.height=a+"px",e.style.fontSize=s*this.pdfViewerBase.getZoomFactor()+"px"},e.prototype.getTextSelectionStatus=function(){return!!this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.isTextSelection},e.prototype.modifyTextCursor=function(e){for(var t=document.querySelectorAll('div[id*="'+this.pdfViewer.element.id+'_textLayer_"]'),i=0;i<t.length;i++)for(var n=t[parseInt(i.toString(),10)].childNodes,o=0;o<n.length;o++){var s=n[parseInt(o.toString(),10)];e&&"e-pdfviewer-formFields"!==s.className&&"e-pdfviewer-signatureformfields"!==s.className&&"e-pdfviewer-signatureformfields-signature"!==s.className?s.classList.add("e-pv-cursor"):s.classList.remove("e-pv-cursor")}},e.prototype.isBackWardSelection=function(e){var t=e.anchorNode.compareDocumentPosition(e.focusNode),i=!1;return(!t&&e.anchorOffset>e.focusOffset||t===Node.DOCUMENT_POSITION_PRECEDING)&&(i=!0),i},e.prototype.getPageIndex=function(e){var t=e.parentElement;return t||(t=e.parentNode),"e-pv-text-layer"===t.className?parseInt(e.id.split("_text_")[1]):parseInt(t.id.split("_text_")[1])},e.prototype.getTextIndex=function(e,t){var i=e.parentElement;return i||(i=e.parentNode),"e-pv-text-layer"===i.className?parseInt(e.id.split("_text_"+t+"_")[1]):parseInt(i.id.split("_text_"+t+"_")[1])},e.prototype.getPreviousZoomFactor=function(){return this.pdfViewer.magnificationModule?this.pdfViewer.magnificationModule.previousZoomFactor:1},e.prototype.getTextSearchStatus=function(){return!!this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.isTextSearch},e.prototype.createNotificationPopup=function(e){var t=this;if(!this.isMessageBoxOpen)if(S()){var i=document.getElementById(this.pdfViewer.element.id+"_notification_popup_content");i&&(i.textContent=e,i.innerHTML=e),this.pdfViewer.textSearchModule&&(this.pdfViewer.textSearch.isMessagePopupOpened=!1),this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenNotificationPopup",e)}else{var n=we("div",{id:this.pdfViewer.element.id+"_notify",className:"e-pv-notification-popup"});this.pdfViewerBase.viewerContainer.appendChild(n),this.notifyDialog=new Ko({showCloseIcon:!0,closeOnEscape:!1,isModal:!0,header:this.pdfViewer.localeObj.getConstant("PdfViewer"),buttons:[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.closeNotification.bind(this)}],content:'<div class="e-pv-notification-popup-content" tabindex = "0">'+e+"</div>",target:this.pdfViewer.element,beforeClose:function(){if(t.notifyDialog.destroy(),t.pdfViewer.element)try{t.pdfViewer.element.removeChild(n)}catch(e){n.parentElement.removeChild(n)}t.pdfViewer.textSearchModule&&(t.pdfViewer.textSearch.isMessagePopupOpened=!1),t.isMessageBoxOpen=!1}}),this.pdfViewer.enableRtl&&(this.notifyDialog.enableRtl=!0),this.notifyDialog.appendTo(n),this.isMessageBoxOpen=!0}},e}();function es(e){var t,i=[],n=function(e){var t=/([a-z]+)|([+-]?(?:\d+\.?\d*|\.\d+))/gi,i=[],n=[],o={};t.lastIndex=0;var s=!1;o=t.exec(e);for(;o;){if("e"===o[1]){s=!0}else o[1]?("zm"===o[1].toLowerCase()?(i.length&&n.push(i),n.push(["Z"]),i=[o[1].substring(1,2)]):(i.length&&n.push(i),i=[o[1]]),s=!1):(i.length||(i=[]),s||i.push(Number(o[2])),s=!1);o=t.exec(e)}i.length&&n.push(i);return n}(e);if(n.length>0)for(var o=0;o<n.length;o++){var s=n[o],a="";switch((a=s[0]).toLowerCase()){case"m":for(t=1;t<s.length;t++)i.push({command:a,x:s[t],y:s[t+1]}),t+=1,"m"===a?a="l":"M"===a&&(a="L");break;case"l":case"t":for(t=1;t<s.length;t++)i.push({command:a,x:s[t],y:s[t+1]}),t+=1;break;case"h":for(t=1;t<s.length;t++)i.push({command:a,x:s[t]});break;case"v":for(t=1;t<s.length;t++)i.push({command:a,y:s[t]});break;case"z":i.push({command:a});break;case"c":for(t=1;t<s.length;t++)i.push({command:a,x1:s[t],y1:s[t+1],x2:s[t+2],y2:s[t+3],x:s[t+4],y:s[t+5]}),t+=5;break;case"s":for(t=1;t<s.length;t++)i.push({command:a,x2:s[t],y2:s[t+1],x:s[t+2],y:s[t+3]}),t+=3;break;case"q":for(t=1;t<s.length;t++)i.push({command:a,x1:s[t],y1:s[t+1],x:s[t+2],y:s[t+3]}),t+=3;break;case"a":for(t=1;t<s.length;t++)i.push({command:a,r1:s[t],r2:s[t+1],angle:s[t+2],largeArc:s[t+3],sweep:s[t+4],x:s[t+5],y:s[t+6]}),t+=6}}return i}function ts(e){var t,i,n,o,s,a,r,l,d,h,p=[];for(r=0,l=0,h=0,d=e.length;h<d;++h){var c,u=e[h];c=u.command,"y1"in u&&(o=u.y1),"y2"in u&&(a=u.y2),"x1"in u&&(n=u.x1),"x2"in u&&(s=u.x2),"x"in u&&(r=u.x),"y"in u&&(l=u.y);var f=p[p.length-1];switch(c){case"M":p.push({command:"M",x:r,y:l});break;case"L":p.push({command:"L",x0:t,y0:i,x:r,y:l});break;case"H":p.push({command:"L",x0:t,y0:i,x:r,y:i});break;case"V":p.push({command:"L",x0:t,y0:i,x:t,y:l});break;case"C":p.push({command:"C",x0:t,y0:i,x1:n,y1:o,x2:s,y2:a,x:r,y:l});break;case"S":if(f){var m=void 0,g={x:2*t-(m="C"===f.command||"S"===f.command?{x:f.x2,y:f.y2}:{x:t,y:i}).x,y:2*i-m.y};p.push({command:"C",x0:t,y0:i,x1:g.x,y1:g.y,x2:s,y2:a,x:r,y:l})}break;case"Q":p.push({command:"Q",x0:t,y0:i,x1:n,y1:o,x:r,y:l});break;case"T":if(f){m=void 0,g={x:2*t-(m="Q"===f.command?{x:f.x1,y:f.y1}:{x:t,y:i}).x,y:2*i-m.y};p.push({command:"Q",x0:t,y0:i,x1:g.x,y1:g.y,x:r,y:l})}break;case"A":var y=u;y.command="A",p.push(y);break;case"Z":case"z":p.push({command:"Z"}),r=t,l=i}"M"!==c&&"m"!==c||(r,l),t=r,i=l}return p}function is(e,t,i,n,o,s){switch(t){case"M":case"L":case"T":e.x=i.x,e.y=i.y;break;case"H":e.x=i.x;break;case"V":e.y=i.y;break;case"C":e.x=i.x,e.y=i.y,e.x1=i.x1,e.y1=i.y1,e.x2=i.x2,e.y2=i.y2;break;case"S":e.x=i.x,e.y=i.y,e.x2=i.x2,e.y2=i.y2;break;case"Q":e.x=i.x,e.y=i.y,e.x1=i.x1,e.y1=i.y1;break;case"A":var a=i.r1,r=i.r2;n&&(i.r1=a*=o,i.r2=r*=s),e.x=i.x,e.y=i.y,e.r1=i.r1,e.r2=i.r2;break;case"z":case"Z":e={command:"Z"}}return e}function ns(e,t,i,n){return e!==i?e=n!==i?e*t-(Number(i)*t-Number(i))+(n-Number(i)):Number(e)*t-(Number(i)*t-Number(i)):n!==i&&(e=n),Number(e.toFixed(2))}function os(e){var t,i,n,o,s,a,r,l,d,h;for(r=0,l=0,h=0,d=e.length;h<d;++h){var p=e[h],c=p.command;if(/[MLHVCSQTA]/.test(c))"x"in p&&(p.x=r=p.x),"y"in p&&(p.y=l=p.y);else{"x1"in p&&(p.x1=n=r+p.x1),"x2"in p&&(p.x2=s=r+p.x2),"y1"in p&&(p.y1=o=l+p.y1),"y2"in p&&(p.y2=a=l+p.y2),"x"in p&&(p.x=r+=p.x),"y"in p&&(p.y=l+=p.y);var u=void 0;switch(c){case"m":case"M":u={command:"M",x:r,y:l};break;case"l":case"L":u={command:"L",x:r,y:l};break;case"h":case"H":u={command:"H",x:r};break;case"v":case"V":u={command:"V",y:l};break;case"c":case"C":u={command:"C",x:r,y:l,x1:n,y1:o,x2:s,y2:a};break;case"s":case"S":u={command:"S",x:r,y:l,x2:s,y2:a};break;case"q":case"Q":u={command:"Q",x:r,y:l,x1:n,y1:o};break;case"t":case"T":u={command:"T",x:r,y:l};break;case"a":case"A":(u={command:"A",x:r,y:l}).r1=p.r1,u.r2=p.r2,u.angle=p.angle,u.largeArc=p.largeArc,u.sweep=p.sweep;break;case"z":case"Z":u={command:"Z"},r=t,l=i,u=e[h]}u&&(e[h]=u)}"M"!==c&&"m"!==c||(t=r,i=l)}return e}function ss(e){var t,i="";for(t=0;t<e.length;t++)i+=0===t?as(e[t]):" "+as(e[t]);return i}function as(e){var t="";switch(e.command){case"Z":case"z":t=e.command;break;case"M":case"m":case"L":case"l":case"T":case"t":t=e.command+" "+e.x+" "+e.y;break;case"C":case"c":t=e.command+" "+e.x1+" "+e.y1+" "+e.x2+" "+e.y2+" "+e.x+" "+e.y;break;case"Q":case"q":t=e.command+" "+e.x1+" "+e.y1+" "+e.x+" "+e.y;break;case"A":case"a":var i=e.command,n=e.angle,o=e.largeArc?"1":"0",s=e.sweep?"1":"0";t=i+" "+e.r1+" "+e.r2+" "+n+" "+o+" "+s+" "+e.x+" "+e.y;break;case"H":case"h":t=e.command+" "+e.x;break;case"V":case"v":t=e.command+" "+e.y;break;case"S":case"s":t=e.command+" "+e.x2+" "+e.y2+" "+e.x+" "+e.y}return t}var rs,ls="e-rtl",ds="e-disabled",hs="e-input",ps="e-multi-line-input",cs="e-input-group",us="e-float-input",fs="e-float-line",ms="e-float-text",gs="e-float-text-content",ys="e-clear-icon",vs="e-clear-icon-hide",ws="e-label-top",bs="e-label-bottom",Ss="e-no-float-label",Cs="e-input-custom-tag",xs="e-float-custom-tag";!function(e){var t,i=!0;function n(i){o(i.floatLabelType,i.element),i.element.addEventListener("focus",(function(){var t=c(this);(t.classList.contains("e-input-group")||t.classList.contains("e-outline")||t.classList.contains("e-filled"))&&t.classList.add("e-input-focus"),setTimeout((function(){e.calculateWidth(i.element,t)}),80)})),i.element.addEventListener("blur",(function(){var t=c(this);(t.classList.contains("e-input-group")||t.classList.contains("e-outline")||t.classList.contains("e-filled"))&&t.classList.remove("e-input-focus"),setTimeout((function(){e.calculateWidth(i.element,t)}),80)})),i.element.addEventListener("input",(function(){o(t,i.element)}))}function o(e,t){var i=t.value;""!==i&&!m(i)&&t.parentElement?t.parentElement.classList.add("e-valid-input"):"Always"!==e&&t.parentElement&&t.parentElement.classList.remove("e-valid-input")}function s(){var e=c(this).getElementsByClassName("e-float-text")[0];m(e)||(be([e],ws),e.classList.contains(bs)&&Se([e],bs))}function a(){var e=c(this);if(e.getElementsByTagName("textarea")[0]?""===e.getElementsByTagName("textarea")[0].value:""===e.getElementsByTagName("input")[0].value){var t=e.getElementsByClassName("e-float-text")[0];m(t)||(t.classList.contains(ws)&&Se([t],ws),be([t],bs))}}function r(e){e.addEventListener("focus",s),e.addEventListener("blur",a)}function l(e,t,i){var n=m(i)?we:i;"Auto"===e.floatLabelType&&r(e.element),m(t.container)?(t.container=g(e,us,xs,"div",n),e.element.parentNode&&e.element.parentNode.insertBefore(t.container,e.element)):(m(e.customTag)||t.container.classList.add(xs),t.container.classList.add(us));var o=n("span",{className:fs}),s=n("label",{className:ms});if(m(e.element.id)||""===e.element.id||(s.id="label_"+e.element.id.replace(/ /g,"_"),Ve(e.element,{"aria-labelledby":s.id})),m(e.element.placeholder)||""===e.element.placeholder||(s.innerText=y(e.element.placeholder),e.element.removeAttribute("placeholder")),m(e.properties)||m(e.properties.placeholder)||""===e.properties.placeholder||(s.innerText=y(e.properties.placeholder)),s.innerText||t.container.classList.add(Ss),t.container.classList.contains("e-float-icon-left")){var a=t.container.querySelector(".e-input-in-wrap");a.appendChild(e.element),a.appendChild(o),a.appendChild(s)}else t.container.appendChild(e.element),t.container.appendChild(o),t.container.appendChild(s);p(e.element.value,s),"Always"===e.floatLabelType&&(s.classList.contains(bs)&&Se([s],bs),be([s],ws)),"Auto"===e.floatLabelType&&(e.element.addEventListener("input",(function(t){p(e.element.value,s,e.element)})),e.element.addEventListener("blur",(function(t){p(e.element.value,s)}))),m(e.element.getAttribute("id"))||s.setAttribute("for",e.element.getAttribute("id"))}function d(e,t){"Always"===e&&t.classList.contains("e-outline")&&t.classList.add("e-valid-input")}function h(e,t,i){e&&!i?Se([t],vs):be([t],vs)}function p(e,t,i){(void 0===i&&(i=null),e)?(be([t],ws),t.classList.contains(bs)&&Se([t],bs)):(null==i||i!==document.activeElement)&&(t.classList.contains(ws)&&Se([t],ws),be([t],bs))}function c(e){var t=m(e.parentNode)?e:e.parentNode;return t&&t.classList.contains("e-input-in-wrap")&&(t=t.parentNode),t}function u(e,t,n){(void 0==i||i)&&t.addEventListener("click",(function(i){e.classList.contains(ds)||e.readOnly||(i.preventDefault(),e!==document.activeElement&&e.focus(),e.value="",be([t],vs))})),e.addEventListener("input",(function(i){h(e.value,t)})),e.addEventListener("focus",(function(i){h(e.value,t,e.readOnly)})),e.addEventListener("blur",(function(e){setTimeout((function(){be([t],vs)}),200)}))}function f(e,t){if(c(e).classList.contains(us)&&"Auto"===t){var i=c(e).getElementsByClassName("e-float-text")[0];p(e.value,i,e)}}function g(e,t,i,n,o){var s,a=m(o)?we:o;return m(e.customTag)?s=a(n,{className:t}):(s=a(e.customTag,{className:t})).classList.add(i),s.classList.add("e-control-wrapper"),s}function y(e){var t="";if(!m(e)&&""!==e){var i=document.createElement("span");i.innerHTML='<input  placeholder="'+e+'"/>',t=i.children[0].placeholder}return t}function v(e,t,i){m(i)||""===i||Se(t,i.split(" ")),m(e)||""===e||be(t,e.split(" "))}function w(e,t,i){var n="multiselect"===i?e:e.clientWidth-parseInt(getComputedStyle(e,null).getPropertyValue("padding-left"));m(t.getElementsByClassName("e-float-text-content")[0])||(t.getElementsByClassName("e-float-text-content")[0].classList.contains("e-float-text-overflow")&&t.getElementsByClassName("e-float-text-content")[0].classList.remove("e-float-text-overflow"),(n<t.getElementsByClassName("e-float-text-content")[0].clientWidth||n===t.getElementsByClassName("e-float-text-content")[0].clientWidth)&&t.getElementsByClassName("e-float-text-content")[0].classList.add("e-float-text-overflow"))}function S(e,t){e=y(e);var i=c(t);i.classList.contains(us)?m(e)||""===e?(i.classList.add(Ss),i.getElementsByClassName("e-float-text-content")[0]?i.getElementsByClassName(ms)[0].children[0].textContent="":i.getElementsByClassName(ms)[0].textContent=""):(i.getElementsByClassName("e-float-text-content")[0]?i.getElementsByClassName(ms)[0].children[0].textContent=e:i.getElementsByClassName(ms)[0].textContent=e,i.classList.remove(Ss),t.removeAttribute("placeholder")):m(e)||""===e?t.removeAttribute("placeholder"):Ve(t,{placeholder:e})}function C(e,t,i){e?Ve(t,{readonly:""}):t.removeAttribute("readonly"),m(i)||f(t,i)}function x(e,t){e?be(t,ls):Se(t,ls)}function M(e,t,i,n){var o={disabled:"disabled","aria-disabled":"true"},s=!m(n);e?(t.classList.remove(ds),T(o,t),s&&Se([n],ds)):(t.classList.add(ds),A(o,t),s&&be([n],ds)),m(i)||f(t,i)}function I(e,t,i,n,o){var s=m(o)?we:o;e?i.clearButton=function(e,t,i,n){var o=(m(n)?we:n)("span",{className:ys}),s=t.container;return m(i)?(t.container.classList.contains(us)?t.container.querySelector("."+ms):e).insertAdjacentElement("afterend",o):s.appendChild(o),!m(s)&&s.classList.contains(us)&&be([s],cs),be([o],vs),u(e,o),o.setAttribute("aria-label","close"),o}(t,i,n,s):(ke(i.clearButton),i.clearButton=null)}function T(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){var o=n[i],s=c(t);"disabled"===o&&t.classList.remove(ds),"disabled"===o&&s.classList.contains(cs)&&s.classList.remove(ds),"placeholder"===o&&s.classList.contains(us)?s.getElementsByClassName(ms)[0].textContent="":t.removeAttribute(o)}}function A(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){var o=n[i],s=c(t);"disabled"===o&&t.classList.add(ds),"disabled"===o&&s.classList.contains(cs)&&s.classList.add(ds),"placeholder"===o&&s.classList.contains(us)?s.getElementsByClassName(ms)[0].textContent=e[o]:t.setAttribute(o,e[o])}}function k(e,t){if(e.classList.contains("e-outline")&&e.getElementsByClassName("e-float-text")[0]){var i=t("span",{className:gs});i.innerHTML=e.getElementsByClassName("e-float-text")[0].innerHTML,e.getElementsByClassName("e-float-text")[0].innerHTML="",e.getElementsByClassName("e-float-text")[0].appendChild(i)}}function V(e,t,i){var n=[];n.push(i);var o=m(i)?t.querySelectorAll(".e-input-group-icon"):n;if(e&&o.length>0)for(var s=0;s<o.length;s++)o[s].addEventListener("mousedown",E,!1),o[s].addEventListener("mouseup",D,!1);else if(o.length>0)for(s=0;s<o.length;s++)o[s].removeEventListener("mousedown",E,this),o[s].removeEventListener("mouseup",D,this)}function E(){for(var e,t,i=this.parentElement;!i.classList.contains("e-input-group");)i=i.parentElement;t=this,(e=i).classList.contains("e-disabled")||e.querySelector("input").readOnly||t.classList.add("e-input-btn-ripple")}function D(){var e=this;setTimeout((function(){e.classList.remove("e-input-btn-ripple")}),500)}function N(e,t){var i=t("span",{className:e});return i.classList.add("e-input-group-icon"),i}function F(e,t,i,n){var o=m(n)?we:n,s=N(e,o);t.classList.add("e-float-icon-left");var a=t.querySelector(".e-input-in-wrap");if(m(a)){a=o("span",{className:"e-input-in-wrap"}),i.parentNode.insertBefore(a,i);var r=t.querySelectorAll(i.tagName+" ~ *");a.appendChild(i);for(var l=0;l<r.length;l++)a.appendChild(r[l])}return a.parentNode.insertBefore(s,a),t.classList.contains(cs)||t.classList.add(cs),V(!0,t,s),s}function L(e,t,i){var n=N(e,m(i)?we:i);return t.classList.contains(cs)||t.classList.add(cs),(t.classList.contains("e-float-icon-left")?t.querySelector(".e-input-in-wrap"):t).appendChild(n),V(!0,t,n),n}function P(e,t){"hidden"===t.type?e.classList.add("e-hidden"):e.classList.contains("e-hidden")&&e.classList.remove("e-hidden")}e.createInput=function(e,o){var s=m(o)?we:o,a={container:null,buttons:[],clearButton:null};if(t=e.floatLabelType,i=e.bindClearAction,m(e.floatLabelType)||"Never"===e.floatLabelType?(a.container=g(e,cs,Cs,"span",s),e.element.parentNode.insertBefore(a.container,e.element),be([e.element],hs),a.container.appendChild(e.element)):l(e,a,s),n(e),m(e.properties)||m(e.properties.showClearButton)||!e.properties.showClearButton||"TEXTAREA"===e.element.tagName||(I(e.properties.showClearButton,e.element,a,!0,s),a.clearButton.setAttribute("role","button"),a.container.classList.contains(us)&&be([a.container],cs)),!m(e.buttons)&&"TEXTAREA"!==e.element.tagName)for(var r=0;r<e.buttons.length;r++)a.buttons.push(L(e.buttons[r],a.container,s));return m(e.element)||"TEXTAREA"!==e.element.tagName||be([a.container],ps),P(a.container,e.element),a=function(e,t){if(!m(e.properties))for(var i=0,n=Object.keys(e.properties);i<n.length;i++){switch(n[i]){case"cssClass":v(e.properties.cssClass,[t.container]),d(e.floatLabelType,t.container);break;case"enabled":M(e.properties.enabled,e.element,e.floatLabelType,t.container);break;case"enableRtl":x(e.properties.enableRtl,[t.container]);break;case"placeholder":S(e.properties.placeholder,e.element);break;case"readonly":C(e.properties.readonly,e.element)}}return t}(e,a),k(a.container,s),a,a},e.bindInitialEvent=n,e.wireFloatingEvents=r,e.wireClearBtnEvents=u,e.destroy=function(){null},e.setValue=function(e,t,i,n){if(t.value=e,w(t,t.parentElement),m(i)||"Auto"!==i||f(t,i),!m(n)&&n){var s=c(t);if(!m(s)){var a=s.getElementsByClassName(ys)[0];m(a)||(t.value&&!m(s)&&s.classList.contains("e-input-focus")?Se([a],vs):be([a],vs))}}o(i,t)},e.setCssClass=v,e.calculateWidth=w,e.setWidth=function(e,t){"number"===typeof e?t.style.width=b(e):"string"===typeof e&&(t.style.width=e.match(/px|%|em/)?e:b(e)),w(t.firstChild,t)},e.setPlaceholder=S,e.setReadonly=C,e.setEnableRtl=x,e.setEnabled=M,e.setClearButton=I,e.removeAttributes=T,e.addAttributes=A,e.removeFloating=function(e){var t,i=e.container;if(!m(i)&&i.classList.contains(us)){var n=i.querySelector("textarea")?i.querySelector("textarea"):i.querySelector("input"),o=i.querySelector("."+ms).textContent,r=null!==i.querySelector(".e-clear-icon");Ae(i.querySelector("."+fs)),Ae(i.querySelector("."+ms)),Pe(i,[cs],[us]),(t=n).removeEventListener("focus",s),t.removeEventListener("blur",a),Ve(n,{placeholder:o}),n.classList.add(hs),r||"INPUT"!==n.tagName||n.removeAttribute("required")}},e.addFloating=function(e,i,n,o){var s=m(o)?we:o,a=Fe(e,"."+cs);if(t=i,"Never"!==i){var r=a.tagName,h={element:e,floatLabelType:i,customTag:r="DIV"!==r&&"SPAN"!==r?r:null,properties:{placeholder:n}},p=a.querySelector(".e-clear-icon"),c={container:a};e.classList.remove(hs),l(h,c,s),k(c.container,s),w(h.element,c.container);var u=a.classList.contains("e-float-icon-left");if(m(p))if(u)p=a.querySelector(".e-input-in-wrap").querySelector(".e-input-group-icon");else p=a.querySelector(".e-input-group-icon");if(m(p))u&&(p=a.querySelector(".e-input-group-icon")),m(p)&&a.classList.remove(cs);else{var f=a.querySelector("."+fs),g=a.querySelector("."+ms),y=u?a.querySelector(".e-input-in-wrap"):a;y.insertBefore(e,p),y.insertBefore(f,p),y.insertBefore(g,p)}}d(i,e.parentElement)},e.createSpanElement=k,e.setRipple=function(e,t){for(var i=0;i<t.length;i++)V(e,t[i].container)},e.addIcon=function(e,t,i,n,o){var s="string"===typeof t?t.split(","):t;if("append"===e.toLowerCase())for(var a=0,r=s;a<r.length;a++){L(r[a],i,o)}else for(var l=0,d=s;l<d.length;l++){F(d[l],i,n,o)}i.getElementsByClassName("e-input-group-icon")[0]&&i.getElementsByClassName("e-float-text-overflow")[0]&&i.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon")},e.prependSpan=F,e.appendSpan=L,e.validateInputType=P}(rs||(rs={}));var Ms,Is=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ts=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},As="e-input-focus",ks=["title","style","class"],Vs=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.previousValue=null,n.isAngular=!1,n.isHiddenInput=!1,n.isForm=!1,n.inputPreviousValue=null,n.isVue=!1,n.textboxOptions=t,n}return Is(t,e),t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"floatLabelType":rs.removeFloating(this.textboxWrapper),rs.addFloating(this.respectiveElement,this.floatLabelType,this.placeholder);break;case"enabled":rs.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container),this.bindClearEvent();break;case"width":rs.setWidth(e.width,this.textboxWrapper.container);break;case"value":var o=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.isBlank(this.value)||(this.value=this.value.toString()),this.isProtectedOnChange=o,rs.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.inputPreviousValue=this.respectiveElement.value,(this.isAngular||this.isVue)&&!0===this.preventChange?(this.previousValue=this.isAngular?this.value:this.previousValue,this.preventChange=!1):(m(this.isAngular)||!this.isAngular||this.isAngular&&!this.preventChange||this.isAngular&&m(this.preventChange))&&this.raiseChangeEvent();break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkAttributes(!0),rs.validateInputType(this.textboxWrapper.container,this.element);break;case"readonly":rs.setReadonly(this.readonly,this.respectiveElement);break;case"type":"TEXTAREA"!==this.respectiveElement.tagName&&(this.respectiveElement.setAttribute("type",this.type),rs.validateInputType(this.textboxWrapper.container,this.element),this.raiseChangeEvent());break;case"showClearButton":"TEXTAREA"!==this.respectiveElement.tagName&&(rs.setClearButton(this.showClearButton,this.respectiveElement,this.textboxWrapper),this.bindClearEvent());break;case"enableRtl":rs.setEnableRtl(this.enableRtl,[this.textboxWrapper.container]);break;case"placeholder":rs.setPlaceholder(this.placeholder,this.respectiveElement),rs.calculateWidth(this.respectiveElement,this.textboxWrapper.container);break;case"autocomplete":"on"!==this.autocomplete&&""!==this.autocomplete?this.respectiveElement.autocomplete=this.autocomplete:this.removeAttributes(["autocomplete"]);break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"locale":this.globalize=new ee(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),rs.setPlaceholder(this.placeholder,this.respectiveElement)}}},t.prototype.getModuleName=function(){return"textbox"},t.prototype.isBlank=function(e){return!e||/^\s*$/.test(e)},t.prototype.preRender=function(){if(this.cloneElement=this.element.cloneNode(!0),this.formElement=Fe(this.element,"form"),m(this.formElement)||(this.isForm=!0),"EJS-TEXTBOX"===this.element.tagName){for(var e=l("ej2_instances",this.element),t=this.multiline?this.createElement("textarea"):this.createElement("input"),i=0;i<this.element.attributes.length;i++){"id"!==(s=this.element.attributes[i].nodeName)&&"class"!==s?(t.setAttribute(s,this.element.attributes[i].nodeValue),t.innerHTML=this.element.innerHTML,"name"===s&&this.element.removeAttribute("name")):"class"===s&&t.setAttribute(s,this.element.className.split(" ").filter((function(e){return 0!==e.indexOf("ng-")})).join(" "))}this.element.appendChild(t),this.element=t,d("ej2_instances",e,this.element)}this.updateHTMLAttrToElement(),this.checkAttributes(!1),!m(this.textboxOptions)&&void 0!==this.textboxOptions.value||""===this.element.value||this.setProperties({value:this.element.value},!0),"TEXTAREA"!==this.element.tagName&&this.element.setAttribute("type",this.type),this.element.setAttribute("role","textbox"),this.globalize=new ee(this.locale);var n={placeholder:this.placeholder};if(this.l10n=new qt("textbox",n,this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",y("textbox")),this.element.hasAttribute("name")||this.element.setAttribute("name",this.element.getAttribute("id")),"INPUT"===this.element.tagName&&this.multiline){this.isHiddenInput=!0,this.textarea=this.createElement("textarea"),this.element.parentNode.insertBefore(this.textarea,this.element),this.element.setAttribute("type","hidden"),this.textarea.setAttribute("name",this.element.getAttribute("name")),this.element.removeAttribute("name"),this.textarea.setAttribute("role",this.element.getAttribute("role")),this.element.removeAttribute("role"),this.textarea.setAttribute("id",y("textarea"));var o=["placeholder","disabled","value","readonly","type","autocomplete"];for(i=0;i<this.element.attributes.length;i++){var s=this.element.attributes[i].nodeName;this.element.hasAttribute(s)&&ks.indexOf(s)<0&&"id"!==s&&"type"!==s&&"e-mappinguid"!==s&&(this.textarea.setAttribute(s,this.element.attributes[i].nodeValue),o.indexOf(s)<0&&(this.element.removeAttribute(s),i--))}}},t.prototype.checkAttributes=function(e){for(var t=0,i=e?m(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["placeholder","disabled","value","readonly","type","autocomplete"];t<i.length;t++){var n=i[t];if(!m(this.element.getAttribute(n)))switch(n){case"disabled":if(m(this.textboxOptions)||void 0===this.textboxOptions.enabled||e){var o="disabled"!==this.element.getAttribute(n)&&""!==this.element.getAttribute(n)&&"true"!==this.element.getAttribute(n);this.setProperties({enabled:o},!e)}break;case"readonly":if(m(this.textboxOptions)||void 0===this.textboxOptions.readonly||e){var s="readonly"===this.element.getAttribute(n)||""===this.element.getAttribute(n)||"true"===this.element.getAttribute(n);this.setProperties({readonly:s},!e)}break;case"placeholder":(m(this.textboxOptions)||void 0===this.textboxOptions.placeholder||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"autocomplete":if(m(this.textboxOptions)||void 0===this.textboxOptions.autocomplete||e){var a="off"===this.element.autocomplete?"off":"on";this.setProperties({autocomplete:a},!e)}break;case"value":(m(this.textboxOptions)||void 0===this.textboxOptions.value||e)&&""!==this.element.value&&this.setProperties({value:this.element.value},!e);break;case"type":(m(this.textboxOptions)||void 0===this.textboxOptions.type||e)&&this.setProperties({type:this.element.type},!e)}}},t.prototype.render=function(){var e=this.cssClass;m(this.cssClass)||""===this.cssClass||(e=this.getInputValidClassList(this.cssClass)),this.respectiveElement=this.isHiddenInput?this.textarea:this.element,this.textboxWrapper=rs.createInput({element:this.respectiveElement,floatLabelType:this.floatLabelType,properties:{enabled:this.enabled,enableRtl:this.enableRtl,cssClass:e,readonly:this.readonly,placeholder:this.placeholder,showClearButton:this.showClearButton}}),this.updateHTMLAttrToWrapper(),this.isHiddenInput&&this.respectiveElement.parentNode.insertBefore(this.element,this.respectiveElement),this.wireEvents(),m(this.value)||(rs.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value)),m(this.value)||(this.initialValue=this.value,this.setInitialValue()),"on"!==this.autocomplete&&""!==this.autocomplete?this.respectiveElement.autocomplete=this.autocomplete:m(this.textboxOptions)||void 0===this.textboxOptions.autocomplete||this.removeAttributes(["autocomplete"]),this.previousValue=this.value,this.inputPreviousValue=this.value,this.respectiveElement.defaultValue=this.respectiveElement.value,rs.setWidth(this.width,this.textboxWrapper.container),!m(Fe(this.element,"fieldset"))&&Fe(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete()},t.prototype.updateHTMLAttrToWrapper=function(){if(!m(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if(ks.indexOf(i)>-1)if("class"===i){var n=this.getInputValidClassList(this.htmlAttributes[""+i]);""!==n&&be([this.textboxWrapper.container],n.split(" "))}else if("style"===i){var o=this.textboxWrapper.container.getAttribute(i);o=m(o)?this.htmlAttributes[""+i]:o+this.htmlAttributes[""+i],this.textboxWrapper.container.setAttribute(i,o)}else this.textboxWrapper.container.setAttribute(i,this.htmlAttributes[""+i])}},t.prototype.updateHTMLAttrToElement=function(){if(!m(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];ks.indexOf(i)<0&&this.element.setAttribute(i,this.htmlAttributes[""+i])}},t.prototype.updateCssClass=function(e,t){rs.setCssClass(this.getInputValidClassList(e),[this.textboxWrapper.container],this.getInputValidClassList(t))},t.prototype.getInputValidClassList=function(e){var t=e;return m(e)||""===e||(t=e.replace(/\s+/g," ").trim()),t},t.prototype.setInitialValue=function(){this.isAngular||this.respectiveElement.setAttribute("value",this.initialValue)},t.prototype.wireEvents=function(){ye.add(this.respectiveElement,"focus",this.focusHandler,this),ye.add(this.respectiveElement,"blur",this.focusOutHandler,this),ye.add(this.respectiveElement,"input",this.inputHandler,this),ye.add(this.respectiveElement,"change",this.changeHandler,this),this.isForm&&ye.add(this.formElement,"reset",this.resetForm,this),this.bindClearEvent(),!m(this.textboxWrapper.container.querySelector(".e-float-text"))&&"Auto"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-autofill")&&this.textboxWrapper.container.classList.contains("e-outline")&&ye.add(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler,this)},t.prototype.animationHandler=function(){this.textboxWrapper.container.classList.add("e-valid-input");var e=this.textboxWrapper.container.querySelector(".e-float-text");m(e)||(e.classList.add("e-label-top"),e.classList.contains("e-label-bottom")&&e.classList.remove("e-label-bottom"))},t.prototype.resetValue=function(e){var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.value=e,this.isProtectedOnChange=t},t.prototype.resetForm=function(){if(this.isAngular?this.resetValue(""):this.resetValue(this.initialValue),!m(this.textboxWrapper)){var e=this.textboxWrapper.container.querySelector(".e-float-text");m(e)||"Always"===this.floatLabelType||(m(this.initialValue)||""===this.initialValue?(e.classList.add("e-label-bottom"),e.classList.remove("e-label-top")):""!==this.initialValue&&(e.classList.add("e-label-top"),e.classList.remove("e-label-bottom")))}},t.prototype.focusHandler=function(e){var t={container:this.textboxWrapper.container,event:e,value:this.value};this.trigger("focus",t)},t.prototype.focusOutHandler=function(e){null===this.previousValue&&null===this.value&&""===this.respectiveElement.value||this.previousValue===this.value||this.raiseChangeEvent(e,!0);var t={container:this.textboxWrapper.container,event:e,value:this.value};this.trigger("blur",t)},t.prototype.inputHandler=function(e){var t={event:e,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container};this.inputPreviousValue=this.respectiveElement.value,this.isAngular&&(this.localChange({value:this.respectiveElement.value}),this.preventChange=!0),this.isVue&&(this.preventChange=!0),this.trigger("input",t),e.stopPropagation()},t.prototype.changeHandler=function(e){this.setProperties({value:this.respectiveElement.value},!0),this.raiseChangeEvent(e,!0),e.stopPropagation()},t.prototype.raiseChangeEvent=function(e,t){var i={event:e,value:this.value,previousValue:this.previousValue,container:this.textboxWrapper.container,isInteraction:t||!1,isInteracted:t||!1};this.preventChange=!1,this.trigger("change",i),this.previousValue=this.value,"INPUT"===this.element.tagName&&this.multiline&&"mozilla"===ge.info.name&&(this.element.value=this.respectiveElement.value)},t.prototype.bindClearEvent=function(){this.showClearButton&&"TEXTAREA"!==this.respectiveElement.tagName&&(this.enabled?ye.add(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler,this):ye.remove(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler))},t.prototype.resetInputHandler=function(e){if(e.preventDefault(),!this.textboxWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.textboxWrapper.container.classList.contains("e-static-clear")){rs.setValue("",this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.setProperties({value:this.respectiveElement.value},!0);var t={event:e,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container};if(this.trigger("input",t),this.inputPreviousValue=this.respectiveElement.value,this.raiseChangeEvent(e,!0),Fe(this.element,"form")){var i=this.element,n=document.createEvent("KeyboardEvent");n.initEvent("keyup",!1,!0),i.dispatchEvent(n)}}},t.prototype.unWireEvents=function(){ye.remove(this.respectiveElement,"focus",this.focusHandler),ye.remove(this.respectiveElement,"blur",this.focusOutHandler),ye.remove(this.respectiveElement,"input",this.inputHandler),ye.remove(this.respectiveElement,"change",this.changeHandler),this.isForm&&ye.remove(this.formElement,"reset",this.resetForm),!m(this.textboxWrapper.container.querySelector(".e-float-text"))&&"Auto"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-outline")&&this.textboxWrapper.container.classList.contains("e-autofill")&&ye.remove(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler)},t.prototype.destroy=function(){this.unWireEvents(),"INPUT"===this.element.tagName&&this.multiline&&(Ae(this.textboxWrapper.container.getElementsByTagName("textarea")[0]),this.respectiveElement=this.element,this.element.removeAttribute("type")),this.respectiveElement.value=this.respectiveElement.defaultValue,this.respectiveElement.classList.remove("e-input"),this.removeAttributes(["aria-disabled","aria-readonly","aria-labelledby"]),m(this.textboxWrapper)||(this.textboxWrapper.container.insertAdjacentElement("afterend",this.respectiveElement),Ae(this.textboxWrapper.container)),this.textboxWrapper=null,rs.destroy(),e.prototype.destroy.call(this)},t.prototype.addIcon=function(e,t){rs.addIcon(e,t,this.textboxWrapper.container,this.respectiveElement,this.createElement)},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.addAttributes=function(e){for(var t=0,i=Object.keys(e);t<i.length;t++){var n=i[t];"disabled"===n?(this.setProperties({enabled:!1},!0),rs.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):"readonly"===n?(this.setProperties({readonly:!0},!0),rs.setReadonly(this.readonly,this.respectiveElement)):"class"===n?this.respectiveElement.classList.add(e[""+n]):"placeholder"===n?(this.setProperties({placeholder:e[""+n]},!0),rs.setPlaceholder(this.placeholder,this.respectiveElement)):("rows"===n&&this.respectiveElement.tagName,this.respectiveElement.setAttribute(n,e[""+n]))}},t.prototype.removeAttributes=function(e){for(var t=0,i=e;t<i.length;t++){var n=i[t];"disabled"===n?(this.setProperties({enabled:!0},!0),rs.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):"readonly"===n?(this.setProperties({readonly:!1},!0),rs.setReadonly(this.readonly,this.respectiveElement)):"placeholder"===n?(this.setProperties({placeholder:null},!0),rs.setPlaceholder(this.placeholder,this.respectiveElement)):this.respectiveElement.removeAttribute(n)}},t.prototype.focusIn=function(){document.activeElement!==this.respectiveElement&&this.enabled&&(this.respectiveElement.focus(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&be([this.textboxWrapper.container],[As]))},t.prototype.focusOut=function(){document.activeElement===this.respectiveElement&&this.enabled&&(this.respectiveElement.blur(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&Se([this.textboxWrapper.container],[As]))},Ts([Ge("text")],t.prototype,"type",void 0),Ts([Ge(!1)],t.prototype,"readonly",void 0),Ts([Ge(null)],t.prototype,"value",void 0),Ts([Ge("Never")],t.prototype,"floatLabelType",void 0),Ts([Ge("")],t.prototype,"cssClass",void 0),Ts([Ge(null)],t.prototype,"placeholder",void 0),Ts([Ge("on")],t.prototype,"autocomplete",void 0),Ts([Ge({})],t.prototype,"htmlAttributes",void 0),Ts([Ge(!1)],t.prototype,"multiline",void 0),Ts([Ge(!0)],t.prototype,"enabled",void 0),Ts([Ge(!1)],t.prototype,"showClearButton",void 0),Ts([Ge(!1)],t.prototype,"enablePersistence",void 0),Ts([Ge(null)],t.prototype,"width",void 0),Ts([$e()],t.prototype,"created",void 0),Ts([$e()],t.prototype,"destroyed",void 0),Ts([$e()],t.prototype,"change",void 0),Ts([$e()],t.prototype,"blur",void 0),Ts([$e()],t.prototype,"focus",void 0),Ts([$e()],t.prototype,"input",void 0),t=Ts([et],t)}(Dt),Es=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ds=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Ns=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Es(t,e),t.equals=function(e,t){return e===t||!(!e||!t)&&(!e||!t||e.x===t.x&&e.y===t.y)},t.isEmptyPoint=function(e){return!e.x||!e.y},t.transform=function(e,t,i){var n={x:0,y:0};return n.x=Math.round(100*(e.x+i*Math.cos(t*Math.PI/180)))/100,n.y=Math.round(100*(e.y+i*Math.sin(t*Math.PI/180)))/100,n},t.findLength=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},t.findAngle=function(e,t){var i=Math.atan2(t.y-e.y,t.x-e.x);return i=180*i/Math.PI,(i%=360)<0&&(i+=360),i},t.distancePoints=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},t.getLengthFromListOfPoints=function(e){for(var t=0,i=0;i<e.length-1;i++)t+=this.distancePoints(e[i],e[i+1]);return t},t.adjustPoint=function(e,t,i,n){var o,s=i?{x:e.x,y:e.y}:{x:t.x,y:t.y};return e.x===t.x?e.y<t.y&&i||e.y>t.y&&!i?s.y+=n:s.y-=n:e.y===t.y?e.x<t.x&&i||e.x>t.x&&!i?s.x+=n:s.x-=n:i?(o=this.findAngle(e,t),s=this.transform(e,o,n)):(o=this.findAngle(t,e),s=this.transform(t,o,n)),s},t.direction=function(e,t){return Math.abs(t.x-e.x)>Math.abs(t.y-e.y)?e.x<t.x?"Right":"Left":e.y<t.y?"Bottom":"Top"},t.prototype.getClassName=function(){return"Point"},Ds([Ge(0)],t.prototype,"x",void 0),Ds([Ge(0)],t.prototype,"y",void 0),t}(mt);!function(e){e[e.Identity=0]="Identity",e[e.Translation=1]="Translation",e[e.Scaling=2]="Scaling",e[e.Unknown=4]="Unknown"}(Ms||(Ms={}));var Fs=function(e,t,i,n,o,s,a){this.m11=e,this.m12=t,this.m21=i,this.m22=n,this.offsetX=o,this.offsetY=s,this.type=a};function Ls(){return new Fs(1,0,0,1,0,0,Ms.Identity)}function Ps(e,t){var i=function(e,t,i){switch(e.type){case Ms.Identity:break;case Ms.Translation:t+=e.offsetX,i+=e.offsetY;break;case Ms.Scaling:t*=e.m11,i*=e.m22;break;case Ms.Translation|Ms.Scaling:t*=e.m11,t+=e.offsetX,i*=e.m22,i+=e.offsetY;break;default:var n=i*e.m21+e.offsetX,o=t*e.m12+e.offsetY;t*=e.m11,t+=n,i*=e.m22,i+=o}return{x:t,y:i}}(e,t.x,t.y);return{x:Math.round(100*i.x)/100,y:Math.round(100*i.y)/100}}function Os(e,t,i,n){zs(e,function(e,t,i){var n=Ls(),o=Math.sin(e),s=Math.cos(e),a=t*(1-s)+i*o,r=i*(1-s)-t*o;return n.type=Ms.Unknown,js(n,s,o,-o,s,a,r),n}(.017453292519943295*(t%=360),i||0,n||0))}function Bs(e,t,i,n,o){void 0===n&&(n=0),void 0===o&&(o=0),zs(e,function(e,t,i,n){var o=Ls();return o.type=i||n?Ms.Scaling|Ms.Translation:Ms.Scaling,js(o,e,0,0,t,i-e*i,n-t*n),o}(t,i,n,o))}function zs(e,t){var i=e.type,n=t.type;if(n!==Ms.Identity){if(i===Ms.Identity)return Rs(e,t),void(e.type=t.type);if(n===Ms.Translation)return e.offsetX+=t.offsetX,e.offsetY+=t.offsetY,void(i!==Ms.Unknown&&(e.type|=Ms.Translation));if(i!==Ms.Translation){var o=i<<4|n;switch(o){case 34:return e.m11*=t.m11,void(e.m22*=t.m22);case 35:return e.m11*=t.m11,e.m22*=t.m22,e.offsetX=t.offsetX,e.offsetY=t.offsetY,void(e.type=Ms.Translation|Ms.Scaling);case 36:break;default:switch(o){case 50:return e.m11*=t.m11,e.m22*=t.m22,e.offsetX*=t.m11,void(e.offsetY*=t.m22);case 51:return e.m11*=t.m11,e.m22*=t.m22,e.offsetX=t.m11*e.offsetX+t.offsetX,void(e.offsetY=t.m22*e.offsetY+t.offsetY);case 52:break;default:switch(o){case 66:case 67:case 68:break;default:return}}}var s=Ls();return js(s,e.m11*t.m11+e.m12*t.m21,e.m11*t.m12+e.m12*t.m22,e.m21*t.m11+e.m22*t.m21,e.m21*t.m12+e.m22*t.m22,e.offsetX*t.m11+e.offsetY*t.m21+t.offsetX,e.offsetX*t.m12+e.offsetY*t.m22+t.offsetY),s.m21||s.m12?s.type=Ms.Unknown:((s.m11&&1!==s.m11||s.m22&&1!==s.m22)&&(s.type=Ms.Scaling),(s.offsetX||s.offsetY)&&(s.type|=Ms.Translation),(s.type&(Ms.Translation|Ms.Scaling))===Ms.Identity&&(s.type=Ms.Identity),s.type=Ms.Scaling|Ms.Translation),Rs(e,s),void(e.type=s.type)}var a=e.offsetX,r=e.offsetY;e.offsetX=a*t.m11+r*t.m21+t.offsetX,e.offsetY=a*t.m12+r*t.m22+t.offsetY,n!==Ms.Unknown?e.type=Ms.Translation|Ms.Scaling:e.type=Ms.Unknown}}function js(e,t,i,n,o,s,a){e.m11=t,e.m12=i,e.m21=n,e.m22=o,e.offsetX=s,e.offsetY=a}function Rs(e,t){e.m11=t.m11,e.m12=t.m12,e.m21=t.m21,e.m22=t.m22,e.offsetX=t.offsetX,e.offsetY=t.offsetY,e.type=t.type}function _s(e){return"Line"===e.shapeAnnotationType||"LineWidthArrowHead"===e.shapeAnnotationType||"Distance"===e.shapeAnnotationType||"Polygon"===e.shapeAnnotationType}function Hs(e,t){if(e&&t)if(e.formFieldAnnotationType)-1!==e.id.indexOf("diagram_helper")?(t.style.fill="transparent",t.style.strokeWidth=1,t.style.strokeDashArray=e.borderDashArray):(t.style.fill="transparent",t.style.strokeWidth=0);else{var i="#ffffff00"===e.fillColor?"transparent":e.fillColor;t.style.fill=i||"white",t.style.strokeColor=e.strokeColor?e.strokeColor:e.borderColor,t.style.color=e.strokeColor?e.strokeColor:e.borderColor,t.style.strokeWidth=e.thickness,"Image"!==e.shapeAnnotationType&&"SignatureText"!==e.shapeAnnotationType&&"SignatureImage"!==e.shapeAnnotationType||(t.style.strokeWidth=0),t.style.strokeDashArray=e.borderDashArray,t.style.opacity=e.opacity}}function Ws(e){for(var t=0,i=0;i<e.length-1;i++)t+=Ns.findLength(e[parseInt(i.toString(),10)],e[i+1]);return t}function Us(e,t){var i={width:e.actualSize.width,height:e.actualSize.height,x:e.offsetX-e.actualSize.width*e.pivot.x+.5,y:e.offsetY-e.actualSize.height*e.pivot.y+.5,angle:e.rotateAngle+e.parentTransform,fill:e.style.fill,stroke:e.style.strokeColor,pivotX:e.pivot.x,pivotY:e.pivot.y,strokeWidth:1,opacity:e.style.opacity,dashArray:e.style.strokeDashArray||"",visible:e.visible,id:e.id};return t&&(i.x+=t.tx,i.y+=t.ty),i}function qs(e,t,i){var n,o={};if(e){i=e.propName;var s=e.properties||e,a=[],r=[];if((a=a.concat(Object.keys(s))).push("version"),i){var d=(void 0!==(n=t)&&"string"===typeof n&&(n=l(n,window)),n);r=d?d(i):[],a=a.concat(r)}for(var h=function(e){switch(e){case"nodes":case"children":return["inEdges","outEdges","parentId","processId","nodeId","umlIndex","isPhase","isLane"];case"connectors":return["parentId"];case"annotation":case"annotations":return["nodeId"];case"shape":return["hasHeader"]}return[]}(i),p=0,c=a=a.concat(h);p<c.length;p++){var u=c[p];if("historyManager"!==u)if("wrapper"!==u)!(!e[u]||!e.hasOwnProperty("observers"))||(e[""+u]instanceof Array?o[""+u]=Ys(-1===h.indexOf(u)&&e[""+i]?e[""+i][""+u]:e[""+u],t,u):e[""+u]instanceof Array===!1&&e[""+u]instanceof HTMLElement?o[""+u]=e[""+u].cloneNode(!0).innerHtml:e[""+u]instanceof Array===!1&&e[""+u]instanceof Object?o[""+u]=qs(-1===h.indexOf(u)&&e[""+i]?e[""+i][""+u]:e[""+u]):o[""+u]=e[""+u]);else e[""+u]&&(o[""+u]={actualSize:{width:e[""+u].actualSize.width,height:e[""+u].actualSize.height},offsetX:e[""+u].offsetX,offsetY:e[""+u].offsetY})}}return o}function Ys(e,t,i){var n;if(e){n=[];for(var o=0;o<e.length;o++)e[parseInt(o.toString(),10)]instanceof Array?n.push(e[parseInt(o.toString(),10)]):e[parseInt(o.toString(),10)]instanceof Object?n.push(qs(e[parseInt(o.toString(),10)],t,i)):n.push(e[parseInt(o.toString(),10)])}return n}var Qs,Zs,Xs,Gs,Js,Ks,$s,ea,ta,ia,na,oa,sa,aa=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ra=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},la="e-check",da="e-checkbox-disabled",ha="e-frame",pa="e-stop",ca="e-label",ua="e-ripple-container",fa="e-ripple-check",ma="e-ripple-stop",ga="e-rtl",ya="e-checkbox-wrapper",va=["title","class","style","disabled","readonly","name","value"],wa=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.isFocused=!1,n.isMouseClick=!1,n.clickTriggered=!1,n.validCheck=!0,n}return aa(t,e),t.prototype.changeState=function(e,t){var i,n=this.getWrapper().getElementsByClassName(ha)[0];pt&&(i=this.getWrapper().getElementsByClassName(ua)[0]),"check"===e?(n.classList.remove(pa),n.classList.add(la),i&&(i.classList.remove(ma),i.classList.add(fa)),"true",this.element.checked=!0,this.element.required&&this.validCheck&&!t?(this.element.checked=!1,this.validCheck=!1):this.element.required&&(this.validCheck=!0)):"uncheck"===e?(Se([n],[la,pa]),i&&Se([i],[fa,ma]),"false",this.element.checked=!1,this.element.required&&this.validCheck&&!t?(this.element.checked=!0,this.validCheck=!1):this.element.required&&(this.validCheck=!0)):(n.classList.remove(la),n.classList.add(pa),i&&(i.classList.remove(fa),i.classList.add(ma)),"mixed",this.element.indeterminate=!0)},t.prototype.clickHandler=function(e){if("INPUT"===e.target.tagName&&this.clickTriggered)return this.isVue&&this.changeState(this.checked?"check":"uncheck"),void(this.clickTriggered=!1);"SPAN"!==e.target.tagName&&"LABEL"!==e.target.tagName||(this.clickTriggered=!0),this.isMouseClick&&(this.focusOutHandler(),this.isMouseClick=!1),this.indeterminate?(this.changeState(this.checked?"check":"uncheck"),this.indeterminate=!1,this.element.indeterminate=!1):this.checked?(this.changeState("uncheck"),this.checked=!1):(this.changeState("check"),this.checked=!0);var t={checked:this.updateVueArrayModel(!1),event:e};this.trigger("change",t),e.stopPropagation()},t.prototype.destroy=function(){var t=this,i=this.getWrapper();e.prototype.destroy.call(this),this.wrapper&&(i=this.wrapper,this.disabled||this.unWireEvents(),"INPUT"===this.tagName?(this.getWrapper()&&i.parentNode&&i.parentNode.insertBefore(this.element,i),Ae(i),this.element.checked=!1,this.indeterminate&&(this.element.indeterminate=!1),["name","value","disabled"].forEach((function(e){t.element.removeAttribute(e)}))):(["class"].forEach((function(e){i.removeAttribute(e)})),i.innerHTML=""))},t.prototype.focusHandler=function(){this.isFocused=!0},t.prototype.focusOutHandler=function(){var e=this.getWrapper();e&&e.classList.remove("e-focus"),this.isFocused=!1},t.prototype.getModuleName=function(){return"checkbox"},t.prototype.getPersistData=function(){return this.addOnPersist(["checked","indeterminate"])},t.prototype.getWrapper=function(){return this.element&&this.element.parentElement?this.element.parentElement.parentElement:null},t.prototype.initialize=function(){m(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.name&&this.element.setAttribute("name",this.name),this.value&&(this.element.setAttribute("value",this.value),this.isVue&&"boolean"===typeof this.value&&!0===this.value&&this.setProperties({checked:!0},!0)),this.checked&&this.changeState("check",!0),this.indeterminate&&this.changeState(),this.disabled&&this.setDisabled()},t.prototype.initWrapper=function(){var e=this.element.parentElement;e.classList.contains(ya)||(e=this.createElement("div",{className:ya}),this.element.parentNode.insertBefore(e,this.element));var t=this.createElement("label",{attrs:{for:this.element.id}}),i=this.createElement("span",{className:"e-icons "+ha});if(e.classList.add("e-wrapper"),this.enableRtl&&e.classList.add(ga),this.cssClass&&be([e],this.cssClass.replace(/\s+/g," ").trim().split(" ")),e.appendChild(t),t.appendChild(this.element),function(e,t){e.element.getAttribute("ejs-for")&&t.appendChild(e.createElement("input",{attrs:{name:e.name||e.element.name,value:"false",type:"hidden"}}))}(this,t),t.appendChild(i),pt){var n=this.createElement("span",{className:ua});"Before"===this.labelPosition?t.appendChild(n):t.insertBefore(n,i),at(n,{duration:400,isCenterRipple:!0})}this.label&&this.setText(this.label)},t.prototype.keyUpHandler=function(){this.isFocused&&this.getWrapper().classList.add("e-focus")},t.prototype.labelMouseDownHandler=function(e){this.isMouseClick=!0,Fi(e,this.getWrapper().getElementsByClassName(ua)[0])},t.prototype.labelMouseUpHandler=function(e){this.isMouseClick=!0;var t=this.getWrapper().getElementsByClassName(ua)[0];if(t){for(var i=t.querySelectorAll(".e-ripple-element"),n=0;n<i.length-1;n++)t.removeChild(t.childNodes[n]);Fi(e,t)}},t.prototype.onPropertyChanged=function(e,t){for(var i=this.getWrapper(),n=0,o=Object.keys(e);n<o.length;n++){switch(o[n]){case"checked":this.indeterminate=!1,this.element.indeterminate=!1,this.changeState(e.checked?"check":"uncheck");break;case"indeterminate":e.indeterminate?this.changeState():(this.element.indeterminate=!1,this.changeState(this.checked?"check":"uncheck"));break;case"disabled":e.disabled?(this.setDisabled(),this.wrapper=this.getWrapper(),this.unWireEvents()):(this.element.disabled=!1,i.classList.remove(da),i.setAttribute("aria-disabled","false"),this.wireEvents());break;case"cssClass":t.cssClass&&Se([i],t.cssClass.split(" ")),e.cssClass&&be([i],e.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":e.enableRtl?i.classList.add(ga):i.classList.remove(ga);break;case"label":this.setText(e.label);break;case"labelPosition":var s=i.getElementsByClassName(ca)[0],a=i.getElementsByTagName("label")[0];Ae(s),"After"===e.labelPosition?a.appendChild(s):a.insertBefore(s,i.getElementsByClassName(ha)[0]);break;case"name":this.element.setAttribute("name",e.name);break;case"value":if(this.isVue&&"object"===typeof e.value)break;this.element.setAttribute("value",e.value);break;case"htmlAttributes":this.updateHtmlAttributeToWrapper()}}},t.prototype.preRender=function(){var e=this.element;this.tagName=this.element.tagName,e=Ei(this.createElement,"EJS-CHECKBOX","checkbox",e,ya),this.element=e,"checkbox"!==this.element.getAttribute("type")&&this.element.setAttribute("type","checkbox"),this.element.id||(this.element.id=y("e-"+this.getModuleName()))},t.prototype.render=function(){this.initWrapper(),this.initialize(),this.disabled||this.wireEvents(),this.updateHtmlAttributeToWrapper(),this.updateVueArrayModel(!0),this.renderComplete(),this.wrapper=this.getWrapper()},t.prototype.setDisabled=function(){var e=this.getWrapper();this.element.disabled=!0,e.classList.add(da),e.setAttribute("aria-disabled","true")},t.prototype.setText=function(e){var t=this.getWrapper();if(t){var i=t.getElementsByClassName(ca)[0];if(i)i.textContent=e;else{e=this.enableHtmlSanitizer?Vi.sanitize(e):e,i=this.createElement("span",{className:ca,innerHTML:e});var n=t.getElementsByTagName("label")[0];"Before"===this.labelPosition?n.insertBefore(i,t.getElementsByClassName(ha)[0]):n.appendChild(i)}}},t.prototype.changeHandler=function(e){e.stopPropagation()},t.prototype.formResetHandler=function(){this.checked=this.initialCheckedValue,this.element.checked=this.initialCheckedValue},t.prototype.unWireEvents=function(){var e=this.wrapper;ye.remove(e,"click",this.clickHandler),ye.remove(this.element,"keyup",this.keyUpHandler),ye.remove(this.element,"focus",this.focusHandler),ye.remove(this.element,"focusout",this.focusOutHandler);var t=e.getElementsByTagName("label")[0];ye.remove(t,"mousedown",this.labelMouseDownHandler),ye.remove(t,"mouseup",this.labelMouseUpHandler);var i=Fe(this.element,"form");i&&ye.remove(i,"reset",this.formResetHandler),"EJS-CHECKBOX"===this.tagName&&ye.remove(this.element,"change",this.changeHandler)},t.prototype.wireEvents=function(){var e=this.getWrapper();ye.add(e,"click",this.clickHandler,this),ye.add(this.element,"keyup",this.keyUpHandler,this),ye.add(this.element,"focus",this.focusHandler,this),ye.add(this.element,"focusout",this.focusOutHandler,this);var t=e.getElementsByTagName("label")[0];ye.add(t,"mousedown",this.labelMouseDownHandler,this),ye.add(t,"mouseup",this.labelMouseUpHandler,this);var i=Fe(this.element,"form");i&&ye.add(i,"reset",this.formResetHandler,this),"EJS-CHECKBOX"===this.tagName&&ye.add(this.element,"change",this.changeHandler,this)},t.prototype.updateVueArrayModel=function(e){if(this.isVue&&"object"===typeof this.value){var t=this.element.value;if(t&&this.value){if(!e){var i=this.value.indexOf(t);return this.checked?i<0&&this.value.push(t):i>-1&&this.value.splice(i,1),this.value}for(var n=0;n<this.value.length;n++)t===this.value[n]&&(this.changeState("check"),this.setProperties({checked:!0},!0))}}return this.validCheck?this.element.checked:!this.element.checked},t.prototype.updateHtmlAttributeToWrapper=function(){if(!m(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if(va.indexOf(i)>-1){var n=this.getWrapper();if("class"===i)be([n],this.htmlAttributes[""+i].split(" "));else if("title"===i)n.setAttribute(i,this.htmlAttributes[""+i]);else if("style"===i){this.getWrapper().getElementsByClassName(ha)[0].setAttribute(i,this.htmlAttributes[""+i])}else"disabled"===i?("true"===this.htmlAttributes[""+i]&&this.setDisabled(),this.element.setAttribute(i,this.htmlAttributes[""+i])):this.element.setAttribute(i,this.htmlAttributes[""+i])}}},t.prototype.click=function(){this.element.click()},t.prototype.focusIn=function(){this.element.focus()},ra([$e()],t.prototype,"change",void 0),ra([$e()],t.prototype,"created",void 0),ra([Ge(!1)],t.prototype,"checked",void 0),ra([Ge("")],t.prototype,"cssClass",void 0),ra([Ge(!1)],t.prototype,"disabled",void 0),ra([Ge(!1)],t.prototype,"indeterminate",void 0),ra([Ge("")],t.prototype,"label",void 0),ra([Ge("After")],t.prototype,"labelPosition",void 0),ra([Ge("")],t.prototype,"name",void 0),ra([Ge("")],t.prototype,"value",void 0),ra([Ge(!1)],t.prototype,"enableHtmlSanitizer",void 0),ra([Ge({})],t.prototype,"htmlAttributes",void 0),t=ra([et],t)}(Dt),ba=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Sa=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Ca="e-rtl",xa="e-overlay",Ma="e-nav-arrow",Ia="e-nav-right-arrow",Ta="e-nav-left-arrow",Aa="e-scroll-nav",ka="e-scroll-right-nav",Va="e-scroll-left-nav",Ea="e-scroll-device",Da="e-scroll-overlay",Na="e-scroll-right-overlay",Fa="e-scroll-left-overlay",La=function(e){function t(t,i){return e.call(this,t,i)||this}return ba(t,e),t.prototype.preRender=function(){this.browser=ge.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=ge.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=y("hscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add(Ca)},t.prototype.render=function(){this.touchModule=new Gt(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),ye.add(this.scrollEle,"scroll",this.scrollHandler,this),this.isDevice?(this.element.classList.add(Ea),this.createOverlay(this.element)):this.createNavIcon(this.element),this.setScrollState()},t.prototype.setScrollState=function(){m(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=this.createElement("div",{className:"e-hscroll-content"}),t=this.createElement("div",{className:"e-hscroll-bar"});t.setAttribute("tabindex","-1");for(var i=this.element,n=0,o=[].slice.call(i.children);n<o.length;n++){var s=o[n];e.appendChild(s)}t.appendChild(e),i.appendChild(t),t.style.overflowX="hidden",this.scrollEle=t,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"hScroll"},t.prototype.destroy=function(){var t=this.element;t.style.display="",t.classList.remove("e-hscroll"),t.classList.remove(Ea);var i=De(".e-"+t.id+"_nav."+Aa,t),n=De("."+Da,t);[].slice.call(n).forEach((function(e){Ae(e)}));for(var o=0,s=[].slice.call(this.scrollItems.children);o<s.length;o++){var a=s[o];t.appendChild(a)}this.uniqueId&&this.element.removeAttribute("id"),Ae(this.scrollEle),i.length>0&&(Ae(i[0]),m(i[1])||Ae(i[1])),ye.remove(this.scrollEle,"scroll",this.scrollHandler),this.touchModule.destroy(),this.touchModule=null,e.prototype.destroy.call(this)},t.prototype.disable=function(e){var t=De(".e-scroll-nav:not(."+xa+")",this.element);e?this.element.classList.add(xa):this.element.classList.remove(xa),[].slice.call(t).forEach((function(t){t.setAttribute("tabindex",e?"-1":"0")}))},t.prototype.createOverlay=function(e){var t=e.id.concat("_nav"),i=this.createElement("div",{className:Da+" "+Na}),n="e-"+e.id.concat("_nav "+Aa+" "+ka),o=this.createElement("div",{id:t.concat("_right"),className:n}),s=this.createElement("div",{className:Ia+" "+Ma+" e-icons"});o.appendChild(s);var a=this.createElement("div",{className:Da+" "+Fa});this.ieCheck&&o.classList.add("e-ie-align"),e.appendChild(i),e.appendChild(o),e.insertBefore(a,e.firstChild),this.eventBinding([o])},t.prototype.createNavIcon=function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav "+Aa+" "+ka),n={role:"button",id:t.concat("_right"),"aria-label":"Scroll right"},o=this.createElement("div",{className:i,attrs:n});o.setAttribute("aria-disabled","false");var s=this.createElement("div",{className:Ia+" "+Ma+" e-icons"}),a="e-"+e.id.concat("_nav "+Aa+" "+Va),r={role:"button",id:t.concat("_left"),"aria-label":"Scroll left"},l=this.createElement("div",{className:a+" "+xa,attrs:r});l.setAttribute("aria-disabled","true");var d=this.createElement("div",{className:Ta+" "+Ma+" e-icons"});l.appendChild(d),o.appendChild(s),e.appendChild(o),e.insertBefore(l,e.firstChild),this.ieCheck&&(o.classList.add("e-ie-align"),l.classList.add("e-ie-align")),this.eventBinding([o,l])},t.prototype.onKeyPress=function(e){var t=this;if("Enter"===e.key){this.keyTimer=window.setTimeout((function(){t.keyTimeout=!0,t.eleScrolling(10,e.target,!0)}),100)}},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var t=this;[].slice.call(e).forEach((function(e){new Gt(e,{tapHold:t.tabHoldHandler.bind(t),tapHoldThreshold:500}),e.addEventListener("keydown",t.onKeyPress.bind(t)),e.addEventListener("keyup",t.onKeyUp.bind(t)),e.addEventListener("mouseup",t.repeatScroll.bind(t)),e.addEventListener("touchend",t.repeatScroll.bind(t)),e.addEventListener("contextmenu",(function(e){e.preventDefault()})),ye.add(e,"click",t.clickEventHandler,t)}))},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var t=this,i=e.originalEvent.target;i=this.contains(i,Aa)?i.firstElementChild:i;this.timeout=window.setInterval((function(){t.eleScrolling(10,i,!0)}),50)},t.prototype.contains=function(e,t){return e.classList.contains(t)},t.prototype.eleScrolling=function(e,t,i){var n=this.element,o=t.classList;o.contains(Aa)&&(o=t.querySelector("."+Ma).classList),this.contains(n,Ca)&&this.browserCheck&&(e=-e),!this.contains(n,Ca)||this.browserCheck||this.ieCheck?o.contains(Ia)?this.frameScrollRequest(e,"add",i):this.frameScrollRequest(e,"",i):o.contains(Ta)?this.frameScrollRequest(e,"add",i):this.frameScrollRequest(e,"",i)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.swipeHandler=function(e){var t,i=this.scrollEle;t=e.velocity<=1?e.distanceX/(10*e.velocity):e.distanceX/e.velocity;var n=.5;!function o(){var s=Math.sin(n);s<=0?window.cancelAnimationFrame(s):("Left"===e.swipeDirection?i.scrollLeft+=t*s:"Right"===e.swipeDirection&&(i.scrollLeft-=t*s),n-=.5,window.requestAnimationFrame(o))}()},t.prototype.scrollUpdating=function(e,t){"add"===t?this.scrollEle.scrollLeft+=e:this.scrollEle.scrollLeft-=e,this.enableRtl&&this.scrollEle.scrollLeft>0&&(this.scrollEle.scrollLeft=0)},t.prototype.frameScrollRequest=function(e,t,i){var n=this;if(i)this.scrollUpdating(e,t);else{this.customStep||[].slice.call(De("."+Da,this.element)).forEach((function(t){e-=t.offsetWidth}));!function i(){var o,s;n.contains(n.element,Ca)&&n.browserCheck?(o=-e,s=-10):(o=e,s=10),o<10?window.cancelAnimationFrame(s):(n.scrollUpdating(s,t),e-=s,window.requestAnimationFrame(i))}()}},t.prototype.touchHandler=function(e){var t=this.scrollEle,i=e.distanceX;this.ieCheck&&this.contains(this.element,Ca)&&(i=-i),"Left"===e.scrollDirection?t.scrollLeft=t.scrollLeft+i:"Right"===e.scrollDirection&&(t.scrollLeft=t.scrollLeft-i)},t.prototype.arrowDisabling=function(e,t){if(this.isDevice){var i=(m(e)?t:e).querySelector("."+Ma);m(e)?Pe(i,[Ia],[Ta]):Pe(i,[Ta],[Ia])}else e&&t&&(e.classList.add(xa),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove(xa),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0"));this.repeatScroll()},t.prototype.scrollHandler=function(e){var t=e.target,i=t.offsetWidth,n=(this.element,this.element.querySelector("."+Va)),o=this.element.querySelector("."+ka),s=this.element.querySelector("."+Fa),a=this.element.querySelector("."+Na),r=t.scrollLeft;if(r<=0&&(r=-r),this.isDevice&&(!this.enableRtl||this.browserCheck||this.ieCheck||(s=this.element.querySelector("."+Na),a=this.element.querySelector("."+Fa)),s.style.width=r<40?r+"px":"40px",t.scrollWidth-Math.ceil(i+r)<40?a.style.width=t.scrollWidth-Math.ceil(i+r)+"px":a.style.width="40px"),0===r)this.arrowDisabling(n,o);else if(Math.ceil(i+r+.1)>=t.scrollWidth)this.arrowDisabling(o,n);else{var l=this.element.querySelector("."+Aa+"."+xa);l&&(l.classList.remove(xa),l.setAttribute("aria-disabled","false"),l.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add(Ca):this.element.classList.remove(Ca)}}},Sa([Ge(null)],t.prototype,"scrollStep",void 0),t=Sa([et],t)}(Dt),Pa=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Oa=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Ba="e-rtl",za="e-overlay",ja="e-nav-arrow",Ra="e-nav-up-arrow",_a="e-nav-down-arrow",Ha="e-scroll-nav",Wa="e-scroll-up-nav",Ua="e-scroll-down-nav",qa="e-scroll-device",Ya="e-scroll-overlay",Qa="e-scroll-up-overlay",Za="e-scroll-down-overlay",Xa=function(e){function t(t,i){return e.call(this,t,i)||this}return Pa(t,e),t.prototype.preRender=function(){this.browser=ge.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=ge.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=y("vscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add(Ba)},t.prototype.render=function(){this.touchModule=new Gt(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),ye.add(this.scrollEle,"scroll",this.scrollEventHandler,this),this.isDevice?(this.element.classList.add(qa),this.createOverlayElement(this.element)):this.createNavIcon(this.element),this.setScrollState(),ye.add(this.element,"wheel",this.wheelEventHandler,this)},t.prototype.setScrollState=function(){m(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=we("div",{className:"e-vscroll-content"}),t=we("div",{className:"e-vscroll-bar"});t.setAttribute("tabindex","-1");for(var i=this.element,n=0,o=[].slice.call(i.children);n<o.length;n++){var s=o[n];e.appendChild(s)}t.appendChild(e),i.appendChild(t),t.style.overflow="hidden",this.scrollEle=t,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"vScroll"},t.prototype.destroy=function(){var t=this.element;t.style.display="",Se([this.element],["e-vscroll",qa]);var i=De(".e-"+t.id+"_nav."+Ha,t),n=De("."+Ya,t);[].slice.call(n).forEach((function(e){Ae(e)}));for(var o=0,s=[].slice.call(this.scrollItems.children);o<s.length;o++){var a=s[o];t.appendChild(a)}this.uniqueId&&this.element.removeAttribute("id"),Ae(this.scrollEle),i.length>0&&(Ae(i[0]),m(i[1])||Ae(i[1])),ye.remove(this.scrollEle,"scroll",this.scrollEventHandler),this.touchModule.destroy(),this.touchModule=null,e.prototype.destroy.call(this)},t.prototype.disable=function(e){var t=De(".e-scroll-nav:not(."+za+")",this.element);e?this.element.classList.add(za):this.element.classList.remove(za),[].slice.call(t).forEach((function(t){t.setAttribute("tabindex",e?"-1":"0")}))},t.prototype.createOverlayElement=function(e){var t=e.id.concat("_nav"),i=we("div",{className:Ya+" "+Za}),n="e-"+e.id.concat("_nav "+Ha+" "+Ua),o=we("div",{id:t.concat("down"),className:n}),s=we("div",{className:_a+" "+ja+" e-icons"});o.appendChild(s);var a=we("div",{className:Ya+" "+Qa});this.ieCheck&&o.classList.add("e-ie-align"),e.appendChild(i),e.appendChild(o),e.insertBefore(a,e.firstChild),this.eventBinding([o])},t.prototype.createNavIcon=function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav "+Ha+" "+Ua),n=we("div",{id:t.concat("_down"),className:i});n.setAttribute("aria-disabled","false");var o=we("div",{className:_a+" "+ja+" e-icons"}),s="e-"+e.id.concat("_nav "+Ha+" "+Wa),a=we("div",{id:t.concat("_up"),className:s+" "+za});a.setAttribute("aria-disabled","true");var r=we("div",{className:Ra+" "+ja+" e-icons"});a.appendChild(r),n.appendChild(o),n.setAttribute("tabindex","0"),e.appendChild(n),e.insertBefore(a,e.firstChild),this.ieCheck&&(n.classList.add("e-ie-align"),a.classList.add("e-ie-align")),this.eventBinding([n,a])},t.prototype.onKeyPress=function(e){var t=this;if("Enter"===e.key){this.keyTimer=window.setTimeout((function(){t.keyTimeout=!0,t.eleScrolling(10,e.target,!0)}),100)}},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var t=this;[].slice.call(e).forEach((function(e){new Gt(e,{tapHold:t.tabHoldHandler.bind(t),tapHoldThreshold:500}),e.addEventListener("keydown",t.onKeyPress.bind(t)),e.addEventListener("keyup",t.onKeyUp.bind(t)),e.addEventListener("mouseup",t.repeatScroll.bind(t)),e.addEventListener("touchend",t.repeatScroll.bind(t)),e.addEventListener("contextmenu",(function(e){e.preventDefault()})),ye.add(e,"click",t.clickEventHandler,t)}))},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var t=this,i=e.originalEvent.target;i=this.contains(i,Ha)?i.firstElementChild:i;this.timeout=window.setInterval((function(){t.eleScrolling(10,i,!0)}),50)},t.prototype.contains=function(e,t){return e.classList.contains(t)},t.prototype.eleScrolling=function(e,t,i){var n=t.classList;n.contains(Ha)&&(n=t.querySelector("."+ja).classList),n.contains(_a)?this.frameScrollRequest(e,"add",i):n.contains(Ra)&&this.frameScrollRequest(e,"",i)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.wheelEventHandler=function(e){e.preventDefault(),this.frameScrollRequest(this.scrollStep,e.deltaY>0?"add":"",!1)},t.prototype.swipeHandler=function(e){var t,i=this.scrollEle;t=e.velocity<=1?e.distanceY/(10*e.velocity):e.distanceY/e.velocity;var n=.5;!function o(){var s=Math.sin(n);s<=0?window.cancelAnimationFrame(s):("Up"===e.swipeDirection?i.scrollTop+=t*s:"Down"===e.swipeDirection&&(i.scrollTop-=t*s),n-=.02,window.requestAnimationFrame(o))}()},t.prototype.scrollUpdating=function(e,t){"add"===t?this.scrollEle.scrollTop+=e:this.scrollEle.scrollTop-=e},t.prototype.frameScrollRequest=function(e,t,i){var n=this;if(i)this.scrollUpdating(e,t);else{this.customStep||[].slice.call(De("."+Ya,this.element)).forEach((function(t){e-=t.offsetHeight}));!function i(){e<10?window.cancelAnimationFrame(10):(n.scrollUpdating(10,t),e-=10,window.requestAnimationFrame(i))}()}},t.prototype.touchHandler=function(e){var t=this.scrollEle,i=e.distanceY;"Up"===e.scrollDirection?t.scrollTop=t.scrollTop+i:"Down"===e.scrollDirection&&(t.scrollTop=t.scrollTop-i)},t.prototype.arrowDisabling=function(e,t){if(this.isDevice){var i=(m(e)?t:e).querySelector("."+ja);m(e)?Pe(i,[_a],[Ra]):Pe(i,[Ra],[_a])}else e.classList.add(za),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove(za),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()},t.prototype.scrollEventHandler=function(e){var t=e.target,i=t.offsetHeight,n=this.element.querySelector("."+Wa),o=this.element.querySelector("."+Ua),s=this.element.querySelector("."+Qa),a=this.element.querySelector("."+Za),r=t.scrollTop;if(r<=0&&(r=-r),this.isDevice&&(s.style.height=r<40?r+"px":"40px",t.scrollHeight-Math.ceil(i+r)<40?a.style.height=t.scrollHeight-Math.ceil(i+r)+"px":a.style.height="40px"),0===r)this.arrowDisabling(n,o);else if(Math.ceil(i+r+.1)>=t.scrollHeight)this.arrowDisabling(o,n);else{var l=this.element.querySelector("."+Ha+"."+za);l&&(l.classList.remove(za),l.setAttribute("aria-disabled","false"),l.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add(Ba):this.element.classList.remove(Ba)}}},Oa([Ge(null)],t.prototype,"scrollStep",void 0),t=Oa([et],t)}(Dt),Ga=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ja=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Ka="e-vertical",$a="e-toolbar-items",er="e-toolbar-item",tr="e-rtl",ir="e-separator",nr="e-popup-up-icon",or="e-popup-down-icon",sr="e-popup-open",ar="e-template",rr="e-overlay",lr="e-toolbar-text",dr="e-popup-text",hr="e-overflow-show",pr="e-overflow-hide",cr="e-hor-nav",ur="e-scroll-nav",fr="e-toolbar-center",mr="e-tbar-pos",gr="e-hscroll-bar",yr="e-toolbar-pop",vr="e-toolbar-popup",wr="e-nav-active",br="e-ignore",Sr="e-popup-alone",Cr="e-hidden",xr="e-toolbar-multirow",Mr="e-multirow-pos",Ir="e-multirow-separator",Tr="e-extended-separator",Ar="e-extended-toolbar",kr="e-toolbar-extended",Vr="e-tbar-extended",Er=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ga(t,e),Ja([Ge("")],t.prototype,"id",void 0),Ja([Ge("")],t.prototype,"text",void 0),Ja([Ge("auto")],t.prototype,"width",void 0),Ja([Ge("")],t.prototype,"cssClass",void 0),Ja([Ge(!1)],t.prototype,"showAlwaysInPopup",void 0),Ja([Ge(!1)],t.prototype,"disabled",void 0),Ja([Ge("")],t.prototype,"prefixIcon",void 0),Ja([Ge("")],t.prototype,"suffixIcon",void 0),Ja([Ge(!0)],t.prototype,"visible",void 0),Ja([Ge("None")],t.prototype,"overflow",void 0),Ja([Ge("")],t.prototype,"template",void 0),Ja([Ge("Button")],t.prototype,"type",void 0),Ja([Ge("Both")],t.prototype,"showTextOn",void 0),Ja([Ge(null)],t.prototype,"htmlAttributes",void 0),Ja([Ge("")],t.prototype,"tooltipText",void 0),Ja([Ge("Left")],t.prototype,"align",void 0),Ja([$e()],t.prototype,"click",void 0),Ja([Ge(-1)],t.prototype,"tabIndex",void 0),t}(mt),Dr=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.resizeContext=n.resize.bind(n),n.keyConfigs={moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow",popupOpen:"enter",popupClose:"escape",tab:"tab",home:"home",end:"end"},n}return Ga(t,e),t.prototype.destroy=function(){var t=this;(this.isReact||this.isAngular)&&this.clearTemplate();var i=this.element.querySelectorAll(".e-control.e-btn");for([].slice.call(i).forEach((function(e){m(e)||m(e.ej2_instances)||m(e.ej2_instances[0])||e.ej2_instances[0].isDestroyed||e.ej2_instances[0].destroy()})),this.unwireEvents(),this.tempId.forEach((function(e){m(t.element.querySelector(e))||(document.body.appendChild(t.element.querySelector(e)).style.display="none")})),this.destroyItems();this.element.lastElementChild;)this.element.removeChild(this.element.lastElementChild);this.trgtEle&&(this.element.appendChild(this.ctrlTem),this.trgtEle=null,this.ctrlTem=null),this.popObj&&(this.popObj.destroy(),Ae(this.popObj.element)),this.activeEle&&(this.activeEle=null),this.popObj=null,this.tbarAlign=null,this.tbarItemsCol=[],this.remove(this.element,"e-toolpop"),this.cssClass&&Se([this.element],this.cssClass.split(" ")),this.element.removeAttribute("style"),["aria-disabled","aria-orientation","role"].forEach((function(e){return t.element.removeAttribute(e)})),e.prototype.destroy.call(this)},t.prototype.preRender=function(){var e={enableCollision:this.enableCollision,scrollStep:this.scrollStep};this.trigger("beforeCreate",e),this.enableCollision=e.enableCollision,this.scrollStep=e.scrollStep,this.scrollModule=null,this.popObj=null,this.tempId=[],this.tbarItemsCol=this.items,this.isVertical=!!this.element.classList.contains(Ka),this.isExtendedOpen=!1,this.popupPriCount=0,this.enableRtl&&this.add(this.element,tr)},t.prototype.wireEvents=function(){ye.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resizeContext),this.allowKeyboard&&this.wireKeyboardEvent()},t.prototype.wireKeyboardEvent=function(){this.keyModule=new Ut(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs}),ye.add(this.element,"keydown",this.docKeyDown,this),this.updateTabIndex("0")},t.prototype.updateTabIndex=function(e){var t=this.element.querySelector("."+er+":not(."+rr+" ):not(."+ir+" ):not(."+Cr+" )");if(!m(t)&&!m(t.firstElementChild)){var i=t.firstElementChild.getAttribute("data-tabindex");i&&"-1"===i&&"INPUT"!==t.firstElementChild.tagName&&t.firstElementChild.setAttribute("tabindex",e)}},t.prototype.unwireKeyboardEvent=function(){this.keyModule&&(ye.remove(this.element,"keydown",this.docKeyDown),this.keyModule.destroy(),this.keyModule=null)},t.prototype.docKeyDown=function(e){if("INPUT"!==e.target.tagName){var t=!m(this.popObj)&&xe(this.popObj.element)&&"Extended"!==this.overflowMode;9===e.keyCode&&!0===e.target.classList.contains("e-hor-nav")&&t&&this.popObj.hide({name:"FadeOut",duration:100}),(40===e.keyCode||38===e.keyCode||35===e.keyCode||36===e.keyCode)&&e.preventDefault()}},t.prototype.unwireEvents=function(){ye.remove(this.element,"click",this.clickHandler),this.destroyScroll(),this.unwireKeyboardEvent(),window.removeEventListener("resize",this.resizeContext),ye.remove(document,"scroll",this.docEvent),ye.remove(document,"click",this.docEvent)},t.prototype.clearProperty=function(){this.tbarEle=[],this.tbarAlgEle={lefts:[],centers:[],rights:[]}},t.prototype.docEvent=function(e){var t=Fe(e.target,".e-popup");this.popObj&&xe(this.popObj.element)&&!t&&"Popup"===this.overflowMode&&this.popObj.hide({name:"FadeOut",duration:100})},t.prototype.destroyScroll=function(){this.scrollModule&&(this.tbarAlign&&this.add(this.scrollModule.element,mr),this.scrollModule.destroy(),this.scrollModule=null)},t.prototype.destroyItems=function(){if(this.element&&[].slice.call(this.element.querySelectorAll("."+er)).forEach((function(e){Ae(e)})),this.tbarAlign){var e=this.element.querySelector("."+$a);[].slice.call(e.children).forEach((function(e){Ae(e)})),this.tbarAlign=!1,this.remove(e,mr)}this.clearProperty()},t.prototype.destroyMode=function(){this.scrollModule&&(this.remove(this.scrollModule.element,tr),this.destroyScroll()),this.remove(this.element,Vr),this.remove(this.element,Ar);var e=this.element.querySelector(".e-toolbar-multirow");e&&this.remove(e,xr),this.popObj&&this.popupRefresh(this.popObj.element,!0)},t.prototype.add=function(e,t){e.classList.add(t)},t.prototype.remove=function(e,t){e.classList.remove(t)},t.prototype.elementFocus=function(e){var t=e.firstElementChild;t?(t.focus(),this.activeEleSwitch(e)):e.focus()},t.prototype.clstElement=function(e,t){return e&&this.popObj&&xe(this.popObj.element)?this.popObj.element.querySelector("."+er):this.element===t||e?this.element.querySelector("."+er+":not(."+rr+" ):not(."+ir+" ):not(."+Cr+" )"):Fe(t,"."+er)},t.prototype.keyHandling=function(e,t,i,n,o){var s,a,r=this.popObj,l=this.element,d={name:"FadeOut",duration:100},h="moveUp"===t.action?"previous":"next";switch(t.action){case"moveRight":if(this.isVertical)return;l===i?this.elementFocus(e):n||this.eleFocus(e,"next");break;case"moveLeft":if(this.isVertical)return;n||this.eleFocus(e,"previous");break;case"home":case"end":if(e){var p=Fe(e,".e-popup"),c=this.element.querySelector("."+kr);"Extended"===this.overflowMode&&c&&c.classList.contains("e-popup-open")&&(p="end"===t.action?c:null),p?xe(this.popObj.element)&&(a=[].slice.call(p.children),s="home"===t.action?a[0]:a[a.length-1]):(a=this.element.querySelectorAll("."+$a+" ."+er+":not(."+ir+")"),s="home"===t.action?a[0]:a[a.length-1]),s&&this.elementFocus(s)}break;case"moveUp":case"moveDown":if(this.isVertical)"moveUp"===t.action?this.eleFocus(e,"previous"):this.eleFocus(e,"next");else if(r&&Fe(i,".e-popup")){var u=r.element,f=u.firstElementChild;"previous"===h&&f===e?u.lastElementChild.firstChild.focus():"next"===h&&u.lastElementChild===e?f.firstChild.focus():this.eleFocus(e,h)}else"moveDown"===t.action&&r&&xe(r.element)&&this.elementFocus(e);break;case"tab":if(!o&&!n){var m=e.firstElementChild;l===i&&(this.activeEle?this.activeEle.focus():(this.activeEleRemove(m),m.focus()))}break;case"popupClose":r&&"Extended"!==this.overflowMode&&r.hide(d);break;case"popupOpen":if(!n)return;r&&!xe(r.element)?(r.element.style.top=l.offsetHeight+"px",r.show({name:"FadeIn",duration:100})):r.hide(d)}},t.prototype.keyActionHandler=function(e){var t=e.target;if("INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!this.element.classList.contains(rr)){e.preventDefault();var i=t.classList.contains(cr),n=t.classList.contains(ur),o=this.clstElement(i,t);(o||n)&&this.keyHandling(o,e,t,i,n)}},t.prototype.disable=function(e){var t=this.element;e?t.classList.add(rr):t.classList.remove(rr),this.activeEle&&this.activeEle.setAttribute("tabindex",this.activeEle.getAttribute("data-tabindex")),this.scrollModule&&this.scrollModule.disable(e),this.popObj&&(xe(this.popObj.element)&&"Extended"!==this.overflowMode&&this.popObj.hide(),t.querySelector("#"+t.id+"_nav").setAttribute("tabindex",e?"-1":"0"))},t.prototype.eleContains=function(e){return e.classList.contains(ir)||e.classList.contains(rr)||e.getAttribute("disabled")||e.classList.contains(Cr)||!xe(e)||!e.classList.contains(er)},t.prototype.eleFocus=function(e,t){var i=Object(e)[t+"ElementSibling"];if(i){if(this.eleContains(i))return void this.eleFocus(i,t);this.elementFocus(i)}else if(this.tbarAlign){var n=Object(e.parentElement)[t+"ElementSibling"];if(m(n)||0!==n.children.length||(n=Object(n)[t+"ElementSibling"]),!m(n)&&n.children.length>0)if("next"===t){var o=n.querySelector("."+er);this.eleContains(o)?this.eleFocus(o,t):(o.firstElementChild.focus(),this.activeEleSwitch(o))}else{o=n.lastElementChild;this.eleContains(o)?this.eleFocus(o,t):this.elementFocus(o)}}else if(!m(e)){var s=this.element.querySelectorAll("."+$a+" ."+er+":not(."+ir+"):not(."+rr+"):not(."+Cr+")");"next"===t&&s?this.elementFocus(s[0]):"previous"===t&&s&&this.elementFocus(s[s.length-1])}},t.prototype.clickHandler=function(e){var t,i=this,n=e.target,o=this.element,s=!m(Fe(n,"."+yr)),a=n.classList,r=Fe(n,"."+cr);r||(r=n),o.children[0].classList.contains("e-hscroll")||o.children[0].classList.contains("e-vscroll")||!a.contains(cr)||(a=n.querySelector(".e-icons").classList),(a.contains(nr)||a.contains(or))&&this.popupClickHandler(o,r,tr);var l=Fe(e.target,"."+er);if(!m(l)&&!l.classList.contains(rr)||r.classList.contains(cr)){if(l)t=this.items[this.tbarEle.indexOf(l)];var d={originalEvent:e,item:t};t&&!m(t.click)&&this.trigger("items["+this.tbarEle.indexOf(l)+"].click",d),d.cancel||this.trigger("clicked",d,(function(e){!m(i.popObj)&&s&&!e.cancel&&"Popup"===i.overflowMode&&e.item&&"Input"!==e.item.type&&i.popObj.hide({name:"FadeOut",duration:100})}))}},t.prototype.popupClickHandler=function(e,t,i){var n=this.popObj;xe(n.element)?(t.classList.remove(wr),n.hide({name:"FadeOut",duration:100})):(e.classList.contains(i)&&(n.enableRtl=!0,n.position={X:"left",Y:"top"}),0!==n.offsetX||e.classList.contains(i)||(n.enableRtl=!1,n.position={X:"right",Y:"top"}),n.dataBind(),n.refreshPosition(),n.element.style.top=this.getElementOffsetY()+"px","Extended"===this.overflowMode&&(n.element.style.minHeight="0px"),t.classList.add(wr),n.show({name:"FadeIn",duration:100}))},t.prototype.render=function(){this.initialize(),this.renderControl(),this.wireEvents(),this.renderComplete()},t.prototype.initialize=function(){var e=b(this.width),t=b(this.height);"msie"===ge.info.name&&"auto"===this.height&&"MultiRow"!==this.overflowMode||Le(this.element,{height:t}),Le(this.element,{width:e});var i={role:"toolbar","aria-disabled":"false","aria-orientation":this.isVertical?"vertical":"horizontal"};Ve(this.element,i),this.cssClass&&be([this.element],this.cssClass.split(" "))},t.prototype.renderControl=function(){var e=this.element;this.trgtEle=e.children.length>0?e.querySelector("div"):null,this.tbarAlgEle={lefts:[],centers:[],rights:[]},this.renderItems(),this.renderLayout()},t.prototype.renderLayout=function(){this.renderOverflowMode(),this.tbarAlign&&this.itemPositioning(),this.popObj&&this.popObj.element.childElementCount>1&&this.checkPopupRefresh(this.element,this.popObj.element)&&this.popupRefresh(this.popObj.element,!1),this.separator()},t.prototype.itemsAlign=function(e,t){var i,n;this.tbarEle||(this.tbarEle=[]);for(var o=0;o<e.length;o++)i=this.renderSubComponent(e[parseInt(o.toString(),10)],o),-1===this.tbarEle.indexOf(i)&&this.tbarEle.push(i),this.tbarAlign||this.tbarItemAlign(e[parseInt(o.toString(),10)],t,o),(n=t.querySelector(".e-toolbar-"+e[parseInt(o.toString(),10)].align.toLowerCase()))?(e[parseInt(o.toString(),10)].showAlwaysInPopup&&"Show"!==e[parseInt(o.toString(),10)].overflow||this.tbarAlgEle[(e[parseInt(o.toString(),10)].align+"s").toLowerCase()].push(i),n.appendChild(i)):t.appendChild(i);if(this.isReact){this.notify("render-react-toolbar-template",this.portals),this.renderReactTemplates()}},t.prototype.changeOrientation=function(){var e=this.element;this.isVertical?(e.classList.remove(Ka),this.isVertical=!1,"auto"!==this.height&&"100%"!==this.height||(e.style.height=this.height),e.setAttribute("aria-orientation","horizontal")):(e.classList.add(Ka),this.isVertical=!0,e.setAttribute("aria-orientation","vertical"),Le(this.element,{height:b(this.height),width:b(this.width)})),this.destroyMode(),this.refreshOverflow()},t.prototype.initScroll=function(e,t){!this.scrollModule&&this.checkOverflow(e,t[0])&&(this.tbarAlign&&this.element.querySelector("."+$a+" ."+fr).removeAttribute("style"),this.isVertical?this.scrollModule=new Xa({scrollStep:this.scrollStep,enableRtl:this.enableRtl},t[0]):this.scrollModule=new La({scrollStep:this.scrollStep,enableRtl:this.enableRtl},t[0]),this.cssClass&&be([t[0]],this.cssClass.split(" ")),this.remove(this.scrollModule.element,mr),Le(this.element,{overflow:"hidden"}))},t.prototype.itemWidthCal=function(e){var t,i=this,n=0;return[].slice.call(De("."+er,e)).forEach((function(e){xe(e)&&(t=window.getComputedStyle(e),n+=i.isVertical?e.offsetHeight:e.offsetWidth,n+=parseFloat(i.isVertical?t.marginTop:t.marginRight),n+=parseFloat(i.isVertical?t.marginBottom:t.marginLeft))})),n},t.prototype.getScrollCntEle=function(e){var t=this.isVertical?".e-vscroll-content":".e-hscroll-content";return e.querySelector(t)},t.prototype.checkOverflow=function(e,t){if(m(e)||m(t)||!xe(e))return!1;var i=this.isVertical?e.offsetHeight:e.offsetWidth,n=this.isVertical?t.offsetHeight:t.offsetWidth;(this.tbarAlign||this.scrollModule||i===n)&&(n=this.itemWidthCal(this.scrollModule?this.getScrollCntEle(t):t));var o=e.querySelector("."+cr),s=e.querySelector("."+ur),a=0;return o?a=this.isVertical?o.offsetHeight:o.offsetWidth:s&&(a=this.isVertical?2*s.offsetHeight:2*s.offsetWidth),n>i-a},t.prototype.refreshOverflow=function(){this.resize()},t.prototype.toolbarAlign=function(e){this.tbarAlign&&(this.add(e,mr),this.itemPositioning())},t.prototype.renderOverflowMode=function(){var e=this.element,t=e.querySelector("."+$a),i=this.popupPriCount>0;if(e&&e.children.length>0)switch(this.offsetWid=e.offsetWidth,this.remove(this.element,"e-toolpop"),"msie"===ge.info.name&&"auto"===this.height&&(e.style.height=""),this.overflowMode){case"Scrollable":m(this.scrollModule)&&this.initScroll(e,[].slice.call(e.getElementsByClassName($a)));break;case"Popup":this.add(this.element,"e-toolpop"),this.tbarAlign&&this.removePositioning(),(this.checkOverflow(e,t)||i)&&this.setOverflowAttributes(e),this.toolbarAlign(t);break;case"MultiRow":this.add(t,xr),this.checkOverflow(e,t)&&this.tbarAlign&&(this.removePositioning(),this.add(t,Mr)),"hidden"===e.style.overflow&&(e.style.overflow=""),"msie"!==ge.info.name&&"auto"===e.style.height||(e.style.height="auto");break;case"Extended":this.add(this.element,Ar),(this.checkOverflow(e,t)||i)&&(this.tbarAlign&&this.removePositioning(),this.setOverflowAttributes(e)),this.toolbarAlign(t)}},t.prototype.setOverflowAttributes=function(e){this.createPopupEle(e,[].slice.call(De("."+$a+" ."+er,e)));Ve(this.element.querySelector("."+cr),{tabindex:"0",role:"button","aria-haspopup":"true","aria-label":"overflow"})},t.prototype.separator=function(){var e=this.element,t=[].slice.call(e.querySelectorAll("."+ir)),i=e.querySelector("."+Ir),n=e.querySelector("."+Tr),o="MultiRow"===this.overflowMode?i:n;null!==o&&("MultiRow"===this.overflowMode?o.classList.remove(Ir):"Extended"===this.overflowMode&&o.classList.remove(Tr));for(var s=0;s<=t.length-1;s++)t[parseInt(s.toString(),10)].offsetLeft<30&&0!==t[parseInt(s.toString(),10)].offsetLeft&&("MultiRow"===this.overflowMode?t[parseInt(s.toString(),10)].classList.add(Ir):"Extended"===this.overflowMode&&t[parseInt(s.toString(),10)].classList.add(Tr))},t.prototype.createPopupEle=function(e,t){var i=e.querySelector("."+cr),n=this.isVertical;i||this.createPopupIcon(e),i=e.querySelector("."+cr);var o=n?i.offsetHeight:i.offsetWidth,s=(n?e.offsetHeight:e.offsetWidth)-o;this.element.classList.remove("e-rtl"),Le(this.element,{direction:"initial"}),this.checkPriority(e,t,s,!0),this.enableRtl&&this.element.classList.add("e-rtl"),this.element.style.removeProperty("direction"),this.createPopup()},t.prototype.pushingPoppedEle=function(e,t,i,n,o){var s=e.element,a=[].slice.call(De("."+vr,s.querySelector("."+$a))),r=De("."+hr,i),l=0,d=0;a.forEach((function(s,a){r=De("."+hr,i),s.classList.contains(hr)&&r.length>0?e.tbResize&&r.length>a?(i.insertBefore(s,r[parseInt(a.toString(),10)]),++d):(i.insertBefore(s,i.children[r.length]),++d):s.classList.contains(hr)||e.tbResize&&s.classList.contains(pr)&&i.children.length>0&&0===r.length?(i.insertBefore(s,i.firstChild),++d):s.classList.contains(pr)?t.push(s):e.tbResize?(i.insertBefore(s,i.childNodes[l+d]),++l):i.appendChild(s),s.classList.contains(ir)?Le(s,{display:"",height:o+"px"}):Le(s,{display:"",height:n+"px"})})),t.forEach((function(e){i.appendChild(e)}));for(var h=De("."+er,s.querySelector("."+$a)),p=h.length-1;p>=0;p--){var c=h[parseInt(p.toString(),10)];if(!c.classList.contains(ir)||"Extended"===this.overflowMode)break;Le(c,{display:"none"})}},t.prototype.createPopup=function(){var e,t,i=this.element;"Extended"===this.overflowMode&&(t=i.querySelector("."+ir+":not(."+vr+")"),e="auto"===i.style.height||""===i.style.height?null:t.offsetHeight);var n,o=i.querySelector("."+er+":not(."+ir+"):not(."+vr+")"),s="auto"===i.style.height||""===i.style.height?null:o&&o.offsetHeight;if(Ee("#"+i.id+"_popup."+yr,i))n=Ee("#"+i.id+"_popup."+yr,i);else{var a=this.createElement("div",{id:i.id+"_popup",className:yr+" "+kr}),r=this.createElement("div",{id:i.id+"_popup",className:yr});n="Extended"===this.overflowMode?a:r}this.pushingPoppedEle(this,[],n,s,e),this.popupInit(i,n)},t.prototype.getElementOffsetY=function(){return"Extended"===this.overflowMode&&"border-box"===window.getComputedStyle(this.element).getPropertyValue("box-sizing")?this.element.clientHeight:this.element.offsetHeight},t.prototype.popupInit=function(e,t){if(this.popObj){var i=this.popObj.element;Le(i,{maxHeight:"",display:"block"}),Le(i,{maxHeight:i.offsetHeight+"px",display:""})}else{e.appendChild(t),this.cssClass&&be([t],this.cssClass.split(" ")),Le(this.element,{overflow:""});var n=window.getComputedStyle(this.element),o=new Ln(null,{relateTo:this.element,offsetY:this.isVertical?0:this.getElementOffsetY(),enableRtl:this.enableRtl,open:this.popupOpen.bind(this),close:this.popupClose.bind(this),collision:{Y:this.enableCollision?"flip":"none"},position:this.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"}});if("Extended"===this.overflowMode&&(o.width=parseFloat(n.width)+2*parseFloat(n.borderRightWidth),o.offsetX=0),o.appendTo(t),ye.add(document,"scroll",this.docEvent.bind(this)),ye.add(document,"click ",this.docEvent.bind(this)),o.element.style.maxHeight=o.element.offsetHeight+"px",this.isVertical&&(o.element.style.visibility="hidden"),this.isExtendedOpen){var s=this.element.querySelector("."+cr);s.classList.add(wr),Pe(s.firstElementChild,[nr],[or]),this.element.querySelector("."+kr).classList.add(sr)}else o.hide();this.popObj=o}},t.prototype.tbarPopupHandler=function(e){"Extended"===this.overflowMode&&(e?this.add(this.element,Vr):this.remove(this.element,Vr))},t.prototype.popupOpen=function(e){var t=this.popObj;this.isVertical||(t.offsetY=this.getElementOffsetY(),t.dataBind());var i=this.popObj.element,n=this.popObj.element.parentElement,o=n.querySelector("."+cr);o.setAttribute("aria-expanded","true"),Le(t.element,{height:"auto",maxHeight:""}),t.element.style.maxHeight=t.element.offsetHeight+"px","Extended"===this.overflowMode&&(t.element.style.minHeight="");var s=i.offsetTop+i.offsetHeight+Xi(n).top,a=o.firstElementChild;o.classList.add(wr),Pe(a,[nr],[or]),this.tbarPopupHandler(!0);var r=m(window.scrollY)?0:window.scrollY;if(!this.isVertical&&window.innerHeight+r<s&&this.element.offsetTop<i.offsetHeight){var l=i.offsetHeight-(s-window.innerHeight-r+5);t.height=l+"px";for(var d=0;d<=i.childElementCount;d++){var h=i.children[parseInt(d.toString(),10)];if(h.offsetTop+h.offsetHeight>l){l=h.offsetTop;break}}Le(t.element,{maxHeight:l+"px"})}else if(this.isVertical){var p=this.element.getBoundingClientRect();Le(t.element,{maxHeight:p.top+this.element.offsetHeight+"px",bottom:0,visibility:""})}if(t){var c=i.getBoundingClientRect();c.right>document.documentElement.clientWidth&&c.width>n.getBoundingClientRect().width&&(t.collision={Y:"none"},t.dataBind()),t.refreshPosition()}},t.prototype.popupClose=function(e){var t=this.element.querySelector("."+cr);t.setAttribute("aria-expanded","false");var i=t.firstElementChild;t.classList.remove(wr),Pe(i,[or],[nr]),this.tbarPopupHandler(!1)},t.prototype.checkPriority=function(e,t,i,n){for(var o,s=this.popupPriCount>0,a=i,r=0,l=0,d=0,h=function(e,t){var i=!1;return t.forEach((function(t){e.classList.contains(t)&&(i=!0)})),i},p=t.length-1;p>=0;p--){var c=void 0,u=window.getComputedStyle(t[parseInt(p.toString(),10)]);this.isVertical?(c=parseFloat(u.marginTop),c+=parseFloat(u.marginBottom)):(c=parseFloat(u.marginRight),c+=parseFloat(u.marginLeft));var f=t[parseInt(p.toString(),10)]===this.tbarEle[0];f&&(this.tbarEleMrgn=c),o=this.isVertical?t[parseInt(p.toString(),10)].offsetHeight:t[parseInt(p.toString(),10)].offsetWidth;var m=f?o+c:o;if(h(t[parseInt(p.toString(),10)],[Sr])&&s&&(t[parseInt(p.toString(),10)].classList.add(vr),this.isVertical?Le(t[parseInt(p.toString(),10)],{display:"none",minHeight:m+"px"}):Le(t[parseInt(p.toString(),10)],{display:"none",minWidth:m+"px"}),d++),this.isVertical?t[parseInt(p.toString(),10)].offsetTop+t[parseInt(p.toString(),10)].offsetHeight+c>i:t[parseInt(p.toString(),10)].offsetLeft+t[parseInt(p.toString(),10)].offsetWidth+c>i){if(t[parseInt(p.toString(),10)].classList.contains(ir)){if("Extended"===this.overflowMode){if(l===d)h(g=t[parseInt(p.toString(),10)],[ir,br])&&(t[parseInt(p.toString(),10)].classList.add(vr),d++);l++}else if("Popup"===this.overflowMode){var g;if(r>0&&l===d)h(g=t[p+l+(r-1)],[ir,br])&&Le(g,{display:"none"});r++,l=0,d=0}}else l++;t[parseInt(p.toString(),10)].classList.contains(hr)&&n||h(t[parseInt(p.toString(),10)],[ir,br])?i-=(this.isVertical?t[parseInt(p.toString(),10)].offsetHeight:t[parseInt(p.toString(),10)].offsetWidth)+c:(t[parseInt(p.toString(),10)].classList.add(vr),this.isVertical?Le(t[parseInt(p.toString(),10)],{display:"none",minHeight:m+"px"}):Le(t[parseInt(p.toString(),10)],{display:"none",minWidth:m+"px"}),d++)}}if(n){var y=De("."+er+":not(."+vr+")",this.element);this.checkPriority(e,y,a,!1)}},t.prototype.createPopupIcon=function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-hor-nav");i="Extended"===this.overflowMode?i+" e-expended-nav":i;var n=this.createElement("div",{id:t,className:i});"msie"!==ge.info.name&&"edge"!==ge.info.name||n.classList.add("e-ie-align");var o=this.createElement("div",{className:or+" e-icons"});n.appendChild(o),n.setAttribute("tabindex","0"),n.setAttribute("role","button"),e.appendChild(n)},t.prototype.tbarPriRef=function(e,t,i,n,o,s,a,r){var l=r,d=this.popObj.element,h="."+er+":not(."+ir+"):not(."+hr+")",p=De("."+vr+":not(."+hr+")",d).length,c=function(e,t){return e.classList.contains(t)};if(0===De(h,e).length){var u=e.children[t-(t-i)-1],f=!m(u)&&c(u,br);if(!m(u)&&c(u,ir)&&!xe(u)||f){u.style.display="inherit";var g=u.offsetWidth+2*parseFloat(window.getComputedStyle(u).marginRight),y=u.previousElementSibling;s+g<a||o?(e.insertBefore(n,e.children[t+l-(t-i)]),m(y)||(y.style.display="")):y.classList.contains(ir)&&(y.style.display="none"),u.style.display=""}else e.insertBefore(n,e.children[t+l-(t-i)])}else e.insertBefore(n,e.children[t+l-p])},t.prototype.popupRefresh=function(e,t){var i=this,n=this.element,o=this.isVertical,s=n.querySelector("."+$a),a=n.querySelector("."+cr);if(!m(a)){var r;s.removeAttribute("style"),e.style.display="block",r=o?n.offsetHeight-(a.offsetHeight+s.offsetHeight):n.offsetWidth-(a.offsetWidth+s.offsetWidth);var l=0;[].slice.call(e.children).forEach((function(e){l+=i.popupEleWidth(e),Le(e,{position:""})})),r+(o?a.offsetHeight:a.offsetWidth)>l&&0===this.popupPriCount&&(t=!0),this.popupEleRefresh(r,e,t),e.style.display="",0===e.children.length&&a&&this.popObj&&(Ae(a),a=null,this.popObj.destroy(),Ae(this.popObj.element),this.popObj=null)}},t.prototype.ignoreEleFetch=function(e,t){var i=[].slice.call(t.querySelectorAll("."+br)),n=[],o=0;return i.length>0?(i.forEach((function(e){n.push([].slice.call(t.children).indexOf(e))})),n.forEach((function(t){t<=e&&o++})),o):0},t.prototype.checkPopupRefresh=function(e,t){t.style.display="block";var i=this.popupEleWidth(t.firstElementChild);t.firstElementChild.style.removeProperty("Position");var n=e.offsetWidth-e.querySelector("."+cr).offsetWidth,o=e.querySelector("."+$a).offsetWidth;return t.style.removeProperty("display"),n>i+o},t.prototype.popupEleWidth=function(e){e.style.position="absolute";var t=this.isVertical?e.offsetHeight:e.offsetWidth,i=e.querySelector(".e-tbar-btn-text");if(e.classList.contains("e-tbtn-align")||e.classList.contains(dr)){var n=e.children[0];!m(i)&&e.classList.contains(dr)?i.style.display="none":!m(i)&&e.classList.contains(lr)&&(i.style.display="block"),n.style.minWidth="0%",t=parseFloat(this.isVertical?e.style.minHeight:e.style.minWidth),n.style.minWidth="",n.style.minHeight="",m(i)||(i.style.display="")}return t},t.prototype.popupEleRefresh=function(e,t,i){for(var n,o,s=this.popupPriCount>0,a=this.tbarEle,r=this.element.querySelector("."+$a),l=0,d=function(t){if(t.classList.contains(Sr)&&s&&!i)return"continue";var d=h.popupEleWidth(t);if(t===h.tbarEle[0]&&(d+=h.tbarEleMrgn),t.style.position="",!(d<e||i))return"break";if(Le(t,{minWidth:"",height:"",minHeight:""}),t.classList.contains(pr)||t.classList.remove(vr),o=h.tbarEle.indexOf(t),h.tbarAlign){var p=h.items[parseInt(o.toString(),10)].align;o=h.tbarAlgEle[(p+"s").toLowerCase()].indexOf(t),a=h.tbarAlgEle[(p+"s").toLowerCase()],r=h.element.querySelector("."+$a+" .e-toolbar-"+p.toLowerCase())}var c=0;"Extended"!==h.overflowMode&&a.slice(0,o).forEach((function(t){(t.classList.contains(hr)||t.classList.contains(ir))&&(t.classList.contains(ir)&&(t.style.display="",e-=t.offsetWidth),c++)})),l=h.ignoreEleFetch(o,r),t.classList.contains(hr)?(h.tbarPriRef(r,o,c,t,i,d,e,l),e-=t.offsetWidth):0===o?(r.insertBefore(t,r.firstChild),e-=t.offsetWidth):(n=De("."+hr,h.popObj.element).length,r.insertBefore(t,r.children[o+l-n]),e-=t.offsetWidth),t.style.height=""},h=this,p=0,c=[].slice.call(t.children);p<c.length;p++){if("break"===d(c[p]))break}this.checkOverflow(this.element,this.element.getElementsByClassName($a)[0])&&!i&&this.renderOverflowMode()},t.prototype.removePositioning=function(){var e=this.element.querySelector("."+$a);if(!m(e)&&e.classList.contains(mr)){this.remove(e,mr);var t=[].slice.call(e.childNodes);t[1].removeAttribute("style"),t[2].removeAttribute("style")}},t.prototype.refreshPositioning=function(){var e=this.element.querySelector("."+$a);this.add(e,mr),this.itemPositioning()},t.prototype.itemPositioning=function(){var e,t=this.element.querySelector("."+$a);if(!m(t)&&t.classList.contains(mr)){var i,n=this.element.querySelector("."+cr);if(this.scrollModule){var o=this.isVertical?"e-vscroll-content":"e-hscroll-content";i=[].slice.call(t.querySelector("."+o).children)}else i=[].slice.call(t.childNodes);e=this.isVertical?i[0].offsetHeight+i[2].offsetHeight:i[0].offsetWidth+i[2].offsetWidth;var s=this.isVertical?this.element.offsetHeight:this.element.offsetWidth;if(n){s-=this.isVertical?n.offsetHeight:n.offsetWidth;var a=(this.isVertical?n.offsetHeight:n.offsetWidth)+"px";i[2].removeAttribute("style"),this.isVertical?this.enableRtl?i[2].style.top=a:i[2].style.bottom=a:this.enableRtl?i[2].style.left=a:i[2].style.right=a}if(!(s<=e)){var r=(s-e-(this.isVertical?i[1].offsetHeight:i[1].offsetWidth))/2;i[1].removeAttribute("style");var l=(this.isVertical?i[0].offsetHeight:i[0].offsetWidth)+r+"px";this.isVertical?this.enableRtl?i[1].style.marginBottom=l:i[1].style.marginTop=l:this.enableRtl?i[1].style.marginRight=l:i[1].style.marginLeft=l}}},t.prototype.tbarItemAlign=function(e,t,i){var n=this;if(!e.showAlwaysInPopup||"Show"===e.overflow){var o=[];if(o.push(this.createElement("div",{className:"e-toolbar-left"})),o.push(this.createElement("div",{className:fr})),o.push(this.createElement("div",{className:"e-toolbar-right"})),0===i&&"Left"!==e.align)o.forEach((function(e){t.appendChild(e)})),this.tbarAlign=!0,this.add(t,mr);else if("Left"!==e.align){var s=t.childNodes,a=o[0];[].slice.call(s).forEach((function(e){n.tbarAlgEle.lefts.push(e),a.appendChild(e)})),t.appendChild(a),t.appendChild(o[1]),t.appendChild(o[2]),this.tbarAlign=!0,this.add(t,mr)}}},t.prototype.ctrlTemplate=function(){var e=this;this.ctrlTem=this.trgtEle.cloneNode(!0),this.add(this.trgtEle,$a),this.tbarEle=[],[].slice.call(this.trgtEle.children).forEach((function(t){"DIV"===t.tagName&&(e.tbarEle.push(t),t.setAttribute("aria-disabled","false"),e.add(t,er))}))},t.prototype.renderItems=function(){var e=this.element,t=this.items;if(null!=this.trgtEle)this.ctrlTemplate();else if(e&&t.length>0){var i=void 0;e&&e.children.length>0&&(i=e.querySelector("."+$a)),i||(i=this.createElement("div",{className:$a})),this.itemsAlign(t,i),e.appendChild(i)}},t.prototype.setAttr=function(e,t){for(var i,n=Object.keys(e),o=0;o<n.length;o++)"class"===(i=n[parseInt(o.toString(),10)])?this.add(t,e[""+i]):t.setAttribute(i,e[""+i])},t.prototype.enableItems=function(e,t){var i,n=e,o=n.length;m(t)&&(t=!0);var s=function(e,t){e?(t.classList.remove(rr),t.setAttribute("aria-disabled","false")):(t.classList.add(rr),t.setAttribute("aria-disabled","true"))};if(!m(o)&&o>=1){for(var a=0,r=[].slice.call(n);a<o;a++){var l=r[parseInt(a.toString(),10)];if("number"===typeof l){if(m(i=this.getElementByIndex(l)))return;n[parseInt(a.toString(),10)]=i}else i=l;s(t,i)}t?Se(n,rr):be(n,rr)}else{if("number"===typeof n){if(m(i=this.getElementByIndex(n)))return}else i=e;s(t,i)}},t.prototype.getElementByIndex=function(e){return this.tbarEle[parseInt(e.toString(),10)]?this.tbarEle[parseInt(e.toString(),10)]:null},t.prototype.addItems=function(e,t){var i;this.extendedOpen();var n=this.element.querySelector("."+$a);if(m(n))this.itemsRerender(e);else{var o,s="Left";m(t)&&(t=0),e.forEach((function(e){m(e.align)||"Left"===e.align||"Left"!==s||(s=e.align)}));for(var a=0,r=e;a<r.length;a++){var l=r[a];if(m(l.type)&&(l.type="Button"),i=De("."+er,this.element),l.align=s,o=this.renderSubComponent(l,t),this.tbarEle.length>=t&&i.length>=0){m(this.scrollModule)&&this.destroyMode();var d="L"===l.align[0]?0:"C"===l.align[0]?1:2,h=void 0;this.tbarAlign||"Left"===s?this.tbarAlign?((h=Fe(i[0],"."+$a).children[parseInt(d.toString(),10)]).insertBefore(o,h.children[parseInt(t.toString(),10)]),this.tbarAlgEle[(l.align+"s").toLowerCase()].splice(t,0,o),this.refreshPositioning()):0===i.length?(i=De("."+$a,this.element))[0].appendChild(o):i[0].parentNode.insertBefore(o,i[parseInt(t.toString(),10)]):(this.tbarItemAlign(l,n,1),this.tbarAlign=!0,(h=Fe(i[0],"."+$a).children[parseInt(d.toString(),10)]).appendChild(o),this.tbarAlgEle[(l.align+"s").toLowerCase()].push(o),this.refreshPositioning()),this.items.splice(t,0,l),l.template&&this.tbarEle.splice(this.tbarEle.length-1,1),this.tbarEle.splice(t,0,o),t++,this.offsetWid=n.offsetWidth}}n.style.width="",this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()}},t.prototype.removeItems=function(e){var t,i=e,n=[].slice.call(De("."+er,this.element));if("number"===typeof i)t=parseInt(e.toString(),10),this.removeItemByIndex(t,n);else if(i&&i.length>1)for(var o=0,s=[].slice.call(i);o<s.length;o++){var a=s[o];t=this.tbarEle.indexOf(a),this.removeItemByIndex(t,n),n=De("."+er,this.element)}else{a=i&&i.length&&1===i.length?i[0]:e;t=n.indexOf(a),this.removeItemByIndex(t,n)}this.resize()},t.prototype.removeItemByIndex=function(e,t){if(this.tbarEle[parseInt(e.toString(),10)]&&t[parseInt(e.toString(),10)]){var i=this.tbarEle.indexOf(t[parseInt(e.toString(),10)]);if(this.tbarAlign){var n=this.tbarAlgEle[(this.items[parseInt(i.toString(),10)].align+"s").toLowerCase()].indexOf(this.tbarEle[parseInt(i.toString(),10)]);this.tbarAlgEle[(this.items[parseInt(i.toString(),10)].align+"s").toLowerCase()].splice(parseInt(n.toString(),10),1)}this.isReact&&this.clearTemplate();var o=t[parseInt(e.toString(),10)].querySelector(".e-control.e-btn");m(o)||m(o.ej2_instances[0])||o.ej2_instances[0].isDestroyed||o.ej2_instances[0].destroy(),Ae(t[parseInt(e.toString(),10)]),this.items.splice(i,1),this.tbarEle.splice(i,1)}},t.prototype.templateRender=function(e,t,i,n){var o,s=i.type,a=e;if("object"===typeof e&&(o="function"===typeof a.appendTo),"string"!==typeof e&&o){if("Input"===s){h=this.createElement("input");i.id?h.id=i.id:h.id=y("tbr-ipt"),t.appendChild(h),a.appendTo(h)}}else{var r,l=void 0,d=new RegExp(/<(?=.*? .*?\/ ?>|br|hr|input|!--|wbr)[a-z]+.*?>|<([a-z]+).*?<\/\1>/i);r="string"===typeof e?e.trim():e;try{if("object"!==typeof e||m(e.tagName))if("string"===typeof e&&d.test(r))t.innerHTML=r;else if(document.querySelectorAll(r).length){var h,p=(h=document.querySelector(r)).outerHTML.trim();t.appendChild(h),h.style.display="",m(p)||this.tempId.push(r)}else l=Mi(r);else t.appendChild(e)}catch(u){l=Mi(r)}var c=void 0;if(!m(l))c=l({},this,"template",this.element.id+n+"_template",this.isStringTemplate);!m(c)&&c.length>0&&[].slice.call(c).forEach((function(e){m(e.tagName)||(e.style.display=""),t.appendChild(e)}))}this.add(t,ar),this.tbarEle.push(t)},t.prototype.buttonRendering=function(e,t){var i=this.createElement("button",{className:"e-tbar-btn"});i.setAttribute("type","button");var n,o,s=e.text;e.id?i.id=e.id:i.id=y("e-tbr-btn");var a=this.createElement("span",{className:"e-tbar-btn-text"});s?(a.innerHTML=this.enableHtmlSanitizer?Vi.sanitize(s):s,i.appendChild(a),i.classList.add("e-tbtn-txt")):this.add(t,"e-tbtn-align"),(e.prefixIcon||e.suffixIcon)&&(e.prefixIcon&&e.suffixIcon||e.prefixIcon?(n=e.prefixIcon+" e-icons",o="Left"):(n=e.suffixIcon+" e-icons",o="Right"));var r=new Qi({iconCss:n,iconPosition:o});return r.createElement=this.createElement,r.appendTo(i),e.width&&Le(i,{width:b(e.width)}),i},t.prototype.renderSubComponent=function(e,t){var i,n=this.createElement("div",{className:er});n.setAttribute("aria-disabled","false");var o=this.createElement("div",{innerHTML:this.enableHtmlSanitizer?Vi.sanitize(e.tooltipText):e.tooltipText});if(this.tbarEle||(this.tbarEle=[]),e.htmlAttributes&&this.setAttr(e.htmlAttributes,n),e.tooltipText&&n.setAttribute("title",o.textContent),e.cssClass&&(n.className=n.className+" "+e.cssClass),e.template)this.templateRender(e.template,n,e,t);else switch(e.type){case"Button":(i=this.buttonRendering(e,n)).setAttribute("tabindex",m(e.tabIndex)?"-1":e.tabIndex.toString()),i.setAttribute("data-tabindex",m(e.tabIndex)?"-1":e.tabIndex.toString()),i.setAttribute("aria-label",e.text||e.tooltipText),n.appendChild(i),n.addEventListener("click",this.itemClick.bind(this));break;case"Separator":this.add(n,ir)}if(e.showTextOn){var s=e.showTextOn;"Toolbar"===s?(this.add(n,lr),this.add(n,"e-tbtn-align")):"Overflow"===s&&this.add(n,dr)}if(e.overflow){var a=e.overflow;"Show"===a?this.add(n,hr):"Hide"===a&&(n.classList.contains(ir)||this.add(n,pr))}return"Show"!==e.overflow&&e.showAlwaysInPopup&&!n.classList.contains(ir)&&(this.add(n,Sr),this.popupPriCount++),e.disabled&&this.add(n,rr),!1===e.visible&&this.add(n,Cr),n},t.prototype.getDataTabindex=function(e){return m(e.getAttribute("data-tabindex"))?"-1":e.getAttribute("data-tabindex")},t.prototype.itemClick=function(e){this.activeEleSwitch(e.currentTarget)},t.prototype.activeEleSwitch=function(e){this.activeEleRemove(e.firstElementChild),this.activeEle.focus()},t.prototype.activeEleRemove=function(e){m(this.activeEle)||this.activeEle.setAttribute("tabindex",this.getDataTabindex(this.activeEle)),this.activeEle=e,"-1"===this.getDataTabindex(this.activeEle)&&(m(this.trgtEle)&&!e.parentElement.classList.contains(ar)?(this.updateTabIndex("-1"),e.removeAttribute("tabindex")):this.activeEle.setAttribute("tabindex",this.getDataTabindex(this.activeEle)))},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.getModuleName=function(){return"toolbar"},t.prototype.itemsRerender=function(e){this.items=this.tbarItemsCol,(this.isReact||this.isAngular)&&this.clearTemplate(),this.destroyMode(),this.destroyItems(),this.items=e,this.tbarItemsCol=this.items,this.renderItems(),this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()},t.prototype.resize=function(){var e=this.element;this.tbResize=!0,this.tbarAlign&&this.itemPositioning(),this.popObj&&"Popup"===this.overflowMode&&this.popObj.hide();var t=this.checkOverflow(e,e.getElementsByClassName($a)[0]);if(!t){this.destroyScroll();var i=e.querySelector("."+$a);m(i)||(this.remove(i,Mr),this.tbarAlign&&this.add(i,mr))}if(!t||!this.scrollModule||this.offsetWid!==e.offsetWidth){if((this.offsetWid>e.offsetWidth||t)&&this.renderOverflowMode(),this.popObj){if("Extended"===this.overflowMode){var n=window.getComputedStyle(this.element);this.popObj.width=parseFloat(n.width)+2*parseFloat(n.borderRightWidth)}this.tbarAlign&&this.removePositioning(),this.popupRefresh(this.popObj.element,!1),this.tbarAlign&&this.refreshPositioning()}this.element.querySelector("."+gr)&&(this.scrollStep=this.element.querySelector("."+gr).offsetWidth),this.offsetWid=e.offsetWidth,this.tbResize=!1,this.separator()}},t.prototype.extendedOpen=function(){var e=this.element.querySelector("."+kr);"Extended"===this.overflowMode&&e&&(this.isExtendedOpen=e.classList.contains(sr))},t.prototype.updateHideEleTabIndex=function(e,t,i,n,o){i&&(n=o.indexOf(e));for(var s=o[++n];s;){if(!this.eleContains(s)){var a=s.firstElementChild.getAttribute("data-tabindex");t&&"-1"===a?s.firstElementChild.setAttribute("tabindex","0"):a!==s.firstElementChild.getAttribute("tabindex")&&s.firstElementChild.setAttribute("tabindex",a);break}s=o[++n]}},t.prototype.onPropertyChanged=function(e,t){var i=this.element,n=i.offsetWidth;this.extendedOpen();for(var o=0,s=Object.keys(e);o<s.length;o++){switch(s[o]){case"items":if(e.items instanceof Array&&t.items instanceof Array)this.itemsRerender(e.items);else for(var a=Object.keys(e.items),r=0;r<a.length;r++){var l=parseInt(Object.keys(e.items)[parseInt(r.toString(),10)],10),d=Object.keys(e.items[parseInt(l.toString(),10)])[0],h=Object(e.items[parseInt(l.toString(),10)])[""+d];if("function"!==typeof h){if(this.tbarAlign||"align"===d){this.refresh(),this.trigger("created");break}var p="showAlwaysInPopup"===d&&!h,c="overflow"===d&&0!==this.popupPriCount;(p||this.items[parseInt(l.toString(),10)].showAlwaysInPopup&&c)&&--this.popupPriCount,m(this.scrollModule)&&this.destroyMode();var u=[].slice.call(De("."+$a+" ."+er,i));this.isReact&&this.items[parseInt(l.toString(),10)].template&&this.clearTemplate(),Ae(u[parseInt(l.toString(),10)]),this.tbarEle.splice(l,1),this.addItems([this.items[parseInt(l.toString(),10)]],l),this.items.splice(l,1),this.items[parseInt(l.toString(),10)].template&&this.tbarEle.splice(this.items.length,1)}}break;case"width":Le(i,{width:b(e.width)}),this.renderOverflowMode(),this.popObj&&n<i.offsetWidth&&this.popupRefresh(this.popObj.element,!1);break;case"height":Le(this.element,{height:b(e.height)});break;case"overflowMode":this.destroyMode(),this.renderOverflowMode(),this.enableRtl&&this.add(i,tr),this.refreshOverflow();break;case"enableRtl":e.enableRtl?this.add(i,tr):this.remove(i,tr),m(this.scrollModule)||(e.enableRtl?this.add(this.scrollModule.element,tr):this.remove(this.scrollModule.element,tr)),m(this.popObj)||(e.enableRtl?this.add(this.popObj.element,tr):this.remove(this.popObj.element,tr)),this.tbarAlign&&this.itemPositioning();break;case"scrollStep":this.scrollModule&&(this.scrollModule.scrollStep=this.scrollStep);break;case"enableCollision":this.popObj&&(this.popObj.collision={Y:this.enableCollision?"flip":"none"});break;case"cssClass":t.cssClass&&Se([this.element],t.cssClass.split(" ")),e.cssClass&&be([this.element],e.cssClass.split(" "));break;case"allowKeyboard":this.unwireKeyboardEvent(),e.allowKeyboard&&this.wireKeyboardEvent()}}},t.prototype.hideItem=function(e,t){var i,n="object"===typeof e,o=e;if(n||!m(o)){var s=[].slice.call(De("."+er,this.element));if(n)i=e;else if(this.tbarEle[parseInt(o.toString(),10)]){i=[].slice.call(De("."+er,this.element))[parseInt(o.toString(),10)]}i&&(t?(i.classList.add(Cr),i.classList.contains(ir)||(m(i.firstElementChild.getAttribute("tabindex"))||"-1"!==i.firstElementChild.getAttribute("tabindex"))&&this.updateHideEleTabIndex(i,t,n,o,s)):(i.classList.remove(Cr),i.classList.contains(ir)||this.updateHideEleTabIndex(i,t,n,o,s)),this.refreshOverflow())}},Ja([Ke([],Er)],t.prototype,"items",void 0),Ja([Ge("auto")],t.prototype,"width",void 0),Ja([Ge("auto")],t.prototype,"height",void 0),Ja([Ge("")],t.prototype,"cssClass",void 0),Ja([Ge("Scrollable")],t.prototype,"overflowMode",void 0),Ja([Ge()],t.prototype,"scrollStep",void 0),Ja([Ge(!0)],t.prototype,"enableCollision",void 0),Ja([Ge(!0)],t.prototype,"enableHtmlSanitizer",void 0),Ja([Ge(!0)],t.prototype,"allowKeyboard",void 0),Ja([$e()],t.prototype,"clicked",void 0),Ja([$e()],t.prototype,"created",void 0),Ja([$e()],t.prototype,"destroyed",void 0),Ja([$e()],t.prototype,"beforeCreate",void 0),t=Ja([et],t)}(Dt),Nr=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Fr=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Lr="e-tab",Pr="e-tab-header",Or="e-content",Br="e-nested",zr="e-item",jr="e-template",Rr="e-rtl",_r="e-active",Hr="e-disable",Wr="e-hidden",Ur="e-focused",qr="e-icons",Yr="e-icon",Qr="e-icon-tab",Zr="e-close-icon",Xr="e-close-show",Gr="e-tab-text",Jr="e-indicator",Kr="e-tab-wrap",$r="e-text-wrap",el="e-tab-icon",tl="e-toolbar-items",il="e-toolbar-item",nl="e-toolbar-pop",ol="e-toolbar-popup",sl="e-progress",al="e-overlay",rl="e-vertical-tab",ll="e-vertical",dl="e-vertical-left",hl="e-vertical-right",pl="e-horizontal-bottom",cl="e-fill-mode",ul="tabitem_",fl="e-reorder-active-item",ml=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Nr(t,e),Fr([Ge("SlideLeftIn")],t.prototype,"effect",void 0),Fr([Ge(600)],t.prototype,"duration",void 0),Fr([Ge("ease")],t.prototype,"easing",void 0),t}(mt),gl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Nr(t,e),Fr([Je({effect:"SlideLeftIn",duration:600,easing:"ease"},ml)],t.prototype,"previous",void 0),Fr([Je({effect:"SlideRightIn",duration:600,easing:"ease"},ml)],t.prototype,"next",void 0),t}(mt),yl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Nr(t,e),Fr([Ge("")],t.prototype,"text",void 0),Fr([Ge("")],t.prototype,"iconCss",void 0),Fr([Ge("left")],t.prototype,"iconPosition",void 0),t}(mt),vl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Nr(t,e),Fr([Je({},yl)],t.prototype,"header",void 0),Fr([Ge(null)],t.prototype,"headerTemplate",void 0),Fr([Ge("")],t.prototype,"content",void 0),Fr([Ge("")],t.prototype,"cssClass",void 0),Fr([Ge(!1)],t.prototype,"disabled",void 0),Fr([Ge(!0)],t.prototype,"visible",void 0),Fr([Ge()],t.prototype,"id",void 0),Fr([Ge(-1)],t.prototype,"tabIndex",void 0),t}(mt),wl=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.show={},n.hide={},n.maxHeight=0,n.title="Close",n.isInteracted=!1,n.lastIndex=0,n.isAdd=!1,n.isIconAlone=!1,n.draggableItems=[],n.resizeContext=n.refreshActiveTabBorder.bind(n),n.keyConfigs={tab:"tab",home:"home",end:"end",enter:"enter",space:"space",delete:"delete",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow"},n}return Nr(t,e),t.prototype.destroy=function(){if((this.isReact||this.isAngular)&&this.clearTemplate(),m(this.tbObj)||(this.tbObj.destroy(),this.tbObj=null),this.unWireEvents(),this.element.removeAttribute("aria-disabled"),this.expTemplateContent(),this.isTemplate){var t=Ee(".e-tab > ."+Or,this.element);this.element.classList.remove(jr),m(t)||(t.innerHTML=this.cnt)}else for(;this.element.firstElementChild;)ke(this.element.firstElementChild);if(this.btnCls&&(this.btnCls=null),this.hdrEle=null,this.cntEle=null,this.tbItems=null,this.tbItem=null,this.tbPop=null,this.prevItem=null,this.popEle=null,this.bdrLine=null,this.content=null,this.dragItem=null,this.cloneElement=null,this.draggingItems=[],this.draggableItems&&this.draggableItems.length>0){for(var i=0;i<this.draggableItems.length;i++)this.draggableItems[i].destroy(),this.draggableItems[i]=null;this.draggableItems=[]}e.prototype.destroy.call(this),this.trigger("destroyed")},t.prototype.refresh=function(){this.isReact&&this.clearTemplate(),e.prototype.refresh.call(this),this.isReact&&this.renderReactTemplates()},t.prototype.preRender=function(){var e=Fe(this.element,"."+Or);this.prevIndex=0,this.isNested=!1,this.isPopup=!1,this.initRender=!0,this.isSwipeed=!1,this.itemIndexArray=[],this.templateEle=[],this.allowDragAndDrop&&(this.dragArea=m(this.dragArea)?"#"+this.element.id+" ."+Pr:this.dragArea),m(e)||(e.parentElement.classList.add(Br),this.isNested=!0);var t=ge.info.name,i="msie"===t?"e-ie":"edge"===t?"e-edge":"safari"===t?"e-safari":"";Le(this.element,{width:b(this.width),height:b(this.height)}),this.setCssClass(this.element,this.cssClass,!0),Ve(this.element,{"aria-disabled":"false"}),this.setCssClass(this.element,i,!0),this.updatePopAnimationConfig()},t.prototype.render=function(){this.btnCls=this.createElement("span",{className:qr+" "+Zr,attrs:{title:this.title}}),this.tabId=this.element.id.length>0?"-"+this.element.id:xi(),this.renderContainer(),this.wireEvents(),this.initRender=!1},t.prototype.renderContainer=function(){var e=this.element;if(this.items.forEach((function(e,t){m(e.id)&&!m(e.setProperties)&&e.setProperties({id:ul+t.toString()},!0)})),this.items.length>0&&0===e.children.length)e.appendChild(this.createElement("div",{className:Or})),this.setOrientation(this.headerPlacement,this.createElement("div",{className:Pr})),this.isTemplate=!1;else if(this.element.children.length>0){this.isTemplate=!0,e.classList.add(jr);var t=e.querySelector("."+Pr);t&&"Bottom"===this.headerPlacement&&this.setOrientation(this.headerPlacement,t)}if(!m(Ee("."+Pr,this.element))&&!m(Ee("."+Or,this.element))){if(this.renderHeader(),this.tbItems=Ee("."+Pr+" ."+tl,this.element),m(this.tbItems)||at(this.tbItems,{selector:".e-tab-wrap"}),this.renderContent(),De("."+il,this.element).length>0){this.tbItems=Ee("."+Pr+" ."+tl,this.element),this.bdrLine=this.createElement("div",{className:Jr+" "+Wr+" e-ignore"});var i=Ee("."+this.scrCntClass,this.tbItems);m(i)?this.tbItems.insertBefore(this.bdrLine,this.tbItems.firstChild):i.insertBefore(this.bdrLine,i.firstChild),this.setContentHeight(!0),this.select(this.selectedItem)}if(this.tbItem=De("."+il,this.hdrEle),!m(this.tbItem))for(var n=0;n<this.items.length;n++)if(this.tbItem[n]){var o=this.items[n].id;this.tbItem[n].setAttribute("data-id",o)}this.setRTL(this.enableRtl)}},t.prototype.renderHeader=function(){var e=this,t=this.headerPlacement,i=[];if(this.hdrEle=this.getTabHeader(),this.addVerticalClass(),this.isTemplate){this.element.children.length>1&&this.element.children[1].classList.contains(Pr)&&this.setProperties({headerPlacement:"Bottom"},!0);for(var n=this.hdrEle.children.length,o=[],s=0;s<n;s++)o.push(this.hdrEle.children.item(s).innerHTML);if(n>0){for(;this.hdrEle.firstElementChild;)Ae(this.hdrEle.firstElementChild);var a=this.createElement("div",{className:"e-items"});this.hdrEle.appendChild(a),o.forEach((function(t,i){e.lastIndex=i;var n={className:zr,id:zr+e.tabId+"_"+i},o=e.createElement("span",{className:Gr,innerHTML:t,attrs:{role:"presentation"}}).outerHTML,s=e.createElement("div",{className:$r,innerHTML:o+e.btnCls.outerHTML}).outerHTML,r=e.createElement("div",{className:Kr,innerHTML:s,attrs:{role:"tab",tabIndex:"-1","aria-selected":"false","aria-controls":Or+e.tabId+"_"+i}});a.appendChild(e.createElement("div",n)),De("."+zr,a)[i].appendChild(r)}))}}else i=this.parseObject(this.items,0);this.tbObj=new Dr({width:"Left"===t||"Right"===t?"auto":"100%",height:"Left"===t||"Right"===t?"100%":"auto",overflowMode:this.overflowMode,items:0!==i.length?i:[],clicked:this.clickHandler.bind(this),scrollStep:this.scrollStep,enableHtmlSanitizer:this.enableHtmlSanitizer,cssClass:this.cssClass}),this.tbObj.isStringTemplate=!0,this.tbObj.createElement=this.createElement,this.tbObj.appendTo(this.hdrEle),Ve(this.hdrEle,{role:"tablist"}),m(this.element.getAttribute("aria-label"))?m(this.element.getAttribute("aria-labelledby"))||(this.hdrEle.setAttribute("aria-labelledby",this.element.getAttribute("aria-labelledby")),this.element.removeAttribute("aria-labelledby")):(this.hdrEle.setAttribute("aria-label",this.element.getAttribute("aria-label")),this.element.removeAttribute("aria-label")),this.setCloseButton(this.showCloseButton);var r=this.tbObj.element.querySelector("."+tl);m(r)||(m(r.id)||""===r.id)&&(r.id=this.element.id+"_tab_header_items")},t.prototype.renderContent=function(){this.cntEle=Ee("."+Or,this.element);var e=De("."+il,this.element);if(this.isTemplate){this.cnt=this.cntEle.children.length>0?this.cntEle.innerHTML:"";for(var t=this.cntEle.children,i=0;i<e.length;i++)t.length-1>=i&&(be([t.item(i)],zr),Ve(t.item(i),{role:"tabpanel","aria-labelledby":zr+this.tabId+"_"+i}),t.item(i).id=Or+this.tabId+"_"+i)}},t.prototype.reRenderItems=function(){this.renderContainer(),m(this.cntEle)||(this.touchModule=new Gt(this.cntEle,{swipe:this.swipeHandler.bind(this)}))},t.prototype.parseObject=function(e,t){var i=this,n=De(".e-tab-header ."+il,this.element),o=this.lastIndex;if(!this.isReplace&&n.length>0){var s=[];n.forEach((function(e){s.push(i.getIndexFromEle(e.id))})),o=Math.max.apply(Math,s)}var a,r=[],l=[];return e.forEach((function(e,s){var d=m(e.header)||m(e.header.iconPosition)?"":e.header.iconPosition,h=m(e.header)||m(e.header.iconCss)?"":e.header.iconCss;if(m(e.headerTemplate)&&(m(e.header)||m(e.header.text)||0===e.header.text.length&&""===h))l.push(s);else{var p,c=e.headerTemplate||e.header.text;"string"===typeof c&&i.enableHtmlSanitizer&&(c=Vi.sanitize(c)),i.isReplace&&!m(i.tbId)&&""!==i.tbId?(p=parseInt(i.tbId.substring(i.tbId.lastIndexOf("_")+1),10),i.tbId=""):p=t+s,i.lastIndex=0===n.length?s:i.isReplace?p:o+1+s;var u=e.disabled?" "+Hr+" "+al:"",f=!1===e.visible?" "+Wr:"";a=i.createElement("div",{className:Gr,attrs:{role:"presentation"}});var g=c instanceof Object?c.outerHTML:c,y=!m(g)&&""!==g;m(c.tagName)?i.headerTextCompile(a,c,s):a.appendChild(c);var v=i.createElement("span",{className:qr+" "+el+" "+Yr+"-"+d+" "+h}),w=i.createElement("div",{className:$r});w.appendChild(a),""!==c&&void 0!==c&&""!==h?("left"===d||"top"===d?w.insertBefore(v,w.firstElementChild):w.appendChild(v),a,i.isIconAlone=!1):(""===h?a:v)===v&&(Ae(a),w.appendChild(v),i.isIconAlone=!0);var b=m(e.tabIndex)?"-1":e.tabIndex.toString(),S=e.disabled?{}:{tabIndex:b,"data-tabindex":b,role:"tab","aria-selected":"false"};w.appendChild(i.btnCls.cloneNode(!0));var C=i.createElement("div",{className:Kr,attrs:S});C.appendChild(w),i.itemIndexArray===[]?i.itemIndexArray.push(zr+i.tabId+"_"+i.lastIndex):i.itemIndexArray.splice(t+s,0,zr+i.tabId+"_"+i.lastIndex);var x={htmlAttributes:{id:zr+i.tabId+"_"+i.lastIndex},template:C};x.cssClass=(void 0!==e.cssClass?e.cssClass:" ")+" "+u+" "+f+" "+(""!==h?"e-i"+d:"")+" "+(y?"":Yr),"top"!==d&&"bottom"!==d||i.element.classList.add("e-vertical-icon"),r.push(x),s++}})),this.isAdd||l.forEach((function(e){i.items.splice(e,1)})),this.isIconAlone?this.element.classList.add(Qr):this.element.classList.remove(Qr),r},t.prototype.removeActiveClass=function(){var e=this.getTabHeader();if(e){var t=De("."+il+"."+_r,e);[].slice.call(t).forEach((function(e){return e.classList.remove(_r)})),[].slice.call(t).forEach((function(e){return e.firstElementChild.setAttribute("aria-selected","false")}))}},t.prototype.checkPopupOverflow=function(e){this.tbPop=Ee("."+nl,this.element);var t=Ee(".e-hor-nav",this.element),i=Ee("."+tl,this.element),n=i.lastChild,o=!1;return(!this.isVertical()&&(this.enableRtl&&t.offsetLeft+t.offsetWidth>i.offsetLeft||!this.enableRtl&&t.offsetLeft<i.offsetWidth)||this.isVertical()&&t.offsetTop<n.offsetTop+n.offsetHeight)&&(o=!0),o&&(e.classList.add(ol),this.tbPop.insertBefore(e,De("."+ol,this.tbPop)[0])),!0},t.prototype.popupHandler=function(e){var t=e.querySelector(".e-ripple-element");m(t)||(t.outerHTML="",e.querySelector("."+Kr).classList.remove("e-ripple")),this.tbItem=De("."+tl+" ."+il,this.hdrEle);var i=this.tbItem[this.tbItem.length-1];if(0!==this.tbItem.length){if(e.classList.remove(ol),e.removeAttribute("style"),this.tbItems.appendChild(e),this.actEleId=e.id,this.checkPopupOverflow(i)){var n=this.tbItems.lastChild.previousElementSibling;this.checkPopupOverflow(n)}this.isPopup=!0}return De("."+il,this.tbItems).length-1},t.prototype.setCloseButton=function(e){var t=Ee("."+Pr,this.element);!0===e?t.classList.add(Xr):t.classList.remove(Xr),this.tbObj.refreshOverflow(),this.refreshActiveTabBorder()},t.prototype.prevCtnAnimation=function(e,t){this.enableRtl||this.element.classList.contains(Rr);return this.isPopup||e<=t?"SlideLeftIn"===this.animation.previous.effect?{name:"SlideLeftOut",duration:this.animation.previous.duration,timingFunction:this.animation.previous.easing}:null:"SlideRightIn"===this.animation.next.effect?{name:"SlideRightOut",duration:this.animation.next.duration,timingFunction:this.animation.next.easing}:null},t.prototype.triggerPrevAnimation=function(e,t){var i=this,n=this.prevCtnAnimation(t,this.selectedItem);m(n)?e.classList.remove(_r):(n.begin=function(){Le(e,{position:"absolute"}),e.classList.add(sl),e.classList.add("e-view")},n.end=function(){e.style.display="none",e.classList.remove(_r),e.classList.remove(sl),e.classList.remove("e-view"),Le(e,{display:"",position:""}),0!==e.childNodes.length||i.isTemplate||Ae(e)},new st(n).animate(e))},t.prototype.triggerAnimation=function(e,t){var i,n=this,o=this.prevIndex;[].slice.call(this.element.querySelector("."+Or).children).forEach((function(e){e.id===n.prevActiveEle&&(i=e)}));var s=this.tbItem[o],a=this.getTrgContent(this.cntEle,this.extIndex(e));if(m(i)&&!m(s)){var r=this.extIndex(s.id);i=this.getTrgContent(this.cntEle,r)}m(a)||(this.prevActiveEle=a.id);var l=m(this.animation)||this.animation.next==={}||this.animation.previous==={}||m(this.animation.next.effect)||m(this.animation.previous.effect)||"None"==this.animation.previous.effect||"None"==this.animation.next.effect;if(this.initRender||!1===t||this.animation==={}||l)i&&i!==a&&i.classList.remove(_r);else{var d,h=Ee("."+Or,this.element);if(this.prevIndex>this.selectedItem&&!this.isPopup){var p=this.animation.previous.effect;d={name:"None"===p?"":"SlideLeftIn"!==p?p:"SlideLeftIn",duration:this.animation.previous.duration,timingFunction:this.animation.previous.easing}}else if(this.isPopup||this.prevIndex<this.selectedItem||this.prevIndex===this.selectedItem){var c=this.animation.next.effect;d={name:"None"===c?"":"SlideRightIn"!==c?c:"SlideRightIn",duration:this.animation.next.duration,timingFunction:this.animation.next.easing}}d.progress=function(){h.classList.add(sl),n.setActiveBorder()},d.end=function(){h.classList.remove(sl),a.classList.add(_r)},this.initRender||m(i)||this.triggerPrevAnimation(i,o),this.isPopup=!1,""===d.name?a.classList.add(_r):new st(d).animate(a)}},t.prototype.keyPressed=function(e){var t=Fe(e,"."+Pr+" ."+il),i=this.getEleIndex(t);!m(this.popEle)&&e.classList.contains("e-hor-nav")?this.popEle.classList.contains("e-popup-open")?this.popObj.hide(this.hide):this.popObj.show(this.show):e.classList.contains("e-scroll-nav")?e.click():m(t)||!1!==t.classList.contains(_r)||(this.selectTab(i,null,!0),m(this.popEle)||this.popObj.hide(this.hide))},t.prototype.getTabHeader=function(){if(!m(this.element)){var e=[].slice.call(this.element.children).filter((function(e){return e.classList.contains(Pr)}));if(e.length>0)return e[0];var t=[].slice.call(this.element.children).filter((function(e){return!e.classList.contains("blazor-template")}))[0];if(t)return[].slice.call(t.children).filter((function(e){return e.classList.contains(Pr)}))[0]}},t.prototype.getEleIndex=function(e){return Array.prototype.indexOf.call(De("."+il,this.getTabHeader()),e)},t.prototype.extIndex=function(e){return e.replace(zr+this.tabId+"_","")},t.prototype.expTemplateContent=function(){var e=this;this.templateEle.forEach((function(t){m(e.element.querySelector(t))||(document.body.appendChild(e.element.querySelector(t)).style.display="none")}))},t.prototype.templateCompile=function(e,t,i){var n=this.createElement("div");this.compileElement(n,t,"content",i),0!==n.childNodes.length&&e.appendChild(n),this.isReact&&this.renderReactTemplates()},t.prototype.compileElement=function(e,t,i,n){var o,s;"string"===typeof t?(t=t.trim(),this.isVue?o=Mi(Vi.sanitize(t)):e.innerHTML=Vi.sanitize(t)):o=Mi(t),m(o)||(s=o({},this,i)),!m(o)&&s.length>0&&[].slice.call(s).forEach((function(t){e.appendChild(t)}))},t.prototype.headerTextCompile=function(e,t,i){this.compileElement(e,t,"headerTemplate",i)},t.prototype.getContent=function(e,t,i,n){var o;if("string"===typeof(t=m(t)?"":t)||m(t.innerHTML))if("string"===typeof t&&this.enableHtmlSanitizer&&(t=Vi.sanitize(t)),"."===t[0]||"#"===t[0])if(document.querySelectorAll(t).length){var s=document.querySelector(t);o=s.outerHTML.trim(),"clone"===i?e.appendChild(s.cloneNode(!0)):(e.appendChild(s),s.style.display="")}else this.templateCompile(e,t,n);else this.templateCompile(e,t,n);else e.appendChild(t);m(o)||-1===this.templateEle.indexOf(t.toString())&&this.templateEle.push(t.toString())},t.prototype.getTrgContent=function(e,t){return this.element.classList.contains(Br)?Ee("."+Br+"> ."+Or+" > #"+Or+this.tabId+"_"+t,this.element):this.findEle(e.children,Or+this.tabId+"_"+t)},t.prototype.findEle=function(e,t){for(var i,n=0;n<e.length;n++)if(e[n].id===t){i=e[n];break}return i},t.prototype.isVertical=function(){var e="Left"===this.headerPlacement||"Right"===this.headerPlacement;return this.scrCntClass=e?"e-vscroll-content":"e-hscroll-content",e},t.prototype.addVerticalClass=function(){if(this.isVertical()){var e="Left"===this.headerPlacement?dl:hl;be([this.hdrEle],[ll,e]),this.element.classList.contains(Br)?be([this.hdrEle],[rl,e]):be([this.element],[rl,e])}"Bottom"===this.headerPlacement&&be([this.hdrEle],[pl])},t.prototype.updatePopAnimationConfig=function(){this.show={name:this.isVertical()?"FadeIn":"SlideDown",duration:100},this.hide={name:this.isVertical()?"FadeOut":"SlideUp",duration:100}},t.prototype.changeOrientation=function(e){this.setOrientation(e,this.hdrEle);var t=this.hdrEle.querySelector("."+_r),i=!!this.hdrEle.classList.contains(ll);Se([this.element],[rl]),Se([this.hdrEle],[ll,dl,hl]),i!==this.isVertical()&&(this.changeToolbarOrientation(),!m(t)&&t.classList.contains(ol)&&this.popupHandler(t)),this.addVerticalClass(),this.setActiveBorder(),this.focusItem()},t.prototype.focusItem=function(){var e=Ee(" #"+zr+this.tabId+"_"+this.selectedItem,this.hdrEle);m(e)||e.firstElementChild.focus()},t.prototype.changeToolbarOrientation=function(){this.tbObj.setProperties({height:this.isVertical()?"100%":"auto",width:this.isVertical()?"auto":"100%"},!0),this.tbObj.changeOrientation(),this.updatePopAnimationConfig()},t.prototype.setOrientation=function(e,t){var i=Array.prototype.indexOf.call(this.element.children,t),n=Array.prototype.indexOf.call(this.element.children,this.element.querySelector("."+Or));"Bottom"===e&&n>i?this.element.appendChild(t):(Se([t],[pl]),this.element.insertBefore(t,Ee("."+Or,this.element)))},t.prototype.setCssClass=function(e,t,i){if(""!==t)for(var n=t.split(" "),o=0;o<n.length;o++)i?e.classList.add(n[o]):e.classList.remove(n[o])},t.prototype.setContentHeight=function(e){if(this.element.classList.contains(cl)&&Se([this.element],[cl]),!m(this.cntEle)){var t=this.getTabHeader();if("None"===this.heightAdjustMode){if("auto"===this.height)return;this.isVertical()||Le(this.cntEle,{height:this.element.clientHeight-t.offsetHeight+"px"})}else if("Fill"===this.heightAdjustMode)be([this.element],[cl]),Le(this.element,{height:"100%"}),this.cntEle.style.height="calc(100% - "+this.hdrEle.offsetHeight+"px)";else if("Auto"===this.heightAdjustMode){if(!0===this.isTemplate)for(var i=De("."+Or+" > ."+zr,this.element),n=0;n<i.length;n++)i[n].setAttribute("style","display:block; visibility: visible"),this.maxHeight=Math.max(this.maxHeight,this.getHeight(i[n])),i[n].style.removeProperty("display"),i[n].style.removeProperty("visibility");else{this.cntEle=Ee("."+Or,this.element),!0===e&&this.cntEle.appendChild(this.createElement("div",{id:Or+this.tabId+"_0",className:zr+" "+_r,attrs:{role:"tabpanel","aria-labelledby":zr+this.tabId+"_0"}}));var o=this.cntEle.children.item(0);for(n=0;n<this.items.length;n++)for(this.getContent(o,this.items[n].content,"clone",n),this.maxHeight=Math.max(this.maxHeight,this.getHeight(o));o.firstChild;)o.removeChild(o.firstChild);this.isReact&&this.clearTemplate(["content"]),this.templateEle=[],this.getContent(o,this.items[0].content,"render",0),this.prevIndex!==this.selectedItem&&o.classList.remove(_r)}Le(this.cntEle,{height:this.maxHeight+"px"})}else Le(this.cntEle,{height:"auto"})}},t.prototype.getHeight=function(e){var t=window.getComputedStyle(e);return e.offsetHeight+parseFloat(t.getPropertyValue("padding-top"))+parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))},t.prototype.setActiveBorder=function(){var e=this.getTabHeader(),t=Ee("."+il+"."+_r,e);if(!m(t)){this.reorderActiveTab?e&&e.classList.remove(fl):(t.classList.contains(ol)&&!this.bdrLine.classList.contains(Wr)&&this.bdrLine.classList.add(Wr),e&&!e.classList.contains(fl)&&e.classList.add(fl));var i=Fe(t,"."+Lr);if(this.element===i){this.tbItems=Ee("."+tl,e);var n=Ee("."+Jr,e),o=Ee("."+tl+" ."+this.scrCntClass,e);if(this.isVertical()){Le(n,{left:"",right:""}),Le(n,0!==(m(o)?this.tbItems.offsetHeight:o.offsetHeight)?{top:t.offsetTop+"px",height:t.offsetHeight+"px"}:{top:0,height:0})}else{if("MultiRow"===this.overflowMode)Le(n,{top:("Bottom"===this.headerPlacement?t.offsetTop:t.offsetHeight+t.offsetTop)+"px",height:""});else Le(n,{top:"",height:""});var s=m(o)?this.tbItems.offsetWidth:o.offsetWidth;Le(n,0!==s?{left:t.offsetLeft+"px",right:s-(t.offsetLeft+t.offsetWidth)+"px"}:{left:"auto",right:"auto"})}m(this.bdrLine)||t.classList.contains(ol)||this.bdrLine.classList.remove(Wr)}}},t.prototype.setActive=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1),this.tbItem=De("."+il,this.getTabHeader());var n=this.tbItem[e];if(!(e<0||isNaN(e)||0===this.tbItem.length))if(e>=0&&!t&&(this.allowServerDataBinding=!1,this.setProperties({selectedItem:e},!0),this.allowServerDataBinding=!0,this.initRender||this.serverDataBind()),n.classList.contains(_r))this.setActiveBorder();else{this.isTemplate||Ve(n.firstElementChild,{"aria-controls":Or+this.tabId+"_"+e});var o=n.id;this.removeActiveClass(),n.classList.add(_r),n.firstElementChild.setAttribute("aria-selected","true");var s=Number(this.extIndex(o));if(m(this.prevActiveEle)&&(this.prevActiveEle=Or+this.tabId+"_"+s),this.isTemplate){if(Ee("."+Or,this.element).children.length>0){var a=this.findEle(Ee("."+Or,this.element).children,Or+this.tabId+"_"+s);m(a)||a.classList.add(_r),this.triggerAnimation(o,this.enableAnimation)}}else{this.cntEle=Ee(".e-tab > ."+Or,this.element);var r=this.getTrgContent(this.cntEle,this.extIndex(o));if(m(r)){this.cntEle.appendChild(this.createElement("div",{id:Or+this.tabId+"_"+this.extIndex(o),className:zr+" "+_r,attrs:{role:"tabpanel","aria-labelledby":zr+this.tabId+"_"+this.extIndex(o)}}));var l=this.getTrgContent(this.cntEle,this.extIndex(o)),d=Array.prototype.indexOf.call(this.itemIndexArray,o);this.getContent(l,this.items[d].content,"render",d)}else r.classList.add(_r);this.triggerAnimation(o,this.enableAnimation)}if(this.setActiveBorder(),this.refreshItemVisibility(n),!this.initRender&&!t){n.firstElementChild.focus();var h={previousItem:this.prevItem,previousIndex:this.prevIndex,selectedItem:n,selectedIndex:e,selectedContent:Ee("#"+Or+this.tabId+"_"+this.selectingID,this.content),isSwiped:this.isSwipeed,isInteracted:i};this.trigger("selected",h)}}},t.prototype.setItems=function(e){this.isReplace=!0,this.tbItems=Ee("."+tl,this.getTabHeader()),this.tbObj.items=this.parseObject(e,0),this.tbObj.dataBind(),this.isReplace=!1},t.prototype.setRTL=function(e){this.tbObj.enableRtl=e,this.tbObj.dataBind(),this.setCssClass(this.element,Rr,e),this.refreshActiveBorder()},t.prototype.refreshActiveBorder=function(){m(this.bdrLine)||this.bdrLine.classList.add(Wr),this.setActiveBorder()},t.prototype.showPopup=function(e){var t=Ee(".e-popup.e-toolbar-pop",this.hdrEle);if(t.classList.contains("e-popup-close")){var i=t&&t.ej2_instances[0];i.position.X="Left"===this.headerPlacement?"left":"right",i.dataBind(),i.show(e)}},t.prototype.bindDraggable=function(){var e=this;if(this.allowDragAndDrop){var t=this.element.querySelector("."+Pr);if(t)t.querySelectorAll("."+il).forEach((function(t){e.initializeDrag(t)}))}},t.prototype.wireEvents=function(){this.bindDraggable(),window.addEventListener("resize",this.resizeContext),ye.add(this.element,"mouseover",this.hoverHandler,this),ye.add(this.element,"keydown",this.spaceKeyDown,this),m(this.cntEle)||(this.touchModule=new Gt(this.cntEle,{swipe:this.swipeHandler.bind(this)})),this.keyModule=new Ut(this.element,{keyAction:this.keyHandler.bind(this),keyConfigs:this.keyConfigs}),this.tabKeyModule=new Ut(this.element,{keyAction:this.keyHandler.bind(this),keyConfigs:{openPopup:"shift+f10",tab:"tab",shiftTab:"shift+tab"},eventName:"keydown"})},t.prototype.unWireEvents=function(){m(this.keyModule)||this.keyModule.destroy(),m(this.tabKeyModule)||this.tabKeyModule.destroy(),m(this.cntEle)||m(this.touchModule)||(this.touchModule.destroy(),this.touchModule=null),window.removeEventListener("resize",this.resizeContext),ye.remove(this.element,"mouseover",this.hoverHandler),ye.remove(this.element,"keydown",this.spaceKeyDown),this.element.classList.remove(Rr),this.element.classList.remove(Ur)},t.prototype.clickHandler=function(e){this.element.classList.remove(Ur);var t=e.originalEvent.target,i=Fe(t,"."+il),n=this.getEleIndex(i);t.classList.contains(Zr)?this.removeTab(n):this.isVertical()&&Fe(t,".e-hor-nav")?this.showPopup(this.show):(this.isPopup=!1,m(i)||n===this.selectedItem&&n===this.prevIndex||this.selectTab(n,e.originalEvent,!0))},t.prototype.swipeHandler=function(e){if(!(e.velocity<3&&m(e.originalEvent.changedTouches))){this.isNested&&this.element.setAttribute("data-swipe","true");var t=this.element.querySelector('[data-swipe="true"]');if(t)t.removeAttribute("data-swipe");else{if(this.isSwipeed=!0,"Right"===e.swipeDirection&&0!==this.selectedItem){for(var i=this.selectedItem-1;i>=0;i--)if(!this.tbItem[i].classList.contains(Wr)){this.selectTab(i,null,!0);break}}else if("Left"===e.swipeDirection&&this.selectedItem!==De("."+il,this.element).length-1)for(var n=this.selectedItem+1;n<this.tbItem.length;n++)if(!this.tbItem[n].classList.contains(Wr)){this.selectTab(n,null,!0);break}this.isSwipeed=!1}}},t.prototype.spaceKeyDown=function(e){(32===e.keyCode&&32===e.which||35===e.keyCode&&35===e.which)&&(m(Fe(e.target,"."+Pr))||e.preventDefault())},t.prototype.keyHandler=function(e){if(!this.element.classList.contains(Hr)){this.element.classList.add(Ur);var t=e.target,i=this.getTabHeader(),n=Ee("."+_r,i);this.popEle=Ee("."+nl,i),m(this.popEle)||(this.popObj=this.popEle.ej2_instances[0]);var o=Fe(document.activeElement,"."+il),s=Fe(t,"."+il);switch(e.action){case"space":case"enter":if(t.parentElement.classList.contains(Hr))return;if("enter"===e.action&&t.classList.contains("e-hor-nav")){this.showPopup(this.show);break}this.keyPressed(t);break;case"tab":case"shiftTab":t.classList.contains(Kr)&&!1===Fe(t,"."+il).classList.contains(_r)&&t.setAttribute("tabindex",t.getAttribute("data-tabindex")),this.popObj&&xe(this.popObj.element)&&this.popObj.hide(this.hide),m(n)||"-1"!==n.children.item(0).getAttribute("tabindex")||n.children.item(0).setAttribute("tabindex","0");break;case"moveLeft":case"moveRight":m(o)||this.refreshItemVisibility(o);break;case"openPopup":e.preventDefault(),!m(this.popEle)&&this.popEle.classList.contains("e-popup-close")&&this.popObj.show(this.show);break;case"delete":if(!0===this.showCloseButton&&!m(s)){var a=s.nextSibling;!m(a)&&a.classList.contains(il)&&a.firstElementChild.focus(),this.removeTab(this.getEleIndex(s))}this.setActiveBorder()}}},t.prototype.refreshItemVisibility=function(e){var t=Ee("."+this.scrCntClass,this.tbItems);if(!this.isVertical()&&!m(t)){var i=Ee(".e-hscroll-bar",this.tbItems),n=i.scrollLeft,o=n+i.offsetWidth,s=e.offsetLeft,a=e.offsetWidth,r=e.offsetLeft+e.offsetWidth;if(n<s&&o<r){var l=o-s;i.scrollLeft=n+(a-l)}else if(n>s&&o>r){l=r-n;i.scrollLeft=n-(a-l)}}},t.prototype.getIndexFromEle=function(e){return parseInt(e.substring(e.lastIndexOf("_")+1),10)},t.prototype.hoverHandler=function(e){var t=e.target;!m(t.classList)&&t.classList.contains(Zr)&&t.setAttribute("title",new qt("tab",{closeButtonTitle:this.title},this.locale).getConstant("closeButtonTitle"))},t.prototype.evalOnPropertyChangeItems=function(e,t){if(e.items instanceof Array&&t.items instanceof Array)if(this.lastIndex=0,m(this.tbObj))this.reRenderItems();else{(this.isReact||this.isAngular)&&this.clearTemplate(),this.setItems(e.items),this.templateEle.length>0&&this.expTemplateContent(),this.templateEle=[];for(var i=Ee(".e-tab > ."+Or,this.element);i.firstElementChild;)Ae(i.firstElementChild);this.select(this.selectedItem),this.draggableItems=[],this.bindDraggable()}else for(var n=Object.keys(e.items),o=0;o<n.length;o++)for(var s=parseInt(Object.keys(e.items)[o],10),a=Object.keys(e.items[s]),r=0;r<a.length;r++){var l=Object(t.items[s])[a[r]],d=Object(e.items[s])[a[r]],h=this.element.querySelectorAll("."+il)[s],p=void 0;p=h&&!m(h.id)&&""!==h.id?this.getIndexFromEle(h.id):s;var c=Ee("."+tl+" #"+zr+this.tabId+"_"+p,this.element),u=Ee("."+Or+" #"+Or+this.tabId+"_"+p,this.element);if("header"===a[r]||"headerTemplate"===a[r]){var f=m(this.items[s].header)||m(this.items[s].header.iconCss)?"":this.items[s].header.iconCss;if(""===(this.items[s].headerTemplate||this.items[s].header.text)&&""===f)this.removeTab(s);else{this.tbId=h.id;var g=[];g.push(this.items[s]),this.items.splice(s,1),this.itemIndexArray.splice(s,1),this.tbObj.items.splice(s,1);var y=c.classList.contains(Wr);Ae(c),this.isReplace=!0,this.addTab(g,s),y&&this.hideTab(s),this.isReplace=!1}}if("content"===a[r]&&!m(u))if(("string"===typeof d||m(d.innerHTML))&&("."===d[0]||"#"===d[0])&&d.length){var v=document.querySelector(d);u.appendChild(v),v.style.display=""}else""===d&&"#"===l[0]?(document.body.appendChild(this.element.querySelector(l)).style.display="none",u.innerHTML=d):this.isReact?(u.innerHTML="",this.templateCompile(u,d,s)):"function"!==typeof d&&(u.innerHTML=d);"cssClass"===a[r]&&(m(c)||(c.classList.remove(l),c.classList.add(d)),m(u)||(u.classList.remove(l),u.classList.add(d))),"disabled"===a[r]&&this.enableTab(s,!0!==d),"visible"===a[r]&&this.hideTab(s,!0!==d)}},t.prototype.initializeDrag=function(e){var t=this,i=new Bt(e,{dragArea:this.dragArea,dragTarget:"."+il,clone:!0,helper:this.helper.bind(this),dragStart:this.itemDragStart.bind(this),drag:function(e){var i,n,o=t.getEleIndex(t.dragItem),s={draggedItem:t.dragItem,event:e.event,target:e.target,droppedItem:e.target.closest("."+il),clonedElement:t.cloneElement,index:o};if(m(e.target.closest("."+Lr))||e.target.closest("."+Lr).isEqualNode(t.element)||t.dragArea==="."+Pr){if(e.target.closest(t.dragArea)||"Popup"===t.overflowMode?(document.body.style.cursor="",t.dragItem.querySelector("."+Kr).style.visibility="hidden",t.cloneElement.classList.contains(Wr)&&Se([t.cloneElement],Wr)):(document.body.style.cursor="not-allowed",be([t.cloneElement],Wr),t.dragItem.classList.contains(Wr)&&Se([t.dragItem],Wr),t.dragItem.querySelector("."+Kr).style.visibility="visible"),"Scrollable"===t.overflowMode&&!m(t.element.querySelector(".e-hscroll"))){var a=t.element.querySelector(".e-scroll-right-nav"),r=t.element.querySelector(".e-scroll-left-nav"),l=t.element.querySelector(".e-hscroll-bar");!m(a)&&Math.abs(a.offsetWidth/2+a.offsetLeft)>t.cloneElement.offsetLeft+t.cloneElement.offsetWidth&&(l.scrollLeft-=10),!m(r)&&Math.abs(r.offsetLeft+r.offsetWidth-t.cloneElement.offsetLeft)>r.offsetWidth/2&&(l.scrollLeft+=10)}t.cloneElement.style.pointerEvents="none",n=Fe(e.target,"."+il+".e-draggable");var d=0;"Scrollable"!==t.overflowMode||m(t.element.querySelector(".e-hscroll"))||(d=t.element.querySelector(".e-hscroll-content").offsetWidth),null!=n&&!n.isSameNode(t.dragItem)&&n.closest("."+Lr).isSameNode(t.dragItem.closest("."+Lr))&&((i=t.getEleIndex(n))<o&&Math.abs(n.offsetLeft+n.offsetWidth-t.cloneElement.offsetLeft)>n.offsetWidth/2&&t.dragAction(n,o,i),i>o&&Math.abs(n.offsetWidth/2)+n.offsetLeft-d<t.cloneElement.offsetLeft+t.cloneElement.offsetWidth&&t.dragAction(n,o,i)),t.droppedIndex=t.getEleIndex(t.dragItem),t.trigger("dragging",s)}else t.trigger("dragging",s)},dragStop:this.itemDragStop.bind(this)});this.draggableItems.push(i)},t.prototype.helper=function(e){return this.cloneElement=this.createElement("div"),e.element&&(this.cloneElement=e.element.cloneNode(!0),be([this.cloneElement],"e-tab-clone-element"),this.element.querySelector("."+Pr).classList.contains(Xr)&&be([this.cloneElement],Xr),Se([this.cloneElement.querySelector("."+Kr)],"e-ripple"),m(this.cloneElement.querySelector(".e-ripple-element"))||ke(this.cloneElement.querySelector(".e-ripple-element")),document.body.appendChild(this.cloneElement)),this.cloneElement},t.prototype.itemDragStart=function(e){var t=this;this.draggingItems=this.items.map((function(e){return e})),this.dragItem=e.element;var i={draggedItem:e.element,event:e.event,target:e.target,droppedItem:null,index:this.getEleIndex(this.dragItem),clonedElement:this.cloneElement,cancel:!1};this.trigger("onDragStart",i,(function(e){e.cancel?Ae(t.cloneElement):(t.removeActiveClass(),be([t.tbItems.querySelector("."+Jr)],Wr),t.dragItem.querySelector("."+Kr).style.visibility="hidden")}))},t.prototype.dragAction=function(e,t,i){if(this.items.length>0){var n=this.draggingItems[t];this.draggingItems.splice(t,1),this.draggingItems.splice(i,0,n)}if("MultiRow"===this.overflowMode&&e.parentNode.insertBefore(this.dragItem,e.nextElementSibling),t>i)if(this.dragItem.parentElement.isSameNode(e.parentElement))this.dragItem.parentNode.insertBefore(this.dragItem,e);else if("Extended"===this.overflowMode)if(e.isSameNode(e.parentElement.lastChild)){var o=this.dragItem.parentNode;e.parentNode.insertBefore(this.dragItem,e),o.insertBefore(e.parentElement.lastChild,o.childNodes[0])}else this.dragItem.parentNode.insertBefore(e.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),e.parentNode.insertBefore(this.dragItem,e);else{var s=e.parentElement.lastChild;if(e.isSameNode(s)){o=this.dragItem.parentNode;e.parentNode.insertBefore(this.dragItem,e),o.insertBefore(s,o.childNodes[0])}else this.dragItem.parentNode.insertBefore(e.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),e.parentNode.insertBefore(this.dragItem,e)}t<i&&(this.dragItem.parentElement.isSameNode(e.parentElement)?this.dragItem.parentNode.insertBefore(this.dragItem,e.nextElementSibling):"Extended"===this.overflowMode?(this.dragItem.parentElement.appendChild(e.parentElement.firstElementChild),e.parentNode.insertBefore(this.dragItem,e.nextSibling)):(this.dragItem.parentNode.insertBefore(e.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),e.parentNode.insertBefore(this.dragItem,e)))},t.prototype.itemDragStop=function(e){var t=this;Ae(this.cloneElement),this.cloneElement=null,this.dragItem.querySelector("."+Kr).style.visibility="visible",document.body.style.cursor="";var i={draggedItem:this.dragItem,event:e.event,target:e.target,droppedItem:this.tbItem[this.droppedIndex],clonedElement:null,index:this.droppedIndex,cancel:!1};this.trigger("dragged",i,(function(e){e.cancel?t.refresh():t.items.length>0&&t.draggingItems.length>0?(t.items=t.draggingItems,t.selectedItem=t.droppedIndex,t.refresh()):(t.dragItem.querySelector("."+Kr).style.visibility="",Se([t.tbItems.querySelector("."+Jr)],Wr),t.selectTab(t.droppedIndex,null,!0))})),this.dragItem=null},t.prototype.enableTab=function(e,t){var i=De("."+il,this.element)[e];m(i)||(!0===t?(i.classList.remove(Hr,al),i.firstElementChild.setAttribute("tabindex",i.firstElementChild.getAttribute("data-tabindex"))):(i.classList.add(Hr,al),i.firstElementChild.removeAttribute("tabindex"),i.classList.contains(_r)&&this.select(e+1)),m(this.items[e])||(this.items[e].disabled=!t,this.dataBind()),i.setAttribute("aria-disabled",!0===t?"false":"true"))},t.prototype.addTab=function(e,t){var i=this,n={addedItems:e,cancel:!1};this.isReplace?this.addingTabContent(e,t):this.trigger("adding",n,(function(n){n.cancel||i.addingTabContent(e,t)})),this.isReact&&this.renderReactTemplates()},t.prototype.addingTabContent=function(e,t){var i=this,n=0;if(this.hdrEle=Ee("."+Pr,this.element),m(this.hdrEle))this.items=e,this.reRenderItems(),this.bindDraggable();else{var o=De(".e-tab-header ."+il,this.element).length;if(0!==o&&(n=this.lastIndex+1),m(t)&&(t=o-1),o<t||t<0||isNaN(t))return;0!==o||m(this.hdrEle)||(this.hdrEle.style.display=""),m(this.bdrLine)||this.bdrLine.classList.add(Wr),this.tbItems=Ee("."+tl,this.getTabHeader()),this.isAdd=!0;var s=this.parseObject(e,t);this.isAdd=!1;var a,r=0;e.forEach((function(e,o){if(a=e.headerTemplate||e.header.text,m(e.headerTemplate||e.header)||m(a)||0===a.length&&!m(e.header)&&m(e.header.iconCss)||(s[o]&&(m(e.id)&&(e.id=zr+i.tabId+"_"+ul+(n+o).toString()),s[o].htmlAttributes["data-id"]=e.id),i.items.splice(t+r,0,e),r++),i.isTemplate&&!m(e.header)&&!m(e.header.text)){var l=n+o,d=i.createElement("div",{id:Or+i.tabId+"_"+l,className:zr,attrs:{role:"tabpanel","aria-labelledby":zr+"_"+l}});i.cntEle.insertBefore(d,i.cntEle.children[t+o]);var h=i.getTrgContent(i.cntEle,l.toString());i.getContent(h,e.content,"render",t)}})),this.tbObj.addItems(s,t),this.isReplace||this.trigger("added",{addedItems:e}),this.selectedItem===t?this.select(t):(this.setActiveBorder(),this.tbItem=De("."+il,this.getTabHeader())),this.bindDraggable()}},t.prototype.removeTab=function(e){var t=this,i=De("."+il,this.element)[e];if(!m(i)){var n={removedItem:i,removedIndex:e,cancel:!1};this.trigger("removing",n,(function(n){if(!n.cancel){t.tbObj.removeItems(e),t.allowDragAndDrop&&e!==Array.prototype.indexOf.call(t.itemIndexArray,i.id)&&(e=Array.prototype.indexOf.call(t.itemIndexArray,i.id));var o=t.itemIndexArray.indexOf(i.id);t.items.splice(o,1),t.itemIndexArray.splice(o,1),t.refreshActiveBorder();var s=Ee("#"+Or+t.tabId+"_"+t.extIndex(i.id),Ee("."+Or,t.element));if(!m(s)){var a=t.registeredTemplate;if(a&&a.content){for(var r=[],l=0;l<a.content.length;l++){var d=a.content[l].rootNodes[0],h=Fe(d,"."+zr);if(!m(d)&&h===s){r.push(a.content[l]);break}}r.length>0&&t.clearTemplate(["content"],r)}Ae(s)}t.trigger("removed",n),t.draggableItems&&t.draggableItems.length>0&&(t.draggableItems[e].destroy(),t.draggableItems[e]=null,t.draggableItems.splice(e,1)),i.classList.contains(_r)?(e=e>De("."+il+":not(."+ol+")",t.element).length-1?e-1:e,t.enableAnimation=!1,t.selectedItem=e,t.select(e)):e!==t.selectedItem&&(e<t.selectedItem&&(e=t.itemIndexArray.indexOf(t.tbItem[t.selectedItem].id),t.setProperties({selectedItem:e>-1?e:t.selectedItem},!0),t.prevIndex=t.selectedItem),t.tbItem=De("."+il,t.getTabHeader())),0===De("."+il,t.element).length&&(t.hdrEle.style.display="none"),t.enableAnimation=!0}}))}},t.prototype.hideTab=function(e,t){var i,n=De("."+il,this.element)[e];if(!m(n)){if(m(t)&&(t=!0),this.bdrLine.classList.add(Wr),!0===t)if(n.classList.add(Wr),0!==(i=De("."+il+":not(."+Wr+")",this.tbItems)).length&&n.classList.contains(_r)){if(0!==e)for(var o=e-1;o>=0;o--){if(!this.tbItem[o].classList.contains(Wr)){this.select(o);break}if(0===o)for(var s=e+1;s<this.tbItem.length;s++)if(!this.tbItem[s].classList.contains(Wr)){this.select(s);break}}else for(s=e+1;s<this.tbItem.length;s++)if(!this.tbItem[s].classList.contains(Wr)){this.select(s);break}}else 0===i.length&&this.element.classList.add(Wr);else this.element.classList.remove(Wr),i=De("."+il+":not(."+Wr+")",this.tbItems),n.classList.remove(Wr),0===i.length&&this.select(e);this.setActiveBorder(),n.setAttribute("aria-hidden",""+t),"Popup"===this.overflowMode&&this.tbObj&&this.tbObj.refreshOverflow()}},t.prototype.selectTab=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=!1),this.isInteracted=i,this.select(e,t)},t.prototype.select=function(e,t){var i=this,n=this.getTabHeader();this.tbItems=Ee("."+tl,n),this.tbItem=De("."+il,n),this.content=Ee("."+Or,this.element),this.prevItem=this.tbItem[this.prevIndex],m(this.selectedItem)||this.selectedItem<0||this.tbItem.length<=this.selectedItem||isNaN(this.selectedItem)?this.selectedItem=0:this.selectedID=this.extIndex(this.tbItem[this.selectedItem].id);var o=this.tbItem[e];m(o)?this.selectedID="0":this.selectingID=this.extIndex(o.id),m(this.prevItem)||this.prevItem.classList.contains(Hr)||this.prevItem.children.item(0).setAttribute("tabindex",this.prevItem.firstElementChild.getAttribute("tabindex"));var s={event:t,previousItem:this.prevItem,previousIndex:this.prevIndex,selectedItem:this.tbItem[this.selectedItem],selectedIndex:this.selectedItem,selectedContent:m(this.content)?null:Ee("#"+Or+this.tabId+"_"+this.selectedID,this.content),selectingItem:o,selectingIndex:e,selectingContent:m(this.content)?null:Ee("#"+Or+this.tabId+"_"+this.selectingID,this.content),isSwiped:this.isSwipeed,isInteracted:this.isInteracted,cancel:!1};this.initRender?this.selectingContent(e,this.isInteracted):this.trigger("selecting",s,(function(t){t.cancel||i.selectingContent(e,i.isInteracted)})),this.isInteracted=!1},t.prototype.selectingContent=function(e,t){if("number"===typeof e){if(!m(this.tbItem[e])&&(this.tbItem[e].classList.contains(Hr)||this.tbItem[e].classList.contains(Wr)))for(var i=e+1;i<this.items.length;i++){if(!1===this.items[i].disabled&&!0===this.items[i].visible){e=i;break}e=0}if(this.tbItem.length>e&&e>=0&&!isNaN(e))if(this.prevIndex=this.selectedItem,this.prevItem=this.tbItem[this.prevIndex],this.tbItem[e].classList.contains(ol)&&this.reorderActiveTab){if(this.setActive(this.popupHandler(this.tbItem[e]),null,t),!m(this.items)&&this.items.length>0&&this.allowDragAndDrop){this.tbItem=De("."+tl+" ."+il,this.hdrEle);var n=this.items[e];this.items.splice(e,1),this.items.splice(this.tbItem.length-1,0,n);var o=this.itemIndexArray[e];this.itemIndexArray.splice(e,1),this.itemIndexArray.splice(this.tbItem.length-1,0,o)}}else this.setActive(e,null,t);else this.setActive(0,null,t)}else e instanceof HTMLElement&&this.setActive(this.getEleIndex(e),null,t)},t.prototype.getItemIndex=function(e){for(var t,i=0;i<this.tbItem.length;i++){if(e===this.tbItem[i].getAttribute("data-id")){t=i;break}}return t},t.prototype.disable=function(e){this.setCssClass(this.element,Hr,e),this.element.setAttribute("aria-disabled",""+e)},t.prototype.getPersistData=function(){return this.addOnPersist(["selectedItem","actEleId"])},t.prototype.getModuleName=function(){return"tab"},t.prototype.onPropertyChanged=function(e,t){for(var i=this,n=0,o=Object.keys(e);n<o.length;n++){switch(o[n]){case"width":Le(this.element,{width:b(e.width)});break;case"height":Le(this.element,{height:b(e.height)}),this.setContentHeight(!1);break;case"cssClass":var s=this.element.querySelector("."+Pr);""===t.cssClass||m(t.cssClass)?(this.setCssClass(this.element,e.cssClass,!0),m(s)||this.setCssClass(s,e.cssClass,!0)):(this.setCssClass(this.element,t.cssClass,!1),this.setCssClass(this.element,e.cssClass,!0),m(s)||(this.setCssClass(s,t.cssClass,!1),this.setCssClass(s,e.cssClass,!0)));break;case"items":this.evalOnPropertyChangeItems(e,t);break;case"showCloseButton":this.setCloseButton(e.showCloseButton);break;case"reorderActiveTab":this.refreshActiveTabBorder();break;case"selectedItem":this.selectedItem=t.selectedItem,this.select(e.selectedItem);break;case"headerPlacement":this.changeOrientation(e.headerPlacement);break;case"enableRtl":this.setRTL(e.enableRtl);break;case"overflowMode":this.tbObj.overflowMode=e.overflowMode,this.tbObj.dataBind(),this.refreshActiveTabBorder();break;case"heightAdjustMode":this.setContentHeight(!1),this.select(this.selectedItem);break;case"scrollStep":this.tbObj&&(this.tbObj.scrollStep=this.scrollStep);break;case"allowDragAndDrop":this.bindDraggable();break;case"dragArea":this.allowDragAndDrop&&(this.draggableItems.forEach((function(e){e.dragArea=i.dragArea})),this.refresh())}}},t.prototype.refreshActiveTab=function(){if(this.isReact&&this.isTemplate&&this.clearTemplate(),this.isTemplate){var e=this.element.querySelector("."+tl),t=this.element.querySelector("."+il+"."+_r),i=this.getIndexFromEle(t.id),n=t.innerText,o=this.element.querySelector("."+Or).querySelector("."+_r).children[0],s=o.innerHTML;Ae(t),Ae(o);var a={className:il+" "+jr+" "+_r,id:zr+this.tabId+"_"+i},r=this.createElement("span",{className:Gr,innerHTML:n,attrs:{role:"presentation"}}).outerHTML,l=this.createElement("div",{className:$r,innerHTML:r+this.btnCls.outerHTML}).outerHTML,d=(v=t.firstElementChild.getAttribute("data-tabindex"),this.createElement("div",{className:Kr,innerHTML:l,attrs:{tabIndex:v,"data-tabindex":v,role:"tab","aria-controls":Or+this.tabId+"_"+i,"aria-selected":"true"}}));e.insertBefore(this.createElement("div",a),e.children[i+1]),this.element.querySelector("."+il+"."+_r).appendChild(d);S=this.createElement("div",{innerHTML:s});this.element.querySelector("."+Or).querySelector("."+_r).appendChild(S)}else if(this.element.querySelector("."+il+"."+_r)){Ae(this.element.querySelector("."+il+"."+_r).children[0]),Ae(this.element.querySelector("."+Or).querySelector("."+_r).children[0]);var h=this.items[this.selectedItem],p=m(h.header)||m(h.header.iconPosition)?"":h.header.iconPosition,c=m(h.header)||m(h.header.iconCss)?"":h.header.iconCss,u=h.headerTemplate||h.header.text,f=this.createElement("div",{className:Gr,attrs:{role:"presentation"}});m(u.tagName)?this.headerTextCompile(f,u,this.selectedItem):f.appendChild(u);var g=this.createElement("span",{className:qr+" "+el+" "+Yr+"-"+p+" "+c}),y=this.createElement("div",{className:$r});y.appendChild(f),""!==u&&void 0!==u&&""!==c?("left"===p||"top"===p?y.insertBefore(g,y.firstElementChild):y.appendChild(g),f,this.isIconAlone=!1):(""===c?f:g)===g&&(Ae(f),y.appendChild(g),this.isIconAlone=!0);var v=m(h.tabIndex)?"-1":h.tabIndex.toString(),w=h.disabled?{}:{tabIndex:v,"data-tabindex":v,role:"tab","aria-selected":"true"};y.appendChild(this.btnCls.cloneNode(!0));var b=this.createElement("div",{className:Kr,attrs:w});b.appendChild(y),"top"!==p&&"bottom"!==p||this.element.classList.add("e-vertical-icon"),this.element.querySelector("."+il+"."+_r).appendChild(b);var S=this.createElement("div"),C=h.content,x=void 0;if("string"===typeof C||m(C.innerHTML))if("string"===typeof C&&this.enableHtmlSanitizer&&(C=Vi.sanitize(C)),"."===C[0]||"#"===C[0])if(document.querySelectorAll(C).length){var M=document.querySelector(C);x=M.outerHTML.trim(),S.appendChild(M),M.style.display=""}else this.compileElement(S,C,"content",this.selectedItem);else this.compileElement(S,C,"content",this.selectedItem);else S.appendChild(C);m(x)||-1===this.templateEle.indexOf(C.toString())&&this.templateEle.push(C.toString()),this.element.querySelector("."+zr+"."+_r).appendChild(S)}this.isReact&&this.renderReactTemplates()},t.prototype.refreshActiveTabBorder=function(){var e=Ee("."+il+"."+ol+"."+_r,this.element);!m(e)&&this.reorderActiveTab&&this.select(this.getEleIndex(e)),this.refreshActiveBorder()},Fr([Ke([],vl)],t.prototype,"items",void 0),Fr([Ge("100%")],t.prototype,"width",void 0),Fr([Ge("auto")],t.prototype,"height",void 0),Fr([Ge("")],t.prototype,"cssClass",void 0),Fr([Ge(0)],t.prototype,"selectedItem",void 0),Fr([Ge("Top")],t.prototype,"headerPlacement",void 0),Fr([Ge("Content")],t.prototype,"heightAdjustMode",void 0),Fr([Ge("Scrollable")],t.prototype,"overflowMode",void 0),Fr([Ge("Dynamic")],t.prototype,"loadOn",void 0),Fr([Ge(!1)],t.prototype,"enablePersistence",void 0),Fr([Ge(!1)],t.prototype,"enableHtmlSanitizer",void 0),Fr([Ge(!1)],t.prototype,"showCloseButton",void 0),Fr([Ge(!0)],t.prototype,"reorderActiveTab",void 0),Fr([Ge()],t.prototype,"scrollStep",void 0),Fr([Ge()],t.prototype,"dragArea",void 0),Fr([Ge(!1)],t.prototype,"allowDragAndDrop",void 0),Fr([Je({},gl)],t.prototype,"animation",void 0),Fr([$e()],t.prototype,"created",void 0),Fr([$e()],t.prototype,"adding",void 0),Fr([$e()],t.prototype,"added",void 0),Fr([$e()],t.prototype,"selecting",void 0),Fr([$e()],t.prototype,"selected",void 0),Fr([$e()],t.prototype,"removing",void 0),Fr([$e()],t.prototype,"removed",void 0),Fr([$e()],t.prototype,"onDragStart",void 0),Fr([$e()],t.prototype,"dragging",void 0),Fr([$e()],t.prototype,"dragged",void 0),Fr([$e()],t.prototype,"destroyed",void 0),t=Fr([et],t)}(Dt);!function(e){e[e.None=1]="None",e[e.Accepted=2]="Accepted",e[e.Canceled=3]="Canceled",e[e.Completed=4]="Completed",e[e.Rejected=5]="Rejected"}(Qs||(Qs={})),function(e){e[e.None=0]="None",e[e.Bold=1]="Bold",e[e.Italic=2]="Italic",e[e.Underline=4]="Underline",e[e.Strikethrough=8]="Strikethrough"}(Zs||(Zs={})),function(e){e[e.Copy=0]="Copy",e[e.Highlight=1]="Highlight",e[e.Cut=2]="Cut",e[e.Underline=4]="Underline",e[e.Paste=8]="Paste",e[e.Delete=16]="Delete",e[e.ScaleRatio=32]="ScaleRatio",e[e.Strikethrough=64]="Strikethrough",e[e.Properties=128]="Properties",e[e.Comment=256]="Comment"}(Xs||(Xs={})),function(e){e.Draw="Draw",e.Type="Type",e.Image="Image"}(Gs||(Gs={})),function(e){e[e.Corners=1]="Corners",e[e.Edges=2]="Edges"}(Js||(Js={})),function(e){e[e.Draw=1]="Draw",e[e.Text=2]="Text",e[e.Upload=4]="Upload"}(Ks||(Ks={})),function(e){e.auto="auto",e.crossHair="crosshair",e.e_resize="e-resize",e.ew_resize="ew-resize",e.grab="grab",e.grabbing="grabbing",e.move="move",e.n_resize="n-resize",e.ne_resize="ne-resize",e.ns_resize="ns-resize",e.nw_resize="nw-resize",e.pointer="pointer",e.s_resize="s-resize",e.se_resize="se-resize",e.sw_resize="sw-resize",e.text="text",e.w_resize="w-resize"}($s||($s={})),function(e){e.Revised="Revised",e.Reviewed="Reviewed",e.Received="Received",e.Approved="Approved",e.Confidential="Confidential",e.NotApproved="NotApproved"}(ea||(ea={})),function(e){e.Witness="Witness",e.InitialHere="InitialHere",e.SignHere="SignHere",e.Accepted="Accepted",e.Rejected="Rejected"}(ta||(ta={})),function(e){e.Approved="Approved",e.NotApproved="NotApproved",e.Draft="Draft",e.Final="Final",e.Completed="Completed",e.Confidential="Confidential",e.ForPublicRelease="ForPublicRelease",e.NotForPublicRelease="NotForPublicRelease",e.ForComment="ForComment",e.Void="Void",e.PreliminaryResults="PreliminaryResults",e.InformationOnly="InformationOnly"}(ia||(ia={})),function(e){e.Select="Select",e.Move="Move",e.Resize="Resize",e.Delete="Delete",e.None="None",e.PropertyChange="PropertyChange"}(na||(na={})),function(e){e.Json="Json",e.Xfdf="Xfdf"}(oa||(oa={})),function(e){e.Xml="Xml",e.Fdf="Fdf",e.Xfdf="Xfdf",e.Json="Json"}(sa||(sa={}));var bl,Sl=function(){function e(e,t){var i=this;this.mouseMoving=!0,this.canvasTouched=!1,this.imageSignatureDataUrl="",this.drawSignatureDataUrl="",this.newObject=[],this.outputString="",this.drawOutputString="",this.imageOutputString="",this.signaturecollection=[],this.outputcollection=[],this.signAnnotationIndex=[],this.fontsign=[],this.signfontStyle=[],this.isSaveSignature=!1,this.isSaveInitial=!1,this.isInitialFiledSaveSignature=!1,this.isSignatureFieldsSaveSignature=!1,this.saveSignatureString="",this.saveInitialString="",this.saveImageString="",this.signatureImageString="",this.initialImageString="",this.maxSaveLimit=5,this.select=function(e){this.canvasTouched&&(this.mouseMoving=!0,this.canvasTouched=!1),e.isSwiped&&"Draw"==this.signaturetype&&this.mouseMoving&&(e.cancel=!0,this.mouseMoving=!1)},this.addStampImage=function(e){var t=e.target.files;if(null!==e.target.files[0]){var n=t[0];if("image"===n.type.split("/")[0]){var o=new FileReader;o.onload=function(e){var t=document.getElementById(i.pdfViewer.element.id+"_signatureuploadCanvas_"),n=t.getContext("2d"),o=new Image,s=i;o.onload=function(){document.getElementById(i.pdfViewer.element.id+"_e-pv-upload-button").style.visibility="hidden",n.drawImage(o,0,0,t.width,t.height),s.enableCreateButton(!1),s.outputString=o.src,s.signatureImageHeight=o.naturalHeight,s.signatureImageWidth=o.naturalWidth},o.src=e.currentTarget.result,s.outputString=e.currentTarget.result,s.switchTabImageSignature=e.currentTarget.result},o.readAsDataURL(n)}}e.target.value="",e.currentTarget.value=""},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.createSignaturePanel=function(){var e=this;if(this.imageSignatureDataUrl="",this.drawSignatureDataUrl="",S()){var t=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_");if(t){if(!this.pdfViewerBase.pageContainer.querySelector(".e-pv-signature-window"))(i=we("div",{id:this.pdfViewer.element.id+"_signature_window",className:"e-pv-signature-window"})).style.display="block",this.pdfViewerBase.pageContainer.appendChild(i);t.addEventListener("mousedown",this.signaturePanelMouseDown.bind(this)),t.addEventListener("mousemove",this.signaturePanelMouseMove.bind(this)),t.addEventListener("mouseup",this.signaturePanelMouseUp.bind(this)),t.addEventListener("mouseleave",this.signaturePanelMouseUp.bind(this)),t.addEventListener("touchstart",this.signaturePanelMouseDown.bind(this)),t.addEventListener("touchmove",this.signaturePanelMouseMove.bind(this)),t.addEventListener("touchend",this.signaturePanelMouseUp.bind(this)),this.clearSignatureCanvas()}this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenSignaturePanel",this.pdfViewerBase.isToolbarSignClicked)}else{var i;(i=we("div",{id:this.pdfViewer.element.id+"_signature_window",className:"e-pv-signature-window"})).style.display="block",this.pdfViewerBase.pageContainer.appendChild(i);var n=this.createSignatureCanvas(),o=void 0;o=this.pdfViewerBase.isToolbarSignClicked?this.pdfViewerBase.isInitialField?this.pdfViewer.localeObj.getConstant("InitialFieldDialogHeaderText"):this.pdfViewer.localeObj.getConstant("SignatureFieldDialogHeaderText"):this.pdfViewerBase.isInitialField?this.pdfViewer.localeObj.getConstant("HandwrittenInitialDialogHeaderText"):this.pdfViewer.localeObj.getConstant("HandwrittenSignatureDialogHeaderText"),this.signatureDialog?this.signatureDialog.content=n:(this.signatureDialog=new Ko({showCloseIcon:!0,closeOnEscape:!1,isModal:!0,header:o,cssClass:"e-pv-signature-dialog-height",target:this.pdfViewer.element,content:n,width:"750px",visible:!0,allowDragging:!0,beforeClose:function(){e.clearSignatureCanvas(),e.signatureDialog.destroy(),e.signatureDialog=null,e.tabObj&&e.tabObj.destroy();var t=document.getElementById(e.pdfViewer.element.id+"_signature_window");t&&(t.parentNode?t.parentNode.removeChild(t):t.parentElement.removeChild(t)),e.pdfViewerBase.isToolbarSignClicked||e.pdfViewerBase.drawSignatureWithTool||m(e.pdfViewer.formFieldsModule.currentTarget)||e.pdfViewer.fireFocusOutFormField(e.pdfViewer.formFieldsModule.currentTarget.name,""),e.pdfViewerBase.isToolbarSignClicked=!1,e.pdfViewer.formFieldsModule.setFocus()}}),this.signatureDialog.buttons=[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Clear"),disabled:!0,cssClass:"e-pv-clearbtn"},click:this.clearSignatureCanvas.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel"),cssClass:"e-pv-cancelbtn"},click:this.closeSignaturePanel.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Create"),isPrimary:!0,disabled:!0,cssClass:"e-pv-createbtn"},click:this.addSignatureInPage.bind(this)}],this.signatureDialog.appendTo(i)),this.pdfViewer.element.offsetWidth<750&&this.updateCanvasSize(),this.pdfViewer.enableRtl&&(this.signatureDialog.enableRtl=this.pdfViewer.enableRtl);var s=this.signatureDialog.content.ej2_instances[0].items[0];if("DRAW"===s.header.label){var a=document.getElementById("checkbox");this.hideSignatureCheckbox(a)}else if("TYPE"===s.header.label){var r=document.getElementById("checkbox1");this.hideSignatureCheckbox(r)}else{var l=document.getElementById("checkbox2");this.hideSignatureCheckbox(l)}}this.drawSavedSignature()},e.prototype.drawSavedSignature=function(){if(!this.pdfViewerBase.isToolbarSignClicked&&(this.isSaveSignature||this.isSaveInitial)){!this.pdfViewerBase.isInitialField&&this.isSaveSignature?this.outputString=this.saveSignatureString:this.pdfViewerBase.isInitialField&&this.isSaveInitial&&(this.outputString=this.saveInitialString);var e=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_").getContext("2d"),t=new Image;t.onload=function(){e.drawImage(t,0,0)},!this.pdfViewerBase.isInitialField&&this.isSaveSignature?t.src=this.signatureImageString:this.pdfViewerBase.isInitialField&&this.isSaveInitial&&(t.src=this.initialImageString);var i=document.getElementById(this.pdfViewer.element.id+"_signatureCheckBox");i&&(i.checked=!0),this.enableCreateButton(!1),this.enableClearbutton(!1)}},e.prototype.hideSignatureCheckbox=function(e){this.pdfViewerBase.isToolbarSignClicked?this.pdfViewerBase.isInitialField?this.pdfViewer.handWrittenSignatureSettings.initialDialogSettings&&this.pdfViewer.handWrittenSignatureSettings.initialDialogSettings.hideSaveSignature&&this.hideCheckboxParent(e):this.pdfViewer.handWrittenSignatureSettings.signatureDialogSettings&&this.pdfViewer.handWrittenSignatureSettings.signatureDialogSettings.hideSaveSignature&&this.hideCheckboxParent(e):this.pdfViewerBase.isInitialField?this.pdfViewer.initialFieldSettings.initialDialogSettings&&this.pdfViewer.initialFieldSettings.initialDialogSettings.hideSaveSignature&&this.hideCheckboxParent(e):this.pdfViewer.signatureFieldSettings.signatureDialogSettings&&this.pdfViewer.signatureFieldSettings.signatureDialogSettings.hideSaveSignature&&this.hideCheckboxParent(e)},e.prototype.saveSignatureCheckbox=function(){return!this.pdfViewerBase.isToolbarSignClicked&&(this.pdfViewerBase.isInitialField?(!this.pdfViewer.initialFieldSettings.initialDialogSettings||!this.pdfViewer.initialFieldSettings.initialDialogSettings.hideSaveSignature)&&this.isInitialFiledSaveSignature:(!this.pdfViewer.signatureFieldSettings.signatureDialogSettings||!this.pdfViewer.signatureFieldSettings.signatureDialogSettings.hideSaveSignature)&&this.isSignatureFieldsSaveSignature)},e.prototype.hideCheckboxParent=function(e){e&&(e.parentElement.style.display="none")},e.prototype.saveSignatureImage=function(){var e=document.getElementById(this.pdfViewer.element.id+"_signatureCheckBox");if(e&&e.checked){if(""!==this.outputString){this.pdfViewerBase.isInitialField?(this.isSaveInitial=!0,this.saveInitialString=this.outputString):(this.isSaveSignature=!0,this.saveSignatureString=this.outputString);var t=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_");this.saveImageString=t.toDataURL(),this.pdfViewerBase.isInitialField?this.initialImageString=this.saveImageString:this.signatureImageString=this.saveImageString}}else this.isSaveSignature&&!this.pdfViewerBase.isInitialField?(this.isSaveSignature=!1,this.saveSignatureString="",this.saveImageString="",this.signatureImageString=""):this.isSaveInitial&&this.pdfViewerBase.isInitialField&&(this.isSaveInitial=!1,this.saveInitialString="",this.saveImageString="",this.initialImageString=""),this.clearSignatureCanvas()},e.prototype.addSignature=function(e){var t;if(this.pdfViewerBase.isToolbarSignClicked){var i=this.pdfViewer.annotation.createGUID();this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.isSignatureAdded=!0;var n=this.pdfViewerBase.currentPageNumber-1,o=this.pdfViewer.handWrittenSignatureSettings.thickness?this.pdfViewer.handWrittenSignatureSettings.thickness:1,s=this.pdfViewer.handWrittenSignatureSettings.opacity?this.pdfViewer.handWrittenSignatureSettings.opacity:1,a=this.pdfViewer.handWrittenSignatureSettings.strokeColor?this.pdfViewer.handWrittenSignatureSettings.strokeColor:"#000000",r=this.pdfViewer.formFieldsModule.updateSignatureAspectRatio(this.outputString,!0),l=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_");this.saveImageString=l.toDataURL(),this.pdfViewerBase.isInitialField?this.initialImageString=this.saveImageString:this.signatureImageString=this.saveImageString,t={id:"sign"+this.pdfViewerBase.signatureCount,bounds:r,pageIndex:n,data:this.outputString,fontFamily:"Helvetica",fontSize:16,shapeAnnotationType:"HandWrittenSignature",opacity:s,strokeColor:a,thickness:o,signatureName:i},this.pdfViewerBase.currentSignatureAnnot=t;var d=void 0;(d=S()?document.getElementById(this.pdfViewer.element.id+"_signatureCheckBox"):document.getElementById("checkbox"))&&d.checked&&this.addSignatureCollection(),this.hideSignaturePanel(),this.pdfViewerBase.isToolbarSignClicked=!1}else{d=void 0;d=S()?document.getElementById(this.pdfViewer.element.id+"_signatureCheckBox"):document.getElementById("checkbox");var h=!1;if(S()&&e&&("Image"===e[0]?(this.imageAddSignature(),h=!0,this.outputString=""):"Type"===e[0]&&(this.typeAddSignature(),h=!0,this.outputString="")),!h){l=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_");this.saveImageString=l.toDataURL(),d&&d.checked?(this.pdfViewerBase.isInitialField?(this.isSaveInitial=!0,this.initialImageString=this.saveImageString,this.saveInitialString=this.outputString):(this.isSaveSignature=!0,this.signatureImageString=this.saveImageString,this.saveSignatureString=this.outputString),this.checkSaveFiledSign(this.pdfViewerBase.isInitialField,!0)):(this.pdfViewerBase.isInitialField?(this.isSaveInitial=!1,this.saveInitialString=""):(this.isSaveSignature=!1,this.saveSignatureString=""),this.checkSaveFiledSign(this.pdfViewerBase.isInitialField,!1)),this.pdfViewerBase.isInitialField?this.initialImageString=this.saveImageString:this.signatureImageString=this.saveImageString,this.pdfViewer.formFieldsModule.drawSignature(null,null,this.pdfViewerBase.currentTarget,null),h=!0}}},e.prototype.checkSaveFiledSign=function(e,t){e?this.isInitialFiledSaveSignature=t:this.isSignatureFieldsSaveSignature=t},e.prototype.addSignatureInPage=function(){"Draw"===this.signaturetype?this.addSignature():"Type"===this.signaturetype?this.typeAddSignature():this.imageAddSignature(),this.drawOutputString="",this.imageOutputString=""},e.prototype.typeAddSignature=function(){if(this.pdfViewerBase.isToolbarSignClicked){var e,t=this.pdfViewerBase.getZoomFactor(),i=this.pdfViewer.annotation.createGUID();this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.isSignatureAdded=!0;var n,o,s=this.pdfViewerBase.currentPageNumber-1,a=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+s),r=this.pdfViewer.handWrittenSignatureSettings.thickness?this.pdfViewer.handWrittenSignatureSettings.thickness:1,l=this.pdfViewer.handWrittenSignatureSettings.opacity?this.pdfViewer.handWrittenSignatureSettings.opacity:1,d=this.pdfViewer.handWrittenSignatureSettings.strokeColor?this.pdfViewer.handWrittenSignatureSettings.strokeColor:"#000000";n=(parseFloat(a.style.width)/2-100)/t,o=(parseFloat(a.style.height)/2-32.5)/t;var h=this.pdfViewerBase.getZoomFactor();this.signtypevalue||this.updateSignatureTypeValue(!0);var p=this.signtypevalue;e={id:"Typesign"+this.pdfViewerBase.signatureCount,bounds:{left:n/h,top:o/h,x:n/h,y:o/h,width:200,height:65},pageIndex:s,dynamicText:p,data:this.pdfViewerBase.signatureModule.outputString,shapeAnnotationType:"SignatureText",opacity:l,strokeColor:d,thickness:r,fontSize:16,fontFamily:this.fontName,signatureName:i},this.pdfViewerBase.currentSignatureAnnot=e;var c=void 0;(c=S()?document.getElementById(this.pdfViewer.element.id+"_signatureCheckBox"):document.getElementById("checkbox1"))&&c.checked&&this.addSignatureCollection(),this.signtypevalue="",this.hideSignaturePanel(),this.pdfViewerBase.isToolbarSignClicked=!1}else""===this.outputString&&this.updateSignatureTypeValue(),this.pdfViewer.formFieldsModule.drawSignature("Type","",this.pdfViewerBase.currentTarget),this.hideSignaturePanel()},e.prototype.imageAddSignature=function(){if(this.pdfViewerBase.isToolbarSignClicked){var e,t=this.pdfViewerBase.getZoomFactor(),i=this.pdfViewer.annotation.createGUID();this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.isSignatureAdded=!0;var n,o,s=this.pdfViewerBase.currentPageNumber-1,a=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+s),r=this.pdfViewer.handWrittenSignatureSettings.thickness?this.pdfViewer.handWrittenSignatureSettings.thickness:1,l=this.pdfViewer.handWrittenSignatureSettings.opacity?this.pdfViewer.handWrittenSignatureSettings.opacity:1,d=this.pdfViewer.handWrittenSignatureSettings.strokeColor?this.pdfViewer.handWrittenSignatureSettings.strokeColor:"#000000",h=100,p=0,c=0;this.signatureImageHeight>=this.signatureImageWidth?(p=this.signatureImageHeight/this.signatureImageHeight*h,c=this.signatureImageWidth/this.signatureImageHeight*h):(p=this.signatureImageHeight/this.signatureImageWidth*h,c=this.signatureImageWidth/this.signatureImageWidth*h),n=(parseFloat(a.style.width)/2-c/2)/t,o=(parseFloat(a.style.height)/2-p/2)/t;var u=this.pdfViewerBase.getZoomFactor(),f=this.signtypevalue;e={id:"Typesign"+this.pdfViewerBase.signatureCount,bounds:{left:n/u,top:o/u,x:n/u,y:o/u,width:c,height:p},pageIndex:s,dynamicText:f,data:this.pdfViewerBase.signatureModule.outputString,shapeAnnotationType:"SignatureImage",opacity:l,strokeColor:d,thickness:r,fontSize:16,fontFamily:this.fontName,signatureName:i},this.pdfViewerBase.currentSignatureAnnot=e;var m=void 0;(m=S()?document.getElementById(this.pdfViewer.element.id+"_signatureCheckBox"):document.getElementById("checkbox2"))&&m.checked&&this.addSignatureCollection(),this.hideSignaturePanel(),this.pdfViewerBase.isToolbarSignClicked=!1}else this.pdfViewer.formFieldsModule.drawSignature("Image","",this.pdfViewerBase.currentTarget),this.hideSignaturePanel()},e.prototype.updateSignatureTypeValue=function(e){var t=document.querySelectorAll(".e-pv-font-sign");if(t)for(var i=0;i<t.length;i++)if(t[parseInt(i.toString(),10)]&&"red"===t[parseInt(i.toString(),10)].style.borderColor){e?(this.signtypevalue=t[parseInt(i.toString(),10)].textContent,this.outputString=t[parseInt(i.toString(),10)].textContent):this.outputString=t[parseInt(i.toString(),10)].textContent;try{this.fontName=JSON.parse(t[parseInt(i.toString(),10)].style.fontFamily)}catch(n){this.fontName=t[parseInt(i.toString(),10)].style.fontFamily}}},e.prototype.hideSignaturePanel=function(){this.signatureDialog&&this.signatureDialog.hide()},e.prototype.bindTypeSignatureClickEvent=function(){if(S())for(var e=0;e<4;e++){var t=document.querySelector("#"+this.pdfViewer.element.id+"_font_signature"+e);t&&t.addEventListener("click",this.typeSignatureclicked.bind(this))}},e.prototype.bindDrawSignatureClickEvent=function(){var e=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_");e&&(e.addEventListener("mousedown",this.signaturePanelMouseDown.bind(this)),e.addEventListener("mousemove",this.signaturePanelMouseMove.bind(this)),e.addEventListener("mouseup",this.signaturePanelMouseUp.bind(this)),e.addEventListener("mouseleave",this.signaturePanelMouseUp.bind(this)),e.addEventListener("touchstart",this.signaturePanelMouseDown.bind(this)),e.addEventListener("touchmove",this.signaturePanelMouseMove.bind(this)),e.addEventListener("touchend",this.signaturePanelMouseUp.bind(this)))},e.prototype.typeSignatureclicked=function(e){var t=e.target;if(t){for(var i=0;i<4;i++){var n=document.querySelector("#"+this.pdfViewer.element.id+"_font_signature"+i);n&&(n.style.borderColor="")}t.style.borderColor="red",this.outputString=t.textContent;try{this.fontName=JSON.parse(t.style.fontFamily)}catch(o){this.fontName=t.style.fontFamily}this.enableCreateButton(!1)}},e.prototype.createSignatureCanvas=function(){var e=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_"),t=document.getElementById(this.pdfViewer.element.id+"Signature_appearance");e&&e.remove(),t&&t.remove();var i,n,o,s=we("div",{id:this.pdfViewer.element.id+"Signature_appearance",className:"e-pv-signature-apperance",styles:"margin-top:30px"}),a=we("canvas",{id:this.pdfViewer.element.id+"_signatureCanvas_",className:"e-pv-signature-canvas"});this.pdfViewer.element.offsetWidth>750?a.width=714:a.width=this.pdfViewer.element.offsetWidth-35,a.classList.add("e-pv-canvas-signature"),a.height=305,a.style.height="305px",a.style.border="1px dotted #bdbdbd",a.style.backgroundColor="white",a.style.boxSizing="border-box",a.style.borderRadius="2px",a.addEventListener("mousedown",this.signaturePanelMouseDown.bind(this)),a.addEventListener("mousemove",this.signaturePanelMouseMove.bind(this)),a.addEventListener("mouseup",this.signaturePanelMouseUp.bind(this)),a.addEventListener("mouseleave",this.signaturePanelMouseLeave.bind(this)),a.addEventListener("touchstart",this.signaturePanelMouseDown.bind(this)),a.addEventListener("touchmove",this.signaturePanelMouseMove.bind(this)),a.addEventListener("touchend",this.signaturePanelMouseUp.bind(this)),s.appendChild(a),o=this.pdfViewerBase.isToolbarSignClicked&&!this.pdfViewerBase.isInitialField?this.pdfViewer.localeObj.getConstant("Save Signature"):this.pdfViewerBase.isInitialField?this.pdfViewer.localeObj.getConstant("Save Initial"):this.pdfViewer.localeObj.getConstant("Save Signature"),this.pdfViewer.hideSaveSignature||((n=document.createElement("input")).type="checkbox",n.id="checkbox",s.appendChild(n),(i=new wa({label:o,disabled:!1,checked:!1})).appendTo(n)),this.pdfViewerBase.isInitialField?this.isSaveInitial=this.saveSignatureCheckbox():this.isSaveSignature=this.saveSignatureCheckbox(),(this.isSaveSignature&&!this.pdfViewerBase.isInitialField||this.isSaveInitial&&this.pdfViewerBase.isInitialField)&&(i.checked=!0);var r=we("div",{id:this.pdfViewer.element.id+"type_appearance",className:"e-pv-signature-apperance",styles:"margin-top:6px"}),l=document.createElement("input");l.type="text",l.id=this.pdfViewer.element.id+"_e-pv-Signtext-box",r.appendChild(l);var d=new Vs({placeholder:this.pdfViewer.localeObj.getConstant("Enter Signature as Name"),floatLabelType:"Auto"});d.appendTo(l);var h=we("div",{id:this.pdfViewer.element.id+"_font_appearance",className:"e-pv-font-appearance-style"});h.classList.add("e-pv-canvas-signature"),h.style.height="270px",h.style.border="1px dotted #bdbdbd",h.style.boxSizing="border-box",h.style.borderRadius="2px",h.style.backgroundColor="white",h.style.color="black",h.style.marginTop="8px",r.appendChild(h),(n=document.createElement("input")).type="checkbox",n.id="checkbox1",r.appendChild(n),(i=new wa({label:o,disabled:!1,checked:!1})).appendTo(n),d.addEventListener("input",this.renderSignatureText.bind(this)),this.enableCreateButton(!0);var p=we("div",{id:this.pdfViewer.element.id+"Signature_tab"}),c=we("div",{id:this.pdfViewer.element.id+"upload_appearance",className:"e-pv-signature-apperance",styles:"padding-top:30px"}),u=document.createElement("div");u.id=this.pdfViewer.element.id+"_e-pv-upload-button",c.appendChild(u);var f=new Qi({cssClass:"e-pv-sign-upload",content:this.pdfViewer.localeObj.getConstant("Browse Signature Image")});f.appendTo(u),f.element.style.position="absolute";var g=we("canvas",{id:this.pdfViewer.element.id+"_signatureuploadCanvas_",className:"e-pv-signature-uploadcanvas"});this.pdfViewer.element.offsetWidth>750?g.width=714:g.width=this.pdfViewer.element.offsetWidth-35,g.classList.add("e-pv-canvas-signature"),g.height=305,g.style.height="305px",f.element.style.left=g.width/2-50+"px",f.element.style.top=parseFloat(g.style.height)/2+20+"px",g.style.border="1px dotted #bdbdbd",g.style.backgroundColor="white",g.style.boxSizing="border-box",g.style.borderRadius="2px",g.style.zIndex="0",c.appendChild(g),(n=document.createElement("input")).type="checkbox",n.id="checkbox2",c.appendChild(n),(i=new wa({label:o,disabled:!1,checked:!1})).appendTo(n),u.addEventListener("click",this.uploadSignatureImage.bind(this)),this.signfontStyle=[{FontName:"Helvetica"},{FontName:"Times New Roman"},{FontName:"Courier"},{FontName:"Symbol"}];var y=[];if(this.pdfViewerBase.isToolbarSignClicked&&!m(this.pdfViewer.handWrittenSignatureSettings.typeSignatureFonts))for(var v=0;v<4;v++)m(this.pdfViewer.handWrittenSignatureSettings.typeSignatureFonts[parseInt(v.toString(),10)])||(this.signfontStyle[parseInt(v.toString(),10)].FontName=this.pdfViewer.handWrittenSignatureSettings.typeSignatureFonts[parseInt(v.toString(),10)]);for(var w=0;w<this.signfontStyle.length;w++)y[parseInt(w.toString(),10)]=document.createElement("div"),y[parseInt(w.toString(),10)].id="_font_signature"+w,y[parseInt(w.toString(),10)].classList.add("e-pv-font-sign");this.fontsign=y;var b=this,S=[];return S=this.pdfViewerBase.isToolbarSignClicked?this.pdfViewerBase.isInitialField?this.showHideSignatureTab(this.pdfViewer.handWrittenSignatureSettings.initialDialogSettings&&this.pdfViewer.handWrittenSignatureSettings.initialDialogSettings.displayMode,s,r,c):this.showHideSignatureTab(this.pdfViewer.handWrittenSignatureSettings.signatureDialogSettings&&this.pdfViewer.handWrittenSignatureSettings.signatureDialogSettings.displayMode,s,r,c):this.pdfViewerBase.isInitialField?this.showHideSignatureTab(this.pdfViewer.initialFieldSettings.initialDialogSettings?this.pdfViewer.initialFieldSettings.initialDialogSettings.displayMode:7,s,r,c):this.showHideSignatureTab(this.pdfViewer.signatureFieldSettings.signatureDialogSettings?this.pdfViewer.signatureFieldSettings.signatureDialogSettings.displayMode:7,s,r,c),this.tabObj=new wl({selected:function(e){b.handleSelectEvent(e)},selecting:function(e){b.select(e)},items:S}),this.tabObj.appendTo(p),p&&p.lastElementChild&&(p.lastElementChild.style.overflow="hidden"),"DRAW"===S[0].header.label?this.signaturetype="Draw":"TYPE"===S[0].header.label?this.signaturetype="Type":this.signaturetype="Image",p},e.prototype.handleSelectEvent=function(e){var t="",i=document.getElementById(this.pdfViewer.element.id+"Signature_tab").ej2_instances[0];if(i&&i.items.length>0)for(var n=0;n<i.items.length;n++){i.items[parseInt(n.toString(),10)].header.text===e.selectedItem.textContent&&(t=i.items[parseInt(n.toString(),10)].header.label)}var o=document.getElementById("checkbox");if(o&&o.checked){if(0===e.previousIndex&&""!==this.outputString){this.pdfViewerBase.isInitialField?(this.isSaveInitial=!0,this.saveInitialString=this.outputString):(this.isSaveSignature=!0,this.saveSignatureString=this.outputString);var s=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_");this.saveImageString=s.toDataURL(),this.pdfViewerBase.isInitialField?this.initialImageString=this.saveImageString:this.signatureImageString=this.saveImageString}}else this.isSaveSignature&&!this.pdfViewerBase.isInitialField?(this.isSaveSignature=!1,this.saveSignatureString="",this.saveImageString="",this.signatureImageString=""):this.isSaveInitial&&this.pdfViewerBase.isInitialField&&(this.isSaveInitial=!1,this.saveInitialString="",this.saveImageString="",this.initialImageString="");if(this.clearSignatureCanvas(e),"draw"===t.toLocaleLowerCase()){this.signaturetype="Draw",this.enableCreateSignatureButton();var a=document.getElementById("checkbox");this.hideSignatureCheckbox(a)}else if("type"===t.toLocaleLowerCase()){s=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_");this.drawSignatureDataUrl=s.toDataURL(),this.updateSignatureTypeValue(),this.signaturetype="Type",this.enableCreateSignatureButton();var r=document.getElementById("checkbox1");this.hideSignatureCheckbox(r)}else if("upload"===t.toLocaleLowerCase()){s=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_");this.drawSignatureDataUrl=s.toDataURL(),this.signaturetype="Image",this.enableCreateSignatureButton();var l=document.getElementById("checkbox2");this.hideSignatureCheckbox(l)}this.pdfViewer.element.offsetWidth<750&&this.updateCanvasSize(),this.drawSignOnTabSwitch(),"upload"===t.toLocaleLowerCase()&&this.imageSignatureDataUrl&&this.imageSignOnTabSwitch()},e.prototype.enableCreateSignatureButton=function(){""!==this.outputString?this.enableCreateButton(!1):this.enableCreateButton(!0)},e.prototype.showHideSignatureTab=function(e,t,i,n){var o=[];return e&Ks.Draw&&o.push({header:{text:this.pdfViewer.localeObj.getConstant("Draw-hand Signature"),label:"DRAW"},content:t}),e&Ks.Text&&o.push({header:{text:this.pdfViewer.localeObj.getConstant("Type Signature"),label:"TYPE"},content:i}),e&Ks.Upload&&o.push({header:{text:this.pdfViewer.localeObj.getConstant("Upload Signature"),label:"UPLOAD"},content:n}),o},e.prototype.createSignatureFileElement=function(){var e=we("input",{id:this.pdfViewer.element.id+"_signElement",attrs:{type:"file"}});e.setAttribute("accept",".jpg,.jpeg,.png"),e.style.position="absolute",e.style.left="0px",e.style.top="0px",e.style.visibility="hidden",document.body.appendChild(e),e.addEventListener("change",this.addStampImage)},e.prototype.uploadSignatureImage=function(){var e=document.getElementById(this.pdfViewer.element.id+"_signElement");e&&e.click()},e.prototype.renderSignatureText=function(){for(var e=document.getElementById(this.pdfViewer.element.id+"_font_appearance"),t=document.getElementById(this.pdfViewer.element.id+"_e-pv-Signtext-box"),i=0;i<this.signfontStyle.length;i++)this.fontsign[parseInt(i.toString(),10)].innerHTML=t.value,this.fontsign[parseInt(i.toString(),10)].style.fontFamily=this.signfontStyle[parseInt(i.toString(),10)].FontName,"Helvetica"===this.signfontStyle[parseInt(i.toString(),10)].FontName&&(this.fontsign[parseInt(i.toString(),10)].style.borderColor="red"),e.appendChild(this.fontsign[parseInt(i.toString(),10)]);for(i=0;i<this.signfontStyle.length;i++){document.getElementById("_font_signature"+i).addEventListener("click",this.typeSignatureclick.bind(this))}this.enableCreateButton(!1),this.enableClearbutton(!1),this.pdfViewer.element.offsetWidth<750&&this.updateCanvasSize(),this.drawSignOnTabSwitch()},e.prototype.typeSignatureclick=function(){var e=event.target;document.getElementsByClassName("e-pv-createbtn")[0].disabled=!1;for(var t=0;t<4;t++){var i=document.getElementById("_font_signature"+t);i&&(i.style.borderColor="")}e.style.borderColor="red",this.outputString=e.textContent;try{this.fontName=JSON.parse(e.style.fontFamily)}catch(n){this.fontName=e.style.fontFamily}},e.prototype.addSignatureCollection=function(e,t){var i,n=-1,o=-1,s=-1,a=-1,r=es(this.outputString),l=document.createElement("canvas"),d=l.getContext("2d"),h=this.pdfViewerBase.currentSignatureAnnot.shapeAnnotationType;if("HandWrittenSignature"===h){if(0!==r.length){for(var p=0;p<r.length;p++){var c=r[p];if(-1===n)n=c.x,s=c.x,o=c.y,a=c.y;else n>=(b=c.x)&&(n=b),o>=(S=c.y)&&(o=S),s<=b&&(s=b),a<=S&&(a=S)}var u=s-n,f=a-o,m=u/100,g=f/100,y=0,v=0;e?(l.width=t.currentWidth,l.height=t.currentHeight,m=u/e.width,g=f/e.height,y=e.x-t.currentLeft,v=e.y-t.currentTop):(l.width=100,l.height=100),d.beginPath();for(var w=0;w<r.length;w++){var b=((c=r[w]).x-n)/m+y,S=(c.y-o)/g+v;"M"===c.command?d.moveTo(b,S):"L"===c.command&&d.lineTo(b,S)}d.stroke(),d.closePath(),i=l.toDataURL()}}else i=this.outputString;if(e)this.saveImageString=i;else{var C={};C["sign_"+this.pdfViewerBase.imageCount]=this.outputString,this.outputcollection.push(C);var x=[];x.push({id:"sign_"+this.pdfViewerBase.imageCount,imageData:i,signatureType:h,fontFamily:this.pdfViewerBase.currentSignatureAnnot.fontFamily}),this.signaturecollection.push({image:x,isInitial:this.pdfViewerBase.isInitialField}),this.pdfViewerBase.imageCount++}},e.prototype.getSaveLimit=function(e){return e>this.maxSaveLimit?e=this.maxSaveLimit:e<1&&(e=1),e},e.prototype.RenderSavedSignature=function(){this.pdfViewerBase.signatureCount++;var e,t=this.pdfViewerBase.getZoomFactor();if(this.pdfViewerBase.isAddedSignClicked){var i=this.pdfViewer.annotation.createGUID();this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.isSignatureAdded=!0;var n,o,s=this.pdfViewerBase.currentPageNumber-1,a=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+s),r=this.pdfViewer.handWrittenSignatureSettings.width?this.pdfViewer.handWrittenSignatureSettings.width:100,l=this.pdfViewer.handWrittenSignatureSettings.height?this.pdfViewer.handWrittenSignatureSettings.height:100,d=this.pdfViewer.handWrittenSignatureSettings.thickness?this.pdfViewer.handWrittenSignatureSettings.thickness:1,h=this.pdfViewer.handWrittenSignatureSettings.opacity?this.pdfViewer.handWrittenSignatureSettings.opacity:1,p=this.pdfViewer.handWrittenSignatureSettings.strokeColor?this.pdfViewer.handWrittenSignatureSettings.strokeColor:"#000000";n=(parseFloat(a.style.width)/2-r/2)/t,o=(parseFloat(a.style.height)/2-l/2)/t;for(var c="",u=void 0,f=void 0,m=0;m<this.outputcollection.length;m++){var g=this.outputcollection[m];if((v=event.target)&&v.id==="sign_"+m||v&&v.id==="sign_border"+m){c=g["sign_"+m];break}}for(var y=0;y<this.signaturecollection.length;y++){var v=event.target,w=this.signaturecollection[parseInt(y.toString(),10)].image[0].id.split("_")[1];if(v&&v.id==="sign_"+w||v&&v.id==="sign_border"+w){u=this.signaturecollection[parseInt(y.toString(),10)].image[0].signatureType,f=this.signaturecollection[parseInt(y.toString(),10)].image[0].fontFamily;break}}if("HandWrittenSignature"===u){var b=this.pdfViewer.formFieldsModule.updateSignatureAspectRatio(c,!0);r=b.width?b.width:r,l=b.height?b.height:l}else r=150===r?200:this.pdfViewer.handWrittenSignatureSettings.width,l=100===l?65:this.pdfViewer.handWrittenSignatureSettings.height;e={id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:n,y:o,width:r,height:l},pageIndex:s,data:c,shapeAnnotationType:u,opacity:h,fontFamily:f,strokeColor:p,thickness:d,signatureName:i},this.pdfViewerBase.currentSignatureAnnot=e,this.pdfViewerBase.isAddedSignClicked=!1}else this.pdfViewer.formFieldsModule.drawSignature()},e.prototype.updateCanvasSize=function(){var e=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_");this.setTabItemWidth(e);var t=document.getElementById(this.pdfViewer.element.id+"_signatureuploadCanvas_");this.setTabItemWidth(t);var i=document.getElementById(this.pdfViewer.element.id+"_font_appearance");this.setTabItemWidth(i)},e.prototype.setTabItemWidth=function(e){var t=2,i=document.querySelector(".e-dlg-content");if(i){var n=getComputedStyle(i);t=t+parseInt(n.paddingLeft,10)+parseInt(n.paddingRight,10)}e&&this.signatureDialog&&this.signatureDialog.visible&&(this.pdfViewer.element.offsetWidth>750?(e.width=714,e.style.width="714px"):(e.width=this.pdfViewer.element.offsetWidth-t,e.style.width=e.width+"px"));var o=document.getElementsByClassName("e-pv-font-sign");if(e&&o&&o.length>0)for(var s=0;s<o.length;s++){o[parseInt(s.toString(),10)].style.width=e.width/2-50+"px"}},e.prototype.drawSignOnTabSwitch=function(){var e=this,t=new Image;t.onload=function(){var i=document.getElementById(e.pdfViewer.element.id+"_signatureCanvas_");i&&i.getContext("2d").drawImage(t,0,0)},t.src=this.drawSignatureDataUrl},e.prototype.imageSignOnTabSwitch=function(){var e=this,t=new Image;t.onload=function(){var i=document.getElementById(e.pdfViewer.element.id+"_signatureuploadCanvas_");if(i){var n=i.getContext("2d");document.getElementById(e.pdfViewer.element.id+"_e-pv-upload-button").style.visibility="hidden",n.drawImage(t,0,0,i.width,i.height),e.enableCreateButton(!1),e.signatureImageHeight=t.naturalHeight,e.signatureImageWidth=t.naturalWidth}},t.src=this.imageSignatureDataUrl},e.prototype.signaturePanelMouseDown=function(e){"contextmenu"!==e.type&&(e.preventDefault(),this.findMousePosition(e),this.mouseDetection=!0,this.oldX=this.mouseX,this.oldY=this.mouseY,this.newObject=[],this.drawMousePosition(e),this.mouseMoving=!0)},e.prototype.enableCreateButton=function(e){var t=document.getElementsByClassName("e-pv-createbtn")[0];t&&(t.disabled=e),this.enableClearbutton(e)},e.prototype.enableClearbutton=function(e){var t=document.getElementsByClassName("e-pv-clearbtn")[0];t&&(t.disabled=e)},e.prototype.signaturePanelMouseMove=function(e){this.mouseDetection&&"Draw"===this.signaturetype&&(this.findMousePosition(e),this.enableCreateButton(!1),this.drawMousePosition(e))},e.prototype.findMousePosition=function(e){if(-1!==e.type.indexOf("touch")){var t=e.target.getBoundingClientRect();this.mouseX=e.changedTouches[0].clientX-t.left,this.mouseY=e.changedTouches[0].clientY-t.top}else this.mouseX=e.offsetX,this.mouseY=e.offsetY},e.prototype.drawMousePosition=function(e){this.mouseDetection&&(this.drawSignatureInCanvas(),this.oldX=this.mouseX,this.oldY=this.mouseY)},e.prototype.drawSignatureInCanvas=function(){var e=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_").getContext("2d");e.beginPath(),e.moveTo(this.oldX,this.oldY),e.lineTo(this.mouseX,this.mouseY),e.stroke(),e.lineWidth=2,e.arc(this.oldX,this.oldY,1,0,2*Math.PI,!0),e.closePath(),this.newObject.push(this.mouseX,this.mouseY)},e.prototype.signaturePanelMouseUp=function(){this.mouseDetection&&this.convertToPath(this.newObject),this.mouseDetection=!1,"touchend"==event.type&&(this.canvasTouched=!0)},e.prototype.signaturePanelMouseLeave=function(){this.mouseDetection&&this.convertToPath(this.newObject),this.mouseDetection=!1,this.mouseMoving=!1},e.prototype.convertToPath=function(e){this.movePath(e[0],e[1]),this.linePath(e[0],e[1]);for(var t=2;t<e.length;t+=2)this.linePath(e[parseInt(t.toString(),10)],e[t+1])},e.prototype.linePath=function(e,t){this.outputString+="L"+e+","+t+" "},e.prototype.movePath=function(e,t){this.outputString+="M"+e+","+t+" "},e.prototype.clearSignatureCanvas=function(e){var t=!0,i=[];!e||m(e.previousIndex)||m(e.selectedIndex)?(this.outputString="",this.newObject=[]):(t=!1,0===e.previousIndex?(this.drawOutputString=this.outputString,i=this.newObject):2===e.previousIndex&&(this.imageOutputString=this.outputString),this.outputString="",this.newObject=[],0===e.selectedIndex?(this.outputString=this.drawOutputString,this.newObject=i):2===e.selectedIndex&&(this.outputString=this.imageOutputString));var n=!1,o=!1,s=!1;e&&e.currentTarget&&e.currentTarget.classList.contains("e-pv-clearbtn")&&(t=!1,"Draw"===this.signaturetype?n=!0:"Type"===this.signaturetype?o=!0:s=!0);var a=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_");(a&&t||n)&&a.getContext("2d").clearRect(0,0,a.width,a.height);var r=document.getElementById(this.pdfViewer.element.id+"_signatureuploadCanvas_");if(r&&t||s){r.getContext("2d").clearRect(0,0,r.width,r.height);var l=document.getElementById(this.pdfViewer.element.id+"_e-pv-upload-button");l&&(l.style.visibility="")}var d=document.getElementById(this.pdfViewer.element.id+"_font_appearance"),h=document.getElementById(this.pdfViewer.element.id+"_e-pv-Signtext-box");(d&&h&&t||o)&&(h.value="",S()||(d.innerHTML="")),this.enableCreateButton(!0)},e.prototype.closeSignaturePanel=function(){this.pdfViewerBase.currentTarget&&(this.pdfViewerBase.drawSignatureWithTool=!0),this.clearSignatureCanvas(),S()||this.signatureDialog.hide(),this.pdfViewerBase.isToolbarSignClicked=!1,this.pdfViewerBase.drawSignatureWithTool=!1,this.drawOutputString="",this.imageOutputString=""},e.prototype.saveSignature=function(){var e=null;e=this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sign"]:window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sign");for(var t=new Array,i=0;i<this.pdfViewerBase.pageCount;i++)t[parseInt(i.toString(),10)]=[];if(e)for(var n=JSON.parse(e),o=0;o<n.length;o++){var s=[],a=n[parseInt(o.toString(),10)];if(a){for(var r=0;a.annotations.length>r;r++){var l=a.annotations[parseInt(r.toString(),10)].strokeColor?a.annotations[parseInt(r.toString(),10)].strokeColor:"black";if(a.annotations[parseInt(r.toString(),10)].strokeColor=JSON.stringify(this.getRgbCode(l)),a.annotations[parseInt(r.toString(),10)].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(a.annotations[parseInt(r.toString(),10)].bounds,a.pageIndex)),"HandWrittenSignature"===a.annotations[parseInt(r.toString(),10)].shapeAnnotationType||"ink"===a.annotations[parseInt(r.toString(),10)].signatureName){var d=os(es(a.annotations[parseInt(r.toString(),10)].data));a.annotations[parseInt(r.toString(),10)].data=JSON.stringify(d)}else if("SignatureText"!==a.annotations[parseInt(r.toString(),10)].shapeAnnotationType||this.checkDefaultFont(a.annotations[parseInt(r.toString(),10)].fontFamily))a.annotations[parseInt(r.toString(),10)].data=JSON.stringify(a.annotations[parseInt(r.toString(),10)].data);else{var h=we("canvas"),p=JSON.parse(a.annotations[parseInt(r.toString(),10)].bounds);h.width=p&&p.width||150,h.height=p&&p.height||2*a.annotations[parseInt(r.toString(),10)].fontSize;var c=h.getContext("2d"),u=h.width/2,f=h.height/2+a.annotations[parseInt(r.toString(),10)].fontSize/2-10;c.textAlign="center",c.font=a.annotations[parseInt(r.toString(),10)].fontSize+"px "+a.annotations[parseInt(r.toString(),10)].fontFamily,c.fillText(a.annotations[parseInt(r.toString(),10)].data,u,f),a.annotations[parseInt(r.toString(),10)].data=JSON.stringify(h.toDataURL("image/png")),a.annotations[parseInt(r.toString(),10)].shapeAnnotationType="SignatureImage"}}s=a.annotations}t[a.pageIndex]=s}return JSON.stringify(t)},e.prototype.checkDefaultFont=function(e){return"Helvetica"===e||"Times New Roman"===e||"Courier"===e||"Symbol"===e},e.prototype.getRgbCode=function(e){e.match(/#([a-z0-9]+)/gi)||e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)||(e=this.pdfViewer.annotationModule.nameToHash(e));var t=e.split(",");return m(t[1])&&(t=(e=this.pdfViewer.annotationModule.getValue(e,"rgba")).split(",")),{r:parseInt(t[0].split("(")[1]),g:parseInt(t[1]),b:parseInt(t[2]),a:parseInt(t[3])}},e.prototype.renderSignature=function(e,t){var i,n=this.pdfViewerBase.currentSignatureAnnot,o=this.pdfViewer.annotation.createGUID();if(n){"HandWrittenSignature"===this.pdfViewerBase.currentSignatureAnnot.shapeAnnotationType&&(i={id:n.id,bounds:{x:e,y:t,width:n.bounds.width,height:n.bounds.height},pageIndex:n.pageIndex,data:n.data,shapeAnnotationType:"HandWrittenSignature",opacity:n.opacity,fontFamily:n.fontFamily,fontSize:n.fontSize,strokeColor:n.strokeColor,thickness:n.thickness,signatureName:o}),"SignatureText"===this.pdfViewerBase.currentSignatureAnnot.shapeAnnotationType?i={id:n.id,bounds:{x:e,y:t,width:n.bounds.width,height:n.bounds.height},pageIndex:n.pageIndex,data:n.data,shapeAnnotationType:"SignatureText",opacity:n.opacity,fontFamily:n.fontFamily,fontSize:n.fontSize,strokeColor:n.strokeColor,thickness:n.thickness,signatureName:o}:"SignatureImage"===this.pdfViewerBase.currentSignatureAnnot.shapeAnnotationType&&(i={id:n.id,bounds:{x:e,y:t,width:n.bounds.width,height:n.bounds.height},pageIndex:n.pageIndex,data:n.data,shapeAnnotationType:"SignatureImage",opacity:n.opacity,fontFamily:n.fontFamily,fontSize:n.fontSize,strokeColor:n.strokeColor,thickness:n.thickness,signatureName:o}),this.pdfViewer.add(i);var s=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+n.pageIndex);this.pdfViewer.renderDrawing(s,n.pageIndex),this.pdfViewerBase.signatureAdded=!0,this.storeSignatureData(n.pageIndex,i),this.pdfViewer.fireSignatureAdd(n.pageIndex,n.signatureName,n.shapeAnnotationType,n.bounds,n.opacity,n.strokeColor,n.thickness),this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.signatureCount++}},e.prototype.renderExistingSignature=function(e,t,i){var n,o=!1;if(!i)for(var s=0;s<this.signAnnotationIndex.length;s++)if(this.signAnnotationIndex[parseInt(s.toString(),10)]===t){o=!0;break}if(e&&!o){e.length>0&&-1===this.signAnnotationIndex.indexOf(t)&&this.signAnnotationIndex.push(t);for(var a=0;a<e.length;a++){var r=e[a];if(r){var l=r.PathData;i&&(l=r.IsSignature?r.PathData:"SignatureImage"===r.AnnotationType||"SignatureText"===r.AnnotationType?JSON.parse(JSON.stringify(r.PathData)):l.includes("command")?ss(JSON.parse(r.PathData)):r.PathData),this.outputString=l,this.outputString="";var d=r.Bounds,h=m(d.X)?d.x+0:d.X+0,p=m(d.Y)?d.y+0:d.Y+0,c=d.Width?d.Width-0:d.width-0,u=d.Height?d.Height-0:d.height-0;n="SignatureText"===r.AnnotationType?{id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:h,y:p,width:c,height:u},pageIndex:t,data:l,fontFamily:r.FontFamily,fontSize:r.FontSize,shapeAnnotationType:"SignatureText",opacity:r.Opacity,strokeColor:r.StrokeColor,thickness:r.Thickness,signatureName:r.SignatureName}:"SignatureImage"===r.AnnotationType?{id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:h,y:p,width:c,height:u},pageIndex:t,data:l,shapeAnnotationType:"SignatureImage",opacity:r.Opacity,strokeColor:r.StrokeColor,thickness:r.Thickness,signatureName:r.SignatureName}:{id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:h,y:p,width:c,height:u},pageIndex:t,data:l,shapeAnnotationType:"HandWrittenSignature",opacity:r.Opacity,strokeColor:r.StrokeColor,thickness:r.Thickness,signatureName:r.SignatureName?r.SignatureName:"ink"}}this.pdfViewer.add(n);var f=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+r.pageIndex);this.pdfViewer.renderDrawing(f,n.pageIndex),this.storeSignatureData(n.pageIndex,n),this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.signatureCount++,this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.annotationMenuObj&&this.pdfViewer.isSignatureEditable&&(this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export Annotations")],!0),this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export XFDF")],!0))}}},e.prototype.storeSignatureData=function(e,t){this.pdfViewer.annotation.addAction(t.pageIndex?t.pageIndex:t.PageIndex,null,t,"Addition","",t,t);var i,n,o,s,a,r;t.bounds?(n=t.bounds.left?t.bounds.left:t.bounds.x,o=t.bounds.top?t.bounds.top:t.bounds.y,s=t.bounds.width,a=t.bounds.height,r=t.pageIndex):(n=t.Bounds.left?t.Bounds.left:t.Bounds.x,o=t.Bounds.top?t.Bounds.top:t.Bounds.y,s=t.LineBounds.Width,a=t.LineBounds.Height,r=t.PageIndex),t.wrapper&&t.wrapper.bounds&&(n=t.wrapper.bounds.left,o=t.wrapper.bounds.top),i={id:t.id?t.id:null,bounds:{left:n,top:o,width:s,height:a},shapeAnnotationType:t.shapeAnnotationType?t.shapeAnnotationType:"ink",opacity:t.opacity?t.opacity:1,thickness:t.thickness?t.thickness:1,strokeColor:t.strokeColor?t.strokeColor:null,pageIndex:r,data:t.data?t.data:t.Value,fontSize:t.fontSize?t.fontSize:null,fontFamily:t.fontFamily?t.fontFamily:null,signatureName:t.signatureName?t.signatureName:t.Name},Math.round(JSON.stringify(window.sessionStorage).length/1024)+Math.round(JSON.stringify(i).length/1024)>4500&&(this.pdfViewerBase.isStorageExceed=!0,this.pdfViewer.annotationModule.clearAnnotationStorage(),this.pdfViewerBase.isFormStorageExceed||this.pdfViewer.formFieldsModule.clearFormFieldStorage());var l=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sign");if(l){this.storeSignatureCollections(i,e);var d=JSON.parse(l);window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_sign");var h=this.pdfViewer.annotationModule.getPageCollection(d,e);if(!m(h)&&d[parseInt(h.toString(),10)])d[parseInt(h.toString(),10)].annotations.push(i),d[parseInt(h.toString(),10)].annotations.indexOf(i);else{var p={pageIndex:e,annotations:[]};p.annotations.push(i),p.annotations.indexOf(i),d.push(p)}f=JSON.stringify(d);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sign"]=f:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_sign",f)}else{this.storeSignatureCollections(i,e);var c={pageIndex:e,annotations:[]};c.annotations.push(i),c.annotations.indexOf(i);var u=[];u.push(c);var f=JSON.stringify(u);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sign"]=f:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_sign",f)}},e.prototype.modifySignatureCollection=function(e,t,i,n){this.pdfViewerBase.updateDocumentEditedProperty(!0);var o=null,s=this.getAnnotations(t,null);if(null!=s&&i){for(var a=0;a<s.length;a++)if(i.id===s[parseInt(a.toString(),10)].id){if("bounds"===e)s[parseInt(a.toString(),10)].bounds={left:i.wrapper.bounds.left,top:i.wrapper.bounds.top,width:i.bounds.width,height:i.bounds.height},s[parseInt(a.toString(),10)].fontSize=i.fontSize;else if("stroke"===e)s[parseInt(a.toString(),10)].strokeColor=i.wrapper.children[0].style.strokeColor;else if("opacity"===e)s[parseInt(a.toString(),10)].opacity=i.wrapper.children[0].style.opacity;else if("thickness"===e)s[parseInt(a.toString(),10)].thickness=i.wrapper.children[0].style.strokeWidth;else if("delete"===e){this.updateSignatureCollection(s[parseInt(a.toString(),10)]),o=s.splice(a,1)[0];break}if(e&&"delete"!==e&&this.storeSignatureCollections(s[parseInt(a.toString(),10)],t),n){s[parseInt(a.toString(),10)].opacity=i.wrapper.children[0].style.opacity,s[parseInt(a.toString(),10)].strokeColor=i.wrapper.children[0].style.strokeColor,s[parseInt(a.toString(),10)].thickness=i.wrapper.children[0].style.strokeWidth,this.storeSignatureCollections(s[parseInt(a.toString(),10)],t);break}}this.manageAnnotations(s,t)}return o},e.prototype.storeSignatureCollections=function(e,t){var i=this.checkSignatureCollection(e),n=qs(e);n.annotationId=e.signatureName,n.pageNumber=t,delete n.annotName,e.id&&(n.uniqueKey=e.id,delete n.id),i.isExisting?this.pdfViewer.signatureCollection.splice(i.position,0,n):this.pdfViewer.signatureCollection.push(n)},e.prototype.checkSignatureCollection=function(e){var t=this.pdfViewer.signatureCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[parseInt(i.toString(),10)].annotationId===e.signatureName)return this.pdfViewer.signatureCollection.splice(i,1),{isExisting:!0,position:i};return{isExisting:!1,position:null}},e.prototype.updateSignatureCollection=function(e){var t=this.pdfViewer.signatureCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[parseInt(i.toString(),10)].annotationId===e.signatureName){this.pdfViewer.signatureCollection.splice(i,1);break}},e.prototype.addInCollection=function(e,t){if(t){this.storeSignatureCollections(t,e);var i=this.getAnnotations(e,null);i&&i.push(t),this.manageAnnotations(i,e)}},e.prototype.getAnnotations=function(e,t){var i,n=null;if(n=this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sign"]:window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sign")){var o=JSON.parse(n),s=this.pdfViewer.annotationModule.getPageCollection(o,e);i=o[parseInt(s.toString(),10)]?o[parseInt(s.toString(),10)].annotations:t}else i=t;return i},e.prototype.manageAnnotations=function(e,t){var i=null;if(i=this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sign"]:window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sign")){var n=JSON.parse(i);window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_sign");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[parseInt(o.toString(),10)]&&(n[parseInt(o.toString(),10)].annotations=e);var s=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sign"]=s:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_sign",s)}},e.prototype.showSignatureDialog=function(e){e&&this.createSignaturePanel()},e.prototype.setAnnotationMode=function(){this.pdfViewerBase.isToolbarSignClicked=!0,this.showSignatureDialog(!0)},e.prototype.setInitialMode=function(){this.pdfViewerBase.isToolbarSignClicked=!0,this.pdfViewerBase.isInitialField=!0,this.showSignatureDialog(!0)},e.prototype.ConvertPointToPixel=function(e){return e*(96/72)},e.prototype.updateSignatureCollections=function(e,t,i){if(e){var n=e.Bounds,o=n.X,s=n.Y,a=n.Width,r=n.Height,l=e.PathData;return i&&(l=ss(JSON.parse(e.PathData))),{id:"sign"+e.SignatureName,bounds:{x:o,y:s,width:a,height:r},pageIndex:t,data:l,shapeAnnotationType:"HandWrittenSignature",opacity:e.Opacity,strokeColor:e.StrokeColor,thickness:e.Thickness,signatureName:e.SignatureName}}},e.prototype.destroy=function(){window.sessionStorage.removeItem("_annotations_sign");var e=document.getElementById(this.pdfViewer.element.id+"_signElement");e&&(e.removeEventListener("change",this.addStampImage),e.parentElement&&e.parentElement.removeChild(e)),this.signatureDialog&&this.signatureDialog.destroy()},e}(),Cl=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),xl={GroupGuid:"{271bbba0-1ee7}"},Ml=function(){function e(t){this.options={from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",expand:"expand"},this.type=e,this.dataSource=t,this.pvt={}}return e.prototype.processResponse=function(e,t,i,n){return e},e}(),Il=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cl(t,e),t.prototype.processQuery=function(e,t){for(var i,n,o,s=e.dataSource.json.slice(0),a=s.length,r=!0,l={},d=0,h=[],p=0;p<t.lazyLoad.length;p++)d++,l[t.lazyLoad[p].key]=t.lazyLoad[p].value;var c={};for(p=0;p<t.queries.length;p++)"onPage"!==(n=t.queries[p]).fn&&"onGroup"!==n.fn||!t.lazyLoad.length?(i=this[n.fn].call(this,s,n.e,t),"onAggregates"===n.fn?c[n.e.field+" - "+n.e.type]=i:s=void 0!==i?i:s,"onPage"!==n.fn&&"onSkip"!==n.fn&&"onTake"!==n.fn&&"onRange"!==n.fn||(r=!1),r&&(a=s.length)):("onGroup"===n.fn&&h.push(n.e),"onPage"===n.fn&&(o=n.e));if(d){var u={query:t,lazyLoad:l,result:s,group:h,page:o},f=this.lazyLoadGroup(u);s=f.result,a=f.count}return t.isCountRequired&&(s={result:s,count:a,aggregates:c}),s},t.prototype.lazyLoadGroup=function(e){var t=0,i=this.getAggregate(e.query),n=e.result;if(m(e.lazyLoad.onDemandGroupInfo)){a=e.group[0].fieldName;t=(n=Ol.group(n,a,i,null,null,e.group[0].comparer,!0)).length;r=n;e.page&&(n=this.onPage(n,e.page,e.query)),this.formGroupResult(n,r)}else{for(var o=e.lazyLoad.onDemandGroupInfo,s=o.where.length-1;s>=0;s--)n=this.onWhere(n,o.where[s]);if(e.group.length!==o.level){var a=e.group[o.level].fieldName;n=Ol.group(n,a,i,null,null,e.group[0].comparer,!0)}t=n.length;var r=n;n=(n=n.slice(o.skip)).slice(0,o.take),e.group.length!==o.level&&this.formGroupResult(n,r)}return{result:n,count:t}},t.prototype.formGroupResult=function(e,t){if(e.length&&t.length){var i="GroupGuid",n="childLevels",o="level",s="records";e[i]=t[i],e[n]=t[n],e[o]=t[o],e[s]=t[s]}return e},t.prototype.getAggregate=function(e){var t=Bl.filterQueries(e.queries,"onAggregates"),i=[];if(t.length)for(var n=void 0,o=0;o<t.length;o++)n=t[o].e,i.push({type:n.type,field:Ol.getValue(n.field,e)});return i},t.prototype.batchRequest=function(e,t,i){var n,o=t.deletedRecords.length;for(n=0;n<t.addedRecords.length;n++)this.insert(e,t.addedRecords[n]);for(n=0;n<t.changedRecords.length;n++)this.update(e,i.key,t.changedRecords[n]);for(n=0;n<o;n++)this.remove(e,i.key,t.deletedRecords[n]);return t},t.prototype.onWhere=function(e,t){return e&&e.length?e.filter((function(e){if(t)return t.validate(e)})):e},t.prototype.onAggregates=function(e,t){var i=Ol.aggregates[t.type];return e&&i&&0!==e.length?i(e,t.field):null},t.prototype.onSearch=function(e,t){return e&&e.length?(0===t.fieldNames.length&&Ol.getFieldList(e[0],t.fieldNames),e.filter((function(e){for(var i=0;i<t.fieldNames.length;i++)if(t.comparer.call(e,Ol.getObject(t.fieldNames[i],e),t.searchKey,t.ignoreCase,t.ignoreAccent))return!0;return!1}))):e},t.prototype.onSortBy=function(e,t,i){if(!e||!e.length)return e;var n,o=Ol.getValue(t.fieldName,i);if(!o)return e.sort(t.comparer);if(o instanceof Array){for(var s=(o=o.slice(0)).length-1;s>=0;s--)o[s]&&(n=t.comparer,Ol.endsWith(o[s]," desc")&&(n=Ol.fnSort("descending"),o[s]=o[s].replace(" desc","")),e=Ol.sort(e,o[s],n));return e}return Ol.sort(e,o,t.comparer)},t.prototype.onGroup=function(e,t,i){if(!e||!e.length)return e;var n=this.getAggregate(i);return Ol.group(e,Ol.getValue(t.fieldName,i),n,null,null,t.comparer)},t.prototype.onPage=function(e,t,i){var n=Ol.getValue(t.pageSize,i),o=(Ol.getValue(t.pageIndex,i)-1)*n,s=o+n;return e&&e.length?e.slice(o,s):e},t.prototype.onRange=function(e,t){return e&&e.length?e.slice(Ol.getValue(t.start),Ol.getValue(t.end)):e},t.prototype.onTake=function(e,t){return e&&e.length?e.slice(0,Ol.getValue(t.nos)):e},t.prototype.onSkip=function(e,t){return e&&e.length?e.slice(Ol.getValue(t.nos)):e},t.prototype.onSelect=function(e,t){return e&&e.length?Ol.select(e,Ol.getValue(t.fieldNames)):e},t.prototype.insert=function(e,t,i,n,o){return m(o)?e.dataSource.json.push(t):e.dataSource.json.splice(o,0,t)},t.prototype.remove=function(e,t,i,n){var o,s=e.dataSource.json;for("object"!==typeof i||i instanceof Date||(i=Ol.getObject(t,i)),o=0;o<s.length&&Ol.getObject(t,s[o])!==i;o++);return o!==s.length?s.splice(o,1):null},t.prototype.update=function(e,t,i,n){var o,s,a=e.dataSource.json;for(m(t)||(s=l(t,i)),o=0;o<a.length&&(m(t)||l(t,a[o])!==s);o++);return o<a.length?u(a[o],i):null},t}(Ml),Tl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cl(t,e),t.prototype.processQuery=function(e,t,i){var n,o,s=this.getQueryRequest(t),a=Bl.filterQueryLists(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),r=t.params,l=e.dataSource.url,d=null,h=this.options,p={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};"onPage"in a?(n=a.onPage,o=((o=Ol.getValue(n.pageIndex,t))-1)*(d=Ol.getValue(n.pageSize,t))):"onRange"in a&&(o=(n=a.onRange).start,d=n.end-n.start);for(var c=0;c<s.sorts.length;c++)n=Ol.getValue(s.sorts[c].e.fieldName,t),p.sorts.push(Ol.callAdaptorFunction(this,"onEachSort",{name:n,direction:s.sorts[c].e.direction},t));i&&(n=this.getFiltersFrom(i,t))&&p.filters.push(Ol.callAdaptorFunction(this,"onEachWhere",n.toJson(),t));for(c=0;c<s.filters.length;c++){var u=Ol.callAdaptorFunction(this,"onEachWhere",s.filters[c].e.toJson(),t);this.getModuleName&&"ODataV4Adaptor"===this.getModuleName()&&!m(s.filters[c].e.key)&&s.filters.length>1&&(u="("+u+")"),p.filters.push(u);for(var f=0,g="object"===typeof p.filters[c]?Object.keys(p.filters[c]):[];f<g.length;f++){var y=g[f];Ol.isNull(p[y])&&delete p[y]}}for(c=0;c<s.searches.length;c++)n=s.searches[c].e,p.searches.push(Ol.callAdaptorFunction(this,"onEachSearch",{fields:n.fieldNames,operator:n.operator,key:n.searchKey,ignoreCase:n.ignoreCase},t));for(c=0;c<s.groups.length;c++)p.groups.push(Ol.getValue(s.groups[c].e.fieldName,t));for(c=0;c<s.aggregates.length;c++)n=s.aggregates[c].e,p.aggregates.push({type:n.type,field:Ol.getValue(n.field,t)});var v={};if(this.getRequestQuery(h,t,a,p,v),Ol.callAdaptorFunction(this,"addParams",{dm:e,query:t,params:r,reqParams:v}),t.lazyLoad.length)for(c=0;c<t.lazyLoad.length;c++)v[t.lazyLoad[c].key]=t.lazyLoad[c].value;for(var w=0,b=Object.keys(v);w<b.length;w++){y=b[w];(Ol.isNull(v[y])||""===v[y]||0===v[y].length)&&delete v[y]}h.skip in v&&h.take in v||null===d||(v[h.skip]=Ol.callAdaptorFunction(this,"onSkip",o,t),v[h.take]=Ol.callAdaptorFunction(this,"onTake",d,t));var S=this.pvt;return this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(v,Ol.parse.jsonDateReplacer),url:l,pvtData:S,type:"POST",contentType:"application/json; charset=utf-8"}:(n=this.convertToQueryString(v,t,e),{type:"GET",url:(n=(-1!==e.dataSource.url.indexOf("?")?"&":"/")+n).length?l.replace(/\/*$/,n):l,pvtData:S})},t.prototype.getRequestQuery=function(e,t,i,n,o){var s=o;s[e.from]=t.fromTable,e.apply&&t.distincts.length&&(s[e.apply]="onDistinct"in this?Ol.callAdaptorFunction(this,"onDistinct",t.distincts):""),!t.distincts.length&&e.expand&&(s[e.expand]="onExpand"in this&&"onSelect"in i?Ol.callAdaptorFunction(this,"onExpand",{selects:Ol.getValue(i.onSelect.fieldNames,t),expands:t.expands},t):t.expands),s[e.select]="onSelect"in i&&!t.distincts.length?Ol.callAdaptorFunction(this,"onSelect",Ol.getValue(i.onSelect.fieldNames,t),t):"",s[e.count]=t.isCountRequired?Ol.callAdaptorFunction(this,"onCount",t.isCountRequired,t):"",s[e.search]=n.searches.length?Ol.callAdaptorFunction(this,"onSearch",n.searches,t):"",s[e.skip]="onSkip"in i?Ol.callAdaptorFunction(this,"onSkip",Ol.getValue(i.onSkip.nos,t),t):"",s[e.take]="onTake"in i?Ol.callAdaptorFunction(this,"onTake",Ol.getValue(i.onTake.nos,t),t):"",s[e.where]=n.filters.length||n.searches.length?Ol.callAdaptorFunction(this,"onWhere",n.filters,t):"",s[e.sortBy]=n.sorts.length?Ol.callAdaptorFunction(this,"onSortBy",n.sorts,t):"",s[e.group]=n.groups.length?Ol.callAdaptorFunction(this,"onGroup",n.groups,t):"",s[e.aggregates]=n.aggregates.length?Ol.callAdaptorFunction(this,"onAggregates",n.aggregates,t):"",s.param=[]},t.prototype.convertToQueryString=function(e,t,i){return""},t.prototype.processResponse=function(e,t,i,n,o,s){if(n&&n.getResponseHeader("Content-Type")&&-1!==n.getResponseHeader("Content-Type").indexOf("application/json")){var a=Ol.timeZoneHandling;t&&!t.timeZoneHandling&&(Ol.timeZoneHandling=!1),e=Ol.parse.parseJson(e),Ol.timeZoneHandling=a}var r=o,l=r.pvtData||{},d=e?e.groupDs:[];if(n&&n.getResponseHeader("Content-Type")&&-1!==n.getResponseHeader("Content-Type").indexOf("xml"))return i.isCountRequired?{result:[],count:0}:[];var h=JSON.parse(r.data);if(h&&"batch"===h.action&&e&&e.addedRecords)return s.addedRecords=e.addedRecords,s;e&&e.d&&(e=e.d);var p={};e&&"count"in e&&(p.count=e.count),p.result=e&&e.result?e.result:e;var c=!1;if(Array.isArray(e.result)&&e.result.length){if(m(e.result[0].key)||(p.result=this.formRemoteGroupedData(p.result,1,l.groups.length-1)),i&&i.lazyLoad.length&&l.groups.length)for(var u=0;u<i.lazyLoad.length;u++)if("onDemandGroupInfo"===i.lazyLoad[u].key){var f=i.lazyLoad[u].value.level;l.groups.length===f&&(c=!0)}}return c||this.getAggregateResult(l,e,p,d,i),Ol.isNull(p.count)?p.result:{result:p.result,count:p.count,aggregates:p.aggregates}},t.prototype.formRemoteGroupedData=function(e,t,i){for(var n=0;n<e.length;n++)e[n].items.length&&Object.keys(e[n].items[0]).indexOf("key")>-1&&this.formRemoteGroupedData(e[n].items,t+1,i-1);var o="GroupGuid",s="records";return e[o]=xl[o],e.level=t,e.childLevels=i,e[s]=e[0].items.length?this.getGroupedRecords(e,!m(e[0].items[s])):[],e},t.prototype.getGroupedRecords=function(e,t){for(var i=[],n=0;n<e.length;n++)if(t)i=i.concat(e[n].items.records);else for(var o=0;o<e[n].items.length;o++)i.push(e[n].items[o]);return i},t.prototype.onGroup=function(e){return this.pvt.groups=e,e},t.prototype.onAggregates=function(e){this.pvt.aggregates=e},t.prototype.batchRequest=function(e,t,i,n,o){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(f({},{changed:t.changedRecords,added:t.addedRecords,deleted:t.deletedRecords,action:"batch",table:i[undefined],key:i[undefined]},Ol.getAddParams(this,e,n)))}},t.prototype.beforeSend=function(e,t){},t.prototype.insert=function(e,t,i,n){return{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(f({},{value:t,table:i,action:"insert"},Ol.getAddParams(this,e,n)))}},t.prototype.remove=function(e,t,i,n,o){return{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(f({},{key:i,keyColumn:t,table:n,action:"remove"},Ol.getAddParams(this,e,o)))}},t.prototype.update=function(e,t,i,n,o){return{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(f({},{value:i,action:"update",keyColumn:t,key:Ol.getObject(t,i),table:n},Ol.getAddParams(this,e,o)))}},t.prototype.getFiltersFrom=function(e,t){var i,n=t.fKey,o=n,s=t.key,a=[];"object"!==typeof e[0]&&(o=null);for(var r=0;r<e.length;r++)i="object"===typeof e[0]?Ol.getObject(s||o,e[r]):e[r],a.push(new zl(n,"equal",i));return zl.or(a)},t.prototype.getAggregateResult=function(e,t,i,n,o){var s=t;if(t&&t.result&&(s=t.result),e&&e.aggregates&&e.aggregates.length){var a=e.aggregates,r=void 0,l=s,d={};t.aggregate&&(l=t.aggregate);for(var h=0;h<a.length;h++)(r=Ol.aggregates[a[h].type])&&(d[a[h].field+" - "+a[h].type]=r(l,a[h].field));i.aggregates=d}var p=Array.isArray(t.result)&&t.result.length&&!m(t.result[0].key);if(e&&e.groups&&e.groups.length&&!p){var c=e.groups;for(h=0;h<c.length;h++){m(n)||(n=Ol.group(n,c[h]));var u=Bl.filterQueries(o.queries,"onGroup")[h].e;s=Ol.group(s,c[h],e.aggregates,null,n,u.comparer)}i.result=s}return i},t.prototype.getQueryRequest=function(e){var t={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return t.sorts=Bl.filterQueries(e.queries,"onSortBy"),t.groups=Bl.filterQueries(e.queries,"onGroup"),t.filters=Bl.filterQueries(e.queries,"onWhere"),t.searches=Bl.filterQueries(e.queries,"onSearch"),t.aggregates=Bl.filterQueries(e.queries,"onAggregates"),t},t.prototype.addParams=function(e){var t=e.reqParams;e.params.length&&(t.params={});for(var i=0,n=e.params;i<n.length;i++){var o=n[i];if(t[o.key])throw new Error("Query() - addParams: Custom Param is conflicting other request arguments");t[o.key]=o.value,o.fn&&(t[o.key]=o.fn.call(e.query,o.key,e.query,e.dm)),t.params[o.key]=t[o.key]}},t}(Ml),Al=function(e){function t(t){var i=e.call(this)||this;return i.options=f({},i.options,{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PUT"}),f(i.options,t||{}),i}return Cl(t,e),t.prototype.getModuleName=function(){return"ODataAdaptor"},t.prototype.onPredicate=function(e,i,n){var o,s,a="",r=e.value,l=typeof r,d=e.field?t.getField(e.field):null;if(r instanceof Date&&(r="datetime'"+Ol.parse.replacer(r)+"'"),"string"===l&&(r=r.replace(/'/g,"''"),e.ignoreCase&&(r=r.toLowerCase()),r="'"+(r=encodeURIComponent(r))+"'",n&&(d="cast("+d+", 'Edm.String')"),Ol.parse.isGuid(r)&&(s="guid"),e.ignoreCase&&(s||(d="tolower("+d+")"),r=r.toLowerCase())),o=Ol.odBiOperator[e.operator])return a+=d,a+=o,s&&(a+=s),a+r;if("substringof"===(o=m(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?Ol.odUniOperator[e.operator]:Ol.odv4UniOperator[e.operator])){var h=r;r=d,d=h}return a+=o+"(",a+=d+",",s&&(a+=s),a+=r+")"},t.prototype.addParams=function(t){e.prototype.addParams.call(this,t),delete t.reqParams.params},t.prototype.onComplexPredicate=function(e,t,i){for(var n=[],o=0;o<e.predicates.length;o++)n.push("("+this.onEachWhere(e.predicates[o],t,i)+")");return n.join(" "+e.condition+" ")},t.prototype.onEachWhere=function(e,t,i){return e.isComplex?this.onComplexPredicate(e,t,i):this.onPredicate(e,t,i)},t.prototype.onWhere=function(e){return this.pvt.search&&e.push(this.onEachWhere(this.pvt.search,null,!0)),e.join(" and ")},t.prototype.onEachSearch=function(e){e.fields&&0===e.fields.length&&Ol.throwError("Query() - Search : oData search requires list of field names to search");for(var t=this.pvt.search||[],i=0;i<e.fields.length;i++)t.push(new zl(e.fields[i],e.operator,e.key,e.ignoreCase));this.pvt.search=t},t.prototype.onSearch=function(e){return this.pvt.search=zl.or(this.pvt.search),""},t.prototype.onEachSort=function(e){var i=[];if(e.name instanceof Array)for(var n=0;n<e.name.length;n++)i.push(t.getField(e.name[n])+("descending"===e.direction?" desc":""));else i.push(t.getField(e.name)+("descending"===e.direction?" desc":""));return i.join(",")},t.prototype.onSortBy=function(e){return e.reverse().join(",")},t.prototype.onGroup=function(e){return this.pvt.groups=e,[]},t.prototype.onSelect=function(e){for(var i=0;i<e.length;i++)e[i]=t.getField(e[i]);return e.join(",")},t.prototype.onAggregates=function(e){return this.pvt.aggregates=e,""},t.prototype.onCount=function(e){return!0===e?"allpages":""},t.prototype.beforeSend=function(e,t,i){Ol.endsWith(i.url,this.options.batch)&&"post"===i.type.toLowerCase()?(t.setRequestHeader("Accept",this.options.multipartAccept),t.setRequestHeader("DataServiceVersion","2.0"),t.overrideMimeType("text/plain; charset=x-user-defined")):t.setRequestHeader("Accept",this.options.accept),t.setRequestHeader("DataServiceVersion","2.0"),t.setRequestHeader("MaxDataServiceVersion","2.0")},t.prototype.processResponse=function(e,t,i,n,o,s){var a="odata.metadata";if(o&&"GET"===o.type&&!this.rootUrl&&e[a]){var r=e[a].split("/$metadata#");this.rootUrl=r[0],this.resourceTableName=r[1]}if(!m(e.d)){var l=i&&i.isCountRequired?e.d.results:e.d,d="__metadata";if(!m(l))for(var h=0;h<l.length;h++)m(l[h][d])||delete l[h][d]}var p=o&&o.pvtData,c=this.processBatchResponse(e,i,n,o,s);if(c)return c;var u=n&&o.getResponseHeader("DataServiceVersion"),f=null,g=u&&parseInt(u,10)||2;if(i&&i.isCountRequired){var y="__count";(e[y]||e["odata.count"])&&(f=e[y]||e["odata.count"]),e.d&&(e=e.d),(e[y]||e["odata.count"])&&(f=e[y]||e["odata.count"])}3===g&&e.value&&(e=e.value),e.d&&(e=e.d),g<3&&e.results&&(e=e.results);var v={};return v.count=f,v.result=e,this.getAggregateResult(p,e,v,null,i),Ol.isNull(f)?v.result:{result:v.result,count:v.count,aggregates:v.aggregates}},t.prototype.convertToQueryString=function(e,t,i){var n=[],o="table",s=e[o]||"";delete e[o],i.dataSource.requiresFormat&&(e.$format="json");for(var a=0,r=Object.keys(e);a<r.length;a++){var l=r[a];n.push(l+"="+e[l])}return n=n.join("&"),i.dataSource.url&&-1!==i.dataSource.url.indexOf("?")&&!s?n:n.length?s+"?"+n:s||""},t.prototype.localTimeReplacer=function(e,t){for(var i=0,n=m(t)?[]:Object.keys(t);i<n.length;i++){var o=n[i];t[o]instanceof Date&&(t[o]=Ol.dateParse.toLocalTime(t[o]))}return t},t.prototype.insert=function(e,t,i){return{url:(e.dataSource.insertUrl||e.dataSource.url).replace(/\/*$/,i?"/"+i:""),data:JSON.stringify(t,this.options.localTime?this.localTimeReplacer:null)}},t.prototype.remove=function(e,t,i,n){var o;return o="string"!==typeof i||Ol.parse.isGuid(i)?"("+i+")":"('"+i+"')",{type:"DELETE",url:(e.dataSource.removeUrl||e.dataSource.url).replace(/\/*$/,n?"/"+n:"")+o}},t.prototype.update=function(e,t,i,n,o,s){var a;return"PATCH"!==this.options.updateType||m(s)||(i=this.compareAndRemove(i,s,t)),a="string"!==typeof i[t]||Ol.parse.isGuid(i[t])?"("+i[t]+")":"('"+i[t]+"')",{type:this.options.updateType,url:(e.dataSource.updateUrl||e.dataSource.url).replace(/\/*$/,n?"/"+n:"")+a,data:JSON.stringify(i,this.options.localTime?this.localTimeReplacer:null),accept:this.options.accept}},t.prototype.batchRequest=function(e,t,i,n,o){var s=i.guid=Ol.getGuid(this.options.batchPre),a=this.rootUrl?this.rootUrl+"/"+this.options.batch:e.dataSource.url.replace(/\/*$/,"/"+this.options.batch);i.url=this.resourceTableName?this.resourceTableName:i.url;var r={url:i.url,key:i.key,cid:1,cSet:Ol.getGuid(this.options.changeSet)},l="--"+s+"\n";return l+="Content-Type: multipart/mixed; boundary="+r.cSet.replace("--","")+"\n",this.pvt.changeSet=0,l+=this.generateInsertRequest(t.addedRecords,r,e),l+=this.generateUpdateRequest(t.changedRecords,r,e,o?o.changedRecords:[]),l+=this.generateDeleteRequest(t.deletedRecords,r,e),l+=r.cSet+"--\n",{type:"POST",url:a,dataType:"json",contentType:"multipart/mixed; charset=UTF-8;boundary="+s,data:l+="--"+s+"--"}},t.prototype.generateDeleteRequest=function(e,t,i){if(!e)return"";var n={method:"DELETE ",url:function(e,t,i){var n=Ol.getObject(i,e[t]);return"number"===typeof n||Ol.parse.isGuid(n)?"("+n+")":n instanceof Date?"("+e[t][i].toJSON()+")":"('"+n+"')"},data:function(e,t){return""}};return this.generateBodyContent(e,t,n,i)+"\n"},t.prototype.generateInsertRequest=function(e,t,i){if(!e)return"";var n={method:"POST ",url:function(e,t,i){return""},data:function(e,t){return JSON.stringify(e[t])+"\n\n"}};return this.generateBodyContent(e,t,n,i)},t.prototype.generateUpdateRequest=function(e,t,i,n){var o=this;if(!e)return"";e.forEach((function(e){return e=o.compareAndRemove(e,n.filter((function(i){return Ol.getObject(t.key,i)===Ol.getObject(t.key,e)}))[0],t.key)}));var s={method:this.options.updateType+" ",url:function(e,t,i){return"number"===typeof e[t][i]||Ol.parse.isGuid(e[t][i])?"("+e[t][i]+")":e[t][i]instanceof Date?"("+e[t][i].toJSON()+")":"('"+e[t][i]+"')"},data:function(e,t){return JSON.stringify(e[t])+"\n\n"}};return this.generateBodyContent(e,t,s,i)},t.getField=function(e){return e.replace(/\./g,"/")},t.prototype.generateBodyContent=function(e,t,i,n){for(var o="",s=0;s<e.length;s++)o+="\n"+t.cSet+"\n",o+=this.options.changeSetContent+"\n\n",o+=i.method,"POST "===i.method?o+=(n.dataSource.insertUrl||n.dataSource.crudUrl||t.url)+i.url(e,s,t.key)+" HTTP/1.1\n":"PUT "===i.method||"PATCH "===i.method?o+=(n.dataSource.updateUrl||n.dataSource.crudUrl||t.url)+i.url(e,s,t.key)+" HTTP/1.1\n":"DELETE "===i.method&&(o+=(n.dataSource.removeUrl||n.dataSource.crudUrl||t.url)+i.url(e,s,t.key)+" HTTP/1.1\n"),o+="Accept: "+this.options.accept+"\n",o+="Content-Id: "+this.pvt.changeSet+++"\n",o+=this.options.batchChangeSetContentType+"\n",m(e[s]["@odata.etag"])?o+="\n":(o+="If-Match: "+e[s]["@odata.etag"]+"\n\n",delete e[s]["@odata.etag"]),o+=i.data(e,s);return o},t.prototype.processBatchResponse=function(e,t,i,n,o){if(i&&i.getResponseHeader("Content-Type")&&-1!==i.getResponseHeader("Content-Type").indexOf("xml"))return t.isCountRequired?{result:[],count:0}:[];if(n&&this.options.batch&&Ol.endsWith(n.url,this.options.batch)&&"post"===n.type.toLowerCase()){var s=i.getResponseHeader("Content-Type"),a=void 0,r=void 0,l=e+"";if(s=s.substring(s.indexOf("=batchresponse")+1),(l=l.split(s)).length<2)return{};l=l[1];var d=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(l);d&&l.replace(d[0],"");for(var h=d?d[1]:"",p=(l=l.split(h)).length;p>-1;p--)/\bContent-ID:/i.test(l[p])&&/\bHTTP.+201/.test(l[p])&&(a=parseInt(/\bContent-ID: (\d+)/i.exec(l[p])[1],10),o.addedRecords[a]&&(r=Ol.parse.parseJson(/^\{.+\}/m.exec(l[p])[0]),f({},o.addedRecords[a],this.processResponse(r))));return o}return null},t.prototype.compareAndRemove=function(e,t,i){var n=this;return m(t)||Object.keys(e).forEach((function(o){o!==i&&"@odata.etag"!==o&&(Ol.isPlainObject(e[o])?(n.compareAndRemove(e[o],t[o]),0===Object.keys(e[o]).filter((function(e){return"@odata.etag"!==e})).length&&delete e[o]):(e[o]===t[o]||e[o]&&t[o]&&e[o].valueOf()===t[o].valueOf())&&delete e[o])})),e},t}(Tl),kl=function(e){function t(t){var i=e.call(this,t)||this;return i.options=f({},i.options,{requestType:"get",accept:"application/json, text/javascript, */*; q=0.01",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$count",search:"$search",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PATCH",localTime:!1,apply:"$apply"}),f(i.options,t||{}),i}return Cl(t,e),t.prototype.getModuleName=function(){return"ODataV4Adaptor"},t.prototype.onCount=function(e){return!0===e?"true":""},t.prototype.onPredicate=function(t,i,n){var o="",s=t.value,a=s instanceof Date;if(i instanceof Bl)for(var r=this.getQueryRequest(i),l=0;l<r.filters.length;l++)r.filters[l].e.key===t.value&&(n=!0);return o=e.prototype.onPredicate.call(this,t,i,n),a&&(o=o.replace(/datetime'(.*)'$/,"$1")),Ol.parse.isGuid(s)&&(o=o.replace("guid","").replace(/'/g,"")),o},t.prototype.onEachSearch=function(e){var t=this.pvt.searches||[];t.push(e.key),this.pvt.searches=t},t.prototype.onSearch=function(e){return this.pvt.searches.join(" OR ")},t.prototype.onExpand=function(e){var t=this,i={},n={},o=e.expands.slice(),s=[];return e.selects.filter((function(e){return e.indexOf(".")>-1})).forEach((function(e){var n=e.split(".");if(n[0]in i||(i[n[0]]=[]),2==n.length)i[n[0]].length&&-1!==Object.keys(i).indexOf(n[0])?-1!==i[n[0]][0].indexOf("$expand")&&-1===i[n[0]][0].indexOf(";$select=")?i[n[0]][0]=i[n[0]][0]+";$select="+n[1]:i[n[0]][0]=i[n[0]][0]+","+n[1]:i[n[0]].push("$select="+n[1]);else{for(var o="$select="+n[n.length-1],s="",a="",r=1;r<n.length-1;r++)s=s+"$expand="+n[r]+"(",a+=")";var l=s+o+a;if(i[n[0]].length&&-1!==Object.keys(i).indexOf(n[0])&&t.expandQueryIndex(i[n[0]],!0)){var d=t.expandQueryIndex(i[n[0]]);i[n[0]][d]=i[n[0]][d]+l.replace("$expand=",",")}else i[n[0]].push(l)}})),Object.keys(i).forEach((function(e){-1===o.indexOf(e)&&o.push(e)})),o.forEach((function(e){n[e]=e in i?e+"("+i[e].join(";")+")":e})),Object.keys(n).forEach((function(e){return s.push(n[e])})),s.join(",")},t.prototype.expandQueryIndex=function(e,t){for(var i=0;i<e.length;i++)if(-1!==e[i].indexOf("$expand"))return!!t||i;return!t&&0},t.prototype.onDistinct=function(e){return"groupby(("+e.map((function(e){return Al.getField(e)})).join(",")+"))"},t.prototype.onSelect=function(t){return e.prototype.onSelect.call(this,t.filter((function(e){return-1===e.indexOf(".")})))},t.prototype.beforeSend=function(e,t,i){"POST"!==i.type&&"PUT"!==i.type&&"PATCH"!==i.type||t.setRequestHeader("Prefer","return=representation"),t.setRequestHeader("Accept",this.options.accept)},t.prototype.processResponse=function(t,i,n,o,s,a){var r="@odata.context";if(s&&"GET"===s.type&&!this.rootUrl&&t[r]){var l=t[r].split("/$metadata#");this.rootUrl=l[0],this.resourceTableName=l[1]}var d=s&&s.pvtData,h=e.prototype.processBatchResponse.call(this,t,n,o,s,a);if(h)return h;var p=null,c="@odata.count";n&&n.isCountRequired&&c in t&&(p=t[c]),t=m(t.value)?t:t.value;var u={};return u.count=p,u.result=t,this.getAggregateResult(d,t,u,null,n),Ol.isNull(p)?u.result:{result:u.result,count:p,aggregates:u.aggregates}},t}(Al),Vl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cl(t,e),t.prototype.getModuleName=function(){return"WebApiAdaptor"},t.prototype.insert=function(e,t,i){return{type:"POST",url:e.dataSource.url,data:JSON.stringify(t)}},t.prototype.remove=function(e,t,i,n){return{type:"DELETE",url:e.dataSource.url+"/"+i,data:JSON.stringify(i)}},t.prototype.update=function(e,t,i,n){return{type:"PUT",url:e.dataSource.url,data:JSON.stringify(i)}},t.prototype.batchRequest=function(e,t,i){var n=this,o=i.guid=Ol.getGuid(this.options.batchPre),s=e.dataSource.url.replace(/\/*$/,"/"+this.options.batch);i.url=this.resourceTableName?this.resourceTableName:i.url;for(var a=[],r=function(n,s){t.addedRecords.forEach((function(s,r){var l=function(e,t,i){return""};a.push("--"+o),a.push("Content-Type: application/http; msgtype=request",""),a.push("POST /api/"+(e.dataSource.insertUrl||e.dataSource.crudUrl||i.url)+l(t.addedRecords,n,i.key)+" HTTP/1.1"),a.push("Content-Type: application/json; charset=utf-8"),a.push("Host: "+location.host),a.push("",s?JSON.stringify(s):"")}))},l=0,d=t.addedRecords.length;l<d;l++)r(l);var h=function(s,r){t.changedRecords.forEach((function(r,l){n.options.updateType;var d=function(e,t,i){return""};a.push("--"+o),a.push("Content-Type: application/http; msgtype=request",""),a.push("PUT /api/"+(e.dataSource.updateUrl||e.dataSource.crudUrl||i.url)+d(t.changedRecords,s,i.key)+" HTTP/1.1"),a.push("Content-Type: application/json; charset=utf-8"),a.push("Host: "+location.host),a.push("",r?JSON.stringify(r):"")}))};for(l=0,d=t.changedRecords.length;l<d;l++)h(l);var p=function(n,s){t.deletedRecords.forEach((function(s,r){var l=function(e,t,i){var n=Ol.getObject(i,e[t]);return"number"===typeof n||Ol.parse.isGuid(n)?"/"+n:n instanceof Date?"/"+e[t][i].toJSON():"/'"+n+"'"};a.push("--"+o),a.push("Content-Type: application/http; msgtype=request",""),a.push("DELETE /api/"+(e.dataSource.removeUrl||e.dataSource.crudUrl||i.url)+l(t.deletedRecords,n,i.key)+" HTTP/1.1"),a.push("Content-Type: application/json; charset=utf-8"),a.push("Host: "+location.host),a.push("",s?JSON.stringify(s):"")}))};for(l=0,d=t.deletedRecords.length;l<d;l++)p(l);return a.push("--"+o+"--",""),{type:"POST",url:s,contentType:"multipart/mixed; boundary="+o,data:a.join("\r\n")}},t.prototype.beforeSend=function(e,t,i){t.setRequestHeader("Accept","application/json, text/javascript, */*; q=0.01")},t.prototype.processResponse=function(e,t,i,n,o,s){var a=o&&o.pvtData,r=null,l={};if(o&&"post"!==o.type.toLowerCase()){var d=n&&o.getResponseHeader("DataServiceVersion"),h=d&&parseInt(d,10)||2;i&&i.isCountRequired&&(Ol.isNull(e.Count)||(r=e.Count)),h<3&&e.Items&&(e=e.Items),l.count=r,l.result=e,this.getAggregateResult(a,e,l,null,i)}return l.result=l.result||e,Ol.isNull(r)?l.result:{result:l.result,count:l.count,aggregates:l.aggregates}},t}(Al),El=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Cl(t,e),t.prototype.processQuery=function(e,t,i){var n=(new Tl).processQuery(e,t,i),o=Ol.parse.parseJson(n.data),s={};if(o.param)for(var a=0;a<o.param.length;a++){var r=o.param[a],l=Object.keys(r)[0];s[l]=r[l]}s.value=o;return{data:JSON.stringify(s),url:n.url,pvtData:n.pvtData,type:"POST",contentType:"application/json; charset=utf-8"}}}(Tl),function(e){function t(){var t=e.call(this)||this;return d("beforeSend",Tl.prototype.beforeSend,t),t}return Cl(t,e),t.prototype.insert=function(e,t,i,n,o){return this.pvt.position=o,this.updateType="add",{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(f({},{value:t,table:i,action:"insert"},Ol.getAddParams(this,e,n)))}},t.prototype.remove=function(t,i,n,o,s){return e.prototype.remove.call(this,t,i,n),{type:"POST",url:t.dataSource.removeUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(f({},{key:n,keyColumn:i,table:o,action:"remove"},Ol.getAddParams(this,t,s)))}},t.prototype.update=function(e,t,i,n,o){return this.updateType="update",this.updateKey=t,{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(f({},{value:i,action:"update",keyColumn:t,key:i[t],table:n},Ol.getAddParams(this,e,o)))}},t.prototype.processResponse=function(t,i,n,o,s,a,r){var l;if(t="batch"===(s?JSON.parse(s.data):t).action?Ol.parse.parseJson(t):t,"add"===this.updateType&&e.prototype.insert.call(this,i,t,null,null,this.pvt.position),"update"===this.updateType&&e.prototype.update.call(this,i,this.updateKey,t),this.updateType=void 0,t.added)for(l=0;l<t.added.length;l++)e.prototype.insert.call(this,i,t.added[l]);if(t.changed)for(l=0;l<t.changed.length;l++)e.prototype.update.call(this,i,r.key,t.changed[l]);if(t.deleted)for(l=0;l<t.deleted.length;l++)e.prototype.remove.call(this,i,r.key,t.deleted[l]);return t},t.prototype.batchRequest=function(e,t,i,n,o){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(f({},{changed:t.changedRecords,added:t.addedRecords,deleted:t.deletedRecords,action:"batch",table:i.url,key:i.key},Ol.getAddParams(this,e,n)))}},t.prototype.addParams=function(e){(new Tl).addParams(e)},t}(Il)),Dl=function(e){function t(t){var i=e.call(this)||this;return i.options=f({},i.options,{getData:new Function,addRecord:new Function,updateRecord:new Function,deleteRecord:new Function,batchUpdate:new Function}),f(i.options,t||{}),i}return Cl(t,e),t.prototype.getModuleName=function(){return"CustomDataAdaptor"},t}(Tl),Nl=(function(e){function t(t){var i=e.call(this)||this;return i.opt=t,i.schema=i.opt.response,i.query=i.opt.query,i.getVariables=i.opt.getVariables?i.opt.getVariables:function(){},i.getQuery=function(){return i.query},i}Cl(t,e),t.prototype.getModuleName=function(){return"GraphQLAdaptor"},t.prototype.processQuery=function(t,i){var n=e.prototype.processQuery.apply(this,arguments),o=JSON.parse(n.data),s={};["skip","take","sorted","table","select","where","search","requiresCounts","aggregates","params"].filter((function(e){s[e]="searchwhereparams".indexOf(e)>-1?JSON.stringify(o[e]):o[e]}));var a=this.getVariables()||{};a.datamanager=s;var r=JSON.stringify({query:this.getQuery(),variables:a});return n.data=r,n},t.prototype.processResponse=function(e,t,i,n,o){var s,a,r=e,d=l(this.schema.result,r.data);this.schema.count&&(s=l(this.schema.count,r.data)),this.schema.aggregates&&(a=m(a=l(this.schema.aggregates,r.data))?a:Ol.parse.parseJson(a));var h=o.pvtData||{},p={result:d,aggregates:a},c=p;return h&&h.groups&&h.groups.length&&this.getAggregateResult(h,c,p,null,i),m(s)?p.result:{result:p.result,count:s,aggregates:a}},t.prototype.insert=function(){var t=e.prototype.insert.apply(this,arguments);return this.generateCrudData(t,"insert")},t.prototype.update=function(){var t=e.prototype.update.apply(this,arguments);return this.generateCrudData(t,"update")},t.prototype.remove=function(){var t=e.prototype.remove.apply(this,arguments);return this.generateCrudData(t,"remove")},t.prototype.batchRequest=function(t,i,n,o,s){var a=e.prototype.batchRequest.apply(this,arguments),r=JSON.parse(a.data);return r.key=n.key,a.data=JSON.stringify(r),this.generateCrudData(a,"batch")},t.prototype.generateCrudData=function(e,t){var i=JSON.parse(e.data);return e.data=JSON.stringify({query:this.opt.getMutation(t),variables:i}),e}}(Tl),function(e){function t(t,i,n){var o=e.call(this)||this;o.isCrudAction=!1,o.isInsertAction=!1,m(t)||(o.cacheAdaptor=t),o.pageSize=n,o.guidId=Ol.getGuid("cacheAdaptor");window.localStorage.setItem(o.guidId,JSON.stringify({keys:[],results:[]}));var s=o.guidId;return m(i)||setInterval((function(){var e;e=Ol.parse.parseJson(window.localStorage.getItem(s));for(var t=[],n=0;n<e.results.length;n++){var o=+new Date,a=+new Date(e.results[n].timeStamp);e.results[n].timeStamp=o-a,o-a>i&&t.push(n)}for(n=0;n<t.length;n++)e.results.splice(t[n],1),e.keys.splice(t[n],1);window.localStorage.removeItem(s),window.localStorage.setItem(s,JSON.stringify(e))}),i),o}return Cl(t,e),t.prototype.generateKey=function(e,t){var i=this.getQueryRequest(t),n=Bl.filterQueryLists(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),o=e,s="onPage";s in n&&(o+=n[s].pageIndex),i.sorts.forEach((function(e){o+=e.e.direction+e.e.fieldName})),i.groups.forEach((function(e){o+=e.e.fieldName})),i.searches.forEach((function(e){o+=e.e.searchKey}));for(var a=0;a<i.filters.length;a++){var r=i.filters[a];if(r.e.isComplex){var l=t.clone();l.queries=[];for(var d=0;d<r.e.predicates.length;d++)l.queries.push({fn:"onWhere",e:r.e.predicates[d],filter:t.queries.filter});o+=r.e.condition+this.generateKey(e,l)}else o+=r.e.field+r.e.operator+r.e.value}return o},t.prototype.processQuery=function(e,t,i){var n,o=this.generateKey(e.dataSource.url,t),s=(n=Ol.parse.parseJson(window.localStorage.getItem(this.guidId)))?n.results[n.keys.indexOf(o)]:null;return null==s||this.isCrudAction||this.isInsertAction?(this.isCrudAction=null,this.isInsertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):s},t.prototype.processResponse=function(e,t,i,n,o,s){if(this.isInsertAction||o&&this.cacheAdaptor.options.batch&&Ol.endsWith(o.url,this.cacheAdaptor.options.batch)&&"post"===o.type.toLowerCase())return this.cacheAdaptor.processResponse(e,t,i,n,o,s);e=this.cacheAdaptor.processResponse.apply(this.cacheAdaptor,[].slice.call(arguments,0));var a=i?this.generateKey(t.dataSource.url,i):t.dataSource.url,r={},l=(r=Ol.parse.parseJson(window.localStorage.getItem(this.guidId))).keys.indexOf(a);for(-1!==l&&(r.results.splice(l,1),r.keys.splice(l,1)),r.results[r.keys.push(a)-1]={keys:a,result:e.result,timeStamp:new Date,count:e.count};r.results.length>this.pageSize;)r.results.splice(0,1),r.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(r)),e},t.prototype.beforeSend=function(e,t,i){!m(this.cacheAdaptor.options.batch)&&Ol.endsWith(i.url,this.cacheAdaptor.options.batch)&&"post"===i.type.toLowerCase()&&t.setRequestHeader("Accept",this.cacheAdaptor.options.multipartAccept),e.dataSource.crossDomain||t.setRequestHeader("Accept",this.cacheAdaptor.options.accept)},t.prototype.update=function(e,t,i,n){return this.isCrudAction=!0,this.cacheAdaptor.update(e,t,i,n)},t.prototype.insert=function(e,t,i){return this.isInsertAction=!0,this.cacheAdaptor.insert(e,t,i)},t.prototype.remove=function(e,t,i,n){return this.isCrudAction=!0,this.cacheAdaptor.remove(e,t,i,n)},t.prototype.batchRequest=function(e,t,i){return this.cacheAdaptor.batchRequest(e,t,i)},t}(Tl)),Fl=function(){function e(e,t,i){var n,o=this;return this.dateParse=!0,this.timeZoneHandling=!0,this.requests=[],e||this.dataSource||(e=[]),i=i||e.adaptor,e&&!1===e.timeZoneHandling&&(this.timeZoneHandling=e.timeZoneHandling),e instanceof Array?n={json:e,offline:!0}:"object"===typeof e?(e.json||(e.json=[]),n={url:e.url,insertUrl:e.insertUrl,removeUrl:e.removeUrl,updateUrl:e.updateUrl,crudUrl:e.crudUrl,batchUrl:e.batchUrl,json:e.json,headers:e.headers,accept:e.accept,data:e.data,timeTillExpiration:e.timeTillExpiration,cachingPageSize:e.cachingPageSize,enableCaching:e.enableCaching,requestType:e.requestType,key:e.key,crossDomain:e.crossDomain,jsonp:e.jsonp,dataType:e.dataType,offline:void 0!==e.offline?e.offline:!(e.adaptor instanceof El||e.adaptor instanceof Dl)&&!e.url,requiresFormat:e.requiresFormat}):Ol.throwError("DataManager: Invalid arguments"),void 0!==n.requiresFormat||Ol.isCors()||(n.requiresFormat=!!m(n.crossDomain)||n.crossDomain),void 0===n.dataType&&(n.dataType="json"),this.dataSource=n,this.defaultQuery=t,n.url&&n.offline&&!n.json.length?(this.isDataAvailable=!1,this.adaptor=i||new Al,this.dataSource.offline=!1,this.ready=this.executeQuery(t||new Bl),this.ready.then((function(e){o.dataSource.offline=!0,o.isDataAvailable=!0,n.json=e.result,o.adaptor=new Il}))):this.adaptor=n.offline?new Il:new Al,!n.jsonp&&this.adaptor instanceof Al&&(n.jsonp="callback"),this.adaptor=i||this.adaptor,n.enableCaching&&(this.adaptor=new Nl(this.adaptor,n.timeTillExpiration,n.cachingPageSize)),this}return e.prototype.setDefaultQuery=function(e){return this.defaultQuery=e,this},e.prototype.executeLocal=function(t){this.defaultQuery||t instanceof Bl||Ol.throwError("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||Ol.throwError("DataManager - executeLocal() : Json data is required to execute"),t=t||this.defaultQuery;var i=this.adaptor.processQuery(this,t);if(t.subQuery){var n=t.subQuery.fromTable,o=t.subQuery.lookups,s=t.isCountRequired?i.result:i;o&&o instanceof Array&&Ol.buildHierarchy(t.subQuery.fKey,n,s,o,t.subQuery.key);for(var a=0;a<s.length;a++)s[a][n]instanceof Array&&(s[a]=f({},{},s[a]),s[a][n]=this.adaptor.processResponse(t.subQuery.using(new e(s[a][n].slice(0))).executeLocal(),this,t))}return this.adaptor.processResponse(i,this,t)},e.prototype.executeQuery=function(t,i,n,o){var s=this,a="makeRequest";"function"===typeof t&&(o=n,n=i,i=t,t=null),t||(t=this.defaultQuery),t instanceof Bl||Ol.throwError("DataManager - executeQuery() : A query is required to execute");var r=new Ll,l={query:t};if(!this.dataSource.offline&&void 0!==this.dataSource.url&&""!==this.dataSource.url||!m(this.adaptor[a])||this.isCustomDataAdaptor(this.adaptor)){var d=this.adaptor.processQuery(this,t);m(this.adaptor[a])?!m(d.url)||this.isCustomDataAdaptor(this.adaptor)?(this.requests=[],this.makeRequest(d,r,l,t)):(l=e.getDeferedArgs(t,d,l),r.resolve(l)):this.adaptor[a](d,r,l,t)}else e.nextTick((function(){var i=s.executeLocal(t);l=e.getDeferedArgs(t,i,l),r.resolve(l)}));return(i||n)&&r.promise.then(i,n),o&&r.promise.then(o,o),r.promise},e.getDeferedArgs=function(e,t,i){return e.isCountRequired?(i.result=t.result,i.count=t.count,i.aggregates=t.aggregates):i.result=t,i},e.nextTick=function(e){(window.setImmediate||window.setTimeout)(e,0)},e.prototype.extendRequest=function(e,t,i){return f({},{type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,processData:!1,onSuccess:t,onFailure:i},e)},e.prototype.makeRequest=function(e,t,i,n){var o=this,s=!!n.subQuerySelector,a=function(e){i.error=e,t.reject(i)},r=function(e,n,o,s,a,r,l){i.xhr=o,i.count=n?parseInt(n.toString(),10):0,i.result=e,i.request=s,i.aggregates=r,i.actual=a,i.virtualSelectRecords=l,t.resolve(i)},l=function(e,t){var l=new Ll,d={parent:i};n.subQuery.isChild=!0;var h=o.adaptor.processQuery(o,n.subQuery,e?o.adaptor.processResponse(e):t),p=o.makeRequest(h,l,d,n.subQuery);return s||l.then((function(t){e&&(Ol.buildHierarchy(n.subQuery.fKey,n.subQuery.fromTable,e,t,n.subQuery.key),r(e,t.count,t.xhr))}),a),p},d=this.extendRequest(e,(function(e,t){if(o.isGraphQLAdaptor(o.adaptor)&&!m(e.errors))return a(e.errors);o.isCustomDataAdaptor(o.adaptor)&&(t=f({},o.ajaxReqOption,t)),-1===t.httpRequest.getResponseHeader("Content-Type").indexOf("xml")&&o.dateParse&&(e=Ol.parse.parseJson(e));var i=o.adaptor.processResponse(e,o,n,t.httpRequest,t),d=0,h=null,p=e.virtualSelectRecords;n.isCountRequired&&(d=i.count,h=i.aggregates,i=i.result),n.subQuery?s||l(i,t):r(i,d,t.httpRequest,t.type,e,h,p)}),a);if(this.isCustomDataAdaptor(this.adaptor)){this.ajaxReqOption=d;var h=d;this.adaptor.options.getData({data:h.data,onSuccess:h.onSuccess,onFailure:h.onFailure})}else{var p=new ae(d);p.beforeSend=function(){o.beforeSend(p.httpRequest,p)},(d=p.send()).catch((function(e){return!0})),this.requests.push(p)}if(s){var c=n.subQuerySelector.call(this,{query:n.subQuery,parent:n});c&&c.length?Promise.all([d,l(null,c)]).then((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],a=o.adaptor.processResponse(i[0],o,n,o.requests[0].httpRequest,o.requests[0]),l=0;n.isCountRequired&&(l=a.count,a=a.result);var d=o.adaptor.processResponse(i[1],o,n.subQuery,o.requests[1].httpRequest,o.requests[1]);l=0,n.subQuery.isCountRequired&&(l=d.count,d=d.result),Ol.buildHierarchy(n.subQuery.fKey,n.subQuery.fromTable,a,d,n.subQuery.key),s=!1,r(a,l,o.requests[0].httpRequest)})):s=!1}return d},e.prototype.beforeSend=function(e,t){this.adaptor.beforeSend(this,e,t);for(var i,n=this.dataSource.headers,o=0;n&&o<n.length;o++){i=[];for(var s=0,a=Object.keys(n[o]);s<a.length;s++){var r=a[s];i.push(r),e.setRequestHeader(r,n[o][r])}}},e.prototype.saveChanges=function(e,t,i,n,o){var s=this;i instanceof Bl&&(n=i,i=null);var a={url:i,key:t||this.dataSource.key},r=this.adaptor.batchRequest(this,e,a,n||new Bl,o),l="doAjaxRequest";if(this.dataSource.offline)return r;if(m(this.adaptor[l])){if(this.isCustomDataAdaptor(this.adaptor))return this.doAjaxRequest(r,this.adaptor.options.batchUpdate);var d=new Ll,h=new ae(r);return h.beforeSend=function(){s.beforeSend(h.httpRequest,h)},h.onSuccess=function(t,i){s.isGraphQLAdaptor(s.adaptor)&&(m(t.errors)||h.onFailure(JSON.stringify(t.errors))),d.resolve(s.adaptor.processResponse(t,s,null,i.httpRequest,i,e,a))},h.onFailure=function(e){d.reject([{error:e}])},h.send().catch((function(e){return!0})),d.promise}return this.adaptor[l](r)},e.prototype.insert=function(e,t,i,n){t instanceof Bl&&(i=t,t=null);var o=this.adaptor.insert(this,e,t,i,n),s="doAjaxRequest";return this.dataSource.offline?o:m(this.adaptor[s])?this.doAjaxRequest(o,this.adaptor.options.addRecord):this.adaptor[s](o)},e.prototype.remove=function(e,t,i,n){"object"===typeof t&&(t=Ol.getObject(e,t)),i instanceof Bl&&(n=i,i=null);var o=this.adaptor.remove(this,e,t,i,n),s="doAjaxRequest";if(this.dataSource.offline)return o;if(m(this.adaptor[s])){var a=this.adaptor.options.deleteRecord;return this.doAjaxRequest(o,a)}return this.adaptor[s](o)},e.prototype.update=function(e,t,i,n,o){i instanceof Bl&&(n=i,i=null);var s=this.adaptor.update(this,e,t,i,n,o),a="doAjaxRequest";if(this.dataSource.offline)return s;if(m(this.adaptor[a])){var r=this.adaptor.options.updateRecord;return this.doAjaxRequest(s,r)}return this.adaptor[a](s)},e.prototype.isCustomDataAdaptor=function(e){return this.adaptor.getModuleName&&"CustomDataAdaptor"===this.adaptor.getModuleName()},e.prototype.isGraphQLAdaptor=function(e){return this.adaptor.getModuleName&&"GraphQLAdaptor"===this.adaptor.getModuleName()},e.prototype.successFunc=function(e,t){if(this.isGraphQLAdaptor(this.adaptor)){var i=JSON.parse(e);m(i.errors)||this.failureFunc(JSON.stringify(i.errors))}this.isCustomDataAdaptor(this.adaptor)&&(t=f({},this.ajaxReqOption,t));try{Ol.parse.parseJson(e)}catch(n){e=[]}e=this.adaptor.processResponse(Ol.parse.parseJson(e),this,null,t.httpRequest,t),this.ajaxDeffered.resolve(e)},e.prototype.failureFunc=function(e){this.ajaxDeffered.reject([{error:e}])},e.prototype.doAjaxRequest=function(e,t){var i=this;if(e=f({},{type:"POST",contentType:"application/json; charset=utf-8",processData:!1},e),this.ajaxDeffered=new Ll,this.isCustomDataAdaptor(this.adaptor))this.ajaxReqOption=e,t.call(this,{data:e.data,onSuccess:this.successFunc.bind(this),onFailure:this.failureFunc.bind(this)});else{var n=new ae(e);n.beforeSend=function(){i.beforeSend(n.httpRequest,n)},n.onSuccess=this.successFunc.bind(this),n.onFailure=this.failureFunc.bind(this),n.send().catch((function(e){return!0}))}return this.ajaxDeffered.promise},e}(),Ll=function(){var e=this;this.promise=new Promise((function(t,i){e.resolve=t,e.reject=i})),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)},Pl={GroupGuid:"{271bbba0-1ee7}"},Ol=function(){function e(){}return e.getValue=function(e,t){return"function"===typeof e?e.call(t||{}):e},e.endsWith=function(e,t){return e.slice&&e.slice(-t.length)===t},e.startsWith=function(e,t){return e.slice(0,t.length)===t},e.fnSort=function(t){return"ascending"===(t=t?e.toLowerCase(t):"ascending")?this.fnAscending:this.fnDescending},e.fnAscending=function(e,t){return m(e)&&m(t)||null===t||void 0===t?-1:"string"===typeof e?e.localeCompare(t):null===e||void 0===e?1:e-t},e.fnDescending=function(e,t){return m(e)&&m(t)?-1:null===t||void 0===t?1:"string"===typeof e?-1*e.localeCompare(t):null===e||void 0===e?-1:t-e},e.extractFields=function(e,t){for(var i={},n=0;n<t.length;n++)i=this.setValue(t[n],this.getObject(t[n],e),i);return i},e.select=function(e,t){for(var i=[],n=0;n<e.length;n++)i.push(this.extractFields(e[n],t));return i},e.group=function(t,i,n,o,s,a,r){o=o||1;var l=t,d="GroupGuid";if(l.GroupGuid===Pl[d]){for(var h=function(e){if(m(s))l[e].items=p.group(l[e].items,i,n,l.level+1,null,a,r),l[e].count=l[e].items.length;else{var t,o=s.filter((function(t){return t.key===l[e].key}));t=s.indexOf(o[0]),l[e].items=p.group(l[e].items,i,n,l.level+1,s[t].items,a,r),l[e].count=s[t].count}},p=this,c=0;c<l.length;c++)h(c);return l.childLevels+=1,l}var u={},f=[];f.GroupGuid=Pl[d],f.level=o,f.childLevels=0,f.records=l;for(var g=function(e){var t=y.getVal(l,e,i);if(m(a)||(t=a(t,i)),!u[t]&&(u[t]={key:t,count:0,items:[],aggregates:{},field:i},f.push(u[t]),!m(s))){var o=s.filter((function(e){return e.key===u[t].key}));u[t].count=o[0].count}u[t].count=m(s)?u[t].count+=1:u[t].count,(!r||r&&n.length)&&u[t].items.push(l[e])},y=this,v=0;v<l.length;v++)g(v);if(n&&n.length){var w=function(t){for(var i={},o=void 0,a=n,r=0;r<n.length;r++)if(o=e.aggregates[n[r].type],m(s))o&&(i[a[r].field+" - "+a[r].type]=o(f[t].items,a[r].field));else{var l=s.filter((function(e){return e.key===f[t].key}));o&&(i[a[r].field+" - "+a[r].type]=o(l[0].items,a[r].field))}f[t].aggregates=i};for(v=0;v<f.length;v++)w(v)}if(r&&f.length&&n.length)for(v=0;v<f.length;v++)f[v].items=[];return l.length&&f||l},e.buildHierarchy=function(e,t,i,n,o){var s,a={};for(n.result&&(n=n.result),n.GroupGuid&&this.throwError("DataManager: Do not have support Grouping in hierarchy"),s=0;s<n.length;s++){(a[r=this.getObject(e,n[s])]||(a[r]=[])).push(n[s])}for(s=0;s<i.length;s++){var r=this.getObject(o||e,i[s]);i[s][t]=a[r]}},e.getFieldList=function(e,t,i){if(void 0===i&&(i=""),void 0===t||null===t)return this.getFieldList(e,[],i);for(var n=e,o=0,s=Object.keys(e);o<s.length;o++){var a=s[o];"object"!==typeof n[a]||n[a]instanceof Array?t.push(i+a):this.getFieldList(n[a],t,i+a+".")}return t},e.getObject=function(e,t){if(!e)return t;if(t){if(-1===e.indexOf("."))return t[e];for(var i=t,n=e.split("."),o=0;o<n.length&&null!=i;o++)i=i[n[o]];return i}},e.setValue=function(e,t,i){var n,o,s=e.toString().split("."),a=i||{},r=a,l=s.length;for(n=0;n<l;n++)o=s[n],n+1===l?r[o]=void 0===t?void 0:t:m(r[o])&&(r[o]={}),r=r[o];return a},e.sort=function(e,t,i){if(e.length<=1)return e;var n=parseInt((e.length/2).toString(),10),o=e.slice(0,n),s=e.slice(n);return o=this.sort(o,t,i),s=this.sort(s,t,i),this.merge(o,s,t,i)},e.ignoreDiacritics=function(t){return"string"!==typeof t?t:t.split("").map((function(t){return t in e.diacritics?e.diacritics[t]:t})).join("")},e.merge=function(e,t,i,n){for(var o,s=[];e.length>0||t.length>0;)o=e.length>0&&t.length>0?n?n(this.getVal(e,0,i),this.getVal(t,0,i),e[0],t[0])<=0?e:t:e[0][i]<e[0][i]?e:t:e.length>0?e:t,s.push(o.shift());return s},e.getVal=function(e,t,i){return i?this.getObject(i,e[t]):e[t]},e.toLowerCase=function(e){return e?"string"===typeof e?e.toLowerCase():e.toString():0===e||!1===e?e.toString():""},e.callAdaptorFunction=function(e,t,i,n){if(t in e){var o=e[t](i,n);m(o)||(i=o)}return i},e.getAddParams=function(t,i,n){var o={};return e.callAdaptorFunction(t,"addParams",{dm:i,query:n,params:n.params,reqParams:o}),o},e.isPlainObject=function(e){return!!e&&e.constructor===Object},e.isCors=function(){var e=null;try{e=new window.XMLHttpRequest}catch(t){}return!!e&&"withCredentials"in e},e.getGuid=function(e){var t;return(e||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,(function(e,i){if("crypto"in window&&"getRandomValues"in crypto){var n=new Uint8Array(1);window.crypto.getRandomValues(n),t=n[0]%16|0}else t=16*Math.random()|0;return"0123456789abcdef"[19===i?3&t|8:t]}))},e.isNull=function(e){return void 0===e||null===e},e.getItemFromComparer=function(t,i,n){var o,s,a,r=0,l="string"===typeof e.getVal(t,0,i);if(t.length)for(;m(o)&&r<t.length;)o=e.getVal(t,r,i),a=t[r++];for(;r<t.length;r++)m(s=e.getVal(t,r,i))||(l&&(o=+o,s=+s),n(o,s)>0&&(o=s,a=t[r]));return a},e.distinct=function(t,i,n){n=!m(n)&&n;var o,s=[],a={};return t.forEach((function(r,l){(o="object"===typeof t[l]?e.getVal(t,l,i):t[l])in a||(s.push(n?t[l]:o),a[o]=1)})),s},e.processData=function(e,t){var i=this.prepareQuery(e),n=new Fl(t);e.requiresCounts&&i.requiresCount();var o=n.executeLocal(i),s={result:e.requiresCounts?o.result:o,count:o.count,aggregates:JSON.stringify(o.aggregates)};return e.requiresCounts?s:o},e.prepareQuery=function(t){var i=this,n=new Bl;(t.select&&n.select(t.select),t.where)&&e.parse.parseJson(t.where).filter((function(e){if(m(e.condition))n.where(e.field,e.operator,e.value,e.ignoreCase,e.ignoreAccent);else{var t=[];e.field?t.push(new zl(e.field,e.operator,e.value,e.ignoreCase,e.ignoreAccent)):t=t.concat(i.getPredicate(e.predicates)),"or"==e.condition?n.where(zl.or(t)):"and"==e.condition&&n.where(zl.and(t))}}));t.search&&e.parse.parseJson(t.search).filter((function(e){return n.search(e.key,e.fields,e.operator,e.ignoreCase,e.ignoreAccent)}));return t.aggregates&&t.aggregates.filter((function(e){return n.aggregate(e.type,e.field)})),t.sorted&&t.sorted.filter((function(e){return n.sortBy(e.name,e.direction)})),t.skip&&n.skip(t.skip),t.take&&n.take(t.take),t.group&&t.group.filter((function(e){return n.group(e)})),n},e.getPredicate=function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];if(n.field)t.push(new zl(n.field,n.operator,n.value,n.ignoreCase,n.ignoreAccent));else{for(var o=[],s=this.getPredicate(n.predicates),a=0,r=Object.keys(s);a<r.length;a++){var l=r[a];o.push(s[l])}t.push("or"==n.condition?zl.or(o):zl.and(o))}}return t},e.serverTimezoneOffset=null,e.timeZoneHandling=!0,e.throwError=function(e){try{throw new Error(e)}catch(t){throw t.message+"\n"+t.stack}},e.aggregates={sum:function(t,i){for(var n,o=0,s="number"!==typeof e.getVal(t,0,i),a=0;a<t.length;a++)n=e.getVal(t,a,i),isNaN(n)||null===n||(s&&(n=+n),o+=n);return o},average:function(t,i){return e.aggregates.sum(t,i)/t.length},min:function(t,i){var n;return"function"===typeof i&&(n=i,i=null),e.getObject(i,e.getItemFromComparer(t,i,n||e.fnAscending))},max:function(t,i){var n;return"function"===typeof i&&(n=i,i=null),e.getObject(i,e.getItemFromComparer(t,i,n||e.fnDescending))},truecount:function(e,t){return new Fl(e).executeLocal((new Bl).where(t,"equal",!0,!0)).length},falsecount:function(e,t){return new Fl(e).executeLocal((new Bl).where(t,"equal",!1,!0)).length},count:function(e,t){return e.length}},e.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},e.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},e.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof"},e.odv4UniOperator={"$=":"endswith","^=":"startswith","*=":"contains",endswith:"endswith",startswith:"startswith",contains:"contains"},e.diacritics={"\u24b6":"A","\uff21":"A","\xc0":"A","\xc1":"A","\xc2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\xc3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\xc4":"A","\u01de":"A","\u1ea2":"A","\xc5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\xc8":"E","\xc9":"E","\xca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\xcb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\xcc":"I","\xcd":"I","\xce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\xcf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\xd1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\xd2":"O","\xd3":"O","\xd4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\xd5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\xd6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\xd9":"U","\xda":"U","\xdb":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\xdc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\xdd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\xe0":"a","\xe1":"a","\xe2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\xe3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\xe4":"a","\u01df":"a","\u1ea3":"a","\xe5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\xe8":"e","\xe9":"e","\xea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\xeb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\xec":"i","\xed":"i","\xee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\xef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\xf1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\xf2":"o","\xf3":"o","\xf4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\xf5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\xf6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\xdf":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\xf9":"u","\xfa":"u","\xfb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\xfc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\xfd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\xff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z","\u0386":"\u0391","\u0388":"\u0395","\u0389":"\u0397","\u038a":"\u0399","\u03aa":"\u0399","\u038c":"\u039f","\u038e":"\u03a5","\u03ab":"\u03a5","\u038f":"\u03a9","\u03ac":"\u03b1","\u03ad":"\u03b5","\u03ae":"\u03b7","\u03af":"\u03b9","\u03ca":"\u03b9","\u0390":"\u03b9","\u03cc":"\u03bf","\u03cd":"\u03c5","\u03cb":"\u03c5","\u03b0":"\u03c5","\u03c9":"\u03c9","\u03c2":"\u03c3"},e.fnOperators={equal:function(t,i,n,o){return o&&(t=e.ignoreDiacritics(t),i=e.ignoreDiacritics(i)),n?e.toLowerCase(t)===e.toLowerCase(i):t===i},notequal:function(t,i,n,o){return o&&(t=e.ignoreDiacritics(t),i=e.ignoreDiacritics(i)),!e.fnOperators.equal(t,i,n)},lessthan:function(t,i,n){return n?e.toLowerCase(t)<e.toLowerCase(i):(m(t)&&(t=void 0),t<i)},greaterthan:function(t,i,n){return n?e.toLowerCase(t)>e.toLowerCase(i):t>i},lessthanorequal:function(t,i,n){return n?e.toLowerCase(t)<=e.toLowerCase(i):(m(t)&&(t=void 0),t<=i)},greaterthanorequal:function(t,i,n){return n?e.toLowerCase(t)>=e.toLowerCase(i):t>=i},contains:function(t,i,n,o){return o&&(t=e.ignoreDiacritics(t),i=e.ignoreDiacritics(i)),n?!m(t)&&!m(i)&&-1!==e.toLowerCase(t).indexOf(e.toLowerCase(i)):!m(t)&&!m(i)&&-1!==t.toString().indexOf(i)},notnull:function(e){return null!==e},isnull:function(e){return null===e},startswith:function(t,i,n,o){return o&&(t=e.ignoreDiacritics(t),i=e.ignoreDiacritics(i)),n?t&&i&&e.startsWith(e.toLowerCase(t),e.toLowerCase(i)):t&&i&&e.startsWith(t,i)},endswith:function(t,i,n,o){return o&&(t=e.ignoreDiacritics(t),i=e.ignoreDiacritics(i)),n?t&&i&&e.endsWith(e.toLowerCase(t),e.toLowerCase(i)):t&&i&&e.endsWith(t,i)},processSymbols:function(t){var i=e.operatorSymbols[t];return i?e.fnOperators[i]:e.throwError("Query - Process Operator : Invalid operator")},processOperator:function(t){var i=e.fnOperators[t];return i||e.fnOperators.processSymbols(t)}},e.parse={parseJson:function(t){return"string"===typeof t?t=JSON.parse(t,e.parse.jsonReviver):t instanceof Array?e.parse.iterateAndReviveArray(t):"object"===typeof t&&null!==t&&e.parse.iterateAndReviveJson(t),t},iterateAndReviveArray:function(t){for(var i=0;i<t.length;i++)"object"===typeof t[i]&&null!==t[i]?e.parse.iterateAndReviveJson(t[i]):"string"!==typeof t[i]||/^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(t[i])?t[i]=e.parse.parseJson(t[i]):t[i]=e.parse.jsonReviver("",t[i])},iterateAndReviveJson:function(t){for(var i,n=0,o=Object.keys(t);n<o.length;n++){var s=o[n];e.startsWith(s,"__")||("object"===typeof(i=t[s])?i instanceof Array?e.parse.iterateAndReviveArray(i):i&&e.parse.iterateAndReviveJson(i):t[s]=e.parse.jsonReviver(t[s],i))}},jsonReviver:function(t,i){if("string"===typeof i){var n=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(i),o=e.timeZoneHandling?e.serverTimezoneOffset:null;if(n)return e.dateParse.toTimeZone(new Date(parseInt(n[1],10)),o,!0);if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(i)){var s=i.indexOf("Z")>-1||i.indexOf("z")>-1,a=i.split(/[^0-9.]/);if(s){if(a[5].indexOf(".")>-1){var r=a[5].split(".");a[5]=r[0],a[6]=new Date(i).getUTCMilliseconds().toString()}else a[6]="00";i=e.dateParse.toTimeZone(new Date(parseInt(a[0],10),parseInt(a[1],10)-1,parseInt(a[2],10),parseInt(a[3],10),parseInt(a[4],10),parseInt(a[5],10),parseInt(a[6],10)),e.serverTimezoneOffset,!1)}else{var l=new Date(parseInt(a[0],10),parseInt(a[1],10)-1,parseInt(a[2],10),parseInt(a[3],10),parseInt(a[4],10),parseInt(a[5],10)),d=parseInt(a[6],10),h=parseInt(a[7],10);if(isNaN(d)&&isNaN(h))return l;i.indexOf("+")>-1?l.setHours(l.getHours()-d,l.getMinutes()-h):l.setHours(l.getHours()+d,l.getMinutes()+h),i=e.dateParse.toTimeZone(l,e.serverTimezoneOffset,!1)}null==e.serverTimezoneOffset&&(i=e.dateParse.addSelfOffset(i))}}return i},isJson:function(t){return"string"===typeof t[0]?t:e.parse.parseJson(t)},isGuid:function(e){return null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(e)},replacer:function(t,i){return e.isPlainObject(t)?e.parse.jsonReplacer(t,i):t instanceof Array?e.parse.arrayReplacer(t):t instanceof Date?e.parse.jsonReplacer({val:t},i).val:t},jsonReplacer:function(t,i){for(var n,o=0,s=Object.keys(t);o<s.length;o++){var a=s[o];if((n=t[a])instanceof Date){var r=n;null==e.serverTimezoneOffset?t[a]=e.dateParse.toTimeZone(r,null).toJSON():(r=new Date(+r+36e5*e.serverTimezoneOffset),t[a]=e.dateParse.toTimeZone(e.dateParse.addSelfOffset(r),null).toJSON())}}return t},arrayReplacer:function(t){for(var i=0;i<t.length;i++)e.isPlainObject(t[i])?t[i]=e.parse.jsonReplacer(t[i]):t[i]instanceof Date&&(t[i]=e.parse.jsonReplacer({date:t[i]}).date);return t},jsonDateReplacer:function(t,i){if("value"===t&&i){if("string"===typeof i){var n=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(i);if(n)i=e.dateParse.toTimeZone(new Date(parseInt(n[1],10)),null,!0);else if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(i)){var o=i.split(/[^0-9]/);i=e.dateParse.toTimeZone(new Date(parseInt(o[0],10),parseInt(o[1],10)-1,parseInt(o[2],10),parseInt(o[3],10),parseInt(o[4],10),parseInt(o[5],10)),null,!0)}}if(i instanceof Date)return i=e.dateParse.addSelfOffset(i),null===e.serverTimezoneOffset?e.dateParse.toTimeZone(e.dateParse.addSelfOffset(i),null).toJSON():(i=e.dateParse.toTimeZone(i,i.getTimezoneOffset()/60*2-e.serverTimezoneOffset,!1)).toJSON()}return i}},e.dateParse={addSelfOffset:function(e){return new Date(+e-6e4*e.getTimezoneOffset())},toUTC:function(e){return new Date(+e+6e4*e.getTimezoneOffset())},toTimeZone:function(t,i,n){if(null===i)return t;var o=n?e.dateParse.toUTC(t):t;return new Date(+o-36e5*i)},toLocalTime:function(e){var t=e,i=-t.getTimezoneOffset(),n=i>=0?"+":"-",o=function(e){var t=Math.floor(Math.abs(e));return(t<10?"0":"")+t};return t.getFullYear()+"-"+o(t.getMonth()+1)+"-"+o(t.getDate())+"T"+o(t.getHours())+":"+o(t.getMinutes())+":"+o(t.getSeconds())+n+o(i/60)+":"+o(i%60)}},e}(),Bl=function(){function e(e){return this.subQuery=null,this.isChild=!1,this.distincts=[],this.queries=[],this.key="",this.fKey="","string"===typeof e?this.fromTable=e:e&&e instanceof Array&&(this.lookups=e),this.expands=[],this.sortedColumns=[],this.groupedColumns=[],this.subQuery=null,this.isChild=!1,this.params=[],this.lazyLoad=[],this}return e.prototype.setKey=function(e){return this.key=e,this},e.prototype.using=function(e){return this.dataManager=e,this},e.prototype.execute=function(e,t,i,n){return(e=e||this.dataManager)?e.executeQuery(this,t,i,n):Ol.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument')},e.prototype.executeLocal=function(e){return(e=e||this.dataManager)?e.executeLocal(this):Ol.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument')},e.prototype.clone=function(){var t=new e;return t.queries=this.queries.slice(0),t.key=this.key,t.isChild=this.isChild,t.dataManager=this.dataManager,t.fromTable=this.fromTable,t.params=this.params.slice(0),t.expands=this.expands.slice(0),t.sortedColumns=this.sortedColumns.slice(0),t.groupedColumns=this.groupedColumns.slice(0),t.subQuerySelector=this.subQuerySelector,t.subQuery=this.subQuery,t.fKey=this.fKey,t.isCountRequired=this.isCountRequired,t.distincts=this.distincts.slice(0),t.lazyLoad=this.lazyLoad.slice(0),t},e.prototype.from=function(e){return this.fromTable=e,this},e.prototype.addParams=function(e,t){return"function"===typeof t?this.params.push({key:e,fn:t}):this.params.push({key:e,value:t}),this},e.prototype.distinct=function(e){return this.distincts="string"===typeof e?[].slice.call([e],0):e.slice(0),this},e.prototype.expand=function(e){return this.expands="string"===typeof e?[].slice.call([e],0):e.slice(0),this},e.prototype.where=function(e,t,i,n,o,s){t=t?t.toLowerCase():null;var a=null;return"string"===typeof e?a=new zl(e,t,i,n,o,s):e instanceof zl&&(a=e),this.queries.push({fn:"onWhere",e:a}),this},e.prototype.search=function(e,t,i,n,o){"string"===typeof t&&(t=[t]),i&&"none"!==i||(i="contains");var s=Ol.fnOperators[i];return this.queries.push({fn:"onSearch",e:{fieldNames:t,operator:i,searchKey:e,ignoreCase:n,ignoreAccent:o,comparer:s}}),this},e.prototype.sortBy=function(e,t,i){return this.sortByForeignKey(e,t,i)},e.prototype.sortByForeignKey=function(t,i,n,o){var s,a,r=m(o)?"ascending":o;if("string"===typeof t&&Ol.endsWith(t.toLowerCase()," desc")&&(t=t.replace(/ desc$/i,""),i="descending"),i&&"string"!==typeof i||(r=i?i.toLowerCase():"ascending",i=Ol.fnSort(i)),n){s=e.filterQueries(this.queries,"onSortBy");for(var l=0;l<s.length;l++)if("string"===typeof(a=s[l].e.fieldName)){if(a===t)return this}else if(a instanceof Array)for(var d=0;d<a.length;d++)if(a[d]===t||t.toLowerCase()===a[d]+" desc")return this}return this.queries.push({fn:"onSortBy",e:{fieldName:t,comparer:i,direction:r}}),this},e.prototype.sortByDesc=function(e){return this.sortBy(e,"descending")},e.prototype.group=function(e,t,i){return this.sortBy(e,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:e,comparer:t||null,format:i||null}}),this},e.prototype.page=function(e,t){return this.queries.push({fn:"onPage",e:{pageIndex:e,pageSize:t}}),this},e.prototype.range=function(e,t){return this.queries.push({fn:"onRange",e:{start:e,end:t}}),this},e.prototype.take=function(e){return this.queries.push({fn:"onTake",e:{nos:e}}),this},e.prototype.skip=function(e){return this.queries.push({fn:"onSkip",e:{nos:e}}),this},e.prototype.select=function(e){return"string"===typeof e&&(e=[].slice.call([e],0)),this.queries.push({fn:"onSelect",e:{fieldNames:e}}),this},e.prototype.hierarchy=function(e,t){return this.subQuerySelector=t,this.subQuery=e,this},e.prototype.foreignKey=function(e){return this.fKey=e,this},e.prototype.requiresCount=function(){return this.isCountRequired=!0,this},e.prototype.aggregate=function(e,t){return this.queries.push({fn:"onAggregates",e:{field:t,type:e}}),this},e.filterQueries=function(e,t){return e.filter((function(e){return e.fn===t}))},e.filterQueryLists=function(e,t){for(var i=e.filter((function(e){return-1!==t.indexOf(e.fn)})),n={},o=0;o<i.length;o++)n[i[o].fn]||(n[i[o].fn]=i[o].e);return n},e}(),zl=function(){function e(t,i,n,o,s,a){return void 0===o&&(o=!1),this.ignoreAccent=!1,this.isComplex=!1,"string"===typeof t?(this.field=t,this.operator=i.toLowerCase(),this.value=n,this.matchCase=a,this.ignoreCase=o,this.ignoreAccent=s,this.isComplex=!1,this.comparer=Ol.fnOperators.processOperator(this.operator)):(t instanceof e&&n instanceof e||n instanceof Array)&&(this.isComplex=!0,this.condition=i.toLowerCase(),this.predicates=[t],this.matchCase=t.matchCase,this.ignoreCase=t.ignoreCase,this.ignoreAccent=t.ignoreAccent,n instanceof Array?[].push.apply(this.predicates,n):this.predicates.push(n)),this}return e.and=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e.combinePredicates([].slice.call(t,0),"and")},e.prototype.and=function(t,i,n,o,s){return e.combine(this,t,i,n,"and",o,s)},e.or=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e.combinePredicates([].slice.call(t,0),"or")},e.prototype.or=function(t,i,n,o,s){return e.combine(this,t,i,n,"or",o,s)},e.fromJson=function(e){if(e instanceof Array){for(var t=[],i=0,n=e.length;i<n;i++)t.push(this.fromJSONData(e[i]));return t}var o=e;return this.fromJSONData(o)},e.prototype.validate=function(e){var t,i,n=this.predicates?this.predicates:[];if(!this.isComplex&&this.comparer)return this.comparer.call(this,Ol.getObject(this.field,e),this.value,this.ignoreCase,this.ignoreAccent);t="and"===this.condition;for(var o=0;o<n.length;o++)if(i=n[o].validate(e),t){if(!i)return!1}else if(i)return!0;return t},e.prototype.toJson=function(){var e,t;if(this.isComplex){e=[],t=this.predicates;for(var i=0;i<t.length;i++)e.push(t[i].toJson())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:e,matchCase:this.matchCase}},e.combinePredicates=function(t,i){if(1===t.length){if(!(t[0]instanceof Array))return t[0];t=t[0]}return new e(t[0],i,t.slice(1))},e.combine=function(t,i,n,o,s,a,r){return i instanceof e?e[s](t,i):"string"===typeof i?e[s](t,new e(i,n,o,a,r)):Ol.throwError("Predicate - "+s+" : invalid arguments")},e.fromJSONData=function(t){for(var i=t.predicates||[],n=i.length,o=[],s=0;s<n;s++)o.push(this.fromJSONData(i[s]));return t.isComplex?new e(o[0],t.condition,o.slice(1)):new e(t.field,t.operator,t.value,t.ignoreCase,t.ignoreAccent)},e}(),jl={li:"e-list-item",ul:"e-list-parent e-ul",group:"e-list-group-item",icon:"e-list-icon",text:"e-list-text",check:"e-list-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-list-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-list-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"};function Rl(e,t){var i={};if(m(e)||"string"===typeof e||"number"===typeof e||!m(e.isHeader))return e;for(var n=0,o=Object.keys(t);n<o.length;n++){var s=t[o[n]],a=m(s)||"string"!==typeof s?void 0:l(s,e);m(a)||(i[s]=a)}return i}function _l(e){if(e)try{return document.querySelector(e)?Mi(document.querySelector(e).innerHTML.trim()):Mi(e)}catch(t){return Mi(e)}}function Hl(e,t,i,n,o,s){var a,r,l=t.parentElement;if("vscroll"===n?(a=s||t.getBoundingClientRect().height,r=i.getBoundingClientRect().height):(a=t.getBoundingClientRect().width,r=i.getBoundingClientRect().width),a<r)return Wl(e,t,i,n,o,s);if(l){var d=l.getBoundingClientRect().width;return d<a&&"hscroll"===n?(r=d,t.style.maxWidth=d+"px",Wl(e,t,i,n,o,s)):i}return i}function Wl(e,t,i,n,o,s){var a=e("div",{className:"e-menu-"+n});return t.appendChild(a),a.appendChild(i),s?(a.style.overflow="hidden",a.style.height=s+"px"):(a.style.maxHeight=t.style.maxHeight,t.style.overflow="hidden"),"vscroll"===n?new Xa({enableRtl:o},a).scrollStep=Ee(".e-"+n+"-bar",t).offsetHeight/2:new La({enableRtl:o},a).scrollStep=Ee(".e-"+n+"-bar",t).offsetWidth,a}function Ul(e,t,i){if(e){var n=Ee(".e-menu-parent",t);n?i&&i!==n||(e.destroy(),t.parentElement.appendChild(n),Ae(t)):(e.destroy(),Ae(t))}}!function(e){e.defaultMappedFields={id:"id",text:"text",url:"url",value:"value",isChecked:"isChecked",enabled:"enabled",expanded:"expanded",selected:"selected",iconCss:"iconCss",child:"child",isVisible:"isVisible",hasChildren:"hasChildren",tooltip:"tooltip",htmlAttributes:"htmlAttributes",urlAttributes:"urlAttributes",imageAttributes:"imageAttributes",imageUrl:"imageUrl",groupBy:null,sortBy:null};var t={level:1,listRole:"presentation",itemRole:"presentation",groupItemRole:"group",itemText:"list-item",wrapperRole:"presentation"},i={showCheckBox:!1,showIcon:!1,enableHtmlSanitizer:!1,expandCollapse:!1,fields:e.defaultMappedFields,ariaAttributes:t,listClass:"",itemClass:"",processSubChild:!1,sortOrder:"None",template:null,groupTemplate:null,headerTemplate:null,expandIconClass:"e-icon-collapsible",moduleName:"list",expandIconPosition:"Right",itemNavigable:!1};function n(e,t,i,n,s){return C(e,o(e,t,i,n,s),null,n)}function o(e,t,n,o,s){var a=[],r=f({},i,o);jl=w(r.moduleName);for(var l=g(),d=0;d<t.length;d++)if(!m(t[d])){var h=void 0;if(r.itemCreating&&"function"===typeof r.itemCreating){var p={dataSource:t,curData:t[d],text:t[d],options:r};r.itemCreating(p)}if(h=n?v(e,t[d],void 0,null,null,[],null,l,d,o):S(e,t[d],void 0,null,null,o,s),r.itemCreated&&"function"===typeof r.itemCreated){p={dataSource:t,curData:t[d],text:t[d],item:h,options:r};r.itemCreated(p)}a.push(h)}return a}function s(n,o,s,a,r,l){var d=f({},i,s);jl=w(d.moduleName);var c,b=!l||"listview"!==l.getModuleName()&&"multiselect"!==l.getModuleName()?f({},e.defaultMappedFields,d.fields):d.fields,C=f({},t,d.ariaAttributes),x=[];a&&(C.level=a);var M,I,T=[];o&&o.length&&!m(h(o).item)&&!h(o).item.hasOwnProperty(b.id)&&(c=g());for(var A=0;A<o.length;A++){var k=Rl(o[A],b);if(!m(o[A])){if(d.itemCreating&&"function"===typeof d.itemCreating){var V={dataSource:o,curData:o[A],text:k[b.text],options:d,fields:b};d.itemCreating(V)}var E=o[A];d.itemCreating&&"function"===typeof d.itemCreating&&(k=Rl(o[A],b)),k.hasOwnProperty(b.id)&&!m(k[b.id])&&(c=k[b.id]);var D=[];if(d.showCheckBox&&(d.itemNavigable&&(k[b.url]||k[b.urlAttributes])?x.push(n("input",{className:jl.check,attrs:{type:"checkbox"}})):D.push(n("input",{className:jl.check,attrs:{type:"checkbox"}}))),!0===r)d.showIcon&&k.hasOwnProperty(b.iconCss)&&!m(k[b.iconCss])&&D.push(n("span",{className:jl.icon+" "+k[b.iconCss]})),I=(M=v(n,E,k,b,d.itemClass,D,!(!E.hasOwnProperty("isHeader")||!E.isHeader),c,A,s)).querySelector("."+jl.anchorWrap),d.itemNavigable&&x.length&&Me(x,M.firstElementChild);else{if((M=S(n,E,k,b,d.itemClass,s,l)).classList.add(jl.level+"-"+C.level),M.setAttribute("aria-level",C.level.toString()),"presentation"==C.groupItemRole&&M.removeAttribute("aria-level"),I=M.querySelector("."+jl.anchorWrap),k.hasOwnProperty(b.tooltip)&&M.setAttribute("title",k[b.tooltip]),k.hasOwnProperty(b.htmlAttributes)&&k[b.htmlAttributes]&&p(M,k[b.htmlAttributes]),k.hasOwnProperty(b.enabled)&&!1===k[b.enabled]&&M.classList.add(jl.disabled),k.hasOwnProperty(b.isVisible)&&!1===k[b.isVisible]&&(M.style.display="none"),k.hasOwnProperty(b.imageUrl)&&!m(k[b.imageUrl])&&!d.template){var N={src:k[b.imageUrl]};u(N,k[b.imageAttributes]);var F=n("img",{className:jl.image,attrs:N});I?I.insertAdjacentElement("afterbegin",F):Me([F],M.firstElementChild)}if(d.showIcon&&k.hasOwnProperty(b.iconCss)&&!m(k[b.iconCss])&&!d.template){var L=n("div",{className:jl.icon+" "+k[b.iconCss]});I?I.insertAdjacentElement("afterbegin",L):Me([L],M.firstElementChild)}D.length&&Me(D,M.firstElementChild),d.itemNavigable&&x.length&&Me(x,M.firstElementChild),y(n,k,b,o,d,M,C.level)}if(I&&be([M],[jl.navigable]),d.itemCreated&&"function"===typeof d.itemCreated){V={dataSource:o,curData:o[A],text:k[b.text],item:M,options:d,fields:b};d.itemCreated(V)}x=[],T.push(M)}}return T}function a(e,t,n,o,a,r){var l=f({},i,n);return C(e,s(e,t,n,o,a,r),l.listClass,n)}function r(e,t){if(t&&e){return Array.prototype.slice.call(t).indexOf(e)}}function l(e,t,i){if(void 0===i&&(i=new Bl),"Ascending"===e)i.sortBy(t,"ascending",!0);else if("Descending"===e)i.sortBy(t,"descending",!0);else for(var n=0;n<i.queries.length;n++)"onSortBy"===i.queries[n].fn&&i.queries.splice(n,1);return i}function d(e,t){return new Fl(e).executeLocal(t)}function h(e){for(var t={typeof:null,item:null},i=0;i<e.length;i++)if(!m(e[i]))return{typeof:typeof e[i],item:e[i]};return t}function p(e,t){var i={};u(i,t),i.class&&(be([e],i.class.split(" ")),delete i.class),Ve(e,i)}function c(e){for(var t={},i=e.attributes,n=0;n<i.length;n++)t[i[n].nodeName]=i[n].nodeValue;return t}function g(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function y(e,t,i,n,o,s,r){var l=t[i.child]||[],d=t[i.hasChildren];if(l.length&&(d=!0,s.classList.add(jl.hasChild),o.processSubChild)){var h=a(e,l,o,++r);s.appendChild(h)}o.expandCollapse&&d&&!o.template&&(s.firstElementChild.classList.add(jl.iconWrapper),("Left"===o.expandIconPosition?Me:Ie)([e("div",{className:"e-icons "+o.expandIconClass})],s.querySelector("."+jl.textContent)))}function v(e,n,o,s,a,r,l,d,h,c){var u,g,y=f({},i,c),v=f({},t,y.ariaAttributes),w=n,S=n;"string"!==typeof n&&"number"!==typeof n&&"boolean"!==typeof n&&(u=n,w="boolean"===typeof o[s.text]||"number"===typeof o[s.text]?o[s.text]:o[s.text]||"",S=o[s.value]),g=m(u)||m(o[s.id])||""===o[s.id]?d+"-"+h:d;var C=e("li",{className:(!0===l?jl.group:jl.li)+" "+(m(a)?"":a),id:g,attrs:""!==v.groupItemRole&&""!==v.itemRole?{role:!0===l?v.groupItemRole:v.itemRole}:{}});return u&&o.hasOwnProperty(s.enabled)&&"false"===o[s.enabled].toString()&&C.classList.add(jl.disabled),l?C.innerText=w:(C.setAttribute("data-value",m(S)?"null":S),C.setAttribute("role","option"),u&&o.hasOwnProperty(s.htmlAttributes)&&o[s.htmlAttributes]&&p(C,o[s.htmlAttributes]),r.length&&!y.itemNavigable&&Ie(r,C),u&&(o[s.url]||o[s.urlAttributes]&&o[s.urlAttributes].href)?C.appendChild(b(e,u,s,w,r,y.itemNavigable)):(r.length&&y.itemNavigable&&Ie(r,C),C.appendChild(document.createTextNode(w)))),C}function w(e){return{li:"e-"+e+"-item",ul:"e-"+e+"-parent e-ul",group:"e-"+e+"-group-item",icon:"e-"+e+"-icon",text:"e-"+e+"-text",check:"e-"+e+"-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-"+e+"-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-"+e+"-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"}}function b(e,t,i,n,o,s){var a,r=Rl(t,i),l={href:r[i.url]};if(r.hasOwnProperty(i.urlAttributes)&&r[i.urlAttributes]&&(u(l,r[i.urlAttributes]),l.href=r[i.url]?r[i.url]:r[i.urlAttributes].href),s){a=e("a",{className:jl.text+" "+jl.url});var d=e("div",{className:jl.anchorWrap});o&&o.length&&Ie(o,d),d.appendChild(document.createTextNode(n)),Ie([d],a)}else a=e("a",{className:jl.text+" "+jl.url,innerHTML:n});return p(a,l),a}function S(e,n,o,s,a,r,l){var d,h,p,c=f({},i,r),u=f({},t,c.ariaAttributes),y=n;"string"!==typeof n&&"number"!==typeof n&&(p=n,y=o[s.text]||"",d=m(o._id)?o[s.id]:o._id,h=!(!n.hasOwnProperty("isHeader")||!n.isHeader)),r&&r.enableHtmlSanitizer;var v=e("li",{className:(!0===h?jl.group:jl.li)+" "+(m(a)?"":a),attrs:""!==u.groupItemRole&&""!==u.itemRole?{role:!0===h?u.groupItemRole:u.itemRole}:{}});if(!0===!m(d)?v.setAttribute("data-uid",d):v.setAttribute("data-uid",g()),h&&r&&r.groupTemplate){var w=_l(r.groupTemplate);if(l&&"listview"!==l.getModuleName())(S=w(n,l,"groupTemplate",c.groupTemplateID,!!c.isStringTemplate,null,v))&&Ie(S,v);else Ie(w(n,l,"groupTemplate",c.groupTemplateID,!!c.isStringTemplate),v)}else if(!h&&r&&r.template){var S;w=_l(r.template);if(l&&"listview"!==l.getModuleName())(S=w(n,l,"template",c.templateID,!!c.isStringTemplate,null,v))&&Ie(S,v);else Ie(w(n,l,"template",c.templateID,!!c.isStringTemplate),v)}else{var C=e("div",{className:jl.textContent,attrs:""!==u.wrapperRole?{role:u.wrapperRole}:{}});if(p&&(o[s.url]||o[s.urlAttributes]&&o[s.urlAttributes].href))C.appendChild(b(e,p,s,y,null,c.itemNavigable));else{var x=e("span",{className:jl.text,attrs:""!==u.itemText?{role:u.itemText}:{}});r&&r.enableHtmlSanitizer?x.innerText=y:x.innerHTML=y,C.appendChild(x)}v.appendChild(C)}return v}function C(e,n,o,s){var a=f({},i,s),r=f({},t,a.ariaAttributes),l=e("ul",{className:(jl=w(a.moduleName)).ul+" "+(m(o)?"":o),attrs:""!==r.listRole?{role:r.listRole}:{}});return Ie(n,l),l}e.createList=function(e,o,s,r,l){var d=f({},i,s),p=f({},t,d.ariaAttributes),c=h(o).typeof;return"string"===c||"number"===c?n(e,o,r,s,l):a(e,o,s,p.level,r,l)},e.createListFromArray=n,e.createListItemFromArray=o,e.createListItemFromJson=s,e.createListFromJson=a,e.getSiblingLI=function(e,t,n){if(jl=w(i.moduleName),e&&e.length){var o,s,a=Array.prototype.slice.call(e);for(o=a[(s=t?r(t,a):!0===n?a.length:-1)+(!0===n?-1:1)];o&&(!xe(o)||o.classList.contains(jl.disabled));)o=a[s+=!0===n?-1:1];return o}},e.indexOf=r,e.groupDataSource=function(t,i,n){void 0===n&&(n="None");var o=f({},e.defaultMappedFields,i),s=(new Bl).group(o.groupBy),a=d(t,s=l(n,"key",s));t=[];for(var r=0;r<a.length;r++){var h=a[r].items,p={};p[o.text]=a[r].key,p.isHeader=!0;var c=o.text;"id"===c&&(p[c="text"]=a[r].key),p._id="group-list-item-"+(a[r].key?a[r].key.toString().trim():"undefined"),p.items=h,t.push(p);for(var u=0;u<h.length;u++)t.push(h[u])}return t},e.addSorting=l,e.getDataSource=d,e.createJsonFromElement=function t(n,o){var s=f({},i,o),a=f({},e.defaultMappedFields,s.fields),r=n.cloneNode(!0),l=[];r.classList.add("json-parent");var d=r.querySelectorAll(".json-parent>li");r.classList.remove("json-parent");for(var h=0;h<d.length;h++){for(var p=d[h],u=p.querySelector("a"),m=p.querySelector("ul"),y={},v=u?u.childNodes:p.childNodes,w=Object.keys(v),b=0;b<v.length;b++)v[Number(w[b])].hasChildNodes()||(y[a.text]=v[Number(w[b])].textContent);var S=c(p);S.id?(y[a.id]=S.id,delete S.id):y[a.id]=g(),Object.keys(S).length&&(y[a.htmlAttributes]=S),u&&(S=c(u),Object.keys(S).length&&(y[a.urlAttributes]=S)),m&&(y[a.child]=t(m,o)),l.push(y)}return l},e.renderContentTemplate=function(t,n,o,s,a,r){for(var l,d=t("ul",{className:(jl=w(i.moduleName)).ul,attrs:{role:"presentation"}}),h=f({},i,a),p=f({},e.defaultMappedFields,s),c=_l(n),u=[],y=g(),v=0;v<o.length;v++){var b=Rl(o[v],p),S=o[v],C=S.isHeader;if(l="string"===typeof o[v]||"number"===typeof o[v]?S:b[p.value],h.itemCreating&&"function"===typeof h.itemCreating){var x={dataSource:o,curData:S,text:l,options:h,fields:p};h.itemCreating(x)}h.itemCreating&&"function"===typeof h.itemCreating&&(b=Rl(o[v],p),l="string"===typeof o[v]||"number"===typeof o[v]?S:b[p.value]);var M=t("li",{id:y+"-"+v,className:C?jl.group:jl.li,attrs:{role:"presentation"}});if(C)"string"===typeof o[v]||"number"===typeof o[v]?M.innerText=S:M.innerText=b[p.text];else{var I,T=C?h.groupTemplateID:h.templateID;if(C)if(r&&"listview"!=r.getModuleName())(I=c(S,r,"headerTemplate",T,!!h.isStringTemplate,null,M))&&Ie(I,M);else Ie(c(S,r,"headerTemplate",T,!!h.isStringTemplate),M);else if(r&&"listview"!==r.getModuleName())(I=c(S,r,"template",T,!!h.isStringTemplate,null,M))&&Ie(I,M);else Ie(c(S,r,"template",T,!!h.isStringTemplate),M);M.setAttribute("data-value",m(l)?"null":l),M.setAttribute("role","option")}if(h.itemCreated&&"function"===typeof h.itemCreated){x={dataSource:o,curData:S,text:l,item:M,options:h,fields:p};h.itemCreated(x)}u.push(M)}return Ie(u,d),d},e.renderGroupTemplate=function(t,n,o,s,a,r){for(var l=_l(t),d=f({},e.defaultMappedFields,o),h=f({},i,a),p=d.groupBy,c=0,u=s;c<u.length;c++){var m=u[c],g={};if(g[p]=m.textContent,m.innerHTML="",r&&"listview"!==r.getModuleName()){var y=l(g,r,"groupTemplate",h.groupTemplateID,!!h.isStringTemplate,null,m);y&&Ie(y,m)}else Ie(l(g,r,"groupTemplate",h.groupTemplateID,!!h.isStringTemplate),m)}return s},e.generateId=g,e.generateUL=C,e.generateIcon=function(e,t,n,o){var s=f({},i,o);return jl=w(s.moduleName),("Left"===s.expandIconPosition?Me:Ie)([e("div",{className:"e-icons "+s.expandIconClass+" "+(m(n)?"":n)})],t.querySelector("."+jl.textContent)),t}}(bl||(bl={}));var ql,Yl=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ql=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Zl="enter",Xl="escape",Gl="e-focused",Jl="e-menu-header",Kl="e-selected",$l="e-separator",ed="uparrow",td="downarrow",id="leftarrow",nd="rightarrow",od="home",sd="end",ad="tab",rd="e-caret",ld="e-menu-item",dd="e-disabled",hd="e-menu-hide",pd="e-icons",cd="e-rtl",ud="e-menu-popup",fd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yl(t,e),Ql([Ge("id")],t.prototype,"itemId",void 0),Ql([Ge("parentId")],t.prototype,"parentId",void 0),Ql([Ge("text")],t.prototype,"text",void 0),Ql([Ge("iconCss")],t.prototype,"iconCss",void 0),Ql([Ge("url")],t.prototype,"url",void 0),Ql([Ge("separator")],t.prototype,"separator",void 0),Ql([Ge("items")],t.prototype,"children",void 0),t}(mt),md=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yl(t,e),Ql([Ge(null)],t.prototype,"iconCss",void 0),Ql([Ge("")],t.prototype,"id",void 0),Ql([Ge(!1)],t.prototype,"separator",void 0),Ql([Ke([],t)],t.prototype,"items",void 0),Ql([Ge("")],t.prototype,"text",void 0),Ql([Ge("")],t.prototype,"url",void 0),t}(mt),gd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yl(t,e),Ql([Ge("SlideDown")],t.prototype,"effect",void 0),Ql([Ge(400)],t.prototype,"duration",void 0),Ql([Ge("ease")],t.prototype,"easing",void 0),t}(mt),yd=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.navIdx=[],n.animation=new st({}),n.isTapHold=!1,n.tempItem=[],n.showSubMenuOn="Auto",n}return Yl(t,e),t.prototype.preRender=function(){if(!this.isMenu){var e=void 0;if("EJS-CONTEXTMENU"===this.element.tagName){e=this.createElement("ul",{id:y(this.getModuleName()),className:"e-control e-lib e-"+this.getModuleName()});var t=l("ej2_instances",this.element);Se([this.element],["e-control","e-lib","e-"+this.getModuleName()]),this.clonedElement=this.element,this.element=e,d("ej2_instances",t,this.element)}else{e=this.createElement("ul",{id:y(this.getModuleName())}),Ie([].slice.call(this.element.cloneNode(!0).children),e);var i=this.element.nextElementSibling;i?this.element.parentElement.insertBefore(e,i):this.element.parentElement.appendChild(e),this.clonedElement=e}this.clonedElement.style.display="none"}if("EJS-MENU"===this.element.tagName){for(var n=this.element,o=l("ej2_instances",n),s=(e=this.createElement("ul"),this.createElement("EJS-MENU",{className:"e-"+this.getModuleName()+"-wrapper"})),a=0,r=n.attributes.length;a<r;a++)e.setAttribute(n.attributes[a].nodeName,n.attributes[a].nodeValue);n.parentNode.insertBefore(s,n),Ae(n),n=e,s.appendChild(n),d("ej2_instances",o,n),this.clonedElement=s,this.element=n,this.element.id||(this.element.id=y(this.getModuleName()))}},t.prototype.render=function(){var e=this;this.initialize(),this.renderItems(),this.wireEvents(),this.renderComplete();var t=this.getWrapper();this.template&&this.enableScrolling&&(this.isReact||this.isAngular)&&requestAnimationFrame((function(){Hl(e.createElement,t,e.element,"hscroll",e.enableRtl)}))},t.prototype.initialize=function(){var e=this.getWrapper();e||(e=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"}),this.isMenu?this.element.parentElement.insertBefore(e,this.element):document.body.appendChild(e)),this.cssClass&&be([e],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.enableRtl&&e.classList.add(cd),e.appendChild(this.element),this.isMenu&&this.hamburgerMode&&(this.target||this.createHeaderContainer(e)),this.defaultOption=this.showItemOnClick},t.prototype.renderItems=function(){if(!this.items.length){var e=bl.createJsonFromElement(this.element,{fields:{child:"items"}});this.setProperties({items:e},!0),S()&&!this.isMenu?this.element=this.removeChildElement(this.element):this.element.innerHTML=""}var t=this.createItems(this.items);if(Ie(Array.prototype.slice.call(t.children),this.element),this.element.classList.add("e-menu-parent"),this.isMenu&&(!this.hamburgerMode&&this.element.classList.contains("e-vertical")&&this.setBlankIconStyle(this.element),this.enableScrolling)){var i=this.getWrapper();this.element.classList.contains("e-vertical")?Hl(this.createElement,i,this.element,"vscroll",this.enableRtl):Hl(this.createElement,i,this.element,"hscroll",this.enableRtl)}},t.prototype.wireEvents=function(){var e=this.getWrapper();if(this.target){for(var t=void 0,i=De(this.target),n=0,o=i.length;n<o;n++)t=i[n],this.isMenu?ye.add(t,"click",this.menuHeaderClickHandler,this):ge.isIos?new Gt(t,{tapHold:this.touchHandler.bind(this)}):ye.add(t,"contextmenu",this.cmenuHandler,this);if(this.targetElement=t,!this.isMenu){ye.add(this.targetElement,"scroll",this.scrollHandler,this);for(var s=0,a=Pn(this.targetElement);s<a.length;s++){var r=a[s];ye.add(r,"scroll",this.scrollHandler,this)}}}ge.isDevice||(this.delegateMoverHandler=this.moverHandler.bind(this),this.delegateMouseDownHandler=this.mouseDownHandler.bind(this),ye.add(this.isMenu?document:e,"mouseover",this.delegateMoverHandler,this),ye.add(document,"mousedown",this.delegateMouseDownHandler,this)),this.delegateClickHandler=this.clickHandler.bind(this),ye.add(document,"click",this.delegateClickHandler,this),this.wireKeyboardEvent(e),this.rippleFn=at(e,{selector:"."+ld})},t.prototype.wireKeyboardEvent=function(e){var t={downarrow:td,uparrow:ed,enter:Zl,leftarrow:id,rightarrow:nd,escape:Xl};this.isMenu&&(t.home=od,t.end=sd,t.tab=ad),new Ut(e,{keyAction:this.keyBoardHandler.bind(this),keyConfigs:t})},t.prototype.mouseDownHandler=function(e){Fe(e.target,".e-"+this.getModuleName()+"-wrapper")===this.getWrapper()||Fe(e.target,".e-"+this.getModuleName()+"-popup")||this.closeMenu(this.isMenu?null:this.navIdx.length,e)},t.prototype.keyBoardHandler=function(e){var t="",i=e.target,n=this.isMenu&&!this.hamburgerMode&&!this.element.classList.contains("e-vertical")&&this.navIdx.length<1;if(e.preventDefault(),this.enableScrolling&&13===e.keyCode&&i.classList.contains("e-scroll-nav")&&this.removeLIStateByClass([Gl,Kl],[Fe(i,".e-"+this.getModuleName()+"-wrapper")]),n)switch(e.action){case nd:t=nd,e.action=td;break;case id:t=id,e.action=ed;break;case td:t=td,e.action=nd;break;case ed:t=ed,e.action=""}else if(this.enableRtl)switch(e.action){case id:n=!0,t=id,e.action=nd;break;case nd:n=!0,t=nd,e.action=id}switch(e.action){case td:case ed:case sd:case od:case ad:this.upDownKeyHandler(e);break;case nd:this.rightEnterKeyHandler(e);break;case id:this.leftEscKeyHandler(e);break;case Zl:this.hamburgerMode&&"SPAN"===i.tagName&&i.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(e):this.rightEnterKeyHandler(e);break;case Xl:this.leftEscKeyHandler(e)}n&&(e.action=t)},t.prototype.upDownKeyHandler=function(e){var t=this.getUlByNavIdx(),i=e.action===td||e.action===od||e.action===ad?0:t.childElementCount-1,n=i,o=this.getLIByClass(t,Gl);o&&(e.action!==sd&&e.action!==od&&(n=this.getIdx(t,o)),o.classList.remove(Gl),e.action!==sd&&e.action!==od&&(e.action===td?n++:n--,n===(e.action===td?t.childElementCount:-1)&&(n=i)));var s=t.children[n];n=this.isValidLI(s,n,e.action),t.children[n].classList.add(Gl),t.children[n].focus()},t.prototype.isValidLI=function(e,t,i){var n=this.getUlByNavIdx(),o=i===td||i===od||i===ad?0:n.childElementCount-1;return(e.classList.contains($l)||e.classList.contains(dd)||e.classList.contains(hd))&&(i===td&&t===n.childElementCount-1||i===ed&&0===t?t=o:i===td||i===nd?t++:t--),((e=n.children[t]).classList.contains($l)||e.classList.contains(dd)||e.classList.contains(hd))&&(t=this.isValidLI(e,t,i)),t},t.prototype.getUlByNavIdx=function(e){if(void 0===e&&(e=this.navIdx.length),this.isMenu){var t=[this.getWrapper()].concat([].slice.call(De("."+ud)))[e];return m(t)?null:Ee(".e-menu-parent",t)}return this.getWrapper().children[e]},t.prototype.rightEnterKeyHandler=function(e){var t,i=this.getUlByNavIdx(),n=this.getLIByClass(i,Gl);if(n){var o=this.getIdx(i,n),s=this.navIdx.concat(o),a=this.getItem(s);a.items.length?(this.navIdx.push(o),this.keyType="right",this.action=e.action,this.openMenu(n,a,-1,-1,e)):e.action===Zl&&(this.isMenu&&0===this.navIdx.length?this.removeLIStateByClass([Kl],[this.getWrapper()]):n.classList.remove(Gl),n.classList.add(Kl),t={element:n,item:a,event:e},this.trigger("select",t),this.closeMenu(null,e))}},t.prototype.leftEscKeyHandler=function(e){this.navIdx.length?(this.keyType="left",this.closeMenu(this.navIdx.length,e)):e.action===Xl&&this.closeMenu(null,e)},t.prototype.scrollHandler=function(e){this.closeMenu(null,e)},t.prototype.touchHandler=function(e){this.isTapHold=!0,this.cmenuHandler(e.originalEvent)},t.prototype.cmenuHandler=function(e){e.preventDefault(),this.currentTarget=e.target,this.isCMenu=!0,this.pageX=e.changedTouches?e.changedTouches[0].pageX+1:e.pageX+1,this.pageY=e.changedTouches?e.changedTouches[0].pageY+1:e.pageY+1,this.closeMenu(null,e),this.isCMenu&&(this.canOpen(e.target)&&this.openMenu(null,null,this.pageY,this.pageX,e),this.isCMenu=!1)},t.prototype.closeMenu=function(e,t,i){var n=this;if(void 0===e&&(e=0),void 0===t&&(t=null),this.isMenuVisible()){var o,s,a=void 0,r=this.getWrapper(),l=void 0,d=this.getPopups(),h=!1,p=this.isMenu?d.length+1:r.childElementCount,c=this.isMenu&&1!==p?Ee(".e-ul",d[p-2]):De(".e-menu-parent",r)[p-1];if(this.isMenu&&c.classList.contains("e-menu")&&((a=this.getLIByClass(c,Kl))&&a.classList.remove(Kl),h=!0),!h){var u=t&&t.target&&this.getLI(t.target);this.cli=u||c.children[0],o=this.navIdx.length?this.getItem(this.navIdx):null,s=o?o.items:this.items,l={element:c,parentItem:o,items:s,event:t,cancel:!1,isFocused:!0},this.trigger("beforeClose",l,(function(a){var l,d,h,p,f,g,y="",v=!a.cancel;(v||n.isCMenu)&&(n.isMenu?(l=Fe(c,"."+ud),n.hamburgerMode&&(l.parentElement.style.minHeight="",Fe(c,".e-menu-item").setAttribute("aria-expanded","false")),n.unWireKeyboardEvent(l),Ul(x(l.children[0],Xa),l.children[0]),(h=x(l,Ln)).hide(),y=l.id,h.destroy(),Ae(l)):n.toggleAnimation(c,!1),d={element:c,parentItem:o,items:s},n.trigger("onClose",d),n.navIdx.pop()),n.updateReactTemplate();var w=n.getWrapper()&&n.getUlByNavIdx();n.isCMenu&&(n.canOpen(t.target)&&n.openMenu(null,null,n.pageY,n.pageX,t),n.isCMenu=!1),n.isMenu&&w&&y.length?(p=new RegExp("(.*)-ej2menu-"+n.element.id+"-popup").exec(y)[1],f=w.querySelector('[id="'+p+'"]'),g=u&&w.querySelector('[id="'+u.id+'"]')):w&&(f=w.querySelector(".e-menu-item.e-selected"),g=u&&w.querySelector('[id="'+u.id+'"]'));var b=u&&u.querySelectorAll(".e-menu-item");if(v&&n.hamburgerMode&&e&&!b.length)n.afterCloseMenu(t);else if(v&&!n.hamburgerMode&&f&&!g&&"left"!==n.keyType&&(n.navIdx.length||!n.isMenu&&0===n.navIdx.length)){var S=t&&t.target.classList.contains("e-vscroll")?Fe(t.target,".e-menu-wrapper"):null;S?(S=S.querySelector(".e-menu-item"),(n.showItemOnClick||S&&n.getIndex(S.id,!0).length<=n.navIdx.length)&&n.closeMenu(n.navIdx[n.navIdx.length-1],t,!0)):n.closeMenu(n.navIdx[n.navIdx.length-1],t)}else if(v&&!i&&!e&&(n.hamburgerMode&&n.navIdx.length||1===n.navIdx.length&&u&&w!==u.parentElement))n.closeMenu(null,t);else if(v&&m(e)&&n.navIdx.length)n.closeMenu(null,t);else if(!v||n.isMenu||e||0!==n.navIdx.length||n.isMenusClosed)if(v&&n.isMenu&&t&&t.target&&0!==n.navIdx.length&&Fe(t.target,".e-menu-parent.e-control"))n.closeMenu(0,t);else if(v&&!n.isMenu&&De(".e-menu-parent",r)[e-1]&&3===t.which)n.closeMenu(null,t);else{if(!v||"right"!==n.keyType&&"click"!==n.keyType){var C=n.getUlByNavIdx(),M=n.getLIByClass(C,Kl);if(M&&(M.setAttribute("aria-expanded","false"),M.classList.remove(Kl),(a.isFocused&&u||"left"===n.keyType)&&(M.classList.add(Gl),M.focus())),!v&&n.hamburgerMode&&u&&"false"===u.getAttribute("aria-expanded")&&"true"===u.getAttribute("aria-haspopup")){Fe(u,".e-menu-parent.e-control")?n.navIdx=[]:n.navIdx.pop(),n.navIdx.push(n.cliIdx);var I=n.getItem(n.navIdx);u.setAttribute("aria-expanded","true"),n.openMenu(u,I,-1,-1,t)}}else n.afterCloseMenu(t);n.navIdx.length<1&&("Hover"!==n.showSubMenuOn&&"Click"!==n.showSubMenuOn||(n.showItemOnClick=n.defaultOption,n.showSubMenuOn="Auto"))}else n.isMenusClosed=!0,n.closeMenu(0,t);n.removeStateWrapper()}))}}},t.prototype.updateReactTemplate=function(){if(this.isReact&&this.template&&0===this.navIdx.length){var e=this.portals.splice(0,this.items.length);this.clearTemplate(["template"]),this.portals=e,this.renderReactTemplates()}},t.prototype.getMenuItemModel=function(e,t){if(m(e))return null;m(t)&&(t=0);var i=this.getFields(t);return{text:e[i.text],id:e[i.id],items:e[i.child],separator:e[i.separator],iconCss:e[i.iconCss],url:e[i.url]}},t.prototype.getPopups=function(){var e=this,t=[];return[].slice.call(document.querySelectorAll("."+ud)).forEach((function(i){!m(i.querySelector("."+ld))&&e.getIndex(i.querySelector("."+ld).id,!0).length&&t.push(i)})),t},t.prototype.isMenuVisible=function(){return this.navIdx.length>0||this.element.classList.contains("e-contextmenu")&&xe(this.element).valueOf()},t.prototype.canOpen=function(e){var t=!0;if(this.filter){t=!1;for(var i=this.filter.split(" "),n=0,o=i.length;n<o;n++)if(Fe(e,"."+i[n])){t=!0;break}}return t},t.prototype.openMenu=function(e,t,i,n,o,s){var a=this;void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=null),void 0===s&&(s=this.targetElement);var r=this.getWrapper();this.lItem=e;var l=""!==this.element.id?this.element.id:"menu";if(this.isMenusClosed=!1,m(i)&&(i=-1),m(n)&&(n=-1),e){if(this.uList=this.createItems(t[this.getField("children",this.navIdx.length-1)]),!this.isMenu&&ge.isDevice){r.lastChild.style.display="none";var d={text:t[this.getField("text")].toString(),iconCss:pd+" e-previous"},h=new md(this.items[0],"items",d,!0),p=this.createItems([h]).children[0];p.classList.add(Jl),this.uList.insertBefore(p,this.uList.children[0])}this.isMenu?(this.popupWrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper "+ud,id:e.id+"-ej2menu-"+l+"-popup"}),this.hamburgerMode?(i=e.offsetHeight,e.appendChild(this.popupWrapper)):document.body.appendChild(this.popupWrapper),this.isNestedOrVertical=this.element.classList.contains("e-vertical")||1!==this.navIdx.length,this.popupObj=this.generatePopup(this.popupWrapper,this.uList,e,this.isNestedOrVertical),this.template&&this.renderReactTemplates(),this.hamburgerMode?this.calculateIndentSize(this.uList,e):(this.cssClass&&be([this.popupWrapper],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.popupObj.hide()),this.hamburgerMode||this.showItemOnClick||!this.hoverDelay?this.triggerBeforeOpen(e,this.uList,t,o,0,0,"menu"):(window.clearInterval(this.timer),this.timer=window.setTimeout((function(){a.triggerBeforeOpen(e,a.uList,t,o,0,0,"menu")}),this.hoverDelay))):(this.uList.style.zIndex=this.element.style.zIndex,r.appendChild(this.uList),!this.showItemOnClick&&this.hoverDelay?(window.clearInterval(this.timer),this.timer=window.setTimeout((function(){a.triggerBeforeOpen(e,a.uList,t,o,i,n,"none")}),this.hoverDelay)):this.triggerBeforeOpen(e,this.uList,t,o,i,n,"none"))}else this.uList=this.element,this.uList.style.zIndex=On(s||this.element).toString(),this.triggerBeforeOpen(e,this.uList,t,o,i,n,"none")},t.prototype.calculateIndentSize=function(e,t){var i=getComputedStyle(t),n=parseInt(i.textIndent,10);this.navIdx.length<2&&!t.classList.contains("e-blankicon")?n*=2:n+=n/4,e.style.textIndent=n+"px";var o=e.querySelectorAll(".e-blankicon");if(o&&o.length)for(var s=e.querySelector(".e-menu-icon"),a=getComputedStyle(s),r=parseInt(a.marginRight,10)+s.offsetWidth+n,l=0;l<o.length;l++)o[l].style.textIndent=r+"px"},t.prototype.generatePopup=function(e,t,i,n){var o=this,s=new Ln(e,{actionOnScroll:this.hamburgerMode?"none":"reposition",relateTo:i,collision:this.hamburgerMode?{X:"none",Y:"none"}:{X:n||this.enableRtl?"none":"flip",Y:"fit"},position:n&&!this.hamburgerMode?{X:"right",Y:"top"}:{X:"left",Y:"bottom"},targetType:"relative",enableRtl:this.enableRtl,content:t,open:function(){var e=Ee(".e-menu-vscroll",s.element);e&&(e.style.height="inherit",e.style.maxHeight="");var t=Ee(".e-ul",s.element);s.element.style.maxHeight="",t.focus(),o.triggerOpen(t)}});return s},t.prototype.createHeaderContainer=function(e){e=e||this.getWrapper();var t=this.createElement("span",{className:"e-"+this.getModuleName()+"-header"}),i=this.enableHtmlSanitizer?Vi.sanitize(this.title):this.title,n=this.createElement("span",{className:"e-"+this.getModuleName()+"-title",innerHTML:i}),o=this.createElement("span",{className:"e-icons e-"+this.getModuleName()+"-icon",attrs:{tabindex:"0"}});t.appendChild(n),t.appendChild(o),e.insertBefore(t,this.element)},t.prototype.openHamburgerMenu=function(e){this.hamburgerMode&&this.triggerBeforeOpen(null,this.element,null,e,0,0,"hamburger")},t.prototype.closeHamburgerMenu=function(e){var t=this,i={element:this.element,parentItem:null,event:e,items:this.items,cancel:!1};this.trigger("beforeClose",i,(function(i){i.cancel||(t.closeMenu(null,e),t.element.classList.add("e-hide-menu"),t.trigger("onClose",{element:t.element,parentItem:null,items:t.items}))}))},t.prototype.callFit=function(e,t,i,n,o){return rn(e,null,{X:t,Y:i},{top:n,left:o})},t.prototype.triggerBeforeOpen=function(e,t,i,n,o,s,a){var r=this,l=e?i[this.getField("children",this.navIdx.length-1)]:this.items,d={element:t,items:l,parentItem:i,event:n,cancel:!1,top:o,left:s,showSubMenuOn:"Auto"},h=a;this.trigger("beforeOpen",d,(function(o){switch(h){case"menu":r.hamburgerMode||("Auto"!==o.showSubMenuOn&&(r.showItemOnClick=!r.defaultOption,r.showSubMenuOn=o.showSubMenuOn),r.top=o.top,r.left=o.left),r.popupWrapper.style.display="block",r.hamburgerMode||(r.popupWrapper.style.maxHeight=r.popupWrapper.getBoundingClientRect().height+"px",r.enableScrolling&&Hl(r.createElement,r.popupWrapper,r.uList,"vscroll",r.enableRtl),r.checkScrollOffset(n)),r.hamburgerMode||r.left||r.top?(r.popupObj.collision={X:"none",Y:"none"},r.popupWrapper.style.display=""):(r.popupObj.refreshPosition(r.lItem,!0),r.left=parseInt(r.popupWrapper.style.left,10),r.top=parseInt(r.popupWrapper.style.top,10),r.enableRtl&&(r.left=r.isNestedOrVertical?r.left-r.popupWrapper.offsetWidth-r.lItem.parentElement.offsetWidth+2:r.left-r.popupWrapper.offsetWidth+r.lItem.offsetWidth),r.template&&(r.isReact||r.isAngular)?requestAnimationFrame((function(){r.collision(),r.popupWrapper.style.display=""})):(r.collision(),r.popupWrapper.style.display=""));break;case"none":r.top=o.top,r.left=o.left;break;case"hamburger":o.cancel||(r.element.classList.remove("e-hide-menu"),r.triggerOpen(r.element))}if("hamburger"!==h)if(o.cancel)r.isMenu?(r.popupObj.destroy(),Ae(r.popupWrapper)):t.className.indexOf("e-ul")>-1&&Ae(t),r.navIdx.pop();else if(r.isMenu)if(r.hamburgerMode)r.popupWrapper.style.top=r.top+"px",r.popupWrapper.style.left="0px",r.toggleAnimation(r.popupWrapper);else{r.setBlankIconStyle(r.popupWrapper),r.wireKeyboardEvent(r.popupWrapper),at(r.popupWrapper,{selector:"."+ld}),r.popupWrapper.style.left=r.left+"px",r.popupWrapper.style.top=r.top+"px";var s="None"!==r.animationSettings.effect?{name:r.animationSettings.effect,duration:r.animationSettings.duration,timingFunction:r.animationSettings.easing}:null;r.popupObj.show(s,r.lItem)}else r.setBlankIconStyle(r.uList),r.setPosition(r.lItem,r.uList,r.top,r.left),r.toggleAnimation(r.uList);if("right"===r.keyType){var a=r.getUlByNavIdx();if(e.classList.remove(Gl),r.isMenu&&1===r.navIdx.length&&r.removeLIStateByClass([Kl],[r.getWrapper()]),e.classList.add(Kl),r.action===Zl){var l={element:e,item:i,event:n};r.trigger("select",l)}e.focus(),a=r.getUlByNavIdx();var d=r.isValidLI(a.children[0],0,r.action);a.children[d].classList.add(Gl),a.children[d].focus()}}))},t.prototype.collision=function(){var e;if(e=ln(this.popupWrapper,null,this.left,this.top),(this.isNestedOrVertical||this.enableRtl)&&(e.indexOf("right")>-1||e.indexOf("left")>-1)){this.popupObj.collision.X="none";var t=Fe(this.lItem,".e-"+this.getModuleName()+"-wrapper").offsetWidth;this.left=this.enableRtl?Xi(this.lItem,this.isNestedOrVertical?"right":"left","top").left:this.left-this.popupWrapper.offsetWidth-t+2}((e=ln(this.popupWrapper,null,this.left,this.top)).indexOf("left")>-1||e.indexOf("right")>-1)&&(this.left=this.callFit(this.popupWrapper,!0,!1,this.top,this.left).left),this.popupWrapper.style.left=this.left+"px"},t.prototype.setBlankIconStyle=function(e){var t=[].slice.call(e.getElementsByClassName("e-blankicon"));if(t.length){var i=e.querySelector(".e-menu-item:not(.e-blankicon):not(.e-separator)");if(i){var n=i.querySelector(".e-menu-icon");if(n){var o=this.enableRtl?{padding:"paddingRight",margin:"marginLeft"}:{padding:"paddingLeft",margin:"marginRight"},s=getComputedStyle(n),a=parseInt(s.fontSize,10);parseInt(s.width,10)&&parseInt(s.width,10)>a&&(a=parseInt(s.width,10));var r=a+parseInt(s[o.margin],10)+parseInt(getComputedStyle(i)[o.padding],10)+"px";t.forEach((function(e){e.style[o.padding]=r}))}}}},t.prototype.checkScrollOffset=function(e){var t=this.getWrapper();if(t.children[0].classList.contains("e-menu-hscroll")&&1===this.navIdx.length){var i=m(e)?this.element:Fe(e.target,"."+ld),n=Ee(".e-hscroll-bar",t);n.scrollLeft>i.offsetLeft&&(n.scrollLeft-=n.scrollLeft-i.offsetLeft);var o=n.scrollLeft+n.offsetWidth,s=i.offsetLeft+i.offsetWidth;o<s&&(n.scrollLeft+=s-o)}},t.prototype.setPosition=function(e,t,i,n){var o="px";if(this.toggleVisiblity(t),t===this.element||n>-1&&i>-1){if((r=ln(t,null,n,i)).indexOf("right")>-1&&(n-=t.offsetWidth),r.indexOf("bottom")>-1)if((i=(a=this.callFit(t,!1,!0,i,n)).top-20)<0){var s=pageYOffset+document.documentElement.clientHeight-t.getBoundingClientRect().height;s>-1&&(i=s)}if((r=ln(t,null,n,i)).indexOf("left")>-1)n=(a=this.callFit(t,!0,!1,i,n)).left}else if(ge.isDevice)i=Number(this.element.style.top.replace(o,"")),n=Number(this.element.style.left.replace(o,""));else{var a;i=(a=Xi(e,this.enableRtl?"left":"right","top")).top,n=a.left;var r,l=(r=ln(t,null,this.enableRtl?n-t.offsetWidth:n,i)).indexOf("left")>-1||r.indexOf("right")>-1;l&&(n=(a=Xi(e,this.enableRtl?"right":"left","top")).left),(this.enableRtl||l)&&(n=this.enableRtl&&l?n:n-t.offsetWidth),r.indexOf("bottom")>-1&&(i=(a=this.callFit(t,!1,!0,i,n)).top)}this.toggleVisiblity(t,!1),t.style.top=i+o,t.style.left=n+o},t.prototype.toggleVisiblity=function(e,t){void 0===t&&(t=!0),e.style.visibility=t?"hidden":"",e.style.display=t?"block":"none"},t.prototype.createItems=function(e){var t=this,i=this.navIdx?this.navIdx.length:0,n=this.getFields(i),o=this.hasField(e,this.getField("iconCss",i)),s={showIcon:o,moduleName:"menu",fields:n,template:this.template,itemNavigable:!0,itemCreating:function(e){e.curData[e.fields[n.id]]||(e.curData[e.fields[n.id]]=y("menuitem")),e.curData.htmlAttributes={role:"menuitem",tabindex:"-1"},t.isMenu&&!e.curData[t.getField("separator",i)]&&(e.curData.htmlAttributes["aria-label"]=e.curData[e.fields.text]?e.curData[e.fields.text]:e.curData[e.fields.id]),""===e.curData[e.fields[n.iconCss]]&&(e.curData[e.fields[n.iconCss]]=null)},itemCreated:function(e){if(e.curData[t.getField("separator",i)]&&(e.item.classList.add($l),e.item.setAttribute("role","separator")),!o||e.curData[e.fields.iconCss]||e.curData[t.getField("separator",i)]||e.item.classList.add("e-blankicon"),e.curData[e.fields.child]&&e.curData[e.fields.child].length){var n=t.createElement("span",{className:pd+" "+rd});e.item.appendChild(n),e.item.setAttribute("aria-haspopup","true"),e.item.setAttribute("aria-expanded","false"),e.item.classList.add("e-menu-caret-icon")}t.isMenu&&t.template&&(e.item.setAttribute("id",e.curData[e.fields.id].toString()),e.item.removeAttribute("data-uid"),e.item.classList.contains("e-level-1")&&e.item.classList.remove("e-level-1"),e.item.classList.contains("e-has-child")&&e.item.classList.remove("e-has-child"),e.item.removeAttribute("aria-level"));var s={item:e.curData,element:e.item};t.trigger("beforeItemRender",s)}};this.setProperties({items:this.items},!0),this.isMenu&&(s.templateID=this.element.id+"Template");var a=bl.createList(this.createElement,e,s,!this.template,this);return a.setAttribute("tabindex","0"),this.isMenu?a.setAttribute("role","menu"):a.setAttribute("role","menubar"),a},t.prototype.moverHandler=function(e){var t=e.target;this.liTrgt=t;var i=this.getLI(t),n=i?Fe(i,".e-"+this.getModuleName()+"-wrapper"):this.getWrapper(),o=this.getWrapper(),s=new RegExp("-ej2menu-(.*)-popup"),a=!1;if(n){if((""!==n.id?s.exec(n.id)[1]:n.querySelector("ul").id)!==this.element.id){if(this.removeLIStateByClass([Gl,Kl],[this.getWrapper()]),!this.navIdx.length)return;a=!0}i&&Fe(i,".e-"+this.getModuleName()+"-wrapper")&&!a?(this.removeLIStateByClass([Gl],this.isMenu?[n].concat(this.getPopups()):[n]),this.removeLIStateByClass([Gl],this.isMenu?[o].concat(this.getPopups()):[o]),i.classList.add(Gl),this.showItemOnClick||this.clickHandler(e)):this.isMenu&&this.showItemOnClick&&!a&&this.removeLIStateByClass([Gl],[n].concat(this.getPopups())),this.isMenu&&(this.showItemOnClick||t.parentElement===n||Fe(t,".e-"+this.getModuleName()+"-popup")||i&&(!i||this.getIndex(i.id,!0).length)||"Hover"===this.showSubMenuOn?a&&!this.showItemOnClick&&this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,e)):(this.removeLIStateByClass([Gl],[n]),this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,e))),this.isClosed||this.removeStateWrapper(),this.isClosed=!1)}},t.prototype.removeStateWrapper=function(){if(this.liTrgt){var e=Fe(this.liTrgt,".e-menu-vscroll");"DIV"===this.liTrgt.tagName&&e&&this.removeLIStateByClass([Gl,Kl],[e])}},t.prototype.removeLIStateByClass=function(e,t){for(var i,n=function(n){e.forEach((function(e){(i=Ee("."+e,t[n]))&&i.classList.remove(e)}))},o=0;o<t.length;o++)n(o)},t.prototype.getField=function(e,t){void 0===t&&(t=0);var i=this.fields[""+e];return"string"===typeof i?i:i[t]?i[t].toString():i[i.length-1].toString()},t.prototype.getFields=function(e){return void 0===e&&(e=0),{id:this.getField("itemId",e),iconCss:this.getField("iconCss",e),text:this.getField("text",e),url:this.getField("url",e),child:this.getField("children",e),separator:this.getField("separator",e)}},t.prototype.hasField=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i][""+t])return!0;return!1},t.prototype.menuHeaderClickHandler=function(e){Fe(e.target,".e-menu-wrapper").querySelector("ul.e-menu-parent").id===this.element.id&&(this.element.className.indexOf("e-hide-menu")>-1?this.openHamburgerMenu(e):this.closeHamburgerMenu(e))},t.prototype.clickHandler=function(e){if(this.isTapHold)this.isTapHold=!1;else{var t=this.getWrapper(),i=e.target,n=this.cli=this.getLI(i),o=new RegExp("-ej2menu-(.*)-popup"),s=n?Fe(n,".e-"+this.getModuleName()+"-wrapper"):null,a=n&&s&&(this.isMenu?this.getIndex(n.id,!0).length>0:t.firstElementChild.id===s.firstElementChild.id);if(ge.isDevice&&this.isMenu&&(this.removeLIStateByClass([Gl],[t].concat(this.getPopups())),this.mouseDownHandler(e)),n&&s&&this.isMenu){var r=s.id?o.exec(s.id)[1]:s.querySelector(".e-menu-parent").id;if(this.element.id!==r)return}if(a&&"click"===e.type&&!n.classList.contains(Jl)){this.setLISelected(n);var l=this.getIndex(n.id,!0),d={element:n,item:this.getItem(l),event:e};this.trigger("select",d)}if(a&&("mouseover"===e.type||ge.isDevice||this.showItemOnClick)){var h=void 0;if(n.classList.contains(Jl))h=t.children[this.navIdx.length-1],this.toggleAnimation(h),(c=this.getLIByClass(h,Kl))&&c.classList.remove(Kl),Ae(n.parentNode),this.navIdx.pop();else if(!n.classList.contains($l)){this.showSubMenu=!0;var p=n.parentNode;if(this.cliIdx=this.getIdx(p,n),this.isMenu||!ge.isDevice){var c,u=this.isMenu?Array.prototype.indexOf.call([t].concat(this.getPopups()),Fe(p,".e-"+this.getModuleName()+"-wrapper")):this.getIdx(t,p);if(this.navIdx[u]===this.cliIdx&&(this.showSubMenu=!1),u!==this.navIdx.length&&("mouseover"!==e.type||this.showSubMenu))(c=this.getLIByClass(p,Kl))&&c.classList.remove(Kl),this.isClosed=!0,this.keyType="click",this.showItemOnClick&&this.setLISelected(n),this.closeMenu(u+1,e),this.showItemOnClick&&this.setLISelected(n)}this.isClosed||this.afterCloseMenu(e),this.isClosed=!1}}else if(this.isMenu&&"DIV"===i.tagName&&this.navIdx.length&&Fe(i,".e-menu-vscroll")){var f=Fe(i,"."+ud),m=Array.prototype.indexOf.call(this.getPopups(),f)+1;m<this.navIdx.length&&(this.closeMenu(m+1,e),f&&this.removeLIStateByClass([Gl,Kl],[f]))}else this.isMenu&&this.hamburgerMode&&"SPAN"===i.tagName&&i.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(e):"UL"===i.tagName&&(this.isMenu?!i.parentElement.classList.contains("e-menu-wrapper")||this.getIndex(i.querySelector("."+ld).id,!0).length:i.parentElement===t)||(n||this.removeLIStateByClass([Kl],[t]),n&&n.querySelector("."+rd)||this.closeMenu(null,e))}},t.prototype.afterCloseMenu=function(e){var t;if(this.showSubMenu){t=this.showItemOnClick&&0===this.navIdx.length?Fe(e.target,".e-menu-parent.e-control"):Fe(this.element,".e-menu-parent.e-control");var i=this.navIdx.concat(this.cliIdx),n=this.getItem(i);if(n&&n[this.getField("children",i.length-1)]&&n[this.getField("children",i.length-1)].length?(("mouseover"===e.type||ge.isDevice&&this.isMenu)&&this.setLISelected(this.cli),(!this.hamburgerMode&&t||this.hamburgerMode&&"false"===this.cli.getAttribute("aria-expanded"))&&(this.cli.setAttribute("aria-expanded","true"),this.navIdx.push(this.cliIdx),this.openMenu(this.cli,n,null,null,e))):"mouseover"!==e.type&&this.closeMenu(null,e),!t){var o=this.getUlByNavIdx(),s=this.getLIByClass(o,Kl);s&&(s.setAttribute("aria-expanded","false"),s.classList.remove(Kl))}}this.keyType=""},t.prototype.setLISelected=function(e){var t=this.getLIByClass(e.parentElement,Kl);t&&t.classList.remove(Kl),this.isMenu||e.classList.remove(Gl),e.classList.add(Kl)},t.prototype.getLIByClass=function(e,t){for(var i=0,n=e.children.length;i<n;i++)if(e.children[i].classList.contains(t))return e.children[i];return null},t.prototype.getItemIndex=function(e,t){var i;i="string"===typeof e?e:e.id;var n=!1!==t;return this.getIndex(i,n)},t.prototype.setItem=function(e,t,i){var n;n=i?t||e.id:t||e.text;var o=this.getIndex(n,i),s=this.getItem(o);Object.assign(s,e)},t.prototype.getItem=function(e){var t=(e=e.slice()).pop();return this.getItems(e)[t]},t.prototype.getItems=function(e){for(var t=this.items,i=0;i<e.length;i++)t=t[e[i]][this.getField("children",i)];return t},t.prototype.setItems=function(e,t){var i=this.getItems(t);i.splice(0,i.length);for(var n=0;n<e.length;n++)i.splice(n,0,e[n])},t.prototype.getIdx=function(e,t,i){void 0===i&&(i=!0);var n=Array.prototype.indexOf.call(e.children,t);return i&&e.children[0].classList.contains(Jl)&&n--,n},t.prototype.getLI=function(e){return"LI"===e.tagName&&e.classList.contains("e-menu-item")?e:Fe(e,"li.e-menu-item")},t.prototype.updateItemsByNavIdx=function(){for(var e=this.items,t=0,i=0;i<this.navIdx.length&&(e=e[i].items);i++){t++;var n=this.getUlByNavIdx(t);if(!n)break;this.updateItem(n,e)}},t.prototype.removeChildElement=function(e){for(;e.firstElementChild;)e.removeChild(e.firstElementChild);return e},t.prototype.onPropertyChanged=function(e,t){for(var i=this,n=this.getWrapper(),o=function(o){switch(o){case"cssClass":t.cssClass&&Se([n],t.cssClass.split(" ")),e.cssClass&&be([n],e.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":n.classList.toggle(cd);break;case"showItemOnClick":s.unWireEvents(),s.showItemOnClick=e.showItemOnClick,s.wireEvents();break;case"enableScrolling":if(e.enableScrolling){var a;s.element.classList.contains("e-vertical")?Hl(s.createElement,n,s.element,"vscroll",s.enableRtl):Hl(s.createElement,n,s.element,"hscroll",s.enableRtl),s.getPopups().forEach((function(e){a=Ee(".e-ul",e),Hl(i.createElement,e,a,"vscroll",i.enableRtl)}))}else{var r=n.children[0];s.element.classList.contains("e-vertical")?Ul(x(r,Xa),r):Ul(x(r,La),r),n.style.overflow="",n.appendChild(s.element),s.getPopups().forEach((function(e){Ul(x(r=e.children[0],Xa),r),e.style.overflow=""}))}break;case"items":var l=void 0,d=void 0,h=void 0;if(s.isReact&&s.template&&s.clearTemplate(["template"]),Object.keys(t.items).length){var p=Object.keys(e.items);for(c=0;c<p.length;c++)(d=s.getChangedItemIndex(e,[],Number(p[c]))).length<=s.getWrapper().children.length&&(l=d.pop(),h=s.getItems(d),s.insertAfter([h[l]],h[l].text),s.removeItem(h,d,l),s.setItems(h,d)),d.length=0}else{if(s.updateItem(s.element,s.items),s.enableScrolling&&s.element.parentElement.classList.contains("e-custom-scroll")&&(s.element.classList.contains("e-vertical")?Hl(s.createElement,n,s.element,"vscroll",s.enableRtl):Hl(s.createElement,n,s.element,"hscroll",s.enableRtl)),!s.hamburgerMode)for(var c=1,u=n.childElementCount;c<u;c++)Ae(n.lastElementChild);s.navIdx=[]}}},s=this,a=0,r=Object.keys(e);a<r.length;a++){o(r[a])}},t.prototype.updateItem=function(e,t){if(S()&&!this.isMenu)e=this.removeChildElement(e);else{if(this.enableScrolling){var i=this.getWrapper().children[0];this.element.classList.contains("e-vertical")?Ul(x(i,Xa),i):Ul(x(i,La),i)}e.innerHTML=""}[].slice.call(this.createItems(t).children).forEach((function(t){e.appendChild(t)}))},t.prototype.getChangedItemIndex=function(e,t,i){t.push(i);var n=Object.keys(e.items[i]).pop();if("items"===n){var o=e.items[i],s=Object.keys(o.items).pop();s&&this.getChangedItemIndex(o,t,Number(s))}else"isParentArray"===n&&t.length>1&&t.pop();return t},t.prototype.removeItem=function(e,t,i){e.splice(i,1);var n=this.getWrapper().children;t.length<n.length&&Ae(n[t.length].children[i])},t.prototype.unWireEvents=function(e){void 0===e&&(e=this.target);var t=this.getWrapper();if(e){for(var i=void 0,n=void 0,o=De(e),s=0,a=o.length;s<a;s++)i=o[s],this.isMenu?ye.remove(i,"click",this.menuHeaderClickHandler):ge.isIos?(n=x(i,Gt))&&n.destroy():ye.remove(i,"contextmenu",this.cmenuHandler);if(!this.isMenu){ye.remove(this.targetElement,"scroll",this.scrollHandler);for(var r=0,l=Pn(this.targetElement);r<l.length;r++){var d=l[r];ye.remove(d,"scroll",this.scrollHandler)}}}ge.isDevice||(ye.remove(this.isMenu?document:t,"mouseover",this.delegateMoverHandler),ye.remove(document,"mousedown",this.delegateMouseDownHandler)),ye.remove(document,"click",this.delegateClickHandler),this.unWireKeyboardEvent(t),this.rippleFn()},t.prototype.unWireKeyboardEvent=function(e){var t=x(e,Ut);t&&t.destroy()},t.prototype.toggleAnimation=function(e,t){var i,n,o=this;void 0===t&&(t=!0),"None"!==this.animationSettings.effect&&t?this.animation.animate(e,{name:this.animationSettings.effect,duration:this.animationSettings.duration,timingFunction:this.animationSettings.easing,begin:function(e){o.hamburgerMode?(n=e.element.parentElement,e.element.style.position="absolute",i=n.offsetHeight,e.element.style.maxHeight=e.element.offsetHeight+"px",n.style.maxHeight=""):(e.element.style.display="block",e.element.style.maxHeight=e.element.getBoundingClientRect().height+"px")},progress:function(e){o.hamburgerMode&&(n.style.minHeight=i+e.element.offsetHeight+"px")},end:function(e){o.hamburgerMode?(e.element.style.position="",e.element.style.maxHeight="",n.style.minHeight="",e.element.style.top="0px",e.element.children[0].focus(),o.triggerOpen(e.element.children[0])):o.end(e.element,t)}}):this.end(e,t)},t.prototype.triggerOpen=function(e){var t=this.navIdx.length?this.getItem(this.navIdx):null,i={element:e,parentItem:t,items:t?t.items:this.items};this.trigger("onOpen",i)},t.prototype.end=function(e,t){if(t)if(e.style.display="block",e.style.maxHeight="",this.triggerOpen(e),e.querySelector("."+Gl))e.querySelector("."+Gl).focus();else{var i=this.getWrapper().children[this.getIdx(this.getWrapper(),e)-1];this.currentTarget&&(this.currentTarget.classList.contains("e-numerictextbox")||this.currentTarget.classList.contains("e-textbox")||"INPUT"===this.currentTarget.tagName)||(i?i.querySelector("."+Kl).focus():this.element.focus())}else if(e===this.element){var n=this.getLIByClass(this.element,Gl);n&&n.classList.remove(Gl);var o=this.getLIByClass(this.element,Kl);o&&o.classList.remove(Kl),e.style.display="none"}else Ae(e)},t.prototype.getPersistData=function(){return""},t.prototype.getWrapper=function(){return Fe(this.element,".e-"+this.getModuleName()+"-wrapper")},t.prototype.getIndex=function(e,t,i,n,o,s){var a;void 0===i&&(i=this.items),void 0===n&&(n=[]),void 0===o&&(o=!1),void 0===s&&(s=0),s=o?s+1:0;for(var r=0,l=i.length;r<l;r++){if(a=i[r],(t?a[this.getField("itemId",s)]:a[this.getField("text",s)])===e){n.push(r);break}if(a[this.getField("children",s)]&&a[this.getField("children",s)].length){if(-1!==(n=this.getIndex(e,t,a[this.getField("children",s)],n,!0,s))[n.length-1]){n.unshift(r);break}r!==l-1&&n.pop()}else r===l-1&&n.push(-1)}return o||-1!==n[0]?n:[]},t.prototype.enableItems=function(e,t,i){var n,o,s;void 0===t&&(t=!0);for(var a,r=dd,l=0;l<e.length;l++){if(s=this.getIndex(e[l],i),this.navIdx.length){if(1!==s.length){a=!1;for(var d=0,h=s.length-1;d<h;d++)if(s[d]!==this.navIdx[d]){a=!0;break}if(a)continue}}else if(1!==s.length)continue;o=s.pop(),(n=this.getUlByNavIdx(s.length))&&(t?this.isMenu?(n.children[o].classList.remove(r),n.children[o].removeAttribute("aria-disabled")):ge.isDevice&&!n.classList.contains("e-contextmenu")?n.children[o+1].classList.remove(r):n.children[o].classList.remove(r):this.isMenu?(n.children[o].classList.add(r),n.children[o].setAttribute("aria-disabled","true")):ge.isDevice&&!n.classList.contains("e-contextmenu")?n.children[o+1].classList.add(r):n.children[o].classList.add(r))}},t.prototype.showItems=function(e,t){this.showHideItems(e,!1,t)},t.prototype.hideItems=function(e,t){this.showHideItems(e,!0,t)},t.prototype.showHideItems=function(e,t,i){for(var n,o,s,a=0;a<e.length;a++)o=(s=this.getIndex(e[a],i)).pop(),(n=this.getUlByNavIdx(s.length))&&(t?ge.isDevice&&!n.classList.contains("e-contextmenu")?n.children[o+1].classList.add(hd):n.children[o].classList.add(hd):ge.isDevice&&!n.classList.contains("e-contextmenu")?n.children[o+1].classList.remove(hd):n.children[o].classList.remove(hd))},t.prototype.removeItems=function(e,t){for(var i,n,o,s=0;s<e.length;s++)i=(n=this.getIndex(e[s],t)).pop(),o=this.getItems(n),m(i)||this.removeItem(o,n,i)},t.prototype.insertAfter=function(e,t,i){this.insertItems(e,t,i)},t.prototype.insertBefore=function(e,t,i){this.insertItems(e,t,i,!1)},t.prototype.insertItems=function(e,t,i,n){var o,s,a,r,l;void 0===n&&(n=!0);for(var d=0;d<e.length;d++){s=(a=this.getIndex(t,i)).pop(),r=this.getItems(a),l=new md(r[0],"items",e[d],!0),r.splice(n?s+1:s,0,l);var h=this.isMenu?[this.getWrapper()].concat(this.getPopups()):[].slice.call(this.getWrapper().children);if(!m(s)&&a.length<h.length){s=n?s+1:s,o=this.createItems(r).children[s];var p=this.isMenu?Ee(".e-menu-parent",h[a.length]):h[a.length];p.insertBefore(o,p.children[s])}}},t.prototype.removeAttributes=function(){var e=this;["top","left","display","z-index"].forEach((function(t){e.element.style.removeProperty(t)})),["role","tabindex","class","style"].forEach((function(t){"class"===t&&e.element.classList.contains("e-menu-parent")&&e.element.classList.remove("e-menu-parent"),-1!==["class","style"].indexOf(t)&&e.element.getAttribute(t)||e.element.removeAttribute(t),e.isMenu&&"class"===t&&e.element.classList.contains("e-vertical")&&e.element.classList.remove("e-vertical")}))},t.prototype.destroy=function(){var t=this.getWrapper();if(t){if(this.unWireEvents(),this.isMenu)this.closeMenu(),S()&&!this.isMenu?this.element=this.removeChildElement(this.element):this.element.innerHTML="",this.removeAttributes(),t.parentNode.insertBefore(this.element,t),this.clonedElement=null;else{if(this.clonedElement.style.display="","EJS-CONTEXTMENU"===this.clonedElement.tagName)be([this.clonedElement],["e-control","e-lib","e-"+this.getModuleName()]),this.element=this.clonedElement;else if(this.refreshing&&this.clonedElement.childElementCount&&"LI"===this.clonedElement.children[0].tagName&&this.setProperties({items:[]},!0),document.getElementById(this.clonedElement.id)){var i=this.clonedElement.nextElementSibling;i&&i!==t?this.clonedElement.parentElement.insertBefore(this.element,i):this.clonedElement.parentElement.appendChild(this.element),S()&&!this.isMenu?this.element=this.removeChildElement(this.element):this.element.innerHTML="",Ie([].slice.call(this.clonedElement.children),this.element),Ae(this.clonedElement),this.removeAttributes()}this.clonedElement=null}this.isMenu&&this.clonedElement?(Ae(this.element),t.style.display="",t.classList.remove("e-"+this.getModuleName()+"-wrapper"),t.removeAttribute("data-ripple")):Ae(t),e.prototype.destroy.call(this),this.template&&this.clearTemplate(["template"])}this.rippleFn=null},Ql([$e()],t.prototype,"beforeItemRender",void 0),Ql([$e()],t.prototype,"beforeOpen",void 0),Ql([$e()],t.prototype,"onOpen",void 0),Ql([$e()],t.prototype,"beforeClose",void 0),Ql([$e()],t.prototype,"onClose",void 0),Ql([$e()],t.prototype,"select",void 0),Ql([$e()],t.prototype,"created",void 0),Ql([Ge("")],t.prototype,"cssClass",void 0),Ql([Ge(0)],t.prototype,"hoverDelay",void 0),Ql([Ge(!1)],t.prototype,"showItemOnClick",void 0),Ql([Ge("")],t.prototype,"target",void 0),Ql([Ge("")],t.prototype,"filter",void 0),Ql([Ge(null)],t.prototype,"template",void 0),Ql([Ge(!1)],t.prototype,"enableScrolling",void 0),Ql([Ge(!1)],t.prototype,"enableHtmlSanitizer",void 0),Ql([Je({itemId:"id",text:"text",parentId:"parentId",iconCss:"iconCss",url:"url",separator:"separator",children:"items"},fd)],t.prototype,"fields",void 0),Ql([Ke([],md)],t.prototype,"items",void 0),Ql([Je({duration:400,easing:"ease",effect:"SlideDown"},gd)],t.prototype,"animationSettings",void 0),t=Ql([et],t)}(Dt),vd=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),wd=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},bd=function(e){function t(t,i){return e.call(this,t,i)||this}return vd(t,e),t.prototype.preRender=function(){this.isMenu=!1,this.element.id=this.element.id||y("ej2-contextmenu"),e.prototype.preRender.call(this)},t.prototype.initialize=function(){e.prototype.initialize.call(this),Ve(this.element,{role:"menubar",tabindex:"0"}),this.element.style.zIndex=On(this.element).toString()},t.prototype.open=function(t,i,n){e.prototype.openMenu.call(this,null,null,t,i,null,n)},t.prototype.close=function(){e.prototype.closeMenu.call(this)},t.prototype.onPropertyChanged=function(t,i){e.prototype.onPropertyChanged.call(this,t,i);for(var n=0,o=Object.keys(t);n<o.length;n++){switch(o[n]){case"filter":this.close(),this.filter=t.filter;break;case"target":this.unWireEvents(i.target),this.wireEvents()}}},t.prototype.getModuleName=function(){return"contextmenu"},wd([Ge("")],t.prototype,"target",void 0),wd([Ge("")],t.prototype,"filter",void 0),wd([Ke([],md)],t.prototype,"items",void 0),t=wd([et],t)}(yd),Sd=function(){function e(e,t){this.copyContextMenu=[],this.contextMenuList=[],this.pdfViewer=e,this.pdfViewerBase=t,this.copyContextMenu=[{text:this.pdfViewer.localeObj.getConstant("Cut"),iconCss:"e-pv-cut-icon"},{text:this.pdfViewer.localeObj.getConstant("Copy"),iconCss:"e-pv-copy-icon"},{text:this.pdfViewer.localeObj.getConstant("Highlight context"),iconCss:"e-pv-highlight-icon"},{text:this.pdfViewer.localeObj.getConstant("Underline context"),iconCss:"e-pv-underline-icon"},{text:this.pdfViewer.localeObj.getConstant("Strikethrough context"),iconCss:"e-pv-strikethrough-icon"},{text:this.pdfViewer.localeObj.getConstant("Paste"),iconCss:"e-pv-paste-icon"},{text:this.pdfViewer.localeObj.getConstant("Delete Context"),iconCss:"e-pv-delete-icon"},{text:this.pdfViewer.localeObj.getConstant("Scale Ratio"),iconCss:"e-pv-scale-ratio-icon"},{separator:!0,id:e.element.id+"_context_menu_comment_separator"},{text:this.pdfViewer.localeObj.getConstant("Comment"),iconCss:"e-pv-comment-icon"},{separator:!0,id:e.element.id+"_context_menu_separator"},{text:this.pdfViewer.localeObj.getConstant("Properties"),iconCss:"e-pv-property-icon"}]}return e.prototype.createContextMenu=function(){this.contextMenuElement=we("ul",{id:this.pdfViewer.element.id+"_context_menu",className:"e-pv-context-menu"}),this.pdfViewer.element.appendChild(this.contextMenuElement),this.contextMenuObj=new bd({target:"#"+this.pdfViewerBase.viewerContainer.id,items:this.copyContextMenu,beforeOpen:this.contextMenuOnBeforeOpen.bind(this),select:this.onMenuItemSelect.bind(this),created:this.contextMenuOnCreated.bind(this)}),this.pdfViewer.enableRtl&&(this.contextMenuObj.enableRtl=!0),this.contextMenuObj.appendTo(this.contextMenuElement),ge.isDevice&&!this.pdfViewer.enableDesktopMode?this.contextMenuObj.animationSettings.effect="ZoomIn":this.contextMenuObj.animationSettings.effect="SlideDown"},e.prototype.contextMenuOnCreated=function(e){var t=[this.pdfViewer.localeObj.getConstant("Highlight context"),this.pdfViewer.localeObj.getConstant("Underline context"),this.pdfViewer.localeObj.getConstant("Strikethrough context")];this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule||this.contextMenuObj.enableItems(t,!1)},e.prototype.setTarget=function(e){var t=null;return e.event&&e.event.target&&(t=e.event.target,this.currentTarget=t),t},e.prototype.contextMenuOnBeforeOpen=function(e){this.pdfViewerBase.preventContextmenu&&(e.cancel=!0);var t=this.setTarget(e),i=0!==this.pdfViewer.selectedItems.annotations.length?this.pdfViewer.selectedItems.annotations[0].annotationSettings:null;if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&t&&"free-text-input"===t.className&&"TEXTAREA"===t.tagName&&(this.pdfViewerBase.isFreeTextContextMenu=!0),this.contextMenuObj.showItems([this.pdfViewer.localeObj.getConstant("Cut"),this.pdfViewer.localeObj.getConstant("Copy"),this.pdfViewer.localeObj.getConstant("Paste"),this.pdfViewer.localeObj.getConstant("Highlight context"),this.pdfViewer.localeObj.getConstant("Underline context"),this.pdfViewer.localeObj.getConstant("Strikethrough context"),this.pdfViewer.localeObj.getConstant("Delete Context"),this.pdfViewer.localeObj.getConstant("Scale Ratio"),this.pdfViewer.localeObj.getConstant("Comment"),this.pdfViewer.localeObj.getConstant("Properties")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.remove("e-menu-hide"),this.pdfViewerBase.getElement("_context_menu_comment_separator").classList.remove("e-menu-hide"),this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Cut"),this.pdfViewer.localeObj.getConstant("Copy"),this.pdfViewer.localeObj.getConstant("Paste"),this.pdfViewer.localeObj.getConstant("Delete Context")],!0),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.checkContextMenuDeleteItem(this.contextMenuObj),this.pdfViewer.textSelectionModule||this.pdfViewerBase.isShapeBasedAnnotationsEnabled()){if(e.event||this.pdfViewerBase.isTouchDesignerMode){var n=this.pdfViewerBase.isClickWithinSelectionBounds(e.event);if(this.pdfViewerBase.isFreeTextContextMenu)this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Highlight context"),this.pdfViewer.localeObj.getConstant("Underline context"),this.pdfViewer.localeObj.getConstant("Strikethrough context"),this.pdfViewer.localeObj.getConstant("Properties"),this.pdfViewer.localeObj.getConstant("Comment"),this.pdfViewer.localeObj.getConstant("Scale Ratio"),this.pdfViewer.localeObj.getConstant("Delete Context")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide"),this.pdfViewerBase.getElement("_context_menu_comment_separator").classList.add("e-menu-hide"),this.pdfViewer.annotation.freeTextAnnotationModule&&this.pdfViewer.annotation.freeTextAnnotationModule.isTextSelected?(this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Copy")],!0),this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Cut")],!0)):(this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Copy")],!1),this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Cut")],!1),window.getSelection().removeAllRanges()),this.pdfViewer.annotation.freeTextAnnotationModule&&""!==this.pdfViewer.annotation.freeTextAnnotationModule.selectedText?this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Paste")],!0):this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Paste")],!1);else if(n&&this.pdfViewer.textSelectionModule)!e.event.target.classList.contains("e-pv-maintaincontent")&&e.event.target.classList.contains("e-pv-text")||e.event.target.classList.contains("e-pv-text-layer")?this.pdfViewerBase.checkIsNormalText()&&(e.cancel=!0):(ge.isIE||"edge"===ge.info.name)&&e.event.target.classList.contains("e-pv-page-container")&&(e.cancel=!0),this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Cut"),this.pdfViewer.localeObj.getConstant("Paste"),this.pdfViewer.localeObj.getConstant("Delete Context"),this.pdfViewer.localeObj.getConstant("Scale Ratio"),this.pdfViewer.localeObj.getConstant("Comment"),this.pdfViewer.localeObj.getConstant("Properties")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide"),this.pdfViewerBase.getElement("_context_menu_comment_separator").classList.add("e-menu-hide");else if(0===this.pdfViewer.selectedItems.annotations.length||"HandWrittenSignature"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"SignatureText"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"SignatureImage"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"Path"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType)if(0===this.pdfViewer.selectedItems.annotations.length||"Path"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||i.isLock)if(0!==this.pdfViewer.selectedItems.formFields.length&&this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType&&this.pdfViewer.designerMode)this.onOpeningForShape(!0),m(this.pdfViewer.toolbar)||m(this.pdfViewer.toolbar.formDesignerToolbarModule)||this.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(!0);else{var o=this.pdfViewerBase.designerModetarget,s=this.pdfViewer.annotationModule;e.event&&e.event.target&&(o=e.event.target),this.pdfViewer.annotation&&this.pdfViewer.annotation.isShapeCopied&&(o.classList.contains("e-pv-text-layer")||o.classList.contains("e-pv-text"))&&!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation||this.pdfViewer.formDesigner&&this.pdfViewer.formDesigner.isShapeCopied&&(o.classList.contains("e-pv-text-layer")||o.classList.contains("e-pv-text"))?this.onOpeningForShape(!1):this.pdfViewerBase.isCalibrateAnnotationModule()&&this.pdfViewer.annotationModule.measureAnnotationModule.currentAnnotationMode&&!i?(this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Highlight context"),this.pdfViewer.localeObj.getConstant("Underline context"),this.pdfViewer.localeObj.getConstant("Strikethrough context"),this.pdfViewer.localeObj.getConstant("Properties")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide"),this.pdfViewerBase.getElement("_context_menu_comment_separator").classList.remove("e-menu-hide"),this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Cut"),this.pdfViewer.localeObj.getConstant("Copy"),this.pdfViewer.localeObj.getConstant("Paste"),this.pdfViewer.localeObj.getConstant("Delete Context"),this.pdfViewer.localeObj.getConstant("Comment")],!1)):s&&s.textMarkupAnnotationModule&&s.textMarkupAnnotationModule.currentTextMarkupAnnotation&&!s.textMarkupAnnotationModule.currentTextMarkupAnnotation.annotationSettings.isLock?(this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Highlight context"),this.pdfViewer.localeObj.getConstant("Underline context"),this.pdfViewer.localeObj.getConstant("Strikethrough context"),this.pdfViewer.localeObj.getConstant("Properties"),this.pdfViewer.localeObj.getConstant("Cut"),this.pdfViewer.localeObj.getConstant("Copy"),this.pdfViewer.localeObj.getConstant("Paste"),this.pdfViewer.localeObj.getConstant("Scale Ratio")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide"),this.pdfViewerBase.getElement("_context_menu_comment_separator").classList.remove("e-menu-hide"),this.contextMenuObj.showItems([this.pdfViewer.localeObj.getConstant("Delete Context"),this.pdfViewer.localeObj.getConstant("Comment")],!1)):e.cancel=!0}else this.onOpeningForShape(!0);else this.onOpeningForShape(!1,!0)}else this.pdfViewer.textSelectionModule&&"MouseUp"===this.pdfViewer.contextMenuOption?(this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Cut"),this.pdfViewer.localeObj.getConstant("Paste"),this.pdfViewer.localeObj.getConstant("Delete Context"),this.pdfViewer.localeObj.getConstant("Scale Ratio"),this.pdfViewer.localeObj.getConstant("Comment"),this.pdfViewer.localeObj.getConstant("Properties")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide"),this.pdfViewerBase.getElement("_context_menu_comment_separator").classList.add("e-menu-hide")):this.hideContextItems();this.enableCommentPanelItem()}else e.cancel=!0;"None"===this.pdfViewer.contextMenuOption?e.cancel=!0:this.contextMenuItems(e),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.restrictContextMenu()&&(e.cancel=!0),this.pdfViewerBase.isTouchDesignerMode=!1},e.prototype.contextMenuItems=function(e){if(this.pdfViewer.contextMenuSettings.contextMenuItems.length){for(var t=[],i=(this.contextMenuCollection(),this.contextMenuObj.getRootElement()),n=0;n<this.pdfViewer.contextMenuSettings.contextMenuItems.length;n++)for(var o=0;o<this.contextMenuList.length;o++){var s=this.contextMenuList[parseInt(o.toString(),10)].text;switch(s){case"Highlight":s="Highlight context";break;case"Underline":s="Underline context";break;case"Strikethrough":s="Strikethrough context";break;case"Delete":s="Delete Context";break;case"Scale Ratio":s="Scale Ratio";break;case"Comment":this.pdfViewerBase.getElement("_context_menu_comment_separator").classList.add("e-menu-hide");break;case"Properties":this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide")}var a=this.contextMenuList[parseInt(o.toString(),10)].text;if(0===n&&a!==Xs[this.pdfViewer.contextMenuSettings.contextMenuItems[parseInt(n.toString(),10)]]&&t.push(a),n>0&&a===Xs[this.pdfViewer.contextMenuSettings.contextMenuItems[parseInt(n.toString(),10)]])for(var r=0;r<t.length;r++)if(t[parseInt(r.toString(),10)]===a)if(this.pdfViewer.disableContextMenuItems&&this.pdfViewer.disableContextMenuItems.length>0){for(var l=!1,d=0;d<this.pdfViewer.disableContextMenuItems.length;d++)t[parseInt(r.toString(),10)]===Xs[this.pdfViewer.disableContextMenuItems[parseInt(d.toString(),10)]]&&(l=!0);l||t.splice(r,1)}else t.splice(r,1)}var h=this.processLocaleContent(t);this.contextMenuObj.hideItems(h),0===this.getEnabledItemCount(i)&&(e.cancel=!0)}},e.prototype.processLocaleContent=function(e){var t=[];if(e.length>0)for(var i=0;i<e.length;i++){var n=e[parseInt(i.toString(),10)];switch(n){case"Highlight":n="Highlight context";break;case"Underline":n="Underline context";break;case"Strikethrough":n="Strikethrough context";break;case"Delete":n="Delete Context";break;case"ScaleRatio":n="Scale Ratio"}t.push(this.pdfViewer.localeObj.getConstant(n))}return t},e.prototype.contextMenuCollection=function(){return this.contextMenuList=[{text:"Cut"},{text:"Copy"},{text:"Highlight"},{text:"Underline"},{text:"Strikethrough"},{text:"Paste"},{text:"Delete"},{text:"ScaleRatio"},{text:"Comment"},{text:"Properties"}]},e.prototype.getEnabledItemCount=function(e){for(var t=this.copyContextMenu.length,i=e.children,n=0;n<i.length;n++){var o=i[n];(o.classList.contains("e-menu-hide")||o.classList.contains("e-disabled"))&&(t-=1)}return t},e.prototype.hideContextItems=function(){0===this.pdfViewer.selectedItems.annotations.length&&(this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Cut"),this.pdfViewer.localeObj.getConstant("Paste"),this.pdfViewer.localeObj.getConstant("Delete Context"),this.pdfViewer.localeObj.getConstant("Scale Ratio"),this.pdfViewer.localeObj.getConstant("Properties")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide"))},e.prototype.enableCommentPanelItem=function(){this.pdfViewer.enableCommentPanel?this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Comment")],!0):this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Comment")],!1),0!==this.pdfViewer.selectedItems.formFields.length&&this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Comment")],!1)},e.prototype.onOpeningForShape=function(e,t){this.pdfViewer.annotation&&this.pdfViewer.annotation.isShapeCopied||this.pdfViewer.formDesigner&&this.pdfViewer.formDesigner.isShapeCopied?this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Paste")],!0):this.contextMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Paste")],!1),this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Highlight context"),this.pdfViewer.localeObj.getConstant("Underline context"),this.pdfViewer.localeObj.getConstant("Strikethrough context"),this.pdfViewer.localeObj.getConstant("Scale Ratio")]),e?0===this.pdfViewer.selectedItems.annotations.length||"Line"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"LineWidthArrowHead"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"Distance"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?0!==this.pdfViewer.selectedItems.formFields.length&&this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType?(this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Comment")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide"),this.contextMenuObj.showItems([this.pdfViewer.localeObj.getConstant("Properties")])):m(t)&&"Image"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&!this.pdfViewer.selectedItems.annotations[0].id.startsWith("stamp")?(this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Properties"),this.pdfViewer.localeObj.getConstant("Comment"),this.pdfViewer.localeObj.getConstant("Cut"),this.pdfViewer.localeObj.getConstant("Copy"),this.pdfViewer.localeObj.getConstant("Paste")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide"),this.pdfViewerBase.getElement("_context_menu_comment_separator").classList.add("e-menu-hide")):(this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Properties")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide")):this.contextMenuObj.showItems([this.pdfViewer.localeObj.getConstant("Properties")]):t?"SignatureField"===this.pdfViewer.selectedItems.annotations[0].annotName||"InitialField"===this.pdfViewer.selectedItems.annotations[0].annotName||"SignatureText"===this.pdfViewer.selectedItems.annotations[0].annotName?(this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Properties"),this.pdfViewer.localeObj.getConstant("Comment"),this.pdfViewer.localeObj.getConstant("Cut"),this.pdfViewer.localeObj.getConstant("Copy"),this.pdfViewer.localeObj.getConstant("Paste")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide"),this.pdfViewerBase.getElement("_context_menu_comment_separator").classList.add("e-menu-hide")):(this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Properties"),this.pdfViewer.localeObj.getConstant("Comment")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide"),this.pdfViewerBase.getElement("_context_menu_comment_separator").classList.add("e-menu-hide")):(this.contextMenuObj.hideItems([this.pdfViewer.localeObj.getConstant("Cut"),this.pdfViewer.localeObj.getConstant("Copy"),this.pdfViewer.localeObj.getConstant("Delete Context"),this.pdfViewer.localeObj.getConstant("Properties"),this.pdfViewer.localeObj.getConstant("Comment")]),this.pdfViewerBase.getElement("_context_menu_separator").classList.add("e-menu-hide"),this.pdfViewerBase.getElement("_context_menu_comment_separator").classList.add("e-menu-hide"))},e.prototype.OnItemSelected=function(e){this.pdfViewerBase.OnItemSelected(e)},e.prototype.onMenuItemSelect=function(e){this.pdfViewerBase.OnItemSelected(e.item.text)},e.prototype.destroy=function(){this.contextMenuObj&&(this.previousAction="",this.contextMenuObj.destroy())},e.prototype.close=function(){this.contextMenuObj.close()},e.prototype.open=function(e,t,i){this.contextMenuObj.open(e,t,i)},e}(),Cd=function(){function e(e,t){this.width=e,this.height=t}return e.prototype.clone=function(){return new e(this.width,this.height)},e}(),xd=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Md=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Id=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xd(t,e),Md([Ge(0)],t.prototype,"x",void 0),Md([Ge(0)],t.prototype,"y",void 0),Md([Ge(0)],t.prototype,"width",void 0),Md([Ge(0)],t.prototype,"height",void 0),Md([Ge(0)],t.prototype,"left",void 0),Md([Ge(0)],t.prototype,"top",void 0),Md([Ge(0)],t.prototype,"right",void 0),Md([Ge(0)],t.prototype,"bottom",void 0),Md([Je({x:0,y:0},Ns)],t.prototype,"location",void 0),Md([Je(new Cd(0,0),Cd)],t.prototype,"size",void 0),t}(mt),Td=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xd(t,e),Md([Ge(!1)],t.prototype,"isBold",void 0),Md([Ge(!1)],t.prototype,"isItalic",void 0),Md([Ge(!1)],t.prototype,"isUnderline",void 0),Md([Ge(!1)],t.prototype,"isStrikeout",void 0),t}(mt),Ad=function(e){function t(t,i,n,o){return e.call(this,t,i,n,o)||this}return xd(t,e),Md([Ge("")],t.prototype,"id",void 0),Md([Ge("Rectangle")],t.prototype,"shapeAnnotationType",void 0),Md([Ge(null)],t.prototype,"formFieldAnnotationType",void 0),Md([Ge("")],t.prototype,"measureType",void 0),Md([Ge("")],t.prototype,"author",void 0),Md([Ge("")],t.prototype,"modifiedDate",void 0),Md([Ge("")],t.prototype,"subject",void 0),Md([Ge("")],t.prototype,"notes",void 0),Md([Ge(!1)],t.prototype,"isCommentLock",void 0),Md([Ge("black")],t.prototype,"strokeColor",void 0),Md([Ge("#ffffff00")],t.prototype,"fillColor",void 0),Md([Ge("#ffffff00")],t.prototype,"stampFillColor",void 0),Md([Ge("black")],t.prototype,"stampStrokeColor",void 0),Md([Ge("")],t.prototype,"data",void 0),Md([Ge(1)],t.prototype,"opacity",void 0),Md([Ge(1)],t.prototype,"thickness",void 0),Md([Ge("")],t.prototype,"borderStyle",void 0),Md([Ge("")],t.prototype,"borderDashArray",void 0),Md([Ge(0)],t.prototype,"rotateAngle",void 0),Md([Ge(!1)],t.prototype,"isCloudShape",void 0),Md([Ge(0)],t.prototype,"cloudIntensity",void 0),Md([Ge(40)],t.prototype,"leaderHeight",void 0),Md([Ge(null)],t.prototype,"lineHeadStart",void 0),Md([Ge(null)],t.prototype,"lineHeadEnd",void 0),Md([Ge([])],t.prototype,"vertexPoints",void 0),Md([Ge(null)],t.prototype,"sourcePoint",void 0),Md([Ge("None")],t.prototype,"sourceDecoraterShapes",void 0),Md([Ge("None")],t.prototype,"taregetDecoraterShapes",void 0),Md([Ge(null)],t.prototype,"targetPoint",void 0),Md([Ge([])],t.prototype,"segments",void 0),Md([Je({x:0,y:0},Id)],t.prototype,"bounds",void 0),Md([Ge(0)],t.prototype,"pageIndex",void 0),Md([Ge(-1)],t.prototype,"zIndex",void 0),Md([Ge(null)],t.prototype,"wrapper",void 0),Md([Ge(!1)],t.prototype,"isDynamicStamp",void 0),Md([Ge("")],t.prototype,"dynamicText",void 0),Md([Ge("")],t.prototype,"annotName",void 0),Md([Ge({})],t.prototype,"review",void 0),Md([Ge([])],t.prototype,"comments",void 0),Md([Ge("#000")],t.prototype,"fontColor",void 0),Md([Ge(16)],t.prototype,"fontSize",void 0),Md([Ge("Helvetica")],t.prototype,"fontFamily",void 0),Md([Ge("None")],t.prototype,"fontStyle",void 0),Md([Ge(!1)],t.prototype,"enableShapeLabel",void 0),Md([Ge("label")],t.prototype,"labelContent",void 0),Md([Ge("#ffffff00")],t.prototype,"labelFillColor",void 0),Md([Ge(15)],t.prototype,"labelMaxLength",void 0),Md([Ge(1)],t.prototype,"labelOpacity",void 0),Md([Ge("")],t.prototype,"annotationSelectorSettings",void 0),Md([Ge("#ffffff00")],t.prototype,"labelBorderColor",void 0),Md([Ge("left")],t.prototype,"textAlign",void 0),Md([Ge("")],t.prototype,"signatureName",void 0),Md([Ge(0)],t.prototype,"minHeight",void 0),Md([Ge(0)],t.prototype,"minWidth",void 0),Md([Ge(0)],t.prototype,"maxHeight",void 0),Md([Ge(0)],t.prototype,"maxWidth",void 0),Md([Ge(!1)],t.prototype,"isLock",void 0),Md([Ge("UI Drawn Annotation")],t.prototype,"annotationAddMode",void 0),Md([Ge("")],t.prototype,"annotationSettings",void 0),Md([Ge(16)],t.prototype,"previousFontSize",void 0),Md([Je({isBold:!1,isItalic:!1,isStrikeout:!1,isUnderline:!1},Td)],t.prototype,"font",void 0),Md([Je({x:0,y:0},Id)],t.prototype,"labelBounds",void 0),Md([Ge(null)],t.prototype,"customData",void 0),Md([Ge(["None"])],t.prototype,"allowedInteractions",void 0),Md([Ge(!0)],t.prototype,"isPrint",void 0),Md([Ge(!1)],t.prototype,"isReadonly",void 0),Md([Ge(0)],t.prototype,"pageRotation",void 0),Md([Ge(!1)],t.prototype,"isAddAnnotationProgrammatically",void 0),t}(mt),kd=function(e){function t(t,i,n,o){return e.call(this,t,i,n,o)||this}return xd(t,e),Md([Ge("")],t.prototype,"id",void 0),Md([Ge("")],t.prototype,"signatureType",void 0),Md([Ge("")],t.prototype,"name",void 0),Md([Ge("")],t.prototype,"value",void 0),Md([Ge(null)],t.prototype,"formFieldAnnotationType",void 0),Md([Ge("#daeaf7ff")],t.prototype,"backgroundColor",void 0),Md([Ge("black")],t.prototype,"color",void 0),Md([Ge("#303030")],t.prototype,"borderColor",void 0),Md([Ge("")],t.prototype,"tooltip",void 0),Md([Ge(1)],t.prototype,"opacity",void 0),Md([Ge(1)],t.prototype,"thickness",void 0),Md([Ge(0)],t.prototype,"rotateAngle",void 0),Md([Je({x:0,y:0},Id)],t.prototype,"bounds",void 0),Md([Ge(0)],t.prototype,"pageIndex",void 0),Md([Ge(1)],t.prototype,"pageNumber",void 0),Md([Ge(-1)],t.prototype,"zIndex",void 0),Md([Ge(null)],t.prototype,"wrapper",void 0),Md([Ge(16)],t.prototype,"fontSize",void 0),Md([Ge("Helvetica")],t.prototype,"fontFamily",void 0),Md([Ge("None")],t.prototype,"fontStyle",void 0),Md([Ge("left")],t.prototype,"alignment",void 0),Md([Ge(0)],t.prototype,"minHeight",void 0),Md([Ge(0)],t.prototype,"minWidth",void 0),Md([Ge(0)],t.prototype,"maxHeight",void 0),Md([Ge(0)],t.prototype,"maxWidth",void 0),Md([Ge(0)],t.prototype,"maxLength",void 0),Md([Ge("visible")],t.prototype,"visibility",void 0),Md([Ge(!0)],t.prototype,"isPrint",void 0),Md([Ge(!1)],t.prototype,"isReadonly",void 0),Md([Ge(!1)],t.prototype,"isChecked",void 0),Md([Ge(!1)],t.prototype,"isSelected",void 0),Md([Ge(!1)],t.prototype,"isRequired",void 0),Md([Ge(!1)],t.prototype,"isMultiline",void 0),Md([Ge(!1)],t.prototype,"isTransparent",void 0),Md([Ge(!1)],t.prototype,"insertSpaces",void 0),Md([Ge("")],t.prototype,"options",void 0),Md([Ge()],t.prototype,"signatureIndicatorSettings",void 0),Md([Je({isBold:!1,isItalic:!1,isStrikeout:!1,isUnderline:!1},Td)],t.prototype,"font",void 0),Md([Ge()],t.prototype,"selectedIndex",void 0),t}(mt),Vd=function(){function e(){this.pageIdTemp=0,this.zIndexTemp=-1,this.childNodesTemp=[],this.objects=[],this.zIndexTemp=-1,this.pageIdTemp=0}return Object.defineProperty(e.prototype,"pageId",{get:function(){return this.pageIdTemp},set:function(e){this.pageIdTemp=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this.zIndexTemp},set:function(e){this.zIndexTemp=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"objects",{get:function(){return this.childNodesTemp},set:function(e){this.childNodesTemp=e},enumerable:!0,configurable:!0}),e}(),Ed=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Dd=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Nd="e-tooltip",Fd="e-rtl",Ld="e-tooltip-wrap",Pd="e-tip-content",Od="e-arrow-tip",Bd="e-arrow-tip-outer",zd="e-arrow-tip-inner",jd="e-tip-bottom",Rd="e-tip-top",_d="e-tip-left",Hd="e-tip-right",Wd="e-popup",Ud="e-popup-open",qd="e-popup-close",Yd="e-lib",Qd="e-tooltip-popup-container",Zd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ed(t,e),Dd([Ge({effect:"FadeIn",duration:150,delay:0})],t.prototype,"open",void 0),Dd([Ge({effect:"FadeOut",duration:150,delay:0})],t.prototype,"close",void 0),t}(mt),Xd=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.mouseMoveEvent=null,n.mouseMoveTarget=null,n.containerElement=null,n.isBodyContainer=!0,n}return Ed(t,e),t.prototype.initialize=function(){this.formatPosition(),be([this.element],Nd),this.element.setAttribute("tabindex","0")},t.prototype.formatPosition=function(){var e,t;0===this.position.indexOf("Top")||0===this.position.indexOf("Bottom")?(e=this.position.split(/(?=[A-Z])/),this.tooltipPositionY=e[0],this.tooltipPositionX=e[1]):(t=this.position.split(/(?=[A-Z])/),this.tooltipPositionX=t[0],this.tooltipPositionY=t[1])},t.prototype.renderArrow=function(){this.setTipClass(this.position);var e=this.createElement("div",{className:Od+" "+this.tipClass});e.appendChild(this.createElement("div",{className:Bd+" "+this.tipClass})),e.appendChild(this.createElement("div",{className:zd+" "+this.tipClass})),this.tooltipEle.appendChild(e)},t.prototype.setTipClass=function(e){0===e.indexOf("Right")?this.tipClass=_d:0===e.indexOf("Bottom")?this.tipClass=Rd:0===e.indexOf("Left")?this.tipClass=Hd:this.tipClass=jd},t.prototype.renderPopup=function(e){var t=this.mouseTrail?{top:0,left:0}:this.getTooltipPosition(e);this.tooltipEle.classList.remove(Yd),this.popupObj=new Ln(this.tooltipEle,{height:this.height,width:this.width,position:{X:t.left,Y:t.top},enableRtl:this.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})},t.prototype.getTooltipPosition=function(e){this.tooltipEle.style.display="block";var t=Xi(e,this.tooltipPositionX,this.tooltipPositionY,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect()),i=this.calculateTooltipOffset(this.position),n=this.calculateElementPosition(t,i),o=n[0],s=n[1],a=this.collisionFlipFit(e,o,s);return this.tooltipEle.style.display="",a},t.prototype.windowResize=function(){this.reposition(this.findTarget())},t.prototype.reposition=function(e){if(this.popupObj&&e){var t=this.getTooltipPosition(e);this.popupObj.position={X:t.left,Y:t.top},this.popupObj.dataBind()}},t.prototype.openPopupHandler=function(){!this.mouseTrail&&this.needTemplateReposition()&&this.reposition(this.findTarget()),this.trigger("afterOpen",this.tooltipEventArgs),this.tooltipEventArgs=null},t.prototype.closePopupHandler=function(){!this.isReact||"Click"===this.opensOn&&"function"===typeof this.content||this.clearTemplate(["content"]),this.clear(),this.trigger("afterClose",this.tooltipEventArgs),this.tooltipEventArgs=null},t.prototype.calculateTooltipOffset=function(e){var t={top:0,left:0},i=this.tooltipEle.offsetWidth,n=this.tooltipEle.offsetHeight,o=Ee("."+Od,this.tooltipEle),s=o?o.offsetWidth:0,a=o?o.offsetHeight:0,r=this.showTipPointer?0:8,l=a/2+2+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),d=s/2+2+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.mouseTrail&&(r+=2),e){case"RightTop":t.left+=s+r,t.top-=n-l;break;case"RightCenter":t.left+=s+r,t.top-=n/2;break;case"RightBottom":t.left+=s+r,t.top-=l;break;case"BottomRight":t.top+=a+r,t.left-=d;break;case"BottomCenter":t.top+=a+r,t.left-=i/2;break;case"BottomLeft":t.top+=a+r,t.left-=i-d;break;case"LeftBottom":t.left-=s+i+r,t.top-=l;break;case"LeftCenter":t.left-=s+i+r,t.top-=n/2;break;case"LeftTop":t.left-=s+i+r,t.top-=n-l;break;case"TopLeft":t.top-=n+a+r,t.left-=i-d;break;case"TopRight":t.top-=n+a+r,t.left-=d;break;default:t.top-=n+a+r,t.left-=i/2}return t.left+=this.offsetX,t.top+=this.offsetY,t},t.prototype.updateTipPosition=function(e){var t=De("."+Od+",."+Bd+",."+zd,this.tooltipEle);Se(t,[jd,Rd,_d,Hd]),this.setTipClass(e),be(t,this.tipClass)},t.prototype.adjustArrow=function(e,t,i,n){if(!1!==this.showTipPointer){var o,s;this.updateTipPosition(t),this.tooltipEle.style.display="block";var a,r=this.tooltipEle.clientWidth,l=this.tooltipEle.clientHeight,d=Ee("."+Od,this.tooltipEle),h=Ee("."+zd,this.tooltipEle),p=d.offsetWidth,c=d.offsetHeight;if(this.tooltipEle.style.display="",this.tipClass===jd||this.tipClass===Rd){if(this.tipClass===jd?(s="99.9%",h.style.top="-"+(c-2)+"px"):(s=-(c-1)+"px",h.style.top="-"+(c-6)+"px"),e)o=(a="Center"!==i||r>e.offsetWidth||this.mouseTrail)&&"Left"===i||!a&&"End"===this.tipPointerPosition?r-p-2+"px":a&&"Right"===i||!a&&"Start"===this.tipPointerPosition?"2px":!a||"End"!==this.tipPointerPosition&&"Start"!==this.tipPointerPosition?r/2-p/2+"px":"End"===this.tipPointerPosition?e.offsetWidth+(this.tooltipEle.offsetWidth-e.offsetWidth)/2-p/2-2+"px":(this.tooltipEle.offsetWidth-e.offsetWidth)/2-p/2+2+"px"}else this.tipClass===Hd?(o="99.9%",h.style.left="-"+(p-2)+"px"):(o=-(p-1)+"px",h.style.left=p-2-p+"px"),s=(a="Center"!==n||l>e.offsetHeight||this.mouseTrail)&&"Top"===n||!a&&"End"===this.tipPointerPosition?l-c-2+"px":a&&"Bottom"===n||!a&&"Start"===this.tipPointerPosition?"2px":l/2-c/2+"px";d.style.top=s,d.style.left=o}},t.prototype.renderContent=function(e){var t=Ee("."+Pd,this.tooltipEle);if(this.cssClass&&be([this.tooltipEle],this.cssClass.split(" ")),e&&!m(e.getAttribute("title"))&&(e.setAttribute("data-content",e.getAttribute("title")),e.removeAttribute("title")),m(this.content))e&&!m(e.getAttribute("data-content"))&&(t.innerHTML=e.getAttribute("data-content"));else if(t.innerHTML="",this.content instanceof HTMLElement)t.appendChild(this.content);else if("string"===typeof this.content){if(this.enableHtmlSanitizer&&this.setProperties({content:Vi.sanitize(this.content)},!0),o=Mi(this.content)({},this,"content",this.element.id+"content",void 0,void 0,t))if(this.enableHtmlParse)for(var i=o.length,n=0;n<i;n++)t[(Ie(o,t),"innerHTML")]=this.content;else t.textContent=this.content}else{var o;(o=Mi(this.content)({},this,"content",this.element.id+"content",void 0,void 0,t))&&Ie(o,t),this.renderReactTemplates()}},t.prototype.renderCloseIcon=function(){if(this.isSticky){var e=this.createElement("div",{className:"e-icons e-tooltip-close"});this.tooltipEle.appendChild(e),ye.add(e,ge.touchStartEvent,this.onStickyClose,this)}},t.prototype.addDescribedBy=function(e,t){var i=(e.getAttribute("aria-describedby")||"").split(/\s+/);i.indexOf(t)<0&&i.push(t),Ve(e,{"aria-describedby":i.join(" ").trim(),"data-tooltip-id":t})},t.prototype.removeDescribedBy=function(e){var t=e.getAttribute("data-tooltip-id"),i=(e.getAttribute("aria-describedby")||"").split(/\s+/),n=i.indexOf(t);-1!==n&&i.splice(n,1),e.removeAttribute("data-tooltip-id");var o=i.join(" ").trim();o?e.setAttribute("aria-describedby",o):e.removeAttribute("aria-describedby")},t.prototype.tapHoldHandler=function(e){clearTimeout(this.autoCloseTimer),this.targetHover(e.originalEvent)},t.prototype.touchEndHandler=function(e){var t=this;if(!this.isSticky){this.autoCloseTimer=setTimeout((function(){t.close()}),1500)}},t.prototype.targetClick=function(e){var t;m(t=this.target?Fe(e.target,this.target):this.element)||(null===t.getAttribute("data-tooltip-id")?this.targetHover(e):this.isSticky||this.hideTooltip(this.animation.close,e,t))},t.prototype.targetHover=function(e){var t;if(!(m(t=this.target?Fe(e.target,this.target):this.element)||null!==t.getAttribute("data-tooltip-id")&&0===this.closeDelay)){for(var i=0,n=[].slice.call(De('[data-tooltip-id= "'+this.ctrlId+'_content"]',document));i<n.length;i++){var o=n[i];this.restoreElement(o)}this.showTooltip(t,this.animation.open,e)}},t.prototype.mouseMoveBeforeOpen=function(e){this.mouseMoveEvent=e},t.prototype.mouseMoveBeforeRemove=function(){this.mouseMoveTarget&&ye.remove(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen)},t.prototype.showTooltip=function(e,t,i){var n=this;clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.openDelay&&this.mouseTrail&&(this.mouseMoveBeforeRemove(),this.mouseMoveTarget=e,ye.add(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen,this)),this.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:e,event:i||null,element:this.tooltipEle,isInteracted:!m(i)};this.trigger("beforeRender",this.tooltipEventArgs,function(o){n.beforeRenderCallback(o,e,i,t)}.bind(this))},t.prototype.beforeRenderCallback=function(e,t,i,n){e.cancel?(this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove()):(this.isHidden=!1,m(this.tooltipEle)?(this.ctrlId=this.element.getAttribute("id")?y(this.element.getAttribute("id")):y("tooltip"),this.tooltipEle=this.createElement("div",{className:Ld+" "+Wd+" "+Yd,attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"},styles:"width:"+b(this.width)+";height:"+b(this.height)+";position:absolute;"}),this.tooltipBeforeRender(t,this),this.tooltipAfterRender(t,i,n,this)):t&&(this.adjustArrow(t,this.position,this.tooltipPositionX,this.tooltipPositionY),this.addDescribedBy(t,this.ctrlId+"_content"),this.renderContent(t),st.stop(this.tooltipEle),this.reposition(t),this.tooltipAfterRender(t,i,n,this)))},t.prototype.appendContainer=function(e){"string"==typeof this.container?"body"===this.container?this.containerElement=document.body:(this.isBodyContainer=!1,this.containerElement=Ee(this.container,document)):this.container instanceof HTMLElement&&(this.containerElement=this.container,this.isBodyContainer="BODY"===this.containerElement.tagName),this.isBodyContainer||be([this.containerElement],Qd),this.containerElement.appendChild(e.tooltipEle)},t.prototype.tooltipBeforeRender=function(e,t){e&&(ge.isDevice&&be([t.tooltipEle],"e-bigger"),"auto"!==t.width&&(t.tooltipEle.style.maxWidth=b(t.width)),t.tooltipEle.appendChild(t.createElement("div",{className:Pd})),this.appendContainer(t),Se([t.tooltipEle],"e-hidden"),t.addDescribedBy(e,t.ctrlId+"_content"),t.renderContent(e),be([t.tooltipEle],Ud),t.showTipPointer&&t.renderArrow(),t.renderCloseIcon(),t.renderPopup(e),t.adjustArrow(e,t.position,t.tooltipPositionX,t.tooltipPositionY),st.stop(t.tooltipEle),t.reposition(e))},t.prototype.tooltipAfterRender=function(e,t,i,n){if(e){Se([n.tooltipEle],Ud),be([n.tooltipEle],qd),n.tooltipEventArgs={type:t?t.type:null,cancel:!1,target:e,event:t||null,element:n.tooltipEle,isInteracted:!m(t)},n.needTemplateReposition()&&!n.mouseTrail&&(n.tooltipEle.style.display="none");n.trigger("beforeOpen",n.tooltipEventArgs,function(o){n.beforeOpenCallback(o,e,i,t)}.bind(n))}},t.prototype.beforeOpenCallback=function(e,t,i,n){var o=this;if(e.cancel)this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove(),this.restoreElement(t);else{var s={name:i.effect,duration:i.duration,delay:i.delay,timingFunction:"easeOut"};if("None"===i.effect&&(s=void 0),this.openDelay>0){this.showTimer=setTimeout((function(){o.mouseTrail&&ye.add(t,"mousemove touchstart mouseenter",o.onMouseMove,o),o.popupObj&&(o.popupObj.show(s,t),o.mouseMoveEvent&&o.mouseTrail&&o.onMouseMove(o.mouseMoveEvent))}),this.openDelay)}else this.popupObj&&this.popupObj.show(s,t)}n&&this.wireMouseEvents(n,t)},t.prototype.needTemplateReposition=function(){return!m(this.viewContainerRef)&&"string"!==typeof this.viewContainerRef},t.prototype.checkCollision=function(e,t,i){var n={left:t,top:i,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},o=ln(this.tooltipEle,this.checkCollideTarget(),t,i);return o.length>0&&(n.horizontal=o.indexOf("left")>=0?"Right":o.indexOf("right")>=0?"Left":this.tooltipPositionX,n.vertical=o.indexOf("top")>=0?"Bottom":o.indexOf("bottom")>=0?"Top":this.tooltipPositionY),n},t.prototype.calculateElementPosition=function(e,t){return[this.isBodyContainer?e.left+t.left:e.left-this.containerElement.offsetLeft+t.left+window.pageXOffset+this.containerElement.scrollLeft,this.isBodyContainer?e.top+t.top:e.top-this.containerElement.offsetTop+t.top+window.pageYOffset+this.containerElement.scrollTop]},t.prototype.collisionFlipFit=function(e,t,i){var n=this.checkCollision(e,t,i),o=n.position;this.tooltipPositionY!==n.vertical&&(o=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?n.vertical+this.tooltipPositionX:this.tooltipPositionX+n.vertical),this.tooltipPositionX!==n.horizontal&&(0===o.indexOf("Left")&&(n.vertical="LeftTop"===o||"LeftCenter"===o?"Top":"Bottom",o=n.vertical+"Left"),0===o.indexOf("Right")&&(n.vertical="RightTop"===o||"RightCenter"===o?"Top":"Bottom",o=n.vertical+"Right"),n.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:e,event:null,element:this.tooltipEle,collidedPosition:o},this.trigger("beforeCollision",this.tooltipEventArgs);var s=n.vertical,a=n.horizontal;if(n.position!==o){var r=Xi(e,a,s,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect());this.adjustArrow(e,o,a,s);var l=this.calculateTooltipOffset(o);l.top-=this.getOffSetPosition("TopBottom",o,this.offsetY),l.left-=this.getOffSetPosition("RightLeft",o,this.offsetX),n.position=o;var d=this.calculateElementPosition(r,l);n.left=d[0],n.top=d[1]}else this.adjustArrow(e,o,a,s);var h={left:n.left,top:n.top},p=this.isBodyContainer?rn(this.tooltipEle,this.checkCollideTarget(),{X:!0,Y:!1},h).left:h.left;if(this.tooltipEle.style.display="block",this.showTipPointer&&(0===o.indexOf("Bottom")||0===o.indexOf("Top"))){var c=Ee("."+Od,this.tooltipEle),u=parseInt(c.style.left,10)-(p-n.left);u<0?u=0:u+c.offsetWidth>this.tooltipEle.clientWidth&&(u=this.tooltipEle.clientWidth-c.offsetWidth),c.style.left=u.toString()+"px"}return this.tooltipEle.style.display="",h.left=p,h},t.prototype.getOffSetPosition=function(e,t,i){return-1!==e.indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!==e.indexOf(t.split(/(?=[A-Z])/)[0])?2*i:0},t.prototype.checkCollideTarget=function(){return!this.windowCollision&&this.target?this.element:null},t.prototype.hideTooltip=function(e,t,i){var n=this;if(this.closeDelay>0){clearTimeout(this.hideTimer),clearTimeout(this.showTimer);this.hideTimer=setTimeout((function(){n.closeDelay&&n.tooltipEle&&n.isTooltipOpen||n.tooltipHide(e,t,i)}),this.closeDelay)}else this.tooltipHide(e,t,i)},t.prototype.tooltipHide=function(e,t,i){var n,o=this;n=t?this.target?i||t.target:this.element:Ee('[data-tooltip-id= "'+this.ctrlId+'_content"]',document),this.tooltipEventArgs={type:t?t.type:null,cancel:!1,target:n,event:t||null,element:this.tooltipEle,isInteracted:!m(t)},this.trigger("beforeClose",this.tooltipEventArgs,(function(t){t.cancel?o.isHidden=!1:(o.mouseMoveBeforeRemove(),o.popupHide(e,n))})),this.tooltipEventArgs=null},t.prototype.popupHide=function(e,t){t&&this.restoreElement(t),this.isHidden=!0;var i={name:e.effect,duration:e.duration,delay:e.delay,timingFunction:"easeIn"};"None"===e.effect&&(i=void 0),this.popupObj&&this.popupObj.hide(i)},t.prototype.restoreElement=function(e){this.unwireMouseEvents(e),m(e.getAttribute("data-content"))||(e.setAttribute("title",e.getAttribute("data-content")),e.removeAttribute("data-content")),this.removeDescribedBy(e)},t.prototype.clear=function(){this.tooltipEle&&(Se([this.tooltipEle],qd),be([this.tooltipEle],Ud)),this.isHidden&&(this.popupObj&&this.popupObj.destroy(),this.tooltipEle&&ke(this.tooltipEle),this.tooltipEle=null,this.popupObj=null)},t.prototype.tooltipHover=function(e){this.tooltipEle&&(this.isTooltipOpen=!0)},t.prototype.tooltipMouseOut=function(e){this.isTooltipOpen=!1,this.hideTooltip(this.animation.close,e,this.findTarget())},t.prototype.onMouseOut=function(e){var t=e.relatedTarget;if(t&&!this.mouseTrail){var i=Fe(t,"."+Ld+"."+Yd+"."+Wd);i?ye.add(i,"mouseleave",this.tooltipElementMouseOut,this):(this.hideTooltip(this.animation.close,e,this.findTarget()),0===this.closeDelay&&this.clear())}else this.hideTooltip(this.animation.close,e,this.findTarget()),this.clear()},t.prototype.tooltipElementMouseOut=function(e){this.hideTooltip(this.animation.close,e,this.findTarget()),ye.remove(this.element,"mouseleave",this.tooltipElementMouseOut),this.clear()},t.prototype.onStickyClose=function(e){this.close()},t.prototype.onMouseMove=function(e){var t=0,i=0;e.type.indexOf("touch")>-1?(e.preventDefault(),t=e.touches[0].pageX,i=e.touches[0].pageY):(t=e.pageX,i=e.pageY),st.stop(this.tooltipEle),Se([this.tooltipEle],qd),be([this.tooltipEle],Ud),this.adjustArrow(e.target,this.position,this.tooltipPositionX,this.tooltipPositionY);var n=this.calculateTooltipOffset(this.position),o=t+n.left+this.offsetX,s=i+n.top+this.offsetY,a=this.checkCollision(e.target,o,s);if(this.tooltipPositionX!==a.horizontal||this.tooltipPositionY!==a.vertical){var r=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?a.vertical+a.horizontal:a.horizontal+a.vertical;a.position=r,this.adjustArrow(e.target,a.position,a.horizontal,a.vertical);var l=this.calculateTooltipOffset(a.position);a.left=t+l.left-this.offsetX,a.top=i+l.top-this.offsetY}this.tooltipEle.style.left=a.left+"px",this.tooltipEle.style.top=a.top+"px"},t.prototype.keyDown=function(e){this.tooltipEle&&27===e.keyCode&&this.close()},t.prototype.touchEnd=function(e){this.tooltipEle&&null===Fe(e.target,"."+Nd)&&!this.isSticky&&this.close()},t.prototype.scrollHandler=function(e){this.tooltipEle&&(Fe(e.target,"."+Ld+"."+Yd+"."+Wd)||this.close())},t.prototype.render=function(){this.initialize(),this.wireEvents(this.opensOn),this.renderComplete()},t.prototype.preRender=function(){this.tipClass=jd,this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0},t.prototype.wireEvents=function(e){for(var t=0,i=this.getTriggerList(e);t<i.length;t++){var n=i[t];if("Custom"===n)return;"Focus"===n&&(this.wireFocusEvents(),ye.add(this.element,"DOMNodeInserted",this.updateTarget,this)),"Click"===n&&ye.add(this.element,ge.touchStartEvent,this.targetClick,this),"Hover"===n&&(ge.isDevice?(this.touchModule=new Gt(this.element,{tapHoldThreshold:500,tapHold:this.tapHoldHandler.bind(this)}),ye.add(this.element,ge.touchEndEvent,this.touchEndHandler,this)):ye.add(this.element,"mouseover",this.targetHover,this))}ye.add(document,"touchend",this.touchEnd,this),ye.add(document,"scroll wheel",this.scrollHandler,this),ye.add(window,"resize",this.windowResize,this),ye.add(document,"keydown",this.keyDown,this)},t.prototype.updateTarget=function(e){m(this.targetsList)||m(this.target)||[].slice.call(De(this.target,this.element)).length!==this.targetsList.length&&(this.unwireEvents(this.opensOn),this.wireEvents(this.opensOn))},t.prototype.getTriggerList=function(e){return"Auto"===e&&(e=ge.isDevice?"Hover":"Hover Focus"),e.split(" ")},t.prototype.wireFocusEvents=function(){if(m(this.target))ye.add(this.element,"focus",this.targetHover,this);else{var e=[].slice.call(De(this.target,this.element));this.targetsList=e;for(var t=0,i=e;t<i.length;t++){var n=i[t];n.setAttribute("tabindex","0"),ye.add(n,"focus",this.targetHover,this)}}},t.prototype.wireMouseEvents=function(e,t){this.tooltipEle&&(this.isSticky||("focus"===e.type&&ye.add(t,"blur",this.onMouseOut,this),"mouseover"===e.type&&ye.add(t,"mouseleave",this.onMouseOut,this),this.closeDelay&&(ye.add(this.tooltipEle,"mouseenter",this.tooltipHover,this),ye.add(this.tooltipEle,"mouseleave",this.tooltipMouseOut,this))),this.mouseTrail&&0===this.openDelay&&ye.add(t,"mousemove touchstart mouseenter",this.onMouseMove,this),t.setAttribute("tabindex","0"))},t.prototype.unwireEvents=function(e){for(var t=0,i=this.getTriggerList(e);t<i.length;t++){var n=i[t];if("Custom"===n)return;"Focus"===n&&(this.unwireFocusEvents(),ye.remove(this.element,"DOMNodeInserted",this.updateTarget)),"Click"===n&&ye.remove(this.element,ge.touchStartEvent,this.targetClick),"Hover"===n&&(ge.isDevice?(this.touchModule&&this.touchModule.destroy(),ye.remove(this.element,ge.touchEndEvent,this.touchEndHandler)):ye.remove(this.element,"mouseover",this.targetHover))}ye.remove(document,"touchend",this.touchEnd),ye.remove(document,"scroll wheel",this.scrollHandler),ye.remove(window,"resize",this.windowResize),ye.remove(document,"keydown",this.keyDown)},t.prototype.unwireFocusEvents=function(){if(m(this.target))ye.remove(this.element,"focus",this.targetHover);else for(var e=0,t=[].slice.call(De(this.target,this.element));e<t.length;e++){var i=t[e];i.removeAttribute("tabindex"),ye.remove(i,"focus",this.targetHover)}},t.prototype.unwireMouseEvents=function(e){if(!this.isSticky){for(var t=0,i=this.getTriggerList(this.opensOn);t<i.length;t++){var n=i[t];"Focus"===n&&ye.remove(e,"blur",this.onMouseOut),"Hover"!==n||ge.isDevice||ye.remove(e,"mouseleave",this.onMouseOut)}this.closeDelay&&(ye.remove(e,"mouseenter",this.tooltipHover),ye.remove(e,"mouseleave",this.tooltipMouseOut))}this.mouseTrail&&ye.remove(e,"mousemove touchstart mouseenter",this.onMouseMove)},t.prototype.findTarget=function(){return Ee('[data-tooltip-id= "'+this.ctrlId+'_content"]',document)},t.prototype.getModuleName=function(){return"tooltip"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.onPropertyChanged=function(e,t){for(var i=this.findTarget(),n=0,o=Object.keys(e);n<o.length;n++){switch(o[n]){case"width":this.tooltipEle&&i&&(this.tooltipEle.style.width=this.tooltipEle.style.maxWidth=b(e.width),this.reposition(i));break;case"height":this.tooltipEle&&i&&(this.tooltipEle.style.height=b(e.height),this.reposition(i));break;case"content":this.tooltipEle&&this.renderContent();break;case"opensOn":this.unwireEvents(t.opensOn),this.wireEvents(e.opensOn);break;case"position":if(this.formatPosition(),this.tooltipEle&&i){var s=Ee("."+zd,this.tooltipEle);s.style.top=s.style.left=null,this.reposition(i)}break;case"tipPointerPosition":this.tooltipEle&&i&&this.reposition(i);break;case"offsetX":if(this.tooltipEle){var a=e.offsetX-t.offsetX;this.tooltipEle.style.left=(parseInt(this.tooltipEle.style.left,10)+a).toString()+"px"}break;case"offsetY":if(this.tooltipEle){var r=e.offsetY-t.offsetY;this.tooltipEle.style.top=(parseInt(this.tooltipEle.style.top,10)+r).toString()+"px"}break;case"cssClass":this.tooltipEle&&(t.cssClass&&Se([this.tooltipEle],t.cssClass.split(" ")),e.cssClass&&be([this.tooltipEle],e.cssClass.split(" ")));break;case"enableRtl":this.tooltipEle&&(this.enableRtl?be([this.tooltipEle],Fd):Se([this.tooltipEle],Fd));break;case"container":m(this.containerElement)||Se([this.containerElement],Qd),this.container=e.container,this.tooltipEle&&i&&(this.appendContainer(this),this.reposition(i))}}},t.prototype.open=function(e,t){m(t)&&(t=this.animation.open),m(e)&&(e=this.element),"none"!==e.style.display&&this.showTooltip(e,t)},t.prototype.close=function(e){e||(e=this.animation.close),this.hideTooltip(e)},t.prototype.refresh=function(e){this.tooltipEle&&this.renderContent(e),this.popupObj&&e&&this.reposition(e)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.tooltipEle&&ke(this.tooltipEle),this.popupObj&&this.popupObj.destroy(),Se([this.element],Nd),this.unwireEvents(this.opensOn),this.unwireMouseEvents(this.element),this.tooltipEle=null,this.popupObj=null},Dd([Ge("auto")],t.prototype,"width",void 0),Dd([Ge("auto")],t.prototype,"height",void 0),Dd([Ge()],t.prototype,"content",void 0),Dd([Ge("body")],t.prototype,"container",void 0),Dd([Ge()],t.prototype,"target",void 0),Dd([Ge("TopCenter")],t.prototype,"position",void 0),Dd([Ge(0)],t.prototype,"offsetX",void 0),Dd([Ge(0)],t.prototype,"offsetY",void 0),Dd([Ge(!0)],t.prototype,"showTipPointer",void 0),Dd([Ge(!0)],t.prototype,"enableHtmlParse",void 0),Dd([Ge(!1)],t.prototype,"windowCollision",void 0),Dd([Ge("Auto")],t.prototype,"tipPointerPosition",void 0),Dd([Ge("Auto")],t.prototype,"opensOn",void 0),Dd([Ge(!1)],t.prototype,"mouseTrail",void 0),Dd([Ge(!1)],t.prototype,"isSticky",void 0),Dd([Je({},Zd)],t.prototype,"animation",void 0),Dd([Ge(0)],t.prototype,"openDelay",void 0),Dd([Ge(0)],t.prototype,"closeDelay",void 0),Dd([Ge()],t.prototype,"cssClass",void 0),Dd([Ge(!1)],t.prototype,"enableHtmlSanitizer",void 0),Dd([$e()],t.prototype,"beforeRender",void 0),Dd([$e()],t.prototype,"beforeOpen",void 0),Dd([$e()],t.prototype,"afterOpen",void 0),Dd([$e()],t.prototype,"beforeClose",void 0),Dd([$e()],t.prototype,"afterClose",void 0),Dd([$e()],t.prototype,"beforeCollision",void 0),Dd([$e()],t.prototype,"created",void 0),Dd([$e()],t.prototype,"destroyed",void 0),t=Dd([et],t)}(Dt),Gd=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Jd=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Kd="e-toast",$d="e-toast-container",eh="e-toast-title",th="e-toast-full-width",ih="e-toast-content",nh="e-toast-message",oh="e-toast-progress",sh="e-toast-close-icon",ah="e-rtl",rh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gd(t,e),Jd([Ge("Left")],t.prototype,"X",void 0),Jd([Ge("Top")],t.prototype,"Y",void 0),t}(mt),lh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gd(t,e),Jd([Ge(null)],t.prototype,"model",void 0),Jd([Ge(null)],t.prototype,"click",void 0),t}(mt),dh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gd(t,e),Jd([Ge("FadeIn")],t.prototype,"effect",void 0),Jd([Ge(600)],t.prototype,"duration",void 0),Jd([Ge("ease")],t.prototype,"easing",void 0),t}(mt),hh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gd(t,e),Jd([Je({effect:"FadeIn",duration:600,easing:"ease"},dh)],t.prototype,"show",void 0),Jd([Je({effect:"FadeOut",duration:600,easing:"ease"},dh)],t.prototype,"hide",void 0),t}(mt),ph=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.toastCollection=[],n.needsID=!0,n}return Gd(t,e),t.prototype.getModuleName=function(){return"toast"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.destroy=function(){this.hide("All"),this.element.classList.remove($d),Le(this.element,{position:"","z-index":""}),m(this.refElement)||m(this.refElement.parentElement)||(this.refElement.parentElement.insertBefore(this.element,this.refElement),Ae(this.refElement),this.refElement=void 0),this.isBlazorServer()||e.prototype.destroy.call(this)},t.prototype.preRender=function(){this.isDevice=ge.isDevice,"300px"===this.width&&(this.width=this.isDevice&&screen.width<768?"100%":"300px"),m(this.target)&&(this.target=document.body),this.enableRtl&&!this.isBlazorServer()&&this.element.classList.add(ah)},t.prototype.render=function(){this.progressObj=[],this.intervalId=[],this.contentTemplate=null,this.toastTemplate=null,this.renderComplete(),this.initRenderClass=this.element.className},t.prototype.show=function(e){var t;if(m(e)||(this.templateChanges(e),t=JSON.parse(JSON.stringify(e)),f(this,this,e)),m(this.toastContainer)){this.toastContainer=this.getContainer();var i="string"===typeof this.target?document.querySelector(this.target):"object"===typeof this.target?this.target:document.body;if(m(i))return;"BODY"===i.tagName?this.toastContainer.style.position="fixed":(this.toastContainer.style.position="absolute",i.style.position="relative"),this.setPositioning(this.position),i.appendChild(this.toastContainer)}this.isBlazorServer()&&this.element.classList.contains("e-control")?this.isToastModel(e):(this.toastEle=this.createElement("div",{className:Kd,id:y("toast")}),this.setWidthHeight(),this.setCSSClass(this.cssClass),m(this.template)||""===this.template?this.personalizeToast():this.templateRendering(),this.setProgress(),this.setCloseButton(),this.setAria(),this.appendToTarget(e),this.isDevice&&screen.width<768&&new Gt(this.toastEle,{swipe:this.swipeHandler.bind(this)}),m(t)||(f(t,{element:[this.toastEle]},!0),this.toastCollection.push(t)),this.isReact&&this.renderReactTemplates())},t.prototype.showToast=function(e,t){this.toastEle=this.element.querySelector("#"+e),this.show(t)},t.prototype.isToastModel=function(e){this.toastContainer=this.element,this.setPositioning(this.position);m(this.element.lastElementChild)||this.setProgress(),this.setAria(),this.appendToTarget(e)},t.prototype.swipeHandler=function(e){var t=Fe(e.originalEvent.target,"."+Kd+":not(."+$d+")"),i=this.animation.hide.effect;m(t)||("Right"===e.swipeDirection?(this.animation.hide.effect="SlideRightOut",this.hideToast("swipe",t)):"Left"===e.swipeDirection&&(this.animation.hide.effect="SlideLeftOut",this.hideToast("swipe",t)),this.animation.hide.effect=i)},t.prototype.templateChanges=function(e){g(e.content)||m(this.contentTemplate)||this.content===e.content||this.clearContentTemplate(),g(e.template)||m(this.toastTemplate)||this.template===e.template||this.clearToastTemplate()},t.prototype.setCSSClass=function(e){if(e){var t=-1!==e.indexOf(",")?",":" ";Pe(this.toastEle,e.split(t),[]),this.toastContainer&&Pe(this.toastContainer,e.split(t),[])}},t.prototype.setWidthHeight=function(){"300px"===this.width?this.toastEle.style.width=b(this.width):"100%"===this.width?this.toastContainer.classList.add(th):(this.toastEle.style.width=b(this.width),this.toastContainer.classList.remove(th)),this.toastEle.style.height=b(this.height)},t.prototype.templateRendering=function(){this.fetchEle(this.toastEle,this.template,"template")},t.prototype.sanitizeHelper=function(e){if(this.enableHtmlSanitizer){var t=Vi.beforeSanitize();f(t,t,{cancel:!1,helper:null}),this.trigger("beforeSanitizeHtml",t),t.cancel&&!m(t.helper)?e=t.helper(e):t.cancel||(e=Vi.serializeValue(t,e))}return e},t.prototype.hide=function(e){this.hideToast("",e)},t.prototype.hideToast=function(e,t){if(!m(this.toastContainer)&&0!==this.toastContainer.childElementCount)if("string"!==typeof t||"All"!==t)m(t)&&(t=this.newestOnTop?this.toastContainer.lastElementChild:this.toastContainer.firstElementChild),this.destroyToast(t,e);else for(var i=0;i<this.toastContainer.childElementCount;i++)this.destroyToast(this.toastContainer.children[i],e)},t.prototype.fetchEle=function(e,t,i){var n,o,s,a;if(t="string"===typeof t?this.sanitizeHelper(t):t,a=e.classList.contains(eh)?this.element.id+"title":e.classList.contains(ih)?this.element.id+"content":this.element.id+"template",!m(o="content"===i?this.contentTemplate:this.toastTemplate))return e.appendChild(o.cloneNode(!0)),e;try{if(document.querySelectorAll(t).length>0){var r=null;"title"!==i&&(r=document.querySelector(t),e.appendChild(r),r.style.display="");var l=m(r)?o:r.cloneNode(!0);"content"===i?this.contentTemplate=l:this.toastTemplate=l}else n=Mi(t)}catch(d){n=Mi(t)}if(!m(n))if(this.isBlazorServer()){s=n({},this,i,a,!0)}else s=n({},this,i,null,!0);return m(s)||!(s.length>0)||m(s[0].tagName)&&1===s.length?0===e.childElementCount&&(e.innerHTML=t):[].slice.call(s).forEach((function(t){m(t.tagName)||(t.style.display=""),e.appendChild(t)})),e},t.prototype.clearProgress=function(e){m(this.intervalId[e])||(clearInterval(this.intervalId[e]),delete this.intervalId[e]),m(this.progressObj[e])||(clearInterval(this.progressObj[e].intervalId),delete this.progressObj[e])},t.prototype.removeToastContainer=function(e){e&&this.toastContainer.classList.contains("e-toast-util")&&Ae(this.toastContainer)},t.prototype.clearContainerPos=function(e){var t=this;this.isBlazorServer()?this.toastContainer=null:(this.customPosition?(Le(this.toastContainer,{left:"",top:""}),this.removeToastContainer(e),this.toastContainer=null,this.customPosition=!1):([Kd+"-top-left",Kd+"-top-right",Kd+"-bottom-left",Kd+"-bottom-right",Kd+"-bottom-center",Kd+"-top-center",Kd+"-full-width"].forEach((function(e){!m(t.toastContainer)&&t.toastContainer.classList.contains(e)&&t.toastContainer.classList.remove(e)})),this.removeToastContainer(e),this.toastContainer=null),m(this.contentTemplate)||this.clearContentTemplate(),m(this.toastTemplate)||this.clearToastTemplate())},t.prototype.clearContentTemplate=function(){this.contentTemplate.style.display="none",document.body.appendChild(this.contentTemplate),this.contentTemplate=null},t.prototype.clearToastTemplate=function(){this.toastTemplate.style.display="none",document.body.appendChild(this.toastTemplate),this.toastTemplate=null},t.prototype.isBlazorServer=function(){return S()&&this.isServerRendered},t.prototype.destroyToast=function(e,t){for(var i,n=this,o=0;o<this.toastCollection.length;o++)this.toastCollection[o].element[0]===e&&(i=this.toastCollection[o],this.toastCollection.splice(o,1));var s={options:this,cancel:!1,type:t,element:e,toastContainer:this.toastContainer},a=this.animation.hide,r={duration:a.duration,name:a.effect,timingFunction:a.easing},l=parseInt(e.id.split("toast_")[1],10),d=this.isBlazorServer()?{options:i,toastContainer:this.toastContainer}:{options:i,toastContainer:this.toastContainer,toastObj:this};this.trigger("beforeClose",s,(function(t){t.cancel||(m(n.progressObj[l])||m(e.querySelector("."+oh))||(n.progressObj[l].progressEle.style.width="0%"),r.end=function(){n.clearProgress(l),n.isBlazorServer()&&!m(i)||Ae(e),n.trigger("close",d),0===n.toastContainer.childElementCount&&n.clearContainerPos(!0),a=null,r=null},new st(r).animate(e))}))},t.prototype.personalizeToast=function(){this.setIcon(),this.setTitle(),this.setContent(),this.actionButtons()},t.prototype.setAria=function(){Ve(this.toastEle,{role:"alert"})},t.prototype.setPositioning=function(e){this.isBlazorServer()||(isNaN(parseFloat(e.X))&&isNaN(parseFloat(e.Y))?this.toastContainer.classList.add(Kd+"-"+e.Y.toString().toLowerCase()+"-"+e.X.toString().toLowerCase()):(this.customPosition=!0,Le(this.toastContainer,{left:b(e.X),top:b(e.Y)})))},t.prototype.setCloseButton=function(){if(this.showCloseButton){this.l10n=new qt("toast",{close:"Close"},this.locale),this.l10n.setLocale(this.locale);var e=this.l10n.getConstant("close"),t=this.createElement("div",{className:sh+" e-icons ",attrs:{tabindex:"0","aria-label":e,role:"button"}});this.toastEle.classList.add("e-toast-header-close-icon"),this.toastEle.appendChild(t)}},t.prototype.setProgress=function(){if(this.timeOut>0){var e=parseInt(this.toastEle.id.split("toast_")[1],10);this.intervalId[e]=window.setTimeout(this.destroyToast.bind(this,this.toastEle),this.timeOut),this.progressObj[e]={hideEta:null,intervalId:null,maxHideTime:null,element:null,timeOutId:null,progressEle:null},this.progressObj[e].maxHideTime=parseFloat(this.timeOut+""),this.progressObj[e].hideEta=(new Date).getTime()+this.progressObj[e].maxHideTime,this.progressObj[e].element=this.toastEle,this.extendedTimeout>0&&(ye.add(this.toastEle,"mouseover",this.toastHoverAction.bind(this,e)),ye.add(this.toastEle,"mouseleave",this.delayedToastProgress.bind(this,e)),this.progressObj[e].timeOutId=this.intervalId[e]),this.showProgressBar&&(this.progressBarEle=this.createElement("div",{className:oh}),this.toastEle.insertBefore(this.progressBarEle,this.toastEle.children[0]),this.progressObj[e].intervalId=setInterval(this.updateProgressBar.bind(this,this.progressObj[e]),10),this.progressObj[e].progressEle=this.progressBarEle)}},t.prototype.toastHoverAction=function(e){clearTimeout(this.progressObj[e].timeOutId),clearInterval(this.progressObj[e].intervalId),this.progressObj[e].hideEta=0,m(this.progressObj[e].element.querySelector("."+oh))||(this.progressObj[e].progressEle.style.width="0%")},t.prototype.delayedToastProgress=function(e){var t=this.progressObj[e],i=t.element;t.timeOutId=window.setTimeout(this.destroyToast.bind(this,i),this.extendedTimeout),t.maxHideTime=parseFloat(this.extendedTimeout+""),t.hideEta=(new Date).getTime()+t.maxHideTime,m(i.querySelector("."+oh))||(t.intervalId=setInterval(this.updateProgressBar.bind(this,t),10))},t.prototype.updateProgressBar=function(e){var t=(e.hideEta-(new Date).getTime())/e.maxHideTime*100;t="Ltr"===this.progressDirection?100-t:t,e.progressEle.style.width=t+"%"},t.prototype.setIcon=function(){if(!m(this.icon)&&0!==this.icon.length){var e=this.createElement("div",{className:"e-toast-icon e-icons "+this.icon});this.toastEle.classList.add("e-toast-header-icon"),this.toastEle.appendChild(e)}},t.prototype.setTitle=function(){if(!m(this.title)){var e=this.createElement("div",{className:eh});e=this.fetchEle(e,this.title,"title");var t=this.createElement("div",{className:nh});t.appendChild(e),this.toastEle.appendChild(t)}},t.prototype.setContent=function(){var e=this.createElement("div",{className:ih}),t=this.element;if(m(this.content)||""===this.content){var i=""!==this.element.innerHTML.replace(/\s/g,"");if((t.children.length>0||i)&&(!t.firstElementChild||!t.firstElementChild.classList.contains(Kd))){this.innerEle=document.createDocumentFragment();for(var n=this.createElement("div");0!==t.childNodes.length;)this.innerEle.appendChild(this.element.childNodes[0]);e.appendChild(this.innerEle),[].slice.call(e.children).forEach((function(e){n.appendChild(e.cloneNode(!0))})),this.content=n,this.appendMessageContainer(e)}}else"object"!==typeof this.content||m(this.content.tagName)?(e=this.fetchEle(e,this.content,"content"),this.appendMessageContainer(e)):(e.appendChild(this.content),this.content=this.content.cloneNode(!0),this.appendMessageContainer(e))},t.prototype.appendMessageContainer=function(e){if(this.toastEle.querySelectorAll("."+nh).length>0)this.toastEle.querySelector("."+nh).appendChild(e);else{var t=this.createElement("div",{className:nh});t.appendChild(e),this.toastEle.appendChild(t)}},t.prototype.actionButtons=function(){var e=this,t=this.createElement("div",{className:"e-toast-actions"});[].slice.call(this.buttons).forEach((function(i){if(!m(i.model)){var n=e.createElement("button");n.setAttribute("type","button"),(m(i.model.cssClass)||0===i.model.cssClass.length)&&(i.model.cssClass="e-primary "+e.cssClass),n.classList.add("e-small"),new Qi(i.model,n),m(i.click)||"function"!==typeof i.click||ye.add(n,"click",i.click),t.appendChild(n)}})),t.childElementCount>0&&this.appendMessageContainer(t)},t.prototype.appendToTarget=function(e){var t=this,i=this.isBlazorServer()?{options:e,element:this.toastEle,cancel:!1}:{options:e,toastObj:this,element:this.toastEle,cancel:!1};this.trigger("beforeOpen",i,(function(i){if(i.cancel){if(t.isBlazorServer()){var n=parseInt(t.toastEle.id.split("toast_")[1],10);t.clearProgress(n),Ae(t.toastEle),0===t.toastContainer.childElementCount&&t.clearContainerPos()}}else t.isBlazorServer()||(t.toastEle.style.display="none"),t.newestOnTop&&0!==t.toastContainer.childElementCount?t.toastContainer.insertBefore(t.toastEle,t.toastContainer.children[0]):t.isBlazorServer()||t.toastContainer.appendChild(t.toastEle),Se([t.toastEle],"e-blazor-toast-hidden"),ye.add(t.toastEle,"click",t.clickHandler,t),ye.add(t.toastEle,"keydown",t.keyDownHandler,t),t.toastContainer.style.zIndex=On(t.toastContainer)+"",t.displayToast(t.toastEle,e)}))},t.prototype.clickHandler=function(e){var t=this;this.isBlazorServer()||e.stopPropagation();var i=e.target,n=Fe(i,"."+Kd),o=this.isBlazorServer()?{element:n,cancel:!1,clickToClose:!1,originalEvent:e}:{element:n,cancel:!1,clickToClose:!1,originalEvent:e,toastObj:this},s=i.classList.contains(sh);this.trigger("click",o,(function(e){(s&&!e.cancel||e.clickToClose)&&t.destroyToast(n,"click")}))},t.prototype.keyDownHandler=function(e){if(e.target.classList.contains(sh)&&(13===e.keyCode||32===e.keyCode)){var t=Fe(e.target,"."+Kd);this.destroyToast(t,"key")}},t.prototype.displayToast=function(e,t){var i=this,n=this.animation.show,o={duration:n.duration,name:n.effect,timingFunction:n.easing},s=this.isBlazorServer()?{options:t,element:this.toastEle}:{options:t,toastObj:this,element:this.toastEle};o.begin=function(){e.style.display=""},o.end=function(){i.trigger("open",s)},new st(o).animate(e)},t.prototype.getContainer=function(){return this.element.classList.add($d),this.element},t.prototype.onPropertyChanged=function(e,t){for(var i=this.element,n=0,o=Object.keys(e);n<o.length;n++){if("enableRtl"===o[n])e.enableRtl?i.classList.add(ah):i.classList.remove(ah)}},Jd([Ge("300px")],t.prototype,"width",void 0),Jd([Ge("auto")],t.prototype,"height",void 0),Jd([Ge(null)],t.prototype,"title",void 0),Jd([Ge(null)],t.prototype,"content",void 0),Jd([Ge(!0)],t.prototype,"enableHtmlSanitizer",void 0),Jd([Ge(null)],t.prototype,"icon",void 0),Jd([Ge(null)],t.prototype,"cssClass",void 0),Jd([Ge(null)],t.prototype,"template",void 0),Jd([Ge(!0)],t.prototype,"newestOnTop",void 0),Jd([Ge(!1)],t.prototype,"showCloseButton",void 0),Jd([Ge(!1)],t.prototype,"showProgressBar",void 0),Jd([Ge(5e3)],t.prototype,"timeOut",void 0),Jd([Ge("Rtl")],t.prototype,"progressDirection",void 0),Jd([Ge(1e3)],t.prototype,"extendedTimeout",void 0),Jd([Je({},hh)],t.prototype,"animation",void 0),Jd([Je({},rh)],t.prototype,"position",void 0),Jd([Ke([{}],lh)],t.prototype,"buttons",void 0),Jd([Ge(null)],t.prototype,"target",void 0),Jd([$e()],t.prototype,"created",void 0),Jd([$e()],t.prototype,"beforeSanitizeHtml",void 0),Jd([$e()],t.prototype,"destroyed",void 0),Jd([$e()],t.prototype,"open",void 0),Jd([$e()],t.prototype,"beforeOpen",void 0),Jd([$e()],t.prototype,"beforeClose",void 0),Jd([$e()],t.prototype,"close",void 0),Jd([$e()],t.prototype,"click",void 0),t=Jd([et],t)}(Dt);!function(e){e.show=function(e,t,i){var n,o,s;if(document.querySelector("."+$d)?n=document.querySelector("."+$d):(n=we("div",{className:Kd+" "+$d+" e-toast-util"}),document.body.appendChild(n)),"string"===typeof e){var a=void 0,r=void 0;if(m(t))a="",r="";else switch(t){case"Warning":a="e-toast-warning",r="e-toast-warning-icon";break;case"Success":a="e-toast-success",r="e-toast-success-icon";break;case"Error":a="e-toast-danger",r="e-toast-error-icon";break;case"Information":a="e-toast-info",r="e-toast-info-icon"}s={content:e,cssClass:a,icon:r,timeOut:m(i)?5e3:i}}else s=e;return(o=new ph(s)).appendTo(n),o.show(),o}}(ql||(ql={}));var ch,uh,fh,mh,gh,yh,vh=function(){function e(e,t){var i=this;this.thumbnailWidthMin=200,this.contentContainerScrollWidth=33,this.closeButtonLeft=170,this.isTooltipCreated=!1,this.isThumbnail=!1,this.annotationContextMenu=[],this.isCommentPanelShow=!1,this.commentPanelWidthMin=300,this.isNavigationToolbarVisible=!1,this.isBookmarkListOpen=!1,this.isNavigationPaneResized=!1,this.isBookmarkOpen=!1,this.isThumbnailOpen=!1,this.restrictUpdateZoomValue=!0,this.loadImportAnnotation=function(e){var t=e.target.files;if(null!==e.target.files[0]){var n=t[0];if(n){i.pdfViewer.fireImportStart(n);var o=n.type;if(n.name.split(".json").length>1&&o.includes("json"))(s=new FileReader).readAsDataURL(n),s.onload=function(e){if(e.currentTarget.result){var t=e.currentTarget.result.split(",")[1],n=atob(t);if(n){var o=JSON.parse(n);i.pdfViewerBase.importAnnotations(o,oa.Json)}}};else if(n.name.split(".xfdf").length>1&&(o.includes("xfdf")||e.target.accept.includes("xfdf"))){var s;(s=new FileReader).readAsDataURL(n),s.onload=function(e){if(e.currentTarget.result){var t=e.currentTarget.result.split(",")[1];atob(t)&&i.pdfViewerBase.importAnnotations(t,oa.Xfdf,!0)}}}else{if(i.pdfViewer.fireImportFailed(n,i.pdfViewer.localeObj.getConstant("Import Failed")),S())i.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_ImportFailed").then((function(e){i.pdfViewerBase.openImportExportNotificationPopup(e)}));else i.pdfViewerBase.openImportExportNotificationPopup(i.pdfViewer.localeObj.getConstant("Import Failed"))}}e.target.value=""}},this.resizeIconMouseOver=function(e){e.srcElement.style.cursor="e-resize"},this.resizePanelMouseDown=function(e){var t=null;(t=i).offset=[t.sideBarResizer.offsetLeft-e.clientX,t.sideBarResizer.offsetTop-e.clientY,t.sideBarResizer.offsetParent.clientWidth],i.previousX=e.clientX,t.isDown=!0,t.isNavigationPaneResized=!0,t.pdfViewerBase.viewerContainer.style.cursor="e-resize",t.sideBarContentContainer&&(t.sideBarContentContainer.style.cursor="e-resize")},this.resizeViewerMouseLeave=function(e){var t=null;(t=i).isDown=!1,t.isNavigationPaneResized&&t.sideBarContentContainer&&(t.pdfViewerBase.viewerContainer.style.cursor="default",t.sideBarContentContainer.style.cursor="default",t.isNavigationPaneResized=!1),t.commentPanelContainer&&t.isCommentPanelShow&&(i.commentPanelMouseLeave(e),t.isCommentPanelShow=!1)},this.resizePanelMouseMove=function(e){var t=null;if(t=i,!i.pdfViewerBase.getPopupNoteVisibleStatus()){var n=e.target;if(i.pdfViewerBase.skipPreventDefault(n)&&e.preventDefault(),t.isDown&&i.sideBarContentContainer){var o,s;if(i.pdfViewer.enableRtl)(o=i.previousX-e.clientX+t.offset[2])>(s=Math.floor(i.outerContainerWidth/2))&&(o=s),o<i.thumbnailWidthMin&&(o=i.thumbnailWidthMin),t.sideBarResizer.style.right=o+"px",t.sideBarContentContainer.style.width=o+"px",t.sideBarContent.style.width=o+"px",t.sideBarContentSplitter.style.width=o+"px",t.sideBarTitleContainer.style.width=o+"px",t.pdfViewerBase.viewerContainer.style.right=t.getViewerContainerLeft()+"px",t.pdfViewerBase.viewerContainer.style.left=t.getViewerContainerRight()+"px";else(o=e.clientX+t.offset[0])>(s=Math.floor(i.outerContainerWidth/2))&&(o=s),o<i.thumbnailWidthMin&&(o=i.thumbnailWidthMin),t.sideBarResizer.style.left=o+"px",t.closeDiv.style.left=o-t.contentContainerScrollWidth+"px",t.sideBarContentContainer.style.width=o+"px",t.sideBarContent.style.width=o+"px",t.sideBarContentSplitter.style.width=o+"px",t.sideBarTitleContainer.style.width=o+"px",t.pdfViewerBase.viewerContainer.style.left=t.getViewerContainerLeft()+"px",t.pdfViewerBase.viewerContainer.style.right=t.getViewerContainerRight()+"px";var a=t.pdfViewer.element.clientWidth-t.getViewerContainerLeft()-t.getViewerContainerRight();t.pdfViewerBase.viewerContainer.style.width=a+"px",t.pdfViewerBase.pageContainer.style.width=t.pdfViewerBase.viewerContainer.clientWidth+"px",t.pdfViewer.thumbnailViewModule.gotoThumbnailImage(t.pdfViewerBase.currentPageNumber-1),t.pdfViewerBase.updateZoomValue(),t.bookmarkButton.children[0].classList.contains("e-pv-bookmark-disable-icon")||t.pdfViewer.bookmarkViewModule.setBookmarkContentHeight()}else t.isCommentPanelShow&&i.commentPanelContainer&&i.updateCommentPanelContainer(e)}},this.sideToolbarOnClose=function(e){var t=null;(t=i).removeThumbnailSelectionIconTheme(),t.removeBookmarkSelectionIconTheme(),t.updateViewerContainerOnClose()},this.sideToolbarOnClick=function(e){i.sideBarTitle.textContent=i.pdfViewer.localeObj.getConstant("Page Thumbnails"),i.sideBarContent.setAttribute("aria-label","Thumbnail View Panel");var t=null;t=i;var n=S()?i.pdfViewer.element.querySelector(".e-pv-bookmark-view"):document.getElementById(i.pdfViewer.element.id+"_bookmark_view");if(n&&(t.removeBookmarkSelectionIconTheme(),n.style.display="none"),document.getElementById(i.pdfViewer.element.id+"_thumbnail_view").style.display="flex",t.sideBarContentContainer&&("none"!==t.sideBarContentContainer.style.display?t.isBookmarkOpen?(t.isThumbnailOpen=!0,t.setThumbnailSelectionIconTheme(),i.updateViewerContainerOnExpand()):(t.isThumbnailOpen=!1,t.removeThumbnailSelectionIconTheme(),i.updateViewerContainerOnClose()):(i.sideBarContent.focus(),t.isThumbnailOpen=!0,t.setThumbnailSelectionIconTheme(),i.updateViewerContainerOnExpand())),t.isBookmarkOpen=!1,i.pdfViewer.annotationModule&&i.pdfViewer.annotationModule.inkAnnotationModule){var o=parseInt(i.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);i.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(o)}},this.openThumbnailPane=function(){var e=null;e=i;var t=document.getElementById(i.pdfViewer.element.id+"_sideBarContent"),n=document.getElementById(i.pdfViewer.element.id+"_sideBarContentContainer"),o=document.getElementById(i.pdfViewer.element.id+"_viewerContainer"),s=document.getElementById(i.pdfViewer.element.id+"_pageViewContainer");if(document.getElementById(i.pdfViewer.element.id+"_thumbnail_view").style.display="block",document.getElementById(i.pdfViewer.element.id+"_sideBarResizer").style.display="none",document.getElementById(i.pdfViewer.element.id+"_sideBarTitleContainer").style.display="none",document.getElementById(i.pdfViewer.element.id+"_sideBarContentSplitter").style.display="none",t.classList.add("e-thumbnail"),n.classList.add("e-thumbnail"),n&&(e.isThumbnail?(n.style.display="none",o.style.width=e.pdfViewer.element.clientWidth+"px",s.style.width=o.clientWidth+"px",o.style.left=n.clientWidth+"px",e.pdfViewerBase.updateZoomValue(),e.isThumbnail=!1):(t.focus(),n.style.display="block",o.style.width=e.pdfViewer.element.clientWidth-n.clientWidth+"px",s.style.width=o.clientWidth+"px",o.style.left=n.clientWidth+"px",e.pdfViewerBase.updateZoomValue(),e.pdfViewer.thumbnailViewModule.gotoThumbnailImage(e.pdfViewerBase.currentPageNumber-1),e.isThumbnail=!0)),i.pdfViewer.annotationModule&&i.pdfViewer.annotationModule.inkAnnotationModule){var a=parseInt(i.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);i.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(a)}},this.bookmarkButtonOnClick=function(e){i.openBookmarkcontentInitially()},this.commentPanelMouseDown=function(e){var t=null;(t=i).offset=[t.commentPanelResizer.offsetLeft-e.clientX,t.commentPanelResizer.offsetTop-e.clientY,t.getViewerContainerRight()],i.isCommentPanelShow=!0,i.previousX=e.clientX,t.pdfViewerBase.viewerContainer.style.cursor="e-resize",t.commentPanelResizer.style.cursor="e-resize"},this.updateCommentPanelContainer=function(e){var t,n,o=null;(o=i,i.pdfViewer.enableRtl)?((t=e.clientX+o.offset[0])>(n=Math.floor(i.outerContainerWidth/2))&&(t=n),t<i.commentPanelWidthMin&&(t=i.commentPanelWidthMin),o.commentPanelResizer.style.left=t+"px",o.commentPanelContainer.style.width=t+"px",o.pdfViewerBase.viewerContainer.style.left=o.getViewerContainerRight()+"px",o.pdfViewerBase.viewerContainer.style.right=o.getViewerContainerLeft()+"px"):((t=i.previousX-e.clientX+o.offset[2])>(n=Math.floor(i.outerContainerWidth/2))&&(t=n),t<i.commentPanelWidthMin&&(t=i.commentPanelWidthMin),o.commentPanelResizer.style.right=t+"px",o.commentPanelContainer.style.width=t+"px",o.pdfViewerBase.viewerContainer.style.right=o.getViewerContainerRight()+"px",o.pdfViewerBase.viewerContainer.style.left=o.getViewerContainerLeft()+"px");i.pdfViewer.annotation.stickyNotesAnnotationModule.updateCommentPanelTextTop();var s=o.pdfViewer.element.clientWidth-o.getViewerContainerLeft()-o.getViewerContainerRight();o.pdfViewerBase.viewerContainer.style.width=s+"px",o.pdfViewerBase.pageContainer.style.width=o.pdfViewerBase.viewerContainer.clientWidth+"px",o.pdfViewerBase.updateZoomValue()},this.commentPanelMouseLeave=function(e){var t=null;(t=i).commentPanelContainer&&(t.pdfViewerBase.viewerContainer.style.cursor="default",t.commentPanelContainer.style.cursor="default")},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.initializeNavigationPane=function(){!ge.isDevice||this.pdfViewer.enableDesktopMode?this.createNavigationPane():(this.commentPanelContainer=we("div",{id:this.pdfViewer.element.id+"_commantPanel",className:"e-pv-mobile-comments-container"}),this.pdfViewerBase.mainContainer.appendChild(this.commentPanelContainer),this.pdfViewer.enableRtl?this.commentPanelContainer.style.left="0px":this.commentPanelContainer.style.right="0px",this.commentPanelContainer.style.bottom="0px",this.createCommentPanelTitleContainer(),this.commentPanelContainer.style.display="none",this.commentsContentContainer=we("div",{id:this.pdfViewer.element.id+"_commentscontentcontainer",className:"e-pv-comments-content-container"}),this.commentPanelContainer.appendChild(this.commentsContentContainer),this.createFileElement(this.commentPanelContainer),this.createXFdfFileElement(this.commentPanelContainer))},e.prototype.createNavigationPane=function(){S()?(this.sideBarToolbar=this.pdfViewer.element.querySelector(".e-pv-sidebar-toolbar"),this.sideBarToolbarSplitter=this.pdfViewer.element.querySelector(".e-pv-sidebar-toolbar-splitter"),this.sideBarContentContainer=this.pdfViewer.element.querySelector(".e-pv-sidebar-content-container"),this.sideBarContentSplitter=this.pdfViewer.element.querySelector(".e-pv-sidebar-content-splitter"),this.sideBarContent=this.pdfViewer.element.querySelector(".e-pv-sidebar-content"),this.sideBarTitleContainer=this.pdfViewer.element.querySelector(".e-pv-sidebar-title-container"),this.sideBarTitle=this.pdfViewer.element.querySelector(".e-pv-sidebar-title"),this.sideBarResizer=this.pdfViewer.element.querySelector(".e-pv-sidebar-resizer")):(this.sideBarToolbar=we("div",{id:this.pdfViewer.element.id+"_sideBarToolbar",className:"e-pv-sidebar-toolbar",attrs:{role:"toolbar","aria-orientation":"vertical",tabindex:"-1","aria-label":"Sidebar Toolbar"}}),this.sideBarToolbarSplitter=we("div",{id:this.pdfViewer.element.id+"_sideBarToolbarSplitter",className:"e-pv-sidebar-toolbar-splitter"}),this.sideBarContentContainer=we("div",{id:this.pdfViewer.element.id+"_sideBarContentContainer",className:"e-pv-sidebar-content-container"}),this.sideBarContentSplitter=we("div",{id:this.pdfViewer.element.id+"_sideBarContentSplitter",className:"e-pv-sidebar-content-splitter"}),this.sideBarContent=we("div",{id:this.pdfViewer.element.id+"_sideBarContent",className:"e-pv-sidebar-content",attrs:{tabindex:"0"}}),this.sideBarTitleContainer=we("div",{id:this.pdfViewer.element.id+"_sideBarTitleContainer",className:"e-pv-sidebar-title-container"}),this.sideBarTitle=we("div",{id:this.pdfViewer.element.id+"_sideBarTitle",className:"e-pv-sidebar-title",attrs:{tabindex:"-1"}}),this.sideBarResizer=we("div",{id:this.pdfViewer.element.id+"_sideBarResizer",className:"e-pv-sidebar-resizer"})),this.pdfViewerBase.mainContainer.appendChild(this.sideBarToolbar),this.pdfViewer.enableRtl&&(this.sideBarToolbar.style.cssFloat="right",this.sideBarToolbar.style.right="1px",this.sideBarToolbar.style.position="relative"),this.pdfViewerBase.mainContainer.appendChild(this.sideBarToolbarSplitter),this.pdfViewer.enableRtl?this.sideBarToolbarSplitter.classList.add("e-right"):this.sideBarToolbarSplitter.classList.add("e-left"),this.pdfViewer.enableRtl?this.sideBarContentContainer.classList.add("e-right"):this.sideBarContentContainer.classList.add("e-left"),this.pdfViewerBase.mainContainer.appendChild(this.sideBarContentContainer),this.pdfViewer.enableRtl&&(this.sideBarContentSplitter.style.right="0px"),this.sideBarContentContainer.appendChild(this.sideBarContentSplitter),this.pdfViewer.enableRtl&&(this.sideBarContent.style.right="0px",this.sideBarContent.style.direction="rtl"),this.sideBarContentContainer.appendChild(this.sideBarContent),this.pdfViewer.enableRtl&&(this.sideBarTitleContainer.style.right="0px"),this.pdfViewer.enableRtl?this.sideBarTitle.classList.add("e-right"):this.sideBarTitle.classList.add("e-left"),this.sideBarTitleContainer.appendChild(this.sideBarTitle),this.sideBarContentContainer.appendChild(this.sideBarTitleContainer),this.sideBarResizer.addEventListener("mousedown",this.resizePanelMouseDown),this.pdfViewerBase.mainContainer.addEventListener("mousemove",this.resizePanelMouseMove),this.pdfViewerBase.mainContainer.addEventListener("mouseup",this.resizeViewerMouseLeave),this.pdfViewer.enableRtl?this.sideBarResizer.classList.add("e-right"):this.sideBarResizer.classList.add("e-left"),this.sideBarContentContainer.appendChild(this.sideBarResizer),this.createCommentPanel();var e=this.getViewerContainerLeft(),t=this.getViewerContainerRight();this.pdfViewer.enableRtl||(this.pdfViewerBase.viewerContainer.style.left=e+"px",this.pdfViewerBase.viewerContainer.style.right=t+"px"),this.pdfViewerBase.viewerContainer.style.width=this.pdfViewer.element.clientWidth-e-this.commentPanelContainer.clientWidth+"px",this.sideBarContentContainer.style.display="none",this.createSidebarToolBar(),this.createSidebarTitleCloseButton(),this.createResizeIcon(),this.sideBarToolbar.addEventListener("mouseup",this.sideToolbarOnMouseup.bind(this)),this.sideBarContentContainer.addEventListener("mouseup",this.sideBarTitleOnMouseup.bind(this))},e.prototype.adjustPane=function(){if(S()){var e=this.pdfViewer.element.querySelector(".e-pv-sidebar-toolbar-splitter"),t=this.pdfViewer.element.querySelector(".e-pv-sidebar-toolbar"),i=this.pdfViewer.element.querySelector(".e-pv-sidebar-content-container");0===(o=(n=this.pdfViewer.element.querySelector(".e-pv-toolbar")).getBoundingClientRect().height)&&(o=parseFloat(window.getComputedStyle(n).height)+1),this.pdfViewer.enableToolbar||(o=0),t.style.top=o+"px",i.style.top=o+"px",e.style.top=o+"px",t.style.height=this.getSideToolbarHeight(o),i.style.height=this.getSideToolbarHeight(o),e.style.height=this.getSideToolbarHeight(o),this.pdfViewerBase.viewerContainer.style.height=this.getSideToolbarHeight(o)}else{var n,o;e=this.pdfViewerBase.getElement("_sideBarToolbarSplitter");0===(o=(n=this.pdfViewerBase.getElement("_toolbarContainer")).getBoundingClientRect().height)&&(o=parseFloat(window.getComputedStyle(n).height)+1),this.sideBarToolbar.style.top=o+"px",this.sideBarContentContainer.style.top=o+"px",e.style.top=o+"px"}},e.prototype.getSideToolbarHeight=function(e){var t=this.pdfViewer.element.getBoundingClientRect().height;return 0!==t?t-e+"px":""},e.prototype.createCommentPanel=function(){this.commentPanelContainer=we("div",{id:this.pdfViewer.element.id+"_commantPanel",className:"e-pv-comment-panel"}),this.pdfViewerBase.mainContainer.appendChild(this.commentPanelContainer),this.pdfViewer.enableRtl?this.commentPanelContainer.style.left="0px":this.commentPanelContainer.style.right="0px",this.commentPanelContainer.style.bottom="0px",this.createCommentPanelTitleContainer(),this.commentPanelContainer.style.display="none",this.commentsContentContainer=we("div",{id:this.pdfViewer.element.id+"_commentscontentcontainer",className:"e-pv-comments-content-container"}),this.commentPanelContainer.appendChild(this.commentsContentContainer),this.commentPanelResizer=we("div",{id:this.pdfViewer.element.id+"_commentPanelResizer",className:"e-pv-comment-panel-resizer"}),this.pdfViewer.enableRtl?this.commentPanelResizer.classList.add("e-left"):this.commentPanelResizer.classList.add("e-right"),this.commentPanelResizer.style.display="none",this.commentPanelResizer.addEventListener("mousedown",this.commentPanelMouseDown),this.pdfViewerBase.mainContainer.appendChild(this.commentPanelResizer),this.createCommentPanelResizeIcon(),this.createFileElement(this.commentPanelContainer),this.createXFdfFileElement(this.commentPanelContainer)},e.prototype.createCommentPanelTitleContainer=function(){var e=we("div",{id:this.pdfViewer.element.id+"_commentPanelTitleContainer",className:"e-pv-comment-panel-title-container"}),t=we("div",{id:this.pdfViewer.element.id+"_commentPanelTitle",className:"e-pv-comment-panel-title",attrs:{tabindex:"-1"}});S()?this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Comments").then((function(e){t.innerText=e})):t.innerText=this.pdfViewer.localeObj.getConstant("Comments");var i=we("button",{id:this.pdfViewer.element.id+"_annotations_btn"});i.setAttribute("aria-label","annotation button"),i.setAttribute("type","button"),i.className="e-btn e-pv-tbar-btn e-pv-comment-panel-title-close-div e-btn";var n=we("span",{id:this.pdfViewer.element.id+"_annotation_more_icon",className:"e-pv-more-icon e-pv-icon"});if(i.appendChild(n),ge.isDevice&&!S()){var o=we("button");o.setAttribute("aria-label","annotation button"),o.setAttribute("type","button"),o.style.borderColor="transparent",o.style.paddingTop="11px",o.style.paddingBottom="11px",o.style.backgroundColor="#fafafa",o.addEventListener("click",this.closeCommentPanelContainer.bind(this)),t.style.left="37px";var s=we("span",{className:"e-pv-annotation-tools-close-icon e-pv-icon"});o.appendChild(s),e.appendChild(o)}e.appendChild(t),e.appendChild(i),this.commentPanelContainer.appendChild(e),this.createAnnotationContextMenu(),i.addEventListener("click",this.openAnnotationContextMenu.bind(this))},e.prototype.createCommentPanelResizeIcon=function(){this.commentPanelResizeIcon=we("div",{id:this.pdfViewer.element.id+"_commentPanel_resize",className:"e-pv-resize-icon e-pv-icon"}),this.setCommentPanelResizeIconTop(),this.commentPanelResizeIcon.style.position="absolute",this.commentPanelResizer.appendChild(this.commentPanelResizeIcon)},e.prototype.openAnnotationContextMenu=function(e){this.annotationMenuObj.open(e.clientY,e.clientX,e.currentTarget)},e.prototype.createAnnotationContextMenu=function(){this.annotationContextMenu=[{text:this.pdfViewer.localeObj.getConstant("Export Annotations")},{text:this.pdfViewer.localeObj.getConstant("Import Annotations")},{text:this.pdfViewer.localeObj.getConstant("Export XFDF")},{text:this.pdfViewer.localeObj.getConstant("Import XFDF")}];var e=we("ul",{id:this.pdfViewer.element.id+"_annotation_context_menu"});this.pdfViewer.element.appendChild(e),this.annotationMenuObj=new bd({target:"#"+this.pdfViewer.element.id+"_annotations_btn",items:this.annotationContextMenu,select:this.annotationMenuItemSelect.bind(this)}),this.pdfViewer.enableRtl&&(this.annotationMenuObj.enableRtl=!0),this.annotationMenuObj.appendTo(e),ge.isDevice&&!this.pdfViewer.enableDesktopMode?this.annotationMenuObj.animationSettings.effect="ZoomIn":this.annotationMenuObj.animationSettings.effect="SlideDown"},e.prototype.annotationMenuItemSelect=function(e){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){var t=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(t)}if(e.item)switch(e.item.text){case this.pdfViewer.localeObj.getConstant("Export Annotations"):this.pdfViewerBase.exportAnnotations(oa.Json);break;case this.pdfViewer.localeObj.getConstant("Import Annotations"):this.importAnnotationIconClick(e);break;case this.pdfViewer.localeObj.getConstant("Export XFDF"):this.pdfViewerBase.exportAnnotations(oa.Xfdf);break;case this.pdfViewer.localeObj.getConstant("Import XFDF"):this.importXFdfAnnotationIconClick(e)}},e.prototype.createFileElement=function(e){this.annotationInputElement=we("input",{id:this.pdfViewer.element.id+"_annotationUploadElement",styles:"position:fixed; left:-100em",attrs:{type:"file","aria-label":"upload elements"}}),this.annotationInputElement.setAttribute("accept",".json"),e.appendChild(this.annotationInputElement),this.annotationInputElement.addEventListener("change",this.loadImportAnnotation)},e.prototype.createXFdfFileElement=function(e){this.annotationXFdfInputElement=we("input",{id:this.pdfViewer.element.id+"_annotationXFdfUploadElement",styles:"position:fixed; left:-100em",attrs:{type:"file","aria-label":"upload elements"}}),this.annotationXFdfInputElement.setAttribute("accept",".xfdf"),e.appendChild(this.annotationXFdfInputElement),this.annotationXFdfInputElement.addEventListener("change",this.loadImportAnnotation)},e.prototype.importAnnotationIconClick=function(e){this.annotationInputElement.click()},e.prototype.importXFdfAnnotationIconClick=function(e){this.annotationXFdfInputElement.click()},e.prototype.closeCommentPanelContainer=function(){var e;e=this;var t=document.getElementById(this.pdfViewer.element.id+"_viewerContainer"),i=document.getElementById(this.pdfViewer.element.id+"_pageViewContainer"),n=document.getElementById(this.pdfViewer.element.id+"_commantPanel");n&&(n.style.display="none",e.commentPanelResizer&&(e.commentPanelResizer.style.display="none"),t&&(this.pdfViewer.enableRtl?t.style.left=e.getViewerContainerRight()+"px":t.style.right=e.getViewerContainerRight()+"px",t.style.width=e.pdfViewer.element.clientWidth-e.getViewerContainerLeft()-e.getViewerContainerRight()+"px",i.style.width=e.pdfViewerBase.viewerContainer.offsetWidth-e.getViewerContainerScrollbarWidth()+"px"),e.pdfViewerBase&&e.pdfViewerBase.updateZoomValue(),this.pdfViewer.annotation&&this.pdfViewer.annotation.textMarkupAnnotationModule&&this.pdfViewer.annotation.textMarkupAnnotationModule.showHideDropletDiv(!0),ge.isDevice&&!S()&&this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar&&(this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar.element.style.display="block",this.pdfViewer.toolbarModule.annotationToolbarModule.propertyToolbar&&(this.pdfViewer.toolbarModule.annotationToolbarModule.propertyToolbar.element.style.display="block")))},e.prototype.createNavigationPaneMobile=function(e){var t,i=this;if(this.isNavigationToolbarVisible=!0,this.toolbarElement=we("div",{id:this.pdfViewer.element.id+"_navigationToolbar",className:"e-pv-nav-toolbar"}),this.pdfViewerBase.viewerMainContainer.insertBefore(this.toolbarElement,this.pdfViewerBase.viewerContainer),"search"===e){var n='<div class="e-input-group e-pv-search-input-mobile" id="'+this.pdfViewer.element.id+'_search_input_container"><input class="e-input" type="text" placeholder="'+this.pdfViewer.localeObj.getConstant("Find in document")+'" id="'+this.pdfViewer.element.id+'_search_input"></input></div>';t=[{prefixIcon:"e-pv-backward-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Go Back"),id:this.pdfViewer.element.id+"_backward",click:this.goBackToToolbar.bind(this)},{template:n},{prefixIcon:"e-pv-search-icon e-pv-icon",id:this.pdfViewer.element.id+"_search_box-icon",click:function(){var e=i.pdfViewerBase.getElement("_search_box-icon").firstElementChild;e.classList.contains("e-pv-search-close")&&i.enableSearchItems(!1),i.pdfViewer.textSearchModule.searchButtonClick(e,i.searchInput)}},{prefixIcon:"e-pv-prev-search-icon e-pv-icon",id:this.pdfViewer.element.id+"_prev_occurrence",click:function(e){i.pdfViewer.textSearchModule.searchPrevious()}},{prefixIcon:"e-pv-next-search-icon e-pv-icon",id:this.pdfViewer.element.id+"_next_occurrence",click:function(e){i.pdfViewer.textSearchModule.searchNext()}}]}else t=[{prefixIcon:"e-pv-backward-icon e-pv-icon",id:this.pdfViewer.element.id+"_backward",click:this.goBackToToolbar.bind(this)},{text:this.pdfViewer.localeObj.getConstant("Bookmarks")}];this.toolbar=new Dr({items:t,width:"",height:"",overflowMode:"Popup"}),this.pdfViewer.enableRtl&&(this.toolbar.enableRtl=!0),this.toolbar.isStringTemplate=!0,this.toolbar.appendTo(this.toolbarElement),"search"===e?this.initiateSearchBox():this.initiateBookmarks()},e.prototype.initiateSearchBox=function(){var e=this;this.searchInput=this.pdfViewerBase.getElement("_search_input"),this.pdfViewer.textSearchModule.searchBtn=this.pdfViewerBase.getElement("_search_box-icon").firstElementChild,this.searchInput.addEventListener("keyup",(function(t){e.enableSearchItems(!0);e.searchInput.value;13===t.which?e.initiateTextSearch():e.pdfViewer.textSearchModule.resetVariables()})),this.pdfViewer.textSearchModule.searchInput=this.searchInput,this.setSearchInputWidth(),this.enableSearchItems(!1),this.searchInput.focus()},e.prototype.enableSearchItems=function(e){S()?this.pdfViewer._dotnetInstance.invokeMethodAsync("EnableSearchItems",e):(this.toolbar.enableItems(this.pdfViewerBase.getElement("_prev_occurrence").parentElement,e),this.toolbar.enableItems(this.pdfViewerBase.getElement("_next_occurrence").parentElement,e))},e.prototype.initiateBookmarks=function(){if(ge.isDevice&&!this.pdfViewer.enableDesktopMode){this.pdfViewerBase.mobileScrollerContainer.style.display="none";for(var e=document.querySelectorAll(".e-pv-mobile-annotation-toolbar"),t=0;t<e.length;t++)e[parseInt(t.toString(),10)].style.display="none"}var i=we("div",{id:this.pdfViewer.element.id+"_bookmarks_container",className:"e-pv-bookmark-container"});i.style.width="100%",i.style.height=this.pdfViewerBase.viewerContainer.style.height,this.pdfViewerBase.getElement("_viewerMainContainer").appendChild(i),this.pdfViewerBase.viewerContainer.style.display="none",this.isBookmarkListOpen=!0,this.pdfViewer.bookmarkViewModule.renderBookmarkContentMobile()},e.prototype.initiateTextSearch=function(){var e=this.searchInput.value;this.pdfViewer.textSearchModule.initiateSearch(e)},e.prototype.goBackToToolbar=function(){if(this.isNavigationToolbarVisible=!1,(!S()||ge.isDevice&&!this.pdfViewer.enableDesktopMode)&&S()||this.pdfViewer.textSearchModule.cancelTextSearch(),this.searchInput=null,0!==this.pdfViewer.bookmarkViewModule.childNavigateCount)this.pdfViewer.bookmarkViewModule.bookmarkList.back(),this.pdfViewer.bookmarkViewModule.childNavigateCount--;else{null!=this.toolbar&&(this.toolbar.destroy(),this.toolbar=null);var e=this.pdfViewerBase.getElement("_bookmarks_container");e&&(e.parentElement.removeChild(e),ge.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.pdfViewerBase.mobileScrollerContainer.style.display="")),this.toolbarElement&&null!=this.toolbarElement.parentElement&&this.toolbarElement.parentElement.removeChild(this.toolbarElement),this.pdfViewerBase.viewerContainer.style.display="block",this.isBookmarkListOpen=!1,S()?this.pdfViewerBase.onWindowResize():this.pdfViewer.toolbar.annotationToolbarModule.isMobileAnnotEnabled||this.pdfViewer.toolbarModule.showToolbar(!0)}},e.prototype.setSearchInputWidth=function(){var e=this.searchInput.parentElement,t=window.getComputedStyle(e.parentElement,null).getPropertyValue("padding-left");S()&&ge.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.toolbarElement=this.pdfViewerBase.getElement("_navigationToolbar"));var i=this.toolbarElement.clientWidth-this.getParentElementSearchBox("_backward").clientWidth-this.getParentElementSearchBox("_search_box-icon").clientWidth-this.getParentElementSearchBox("_prev_occurrence").clientWidth-this.getParentElementSearchBox("_next_occurrence").clientWidth-6;""!==t&&(i-=2*parseFloat(t)),e.style.width=i+"px"},e.prototype.getParentElementSearchBox=function(e){return this.pdfViewerBase.getElement(e).parentElement},e.prototype.createTooltipMobile=function(e){if(this.isTooltipCreated){if(this.toastObject){this.toastObject.title=e;var t=this.pdfViewerBase.getElement("_container_tooltip").firstElementChild;if(t)t.style.width="auto",t.firstElementChild.firstElementChild.textContent=e;else{this.isTooltipCreated=!1;var i=this.pdfViewerBase.getElement("_container_tooltip");this.toastObject&&this.toastObject.destroy(),i.parentElement.removeChild(i),this.toastObject=null,this.createMobileTooltip(e)}}}else this.createMobileTooltip(e)},e.prototype.createMobileTooltip=function(e){var t=we("div",{className:"e-pv-container-tooltip",id:this.pdfViewer.element.id+"_container_tooltip"});this.pdfViewer.element.appendChild(t),this.toastObject=new ph({title:e,target:this.pdfViewer.element,close:this.onTooltipClose.bind(this),position:{X:0,Y:0},animation:{hide:{duration:200,effect:"FadeOut"}}}),this.toastObject.appendTo(t);var i=.65*this.pdfViewer.element.clientHeight,n=(this.pdfViewer.element.clientWidth-t.clientWidth)/2;this.isTooltipCreated=!0,this.toastObject.show({position:{X:n,Y:i}});var o=t.firstElementChild;o&&(o.style.width="auto")},e.prototype.onTooltipClose=function(e){if(this.pdfViewer.textSearchModule){this.isTooltipCreated=!1;var t=this.pdfViewerBase.getElement("_container_tooltip");this.pdfViewer.textSearchModule.isMessagePopupOpened=!1,this.toastObject&&this.toastObject.destroy(),t.parentElement.removeChild(t),this.toastObject=null}},e.prototype.toolbarResize=function(){this.searchInput&&(this.searchInput.style.width="auto",this.setSearchInputWidth())},e.prototype.createSidebarToolBar=function(){if(S())this.thumbnailButton=this.pdfViewer.element.querySelector(".e-pv-thumbnail-view-button"),this.bookmarkButton=this.pdfViewer.element.querySelector(".e-pv-bookmark-button");else{this.thumbnailButton=we("button",{id:this.pdfViewer.element.id+"_thumbnail-view",attrs:{disabled:"disabled","aria-label":"Page Thumbnails",tabindex:"-1"}}),this.thumbnailButton.className="e-pv-tbar-btn e-pv-thumbnail-view-button e-btn",this.thumbnailButton.setAttribute("type","button");var e=we("span",{id:this.pdfViewer.element.id+"_thumbnail-view_icon",className:"e-pv-thumbnail-view-disable-icon e-pv-icon"});this.thumbnailButton.appendChild(e),new Xd({content:this.pdfViewer.localeObj.getConstant("Page Thumbnails"),opensOn:"Hover",beforeOpen:this.onTooltipBeforeOpen.bind(this)}).appendTo(this.thumbnailButton),this.bookmarkButton=we("button",{id:this.pdfViewer.element.id+"_bookmark",attrs:{disabled:"disabled","aria-label":"Bookmarks",tabindex:"-1"}}),this.bookmarkButton.setAttribute("type","button"),this.bookmarkButton.className="e-pv-tbar-btn e-pv-bookmark-button e-btn";var t=we("span",{id:this.pdfViewer.element.id+"_bookmark_icon",className:"e-pv-bookmark-disable-icon e-pv-icon"});this.bookmarkButton.appendChild(t),new Xd({content:this.pdfViewer.localeObj.getConstant("Bookmarks"),opensOn:"Hover",beforeOpen:this.onTooltipBeforeOpen.bind(this)}).appendTo(this.bookmarkButton),this.sideBarToolbar.appendChild(this.thumbnailButton),this.sideBarToolbar.appendChild(this.bookmarkButton)}this.thumbnailButton.addEventListener("click",this.sideToolbarOnClick),this.bookmarkButton.addEventListener("click",this.bookmarkButtonOnClick)},e.prototype.onTooltipBeforeOpen=function(e){this.pdfViewer.toolbarSettings.showTooltip||(e.cancel=!0)},e.prototype.enableThumbnailButton=function(){this.thumbnailButton&&(this.thumbnailButton.removeAttribute("disabled"),this.thumbnailButton.children[0].classList.remove("e-pv-thumbnail-view-disable-icon"),this.thumbnailButton.children[0].classList.add("e-pv-thumbnail-view-icon"))},e.prototype.enableBookmarkButton=function(){this.bookmarkButton&&(this.bookmarkButton.removeAttribute("disabled"),this.bookmarkButton.children[0].classList.remove("e-pv-bookmark-disable-icon"),this.bookmarkButton.children[0].classList.add("e-pv-bookmark-icon"))},e.prototype.createSidebarTitleCloseButton=function(){this.closeDiv=we("button",{id:this.pdfViewer.element.id+"_close_btn"}),this.closeDiv.setAttribute("aria-label","close button"),this.closeDiv.setAttribute("type","button"),this.closeDiv.className="e-btn e-pv-tbar-btn e-pv-title-close-div e-btn",this.pdfViewer.enableRtl?this.closeDiv.style.left="8px":this.closeDiv.style.left=this.closeButtonLeft+"px";var e=we("span",{id:this.pdfViewer.element.id+"_close_icon",className:"e-pv-title-close-icon e-pv-icon"});this.closeDiv.appendChild(e),this.sideBarTitleContainer.appendChild(this.closeDiv),this.closeDiv.addEventListener("click",this.sideToolbarOnClose)},e.prototype.createResizeIcon=function(){this.resizeIcon=we("div",{id:this.pdfViewer.element.id+"_resize",className:"e-pv-resize-icon e-pv-icon"}),this.setResizeIconTop(),this.resizeIcon.style.position="absolute",this.resizeIcon.addEventListener("click",this.sideToolbarOnClose),this.resizeIcon.addEventListener("mouseover",this.resizeIconMouseOver),this.sideBarResizer.appendChild(this.resizeIcon)},e.prototype.setResizeIconTop=function(){this.sideBarToolbar&&this.sideBarToolbar.clientHeight&&""===this.resizeIcon.style.top&&(this.resizeIcon.style.top=this.sideBarToolbar.clientHeight/2+"px")},e.prototype.setCommentPanelResizeIconTop=function(){this.commentPanelContainer&&this.commentPanelContainer.clientHeight&&this.commentPanelResizeIcon&&""===this.commentPanelResizeIcon.style.top&&(this.commentPanelResizeIcon.style.top=this.commentPanelContainer.clientHeight/2+"px")},Object.defineProperty(e.prototype,"outerContainerWidth",{get:function(){return this.mainContainerWidth||(this.mainContainerWidth=this.pdfViewerBase.mainContainer.clientWidth),this.mainContainerWidth},enumerable:!0,configurable:!0}),e.prototype.getViewerContainerScrollbarWidth=function(){return this.pdfViewerBase.viewerContainer.offsetWidth+this.pdfViewerBase.viewerContainer.offsetLeft-(this.pdfViewerBase.viewerContainer.clientWidth+this.pdfViewerBase.viewerContainer.offsetLeft)},Object.defineProperty(e.prototype,"sideToolbarWidth",{get:function(){return this.sideBarToolbar?this.sideBarToolbar.clientWidth:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sideBarContentContainerWidth",{get:function(){return this.sideBarContentContainer?this.sideBarContentContainer.clientWidth:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commentPanelContainerWidth",{get:function(){return this.commentPanelContainer?this.commentPanelContainer.offsetWidth:0},enumerable:!0,configurable:!0}),e.prototype.updateViewerContainerOnClose=function(){var e;(e=this).sideBarContentContainer&&(e.sideBarContentContainer.style.display="none",this.pdfViewer.enableRtl?e.pdfViewerBase.viewerContainer.style.right=e.sideToolbarWidth+"px":e.pdfViewerBase.viewerContainer.style.left=e.sideToolbarWidth+"px",e.pdfViewerBase.viewerContainer.style.width=e.pdfViewer.element.clientWidth-e.sideToolbarWidth-e.getViewerContainerRight()+"px",e.pdfViewerBase.pageContainer.style.width=e.pdfViewerBase.viewerContainer.offsetWidth-e.getViewerContainerScrollbarWidth()+"px",this.restrictUpdateZoomValue&&e.pdfViewerBase.updateZoomValue())},e.prototype.updateViewerContainerOnExpand=function(){var e;(e=this).sideBarContentContainer&&(e.sideBarContentContainer.style.display="block",this.pdfViewer.enableRtl?e.pdfViewerBase.viewerContainer.style.right=e.getViewerContainerLeft()+"px":e.pdfViewerBase.viewerContainer.style.left=e.getViewerContainerLeft()+"px",e.pdfViewerBase.viewerContainer.style.width=e.pdfViewer.element.clientWidth-this.getViewerContainerLeft()-this.getViewerContainerRight()+"px",e.pdfViewerBase.pageContainer.style.width=e.pdfViewerBase.viewerContainer.clientWidth+"px",e.pdfViewerBase.updateZoomValue(),e.pdfViewer.enableThumbnail&&e.pdfViewer.thumbnailViewModule.gotoThumbnailImage(e.pdfViewerBase.currentPageNumber-1))},e.prototype.getViewerContainerLeft=function(){return this.sideToolbarWidth?this.sideToolbarWidth+this.sideBarContentContainerWidth:0},e.prototype.getViewerContainerRight=function(){return this.commentPanelResizer?this.commentPanelContainerWidth+this.commentPanelResizer.clientWidth:0},e.prototype.getViewerMainContainerWidth=function(){return this.pdfViewer.element.clientWidth-this.sideToolbarWidth},e.prototype.setThumbnailSelectionIconTheme=function(){this.thumbnailButton&&(this.thumbnailButton.children[0].classList.remove("e-pv-thumbnail-view-icon"),this.thumbnailButton.children[0].classList.add("e-pv-thumbnail-view-selection-icon"),this.thumbnailButton.classList.add("e-pv-thumbnail-view-button-selection"))},e.prototype.removeThumbnailSelectionIconTheme=function(){this.thumbnailButton&&this.thumbnailButton.children[0]&&(this.thumbnailButton.children[0].classList.add("e-pv-thumbnail-view-icon"),this.thumbnailButton.children[0].classList.remove("e-pv-thumbnail-view-selection-icon"),this.thumbnailButton.classList.remove("e-pv-thumbnail-view-button-selection"))},e.prototype.resetThumbnailIcon=function(){this.thumbnailButton&&this.thumbnailButton.children[0]&&(this.thumbnailButton.children[0].classList.remove("e-pv-thumbnail-view-icon"),this.thumbnailButton.children[0].classList.add("e-pv-thumbnail-view-disable-icon"))},e.prototype.resetThumbnailView=function(){this.sideBarContentContainer&&(this.sideBarContentContainer.style.display="none",this.pdfViewer.enableRtl?this.pdfViewerBase.viewerContainer.style.left="1px":this.pdfViewerBase.viewerContainer.style.left=this.sideToolbarWidth+"px",this.pdfViewerBase.viewerContainer.style.width=this.pdfViewer.element.clientWidth-this.sideToolbarWidth-this.getViewerContainerRight()+"px",this.pdfViewerBase.pageContainer&&(this.pdfViewerBase.pageContainer.style.width=this.pdfViewerBase.viewerContainer.clientWidth+"px"),this.thumbnailButton.setAttribute("disabled","disabled"),this.removeThumbnailSelectionIconTheme(),this.resetThumbnailIcon())},e.prototype.setBookmarkSelectionIconTheme=function(){this.bookmarkButton&&(this.bookmarkButton.children[0].classList.remove("e-pv-bookmark-icon"),this.bookmarkButton.children[0].classList.add("e-pv-bookmark-selection-icon"),this.bookmarkButton.classList.add("e-pv-bookmark-button-selection"))},e.prototype.removeBookmarkSelectionIconTheme=function(){this.bookmarkButton&&this.bookmarkButton.children[0]&&(this.bookmarkButton.children[0].classList.add("e-pv-bookmark-icon"),this.bookmarkButton.children[0].classList.remove("e-pv-bookmark-selection-icon"),this.bookmarkButton.classList.remove("e-pv-bookmark-button-selection"))},e.prototype.sideToolbarOnMouseup=function(e){e.target===this.sideBarToolbar&&this.pdfViewerBase.focusViewerContainer()},e.prototype.sideBarTitleOnMouseup=function(e){this.pdfViewerBase.focusViewerContainer()},e.prototype.openBookmarkcontentInitially=function(){if(this,document.getElementById(this.pdfViewer.element.id+"_thumbnail_view")&&(document.getElementById(this.pdfViewer.element.id+"_thumbnail_view").style.display="none"),this.removeThumbnailSelectionIconTheme(),this.sideBarTitle.textContent=this.pdfViewer.localeObj.getConstant("Bookmarks"),this.sideBarContent.setAttribute("aria-label","Bookmark View Panel"),this.pdfViewer.bookmarkViewModule.renderBookmarkcontent(),this.sideBarContentContainer&&("none"!==this.sideBarContentContainer.style.display?this.isThumbnailOpen?(this.setBookmarkSelectionIconTheme(),this.isBookmarkOpen=!0,this.updateViewerContainerOnExpand()):(this.removeBookmarkSelectionIconTheme(),this.isBookmarkOpen=!1,this.updateViewerContainerOnClose()):(this.sideBarContent.focus(),this.setBookmarkSelectionIconTheme(),this.isBookmarkOpen=!0,this.updateViewerContainerOnExpand())),this.isThumbnailOpen=!1,this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){var e=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(e)}},e.prototype.disableBookmarkButton=function(){this.sideBarContentContainer&&this.bookmarkButton&&this.bookmarkButton.children[0]&&(this.sideBarContentContainer.style.display="none",this.bookmarkButton.setAttribute("disabled","disabled"),this.bookmarkButton.children[0].classList.add("e-pv-bookmark-disable-icon"))},e.prototype.clear=function(){ge.isDevice||(this.removeBookmarkSelectionIconTheme(),this.removeThumbnailSelectionIconTheme(),this.closeCommentPanelContainer()),this.commentsContentContainer&&(this.commentsContentContainer.innerHTML="")},e.prototype.destroy=function(){var e=this.bookmarkButton,t=this.thumbnailButton;if(e&&e.ej2_instances&&e.ej2_instances.length>0&&e.ej2_instances[0].destroy(),t&&t.ej2_instances&&t.ej2_instances.length>0&&t.ej2_instances[0].destroy(),this.annotationMenuObj){var i=this.annotationMenuObj.element;i&&i.ej2_instances&&i.ej2_instances.length>0&&this.annotationMenuObj.destroy()}},e.prototype.getModuleName=function(){return"NavigationPane"},e}(),wh=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),bh=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Sh="e-input-group-icon",Ch="e-spin-up",xh="e-error",Mh="increment",Ih="decrement",Th=new RegExp("^(-)?(\\d*)$"),Ah="e-input-focus",kh=["title","style","class"],Vh=0,Eh=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.isVue=!1,n.preventChange=!1,n.isAngular=!1,n.isDynamicChange=!1,n.numericOptions=t,n}return wh(t,e),t.prototype.preRender=function(){this.isPrevFocused=!1,this.decimalSeparator=".",this.intRegExp=new RegExp("/^(-)?(d*)$/"),this.isCalled=!1;var e=l("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),Se([this.cloneElement],["e-control","e-numerictextbox","e-lib"]),this.angularTagName=null,this.formEle=Fe(this.element,"form"),"EJS-NUMERICTEXTBOX"===this.element.tagName){this.angularTagName=this.element.tagName;for(var t=this.createElement("input"),i=0;i<this.element.attributes.length;i++){var n=this.element.attributes[i].nodeName;"id"!==n&&"class"!==n?(t.setAttribute(this.element.attributes[i].nodeName,this.element.attributes[i].nodeValue),t.innerHTML=this.element.innerHTML):"class"===n&&t.setAttribute(n,this.element.className.split(" ").filter((function(e){return 0!==e.indexOf("ng-")})).join(" "))}this.element.hasAttribute("name")&&this.element.removeAttribute("name"),this.element.classList.remove("e-control","e-numerictextbox"),this.element.appendChild(t),this.element=t,d("ej2_instances",e,this.element)}Ve(this.element,{role:"spinbutton",tabindex:"0",autocomplete:"off"});var o={incrementTitle:"Increment value",decrementTitle:"Decrement value",placeholder:this.placeholder};this.l10n=new qt("numerictextbox",o,this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",y("numerictextbox")),this.isValidState=!0,this.inputStyle=null,this.inputName=null,this.cultureInfo={},this.initCultureInfo(),this.initCultureFunc(),this.prevValue=this.value,this.updateHTMLAttrToElement(),this.checkAttributes(!1),this.formEle&&(this.inputEleValue=this.value),this.validateMinMax(),this.validateStep(),null===this.placeholder&&this.updatePlaceholder()},t.prototype.render=function(){"input"===this.element.tagName.toLowerCase()&&(this.createWrapper(),this.showSpinButton&&this.spinBtnCreation(),this.setElementWidth(this.width),this.container.classList.contains("e-input-group")||this.container.classList.add("e-input-group"),this.changeValue(null===this.value||isNaN(this.value)?null:this.strictMode?this.trimValue(this.value):this.value),this.wireEvents(),null===this.value||isNaN(this.value)||this.decimals&&this.setProperties({value:this.roundNumber(this.value,this.decimals)},!0),(this.element.getAttribute("value")||this.value)&&(this.element.setAttribute("value",this.element.value),this.hiddenInput.setAttribute("value",this.hiddenInput.value)),this.elementPrevValue=this.element.value,this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),!m(Fe(this.element,"fieldset"))&&Fe(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete())},t.prototype.checkAttributes=function(e){for(var t=0,i=e?m(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","step","disabled","readonly","style","name","placeholder"];t<i.length;t++){var n=i[t];if(!m(this.element.getAttribute(n)))switch(n){case"disabled":if(m(this.numericOptions)||void 0===this.numericOptions.enabled||e){var o="disabled"!==this.element.getAttribute(n)&&""!==this.element.getAttribute(n)&&"true"!==this.element.getAttribute(n);this.setProperties({enabled:o},!e)}break;case"readonly":if(m(this.numericOptions)||void 0===this.numericOptions.readonly||e){var s="readonly"===this.element.getAttribute(n)||""===this.element.getAttribute(n)||"true"===this.element.getAttribute(n);this.setProperties({readonly:s},!e)}break;case"placeholder":(m(this.numericOptions)||void 0===this.numericOptions.placeholder||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"value":if(m(this.numericOptions)||void 0===this.numericOptions.value||e){var a=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));this.setProperties(d(n,a,{}),!e)}break;case"min":if(m(this.numericOptions)||void 0===this.numericOptions.min||e){var r=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));null===r||isNaN(r)||this.setProperties(d(n,r,{}),!e)}break;case"max":if(m(this.numericOptions)||void 0===this.numericOptions.max||e){var l=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));null===l||isNaN(l)||this.setProperties(d(n,l,{}),!e)}break;case"step":if(m(this.numericOptions)||void 0===this.numericOptions.step||e){var h=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));null===h||isNaN(h)||this.setProperties(d(n,h,{}),!e)}break;case"style":this.inputStyle=this.element.getAttribute(n);break;case"name":this.inputName=this.element.getAttribute(n);break;default:var p=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));(null!==p&&!isNaN(p)||"value"===n)&&this.setProperties(d(n,p,{}),!0)}}},t.prototype.updatePlaceholder=function(){this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0)},t.prototype.initCultureFunc=function(){this.instance=new ee(this.locale)},t.prototype.initCultureInfo=function(){this.cultureInfo.format=this.format,null!==l("currency",this)&&(d("currency",this.currency,this.cultureInfo),this.setProperties({currencyCode:this.currency},!0))},t.prototype.createWrapper=function(){var e=this.cssClass;m(this.cssClass)||""===this.cssClass||(e=this.getNumericValidClassList(this.cssClass));var t=rs.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:e,enableRtl:this.enableRtl,showClearButton:this.showClearButton,enabled:this.enabled}},this.createElement);this.inputWrapper=t,this.container=t.container,this.container.setAttribute("class","e-control-wrapper e-numeric "+this.container.getAttribute("class")),this.updateHTMLAttrToWrapper(),this.readonly&&Ve(this.element,{"aria-readonly":"true"}),this.hiddenInput=this.createElement("input",{attrs:{type:"text",validateHidden:"true",class:"e-numeric-hidden"}}),this.inputName=null!==this.inputName?this.inputName:this.element.id,this.element.removeAttribute("name"),Ve(this.hiddenInput,{name:this.inputName}),this.container.insertBefore(this.hiddenInput,this.container.childNodes[1]),this.updateDataAttribute(!1),null!==this.inputStyle&&Ve(this.container,{style:this.inputStyle})},t.prototype.updateDataAttribute=function(e){var t={};if(e)t=this.htmlAttributes;else for(var i=0;i<this.element.attributes.length;i++)t[this.element.attributes[i].name]=this.element.getAttribute(this.element.attributes[i].name);for(var n=0,o=Object.keys(t);n<o.length;n++){var s=o[n];0===s.indexOf("data")&&this.hiddenInput.setAttribute(s,t[""+s])}},t.prototype.updateHTMLAttrToElement=function(){if(!m(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];kh.indexOf(i)<0&&this.element.setAttribute(i,this.htmlAttributes[""+i])}},t.prototype.updateCssClass=function(e,t){rs.setCssClass(this.getNumericValidClassList(e),[this.container],this.getNumericValidClassList(t))},t.prototype.getNumericValidClassList=function(e){var t=e;return m(e)||""===e||(t=e.replace(/\s+/g," ").trim()),t},t.prototype.updateHTMLAttrToWrapper=function(){if(!m(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if(kh.indexOf(i)>-1)if("class"===i){var n=this.getNumericValidClassList(this.htmlAttributes[""+i]);""!==n&&be([this.container],n.split(" "))}else if("style"===i){var o=this.container.getAttribute(i);o=m(o)?this.htmlAttributes[""+i]:o+this.htmlAttributes[""+i],this.container.setAttribute(i,o)}else this.container.setAttribute(i,this.htmlAttributes[""+i])}},t.prototype.setElementWidth=function(e){m(e)||("number"===typeof e?this.container.style.width=b(e):"string"===typeof e&&(this.container.style.width=e.match(/px|%|em/)?e:b(e)))},t.prototype.spinBtnCreation=function(){this.spinDown=rs.appendSpan(Sh+" e-spin-down",this.container,this.createElement),Ve(this.spinDown,{title:this.l10n.getConstant("decrementTitle")}),this.spinUp=rs.appendSpan(Sh+" "+Ch,this.container,this.createElement),Ve(this.spinUp,{title:this.l10n.getConstant("incrementTitle")}),this.wireSpinBtnEvents()},t.prototype.validateMinMax=function(){("number"!==typeof this.min||isNaN(this.min))&&this.setProperties({min:-Number.MAX_VALUE},!0),("number"!==typeof this.max||isNaN(this.max))&&this.setProperties({max:Number.MAX_VALUE},!0),null!==this.decimals&&(this.min!==-Number.MAX_VALUE&&this.setProperties({min:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.min))},!0),this.max!==Number.MAX_VALUE&&this.setProperties({max:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.max))},!0)),this.setProperties({min:this.min>this.max?this.max:this.min},!0),this.min!==-Number.MAX_VALUE&&Ve(this.element,{"aria-valuemin":this.min.toString()}),this.max!==Number.MAX_VALUE&&Ve(this.element,{"aria-valuemax":this.max.toString()})},t.prototype.formattedValue=function(e,t){return this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(t)},t.prototype.validateStep=function(){null!==this.decimals&&this.setProperties({step:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.step))},!0)},t.prototype.action=function(e,t){this.isInteract=!0;var i=this.isFocused?this.instance.getNumberParser({format:"n"})(this.element.value):this.value;this.changeValue(this.performAction(i,this.step,e)),this.raiseChangeEvent(t)},t.prototype.checkErrorClass=function(){this.isValidState?Se([this.container],xh):be([this.container],xh),Ve(this.element,{"aria-invalid":this.isValidState?"false":"true"})},t.prototype.bindClearEvent=function(){this.showClearButton&&ye.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)},t.prototype.resetHandler=function(e){e.preventDefault(),this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")&&!this.inputWrapper.container.classList.contains("e-static-clear")||this.clear(e),this.isInteract=!0,this.raiseChangeEvent(e)},t.prototype.clear=function(e){if(this.setProperties({value:null},!0),this.setElementValue(""),this.hiddenInput.value="",Fe(this.element,"form")){var t=this.element.nextElementSibling,i=document.createEvent("KeyboardEvent");i.initEvent("keyup",!1,!0),t.dispatchEvent(i)}},t.prototype.resetFormHandler=function(){"EJS-NUMERICTEXTBOX"===this.element.tagName?this.updateValue(null):this.updateValue(this.inputEleValue)},t.prototype.setSpinButton=function(){m(this.spinDown)||Ve(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),m(this.spinUp)||Ve(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")})},t.prototype.wireEvents=function(){ye.add(this.element,"focus",this.focusHandler,this),ye.add(this.element,"blur",this.focusOutHandler,this),ye.add(this.element,"keydown",this.keyDownHandler,this),ye.add(this.element,"keyup",this.keyUpHandler,this),ye.add(this.element,"input",this.inputHandler,this),ye.add(this.element,"keypress",this.keyPressHandler,this),ye.add(this.element,"change",this.changeHandler,this),ye.add(this.element,"paste",this.pasteHandler,this),this.enabled&&(this.bindClearEvent(),this.formEle&&ye.add(this.formEle,"reset",this.resetFormHandler,this))},t.prototype.wireSpinBtnEvents=function(){ye.add(this.spinUp,ge.touchStartEvent,this.mouseDownOnSpinner,this),ye.add(this.spinDown,ge.touchStartEvent,this.mouseDownOnSpinner,this),ye.add(this.spinUp,ge.touchEndEvent,this.mouseUpOnSpinner,this),ye.add(this.spinDown,ge.touchEndEvent,this.mouseUpOnSpinner,this),ye.add(this.spinUp,ge.touchMoveEvent,this.touchMoveOnSpinner,this),ye.add(this.spinDown,ge.touchMoveEvent,this.touchMoveOnSpinner,this)},t.prototype.unwireEvents=function(){ye.remove(this.element,"focus",this.focusHandler),ye.remove(this.element,"blur",this.focusOutHandler),ye.remove(this.element,"keyup",this.keyUpHandler),ye.remove(this.element,"input",this.inputHandler),ye.remove(this.element,"keydown",this.keyDownHandler),ye.remove(this.element,"keypress",this.keyPressHandler),ye.remove(this.element,"change",this.changeHandler),ye.remove(this.element,"paste",this.pasteHandler),this.formEle&&ye.remove(this.formEle,"reset",this.resetFormHandler)},t.prototype.unwireSpinBtnEvents=function(){ye.remove(this.spinUp,ge.touchStartEvent,this.mouseDownOnSpinner),ye.remove(this.spinDown,ge.touchStartEvent,this.mouseDownOnSpinner),ye.remove(this.spinUp,ge.touchEndEvent,this.mouseUpOnSpinner),ye.remove(this.spinDown,ge.touchEndEvent,this.mouseUpOnSpinner),ye.remove(this.spinUp,ge.touchMoveEvent,this.touchMoveOnSpinner),ye.remove(this.spinDown,ge.touchMoveEvent,this.touchMoveOnSpinner)},t.prototype.changeHandler=function(e){e.stopPropagation(),this.element.value.length||this.setProperties({value:null},!0);var t=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(t,e)},t.prototype.raiseChangeEvent=function(e){if(this.prevValue!==this.value){var t={};this.changeEventArgs={value:this.value,previousValue:this.prevValue,isInteracted:this.isInteract,isInteraction:this.isInteract,event:e},e&&(this.changeEventArgs.event=e),void 0===this.changeEventArgs.event&&(this.changeEventArgs.isInteracted=!1,this.changeEventArgs.isInteraction=!1),u(t,this.changeEventArgs),this.prevValue=this.value,this.isInteract=!1,this.elementPrevValue=this.element.value,this.preventChange=!1,this.trigger("change",t)}},t.prototype.pasteHandler=function(){var e=this;if(this.enabled&&!this.readonly){var t=this.element.value;setTimeout((function(){e.numericRegex().test(e.element.value)||e.setElementValue(t)}))}},t.prototype.preventHandler=function(){var e=this,t=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);setTimeout((function(){if(e.element.selectionStart>0){var i=e.element.selectionStart,n=e.element.selectionStart-1,o=e.element.value.split(""),s=l("decimal",te(e.locale)),a=s.charCodeAt(0);" "===e.element.value[n]&&e.element.selectionStart>0&&!t?(m(e.prevVal)?e.element.value=e.element.value.trim():0!==n?e.element.value=e.prevVal:0===n&&(e.element.value=e.element.value.trim()),e.element.setSelectionRange(n,n)):isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&45!==e.element.value[e.element.selectionStart-1].charCodeAt(0)?(o.indexOf(e.element.value[e.element.selectionStart-1])!==o.lastIndexOf(e.element.value[e.element.selectionStart-1])&&e.element.value[e.element.selectionStart-1].charCodeAt(0)===a||e.element.value[e.element.selectionStart-1].charCodeAt(0)!==a)&&(e.element.value=e.element.value.substring(0,n)+e.element.value.substring(i,e.element.value.length),e.element.setSelectionRange(n,n),isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&e.element.selectionStart>0&&e.element.value.length&&e.preventHandler()):isNaN(parseFloat(e.element.value[e.element.selectionStart-2]))&&e.element.selectionStart>1&&45!==e.element.value[e.element.selectionStart-2].charCodeAt(0)&&(o.indexOf(e.element.value[e.element.selectionStart-2])!==o.lastIndexOf(e.element.value[e.element.selectionStart-2])&&e.element.value[e.element.selectionStart-2].charCodeAt(0)===a||e.element.value[e.element.selectionStart-2].charCodeAt(0)!==a)&&(e.element.setSelectionRange(n,n),e.nextEle=e.element.value[e.element.selectionStart],e.cursorPosChanged=!0,e.preventHandler()),!0===e.cursorPosChanged&&e.element.value[e.element.selectionStart]===e.nextEle&&isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&(e.element.setSelectionRange(e.element.selectionStart+1,e.element.selectionStart+1),e.cursorPosChanged=!1,e.nextEle=null),""===e.element.value.trim()&&e.element.setSelectionRange(0,0),e.element.selectionStart>0&&(45===e.element.value[e.element.selectionStart-1].charCodeAt(0)&&e.element.selectionStart>1&&(m(e.prevVal)?e.element.value=e.element.value:e.element.value=e.prevVal,e.element.setSelectionRange(e.element.selectionStart,e.element.selectionStart)),e.element.value[e.element.selectionStart-1]===s&&0===e.decimals&&e.validateDecimalOnType&&(e.element.value=e.element.value.substring(0,n)+e.element.value.substring(i,e.element.value.length))),e.prevVal=e.element.value}}))},t.prototype.keyUpHandler=function(){if(this.enabled&&!this.readonly){!(!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))&&ge.isDevice&&this.preventHandler();var e=this.instance.getNumberParser({format:"n"})(this.element.value);if(e=null===e||isNaN(e)?null:e,this.hiddenInput.value=e||0===e?e.toString():null,Fe(this.element,"form")){var t=this.element.nextElementSibling,i=document.createEvent("KeyboardEvent");i.initEvent("keyup",!1,!0),t.dispatchEvent(i)}}},t.prototype.inputHandler=function(e){if(this.enabled&&!this.readonly){var t=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);if((navigator.userAgent.toLowerCase().indexOf("firefox")>-1||t)&&ge.isDevice&&this.preventHandler(),this.isAngular&&this.element.value!==l("decimal",te(this.locale))&&this.element.value!==l("minusSign",te(this.locale))){var i=this.instance.getNumberParser({format:"n"})(this.element.value);i=isNaN(i)?null:i,this.localChange({value:i}),this.preventChange=!0}if(this.isVue){var n=this.instance.getNumberParser({format:"n"})(this.element.value),o=this.instance.getNumberParser({format:"n"})(this.elementPrevValue);(new RegExp("[^0-9]+$").test(this.element.value)||(-1!==this.elementPrevValue.indexOf(".")||-1!==this.elementPrevValue.indexOf("-"))&&"0"===this.element.value[this.element.value.length-1])&&(n=this.value);var s={event:e,value:null===n||isNaN(n)?null:n,previousValue:null===o||isNaN(o)?null:o};this.preventChange=!0,this.elementPrevValue=this.element.value,this.trigger("input",s)}}},t.prototype.keyDownHandler=function(e){if(!this.readonly)switch(e.keyCode){case 38:e.preventDefault(),this.action(Mh,e);break;case 40:e.preventDefault(),this.action(Ih,e)}},t.prototype.performAction=function(e,t,i){(null===e||isNaN(e))&&(e=0);var n=i===Mh?e+t:e-t;return n=this.correctRounding(e,t,n),this.strictMode?this.trimValue(n):n},t.prototype.correctRounding=function(e,t,i){var n=new RegExp("[,.](.*)"),o=n.test(e.toString()),s=n.test(t.toString());if(o||s){var a=o?n.exec(e.toString())[0].length:0,r=s?n.exec(t.toString())[0].length:0,l=Math.max(a,r);return this.roundValue(i,l)}return i},t.prototype.roundValue=function(e,t){t=t||0;var i=Math.pow(10,t);return e*=i,Math.round(e)/i},t.prototype.updateValue=function(e,t){t&&(this.isInteract=!0),null===e||isNaN(e)||this.decimals&&(e=this.roundNumber(e,this.decimals)),this.changeValue(null===e||isNaN(e)?null:this.strictMode?this.trimValue(e):e),this.isDynamicChange||this.raiseChangeEvent(t)},t.prototype.updateCurrency=function(e,t){d(e,t,this.cultureInfo),this.updateValue(this.value)},t.prototype.changeValue=function(e){if(e||0===e){var t=this.getNumberOfDecimals(e);this.setProperties({value:this.roundNumber(e,t)},!0)}else e=null,this.setProperties({value:e},!0);this.modifyText(),this.strictMode||this.validateState()},t.prototype.modifyText=function(){if(this.value||0===this.value){var e=this.formatNumber(),t=this.isFocused?e:this.instance.getNumberFormat(this.cultureInfo)(this.value);this.setElementValue(t),Ve(this.element,{"aria-valuenow":e}),this.hiddenInput.value=this.value.toString(),null!==this.value&&this.serverDecimalSeparator&&(this.hiddenInput.value=this.hiddenInput.value.replace(".",this.serverDecimalSeparator))}else this.setElementValue(""),this.element.removeAttribute("aria-valuenow"),this.hiddenInput.value=null},t.prototype.setElementValue=function(e,t){rs.setValue(e,t||this.element,this.floatLabelType,this.showClearButton)},t.prototype.validateState=function(){this.isValidState=!0,(this.value||0===this.value)&&(this.isValidState=!(this.value>this.max||this.value<this.min)),this.checkErrorClass()},t.prototype.getNumberOfDecimals=function(e){var t,i=new RegExp("[eE][-+]?([0-9]+)"),n=e.toString();if(i.test(n)){var o=i.exec(n);m(o)||(n=e.toFixed(Math.min(parseInt(o[1],10),20)))}var s=n.split(".")[1];return t=s&&s.length?s.length:0,null!==this.decimals&&(t=t<this.decimals?t:this.decimals),t},t.prototype.formatNumber=function(){var e=this.getNumberOfDecimals(this.value);return this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(this.value)},t.prototype.trimValue=function(e){return e>this.max?this.max:e<this.min?this.min:e},t.prototype.roundNumber=function(e,t){var i=e,n=t||0,o=i.toString().split("e"),s=(i=Math.round(Number(o[0]+"e"+(o[1]?Number(o[1])+n:n)))).toString().split("e");return i=Number(s[0]+"e"+(s[1]?Number(s[1])-n:-n)),Number(i.toFixed(n))},t.prototype.cancelEvent=function(e){return e.preventDefault(),!1},t.prototype.keyPressHandler=function(e){if(!this.enabled||this.readonly)return!0;if(!ge.isDevice&&"11.0"===ge.info.version&&13===e.keyCode){var t=this.instance.getNumberParser({format:"n"})(this.element.value);return this.updateValue(t,e),!0}if(0===e.which||e.metaKey||e.ctrlKey||8===e.keyCode||13===e.keyCode)return!0;var i=String.fromCharCode(e.which),n=l("decimal",te(this.locale)),o="NumpadDecimal"===e.code&&i!==n;o&&(i=n);var s=this.element.value;if(s=s.substring(0,this.element.selectionStart)+i+s.substring(this.element.selectionEnd),this.numericRegex().test(s)){if(o){var a=this.element.selectionStart+1;this.element.value=s,this.element.setSelectionRange(a,a),e.preventDefault(),e.stopPropagation()}return!0}return e.preventDefault(),e.stopPropagation(),!1},t.prototype.numericRegex=function(){var e=l("decimal",te(this.locale)),t="*";return"."===e&&(e="\\"+e),0===this.decimals&&this.validateDecimalOnType?Th:(this.decimals&&this.validateDecimalOnType&&(t="{0,"+this.decimals+"}"),new RegExp("^(-)?(((\\d+("+e+"\\d"+t+")?)|("+e+"\\d"+t+")))?$"))},t.prototype.mouseWheel=function(e){var t;e.preventDefault();var i=e;i.wheelDelta?t=i.wheelDelta/120:i.detail&&(t=-i.detail/3),t>0?this.action(Mh,e):t<0&&this.action(Ih,e),this.cancelEvent(e)},t.prototype.focusHandler=function(e){var t=this;if(clearTimeout(Vh),this.focusEventArgs={event:e,value:this.value,container:this.container},this.trigger("focus",this.focusEventArgs),this.enabled&&!this.readonly){if(this.isFocused=!0,Se([this.container],xh),this.prevValue=this.value,this.value||0===this.value){var i=this.formatNumber();if(this.setElementValue(i),!this.isPrevFocused)if(ge.isDevice||"11.0"!==ge.info.version){var n=ge.isDevice&&ge.isIos?600:0;Vh=setTimeout((function(){t.element.setSelectionRange(0,i.length)}),n)}else this.element.setSelectionRange(0,i.length)}ge.isDevice||ye.add(this.element,"mousewheel DOMMouseScroll",this.mouseWheel,this)}},t.prototype.focusOutHandler=function(e){var t=this;if(this.blurEventArgs={event:e,value:this.value,container:this.container},this.trigger("blur",this.blurEventArgs),this.enabled&&!this.readonly){if(this.isPrevFocused){if(e.preventDefault(),ge.isDevice){var i=this.element.value;this.element.focus(),this.isPrevFocused=!1;var n=this.element;setTimeout((function(){t.setElementValue(i,n)}),200)}}else{this.isFocused=!1,this.element.value.length||this.setProperties({value:null},!0);var o=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(o),ge.isDevice||ye.remove(this.element,"mousewheel DOMMouseScroll",this.mouseWheel)}if(Fe(this.element,"form")){var s=this.element.nextElementSibling,a=document.createEvent("FocusEvent");a.initEvent("focusout",!1,!0),s.dispatchEvent(a)}}},t.prototype.mouseDownOnSpinner=function(e){var t=this;if(this.isFocused&&(this.isPrevFocused=!0,e.preventDefault()),this.getElementData(e)){this.getElementData(e);var i=e.currentTarget,n=i.classList.contains(Ch)?Mh:Ih;ye.add(i,"mouseleave",this.mouseUpClick,this),this.timeOut=setInterval((function(){t.isCalled=!0,t.action(n,e)}),150),ye.add(document,"mouseup",this.mouseUpClick,this)}},t.prototype.touchMoveOnSpinner=function(e){var t;if("touchmove"===e.type){var i=e.touches;t=i.length&&document.elementFromPoint(i[0].pageX,i[0].pageY)}else t=document.elementFromPoint(e.clientX,e.clientY);t.classList.contains(Sh)||clearInterval(this.timeOut)},t.prototype.mouseUpOnSpinner=function(e){if(this.prevValue=this.value,this.isPrevFocused&&(this.element.focus(),ge.isDevice||(this.isPrevFocused=!1)),ge.isDevice||e.preventDefault(),this.getElementData(e)){var t=e.currentTarget,i=t.classList.contains(Ch)?Mh:Ih;if(ye.remove(t,"mouseleave",this.mouseUpClick),this.isCalled||this.action(i,e),this.isCalled=!1,ye.remove(document,"mouseup",this.mouseUpClick),Fe(this.element,"form")){var n=this.element.nextElementSibling,o=document.createEvent("KeyboardEvent");o.initEvent("keyup",!1,!0),n.dispatchEvent(o)}}},t.prototype.getElementData=function(e){return!(e.which&&3===e.which||e.button&&2===e.button||!this.enabled||this.readonly)&&(clearInterval(this.timeOut),!0)},t.prototype.floatLabelTypeUpdate=function(){rs.removeFloating(this.inputWrapper);var e=this.hiddenInput;this.hiddenInput.remove(),rs.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement),this.container.insertBefore(e,this.container.childNodes[1])},t.prototype.mouseUpClick=function(e){e.stopPropagation(),clearInterval(this.timeOut),this.isCalled=!1,ye.remove(this.spinUp,"mouseleave",this.mouseUpClick),ye.remove(this.spinDown,"mouseleave",this.mouseUpClick)},t.prototype.increment=function(e){void 0===e&&(e=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,e,Mh)),this.raiseChangeEvent()},t.prototype.decrement=function(e){void 0===e&&(e=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,e,Ih)),this.raiseChangeEvent()},t.prototype.destroy=function(){this.unwireEvents(),Ae(this.hiddenInput),this.showSpinButton&&(this.unwireSpinBtnEvents(),Ae(this.spinUp),Ae(this.spinDown));for(var t=["aria-labelledby","role","autocomplete","aria-readonly","aria-disabled","autocapitalize","spellcheck","aria-autocomplete","tabindex","aria-valuemin","aria-valuemax","aria-valuenow","aria-invalid"],i=0;i<t.length;i++)this.element.removeAttribute(t[i]);this.element.classList.remove("e-input"),this.container.insertAdjacentElement("afterend",this.element),Ae(this.container),this.spinUp=null,this.spinDown=null,this.container=null,this.hiddenInput=null,this.changeEventArgs=null,this.blurEventArgs=null,this.focusEventArgs=null,this.inputWrapper=null,rs.destroy(),e.prototype.destroy.call(this)},t.prototype.getText=function(){return this.element.value},t.prototype.focusIn=function(){document.activeElement!==this.element&&this.enabled&&(this.element.focus(),be([this.container],[Ah]))},t.prototype.focusOut=function(){document.activeElement===this.element&&this.enabled&&(this.element.blur(),Se([this.container],[Ah]))},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){var o=n[i];switch(o){case"width":this.setElementWidth(e.width),rs.calculateWidth(this.element,this.container);break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"enabled":rs.setEnabled(e.enabled,this.element),this.bindClearEvent();break;case"enableRtl":rs.setEnableRtl(e.enableRtl,[this.container]);break;case"readonly":rs.setReadonly(e.readonly,this.element),this.readonly?Ve(this.element,{"aria-readonly":"true"}):this.element.removeAttribute("aria-readonly");break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.updateDataAttribute(!0),this.checkAttributes(!0),rs.validateInputType(this.container,this.element);break;case"placeholder":rs.setPlaceholder(e.placeholder,this.element),rs.calculateWidth(this.element,this.container);break;case"step":this.step=e.step,this.validateStep();break;case"showSpinButton":this.updateSpinButton(e);break;case"showClearButton":this.updateClearButton(e);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,this.floatLabelTypeUpdate();break;case"value":this.isDynamicChange=(this.isAngular||this.isVue)&&this.preventChange,this.updateValue(e.value),this.isDynamicChange&&(this.preventChange=!1,this.isDynamicChange=!1);break;case"min":case"max":d(o,l(o,e),this),this.validateMinMax(),this.updateValue(this.value);break;case"strictMode":this.strictMode=e.strictMode,this.updateValue(this.value),this.validateState();break;case"locale":this.initCultureFunc(),this.l10n.setLocale(this.locale),this.setSpinButton(),this.updatePlaceholder(),rs.setPlaceholder(this.placeholder,this.element),this.updateValue(this.value);break;case"currency":var s=l(o,e);this.setProperties({currencyCode:s},!0),this.updateCurrency(o,s);break;case"currencyCode":var a=l(o,e);this.setProperties({currency:a},!0),this.updateCurrency("currency",a);break;case"format":d(o,l(o,e),this),this.initCultureInfo(),this.updateValue(this.value);break;case"decimals":this.decimals=e.decimals,this.updateValue(this.value)}}},t.prototype.updateClearButton=function(e){rs.setClearButton(e.showClearButton,this.element,this.inputWrapper,void 0,this.createElement),this.bindClearEvent()},t.prototype.updateSpinButton=function(e){e.showSpinButton?this.spinBtnCreation():(Ae(this.spinUp),Ae(this.spinDown))},t.prototype.getModuleName=function(){return"numerictextbox"},bh([Ge("")],t.prototype,"cssClass",void 0),bh([Ge(null)],t.prototype,"value",void 0),bh([Ge(-Number.MAX_VALUE)],t.prototype,"min",void 0),bh([Ge(Number.MAX_VALUE)],t.prototype,"max",void 0),bh([Ge(1)],t.prototype,"step",void 0),bh([Ge(null)],t.prototype,"width",void 0),bh([Ge(null)],t.prototype,"placeholder",void 0),bh([Ge({})],t.prototype,"htmlAttributes",void 0),bh([Ge(!0)],t.prototype,"showSpinButton",void 0),bh([Ge(!1)],t.prototype,"readonly",void 0),bh([Ge(!0)],t.prototype,"enabled",void 0),bh([Ge(!1)],t.prototype,"showClearButton",void 0),bh([Ge(!1)],t.prototype,"enablePersistence",void 0),bh([Ge("n2")],t.prototype,"format",void 0),bh([Ge(null)],t.prototype,"decimals",void 0),bh([Ge(null)],t.prototype,"currency",void 0),bh([Ge(null)],t.prototype,"currencyCode",void 0),bh([Ge(!0)],t.prototype,"strictMode",void 0),bh([Ge(!1)],t.prototype,"validateDecimalOnType",void 0),bh([Ge("Never")],t.prototype,"floatLabelType",void 0),bh([$e()],t.prototype,"created",void 0),bh([$e()],t.prototype,"destroyed",void 0),bh([$e()],t.prototype,"change",void 0),bh([$e()],t.prototype,"focus",void 0),bh([$e()],t.prototype,"blur",void 0),t=bh([et],t)}(Dt),Dh=function(){function e(e){this.type="POST",this.mode=!0,this.contentType="application/json;charset=UTF-8",this.pdfViewer=e,this.retryCount=e.retryCount,this.retryStatusCodes=e.retryStatusCodes}return e.prototype.send=function(e){var t=this;this.httpRequest=new XMLHttpRequest,this.mode?this.sendRequest(e):setTimeout((function(){t.sendRequest(e)})),this.httpRequest.onreadystatechange=function(){var i=!1,n=t.pdfViewer.viewerBase;n&&n.isPasswordAvailable&&""===n.passwordData&&(i=!0,t.retryCount=0),t.retryCount>0&&(i=t.resendRequest(t,e)),i||t.stateChange(t)},this.httpRequest.onerror=function(){t.error(t)}},e.prototype.clear=function(){this.httpRequest&&this.httpRequest.abort(),this.onSuccess=null,this.onFailure=null,this.onError=null},e.prototype.resendRequest=function(e,t){var i=!1,n=e.httpRequest.status,o=-1!==this.retryStatusCodes.indexOf(n);if(4===e.httpRequest.readyState&&200===n){var s=void 0;if((s=null!==this.responseType?e.httpRequest.response:e.httpRequest.responseText)&&"object"!==typeof s)try{s=JSON.parse(s)}catch(a){"Document stream does not exist in the cache"!==s&&"Document Reference pointer does not exist in the cache"!==s||(i=!0)}}return(o||i)&&(i=!0,this.retryCount--,e.pdfViewer.fireAjaxRequestFailed(n,e.httpRequest.statusText,t.action,!0),e.send(t)),i},e.prototype.sendRequest=function(e){this.httpRequest.open(this.type,this.url,this.mode),this.httpRequest.withCredentials=this.pdfViewer.ajaxRequestSettings.withCredentials,this.httpRequest.setRequestHeader("Content-Type",this.contentType),e=this.addExtraData(e),this.setCustomAjaxHeaders(),null!==this.responseType&&(this.httpRequest.responseType=this.responseType),this.httpRequest.send(JSON.stringify(e))},e.prototype.addExtraData=function(e){return this.pdfViewer.viewerBase.ajaxData="",this.pdfViewer.fireAjaxRequestInitiate(e),this.pdfViewer.viewerBase.ajaxData&&""!==this.pdfViewer.viewerBase.ajaxData&&(e=this.pdfViewer.viewerBase.ajaxData),e},e.prototype.stateChange=function(e){var t=e.httpRequest.status,i=t.toString().split("")[0];if(4===e.httpRequest.readyState&&200===t){var n={name:"onSuccess",data:null!==this.responseType?e.httpRequest.response:e.httpRequest.responseText,readyState:e.httpRequest.readyState,status:e.httpRequest.status};e.successHandler(n)}else if(4===e.httpRequest.readyState&&("4"===i||"5"===i)){n={name:"onFailure",status:e.httpRequest.status,statusText:e.httpRequest.statusText};e.failureHandler(n)}},e.prototype.error=function(e){var t={name:"onError",status:this.httpRequest.status,statusText:this.httpRequest.statusText};e.errorHandler(t)},e.prototype.successHandler=function(e){return this.onSuccess&&this.onSuccess(e),e},e.prototype.failureHandler=function(e){return this.onFailure&&this.onFailure(e),e},e.prototype.errorHandler=function(e){return this.onError&&this.onError(e),e},e.prototype.setCustomAjaxHeaders=function(){for(var e=0;e<this.pdfViewer.ajaxRequestSettings.ajaxHeaders.length;e++)this.httpRequest.setRequestHeader(this.pdfViewer.ajaxRequestSettings.ajaxHeaders[parseInt(e.toString(),10)].headerName,this.pdfViewer.ajaxRequestSettings.ajaxHeaders[parseInt(e.toString(),10)].headerValue)},e}(),Nh=function(){function e(e,t,i,n){this.x=Number.MAX_VALUE,this.y=Number.MAX_VALUE,this.width=0,this.height=0,void 0===e||void 0===t?(e=t=Number.MAX_VALUE,i=n=0):(void 0===i&&(i=0),void 0===n&&(n=0)),this.x=e,this.y=t,this.width=i,this.height=n}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return{x:this.left,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return{x:this.right,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return{x:this.left,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return{x:this.right,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"middleLeft",{get:function(){return{x:this.left,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"middleRight",{get:function(){return{x:this.right,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topCenter",{get:function(){return{x:this.x+this.width/2,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomCenter",{get:function(){return{x:this.x+this.width/2,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return{x:this.x+this.width/2,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),e.prototype.equals=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height},e.prototype.uniteRect=function(e){var t=Math.max(Number.NaN===this.right||this.x===Number.MAX_VALUE?e.right:this.right,e.right),i=Math.max(Number.NaN===this.bottom||this.y===Number.MAX_VALUE?e.bottom:this.bottom,e.bottom);return this.x=Math.min(this.left,e.left),this.y=Math.min(this.top,e.top),this.width=t-this.x,this.height=i-this.y,this},e.prototype.unitePoint=function(e){if(this.x===Number.MAX_VALUE)return this.x=e.x,void(this.y=e.y);var t=Math.min(this.left,e.x),i=Math.min(this.top,e.y),n=Math.max(this.right,e.x),o=Math.max(this.bottom,e.y);this.x=t,this.y=i,this.width=n-this.x,this.height=o-this.y},e.prototype.intersection=function(t){if(this.intersects(t)){var i=Math.max(this.left,t.left),n=Math.max(this.top,t.top);return new e(i,n,Math.min(this.right,t.right)-i,Math.min(this.bottom,t.bottom)-n)}return e.empty},e.prototype.Inflate=function(e){return this.x-=e,this.y-=e,this.width+=2*e,this.height+=2*e,this},e.prototype.intersects=function(e){return!(this.right<e.left||this.left>e.right||this.top>e.bottom||this.bottom<e.top)},e.prototype.containsRect=function(e){return this.left<=e.left&&this.right>=e.right&&this.top<=e.top&&this.bottom>=e.bottom},e.prototype.containsPoint=function(e,t){return void 0===t&&(t=0),this.left-t<=e.x&&this.right+t>=e.x&&this.top-t<=e.y&&this.bottom+t>=e.y},e.prototype.toPoints=function(){var e=[];return e.push(this.topLeft),e.push(this.topRight),e.push(this.bottomLeft),e.push(this.bottomRight),e},e.toBounds=function(t){for(var i=new e,n=0,o=t;n<o.length;n++){var s=o[n];i.unitePoint(s)}return i},e.prototype.scale=function(e,t){this.width*=e,this.height*=t},e.prototype.offset=function(e,t){this.x+=e,this.y+=t},e.empty=new e(Number.MAX_VALUE,Number.MIN_VALUE,0,0),e}();function Fh(e,t){var i={x:0,y:0},n=e,o=t,s=(o.y2-o.y1)*(n.x2-n.x1)-(o.x2-o.x1)*(n.y2-n.y1),a=(o.x2-o.x1)*(n.y1-o.y1)-(o.y2-o.y1)*(n.x1-o.x1),r=(n.x2-n.x1)*(n.y1-o.y1)-(n.y2-n.y1)*(n.x1-o.x1);if(0===s)return{enabled:!1,intersectPt:i};var l=a/s,d=r/s;return l>=0&&l<=1&&d>=0&&d<=1?(i.x=n.x1+l*(n.x2-n.x1),i.y=n.y1+l*(n.y2-n.y1),{enabled:!0,intersectPt:i}):{enabled:!1,intersectPt:i}}function Lh(e,t,i){return e.x>=t.x-i&&e.x<=t.x+i&&e.y>=t.y-i&&e.y<=t.y+i}function Ph(e){var t,i=[];if("msie"===ge.info.name||"edge"===ge.info.name)for(var n=0;n<e.childNodes.length;n++)1===(t=e.childNodes[n]).nodeType&&i.push(t);else i=e.children;return i}function Oh(e){var t="pathTable";if(window[t]||(window[t]={}),e){var i="measureElement";window[i].style.visibility="visible";var n=Ph(window[i].children[2])[0];n.setAttribute("d",e);var o=void 0;window[t][e]?o=window[t][e]:(window[t][e]=o=n.getBBox(),0!==o.x&&0!==o.y||0!==o.width&&0!==o.height||(window[t][e]=o=function(e){var t,i=0,n=0,o=0,s=0,a=e;a=a.replace(/[a-z].*/g," ").replace(/[\sA-Z]+/gi," ").trim().split(" ");for(var r=0;r<a.length;r++)a[r].length>1&&(i=n=(t=a[r].split(","))[0],o=s=t[1]);for(r=0;r<a.length;r++)(t=a[r].split(","))[1]||(t[0]=i,t[1]=o),i=Math.min(i,t[0]),n=Math.max(n,t[0]),o=Math.min(o,t[1]),s=Math.max(s,t[1]);return{x:i,y:o,width:n-i,height:s-o}}(e)));var s=new Nh(o.x,o.y,o.width,o.height);return window[i].style.visibility="hidden",s}return new Nh(0,0,0,0)}function Bh(e,t){var i,n,o=[],s=0,a=t||e.content;if("nowrap"!==e.whiteSpace&&"pre"!==e.whiteSpace)if("breakall"===e.breakWord)for(i="",i+=a[0],s=0;s<a.length;s++)if((n=Qh(i,e))>=e.width&&i.length>0)o[o.length]={text:i,x:0,dy:0,width:n},i="";else{var r=Qh(i+=a[s+1]||"",e);(Math.ceil(r)+2>=e.width&&i.length>0||i.indexOf("\n")>-1)&&(o[o.length]={text:i,x:0,dy:0,width:r},i=""),s===a.length-1&&i.length>0&&(o[o.length]={text:i,x:0,dy:0,width:r},i="")}else o=function(e,t){var i,n,o,s,a=[],r="",l=0,d=0,h="nowrap"!==e.whiteSpace,p=t||e.content,c=p.split("\n");for(l=0;l<c.length;l++)for("",i="NoWrap"!==e.textWrapping?c[l].split(" "):c,d=0;d<i.length;d++)if(Qh(i[d],e)>e.width&&i[d].length>0)c.length>1&&(i[d]=i[d]+"\n"),e.content=i[d],a=zh(e,r,a);else{var u=Qh(n=(r+=((0!==d||1===i.length)&&h&&r.length>0?" ":"")+i[d])+(i[d+1]||""),e);c.length>1&&d===i.length-1&&(r+="\n"),Math.floor(u)>e.width-2&&r.length>0?(a[a.length]={text:-1===r.indexOf("\n")?r+" ":t,x:0,dy:0,width:n===r?u:r===s?o:Qh(r,e)},r=""):d===i.length-1&&(a[a.length]={text:r,x:0,dy:0,width:u},r=""),s=n,o=u}return a}(e,t);else o[o.length]={text:a,x:0,dy:0,width:Qh(a,e)};return o}function zh(e,t,i){var n,o,s=0,a=t||e.content;for(n="",n+=a[0],s=0;s<a.length;s++)if((o=Qh(n,e))>=e.width&&n.length>0)i[i.length]={text:n,x:0,dy:0,width:o},n="";else{var r=Qh(n+=a[s+1]||"",e);(Math.ceil(r)+2>=e.width&&n.length>0||n.indexOf("\n")>-1)&&(n=n.slice(0,-1),i[i.length]={text:n,x:0,dy:0,width:r},n=a[s+1]||""),s===a.length-1&&n.length>0&&(i[i.length]={text:n,x:0,dy:0,width:r},n="")}return i}function jh(e,t,i,n,o){var s,a,r=new Cd(0,0),l=function(e,t){var i={fill:e.style.fill,stroke:e.style.strokeColor,angle:e.rotateAngle+e.parentTransform,pivotX:e.pivot.x,pivotY:e.pivot.y,strokeWidth:e.style.strokeWidth,dashArray:e.style.strokeDashArray,opacity:e.style.opacity,visible:e.visible,id:e.id,width:t||e.actualSize.width,height:e.actualSize.height,x:e.offsetX-e.actualSize.width*e.pivot.x+.5,y:e.offsetY-e.actualSize.height*e.pivot.y+.5};return i.fontSize=e.style.fontSize,i.fontFamily=e.style.fontFamily,i.textOverflow=e.style.textOverflow,i.textDecoration=e.style.textDecoration,i.doWrap=e.doWrap,i.whiteSpace=Zh(e.style.whiteSpace,e.style.textWrapping),i.content=e.content,i.textWrapping=e.style.textWrapping,i.breakWord=Yh(e.style.textWrapping),i.textAlign=qh(e.style.textAlign),i.color=e.style.color,i.italic=e.style.italic,i.bold=e.style.bold,i.dashArray="",i.strokeWidth=0,i.fill="",i}(e,n);return e.childNodes=s=Bh(l,o),e.wrapBounds=a=function(e,t){var i,n,o={x:0,width:0},s=0;for(s=0;s<t.length;s++)n=i=t[s].width,i="left"===e.textAlign?0:"center"===e.textAlign?i>e.width&&("Ellipsis"===e.textOverflow||"Clip"===e.textOverflow)?0:-i/2:"right"===e.textAlign?-i:t.length>1?0:-i/2,t[s].dy=1.2*e.fontSize,t[s].x=i,o?(o.x=Math.min(o.x,i),o.width=Math.max(o.width,n)):o={x:i,width:n};return o}(l,s),r.width=a.width,e.wrapBounds.width>=n&&"Wrap"!==l.textOverflow&&(r.width=n),r.height=s.length*e.style.fontSize*1.2,r}function Rh(e,t){var i;return t&&(i=document.getElementById(t)),i?i.querySelector("#"+e):document.getElementById(e)}function _h(e,t){var i=we(e);return function(e,t){for(var i=Object.keys(t),n=0;n<i.length;n++)e.setAttribute(i[n],t[i[n]])}(i,t),i}function Hh(){for(var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",i="",n=0;n<5;n++){if("crypto"in window&&"getRandomValues"in crypto){var o=new Uint16Array(1);e=(window.msCrypto||window.crypto).getRandomValues(o)[0]%(t.length-1)}else e=Math.floor(Math.random()*t.length);0===n&&e<10?n--:i+=t.substring(e,e+1)}return i}function Wh(e){new Nh;var t=e.offsetY-e.actualSize.height*e.pivot.y,i=e.offsetY+e.actualSize.height*(1-e.pivot.y),n=e.offsetX-e.actualSize.width*e.pivot.x,o=e.offsetX+e.actualSize.width*(1-e.pivot.x),s={x:n,y:t},a={x:o,y:t},r={x:n,y:i},l={x:o,y:i};return Nh.toBounds([s,a,r,l])}function Uh(e,t){var i=Ls();Os(i,t,0,0);var n=Ps(i,{x:0,y:0}),o=Ps(i,{x:e.width,y:0}),s=Ps(i,{x:0,y:e.height}),a=Ps(i,{x:e.width,y:e.height}),r=Math.min(n.x,o.x,s.x,a.x),l=Math.min(n.y,o.y,s.y,a.y),d=Math.max(n.x,o.x,s.x,a.x),h=Math.max(n.y,o.y,s.y,a.y);return new Cd(d-r,h-l)}function qh(e){var t="";switch(e){case"Center":t="center";break;case"Left":t="left";break;case"Right":t="right"}return t}function Yh(e){var t="";switch(e){case"Wrap":t="breakall";break;case"NoWrap":t="keepall";break;case"WrapWithOverflow":t="normal";break;case"LineThrough":t="line-through"}return t}function Qh(e,t){var i="measureElement";window[i].style.visibility="visible";var n=Ph(window[i].children[2])[1];n.textContent=e,n.setAttribute("style","font-size:"+t.fontSize+"px; font-family:"+t.fontFamily+";font-weight:"+(t.bold?"bold":"normal"));var o=n.getBBox().width;return window[i].style.visibility="hidden",o}function Zh(e,t){if("NoWrap"===t&&"PreserveAll"===e)return"pre";var i="";switch(e){case"CollapseAll":i="nowrap";break;case"CollapseSpace":i="pre-line";break;case"PreserveAll":i="pre-wrap"}return i}function Xh(e,t,i,n){if(0!==e){var o=Ls();return Os(o,e,t,i),Ps(o,n)}return n}!function(e){e[e.Self=1]="Self",e[e.Parent=2]="Parent"}(ch||(ch={})),function(e){e[e.None=0]="None",e[e.ElementIsPort=2]="ElementIsPort",e[e.ElementIsGroup=4]="ElementIsGroup"}(uh||(uh={})),function(e){e[e.None=1]="None",e[e.Select=2]="Select",e[e.Delete=4]="Delete",e[e.Drag=8]="Drag",e[e.DragSourceEnd=16]="DragSourceEnd",e[e.DragTargetEnd=32]="DragTargetEnd",e[e.DragSegmentThumb=64]="DragSegmentThumb",e[e.AllowDrop=128]="AllowDrop",e[e.Bridging=256]="Bridging",e[e.BridgeObstacle=512]="BridgeObstacle",e[e.InheritBridging=1024]="InheritBridging",e[e.PointerEvents=2048]="PointerEvents",e[e.Tooltip=4096]="Tooltip",e[e.InheritTooltip=8192]="InheritTooltip",e[e.Interaction=4218]="Interaction",e[e.ReadOnly=16384]="ReadOnly",e[e.Default=11838]="Default"}(fh||(fh={})),function(e){e[e.Rotate=2]="Rotate",e[e.ConnectorSource=4]="ConnectorSource",e[e.ConnectorTarget=8]="ConnectorTarget",e[e.ResizeNorthEast=16]="ResizeNorthEast",e[e.ResizeEast=32]="ResizeEast",e[e.ResizeSouthEast=64]="ResizeSouthEast",e[e.ResizeSouth=128]="ResizeSouth",e[e.ResizeSouthWest=256]="ResizeSouthWest",e[e.ResizeWest=512]="ResizeWest",e[e.ResizeNorthWest=1024]="ResizeNorthWest",e[e.ResizeNorth=2048]="ResizeNorth",e[e.Default=4094]="Default"}(mh||(mh={})),function(e){e[e.None=1]="None",e[e.ConnectorSourceThumb=2]="ConnectorSourceThumb",e[e.ConnectorTargetThumb=4]="ConnectorTargetThumb",e[e.ResizeSouthEast=8]="ResizeSouthEast",e[e.ResizeSouthWest=16]="ResizeSouthWest",e[e.ResizeNorthEast=32]="ResizeNorthEast",e[e.ResizeNorthWest=64]="ResizeNorthWest",e[e.ResizeEast=128]="ResizeEast",e[e.ResizeWest=256]="ResizeWest",e[e.ResizeSouth=512]="ResizeSouth",e[e.ResizeNorth=1024]="ResizeNorth",e[e.Rotate=2048]="Rotate",e[e.UserHandle=4096]="UserHandle",e[e.ToolTip=8192]="ToolTip",e[e.ResizeAll=2046]="ResizeAll",e[e.All=16382]="All"}(gh||(gh={})),function(e){e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five"}(yh||(yh={}));var Gh=function(){function e(){this.pivot={x:.5,y:.5},this.rotateValue={x:0,y:0,angle:0},this.isDirt=!0,this.offsetX=0,this.offsetY=0,this.cornerRadius=0,this.minHeight=void 0,this.minWidth=void 0,this.maxWidth=void 0,this.maxHeight=void 0,this.width=void 0,this.height=void 0,this.horizontalAlignment="Auto",this.verticalAlignment="Auto",this.visible=!0,this.rotateAngle=0,this.margin={left:0,right:0,top:0,bottom:0},this.relativeMode="Point",this.transform=ch.Self|ch.Parent,this.style={fill:"white",strokeColor:"black",opacity:1,strokeWidth:1},this.desiredSize=new Cd,this.actualSize=new Cd,this.parentTransform=0,this.preventContainer=!1,this.bounds=new Nh(0,0,0,0),this.staticSize=!1,this.isRectElement=!1,this.isCalculateDesiredSize=!0,this.elementActions=uh.None,this.position=void 0,this.unitMode=void 0,this.float=!1,this.floatingBounds=void 0}return e.prototype.setOffsetWithRespectToBounds=function(e,t,i){this.unitMode=i,this.position={x:e,y:t}},e.prototype.getAbsolutePosition=function(e){if(void 0!==this.position)return"Absolute"===this.unitMode?this.position:{x:this.position.x*e.width,y:this.position.y*e.height}},Object.defineProperty(e.prototype,"outerBounds",{get:function(){return this.floatingBounds||this.bounds},set:function(e){this.floatingBounds=e},enumerable:!0,configurable:!0}),e.prototype.measure=function(e){var t=void 0!==this.width?this.width:(e.width||0)-this.margin.left-this.margin.right,i=void 0!==this.height?this.height:(e.height||0)-this.margin.top-this.margin.bottom;return this.desiredSize=new Cd(t,i),this.isCalculateDesiredSize&&(this.desiredSize=this.validateDesiredSize(this.desiredSize,e)),this.desiredSize},e.prototype.arrange=function(e){return this.actualSize=e,this.updateBounds(),this.actualSize},e.prototype.updateBounds=function(){this.bounds=function(e){var t,i=new Nh,n=(t=Wh(e)).middleLeft,o=t.topCenter,s=t.bottomCenter,a=t.middleRight,r=t.topLeft,l=t.topRight,d=t.bottomLeft,h=t.bottomRight;if(e.corners={topLeft:r,topCenter:o,topRight:l,middleLeft:n,middleRight:a,bottomLeft:d,bottomCenter:s,bottomRight:h},0!==e.rotateAngle||0!==e.parentTransform){var p=Ls();Os(p,e.rotateAngle+e.parentTransform,e.offsetX,e.offsetY),e.corners.topLeft=r=Ps(p,r),e.corners.topCenter=o=Ps(p,o),e.corners.topRight=l=Ps(p,l),e.corners.middleLeft=n=Ps(p,n),e.corners.middleRight=a=Ps(p,a),e.corners.bottomLeft=d=Ps(p,d),e.corners.bottomCenter=s=Ps(p,s),e.corners.bottomRight=h=Ps(p,h)}return i=Nh.toBounds([r,l,d,h]),e.corners.left=i.left,e.corners.right=i.right,e.corners.top=i.top,e.corners.bottom=i.bottom,e.corners.center=i.center,e.corners.width=i.width,e.corners.height=i.height,i}(this)},e.prototype.validateDesiredSize=function(e,t){return!this.isRectElement||this.width||this.minWidth||this.maxWidth||(e.width=50),!this.isRectElement||this.height||this.minHeight||this.maxHeight||(e.height=50),(void 0===e||void 0!==this.width&&void 0!==this.height)&&((e=e||new Cd).width=void 0===this.width?(t.width||0)-this.margin.left-this.margin.right:this.width,e.height=void 0===this.height?(t.height||0)-this.margin.top-this.margin.bottom:this.height),void 0!==this.minWidth&&(e.width=Math.max(e.width,this.minWidth)),void 0!==this.minHeight&&(e.height=Math.max(e.height,this.minHeight)),void 0!==this.maxWidth&&(e.width=Math.min(e.width,this.maxWidth)),void 0!==this.maxHeight&&(e.height=Math.min(e.height,this.maxHeight)),e},e}(),Jh=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Kh=function(e){function t(){var t=e.call(this)||this;return t.textContent="",t.canMeasure=!0,t.canConsiderBounds=!0,t.doWrap=!0,t.textNodes=[],t.style={color:"black",fill:"transparent",strokeColor:"black",strokeWidth:1,fontFamily:"Arial",fontSize:12,whiteSpace:"CollapseSpace",textWrapping:"WrapWithOverflow",textAlign:"Center",italic:!1,bold:!1,textDecoration:"None",strokeDashArray:"",opacity:1,textOverflow:"Wrap"},t.style.fill="transparent",t.style.strokeColor="transparent",t}return Jh(t,e),Object.defineProperty(t.prototype,"content",{get:function(){return this.textContent},set:function(e){this.textContent!==e&&(this.textContent=e,this.isDirt=!0,this.doWrap=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.textNodes},set:function(e){this.textNodes=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wrapBounds",{get:function(){return this.textWrapBounds},set:function(e){this.textWrapBounds=e},enumerable:!0,configurable:!0}),t.prototype.refreshTextElement=function(){this.isDirt=!0},t.prototype.measure=function(e){var t;return t=this.isDirt&&this.canMeasure?jh(this,this.style,this.content,this.width||e.width):this.desiredSize,void 0===this.width||void 0===this.height?this.desiredSize=new Cd(t.width,t.height):this.desiredSize=new Cd(this.width,this.height),this.desiredSize=this.validateDesiredSize(this.desiredSize,e),this.desiredSize},t.prototype.arrange=function(e){return(e.width!==this.actualSize.width||e.height!==this.actualSize.height||this.isDirt)&&(this.doWrap=!0),this.actualSize=e,this.updateBounds(),this.isDirt=!1,this.actualSize},t}(Gh),$h=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ep=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.desiredBounds=void 0,t.measureChildren=!0,t.prevRotateAngle=0,t}return $h(t,e),t.prototype.hasChildren=function(){return void 0!==this.children&&this.children.length>0},t.prototype.measure=function(e){this.desiredBounds=void 0;var i,n,o=void 0;if(this.hasChildren()){for(var s=0;s<this.children.length;s++){"Stretch"!==(i=this.children[s]).horizontalAlignment||e.width||(e.width=i.bounds.width),"Stretch"!==i.verticalAlignment||e.height||(e.height=i.bounds.height);var a="Stretch"===i.horizontalAlignment||"Stretch"===i.verticalAlignment;(this.measureChildren||a||i instanceof t&&void 0!==i.measureChildren)&&i.measure(e),n=this.GetChildrenBounds(i),"Stretch"!==i.horizontalAlignment&&"Stretch"!==i.verticalAlignment?void 0===this.desiredBounds?this.desiredBounds=n:this.desiredBounds.uniteRect(n):!this.actualSize||this.actualSize.width||this.actualSize.height||i.preventContainer||"Stretch"!==i.horizontalAlignment||"Stretch"!==i.verticalAlignment||(void 0===this.desiredBounds?this.desiredBounds=i.bounds:this.desiredBounds.uniteRect(i.bounds))}if(void 0!==this.desiredBounds&&0!==this.rotateAngle){var r={x:this.desiredBounds.x+this.desiredBounds.width*this.pivot.x,y:this.desiredBounds.y+this.desiredBounds.height*this.pivot.y},l=Xh(this.rotateAngle,void 0,void 0,r);this.desiredBounds.x=l.x-this.desiredBounds.width*this.pivot.x,this.desiredBounds.y=l.y-this.desiredBounds.height*this.pivot.y}this.desiredBounds&&(o=new Cd(this.desiredBounds.width,this.desiredBounds.height))}return o=this.validateDesiredSize(o,e),this.stretchChildren(o),this.desiredSize=o,o},t.prototype.arrange=function(e){var i,n=this.desiredBounds;if(n){this.offsetX,this.offsetY;if(this.offsetX=n.x+n.width*this.pivot.x,this.offsetY=n.y+n.height*this.pivot.y,this.hasChildren())for(var o=0;o<this.children.length;o++){var s=!1;"Stretch"===(i=this.children[o]).horizontalAlignment&&(i.offsetX=this.offsetX,i.parentTransform=this.parentTransform+this.rotateAngle,s=!0),"Stretch"===i.verticalAlignment&&(i.offsetY=this.offsetY,i.parentTransform=this.parentTransform+this.rotateAngle,s=!0),(s||this.measureChildren||i instanceof t&&void 0!==i.measureChildren)&&i.arrange(i.desiredSize)}}return this.actualSize=e,this.updateBounds(),this.prevRotateAngle=this.rotateAngle,e},t.prototype.stretchChildren=function(e){if(this.hasChildren())for(var i=0,n=this.children;i<n.length;i++){var o=n[i];"Stretch"!==o.horizontalAlignment&&void 0!==o.desiredSize.width||(o.desiredSize.width=e.width-o.margin.left-o.margin.right),"Stretch"!==o.verticalAlignment&&void 0!==o.desiredSize.height||(o.desiredSize.height=e.height-o.margin.top-o.margin.bottom),o instanceof t&&o.stretchChildren(o.desiredSize)}},t.prototype.findChildOffsetFromCenter=function(e,t){var i=function(e,t){return{x:e.x+t.desiredSize.width*t.pivot.x,y:e.y+t.desiredSize.height*t.pivot.y}}({x:t.x-e.desiredSize.width/2,y:t.y-e.desiredSize.height/2},e);i=Xh(e.rotateAngle,t.x,t.y,i),i=Xh(this.rotateAngle+this.parentTransform,this.offsetX,this.offsetY,i),e.offsetX=i.x,e.offsetY=i.y},t.prototype.GetChildrenBounds=function(e){var t;t=e.desiredSize.clone();e.rotateAngle,this.rotateAngle;var i=e.offsetX,n=e.offsetY,o=i-t.width*e.pivot.x,s=n-t.height*e.pivot.y,a=o+t.width,r=s+t.height,l={x:o,y:s},d={x:a,y:s},h={x:o,y:r},p={x:a,y:r};return l=Xh(e.rotateAngle,e.offsetX,e.offsetY,l),d=Xh(e.rotateAngle,e.offsetX,e.offsetY,d),h=Xh(e.rotateAngle,e.offsetX,e.offsetY,h),p=Xh(e.rotateAngle,e.offsetX,e.offsetY,p),0!==this.rotateAngle&&(l=Xh(-this.rotateAngle,void 0,void 0,l),d=Xh(-this.rotateAngle,void 0,void 0,d),h=Xh(-this.rotateAngle,void 0,void 0,h),p=Xh(-this.rotateAngle,void 0,void 0,p)),Nh.toBounds([l,d,h,p])},t}(Gh),tp=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ip=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},np=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tp(t,e),t.prototype.init=function(e){var t=new ep;if(t.measureChildren=!1,t.children=[],this.formFields&&this.formFields.length>0)for(var i=0;i<this.formFields.length;i++){var n=e.pdfViewer.nameTable[this.formFields[parseInt(i.toString(),10)].id].wrapper;t.children.push(n)}else if(this.annotations)for(i=0;i<this.annotations.length;i++)if(!m(this.annotations[parseInt(i.toString(),10)])){n=e.pdfViewer.nameTable[this.annotations[parseInt(i.toString(),10)].id].wrapper;t.children.push(n)}return this.wrapper=t,t},ip([Ge(null)],t.prototype,"wrapper",void 0),ip([Ke([],Ad)],t.prototype,"annotations",void 0),ip([Ke([],kd)],t.prototype,"formFields",void 0),ip([Ge()],t.prototype,"width",void 0),ip([Ge()],t.prototype,"height",void 0),ip([Ge(0)],t.prototype,"rotateAngle",void 0),ip([Ge(0)],t.prototype,"offsetX",void 0),ip([Ge(0)],t.prototype,"offsetY",void 0),ip([Je({x:.5,y:.5},Ns)],t.prototype,"pivot",void 0),t}(mt),op=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),sp=function(e){function t(){var t=e.call(this)||this;return t.pathData="",t.transformPath=!0,t.absolutePath="",t.canMeasurePath=!1,t.absoluteBounds=new Nh,t}return op(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this.pathData},set:function(e){this.pathData!==e&&(this.pathData=e,this.isDirt=!0)},enumerable:!0,configurable:!0}),t.prototype.measure=function(e){return this.staticSize&&void 0!==this.width&&void 0!==this.height?this.absoluteBounds=new Nh(this.offsetX-this.width*this.pivot.x,this.offsetY-this.height*this.pivot.y,this.width,this.height):(!this.isDirt||!this.transformPath&&void 0!==this.width&&void 0!==this.height||this.absoluteBounds&&0!==this.absoluteBounds.height)&&!this.canMeasurePath||(this.absoluteBounds=Oh(this.data?this.data:"")),void 0===this.width?this.desiredSize=new Cd(this.absoluteBounds.width,this.height||this.absoluteBounds.height):void 0===this.height?this.desiredSize=new Cd(this.width||this.absoluteBounds.width,this.absoluteBounds.height):this.desiredSize=new Cd(this.width,this.height),this.desiredSize=this.validateDesiredSize(this.desiredSize,e),this.canMeasurePath=!1,this.desiredSize},t.prototype.arrange=function(e){return(this.isDirt||this.actualSize.width!==e.width||this.actualSize.height!==e.height)&&(this.isDirt=!0,this.absolutePath=this.updatePath(this.data,this.absoluteBounds,e),this.staticSize||(this.points=null)),this.actualSize=this.desiredSize,this.updateBounds(),this.isDirt=!1,this.actualSize},t.prototype.updatePath=function(e,t,i){var n=!1,o="",s=-t.x,a=-t.y,r=[];return i.width===t.width&&i.height===t.height||(s=i.width/Number(t.width?t.width:1),a=i.height/Number(t.height?t.height:1),n=!0),r=os(r=es(e)),o=(n||this.isDirt)&&this.transformPath?function(e,t,i,n,o,s,a,r){var l,d,h,p,c,u,f,m,g;for(c=0,u=0,m=0,f=e.length;m<f;++m){var y=e[m],v=y.command;"x"in y&&(c=y.x),"y"in y&&(u=y.y),"y1"in y&&(d=y.y1),"y2"in y&&(p=y.y2),"x1"in y&&(l=y.x1),"x2"in y&&(h=y.x2),n?(void 0!==c&&(c=ns(c,t,o,a)),void 0!==u&&(u=ns(u,i,s,r)),void 0!==l&&(l=ns(l,t,o,a)),void 0!==d&&(d=ns(d,i,s,r)),void 0!==h&&(h=ns(h,t,o,a)),void 0!==p&&(p=ns(p,i,s,r))):(void 0!==c&&(c=Number((c+t).toFixed(2))),void 0!==u&&(u=Number((u+i).toFixed(2))),void 0!==l&&(l=Number((l+t).toFixed(2))),void 0!==d&&(d=Number((d+i).toFixed(2))),void 0!==h&&(h=Number((h+t).toFixed(2))),void 0!==p&&(p=Number((p+i).toFixed(2)))),(g=is(y,v,{x:c,y:u,x1:l,y1:d,x2:h,y2:p,r1:y.r1,r2:y.r2},n,t,i))&&(e[m]=g)}return ss(e)}(r,s,a,n,t.x,t.y,0,0):ss(r),n=!1,o},t}(Gh);function ap(e,t){var i=e.vertexPoints.slice(0);return i&&i.length>0&&(e.sourcePoint=i[0],e.targetPoint=i[i.length-1]),i}function rp(e,t,i){var n=new Nh,o=function(e,t){for(var i,n="",o=[],s=0;s<t.length;)o.push({x:t[parseInt(s.toString(),10)].x,y:t[parseInt(s.toString(),10)].y}),s++;o=hp(e,o);for(var a=0;a<o.length;a++)i=o[parseInt(a.toString(),10)],0===a&&(n="M"+i.x+" "+i.y),a>0&&(n+=" L"+i.x+" "+i.y);return n}(e,t);return n=Nh.toBounds(t),i.width=n.width,i.height=n.height,i.offsetX=n.x+i.width/2,i.offsetY=n.y+i.height/2,i.data=o,e.wrapper&&(e.wrapper.offsetX=i.offsetX,e.wrapper.offsetY=i.offsetY,e.wrapper.width=n.width,e.wrapper.height=n.height),i}function lp(e,t,i,n,o){t.offsetX=i.x,t.offsetY=i.y;var s,a,r=Ns.findAngle(i,n),l=(s=o?e.sourceDecoraterShapes:e.taregetDecoraterShapes,wp[s]),d=0;"LineWidthArrowHead"===e.shapeAnnotationType?(d=e.thickness,a=new Cd(12*d,12*d)):(d=e.thickness<=5?5:e.thickness,a=new Cd(2*d,2*d)),t.transform=ch.Self,Hs(e,t),t.style.fill="tranparent"!==e.fillColor?e.fillColor:"white",t.rotateAngle=r,t.data=l,t.canMeasurePath=!0,t.width=a.width,t.height=a.height,"Butt"===e.sourceDecoraterShapes&&(t.width=a.width-10,t.height=a.height+10)}function dp(e,t,i,n){var o=new sp;return lp(e,o,t,i,n),o}function hp(e,t){return t[0]=pp(e,t,!0),t[t.length-1]=pp(e,t,!1),t}function pp(e,t,i){var n,o,s={x:0,y:0},a=t.length;n=i?t[0]:t[a-1],o=i?t[1]:t[a-2];var r=Ns.distancePoints(n,o);r=0===r?1:r;var l=e.thickness;s.x=Math.round(n.x+l*(o.x-n.x)/r),s.y=Math.round(n.y+l*(o.y-n.y)/r);return s=Ns.adjustPoint(s,o,!0,.5)}function cp(e,t,i){for(var n,o=0;o<e.wrapper.children.length;o++){var s=e.wrapper.children[parseInt(o.toString(),10)];s&&!m(s.content)&&(n=i.calculatePerimeter(e),s.content=n,s.childNodes[0].text=s.content,s.refreshTextElement())}return n}function up(e){if(e.wrapper&&e.wrapper.children)for(var t=0;t<e.wrapper.children.length;t++){var i=e.wrapper.children[parseInt(t.toString(),10)];i&&!m(i.content)&&(i.content=e.notes,i.childNodes[0].text=i.content,i.refreshTextElement())}}function fp(e){var t,i,n="";for(n="M"+e[0].x+" "+e[0].y,i=1;i<e.length;i++)n+="L"+(t=e[parseInt(i.toString(),10)]).x+" "+t.y;return n+="Z"}function mp(e,t){var i=new Kh;return Hs(e,i),i.style.fill="transparent",i.id=Hh(),i.horizontalAlignment="Center",i.rotateValue={y:10,angle:t},i.verticalAlignment="Top",i.relativeMode="Object",i.setOffsetWithRespectToBounds(.5,.5,"Absolute"),i.offsetX,i.style.textWrapping="NoWrap",i}function gp(e,t,i,n){var o=new sp;o.offsetX=t.x,o.offsetY=t.y;var s=Ns.findAngle(t,i),a={x:(t.x+i.x)/2,y:(t.y+i.y)/2},r=Ls();Os(r,0-s,a.x,a.y);var l=Ps(r,t),d={x:l.x,y:l.y-e.leaderHeight};Os(r=Ls(),s,o.offsetX,o.offsetY),l=Ps(r,d);var h={x:t.x,y:t.y};o.offsetX=h.x,o.offsetY=h.y,o.transform=ch.Self;var p="M"+t.x+","+t.y+",L"+l.x+","+l.y+"Z",c=new Cd(0,e.leaderHeight);return o.pivot.x=.5,n?(o.id="leader2_"+Hh(),o.pivot.y=0):(o.id="leader1_"+Hh(),o.pivot.y=1),Hs(e,o),o.rotateAngle=s,o.data=p,o.canMeasurePath=!0,o.width=c.width,o.height=c.height,o}function yp(e,t){var i=e.vertexPoints;if(!m(i))for(var n=0;n<i.length-1;n++){var o=i[parseInt(n.toString(),10)],s=i[n+1],a=Nh.toBounds([o,s]);if(a.Inflate(10),a.containsPoint(t)){var r=vp(t,o,s),l=Fh({x1:o.x,x2:s.x,y1:o.y,y2:s.y},{x1:t.x,x2:r.x,y1:t.y,y2:r.y});if(l.enabled){var d=Ns.findLength(t,l.intersectPt);if(Math.abs(d)<10)return!0}else{var h=Nh.toBounds([t,t]);if(h.Inflate(3),h.containsPoint(o)||h.containsPoint(s))return!0}if(Ns.equals(t,r))return!0}}return!1}function vp(e,t,i){var n;n=Ns.findLength(t,e)>Ns.findLength(i,e)?i:t;var o=Ns.findAngle(t,i),s=Ns.findAngle(n,e),a=Ns.findLength(n,e),r=s+2*(o-s);return{x:n.x+a*Math.cos(r*Math.PI/180),y:n.y+a*Math.sin(r*Math.PI/180)}}var wp={OpenArrow:"M15.9,23 L5,16 L15.9,9 L17,10.7 L8.7,16 L17,21.3Z",Square:"M0,0 L10,0 L10,10 L0,10 z",Fletch:"M14.8,10c0,0-3.5,6,0.2,12c0,0-2.5-6-10.9-6C4.1,16,11.3,16,14.8,10z",OpenFetch:"M6,17c-0.6,0-1-0.4-1-1s0.4-1,1-1c10.9,0,11-5,11-5c0-0.6,0.4-1,1-1s1,0.4,1,1C19,10.3,18.9,17,6,17C6,17,6,17,6,17z M18,23c-0.5,0-1-0.4-1-1c0-0.2-0.3-5-11-5c-0.6,0-1-0.5-1-1s0.4-1,1-1c0,0,0,0,0,0c12.9,0,13,6.7,13,7    C19,22.6,18.6,23,18,23z",IndentedArrow:"M17,10c0,0-4.5,5.5,0,12L5,16L17,10z",OutdentedArrow:"M14.6,10c0,0,5.4,6,0,12L5,16L14.6,10z",DoubleArrow:"M19,10 L19,22 L13,16Z M12,10 L12,22 L6,16Z",Arrow:"M15,10 L15,22 L5,16Z",Diamond:"M12,23l-7-7l7-7l6.9,7L12,23z",Circle:"M0,50 A50,50,0 1 1 100,50 A50,50,0 1 1 0,50 Z",Butt:"M0,0 L0,90"};function bp(e,t,i,n){if(i&&t.activeElements.activePageID>-1){var o=Sp(t,i,e),s=function(e,t,i,n){var o,s,a,r=null;if(t&&t.type&&-1!==t.type.indexOf("touch")){if(o=t,n.annotation){var l=i.getElement("_pageDiv_"+n.annotation.getEventPageNumber(t));if(l){var d=l.getBoundingClientRect();s=o.changedTouches[0].clientX-d.left,a=o.changedTouches[0].clientY-d.top}}}else if(t&&t.target&&t.path&&t.target.parentElement&&t.target.parentElement.classList.contains("foreign-object")){var h=t.path[4].getBoundingClientRect();s=t.clientX-h.left,a=t.clientY-h.top}else if(t.target&&t.target.parentElement&&t.target.parentElement.classList.contains("foreign-object")){h=t.target.offsetParent.offsetParent.offsetParent.getBoundingClientRect();s=t.clientX-h.left,a=t.clientY-h.top}else if(t.target&&t.target.parentElement&&t.target.parentElement.parentElement&&t.target.parentElement.parentElement.classList.contains("foreign-object")){h=t.target.offsetParent.offsetParent.offsetParent.offsetParent.getBoundingClientRect();s=t.clientX-h.left,a=t.clientY-h.top}else s=isNaN(t.offsetX)?t.position?t.position.x:0:t.offsetX,a=isNaN(t.offsetY)?t.position?t.position.y:0:t.offsetY;for(var p=n.touchPadding/2,c=0,u=0;u<e.length;u++)if("Distance"===e[parseInt(u.toString(),10)].shapeAnnotationType||"Line"===e[parseInt(u.toString(),10)].shapeAnnotationType||"LineWidthArrowHead"===e[parseInt(u.toString(),10)].shapeAnnotationType||i.tool instanceof Op){var f={x:s/i.getZoomFactor(),y:a/i.getZoomFactor()},m=xp(e[parseInt(u.toString(),10)],f,p),g=yp(e[parseInt(u.toString(),10)],f);if(m&&!g){var y=Cp(e[parseInt(u.toString(),10)],m);if(y){var v=Nh.toBounds([y,y]);v.Inflate(10),v.containsPoint(f)&&(g=!0)}}m&&g&&(r=e[parseInt(u.toString(),10)])}else{var w=e[parseInt(u.toString(),10)].wrapper.bounds,b=0;if("Stamp"!==e[parseInt(u.toString(),10)].shapeAnnotationType&&"Image"!==e[parseInt(u.toString(),10)].shapeAnnotationType||(b=25),(w.x-p)*i.getZoomFactor()<s&&(w.x+w.width+p)*i.getZoomFactor()>s&&(w.y-p-b)*i.getZoomFactor()<a&&(w.y+w.height+p)*i.getZoomFactor()>a)if(i.tool instanceof Lp||i.tool instanceof Ep)r=e[parseInt(u.toString(),10)];else if(c){var S=s-(w.x-p)*i.getZoomFactor()+((w.x+w.width+p)*i.getZoomFactor()-s)+(a-(w.y-p-b)*i.getZoomFactor())+((w.y+w.height+p)*i.getZoomFactor()-a);c>S||c===S?(r=e[parseInt(u.toString(),10)],c=S):"Image"!==e[parseInt(u.toString(),10)].shapeAnnotationType&&"Stamp"!==e[parseInt(u.toString(),10)].shapeAnnotationType||(r=e[parseInt(u.toString(),10)])}else r=e[parseInt(u.toString(),10)],c=s-(w.x-p)*i.getZoomFactor()+((w.x+w.width+p)*i.getZoomFactor()-s)+(a-(w.y-p-b)*i.getZoomFactor())+((w.y+w.height+p)*i.getZoomFactor()-a)}return r}(o,e,t,i);return n?o:s}}function Sp(e,t,i){var n=e.currentPosition||{x:i.offsetX,y:i.offsetY};return function(e,t,i){for(var n=[],o=0,s=t;o<s.length;o++){var a=s[o];(xp(a,e,i)||"Stamp"===a.shapeAnnotationType&&xp(a,e,40))&&Mp(a,"zIndex",n)}return n}(n={x:n.x/e.getZoomFactor(),y:n.y/e.getZoomFactor()},t.getPageTable(e.activeElements.activePageID).objects,t.touchPadding)}function Cp(e,t){var i=e.sourcePoint,n=e.targetPoint;if("Distance"===e.shapeAnnotationType){var o=t,s=void 0,a=Ns.findAngle(e.sourcePoint,e.targetPoint);if(o.id.indexOf("leader")>-1){var r=e.wrapper.children[0].bounds.center;o.id.indexOf("leader1")>-1?(s={x:e.sourcePoint.x,y:e.sourcePoint.y-e.leaderHeight},r=i):(s={x:e.targetPoint.x,y:e.targetPoint.y-e.leaderHeight},r=n);var l=Ls();return Os(l,a,r.x,r.y),Ps(l,{x:s.x,y:s.y})}}}function xp(e,t,i){return function(e,t,i){if(e&&e.children)for(var n=e.children.length-1;n>=0;n--){var o=e.children[parseInt(n.toString(),10)],s=i;if(!m(o.children)&&o.children.length>0)for(var a=o.children.length-1;a>=0;a--){var r=o.children[a];if(r&&r.bounds.containsPoint(t,s)){if(r instanceof ep)if(l=this.findTargetElement(r,t))return l;if(r.bounds.containsPoint(t,s))return r}}else if(o&&o.bounds.containsPoint(t,s)){var l;if(o instanceof ep)if(l=this.findTargetElement(o,t))return l;if(o.bounds.containsPoint(t,s))return o}}if(e&&e.bounds.containsPoint(t,i)&&"none"!==e.style.fill){var d=e,h=10,p=30,c=Ls();Os(c,d.parentTransform,d.offsetX,d.offsetY);var u=d.offsetX-d.pivot.x*d.actualSize.width,f=d.offsetY-d.pivot.y*d.actualSize.height,g={x:u+(.5===d.pivot.x?2*d.pivot.x:d.pivot.x)*d.actualSize.width/2,y:f-p};if(Lh(t,g=Ps(c,g),h))return e}return null}(e.wrapper,t,i)}function Mp(e,t,i){if(0===i.length)i.push(e);else if(1===i.length)i[0][t]>e[t]?i.splice(0,0,e):i.push(e);else if(i.length>1){for(var n=0,o=i.length-1,s=Math.floor((n+o)/2);s!==n;)i[s][t]<e[t]?(n=s,s=Math.floor((n+o)/2)):i[s][t]>e[t]&&(o=s,s=Math.floor((n+o)/2));i[o][t]<e[t]?i.push(e):i[n][t]>e[t]?i.splice(n,0,e):i[n][t]<e[t]&&i[o][t]>e[t]&&i.splice(o,0,e)}}var Ip=function(){function e(){this.activePage=void 0,this.activePageID=void 0}return Object.defineProperty(e.prototype,"activePageID",{get:function(){return this.activePage},set:function(e){this.activePage=e,this.activePage},enumerable:!0,configurable:!0}),e}(),Tp=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ap=function(){function e(e,t,i){void 0===i&&(i=!1),this.commandHandler=null,this.inAction=!1,this.pdfViewerBase=null,this.currentElement=null,this.blocked=!1,this.isTooltipVisible=!1,this.childTable={},this.helper=void 0,this.undoElement={annotations:[]},this.undoParentElement={annotations:[]},this.commandHandler=e,this.pdfViewerBase=t}return e.prototype.startAction=function(e){this.currentElement=e,this.inAction=!0},e.prototype.mouseDown=function(e){this.currentElement=e.source,this.startPosition=this.currentPosition=this.prevPosition=e.position,this.isTooltipVisible=!0,this.startAction(e.source)},e.prototype.mouseMove=function(e){return this.currentPosition=e.position,this.prevPageId=this.pdfViewerBase.activeElements.activePageID,!this.blocked},e.prototype.mouseUp=function(e){this.currentPosition=e.position,this.isTooltipVisible=!1,this.endAction(),this.helper=null},e.prototype.endAction=function(){this.commandHandler&&(this.commandHandler.tool="",this.helper&&this.commandHandler.remove(this.helper)),this.commandHandler=null,this.currentElement=null,this.currentPosition=null,this.inAction=!1,this.blocked=!1},e.prototype.mouseWheel=function(e){this.currentPosition=e.position},e.prototype.mouseLeave=function(e){this.mouseUp(e)},e.prototype.updateSize=function(e,t,i,n,o,s,a){var r=this.commandHandler.viewerBase.getZoomFactor(),l=this.currentPosition.x/r-this.startPosition.x/r,d=this.currentPosition.y/r-this.startPosition.y/r,h=e instanceof Kh?s:e.rotateAngle,p=Ls();Os(p,-h,0,0);var c,u=0,f=0,m=e instanceof Kh?e.actualSize.width:e.wrapper.bounds.width,g=e instanceof Kh?e.actualSize.height:e.wrapper.bounds.height,y=e;e.formFieldAnnotationType||e.annotName||e.shapeAnnotationType||e&&(y=e.annotations[0]);var v=this.commandHandler.annotationModule?this.commandHandler.annotationModule.findAnnotationSettings(y):{},w=0,b=0,S=0,C=0;(v.minWidth||v.maxWidth||v.minHeight||v.maxHeight)&&(w=v.maxHeight?v.maxHeight:2e3,b=v.maxWidth?v.maxWidth:2e3,S=v.minHeight?v.minHeight:0,C=v.minWidth?v.minWidth:0);var x=!1;if((S||C||w||b)&&(x=!0),x&&a){var M=this.getPositions(n,l,d),I=m+M.x,T=g+M.y;T>S&&T<w&&I>C&&I<b||((T<S||T>w)&&(d=T<S?S-g:w-g),(I<C||I>b)&&(l=I<C?C-m:b-m))}switch(n){case"ResizeWest":l=(c=Ps(p,{x:l,y:d})).x,d=c.y,f=1,d=0,x&&o.width-l>b&&(l=b-o.width),u=(o.width-l)/m;break;case"ResizeEast":l=(c=Ps(p,{x:l,y:d})).x,d=c.y,d=0,x&&o.width+l>b&&(l=b-o.width),u=(o.width+l)/m,f=1;break;case"ResizeNorth":u=1,l=(c=Ps(p,{x:l,y:d})).x,d=c.y,x&&o.height-d>w&&(d=w-o.height),f=(o.height-d)/g;break;case"ResizeSouth":u=1,l=(c=Ps(p,{x:l,y:d})).x,d=c.y,x&&o.height+d>w&&(d=w-o.height),f=(o.height+d)/g;break;case"ResizeNorthEast":l=(c=Ps(p,{x:l,y:d})).x,d=c.y,x&&(o.width+l>b&&(l=b-o.width),o.height-d>w&&(d=w-o.height)),u=(o.width+l)/m,f=(o.height-d)/g;break;case"ResizeNorthWest":l=(c=Ps(p,{x:l,y:d})).x,d=c.y,x&&(o.width-l>b&&(l=b-o.width),o.height-d>w&&(d=w-o.height)),u=(o.width-l)/m,f=(o.height-d)/g;break;case"ResizeSouthEast":l=(c=Ps(p,{x:l,y:d})).x,d=c.y,x&&(o.width+l>b&&(l=b-o.width),o.height+d>w&&(d=w-o.height)),f=(o.height+d)/g,u=(o.width+l)/m;break;case"ResizeSouthWest":l=(c=Ps(p,{x:l,y:d})).x,d=c.y,x&&(o.width-l>b&&(l=b-o.width),o.height+d>w&&(d=w-o.height)),u=(o.width-l)/m,f=(o.height+d)/g}return{width:u,height:f}},e.prototype.getPivot=function(e){switch(e){case"ResizeWest":return{x:1,y:.5};case"ResizeEast":return{x:0,y:.5};case"ResizeNorth":return{x:.5,y:1};case"ResizeSouth":return{x:.5,y:0};case"ResizeNorthEast":return{x:0,y:1};case"ResizeNorthWest":return{x:1,y:1};case"ResizeSouthEast":return{x:0,y:0};case"ResizeSouthWest":return{x:1,y:0}}return{x:.5,y:.5}},e.prototype.getPositions=function(e,t,i){switch(e){case"ResizeEast":return{x:t,y:0};case"ResizeSouthEast":return{x:t,y:i};case"ResizeSouth":return{x:0,y:i};case"ResizeNorth":return{x:0,y:-i};case"ResizeNorthEast":return{x:t,y:-i};case"ResizeNorthWest":return{x:-t,y:-i};case"ResizeWest":return{x:-t,y:0};case"ResizeSouthWest":return{x:-t,y:i}}return{x:t,y:i}},e}(),kp=function(e){function t(t,i){return e.call(this,t,i,!0)||this}return Tp(t,e),t.prototype.mouseDown=function(t){this.inAction=!0,this.mouseEventHelper(t),e.prototype.mouseDown.call(this,t)},t.prototype.mouseEventHelper=function(e){this.commandHandler&&this.commandHandler.annotationModule&&(this.commandHandler.annotationModule.overlappedCollections=bp(e,this.pdfViewerBase,this.commandHandler,!0));var t=bp(e,this.pdfViewerBase,this.commandHandler),i=!1;if(t&&"StickyNotes"===t.shapeAnnotationType&&t.annotationSettings&&t.annotationSettings.isLock&&(i=!this.commandHandler.annotationModule.checkAllowedInteractions("Select",t)),!i){var n=void 0;if(n=e.source&&null!==e.annotationSelectorSettings?e.source.annotationSelectorSettings:"",this.commandHandler){var o=this.commandHandler.selectedItems;if(o){var s=o.annotations[0],a=o.formFields[0],r=this.commandHandler.selectedItems.annotations[0],l=e.source;if((o.annotations.length&&e.info&&!e.info.ctrlKey&&this.commandHandler.annotationModule&&!1===this.commandHandler.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus||e.info&&e.info.ctrlKey&&(l&&"FreeText"===l.shapeAnnotationType||r&&"FreeText"===r.shapeAnnotationType)||m(t)&&this.commandHandler.formDesignerModule&&!(l&&"FreeText"===l.shapeAnnotationType||r&&("FreeText"===r.shapeAnnotationType||"Image"===r.shapeAnnotationType||"StickyNotes"===r.shapeAnnotationType)))&&this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),t&&(m(this.pdfViewerBase.isFreeTextSelected)||this.pdfViewerBase.isFreeTextSelected||(this.commandHandler.select([t.id],n),this.commandHandler.viewerBase.isAnnotationMouseDown=!0),this.pdfViewerBase.isFreeTextSelected=!1,this.commandHandler.viewerBase.isFormFieldMouseDown=!0),0===o.annotations.length&&s&&"HandWrittenSignature"!==s.shapeAnnotationType&&"SignatureText"!==s.shapeAnnotationType&&"SignatureImage"!==s.shapeAnnotationType&&"Path"!==s.shapeAnnotationType&&!s.formFieldAnnotationType&&(this.commandHandler.enableToolbar&&ge.isDevice&&!this.commandHandler.enableDesktopMode&&this.commandHandler.toolbarModule.showToolbar(!0),this.commandHandler.fireAnnotationUnSelect(s.annotName,s.pageIndex,s)),0===o.formFields.length&&this.commandHandler.formDesignerModule&&a&&a.formFieldAnnotationType){var d={name:a.name,id:a.id,value:a.value,fontFamily:a.fontFamily,fontSize:a.fontSize,fontStyle:a.fontStyle,color:a.color,backgroundColor:a.backgroundColor,alignment:a.alignment,isReadonly:a.isReadOnly,visibility:a.visibility,maxLength:a.maxLength,isRequired:a.isRequired,isPrint:a.isPrint,rotation:a.rotation,tooltip:a.tooltip,options:a.options,isChecked:a.isChecked,isSelected:a.isSelected};this.commandHandler.fireFormFieldUnselectEvent("formFieldUnselect",d,a.pageIndex)}else if(this.pdfViewerBase.currentTarget&&this.pdfViewerBase.currentTarget.id&&this.commandHandler.formFields&&"mousedown"===event.type)for(var h=0;h<this.commandHandler.formFields.length;h++){var p=this.commandHandler.formFields[parseInt(h.toString(),10)];if(this.pdfViewerBase.currentTarget&&this.pdfViewerBase.currentTarget.id===p.id){d={value:p.value,fontFamily:p.fontFamily,fontSize:p.fontSize,fontStyle:p.fontStyle,color:p.color,backgroundColor:p.backgroundColor,alignment:p.alignment,isReadonly:p.isReadonly,visibility:p.visibility,maxLength:p.maxLength,isRequired:p.isRequired,isPrint:p.isPrint,rotation:p.rotateAngle,tooltip:p.tooltip,options:p.options,isChecked:p.isChecked,isSelected:p.isSelected};t?this.pdfViewerBase.currentTarget.id!=event.target.id&&"e-pv-text-layer"!=event.target.className&&(this.commandHandler.fireFocusOutFormField(d,p.pageIndex),this.pdfViewerBase.currentTarget=null):(this.commandHandler.fireFocusOutFormField(d,p.pageIndex),this.pdfViewerBase.currentTarget=null)}}}}}},t.prototype.mouseMove=function(t){return e.prototype.mouseMove.call(this,t),!this.blocked},t.prototype.mouseUp=function(t){this.mouseEventHelper(t),this.inAction=!1,e.prototype.mouseUp.call(this,t)},t.prototype.mouseLeave=function(e){this.inAction&&this.mouseUp(e)},t}(Ap),Vp=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.currentTarget=null,n.prevNode=null,n}return Tp(t,e),t.prototype.mouseDown=function(t){e.prototype.mouseDown.call(this,t),this.offset={x:t.source.wrapper.offsetX,y:t.source.wrapper.offsetY},this.startPosition=t.position;var i=qs(t.source);this.redoElement={bounds:{x:i.wrapper.offsetX,y:i.wrapper.offsetY,width:i.wrapper.actualSize.width,height:i.wrapper.actualSize.height}},_s(i)&&(this.redoElement.vertexPoints=i.vertexPoints,this.redoElement.leaderHeight=i.leaderHeight),this.inAction=!0},t.prototype.mouseUp=function(t){if(this.commandHandler&&t.source){this.checkisAnnotationMove(t);var i=t.source.annotationSelectorSettings;this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.commandHandler.select([t.source.id],i),this.pdfViewerBase.activeElements.activePageID==t.source.pageIndex&&this.commandHandler.dragSelectedObjects(this.calculateMouseActionXDiff(t),this.calculateMouseActionYDiff(t),this.pdfViewerBase.activeElements.activePageID,i,null),!t.source||"Textbox"!==t.source.formFieldAnnotationType&&"Checkbox"!==t.source.formFieldAnnotationType&&"RadioButton"!==t.source.formFieldAnnotationType&&"ListBox"!==t.source.formFieldAnnotationType&&"SignatureField"!==t.source.formFieldAnnotationType&&"InitialField"!==t.source.formFieldAnnotationType&&"DropdownList"!==t.source.formFieldAnnotationType&&"PasswordField"!==t.source.formFieldAnnotationType||this.commandHandler.formDesignerModule.updateHTMLElement(t.source),this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,i),this.commandHandler.viewerBase.isAnnotationMouseMove=!1,this.commandHandler.viewerBase.isFormFieldMouseMove=!1;var n={bounds:{x:t.source.wrapper.offsetX,y:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height},modifiedDate:t.source.modifiedDate};if(_s(t.source)&&(n.vertexPoints=t.source.vertexPoints,n.leaderHeight=t.source.leaderHeight),t.target&&t.target.formFieldAnnotationType){var o=t.target,s={value:o.value,fontFamily:o.fontFamily,fontSize:o.fontSize,fontStyle:o.fontStyle,color:o.color,backgroundColor:o.backgroundColor,borderColor:o.borderColor,thickness:o.thickness,alignment:o.alignment,isReadonly:o.isReadonly,visibility:o.visibility,maxLength:o.maxLength,isRequired:o.isRequired,isPrint:o.isPrint,rotation:o.rotateAngle,tooltip:o.tooltip,options:o.options,isChecked:o.isChecked,isSelected:o.isSelected},a={X:t.source.wrapper.offsetX,Y:t.source.wrapper.offsetY,Width:t.source.wrapper.actualSize.width,Height:t.source.wrapper.actualSize.height},r={X:this.offset.x,Y:this.offset.y,Width:t.source.wrapper.actualSize.width,Height:t.source.wrapper.actualSize.height};this.commandHandler.fireFormFieldMoveEvent("formFieldMove",s,o.pageIndex,r,a)}this.commandHandler.annotation&&(this.commandHandler.annotation.addAction(this.pageIndex,null,t.source,"Drag","",this.redoElement,n),this.commandHandler.annotation.stampAnnotationModule.updateSessionStorage(t.source,null,"Drag"),this.commandHandler.annotation.stickyNotesAnnotationModule.updateStickyNotes(t.source,null))}var l=this.commandHandler&&this.commandHandler.selectedItems&&this.commandHandler.selectedItems.annotations&&this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0].shapeAnnotationType:null;(l&&"Image"!==l&&"SignatureImage"!==l||this.commandHandler&&this.commandHandler.selectedItems&&this.commandHandler.selectedItems.formFields&&this.commandHandler.selectedItems.formFields.length>0)&&e.prototype.mouseUp.call(this,t)},t.prototype.calculateMouseXDiff=function(){return this.currentPosition&&this.startPosition?this.currentPosition.x-this.startPosition.x:0},t.prototype.calculateMouseYDiff=function(){return this.currentPosition&&this.startPosition?this.currentPosition.y-this.startPosition.y:0},t.prototype.calculateMouseActionXDiff=function(e){var t=this.calculateMouseXDiff()/this.commandHandler.viewerBase.getZoomFactor();return this.offset?this.offset.x+t-e.source.wrapper.offsetX:0},t.prototype.calculateMouseActionYDiff=function(e){var t=this.calculateMouseYDiff()/this.commandHandler.viewerBase.getZoomFactor();return this.offset?this.offset.y+t-e.source.wrapper.offsetY:0},t.prototype.mouseMove=function(t,i,n){if(e.prototype.mouseMove.call(this,t),this.inAction){this.currentPosition=t.position,this.currentTarget=t.target;var o=t.source.annotationSelectorSettings,s=this.calculateMouseXDiff()/this.commandHandler.viewerBase.getZoomFactor(),a=this.calculateMouseYDiff()/this.commandHandler.viewerBase.getZoomFactor(),r=this.offset.x+s,l=this.offset.y+a,d=this.calculateMouseActionXDiff(t),h=this.calculateMouseActionYDiff(t),p=this.commandHandler.selectedItems.annotations[0],c=void 0;if(this.helper)d=r-this.helper.wrapper.offsetX,h=l-this.helper.wrapper.offsetY;else{(c=this.commandHandler.selectedItems.annotations.length>0?qs(this.commandHandler.selectedItems.annotations[0]):qs(this.commandHandler.selectedItems.formFields[0])).wrapper&&(d=r-c.wrapper.offsetX,h=l-c.wrapper.offsetY,c.bounds=this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0].wrapper.bounds:this.commandHandler.selectedItems.formFields[0].wrapper.bounds),c.wrapper=void 0,c.id="diagram_helper","Stamp"===c.shapeAnnotationType?(c.strokeColor="",c.borderDashArray="",c.fillColor="transparent",c.stampFillColor="transparent",c.data=""):"FreeText"===c.shapeAnnotationType?(c.strokeColor="blue",c.fillColor="transparent",c.thickness=1,c.opacity=1,c.dynamicText=""):"SignatureText"===c.shapeAnnotationType?(c.strokeColor="red",c.borderDashArray="5,5",c.fillColor="transparent",c.thickness=2,c.opacity=1,c.data=""):(c.strokeColor="red",c.borderDashArray="5,5",c.fillColor="transparent",c.thickness=2,c.opacity=1),!0===c.enableShapeLabel&&(c.labelContent="");var u=c.shapeAnnotationType;i||"Image"===u||"SignatureImage"===u?c=this.helper=t.source:this.helper=c=this.commandHandler.add(c),this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations=[c]:this.commandHandler.selectedItems.formFields=[c]}if(this.helper&&"Stamp"===this.helper.shapeAnnotationType&&(i=!0),this.commandHandler.checkBoundaryConstraints(d,h,this.pdfViewerBase.activeElements.activePageID,this.helper.wrapper.bounds,i,n)){u=this.helper.shapeAnnotationType;if(!this.helper||"Image"!==u&&"SignatureImage"!==u)this.commandHandler.dragSelectedObjects(d,h,this.pdfViewerBase.activeElements.activePageID,o,this.helper);else{this.checkisAnnotationMove(t);var f=t.source.annotationSelectorSettings;this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.commandHandler.select([t.source.id],f),this.commandHandler.dragSelectedObjects(d,h,this.pdfViewerBase.activeElements.activePageID,f,this.helper),this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,f)}this.prevNode=this.helper,this.prevPosition=this.currentPosition}else this.currentPosition=this.prevPosition;p&&p.annotName&&this.commandHandler.annotation.triggerAnnotationMove(p,!0)}return!0},t.prototype.mouseLeave=function(t){var i=t.source.annotationSelectorSettings,n=this.offset.x+this.calculateMouseXDiff(),o=this.offset.y+this.calculateMouseYDiff(),s=n-t.source.wrapper.offsetX,a=o-t.source.wrapper.offsetY;this.commandHandler.dragSelectedObjects(s,a,this.prevPageId,i,null),this.commandHandler.renderSelector(this.prevPageId,i),e.prototype.mouseLeave.call(this,t)},t.prototype.endAction=function(){e.prototype.endAction.call(this),this.currentTarget=null,this.prevPosition=null},t.prototype.checkisAnnotationMove=function(e){this.commandHandler.selectedItems&&this.commandHandler.selectedItems.annotations&&this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0].annotName===e.source.annotName&&(this.commandHandler.viewerBase.isAnnotationMouseMove=!0):this.commandHandler.viewerBase.isAnnotationMouseMove=!1,this.commandHandler.selectedItems&&this.commandHandler.selectedItems.formFields&&this.commandHandler.selectedItems.formFields.length>0?this.commandHandler.selectedItems.formFields[0].name===e.source.name&&(this.commandHandler.viewerBase.isFormFieldMouseMove=!0):this.commandHandler.viewerBase.isFormFieldMouseMove=!1},t}(Ap),Ep=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Tp(t,e),t.prototype.mouseDown=function(t){e.prototype.mouseUp.call(this,t)},t.prototype.mouseMove=function(t){var i;if(!this.inAction){var n=this.pdfViewerBase.activeElements.activePageID;this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID);var o=this.commandHandler.annotation.stampAnnotationModule.moveStampElement(t.position.x,t.position.y,n);if("SignatureText"===o.shapeAnnotationType){var s=this.getTextWidth(o.data,o.fontSize,o.fontFamily),a=1;s>o.bounds.width&&(a=o.bounds.width/s),o.fontSize=this.getFontSize(Math.floor(o.fontSize*a));o.bounds.height=o.fontSize<32?2*o.fontSize:o.bounds.height,o.thickness=0}i=this.commandHandler.add(o),t.source=this.commandHandler.annotations[this.commandHandler.annotations.length-1],t.sourceWrapper=t.source.wrapper,this.inAction=!0;var r=t.source;!r||"HandWrittenSignature"!==r.shapeAnnotationType&&"SignatureText"!==r.shapeAnnotationType&&"SignatureImage"!==r.shapeAnnotationType?this.offset={x:t.source.wrapper.offsetX,y:t.source.wrapper.offsetY}:this.offset={x:t.source.wrapper.offsetX-t.source.wrapper.bounds.width/2,y:t.source.wrapper.offsetY-t.source.wrapper.bounds.height/2},this.startPosition=t.position,this.commandHandler.select([i.id])}var l=t.source.annotationSelectorSettings;return e.prototype.mouseMove.call(this,t,!0,!0),this.commandHandler.renderSelector(t.source.pageIndex,l),this.inAction},t.prototype.getTextWidth=function(e,t,i){var n,o=document.createElement("canvas").getContext("2d");return t&&(n=t+"px "+i),o.font=n||getComputedStyle(document.body).font,o.measureText(e).width},t.prototype.getFontSize=function(e){return e%2===0?e:--e},t}(Vp),Dp=function(e){function t(t,i,n){var o=e.call(this,t,i)||this;return o.sourceObject=n,o}return Tp(t,e),t.prototype.mouseDown=function(t){this.pdfViewerBase.disableTextSelectionMode(),e.prototype.mouseDown.call(this,t),this.inAction=!0;var i={currentPosition:this.currentPosition,prevPosition:this.prevPosition};this.commandHandler.annotation.inkAnnotationModule.drawInkInCanvas(i,this.pdfViewerBase.activeElements.activePageID)},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.inAction){var i={currentPosition:this.currentPosition,prevPosition:this.pdfViewerBase.prevPosition};this.commandHandler.annotation.inkAnnotationModule.drawInkInCanvas(i,this.pdfViewerBase.activeElements.activePageID)}return this.inAction},t.prototype.mouseUp=function(e){return this.commandHandler.annotation.inkAnnotationModule.storePathData(),!0},t.prototype.mouseLeave=function(e){},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t}(Ap),Np=function(e){function t(t,i,n){var o=e.call(this,t,i,!0)||this;return o.endPoint=n,o}return Tp(t,e),t.prototype.mouseDown=function(t){this.inAction=!0,this.undoElement=void 0,e.prototype.mouseDown.call(this,t),t.source&&t.source.annotations&&({x:this.prevPosition.x,y:this.prevPosition.y},t.source.annotations[0]),this.initialPosition=t.position,this.prevSource=this.commandHandler.selectedItems.annotations[0];var i=qs(t.source);this.redoElement={bounds:{x:i.wrapper.offsetX,y:i.wrapper.offsetY,width:i.wrapper.actualSize.width,height:i.wrapper.actualSize.height}},_s(i)&&(this.redoElement.vertexPoints=i.vertexPoints,this.redoElement.leaderHeight=i.leaderHeight,"Distance"!==i.measureType&&"Perimeter"!==i.measureType&&"Area"!==i.measureType&&"Volume"!==i.measureType||(this.redoElement.notes=i.notes)),this.currentPosition=t.position},t.prototype.mouseUp=function(t){if(this.commandHandler){var i=this.commandHandler.selectedItems.annotations[0];if(i){var n=this.commandHandler.annotationModule.findAnnotationSettings(i),o=0,s=0,a=0,r=0;if((n.minWidth||n.maxWidth||n.minHeight||n.maxHeight)&&(o=n.maxHeight?n.maxHeight:2e3,s=n.maxWidth?n.maxWidth:2e3,a=n.minHeight?n.minHeight:0,r=n.minWidth?n.minWidth:0),i.vertexPoints.length>3){var l=this.commandHandler.viewerBase.checkAnnotationWidth(i.vertexPoints),d=l.width,h=l.height;a||r||o||s?(h>a&&h<o||d>r&&d<s)&&this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:i.vertexPoints,leaderHeight:i.leaderHeight}):this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:i.vertexPoints,leaderHeight:i.leaderHeight})}else if(a||r||o||s)if("Line"===i.shapeAnnotationType||"Distance"===i.shapeAnnotationType||"LineWidthArrowHead"===i.shapeAnnotationType){var p=0,c=0,u=(p=i.vertexPoints[0].x>i.vertexPoints[1].x?i.vertexPoints[0].x-i.vertexPoints[1].x:i.vertexPoints[1].x-i.vertexPoints[0].x)>(c=i.vertexPoints[0].y>i.vertexPoints[1].y?i.vertexPoints[0].y-i.vertexPoints[1].y:i.vertexPoints[1].y-i.vertexPoints[0].y)?p:c;u<(o||s)&&u>(a||r)&&this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:i.vertexPoints,leaderHeight:i.leaderHeight})}else this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:i.vertexPoints,leaderHeight:i.leaderHeight});else this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:i.vertexPoints,leaderHeight:i.leaderHeight});var f=t.source.annotationSelectorSettings;this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.commandHandler.select([this.prevSource.id],f),this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,f);var m={bounds:{x:t.source.wrapper.offsetX,y:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height}};"Distance"!==i.measureType&&"Perimeter"!==i.measureType&&"Area"!==i.measureType&&"Volume"!==i.measureType||(this.commandHandler.annotation.updateCalibrateValues(this.commandHandler.selectedItems.annotations[0]),m.notes=t.source.notes),_s(t.source)&&(m.vertexPoints=t.source.vertexPoints,m.leaderHeight=t.source.leaderHeight),this.commandHandler.annotation.addAction(this.pageIndex,null,this.prevSource,"Resize","",this.redoElement,m)}}e.prototype.mouseUp.call(this,t)},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.currentPosition=t.position,this.currentPosition&&this.prevPosition){var i=this.currentPosition.x-this.prevPosition.x,n=this.currentPosition.y-this.prevPosition.y;if(t.source&&t.source.annotations&&({x:this.currentPosition.x,y:this.currentPosition.y},{x:this.prevPosition.x,y:this.prevPosition.y},t.source.annotations[0]),this.inAction&&void 0!==this.endPoint&&0!==i||0!==n){if(!this.helper){var o=qs(this.commandHandler.selectedItems.annotations[0]);o.id="diagram_helper",o.strokeColor="red",o.borderDashArray="5,5",o.fillColor="transparent",o.thickness=2,o.opacity=1,!0===o.enableShapeLabel&&(o.labelContent=""),this.helper=o=this.commandHandler.add(o),this.commandHandler.selectedItems.annotations=[o]}var s=t.source.annotationSelectorSettings;this.blocked=!this.commandHandler.dragConnectorEnds(this.endPoint,this.helper,this.currentPosition,this.selectedSegment,t.target,null,s),this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,s)}}return this.prevPosition=this.currentPosition,!this.blocked},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.endAction=function(){e.prototype.endAction.call(this),this.prevPosition=null,this.endPoint=null},t}(Ap),Fp=function(e){function t(t,i,n){var o=e.call(this,t,i,!0)||this;return o.initialBounds=new Nh,o.corner=n,o}return Tp(t,e),t.prototype.mouseDown=function(t){e.prototype.mouseDown.call(this,t),this.initialBounds.x=t.source.wrapper.offsetX,this.initialBounds.y=t.source.wrapper.offsetY,this.initialBounds.height=t.source.wrapper.actualSize.height,this.initialBounds.width=t.source.wrapper.actualSize.width,this.initialPosition=t.position;var i=qs(t.source);this.redoElement={bounds:{x:i.wrapper.offsetX,y:i.wrapper.offsetY,width:i.wrapper.actualSize.width,height:i.wrapper.actualSize.height}},_s(i)&&(this.redoElement.vertexPoints=i.vertexPoints,this.redoElement.leaderHeight=i.leaderHeight),"Radius"===i.measureType&&(this.redoElement.notes=i.notes),this.prevSource=this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0]:this.commandHandler.selectedItems.formFields[0]},t.prototype.mouseUp=function(t,i){t.source;var n=qs(t.source);if(this.commandHandler&&this.prevSource){this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.commandHandler.viewerBase.isAnnotationSelect=!0,this.commandHandler.viewerBase.isFormFieldSelect=!0,this.commandHandler.select([this.prevSource.id],this.prevSource.annotationSelectorSettings);var o=this.updateSize(this.prevSource,this.currentPosition,this.initialPosition,this.corner,this.initialBounds,null,!0);if(this.blocked=this.scaleObjects(o.width,o.height,this.corner,this.currentPosition,this.initialPosition,this.prevSource,t.info.ctrlKey),this.commandHandler.selectedItems&&this.commandHandler.selectedItems.annotations&&this.commandHandler.selectedItems.annotations[0]&&"Stamp"===this.commandHandler.selectedItems.annotations[0].shapeAnnotationType&&(this.commandHandler.stampSettings.minHeight||this.commandHandler.stampSettings.minWidth)&&this.commandHandler.select([this.prevSource.id],this.prevSource.annotationSelectorSettings),this.commandHandler.selectedItems.formFields.length>0&&("Textbox"===this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType||"Checkbox"===this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType||"RadioButton"===this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType||"InitialField"===this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType||"SignatureField"===this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType||"DropdownList"===this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType||"ListBox"===this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType||"PasswordField"===this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType)&&("SignatureField"===this.commandHandler.selectedItems.formFields[0].formFieldAnnotationType&&(this.commandHandler.selectedItems.formFields[0].signatureIndicatorSettings=this.commandHandler.selectedItems.formFields[0].signatureIndicatorSettings?this.commandHandler.selectedItems.formFields[0].signatureIndicatorSettings:{opacity:1,backgroundColor:"rgba(255, 228, 133, 0.35)",width:19,height:10,fontSize:10,text:null,color:"black"}),this.commandHandler.formDesignerModule.updateHTMLElement(this.commandHandler.selectedItems.formFields[0])),this.commandHandler.renderSelector(this.prevPageId,this.prevSource.annotationSelectorSettings),this.commandHandler.annotation&&t.source.wrapper){var s={bounds:{x:t.source.wrapper.offsetX,y:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height}};if(_s(t.source)&&(s.vertexPoints=t.source.vertexPoints,s.leaderHeight=t.source.leaderHeight),"Radius"===this.prevSource.measureType&&(s.notes=t.source.notes,this.commandHandler.annotation.updateCalibrateValues(this.prevSource)),"SignatureText"===this.prevSource.shapeAnnotationType){var a=s.bounds.width/n.width;s.fontSize=this.prevSource.wrapper.children[1].style.fontSize*a,null!=t.target&&(t.target.fontSize=s.fontSize,t.target.wrapper.children[1].style.fontSize=s.fontSize,t.target.wrapper.children[1].horizontalAlignment="Center",t.target.wrapper.children[1].verticalAlignment="Center",t.target.wrapper.children[1].setOffsetWithRespectToBounds(0,0,"Absolute"),this.commandHandler.selectedItems.annotations[0].wrapper.children[1].style.fontSize=s.fontSize,this.commandHandler.selectedItems.annotations[0].wrapper.children[1].horizontalAlignment="Center",this.commandHandler.selectedItems.annotations[0].wrapper.children[1].verticalAlignment="Center",this.commandHandler.selectedItems.annotations[0].wrapper.children[1].setOffsetWithRespectToBounds(0,0,"Absolute"),this.commandHandler.selectedItems.annotations[0].fontSize=s.fontSize)}"SignatureText"===this.prevSource.shapeAnnotationType&&this.commandHandler.selectedItems.annotations&&this.commandHandler.selectedItems.annotations.length>0&&this.commandHandler.nodePropertyChange(this.commandHandler.selectedItems.annotations[0],{fontSize:s.fontSize}),this.commandHandler.annotation.addAction(this.pageIndex,null,this.prevSource,"Resize","",this.redoElement,s)}if(t.target&&t.target.formFieldAnnotationType){var r=t.target,l={value:r.value,fontFamily:r.fontFamily,fontSize:r.fontSize,fontStyle:r.fontStyle,color:r.color,backgroundColor:r.backgroundColor,alignment:r.alignment,isReadonly:r.isReadonly,visibility:r.visibility,maxLength:r.maxLength,isRequired:r.isRequired,isPrint:r.isPrint,rotation:r.rotateAngle,tooltip:r.tooltip,options:r.options,isChecked:r.isChecked,isSelected:r.isSelected},d={X:t.source.wrapper.offsetX,Y:t.source.wrapper.offsetY,Width:t.source.wrapper.actualSize.width,Height:t.source.wrapper.actualSize.height},h={X:this.initialBounds.x,Y:this.initialBounds.y,Width:this.initialBounds.width,Height:this.initialBounds.height};this.commandHandler.fireFormFieldResizeEvent("formFieldResize",l,r.pageIndex,h,d)}this.commandHandler.annotation&&this.commandHandler.annotation.stampAnnotationModule&&this.commandHandler.annotation.stampAnnotationModule.updateSessionStorage(t.source,this.prevSource.id,"Resize")}return e.prototype.mouseUp.call(this,t),!this.blocked},t.prototype.mouseMove=function(t){e.prototype.mouseMove.call(this,t);var i=t.source;this.currentPosition=t.position;var n=this.currentPosition.x-this.startPosition.x,o=this.currentPosition.y-this.startPosition.y;n/=this.commandHandler.viewerBase.getZoomFactor(),o/=this.commandHandler.viewerBase.getZoomFactor();var s=t.source,a=this.getPoints(n,o),r=s.width+a.x,l=s.height+a.y,d=i;i&&i.annotations&&(d=i.annotations[0]);var h=this.commandHandler.annotationModule?this.commandHandler.annotationModule.findAnnotationSettings(d):{},p=0,c=0,u=0,f=0;(h.minWidth||h.maxWidth||h.minHeight||h.maxHeight)&&(p=h.maxHeight?h.maxHeight:2e3,c=h.maxWidth?h.maxWidth:2e3,u=h.minHeight?h.minHeight:0,f=h.minWidth?h.minWidth:0),(u||f||p||c)&&(l>=u&&l<=p&&r>=f&&r<=c||((l<u||l>p)&&(o=l<u?u-s.height:p-s.height),(r<f||r>c)&&(n=r<f?f-s.width:c-s.width)));var m={x:n,y:o};if(this.currentElement.wrapper&&(m=Xh(-this.currentElement.wrapper.rotateAngle,void 0,void 0,m)),m=this.getChanges(m),this.commandHandler.renderSelector(this.prevPageId,this.prevSource.annotationSelectorSettings),!this.helper){var g=this.commandHandler.selectedItems.annotations.length>0?qs(this.commandHandler.selectedItems.annotations[0]):qs(this.commandHandler.selectedItems.formFields[0]);g.id="diagram_helper","Stamp"===g.shapeAnnotationType?(g.strokeColor="",g.borderDashArray="",g.fillColor="transparent",g.stampFillColor="transparent",g.data=""):"FreeText"===g.shapeAnnotationType?(g.strokeColor="blue",g.fillColor="transparent",g.thickness=1,g.opacity=1,g.dynamicText=""):(g.bounds=this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0].wrapper.bounds:this.commandHandler.selectedItems.formFields[0].wrapper.bounds,g.strokeColor="red",g.borderDashArray="5,5",g.fillColor="transparent",g.thickness=2,g.opacity=1),!0===g.enableShapeLabel&&(g.labelContent=""),"SignatureText"===g.shapeAnnotationType&&(g.fillColor="transparent",g.thickness=1,g.opacity=1,g.data=""),this.helper=g=this.commandHandler.add(g),this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations=[g]:this.commandHandler.selectedItems.formFields=[g]}var y=this.updateSize(this.helper,this.startPosition,this.currentPosition,this.corner,this.initialBounds);return this.blocked=!this.scaleObjects(y.width,y.height,this.corner,this.startPosition,this.currentPosition,this.helper,t.info.ctrlKey),this.prevPosition=this.currentPosition,!this.blocked},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.getTooltipContent=function(e){return"W:"+Math.round(e.wrapper.bounds.width)+" H:"+Math.round(e.wrapper.bounds.height)},t.prototype.getChanges=function(e){switch(this.corner){case"ResizeEast":return{x:e.x,y:0};case"ResizeSouthEast":return e;case"ResizeSouth":return{x:0,y:e.y};case"ResizeNorth":return{x:0,y:-e.y};case"ResizeNorthEast":return{x:e.x,y:-e.y};case"ResizeNorthWest":return{x:-e.x,y:-e.y};case"ResizeWest":return{x:-e.x,y:0};case"ResizeSouthWest":return{x:-e.x,y:e.y}}return e},t.prototype.getPoints=function(e,t){switch(this.corner){case"ResizeEast":return{x:e,y:0};case"ResizeSouthEast":return{x:e,y:t};case"ResizeSouth":return{x:0,y:t};case"ResizeNorth":return{x:0,y:-t};case"ResizeNorthEast":return{x:e,y:-t};case"ResizeNorthWest":return{x:-e,y:-t};case"ResizeWest":return{x:-e,y:0};case"ResizeSouthWest":return{x:-e,y:t}}return{x:e,y:t}},t.prototype.scaleObjects=function(e,t,i,n,o,s,a){var r=this.commandHandler.annotationModule?this.commandHandler.annotationModule.findAnnotationSettings(s):{},l=0,d=0,h=this.currentPosition.x-this.startPosition.x,p=this.currentPosition.y-this.startPosition.y;h/=this.commandHandler.viewerBase.getZoomFactor(),p/=this.commandHandler.viewerBase.getZoomFactor();var c=s,u=this.getPoints(h,p),f=c.bounds.width+u.x,m=c.bounds.height+u.y;return(r.minWidth||r.maxWidth||r.minHeight||r.maxHeight)&&(l=r.maxHeight?r.maxHeight:2e3,d=r.maxWidth?r.maxWidth:2e3,r.minHeight?r.minHeight:0,r.minWidth?r.minWidth:0),s instanceof np&&1===s.annotations.length&&("Perimeter"===s.annotations[0].shapeAnnotationType||"Radius"===s.annotations[0].shapeAnnotationType||"Stamp"===s.shapeAnnotationType)?t=e=1!==t||1!==e?Math.max(1===t?0:t,1===e?0:e):n!==o?Math.max(t,e):0:"Image"===s.shapeAnnotationType||"HandWrittenSignature"===s.shapeAnnotationType||"SignatureText"===s.shapeAnnotationType||"SignatureImage"===s.shapeAnnotationType?(1===t&&1===e||a&&(f>=d&&m<l&&(t=Math.max(t,e)),m>=l&&f<d&&(e=Math.max(t,e)),f<d&&m<l&&(t=e=Math.max(t,e))),a||(t=e=Math.max(t,e))):"Perimeter"!==s.shapeAnnotationType&&"Radius"!==s.shapeAnnotationType&&"Stamp"!==s.shapeAnnotationType||("Stamp"===s.shapeAnnotationType?(l||t||(t=Math.max(1===t?0:t)),d||e||(e=Math.max(1===e?0:e))):l&&d||1===t&&1===e||(t=e=Math.max(1===t?0:t,1===e?0:e))),this.blocked=this.commandHandler.scaleSelectedItems(e,t,this.getPivot(this.corner)),this.blocked},t}(Ap),Lp=function(e){function t(t,i,n){var o=e.call(this,t,i)||this;return o.sourceObject=n,o}return Tp(t,e),t.prototype.mouseDown=function(t){if(!isNaN(this.pdfViewerBase.activeElements.activePageID)&&"e-pv-page-container"!=event.target.className){e.prototype.mouseDown.call(this,t),this.inAction=!0;var i={bounds:{x:100,y:300,width:100,height:100},pageIndex:0,strokeColor:"red",thickness:3};i.id=Hh(),this.sourceObject.pageIndex=i.pageIndex=this.pdfViewerBase.activeElements.activePageID||0,this.sourceObject.enableShapeLabel=this.commandHandler.enableShapeLabel,this.pdfViewerBase.updateFreeTextProperties(this.sourceObject),this.isFormDesign=!1;var n=document.getElementById("FormField_helper_html_element");if(n&&n.remove(),this.commandHandler.drawingObject=this.drawingObject=this.commandHandler.add(this.sourceObject||i),"Textbox"===this.drawingObject.formFieldAnnotationType||"SignatureField"===this.drawingObject.formFieldAnnotationType||"InitialField"===this.drawingObject.formFieldAnnotationType||"Checkbox"===this.drawingObject.formFieldAnnotationType||"ListBox"===this.drawingObject.formFieldAnnotationType||"RadioButton"===this.drawingObject.formFieldAnnotationType||"DropdownList"===this.drawingObject.formFieldAnnotationType||"PasswordField"===this.drawingObject.formFieldAnnotationType){this.inAction=!1,this.drawingObject.pageNumber=this.pdfViewerBase.getActivePage(!0);var o=this.commandHandler.formDesignerModule.updateFormFieldInitialSize(this.drawingObject.wrapper.children[0],this.drawingObject.formFieldAnnotationType),s=this.pdfViewerBase.pageContainer.firstElementChild.clientWidth-o.width,a=this.pdfViewerBase.pageContainer.firstElementChild.clientHeight-o.height,r=this.pdfViewerBase.pageContainer.firstElementChild.offsetLeft,l=void 0;if(this.currentPosition.y>=a&&event.target&&event.target.parentElement&&event.target.parentElement.classList.contains("foreign-object")){var d=event.path[3].getBoundingClientRect();l=event.clientX-d.left}else l=this.currentPosition.x-r;var h=void 0;h=this.currentPosition.x>=s&&this.currentPosition.y>=a?{x:s,y:a,width:this.drawingObject.wrapper.children[0].width,height:this.drawingObject.wrapper.children[0].height}:this.currentPosition.x>=s?{x:s,y:this.currentPosition.y,width:this.drawingObject.wrapper.children[0].width,height:this.drawingObject.wrapper.children[0].height}:this.currentPosition.y>=a?{x:l,y:a,width:this.drawingObject.wrapper.children[0].width,height:this.drawingObject.wrapper.children[0].height}:{x:this.currentPosition.x,y:this.currentPosition.y,width:this.drawingObject.wrapper.children[0].width,height:this.drawingObject.wrapper.children[0].height},this.updateNodeDimension(this.drawingObject,h),this.drawingObject.bounds.x=this.drawingObject.bounds.x-this.drawingObject.bounds.width/2,this.drawingObject.bounds.y=this.drawingObject.bounds.y-this.drawingObject.bounds.height/2,this.commandHandler.formFieldCollection.push(this.drawingObject);var p=this.drawingObject,c={id:p.id,name:p.name,value:p.value,type:p.formFieldAnnotationType,isReadOnly:p.isReadonly,fontFamily:p.fontFamily,fontSize:p.fontSize,fontStyle:p.fontStyle,color:p.color,backgroundColor:p.backgroundColor,alignment:p.alignment,visibility:p.visibility,maxLength:p.maxLength,isRequired:p.isRequired,isPrint:p.isPrint,isSelected:p.isSelected,isChecked:p.isChecked,tooltip:p.tooltip,bounds:p.bounds,thickness:p.thickness,borderColor:p.borderColor,signatureIndicatorSettings:p.signatureIndicatorSettings,pageIndex:p.pageIndex};this.commandHandler.formFieldCollections.push(c),this.commandHandler.formDesignerModule.drawHTMLContent(this.drawingObject.formFieldAnnotationType,this.drawingObject.wrapper.children[0],this.drawingObject,this.drawingObject.pageIndex,this.commandHandler),this.commandHandler.select([this.commandHandler.drawingObject.id],this.commandHandler.annotationSelectorSettings),this.commandHandler.annotation&&this.commandHandler.annotation.addAction(this.pdfViewerBase.getActivePage(!0),null,this.drawingObject,"Addition","",this.drawingObject,this.drawingObject),this.endAction(),this.pdfViewerBase.tool=null,this.pdfViewerBase.action="Select",this.drawingObject=null,this.pdfViewerBase.isMouseDown=!1,this.pdfViewerBase.pdfViewer.drawingObject=null,this.isFormDesign=!0}}},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.inAction&&!1===Ns.equals(this.currentPosition,this.prevPosition)){this.dragging=!0;var i=Nh.toBounds([this.prevPosition,this.currentPosition]);this.updateNodeDimension(this.drawingObject,i),"Radius"===this.drawingObject.shapeAnnotationType&&this.updateRadiusLinePosition(this.drawingObject.wrapper.children[1],this.drawingObject)}return!0},t.prototype.mouseUp=function(t){if(this.drawingObject&&this.dragging){this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.commandHandler.select([this.drawingObject.id],this.commandHandler.annotationSelectorSettings);var i=this.commandHandler.selectedItems.annotations[0];this.commandHandler.nodePropertyChange(i,{bounds:{x:i.wrapper.offsetX,y:i.wrapper.offsetY}}),this.commandHandler.annotation.updateCalibrateValues(this.drawingObject,!0),this.commandHandler&&!this.isFormDesign&&this.commandHandler.annotation.addAction(this.pageIndex,null,this.drawingObject,"Addition","",this.drawingObject,this.drawingObject),this.dragging=!1,e.prototype.mouseUp.call(this,t),this.inAction=!1}else e.prototype.mouseUp.call(this,t);this.drawingObject=null},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t.prototype.updateNodeDimension=function(e,t){var i=this.commandHandler.viewerBase.getZoomFactor();e.bounds.x=t.x/i+t.width/i,e.bounds.y=t.y/i+t.height/i,e.bounds.width=t.width/i,e.bounds.height=t.height/i;var n=this.commandHandler.annotationModule?this.commandHandler.annotationModule.findAnnotationSettings(e):{},o=0,s=0;n.maxWidth||n.maxHeight?(o=n.maxHeight?n.maxHeight:2e3,s=n.maxWidth?n.maxWidth:2e3,e.bounds.width>s&&(e.bounds.width=s),e.bounds.height>o&&(e.bounds.height=o),e.bounds.height<=o&&e.bounds.width<=s&&this.commandHandler.nodePropertyChange(e,{bounds:e.bounds})):this.commandHandler.nodePropertyChange(e,{bounds:e.bounds})},t.prototype.updateRadiusLinePosition=function(e,t){var i={x:t.bounds.x+t.bounds.width/4,y:t.bounds.y},n={x:t.bounds.x+t.bounds.width/2,y:t.bounds.y+t.bounds.height/2},o=Ls();Os(o,t.rotateAngle,n.x,n.y);var s=Ps(o,i),a={x:s.x,y:s.y};e.offsetX=a.x,e.offsetY=a.y,e.width=t.bounds.width/2;var r=this.commandHandler.annotationModule.findAnnotationSettings(t),l=0;r.maxWidth&&(l=r.maxWidth?r.maxWidth:2e3,t.bounds.width>l&&(t.bounds.width=l,e.width=t.bounds.width/2)),this.commandHandler.renderDrawing(void 0,t.pageIndex)},t}(Ap),Pp=function(e){function t(t,i,n){var o=e.call(this,t,i)||this;return o.action=n,o}return Tp(t,e),t.prototype.mouseDown=function(t){if(e.prototype.mouseDown.call(this,t),this.inAction=!0,this.drawingObject){var i=void 0,n=this.drawingObject;i={x:(i=n.vertexPoints[n.vertexPoints.length-1]).x,y:i.y};var o=this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length-1];o.x===i.x&&o.x===i.y||this.drawingObject.vertexPoints.push(i),this.commandHandler.nodePropertyChange(n,{vertexPoints:n.vertexPoints})}else{this.startPoint={x:this.startPosition.x,y:this.startPosition.y};var s={bounds:{x:this.currentPosition.x,y:this.currentPosition.y,width:5,height:5},vertexPoints:[{x:this.startPoint.x/this.pdfViewerBase.getZoomFactor(),y:this.startPoint.y/this.pdfViewerBase.getZoomFactor()},{x:this.currentPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.currentPosition.y/this.pdfViewerBase.getZoomFactor()}],shapeAnnotationType:"Line",fillColor:this.commandHandler.drawingObject.fillColor,strokeColor:this.commandHandler.drawingObject.strokeColor,pageIndex:this.pdfViewerBase.activeElements.activePageID,notes:this.commandHandler.drawingObject.notes,thickness:this.commandHandler.drawingObject.thickness,author:this.commandHandler.drawingObject.author,subject:this.commandHandler.drawingObject.subject,borderDashArray:this.commandHandler.drawingObject.borderDashArray,modifiedDate:this.commandHandler.drawingObject.modifiedDate,borderStyle:this.commandHandler.drawingObject.borderStyle,measureType:this.commandHandler.drawingObject.measureType,enableShapeLabel:this.commandHandler.enableShapeLabel,opacity:this.commandHandler.drawingObject.opacity};this.pdfViewerBase.updateFreeTextProperties(s),this.drawingObject=this.commandHandler.add(s)}},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.inAction&&!1===Ns.equals(this.currentPosition,this.prevPosition)){this.dragging=!0;var i=this.drawingObject;this.drawingObject&&this.currentPosition&&(i.vertexPoints[i.vertexPoints.length-1].x=this.currentPosition.x/this.pdfViewerBase.getZoomFactor(),i.vertexPoints[i.vertexPoints.length-1].y=this.currentPosition.y/this.pdfViewerBase.getZoomFactor(),this.commandHandler.nodePropertyChange(i,{vertexPoints:i.vertexPoints})),"Perimeter"===i.measureType&&cp(i,i.vertexPoints,this.commandHandler.annotation.measureAnnotationModule)}return!0},t.prototype.mouseUp=function(t,i,n){var o;if(e.prototype.mouseMove.call(this,t),t.source&&null!==t.annotationSelectorSettings&&(o=t.source.annotationSelectorSettings),this.drawingObject){var s=new Nh(this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length-1].x-20,this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length-1].y-20,40,40),a={x:this.drawingObject.vertexPoints[0].x,y:this.drawingObject.vertexPoints[0].y};if((s.containsPoint(a)||i)&&this.dragging){if(this.inAction&&(this.inAction=!1,this.drawingObject)){if(n||this.drawingObject.vertexPoints.length>2&&this.drawingObject.vertexPoints.splice(this.drawingObject.vertexPoints.length-1,1),"Polygon"===this.action){n?this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length]=this.drawingObject.vertexPoints[0]:this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length-1]=this.drawingObject.vertexPoints[0],this.commandHandler.nodePropertyChange(this.drawingObject,{vertexPoints:this.drawingObject.vertexPoints});var r=qs(this.drawingObject);r.shapeAnnotationType="Polygon",r.bounds.width=r.wrapper.actualSize.width,r.bounds.height=r.wrapper.actualSize.height,r.bounds.x=this.drawingObject.wrapper.bounds.x,r.bounds.y=this.drawingObject.wrapper.bounds.y,this.commandHandler.add(r),this.commandHandler.remove(this.drawingObject),this.commandHandler.select([r.id],o);var l=this.commandHandler.selectedItems.annotations[0];l&&(this.commandHandler.enableShapeAnnotation&&(m(l.measureType)||""===l.measureType)&&this.commandHandler.annotation.shapeAnnotationModule.renderShapeAnnotations(l,l.pageIndex),!this.commandHandler.enableMeasureAnnotation||"Area"!==l.measureType&&"Volume"!==l.measureType||("Area"===l.measureType?(l.notes=this.commandHandler.annotation.measureAnnotationModule.calculateArea(l.vertexPoints),this.commandHandler.annotation.stickyNotesAnnotationModule.addTextToComments(l.annotName,l.notes)):"Volume"===l.measureType&&(l.notes=this.commandHandler.annotation.measureAnnotationModule.calculateVolume(l.vertexPoints),this.commandHandler.annotation.stickyNotesAnnotationModule.addTextToComments(l.annotName,l.notes)),l.enableShapeLabel&&(l.labelContent=l.notes,this.commandHandler.nodePropertyChange(l,{vertexPoints:l.vertexPoints,notes:l.notes})),this.commandHandler.annotation.measureAnnotationModule.renderMeasureShapeAnnotations(l,l.pageIndex)))}else n||i&&this.drawingObject.vertexPoints.splice(this.drawingObject.vertexPoints.length-1,1),this.commandHandler.nodePropertyChange(this.drawingObject,{vertexPoints:this.drawingObject.vertexPoints,sourceDecoraterShapes:this.commandHandler.drawingObject.sourceDecoraterShapes,taregetDecoraterShapes:this.commandHandler.drawingObject.taregetDecoraterShapes}),this.commandHandler.select([this.drawingObject.id],o),this.commandHandler.enableMeasureAnnotation&&"Perimeter"===this.drawingObject.measureType&&(this.commandHandler.renderDrawing(null,this.drawingObject.pageIndex),this.drawingObject.notes=this.commandHandler.annotation.measureAnnotationModule.calculatePerimeter(this.drawingObject),this.drawingObject.enableShapeLabel&&(this.drawingObject.labelContent=this.drawingObject.notes,this.commandHandler.nodePropertyChange(this.drawingObject,{vertexPoints:this.drawingObject.vertexPoints,notes:this.drawingObject.notes})),this.commandHandler.annotation.stickyNotesAnnotationModule.addTextToComments(this.drawingObject.annotName,this.drawingObject.notes),this.commandHandler.annotation.measureAnnotationModule.renderMeasureShapeAnnotations(this.drawingObject,this.drawingObject.pageIndex));var d=this.commandHandler.selectedItems.annotations[0];this.commandHandler.annotation.addAction(this.pageIndex,null,d,"Addition","",d,d),this.drawingObject=null}this.endAction()}else this.inAction&&!this.dragging&&this.commandHandler.remove(this.drawingObject)}},t.prototype.mouseLeave=function(e){this.mouseUp(e,!0,!0)},t.prototype.mouseWheel=function(t){e.prototype.mouseWheel.call(this,t),this.mouseMove(t)},t.prototype.endAction=function(){this.inAction=!1,this.drawingObject=null,this.commandHandler.tool=""},t}(Ap),Op=function(e){function t(t,i,n,o){var s=e.call(this,t,i,!0)||this;return s.endPoint=n,s.drawingObject=o,s}return Tp(t,e),t.prototype.mouseDown=function(t){if(this.inAction=!0,this.undoElement=void 0,e.prototype.mouseDown.call(this,t),t.source&&t.source.annotations&&({x:this.prevPosition.x,y:this.prevPosition.y},this.drawingObject),this.initialPosition=t.position,this.prevSource=this.drawingObject,this.currentPosition=t.position,this.drawingObject){if(!this.dragging){var i={bounds:{x:this.currentPosition.x,y:this.currentPosition.y,width:5,height:5},vertexPoints:[{x:this.startPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.startPosition.y/this.pdfViewerBase.getZoomFactor()},{x:this.currentPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.currentPosition.y/this.pdfViewerBase.getZoomFactor()}],shapeAnnotationType:this.drawingObject.shapeAnnotationType,sourceDecoraterShapes:this.drawingObject.sourceDecoraterShapes,taregetDecoraterShapes:this.drawingObject.taregetDecoraterShapes,fillColor:this.drawingObject.fillColor,strokeColor:this.drawingObject.strokeColor,pageIndex:this.pdfViewerBase.activeElements.activePageID,opacity:this.drawingObject.opacity||1,borderDashArray:this.drawingObject.borderDashArray,thickness:this.drawingObject.thickness,modifiedDate:this.drawingObject.modifiedDate,author:this.drawingObject.author,subject:this.drawingObject.subject,lineHeadEnd:this.drawingObject.lineHeadEnd,lineHeadStart:this.drawingObject.lineHeadStart,measureType:this.commandHandler.drawingObject.measureType,enableShapeLabel:this.commandHandler.enableShapeLabel};this.pdfViewerBase.updateFreeTextProperties(i),this.drawingObject=this.commandHandler.add(i)}}else{var n=this.commandHandler.annotation.measureAnnotationModule,o={vertexPoints:[{x:this.startPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.startPosition.y/this.pdfViewerBase.getZoomFactor()},{x:this.currentPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.currentPosition.y/this.pdfViewerBase.getZoomFactor()}],bounds:{x:this.currentPosition.x,y:this.currentPosition.y,width:5,height:5},sourceDecoraterShapes:this.commandHandler.drawingObject.sourceDecoraterShapes,taregetDecoraterShapes:this.commandHandler.drawingObject.taregetDecoraterShapes,measureType:"Distance",fillColor:this.commandHandler.drawingObject.fillColor,notes:this.commandHandler.drawingObject.notes,strokeColor:this.commandHandler.drawingObject.strokeColor,opacity:this.commandHandler.drawingObject.opacity,thickness:this.commandHandler.drawingObject.thickness,borderDashArray:this.commandHandler.drawingObject.borderDashArray,shapeAnnotationType:"Distance",pageIndex:this.pdfViewerBase.activeElements.activePageID,author:this.commandHandler.drawingObject.author,subject:this.commandHandler.drawingObject.subject,enableShapeLabel:this.commandHandler.enableShapeLabel,leaderHeight:n.leaderLength};this.pdfViewerBase.updateFreeTextProperties(o),this.drawingObject=this.commandHandler.add(o)}},t.prototype.mouseUp=function(t){if(this.dragging){if(e.prototype.mouseMove.call(this,t),this.commandHandler){var i=void 0;i=t.source&&null!==t.annotationSelectorSettings?t.source.annotationSelectorSettings:"";var n=this.drawingObject;this.commandHandler.nodePropertyChange(n,{vertexPoints:n.vertexPoints,leaderHeight:n.leaderHeight}),this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.commandHandler.select([n.id],i),this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,i)}this.endPoint&&this.endPoint.indexOf("ConnectorSegmentPoint")>-1&&this.dragging&&(this.commandHandler.annotation.updateCalibrateValues(this.drawingObject),this.commandHandler.annotation.addAction(this.pageIndex,null,this.drawingObject,"Addition","",this.drawingObject,this.drawingObject),this.drawingObject=null,this.dragging=!1,e.prototype.mouseUp.call(this,t)),this.drawingObject&&(this.endPoint="ConnectorSegmentPoint_1")}else this.drawingObject&&this.commandHandler.remove(this.drawingObject)},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.inAction&&!1===Ns.equals(this.currentPosition,this.prevPosition)){if(this.currentPosition=t.position,this.dragging=!0,this.currentPosition&&this.prevPosition){var i=this.currentPosition.x-this.prevPosition.x,n=this.currentPosition.y-this.prevPosition.y,o=void 0;o=t.source&&null!==t.annotationSelectorSettings?t.source.annotationSelectorSettings:"",(this.inAction&&this.commandHandler&&this.drawingObject&&void 0!==this.endPoint&&0!==i||0!==n)&&(this.blocked=!this.commandHandler.dragConnectorEnds(this.endPoint,this.drawingObject,this.currentPosition,this.selectedSegment,t.target,null,o),this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,o))}this.prevPosition=this.currentPosition}return!this.blocked},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.endAction=function(){e.prototype.endAction.call(this),this.prevPosition=null,this.endPoint=null},t}(Ap),Bp=function(e){function t(t,i){return e.call(this,t,i,!0)||this}return Tp(t,e),t.prototype.mouseDown=function(t){var i=qs(t.source);this.undoElement={bounds:{x:i.wrapper.offsetX,y:i.wrapper.offsetY,width:i.wrapper.actualSize.width,height:i.wrapper.actualSize.height},rotateAngle:i.rotateAngle},e.prototype.mouseDown.call(this,t)},t.prototype.mouseUp=function(t){var i,n=t.source;if(this.undoElement.rotateAngle!==n.wrapper.rotateAngle){var o=t.source.annotations[0].annotationSelectorSettings;this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,o),i={bounds:{x:t.source.wrapper.offsetX,y:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height},rotateAngle:t.source.wrapper.rotateAngle}}this.commandHandler.annotation.addAction(this.pageIndex,null,t.source,"Rotate","",this.undoElement,i),this.commandHandler.annotation.stampAnnotationModule.updateSessionStorage(t.source,null,"Rotate"),this.commandHandler.annotation.stickyNotesAnnotationModule.updateStickyNotes(t.source,null),e.prototype.mouseUp.call(this,t)},t.prototype.mouseMove=function(t){e.prototype.mouseMove.call(this,t);var i=t.source,n=t.source.annotations[0].annotationSelectorSettings;if(this.currentPosition=t.position,i.wrapper){var o={x:i.wrapper.offsetX,y:i.wrapper.offsetY},s=Ns.findAngle(o,this.currentPosition)+90;s=(s+360)%360,this.blocked=!this.commandHandler.rotate(s-i.wrapper.rotateAngle,n)}return!this.blocked},t.prototype.getTooltipContent=function(e){return Math.round(e.rotateAngle%360).toString()+"\xb0"},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t}(Ap),zp=function(){function e(){}return e.getContext=function(e){return e.getContext("2d")},e.prototype.setStyle=function(t,i){var n=e.getContext(t);"none"===i.fill&&(i.fill="transparent"),"none"===i.stroke&&(i.stroke="transparent"),n.strokeStyle=i.stroke,n.lineWidth=i.strokeWidth,0===i.strokeWidth&&(n.strokeStyle="transparent"),n.globalAlpha=i.opacity;var o=[];i.dashArray&&(o=this.parseDashArray(i.dashArray)),n.setLineDash(o),n.fillStyle=i.fill},e.prototype.rotateContext=function(t,i,n,o){var s=e.getContext(t);s.translate(n,o),s.rotate(i*Math.PI/180),s.translate(-n,-o)},e.prototype.setFontStyle=function(t,i){var n=e.getContext(t),o="";i.italic&&(o+="italic "),i.bold&&(o+="bold "),o+=i.fontSize+"px ",o+=i.fontFamily,n.font=o},e.prototype.parseDashArray=function(e){for(var t=[],i=-1!==e.indexOf(" ")?" ":",",n=0,o=e.split(i);n<o.length;n++){var s=o[n];t.push(Number(s))}return t},e.prototype.drawRectangle=function(t,i){if(!0===i.visible)if(i.cornerRadius)i.data=function(e,t,i){e>t/2&&(e=t/2),e>i/2&&(e=i/2);var n,o,s,a="",r=[{x:0+e,y:0},{x:0+i-e,y:0},{x:0+i,y:0+e},{x:0+i,y:0+t-e},{x:0+i-e,y:0+t},{x:0+e,y:0+t},{x:0,y:0+t-e},{x:0,y:0+e}],l=[{x:0+i,y:0},{x:0+i,y:0+t},{x:0,y:0+t},{x:0,y:0}],d=0;for(a="M"+r[0].x+" "+r[0].y,s=0;s<r.length;s+=2)a+="L"+(n=r[s+1]).x+" "+n.y,o=r[s+2]||r[0],a+="Q"+l[d].x+" "+l[d].y+" "+o.x+" "+o.y,d++;return a}(i.cornerRadius,i.height,i.width),this.drawPath(t,i);else{var n=e.getContext(t);n.save(),n.beginPath();i.cornerRadius;var o=i.x+i.width*i.pivotX,s=i.y+i.height*i.pivotY;this.rotateContext(t,i.angle,o,s),this.setStyle(t,i),n.rect(i.x,i.y,i.width,i.height),n.fillRect(i.x,i.y,i.width,i.height),n.fill(),n.stroke(),n.closePath(),n.restore()}},e.prototype.drawPath=function(t,i){var n=[];n=ts(n=es(i.data));var o=e.getContext(t);o.save(),o.beginPath();var s=i.y+i.height*i.pivotY,a=i.x+i.width*i.pivotX;this.rotateContext(t,i.angle,a,s),this.setStyle(t,i),o.translate(i.x,i.y),this.renderPath(t,i,n),o.fill(),o.translate(-i.x,-i.y),o.stroke(),o.restore()},e.prototype.renderPath=function(t,i,n){if(!0===i.visible){var o,s=e.getContext(t),a=void 0,r=void 0,l=void 0,d=void 0,h=void 0,p=void 0,c=void 0,u=void 0,f=void 0,m=n;for(c=0,u=0,f=0,o=m.length;f<o;++f){var g=m[f],y=g.command;switch("x1"in g&&(l=g.x1),"x2"in g&&(h=g.x2),"y1"in g&&(d=g.y1),"y2"in g&&(p=g.y2),"x"in g&&(c=g.x),"y"in g&&(u=g.y),y){case"M":s.moveTo(c,u),g.x=c,g.y=u;break;case"L":s.lineTo(c,u),g.x=c,g.y=u;break;case"C":s.bezierCurveTo(l,d,h,p,c,u),g.x=c,g.y=u,g.x1=l,g.y1=d,g.x2=h,g.y2=p;break;case"Q":s.quadraticCurveTo(l,d,c,u),g.x=c,g.y=u,g.x1=l,g.y1=d;break;case"A":var v={x:a,y:r},w=g.r1,b=g.r2,S=g.angle*(Math.PI/180),C=g.largeArc,x=g.sweep,M={x:c,y:u},I={x:Math.cos(S)*(v.x-M.x)/2+Math.sin(S)*(v.y-M.y)/2,y:-Math.sin(S)*(v.x-M.x)/2+Math.cos(S)*(v.y-M.y)/2},T=Math.pow(I.x,2)/Math.pow(w,2)+Math.pow(I.y,2)/Math.pow(b,2);T>1&&(w*=Math.sqrt(T),b*=Math.sqrt(T));var A=Math.pow(b,2)*Math.pow(I.x,2),k=(C===x?-1:1)*Math.sqrt((Math.pow(w,2)*Math.pow(b,2)-Math.pow(w,2)*Math.pow(I.y,2)-A)/(Math.pow(w,2)*Math.pow(I.y,2)+Math.pow(b,2)*Math.pow(I.x,2)));isNaN(k)&&(k=0);var V={x:k*w*I.y/b,y:k*-b*I.x/w},E={x:(v.x+M.x)/2+Math.cos(S)*V.x-Math.sin(S)*V.y,y:(v.y+M.y)/2+Math.sin(S)*V.x+Math.cos(S)*V.y},D=this.a([1,0],[(I.x-V.x)/w,(I.y-V.y)/b]),N=[(I.x-V.x)/w,(I.y-V.y)/b],F=[(-I.x-V.x)/w,(-I.y-V.y)/b],L=this.a(N,F);this.r(N,F)<=-1&&(L=Math.PI),this.r(N,F)>=1&&(L=0);var P=D+(x?1:-1)*(L/2);Math.cos(P),Math.sin(P);if(g.centp=E,g.xAxisRotation=S,g.rx=w,g.ry=b,g.a1=D,g.ad=L,g.sweep=x,null!=s){var O=w>b?w:b,B=w>b?1:w/b,z=w>b?b/w:1;s.save(),s.translate(E.x,E.y),s.rotate(S),s.scale(B,z),s.arc(0,0,O,D,D+L,!x),s.scale(1/B,1/z),s.rotate(-S),s.translate(-E.x,-E.y),s.restore()}break;case"Z":case"z":s.closePath(),c=a,u=r}a=c,r=u}}},e.prototype.drawText=function(t,i){if(i.content&&!0===i.visible){var n=e.getContext(t);n.save(),this.setStyle(t,i);var o=i.x+i.width*i.pivotX,s=i.y+i.height*i.pivotY;this.rotateContext(t,i.angle,o,s),this.setFontStyle(t,i);var a,r=0;a=i.childNodes;var l=i.wrapBounds;if(n.fillStyle=i.color,l){var d=this.labelAlign(i,l,a);for(r=0;r<a.length;r++){var h=a[r],p=d.x+h.x-l.x,c=d.y+h.dy*r+.8*i.fontSize;if(n.fillText(h.text,p,c),"Underline"===i.textDecoration||"Overline"===i.textDecoration||"LineThrough"===i.textDecoration){var u=p,f=void 0,m=p+n.measureText(h.text).width,g=void 0;switch(i.textDecoration){case"Underline":f=c+2,g=c+2;break;case"Overline":f=d.y+h.dy*r,g=d.y+h.dy*r;break;case"LineThrough":f=(c+d.y+h.dy*r)/2+2,g=(c+d.y+h.dy*r)/2+2}n.beginPath(),n.moveTo(u,f),n.lineTo(m,g),n.strokeStyle=i.color,n.lineWidth=.08*i.fontSize,n.globalAlpha=i.opacity,n.stroke()}}}n.restore()}},e.prototype.m=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2))},e.prototype.r=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(this.m(e)*this.m(t))},e.prototype.a=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(this.r(e,t))},e.prototype.getMeetOffset=function(e,t,i){var n=Math.max(t,i),o=Math.min(t,i);switch(e){case"min":default:return 0;case"mid":return(n-o)/2;case"max":return n-o}},e.prototype.getSliceOffset=function(e,t,i,n){switch(e){case"min":default:return 0;case"mid":return(t-i)/2*n/t;case"max":return(t-i)*n/t}},e.prototype.image=function(e,t,i,n,o,s,a){e.beginPath();var r=t.width,l=t.height,d=o,h=s,p=0,c=0;if(e.globalAlpha=a.opacity,a&&"None"!==a.alignment){var u=a.alignment.toLowerCase().substr(1,3),f=a.alignment.toLowerCase().substr(5,3);if("Slice"===a.scale){var m=function(){p=d,c=l*d/r},g=function(){p=r*h/l,c=h};d>h?(m(),h>c&&g()):d===h?r>l?g():m():(g(),d>p&&m());var y=this.getSliceOffset(u,p,d,r),v=this.getSliceOffset(f,c,h,l),w=r-y,b=l-v,S=p-y*(p/r),C=c-v*(c/l),x=_h("canvas",{width:o.toString(),height:s.toString()});x.getContext("2d").drawImage(t,y,v,w,b,0,0,S,C),e.drawImage(x,i,n,o,s)}else if("Meet"===a.scale){var M=l/r,I=h/d;p=I>M?d:h/M,c=I>M?d*M:h,i+=this.getMeetOffset(u,p,d),n+=this.getMeetOffset(f,c,h),e.drawImage(t,0,0,r,l,i,n,p,c)}else e.drawImage(t,i,n,o,s)}else if(t.complete)e.drawImage(t,i,n,o,s);else{var T=e.getTransform();t.onload=function(){e.setTransform(T.a,T.b,T.c,T.d,T.e,T.f),e.drawImage(t,i,n,o,s)}}e.closePath()},e.prototype.loadImage=function(e,t,i,n,o){var s;this.rotateContext(i,t.angle,n,o),window.customStampCollection&&window.customStampCollection.get(t.printID)?s=window.customStampCollection.get(t.printID):(s=new Image).src=t.source,this.image(e,s,t.x,t.y,t.width,t.height,t)},e.prototype.drawImage=function(t,i,n,o){var s=this;if(i.visible){var a=e.getContext(t);a.save();var r=i.x+i.width*i.pivotX,l=i.y+i.height*i.pivotY,d=new Image;d.src=i.source;var h=a.canvas.id.split("_");h[h.length-1];o?d.onload=function(){s.loadImage(a,i,t,r,l)}:this.loadImage(a,i,t,r,l),a.restore()}},e.prototype.labelAlign=function(e,t,i){var n=new Cd(t.width,i.length*(1.2*e.fontSize)),o={x:0,y:0},s=e.x,a=e.y,r=.5*e.width,l=.5*e.height;return"left"===e.textAlign?r=0:"center"===e.textAlign?r=t.width>e.width&&("Ellipsis"===e.textOverflow||"Clip"===e.textOverflow)?0:.5*e.width:"right"===e.textAlign&&(r=1*e.width),o.x=s+r+(t?t.x:0),o.y=a+l-n.height/2,o},e}();function jp(e,t,i){for(var n=0;n<t.length;n++)i.renderElement(t[n],e,void 0)}var Rp=function(){function e(){}return e.prototype.parseDashArray=function(e){return[]},e.prototype.drawRectangle=function(e,t,i,n,o,s,a){var r,l;r=t.id===e.id?t.id+"_container":t.id,l&&!o||(l=document.createElementNS("http://www.w3.org/2000/svg","rect"),e.appendChild(l));var d={id:r,x:t.x.toString(),y:t.y.toString(),width:t.width.toString(),height:t.height.toString(),visibility:t.visible?"visible":"hidden",transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")",rx:t.cornerRadius||0,ry:t.cornerRadius||0,opacity:t.opacity,"aria-label":a||""};t.class&&(d.class=t.class);a||(d["pointer-events"]="none"),_p(l,d),this.setSvgStyle(l,t,i)},e.prototype.updateSelectionRegion=function(e,t){var i,n;i=e.parentNode.getElementById(t.id),n={id:t.id,x:t.x.toString(),y:t.y.toString(),width:t.width.toString(),height:t.height.toString(),transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")",class:"e-diagram-selected-region"},i||(i=document.createElementNS("http://www.w3.org/2000/svg","rect"),e.appendChild(i)),this.setSvgStyle(i,t),_p(i,n)},e.prototype.createGElement=function(e,t){return Hp(e,t)},e.prototype.drawCircle=function(e,t,i,n){var o=document.createElementNS("http://www.w3.org/2000/svg","circle");this.setSvgStyle(o,t);var s=t.class||"";i||(s+=" e-disabled");var a={id:t.id,cx:t.centerX,cy:t.centerY,r:t.radius,visibility:t.visible?"visible":"hidden",class:s,"aria-label":n?n["aria-label"]:""};""===a["aria-label"]&&(a["pointer-events"]="none"),o.style.display=t.visible?"block":"none",_p(o,a),e.appendChild(o)},e.prototype.setSvgStyle=function(e,t,i){if(t.canApplyStyle||void 0===t.canApplyStyle){"none"===t.fill&&(t.fill="transparent"),"none"===t.stroke&&(t.stroke="transparent");var n,o=[];if(void 0!==t.dashArray)o=(new zp).parseDashArray(t.dashArray);n=t.fill,t.stroke&&e.setAttribute("stroke",t.stroke),void 0!==t.strokeWidth&&null!==t.strokeWidth&&e.setAttribute("stroke-width",t.strokeWidth.toString()),o&&e.setAttribute("stroke-dasharray",o.toString()),n&&e.setAttribute("fill",n)}},e.prototype.svgLabelAlign=function(e,t,i){var n=new Cd(t.width,i.length*(1.2*e.fontSize)),o={x:0,y:0},s=.5*e.width,a=.5*e.height;return"left"===e.textAlign?s=0:"center"===e.textAlign?s=t.width>e.width&&("Ellipsis"===e.textOverflow||"Clip"===e.textOverflow)?0:.5*e.width:"right"===e.textAlign&&(s=1*e.width),o.x=0+s+(t?t.x:0),o.y=1.2+a-n.height/2,o},e.prototype.drawLine=function(e,t){var i=document.createElementNS("http://www.w3.org/2000/svg","line");this.setSvgStyle(i,t);var n=t.x+t.width*t.pivotX,o=t.y+t.height*t.pivotY,s={id:t.id,x1:t.startPoint.x+t.x,y1:t.startPoint.y+t.y,x2:t.endPoint.x+t.x,y2:t.endPoint.y+t.y,stroke:t.stroke,"stroke-width":t.strokeWidth.toString(),opacity:t.opacity.toString(),transform:"rotate("+t.angle+" "+n+" "+o+")",visibility:t.visible?"visible":"hidden"};t.class&&(s.class=t.class),_p(i,s),e.appendChild(i)},e.prototype.drawPath=function(e,t,i,n,o,s){var a=Math.floor(10*Math.random()+1);e.id,a.toString();var r,l,d=[];d=ts(d=es(t.data)),o&&(r=o.getElementById(t.id+"_groupElement_shadow"))&&r.parentNode.removeChild(r),o&&(l=o.getElementById(t.id)),l&&!n||(l=document.createElementNS("http://www.w3.org/2000/svg","path"),e.appendChild(l)),this.renderPath(l,t,d);var h={id:t.id,transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")translate("+t.x+","+t.y+")",visibility:t.visible?"visible":"hidden",opacity:t.opacity,"aria-label":s||""};t.class&&(h.class=t.class),_p(l,h),this.setSvgStyle(l,t,i)},e.prototype.renderPath=function(e,t,i){var n,o,s,a,r,l,d,h,p=i,c="";for(r=0,l=0,h=0,d=p.length;h<d;++h){var u=p[h],f=u.command;switch("x1"in u&&(n=u.x1),"x2"in u&&(s=u.x2),"y1"in u&&(o=u.y1),"y2"in u&&(a=u.y2),"x"in u&&(r=u.x),"y"in u&&(l=u.y),f){case"M":c=c+"M"+r.toString()+","+l.toString()+" ";break;case"L":c=c+"L"+r.toString()+","+l.toString()+" ";break;case"C":c=c+"C"+n.toString()+","+o.toString()+","+s.toString()+","+a.toString()+",",c+=r.toString()+","+l.toString()+" ";break;case"Q":c=c+"Q"+n.toString()+","+o.toString()+","+r.toString()+","+l.toString()+" ";break;case"A":c=c+"A"+u.r1.toString()+","+u.r2.toString()+","+u.angle.toString()+",",c+=u.largeArc.toString()+","+u.sweep+","+r.toString()+","+l.toString()+" ";break;case"Z":case"z":c+="Z "}}e.setAttribute("d",c)},e}();function _p(e,t){for(var i=Object.keys(t),n=0;n<i.length;n++)e.setAttribute(i[n],t[i[n]])}function Hp(e,t){var i=document.createElementNS("http://www.w3.org/2000/svg",e);return _p(i,t),i}function Wp(e,t,i,n,o){var s=_h("div",{id:o.element.id+n+"_diagramAdornerLayer",style:"width:"+e.width+"px;height:"+e.height+"px;"+t});if(!Rh(s.id)){var a=o.viewerBase.getElement("_pageDiv_"+n),r=a.getBoundingClientRect(),l=function(e,t,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return _p(n,{id:e,width:t,height:i}),n}(o.element.id+n+"_diagramAdorner_svg",r.width,r.height);l.setAttribute("class","e-adorner-layer"+n),l.setAttribute("style","pointer-events:none;"),o.adornerSvgLayer=Hp("g",{id:o.element.id+n+"_diagramAdorner"}),o.adornerSvgLayer.setAttribute("style"," pointer-events: all; "),l.appendChild(o.adornerSvgLayer),s.appendChild(l),s.style.width=r.width+"px",s.style.height=r.height+"px",a?a.insertBefore(s,a.childNodes[0]):i.parentElement.appendChild(s);var d=Hp("g",{id:o.element.id+n+"_SelectorElement"});o.adornerSvgLayer.appendChild(d),_p(l,{style:"pointer-events:none;"})}o.viewerBase.applyElementStyles(s,n)}var Up=function(){function e(e,t){this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.createContextMenu=function(){var e=document.getElementsByClassName(this.pdfViewer.element.id+"_context_menu");if(e&&(this.contextMenuElement=e[0],this.contextMenuElement.children&&this.contextMenuElement.children.length>0)){var t=this.contextMenuElement.children[0];t.className=t.className+" e-pv-context-menu"}},e.prototype.open=function(e,t,i){this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenContextMenu",e,t)},e.prototype.close=function(){this.pdfViewer._dotnetInstance.invokeMethodAsync("CloseContextMenu")},e.prototype.destroy=function(){this.previousAction="",this.contextMenuElement=null},e.prototype.OnItemSelected=function(e){"string"===typeof e?this.pdfViewerBase.OnItemSelected(e):this.pdfViewerBase.OnItemSelected(e[0])},e}(),qp={},Yp=null,Qp=null,Zp=30,Xp=30,Gp=30,Jp=36,Kp="e-spin-show",$p="e-spin-hide",ec="e-spin-material",tc="e-spin-fabric",ic="e-spin-bootstrap",nc="e-spin-bootstrap4",oc="e-spin-bootstrap5",sc="e-spin-tailwind",ac="e-spin-fluent",rc="e-spin-high-contrast",lc="e-spinner-pane",dc="e-spinner-inner",hc="e-path-circle",pc="e-path-arc",cc="e-spin-label",uc="e-spin-template";function fc(e,t){if(e.target){var i,n=m(t)?we:t,o=function(e,t){var i=t("div",{});i.classList.add(lc);var n=t("div",{});return n.classList.add(dc),e.appendChild(i),i.appendChild(n),{wrap:i,innerWrap:n}}(e.target,n);if(m(e.cssClass)||o.wrap.classList.add(e.cssClass),m(e.template)&&m(Yp)){var s=m(e.type)?function(e){var t=window.getComputedStyle(e,":after").getPropertyValue("content");return t.replace(/['"]+/g,"")}(o.wrap):e.type;i=function(e,t){var i;switch(t){case"Material":i=Zp;break;case"Fabric":i=Xp;break;case"Bootstrap4":i=Jp;break;default:i=Gp}return e=e?parseFloat(e+""):i,"Bootstrap"===t?e:e/2}(m(e.width)?void 0:e.width,s),mc(s,o.wrap,i,n),m(e.label)||function(e,t,i){var n=i("div",{});n.classList.add(cc),n.textContent=t,e.appendChild(n)}(o.innerWrap,e.label,n)}else{var a=m(e.template)?Yp:e.template;o.wrap.classList.add(uc),function(e,t,i){m(i)||e.classList.add(i);var n=e.querySelector(".e-spinner-inner");n.innerHTML=t}(o.wrap,a,Qp)}o.wrap.classList.add($p),o=null}}function mc(e,t,i,n){var o=t.querySelector("."+dc),s=o.querySelector("svg");switch(m(s)||o.removeChild(s),e){case"Material":!function(e,t,i){var n=yc();qp[""+n]={timeOut:0,type:"Material",radius:t},wc(e,n,i,ec),Sc(t,e,"Material",ec)}(o,i,n);break;case"Fabric":!function(e,t,i){var n=yc();qp[""+n]={timeOut:0,type:"Fabric",radius:t},vc(e,n,tc,i),Ic(t,e,tc)}(o,i,n);break;case"Bootstrap":!function(e,t,i){var n=yc();qp[""+n]={timeOut:0,type:"Bootstrap",radius:t},function(e,t,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=64,s=32,a=2;n.setAttribute("id",t),n.setAttribute("class",ic),n.setAttribute("viewBox","0 0 "+o+" "+o),e.insertBefore(n,e.firstChild);for(var r=0;r<=7;r++){var l=document.createElementNS("http://www.w3.org/2000/svg","circle");l.setAttribute("class",hc+"_"+r),l.setAttribute("r",a+""),l.setAttribute("transform","translate("+s+","+s+")"),n.appendChild(l)}}(e,n),function(e,t){var i=e.querySelector("svg.e-spin-bootstrap");i.style.width=i.style.height=t+"px";for(var n=0,o=0,s=24,a=90,r=0;r<=7;r++){var l=Tc(n,o,s,a),d=i.querySelector("."+hc+"_"+r);d.setAttribute("cx",l.x+""),d.setAttribute("cy",l.y+""),a=a>=360?0:a,a+=45}}(e,t)}(o,i);break;case"HighContrast":!function(e,t,i){var n=yc();qp[""+n]={timeOut:0,type:"HighContrast",radius:t},vc(e,n,rc,i),Ic(t,e,rc)}(o,i,n);break;case"Bootstrap4":!function(e,t,i){var n=yc();qp[""+n]={timeOut:0,type:"Bootstrap4",radius:t},wc(e,n,i,nc),Sc(t,e,"Bootstrap4",nc)}(o,i,n);break;case"Bootstrap5":!function(e,t,i){var n=yc();qp[""+n]={timeOut:0,type:"Bootstrap5",radius:t},wc(e,n,i,oc),Sc(t,e,"Bootstrap5",oc)}(o,i,n);break;case"Tailwind":!function(e,t,i){var n=yc();qp[""+n]={timeOut:0,type:"Tailwind",radius:t},vc(e,n,sc,i),Ic(t,e,sc)}(o,i,n);break;case"Fluent":!function(e,t,i){var n=yc();qp[""+n]={timeOut:0,type:"Fluent",radius:t},vc(e,n,ac,i),Ic(t,e,ac)}(o,i,n)}}function gc(e,t){var i=[],n=e,o=t,s=!1,a=1;return function e(t){i.push(t),(t!==o||1===a)&&(t<=n&&t>1&&!s?t=parseFloat((t-.2).toFixed(2)):1===t?(t=7,t=parseFloat((t+.2).toFixed(2)),s=!0):t<8&&s?8===(t=parseFloat((t+.2).toFixed(2)))&&(s=!1):t<=8&&!s&&(t=parseFloat((t-.2).toFixed(2))),++a,e(t))}(n),i}function yc(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function vc(e,t,i,n){var o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("id",t),o.setAttribute("class",i);var s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("class",hc);var a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttribute("class",pc),e.insertBefore(o,e.firstChild),o.appendChild(s),o.appendChild(a)}function wc(e,t,i,n){var o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("class",n),o.setAttribute("id",t);var s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("class",hc),e.insertBefore(o,e.firstChild),o.appendChild(s)}function bc(e){!function(e,t,i,n,o,s,a){var r=++a.globalInfo[a.uniqueID].previousId,l=(new Date).getTime(),d=t-e,h=(u=2*a.globalInfo[a.uniqueID].radius+"",parseFloat(u)),p=Cc(h),c=-90*(a.globalInfo[a.uniqueID].count||0);var u;function f(t){var o=Math.max(0,Math.min((new Date).getTime()-l,n));g(i(o,e,d,n),t.container),r===t.globalInfo[t.uniqueID].previousId&&o<n?qp[t.uniqueID].timeOut=setTimeout(f.bind(null,t),1):bc(t)}function g(e,t){if(!m(t.querySelector("svg.e-spin-material"))&&!m(t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))){var i=t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle");i.setAttribute("stroke-dashoffset",xc(h,p,e,s)+""),i.setAttribute("transform","rotate("+c+" "+h/2+" "+h/2+")")}}f(a)}(1,149,Mc,1333,e.globalInfo[e.uniqueID].count,75,e),e.globalInfo[e.uniqueID].count=++e.globalInfo[e.uniqueID].count%4}function Sc(e,t,i,n){var o=2*e,s=t.querySelector("svg."+n),a=s.querySelector("path.e-path-circle"),r=Cc(o),l=o/2+"px";s.setAttribute("viewBox","0 0 "+o+" "+o),s.style.width=s.style.height=o+"px",s.style.transformOrigin=l+" "+l+" "+l,a.setAttribute("d",function(e,t){var i=e/2,n=t/2;return"M"+i+","+n+"A"+(i-n)+","+(i-n)+" 0 1 1 "+n+","+i}(o,r)),"Material"===i&&(a.setAttribute("stroke-width",r+""),a.setAttribute("stroke-dasharray",(o-r)*Math.PI*.75+""),a.setAttribute("stroke-dashoffset",xc(o,r,1,75)+""))}function Cc(e){return.1*e}function xc(e,t,i,n){return(e-t)*Math.PI*(3*n/100-i/100)}function Mc(e,t,i,n){var o=(e/=n)*e,s=o*e;return t+i*(6*s*o+-15*o*o+10*s)}function Ic(e,t,i){var n=e,o=e,s=2*e,a=t.querySelector("."+i),r=a.querySelector(".e-path-circle"),l=a.querySelector(".e-path-arc"),d=s/2+"px";r.setAttribute("d",function(e,t,i){var n=["M",e,t,"m",-i,0,"a",i,i,0,1,0,2*i,0,"a",i,i,0,1,0,2*-i,0].join(" ");return n}(n,o,e)),l.setAttribute("d",function(e,t,i,n,o){var s=Tc(e,t,i,o),a=Tc(e,t,i,n),r=["M",s.x,s.y,"A",i,i,0,0,0,a.x,a.y].join(" ");return r}(n,o,e,315,45)),a.setAttribute("viewBox","0 0 "+s+" "+s),a.style.transformOrigin=d+" "+d+" "+d,a.style.width=a.style.height=s+"px"}function Tc(e,t,i,n){var o=(n-90)*Math.PI/180;return{x:e+i*Math.cos(o),y:t+i*Math.sin(o)}}function Ac(e){kc(e,!1),e=null}function kc(e,t){var i;if(e&&(i=e.classList.contains(lc)?e:e.querySelector("."+lc)),e&&i){var n=i.querySelector("."+dc);if(t?!i.classList.contains(uc)&&!i.classList.contains($p):!i.classList.contains(uc)&&!i.classList.contains(Kp)){var o=i.querySelector("svg");if(m(o))return;var s=o.getAttribute("id");switch(qp[""+s].isAnimate=!t,qp[""+s].type){case"Material":t?clearTimeout(qp[s].timeOut):function(e,t,i){var n={};qp[""+t].timeOut=0,n[""+t]=function(e,t,i,n){return{radius:t,count:0,previousId:0}}(0,i),bc({uniqueID:t,container:e,globalInfo:n,timeOutVar:0})}(n,s,qp[s].radius);break;case"Bootstrap":t?clearTimeout(qp[s].timeOut):function(e){for(var t=e.querySelector("svg.e-spin-bootstrap").getAttribute("id"),i=1;i<=8;i++)n(e.getElementsByClassName("e-path-circle_"+(8===i?0:i))[0],i,i,gc(i,i),t);function n(e,t,i,n,o){var s=0;!function t(i){qp[""+o].isAnimate&&(++s,e.setAttribute("r",i+""),s>=n.length&&(s=0),qp[""+o].timeOut=setTimeout(t.bind(null,n[parseInt(s.toString(),10)]),18))}(t)}}(n)}}t?Pe(i,[$p],[Kp]):Pe(i,[Kp],[$p]),e=null}}function Vc(e){kc(e,!0),e=null}var Ec=function(){function e(e,t){this.pdfViewer=null,this.pdfViewerBase=null,this.totalPageElement=null,this.currentPageBoxElementContainer=null,this.currentPageBoxElement=null,this.firstPageElement=null,this.previousPageElement=null,this.nextPageElement=null,this.lastPageElement=null,this.zommOutElement=null,this.zoomInElement=null,this.zoomDropDownElement=null,this.selectToolElement=null,this.handToolElement=null,this.undoElement=null,this.redoElement=null,this.commentElement=null,this.submitFormButton=null,this.searchElement=null,this.annotationElement=null,this.printElement=null,this.downloadElement=null,this.highlightElement=null,this.underlineElement=null,this.strikeThroughElement=null,this.shapeElement=null,this.calibrateElement=null,this.stampElement=null,this.freeTextElement=null,this.signatureElement=null,this.inkElement=null,this.annotationFontSizeInputElement=null,this.annotationFontFamilyInputElement=null,this.annotationColorElement=null,this.annotationStrokeColorElement=null,this.annotationThicknessElement=null,this.annotationOpacityElement=null,this.annotationFontColorElement=null,this.annotationFontFamilyElement=null,this.annotationFontSizeElement=null,this.annotationTextAlignElement=null,this.annotationTextColorElement=null,this.annotationTextPropertiesElement=null,this.annotationDeleteElement=null,this.annotationCloseElement=null,this.annotationCommentPanelElement=null,this.mobileToolbarContainerElement=null,this.mobileSearchPreviousOccurenceElement=null,this.mobileSearchNextOccurenceElement=null,this.cssClass="e-overlay",this.disableClass=" e-overlay",this.editAnnotationButtonElement=null,this.pdfViewer=e,this.pdfViewerBase=t,this.findToolbarElements()}return e.prototype.findToolbarElements=function(){this.totalPageElement=this.pdfViewerBase.getElement("_totalPage").children[0],this.currentPageBoxElementContainer=this.pdfViewerBase.getElement("_currentPageInput"),this.currentPageBoxElement=this.pdfViewerBase.getElement("_currentPageInput").children[0].children[0],this.firstPageElement=this.pdfViewerBase.getElement("_firstPage"),this.previousPageElement=this.pdfViewerBase.getElement("_previousPage"),this.nextPageElement=this.pdfViewerBase.getElement("_nextPage"),this.lastPageElement=this.pdfViewerBase.getElement("_lastPage"),this.zommOutElement=this.pdfViewerBase.getElement("_zoomOut"),this.zoomInElement=this.pdfViewerBase.getElement("_zoomIn"),this.zoomDropDownElement=this.pdfViewerBase.getElement("_zoomDropDown"),this.selectToolElement=this.pdfViewerBase.getElement("_selectTool"),this.handToolElement=this.pdfViewerBase.getElement("_handTool"),this.undoElement=this.pdfViewerBase.getElement("_undo"),this.redoElement=this.pdfViewerBase.getElement("_redo"),this.commentElement=this.pdfViewerBase.getElement("_comment"),this.submitFormButton=this.pdfViewerBase.getElement("_submitFormButton"),this.searchElement=this.pdfViewerBase.getElement("_search"),this.annotationElement=this.pdfViewerBase.getElement("_annotation"),this.editAnnotationButtonElement=this.annotationElement.children[0],this.editAnnotationButtonElement.classList.add("e-pv-tbar-btn"),this.printElement=this.pdfViewerBase.getElement("_print"),this.downloadElement=this.pdfViewerBase.getElement("_download"),this.highlightElement=this.pdfViewerBase.getElement("_highLight"),this.underlineElement=this.pdfViewerBase.getElement("_underline"),this.strikeThroughElement=this.pdfViewerBase.getElement("_strikethrough"),this.shapeElement=this.pdfViewerBase.getElement("_annotation_shapes"),this.calibrateElement=this.pdfViewerBase.getElement("_annotation_calibrate"),this.stampElement=this.pdfViewerBase.getElement("_annotation_stamp"),this.freeTextElement=this.pdfViewerBase.getElement("_annotation_freeTextEdit"),this.signatureElement=this.pdfViewerBase.getElement("_annotation_signature"),this.inkElement=this.pdfViewerBase.getElement("_annotation_ink"),this.annotationFontSizeInputElement=this.pdfViewerBase.getElement("_annotation_fontsize").children[0].children[0],this.annotationFontFamilyInputElement=this.pdfViewerBase.getElement("_annotation_fontname").children[0].children[0],this.annotationColorElement=this.pdfViewerBase.getElement("_annotation_color"),this.annotationStrokeColorElement=this.pdfViewerBase.getElement("_annotation_stroke"),this.annotationThicknessElement=this.pdfViewerBase.getElement("_annotation_thickness"),this.annotationOpacityElement=this.pdfViewerBase.getElement("_annotation_opacity"),this.annotationFontColorElement=this.pdfViewerBase.getElement("_annotation_textcolor"),this.annotationFontFamilyElement=this.pdfViewerBase.getElement("_annotation_fontname"),this.annotationFontSizeElement=this.pdfViewerBase.getElement("_annotation_fontsize"),this.annotationTextAlignElement=this.pdfViewerBase.getElement("_annotation_textalign"),this.annotationTextColorElement=this.pdfViewerBase.getElement("_annotation_textcolor"),this.annotationTextPropertiesElement=this.pdfViewerBase.getElement("_annotation_textproperties"),this.annotationDeleteElement=this.pdfViewerBase.getElement("_annotation_delete"),this.annotationCommentPanelElement=this.pdfViewerBase.getElement("_annotation_commentPanel"),this.annotationCloseElement=this.pdfViewerBase.getElement("_annotation_close"),this.mobileToolbarContainerElement=this.pdfViewerBase.getElement("_mobileToolbarContainer"),this.mobileSearchPreviousOccurenceElement=this.pdfViewerBase.getElement("_prev_occurrence"),this.mobileSearchNextOccurenceElement=this.pdfViewerBase.getElement("_next_occurrence")},e.prototype.updateTotalPage=function(){this.totalPageElement.textContent=this.pdfViewer.localeObj.getConstant("of")+this.pdfViewerBase.pageCount.toString()},e.prototype.updateCurrentPage=function(e){this.currentPageBoxElement.value=e.toString()},e.prototype.loadDocument=function(){this.pdfViewer.enableNavigation&&(this.currentPageBoxElementContainer.classList.remove(this.cssClass),this.currentPageBoxElement.value="1",this.totalPageElement.textContent=this.pdfViewer.localeObj.getConstant("of")+this.pdfViewerBase.pageCount.toString(),this.isEnabled(this.firstPageElement)||(this.firstPageElement.className+=this.disableClass),this.isEnabled(this.previousPageElement)||(this.previousPageElement.className+=this.disableClass),this.nextPageElement.classList.remove(this.cssClass),this.lastPageElement.classList.remove(this.cssClass),1===this.pdfViewerBase.pageCount&&(this.nextPageElement.classList.contains(this.cssClass)||(this.nextPageElement.className+=this.disableClass),this.lastPageElement.classList.contains(this.cssClass)||(this.lastPageElement.className+=this.disableClass))),this.pdfViewer.enableMagnification&&(this.zoomInElement.classList.remove(this.cssClass),this.zommOutElement.classList.remove(this.cssClass),this.zoomDropDownElement.classList.remove(this.cssClass)),this.pdfViewer.enableTextSelection&&(this.selectToolElement.classList.remove(this.cssClass),this.selectItem(this.pdfViewer.toolbar.SelectToolElement)),this.handToolElement.classList.remove(this.cssClass),this.pdfViewer.enableStickyNotesAnnotation&&this.commentElement.classList.remove(this.cssClass),this.pdfViewer.enableTextSearch&&this.searchElement.classList.remove(this.cssClass),this.pdfViewer.isFormFieldDocument&&this.submitFormButton.classList.remove(this.cssClass),this.pdfViewer.enableAnnotation&&this.pdfViewer.enableAnnotationToolbar&&this.annotationElement.classList.remove(this.cssClass),this.pdfViewer.enablePrint&&this.printElement.classList.remove(this.cssClass),this.pdfViewer.enableDownload&&this.downloadElement.classList.remove(this.cssClass),this.pdfViewer.enableAnnotation&&this.pdfViewer.enableTextMarkupAnnotation&&(this.highlightElement.classList.remove(this.cssClass),this.underlineElement.classList.remove(this.cssClass),this.strikeThroughElement.classList.remove(this.cssClass)),this.pdfViewer.enableAnnotation&&this.pdfViewer.enableShapeAnnotation&&this.shapeElement.classList.remove(this.cssClass),this.pdfViewer.enableAnnotation&&this.pdfViewer.enableMeasureAnnotation&&this.calibrateElement.classList.remove(this.cssClass),this.pdfViewer.enableAnnotation&&this.pdfViewer.enableStampAnnotations&&this.stampElement.classList.remove(this.cssClass),this.pdfViewer.enableFreeText&&this.freeTextElement.classList.remove(this.cssClass),this.pdfViewer.enableHandwrittenSignature&&this.signatureElement.classList.remove(this.cssClass),this.pdfViewer.enableInkAnnotation&&this.inkElement.classList.remove(this.cssClass),this.pdfViewer.enableCommentPanel&&this.annotationCommentPanelElement.classList.remove(this.cssClass)},e.prototype.selectItem=function(e){e&&e.classList.add("e-pv-select")},e.prototype.deselectItem=function(e){e&&e.classList.remove("e-pv-select")},e.prototype.showAnnotationToolbar=function(e){this.pdfViewer.toolbar.annotationToolbarModule.adjustViewer(e[0]),e[0]?this.pdfViewer.toolbar.selectItem(this.editAnnotationButtonElement):(this.pdfViewer.toolbar.deSelectItem(this.editAnnotationButtonElement),this.pdfViewerBase.focusViewerContainer())},e.prototype.closeAnnotationToolbar=function(){this.pdfViewer.toolbar.annotationToolbarModule.adjustViewer(!1),this.pdfViewer.toolbar.deSelectItem(this.editAnnotationButtonElement),this.pdfViewerBase.navigationPane.closeCommentPanelContainer()},e.prototype.resetToolbar=function(){this.pdfViewer.enableToolbar&&(this.currentPageBoxElement.value="0",this.totalPageElement.textContent=this.pdfViewer.localeObj.getConstant("of")+"0",this.isEnabled(this.currentPageBoxElementContainer)||(this.currentPageBoxElementContainer.className+=this.disableClass),this.isEnabled(this.firstPageElement)||(this.firstPageElement.className+=this.disableClass),this.isEnabled(this.previousPageElement)||(this.previousPageElement.className+=this.disableClass),this.isEnabled(this.nextPageElement)||(this.nextPageElement.className+=this.disableClass),this.isEnabled(this.lastPageElement)||(this.lastPageElement.className+=this.disableClass),this.isEnabled(this.zoomInElement)||(this.zoomInElement.className+=this.disableClass),this.isEnabled(this.zommOutElement)||(this.zommOutElement.className+=this.disableClass),this.isEnabled(this.zoomDropDownElement)||(this.zoomDropDownElement.className+=this.disableClass),this.isEnabled(this.selectToolElement)||(this.selectToolElement.className+=this.disableClass),this.isEnabled(this.handToolElement)||(this.handToolElement.className+=this.disableClass),this.isEnabled(this.undoElement)||(this.undoElement.className+=this.disableClass),this.isEnabled(this.redoElement)||(this.redoElement.className+=this.disableClass),this.isEnabled(this.commentElement)||(this.commentElement.className+=this.disableClass),this.isEnabled(this.searchElement)||(this.searchElement.className+=this.disableClass),this.isEnabled(this.submitFormButton)||(this.submitFormButton.className+=this.disableClass),this.isEnabled(this.annotationElement)||(this.annotationElement.className+=this.disableClass),this.isEnabled(this.printElement)||(this.printElement.className+=this.disableClass),this.isEnabled(this.downloadElement)||(this.downloadElement.className+=this.disableClass)),this.pdfViewer.enableAnnotationToolbar&&(this.isEnabled(this.highlightElement)||(this.highlightElement.className+=this.disableClass),this.isEnabled(this.underlineElement)||(this.underlineElement.className+=this.disableClass),this.isEnabled(this.strikeThroughElement)||(this.strikeThroughElement.className+=this.disableClass),this.isEnabled(this.shapeElement)||(this.shapeElement.className+=this.disableClass),this.isEnabled(this.calibrateElement)||(this.calibrateElement.className+=this.disableClass),this.isEnabled(this.stampElement)||(this.stampElement.className+=this.disableClass),this.isEnabled(this.freeTextElement)||(this.freeTextElement.className+=this.disableClass),this.isEnabled(this.signatureElement)||(this.signatureElement.className+=this.disableClass),this.isEnabled(this.inkElement)||(this.inkElement.className+=this.disableClass),this.isEnabled(this.annotationFontFamilyElement)||(this.annotationFontFamilyElement.className+=this.disableClass),this.isEnabled(this.annotationFontSizeElement)||(this.annotationFontSizeElement.className+=this.disableClass),this.isEnabled(this.annotationTextColorElement)||(this.annotationTextColorElement.className+=this.disableClass),this.isEnabled(this.annotationTextAlignElement)||(this.annotationTextAlignElement.className+=this.disableClass),this.isEnabled(this.annotationTextPropertiesElement)||(this.annotationTextPropertiesElement.className+=this.disableClass),this.isEnabled(this.annotationColorElement)||(this.annotationColorElement.className+=this.disableClass),this.isEnabled(this.annotationStrokeColorElement)||(this.annotationStrokeColorElement.className+=this.disableClass),this.isEnabled(this.annotationThicknessElement)||(this.annotationThicknessElement.className+=this.disableClass),this.isEnabled(this.annotationOpacityElement)||(this.annotationOpacityElement.className+=this.disableClass),this.isEnabled(this.annotationDeleteElement)||(this.annotationDeleteElement.className+=this.disableClass),this.isEnabled(this.annotationCommentPanelElement)||(this.annotationCommentPanelElement.className+=this.disableClass))},e.prototype.EnableDeleteOption=function(e){null!==this.annotationDeleteElement&&(e?this.annotationDeleteElement.classList.remove(this.cssClass):this.isEnabled(this.annotationDeleteElement)||(this.annotationDeleteElement.className+=this.disableClass))},e.prototype.pageChanged=function(e){this.pdfViewer.enableNavigation&&(this.currentPageBoxElement.value=e.toString()),e===this.pdfViewer.pageCount&&(this.isEnabled(this.nextPageElement)||(this.nextPageElement.className+=this.disableClass),this.previousPageElement.classList.remove(this.cssClass),this.isEnabled(this.lastPageElement)||(this.lastPageElement.className+=this.disableClass),this.firstPageElement.classList.remove(this.cssClass)),e<this.pdfViewer.pageCount&&1!==e&&(this.firstPageElement.classList.remove(this.cssClass),this.previousPageElement.classList.remove(this.cssClass),this.nextPageElement.classList.remove(this.cssClass),this.lastPageElement.classList.remove(this.cssClass)),1===e&&(this.nextPageElement.classList.remove(this.cssClass),this.lastPageElement.classList.remove(this.cssClass),this.isEnabled(this.firstPageElement)||(this.firstPageElement.className+=this.disableClass),this.isEnabled(this.previousPageElement)||(this.previousPageElement.className+=this.disableClass))},e.prototype.updateUndoRedoButton=function(e,t){"undo"===e&&(t?this.undoElement.classList.remove(this.cssClass):this.isEnabled(this.undoElement)||(this.undoElement.className+=this.disableClass)),"redo"===e&&(t?this.redoElement.classList.remove(this.cssClass):this.isEnabled(this.redoElement)||(this.redoElement.className+=this.disableClass))},e.prototype.disableUndoRedoButton=function(){this.isEnabled(this.undoElement)||(this.undoElement.className+=this.disableClass),this.isEnabled(this.redoElement)||(this.redoElement.className+=this.disableClass)},e.prototype.enableTextMarkupAnnotationPropertiesTools=function(e){e?(this.annotationColorElement.classList.remove(this.cssClass),this.annotationOpacityElement.classList.remove(this.cssClass)):(this.isEnabled(this.annotationOpacityElement)||(this.annotationOpacityElement.className+=this.disableClass),this.isEnabled(this.annotationColorElement)||(this.annotationColorElement.className+=this.disableClass)),this.isEnabled(this.annotationFontColorElement)||(this.annotationFontColorElement.className+=this.disableClass),this.isEnabled(this.annotationFontFamilyElement)||(this.annotationFontFamilyElement.className+=this.disableClass),this.isEnabled(this.annotationFontSizeElement)||(this.annotationFontSizeElement.className+=this.disableClass),this.isEnabled(this.annotationTextAlignElement)||(this.annotationTextAlignElement.className+=this.disableClass),this.isEnabled(this.annotationTextPropertiesElement)||(this.annotationTextPropertiesElement.className+=this.disableClass),this.isEnabled(this.annotationStrokeColorElement)||(this.annotationStrokeColorElement.className+=this.disableClass),this.isEnabled(this.annotationThicknessElement)||(this.annotationThicknessElement.className+=this.disableClass)},e.prototype.enableAnnotationPropertiesTool=function(e,t){t&&(e?(this.annotationColorElement.classList.remove(this.cssClass),this.annotationStrokeColorElement.classList.remove(this.cssClass),this.annotationThicknessElement.classList.remove(this.cssClass),this.annotationOpacityElement.classList.remove(this.cssClass),this.pdfViewer.enableShapeLabel&&(this.annotationFontColorElement.classList.remove(this.cssClass),this.annotationFontFamilyElement.classList.remove(this.cssClass),this.annotationFontSizeElement.classList.remove(this.cssClass)),this.isEnabled(this.annotationTextAlignElement)||(this.annotationTextAlignElement.className+=this.disableClass),this.isEnabled(this.annotationTextPropertiesElement)||(this.annotationTextPropertiesElement.className+=this.disableClass)):(this.isEnabled(this.annotationColorElement)||(this.annotationColorElement.className+=this.disableClass),this.isEnabled(this.annotationStrokeColorElement)||(this.annotationStrokeColorElement.className+=this.disableClass),this.isEnabled(this.annotationThicknessElement)||(this.annotationThicknessElement.className+=this.disableClass),this.isEnabled(this.annotationOpacityElement)||(this.annotationOpacityElement.className+=this.disableClass),this.isEnabled(this.annotationDeleteElement)||(this.annotationDeleteElement.className+=this.disableClass)))},e.prototype.enableFreeTextAnnotationPropertiesTools=function(e,t){t&&e&&(this.annotationColorElement.classList.remove(this.cssClass),this.annotationStrokeColorElement.classList.remove(this.cssClass),this.annotationThicknessElement.classList.remove(this.cssClass),this.annotationOpacityElement.classList.remove(this.cssClass),this.annotationFontColorElement.classList.remove(this.cssClass),this.annotationFontFamilyElement.classList.remove(this.cssClass),this.annotationFontSizeElement.classList.remove(this.cssClass),this.annotationTextAlignElement.classList.remove(this.cssClass),this.annotationTextPropertiesElement.classList.remove(this.cssClass),this.annotationDeleteElement.classList.remove(this.cssClass),this.annotationCommentPanelElement.classList.remove(this.cssClass))},e.prototype.enableStampAnnotationPropertiesTools=function(e,t){e?(this.annotationOpacityElement.classList.remove(this.cssClass),this.annotationDeleteElement.classList.remove(this.cssClass),this.annotationCommentPanelElement.classList.remove(this.cssClass)):(this.isEnabled(this.annotationOpacityElement)||(this.annotationOpacityElement.className+=this.disableClass),this.isEnabled(this.annotationDeleteElement)||(this.annotationDeleteElement.className+=this.disableClass),this.isEnabled(this.annotationCommentPanelElement)||(this.annotationCommentPanelElement.className+=this.disableClass)),this.isEnabled(this.annotationColorElement)||(this.annotationColorElement.className+=this.disableClass),this.isEnabled(this.annotationStrokeColorElement)||(this.annotationStrokeColorElement.className+=this.disableClass),this.isEnabled(this.annotationThicknessElement)||(this.annotationThicknessElement.className+=this.disableClass),this.isEnabled(this.annotationOpacityElement)||(this.annotationOpacityElement.className+=this.disableClass),this.isEnabled(this.annotationFontColorElement)||(this.annotationFontColorElement.className+=this.disableClass),this.isEnabled(this.annotationFontFamilyElement)||(this.annotationFontFamilyElement.className+=this.disableClass),this.isEnabled(this.annotationFontSizeElement)||(this.annotationFontSizeElement.className+=this.disableClass),this.isEnabled(this.annotationTextAlignElement)||(this.annotationTextAlignElement.className+=this.disableClass),this.isEnabled(this.annotationTextPropertiesElement)||(this.annotationTextPropertiesElement.className+=this.disableClass)},e.prototype.enableSignaturePropertiesTools=function(e,t){e?(this.annotationStrokeColorElement.classList.remove(this.cssClass),this.annotationThicknessElement.classList.remove(this.cssClass),this.annotationOpacityElement.classList.remove(this.cssClass),this.annotationDeleteElement.classList.remove(this.cssClass),this.annotationCommentPanelElement.classList.remove(this.cssClass)):(this.isEnabled(this.annotationStrokeColorElement)||(this.annotationStrokeColorElement.className+=this.disableClass),this.isEnabled(this.annotationThicknessElement)||(this.annotationThicknessElement.className+=this.disableClass),this.isEnabled(this.annotationOpacityElement)||(this.annotationOpacityElement.className+=this.disableClass),this.isEnabled(this.annotationDeleteElement)||(this.annotationDeleteElement.className+=this.disableClass),this.isEnabled(this.annotationCommentPanelElement)||(this.annotationCommentPanelElement.className+=this.disableClass)),this.isEnabled(this.annotationColorElement)||(this.annotationColorElement.className+=this.disableClass),this.isEnabled(this.annotationFontColorElement)||(this.annotationFontColorElement.className+=this.disableClass),this.isEnabled(this.annotationFontFamilyElement)||(this.annotationFontFamilyElement.className+=this.disableClass),this.isEnabled(this.annotationFontSizeElement)||(this.annotationFontSizeElement.className+=this.disableClass),this.isEnabled(this.annotationTextAlignElement)||(this.annotationTextAlignElement.className+=this.disableClass),this.isEnabled(this.annotationTextPropertiesElement)||(this.annotationTextPropertiesElement.className+=this.disableClass)},e.prototype.annotationAdd=function(){this.isEnabled(this.annotationColorElement)||(this.annotationColorElement.className+=this.disableClass),this.isEnabled(this.annotationStrokeColorElement)||(this.annotationStrokeColorElement.className+=this.disableClass),this.isEnabled(this.annotationThicknessElement)||(this.annotationThicknessElement.className+=this.disableClass),this.isEnabled(this.annotationOpacityElement)||(this.annotationOpacityElement.className+=this.disableClass),this.isEnabled(this.annotationFontColorElement)||(this.annotationFontColorElement.className+=this.disableClass),this.isEnabled(this.annotationFontFamilyElement)||(this.annotationFontFamilyElement.className+=this.disableClass),this.isEnabled(this.annotationFontSizeElement)||(this.annotationFontSizeElement.className+=this.disableClass),this.isEnabled(this.annotationTextAlignElement)||(this.annotationTextAlignElement.className+=this.disableClass),this.isEnabled(this.annotationTextPropertiesElement)||(this.annotationTextPropertiesElement.className+=this.disableClass)},e.prototype.annotationUnSelect=function(){this.isEnabled(this.annotationColorElement)||(this.annotationColorElement.className+=this.disableClass),this.isEnabled(this.annotationStrokeColorElement)||(this.annotationStrokeColorElement.className+=this.disableClass),this.isEnabled(this.annotationThicknessElement)||(this.annotationThicknessElement.className+=this.disableClass),this.isEnabled(this.annotationOpacityElement)||(this.annotationOpacityElement.className+=this.disableClass),this.isEnabled(this.annotationFontColorElement)||(this.annotationFontColorElement.className+=this.disableClass),this.isEnabled(this.annotationFontFamilyElement)||(this.annotationFontFamilyElement.className+=this.disableClass),this.isEnabled(this.annotationFontSizeElement)||(this.annotationFontSizeElement.className+=this.disableClass),this.isEnabled(this.annotationTextAlignElement)||(this.annotationTextAlignElement.className+=this.disableClass),this.isEnabled(this.annotationTextPropertiesElement)||(this.annotationTextPropertiesElement.className+=this.disableClass),this.isEnabled(this.annotationDeleteElement)||(this.annotationDeleteElement.className+=this.disableClass)},e.prototype.annotationSelect=function(e){"FreeText"===e&&(this.annotationColorElement.classList.remove(this.cssClass),this.annotationStrokeColorElement.classList.remove(this.cssClass),this.annotationThicknessElement.classList.remove(this.cssClass),this.annotationOpacityElement.classList.remove(this.cssClass),this.annotationFontColorElement.classList.remove(this.cssClass),this.annotationFontFamilyElement.classList.remove(this.cssClass),this.annotationFontSizeElement.classList.remove(this.cssClass),this.annotationTextAlignElement.classList.remove(this.cssClass),this.annotationTextPropertiesElement.classList.remove(this.cssClass)),"Shape"!==e&&"Measure"!==e||(this.annotationColorElement.classList.remove(this.cssClass),this.annotationStrokeColorElement.classList.remove(this.cssClass),this.annotationThicknessElement.classList.remove(this.cssClass),this.annotationOpacityElement.classList.remove(this.cssClass),this.isEnabled(this.annotationFontColorElement)||(this.annotationFontColorElement.className+=this.disableClass),this.isEnabled(this.annotationFontFamilyElement)||(this.annotationFontFamilyElement.className+=this.disableClass),this.isEnabled(this.annotationFontSizeElement)||(this.annotationFontSizeElement.className+=this.disableClass),this.isEnabled(this.annotationTextAlignElement)||(this.annotationTextAlignElement.className+=this.disableClass),this.isEnabled(this.annotationTextPropertiesElement)||(this.annotationTextPropertiesElement.className+=this.disableClass)),"TextMarkup"===e&&(this.annotationColorElement.classList.remove(this.cssClass),this.isEnabled(this.annotationStrokeColorElement)||(this.annotationStrokeColorElement.className+=this.disableClass),this.isEnabled(this.annotationThicknessElement)||(this.annotationThicknessElement.className+=this.disableClass),this.annotationOpacityElement.classList.remove(this.cssClass),this.isEnabled(this.annotationFontColorElement)||(this.annotationFontColorElement.className+=this.disableClass),this.isEnabled(this.annotationFontFamilyElement)||(this.annotationFontFamilyElement.className+=this.disableClass),this.isEnabled(this.annotationFontSizeElement)||(this.annotationFontSizeElement.className+=this.disableClass),this.isEnabled(this.annotationTextAlignElement)||(this.annotationTextAlignElement.className+=this.disableClass),this.isEnabled(this.annotationTextPropertiesElement)||(this.annotationTextPropertiesElement.className+=this.disableClass)),this.annotationDeleteElement.classList.remove(this.cssClass),this.annotationCommentPanelElement.classList.remove(this.cssClass)},e.prototype.updateFontFamilyInIcon=function(e){this.annotationFontFamilyInputElement.value=e},e.prototype.updateFontSizeInIcon=function(e){var t=e.toString()+"px";this.annotationFontSizeInputElement.value=t},e.prototype.enableSearchItems=function(e){e?(this.mobileSearchPreviousOccurenceElement.classList.remove(this.cssClass),this.mobileSearchNextOccurenceElement.classList.remove(this.cssClass)):(this.isEnabled(this.mobileSearchPreviousOccurenceElement)||(this.mobileSearchPreviousOccurenceElement.className+=this.disableClass),this.isEnabled(this.mobileSearchNextOccurenceElement)||(this.mobileSearchNextOccurenceElement.className+=this.disableClass))},e.prototype.tapOnMobileDevice=function(e){null!=this.mobileToolbarContainerElement&&(this.mobileToolbarContainerElement.style.display=e?"none":"block")},e.prototype.isEnabled=function(e){return e.classList.contains(this.cssClass)},e}(),Dc=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function a(e){try{l(n.next(e))}catch(t){s(t)}}function r(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){e.done?o(e.value):new i((function(t){t(e.value)})).then(a,r)}l((n=n.apply(e,t||[])).next())}))},Nc=function(e,t){var i,n,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(s){return function(r){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(r){s=[6,r],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,r])}}},Fc=function(){function e(e){var t=this;this.pageSize=[],this.pageCount=0,this.isReRenderRequired=!0,this.currentPageNumber=0,this.activeElements=new Ip,this.mouseDownEvent=null,this.isDocumentLoaded=!1,this.renderedPagesList=[],this.pageGap=8,this.signatureAdded=!1,this.isFreeTextSelected=!1,this.pageLeft=5,this.sessionLimit=1e3,this.pageStopValue=300,this.toolbarHeight=56,this.pageLimit=0,this.previousPage=0,this.isViewerMouseDown=!1,this.isViewerMouseWheel=!1,this.scrollPosition=0,this.sessionStorage=[],this.isLoadedFormFieldAdded=!1,this.pointerCount=0,this.pointersForTouch=[],this.isPasswordAvailable=!1,this.passwordData="",this.reRenderedCount=0,this.mouseX=0,this.mouseY=0,this.mouseLeft=0,this.mouseTop=0,this.touchClientX=0,this.touchClientY=0,this.previousTime=0,this.currentTime=0,this.isTouchScrolled=!1,this.isLongTouchPropagated=!1,this.longTouchTimer=null,this.isViewerContainerDoubleClick=!1,this.dblClickTimer=null,this.pinchZoomStorage=[],this.isTextSelectionDisabled=!1,this.isPanMode=!1,this.dragX=0,this.dragY=0,this.isScrollbarMouseDown=!1,this.scrollX=0,this.scrollY=0,this.ispageMoved=!1,this.isThumb=!1,this.isTapHidden=!1,this.singleTapTimer=null,this.tapCount=0,this.inputTapCount=0,this.isInitialLoaded=!1,this.annotationPageList=[],this.importPageList=[],this.isImportAction=!1,this.isImportedAnnotation=!1,this.isAnnotationCollectionRemoved=!1,this.tool=null,this.action="Select",this.eventArgs=null,this.inAction=!1,this.isMouseDown=!1,this.isStampMouseDown=!1,this.stampAdded=!1,this.customStampCount=0,this.isDynamicStamp=!1,this.isMixedSizeDocument=!1,this.highestWidth=0,this.highestHeight=0,this.customStampCollection=[],this.isAlreadyAdded=!1,this.isWebkitMobile=!1,this.isFreeTextContextMenu=!1,this.isSelection=!1,this.isAddAnnotation=!1,this.annotationComments=null,this.isToolbarSignClicked=!1,this.signatureCount=0,this.isSignatureAdded=!1,this.isNewSignatureAdded=!1,this.isInitialPageMode=!1,this.documentAnnotationCollections=null,this.annotationRenderredList=[],this.annotationStorage={},this.formFieldStorage={},this.isStorageExceed=!1,this.isFormStorageExceed=!1,this.isNewStamp=!1,this.downloadCollections={},this.isAnnotationAdded=!1,this.annotationEvent=null,this.isAnnotationDrawn=!1,this.isAnnotationSelect=!1,this.isAnnotationMouseDown=!1,this.isAnnotationMouseMove=!1,this.validateForm=!1,this.isMinimumZoom=!1,this.documentLoaded=!1,this.tileRenderCount=0,this.tileRequestCount=0,this.isTileImageRendered=!1,this.isDataExits=!1,this.requestLists=[],this.tilerequestLists=[],this.textrequestLists=[],this.renderThumbnailImages=!1,this.isInkAdded=!1,this.inkCount=0,this.isAddedSignClicked=!1,this.imageCount=0,this.isMousedOver=!1,this.isFormFieldSelect=!1,this.isFormFieldMouseDown=!1,this.isFormFieldMouseMove=!1,this.isFormFieldMousedOver=!1,this.isPassword=!1,this.digitalSignaturePages=[],this.isDrawnCompletely=!1,this.isAddComment=!1,this.drawSignatureWithTool=!1,this.formFieldCollection=[],this.nonFillableFields={},this.isInitialField=!1,this.isTouchDesignerMode=!1,this.isPrint=!1,this.isJsonImported=!1,this.isJsonExported=!1,this.isPageRotated=!1,this.downloadFileName="",this.isFocusField=!1,this.isTouchPad=!1,this.isMacGestureActive=!1,this.macGestureStartScale=0,this.zoomInterval=5,this.focusField=[],this.isDeviceiOS=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,this.isMacSafari=navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome")&&!this.isDeviceiOS,this.clearSessionStorage=function(){var e="";e=ge.isIE||"edge"===ge.info.name?decodeURI(window.sessionStorage.getItem("hashId")):window.sessionStorage.getItem("hashId");var i=window.sessionStorage.getItem("documentLiveCount");if(null!==e){var n={hashId:e,documentLiveCount:i,action:"Unload",elementId:t.pdfViewer.element.id},o=window.sessionStorage.getItem("unload"),s=window.sessionStorage.getItem("serviceURL");if(s&&"undefined"!==s){if("keepalive"in new Request("")){var a=t.setUnloadRequestHeaders(),r=t.pdfViewer.ajaxRequestSettings.withCredentials?"include":"omit";fetch(s+"/"+o,{method:"POST",credentials:r,headers:a,body:JSON.stringify(n)})}}else S()&&t.clearCache(o,n,t)}window.sessionStorage.removeItem(t.documentId+"_annotations_textMarkup"),window.sessionStorage.removeItem(t.documentId+"_annotations_shape"),window.sessionStorage.removeItem(t.documentId+"_annotations_shape_measure"),window.sessionStorage.removeItem(t.documentId+"_annotations_stamp"),window.sessionStorage.removeItem(t.documentId+"_annotations_sticky"),window.sessionStorage.removeItem(t.documentId+"_annotations_freetext"),window.sessionStorage.removeItem(t.documentId+"_formfields"),window.sessionStorage.removeItem(t.documentId+"_formDesigner"),window.sessionStorage.removeItem(t.documentId+"_annotations_sign"),window.sessionStorage.removeItem(t.documentId+"_pagedata"),window.sessionStorage.removeItem("hashId"),window.sessionStorage.removeItem("documentLiveCount"),window.sessionStorage.removeItem("currentDocument"),window.sessionStorage.removeItem("serviceURL"),window.sessionStorage.removeItem("unload")},this.onWindowResize=function(e){var i=null;i=t,t.pdfViewer.enableRtl?(i.viewerContainer.style.right=(i.navigationPane.sideBarToolbar?i.navigationPane.getViewerContainerLeft():0)+"px",i.viewerContainer.style.left=(i.navigationPane.commentPanelContainer?i.navigationPane.commentPanelContainer.offsetWidth:0)+"px"):(i.viewerContainer.style.left=(i.navigationPane.sideBarToolbar?i.navigationPane.getViewerContainerLeft():0)+"px",i.viewerContainer.style.right=(i.navigationPane.commentPanelContainer?i.navigationPane.commentPanelContainer.offsetWidth:0)+"px");var n=(i.pdfViewer.element.clientWidth>0?i.pdfViewer.element.clientWidth:i.pdfViewer.element.style.width)-(i.navigationPane.sideBarToolbar?i.navigationPane.getViewerContainerLeft():0)-(i.navigationPane.commentPanelContainer?i.navigationPane.getViewerContainerRight():0);if(i.viewerContainer.style.width=n+"px",i.pdfViewer.toolbarModule){var o=S()?i.pdfViewer.element.querySelector(".e-pv-toolbar"):i.getElement("_toolbarContainer"),s=0,a=0;if(o&&(s=o.getBoundingClientRect().height),i.isAnnotationToolbarHidden()||ge.isDevice&&!t.pdfViewer.enableDesktopMode){if(0===s)if(t.navigationPane.isNavigationToolbarVisible)s=i.getElement("_navigationToolbar").getBoundingClientRect().height;if(!i.isFormDesignerToolbarHidded()){var r=i.getElement("_formdesigner_toolbar");a=r?r.getBoundingClientRect().height:0}i.viewerContainer.style.height=i.updatePageHeight(i.pdfViewer.element.getBoundingClientRect().height,s+a)}else{var l=S()?i.pdfViewer.element.querySelector(".e-pv-annotation-toolbar"):i.getElement("_annotation_toolbar"),d=0;l&&(d=l.getBoundingClientRect().height),i.viewerContainer.style.height=i.updatePageHeight(i.pdfViewer.element.getBoundingClientRect().height,s+d)}}else i.viewerContainer.style.height=i.updatePageHeight(i.pdfViewer.element.getBoundingClientRect().height,0);if(i.pdfViewer.bookmarkViewModule&&ge.isDevice&&!t.pdfViewer.enableDesktopMode){var h=i.getElement("_bookmarks_container");h&&(h.style.height=i.updatePageHeight(i.pdfViewer.element.getBoundingClientRect().height,0))}"0px"===i.viewerContainer.style.height&&("auto"===i.pdfViewer.height.toString()?(i.pdfViewer.height=500,i.viewerContainer.style.height=i.pdfViewer.height+"px"):i.viewerContainer.style.height=i.pdfViewer.element.style.height),"0px"===i.viewerContainer.style.width&&("auto"===i.pdfViewer.width.toString()?(i.pdfViewer.width=500,i.viewerContainer.style.width=i.pdfViewer.width+"px"):i.viewerContainer.style.width=i.pdfViewer.element.style.width),i.pageContainer.style.width=i.viewerContainer.clientWidth+"px",0===i.viewerContainer.clientWidth&&(i.pageContainer.style.width=i.pdfViewer.element.style.width),S()||i.pdfViewer.toolbarModule&&i.pdfViewer.toolbarModule.onToolbarResize(i.navigationPane.sideBarToolbar?i.navigationPane.getViewerMainContainerWidth():i.pdfViewer.element.clientWidth),t.pdfViewer.enableToolbar&&t.pdfViewer.thumbnailViewModule&&i.pdfViewer.thumbnailViewModule.gotoThumbnailImage(i.currentPageNumber-1),!i.pdfViewer.textSearchModule||ge.isDevice&&!t.pdfViewer.enableDesktopMode||i.pdfViewer.textSearchModule.textSearchBoxOnResize(),0!==n&&(i.navigationPane.isBookmarkListOpen||i.updateZoomValue()),ge.isDevice&&!t.pdfViewer.enableDesktopMode?(i.mobileScrollerContainer.style.left=n-parseFloat(i.mobileScrollerContainer.style.width)+"px",i.mobilePageNoContainer.style.left=n/2-parseFloat(i.mobilePageNoContainer.style.width)/2+"px",i.mobilePageNoContainer.style.top=i.pdfViewer.element.clientHeight/2+"px",i.updateMobileScrollerPosition()):(i.navigationPane.setResizeIconTop(),i.navigationPane.setCommentPanelResizeIconTop(),e&&"resize"===e.type&&i.signatureModule.updateCanvasSize()),i.navigationPane.sideBarToolbar&&(i.navigationPane.sideBarToolbar.style.height=i.viewerContainer.style.height)},this.viewerContainerOnMousedown=function(e){t.isFreeTextContextMenu=!1;var i=!1;t.isSelection=!0;var n=e.target;if(0===e.button&&!t.getPopupNoteVisibleStatus()&&!t.isClickedOnScrollBar(e,!1)){t.isViewerMouseDown=!0,1===e.detail&&"e-pdfviewer-formFields"!==n.className&&"free-text-input"!==n.className&&(i=!0,t.focusViewerContainer(!0)),t.scrollPosition=t.viewerContainer.scrollTop/t.getZoomFactor(),t.mouseX=e.clientX,t.mouseY=e.clientY,t.mouseLeft=e.clientX,t.mouseTop=e.clientY;var o=!!document.documentMode;!t.pdfViewer.textSelectionModule||t.isClickedOnScrollBar(e,!0)||t.isTextSelectionDisabled||(o||"e-pdfviewer-formFields"===n.className||"e-pdfviewer-ListBox"===n.className||"e-pv-formfield-dropdown"===n.className||"e-pv-formfield-listbox"===n.className||e.preventDefault(),"e-pv-droplet"!==n.className&&t.pdfViewer.textSelectionModule.clearTextSelection())}t.isClickedOnScrollBar(e,!1)&&(t.isViewerMouseDown=!0),t.isPanMode&&(t.dragX=e.pageX,t.dragY=e.pageY,t.viewerContainer.contains(e.target)&&e.target!==t.viewerContainer&&e.target!==t.pageContainer&&t.isPanMode&&(t.viewerContainer.style.cursor="grabbing")),!t.isShapeBasedAnnotationsEnabled()||!t.isAnnotationDrawn&&("e-pv-page-container"===n.className||"foreign-object"===n.className&&isNaN(t.activeElements.activePageID))||t.diagramMouseDown(e),t.pdfViewer.annotation&&t.pdfViewer.annotation.stickyNotesAnnotationModule.accordionContainer&&(i||(t.pdfViewer.annotationModule.stickyNotesAnnotationModule.isEditableElement=!1,t.updateCommentPanel(),i=!0)),S()&&t.mouseDownHandler(e)},this.viewerContainerOnMouseup=function(e){if(!t.getPopupNoteVisibleStatus()){t.isViewerMouseDown&&(t.scrollHoldTimer&&(clearTimeout(t.scrollHoldTimer),t.scrollHoldTimer=null),t.scrollPosition*t.getZoomFactor()!==t.viewerContainer.scrollTop&&t.pageViewScrollChanged(t.currentPageNumber));var i=!1;e.target&&("e-pv-show-designer-name"==e.target.className&&""!=e.target.id.split("_",1)&&(i=document.getElementById(e.target.id.split("_",1)).disabled),"foreign-object"==e.target.className&&e.target.children[0]&&(i=e.target.children[0].disabled)),i&&t.pdfViewer.annotation&&t.pdfViewer.annotation.clearSelection(),!t.isShapeBasedAnnotationsEnabled()||i||!t.isAnnotationDrawn&&"DrawTool"===t.action||(t.diagramMouseUp(e),t.pdfViewer.annotation&&t.pdfViewer.annotation.onAnnotationMouseUp()),t.pdfViewer.selectedItems.formFields.length>0?m(t.pdfViewer.toolbar)||m(t.pdfViewer.toolbar.formDesignerToolbarModule)||ge.isDevice||t.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(!0):m(t.pdfViewer.toolbar)||m(t.pdfViewer.toolbar.formDesignerToolbarModule)||ge.isDevice||t.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(!1),t.isSelection=!1;var n=document.getElementById(t.pdfViewer.element.id+"_commantPanel");if(n&&"block"===n.style.display&&t.pdfViewer.selectedItems&&0!==t.pdfViewer.selectedItems.annotations.length){var o=document.getElementById(t.pdfViewer.element.id+"_accordionContainer"+t.pdfViewer.currentPageNumber);o&&o.ej2_instances[0].expandItem(!0);var s=document.getElementById(t.pdfViewer.selectedItems.annotations[0].annotName);s&&(s.classList.contains("e-pv-comments-border")||s.firstChild.click())}if(0===e.button&&!t.isClickedOnScrollBar(e,!1)){var a=e.target,r=e.clientX,l=e.clientY,d=t.getZoomFactor(),h=t.currentPageNumber;if(a){var p=a.id.split("_text_")[1]||a.id.split("_textLayer_")[1]||a.id.split("_annotationCanvas_")[1]||a.id.split("_pageDiv_")[1]||a.id.split("_freeText_")[1]||a.id.split("_")[1];if(h=parseInt(p),isNaN(h)){var c=t.pdfViewer.formFieldCollection.filter((function(e){return e.id==a.id||e.id==a.id.split("_")[0]}));c.length>0&&(h=c[0].pageIndex)}}var u=t.getElement("_pageDiv_"+h);if(u){var f=u.getBoundingClientRect();r=(e.clientX-f.left)/d,l=(e.clientY-f.top)/d}a&&a.classList&&!a.classList.contains("e-pv-hyperlink")&&!a.classList.contains("e-pv-page-container")&&(t.pdfViewer.firePageClick(r,l,h+1),t.pdfViewer.formFieldsModule&&!t.pdfViewer.formDesignerModule&&t.pdfViewer.formFieldsModule.removeFocus()),t.isTextMarkupAnnotationModule()&&!t.isToolbarInkClicked&&t.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseUp(e),t.pdfViewer.formDesignerModule&&!t.pdfViewer.annotationModule&&t.pdfViewer.formDesignerModule.updateCanvas(h),t.viewerContainer.contains(e.target)&&e.target!==t.viewerContainer&&e.target!==t.pageContainer&&t.isPanMode&&(t.viewerContainer.style.cursor="move",t.viewerContainer.style.cursor="-webkit-grab",t.viewerContainer.style.cursor="-moz-grab",t.viewerContainer.style.cursor="grab")}t.isViewerMouseDown=!1}},this.detectTouchPad=function(e){t.isTouchPad=e.wheelDeltaY?e.wheelDeltaY===-3*e.deltaY||Math.abs(e.deltaY)<60:0===e.deltaMode},this.handleMacGestureStart=function(e){e.preventDefault(),e.stopPropagation(),t.macGestureStartScale=t.pdfViewer.magnification.zoomFactor},this.handleMacGestureChange=function(e){e.preventDefault(),e.stopPropagation();var i=e.clientX,n=e.clientY,o=Number((t.macGestureStartScale*e.scale).toFixed(2));t.isMacGestureActive||(t.isMacGestureActive=!0,t.pdfViewer.magnification.initiateMouseZoom(i,n,100*o),setTimeout((function(){t.isMacGestureActive=!1}),50))},this.handleMacGestureEnd=function(e){e.preventDefault(),e.stopPropagation()},this.viewerContainerOnMouseWheel=function(e){if(t.isViewerMouseWheel=!0,t.getRerenderCanvasCreated()&&e.preventDefault(),e.ctrlKey){var i=25;t.pdfViewer.magnification.zoomFactor<1&&(i=10),t.pdfViewer.magnification.zoomFactor>=2&&(i=50),t.isTouchPad&&!t.isMacSafari&&(i/=t.zoomInterval),e.wheelDelta>0?t.pdfViewer.magnification.initiateMouseZoom(e.x,e.y,100*t.pdfViewer.magnification.zoomFactor+i):t.pdfViewer.magnification.initiateMouseZoom(e.x,e.y,100*t.pdfViewer.magnification.zoomFactor-i),t.isTouchPad=!1}t.pdfViewer.magnificationModule&&(t.pdfViewer.magnificationModule.pageRerenderOnMouseWheel(),e.ctrlKey&&e.preventDefault(),t.pdfViewer.magnificationModule.fitPageScrollMouseWheel(e)),t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&t.isViewerMouseDown&&(e.target.classList.contains("e-pv-text")||t.pdfViewer.textSelectionModule.textSelectionOnMouseWheel(t.currentPageNumber-1))},this.onWindowKeyDown=function(e){var i=!!!!navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)&&e.metaKey;if((!t.isFreeTextAnnotationModule()||!t.pdfViewer.annotationModule||!0!==t.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&!0!==t.pdfViewer.annotationModule.inputElementModule.isInFocus)&&(!e.ctrlKey||!i))switch(e.keyCode){case 46:t.DeleteKeyPressed(e);break;case 27:if(t.pdfViewer.toolbar){if(t.pdfViewer.toolbar.addInkAnnotation(),t.pdfViewer.toolbar.deSelectCommentAnnotation(),t.pdfViewer.toolbar.updateStampItems(),t.pdfViewer.toolbar.annotationToolbarModule&&(S()?t.pdfViewer.toolbar.annotationToolbarModule.deselectAllItemsInBlazor():t.pdfViewer.toolbar.annotationToolbarModule.deselectAllItems()),t.pdfViewer.isFormDesignerToolbarVisible&&document.getElementById("FormField_helper_html_element")){var n=document.getElementById("FormField_helper_html_element");n&&n.remove()}t.pdfViewer.tool="",t.focusViewerContainer()}break;case 13:if(t.pdfViewer.formDesignerModule&&"keydown"===e.type&&13===e.keyCode&&e.target&&(e.target.id||e.target.tabIndex)&&t.pdfViewer.formFieldCollections){var o=void 0;e.target;o=e.target.tabIndex&&!e.target.id?e.target.parentElement.id.split("_content_html_element")[0]:e.target.id.split("_")[0];for(var s=0;s<t.pdfViewer.formFieldCollections.length;s++){var a=t.pdfViewer.formFieldCollections[s];o!==a.id||"SignatureField"!==a.type&&"InitialField"!==a.type||(t.pdfViewer.fireFormFieldClickEvent("formFieldClicked",t.pdfViewer.formFieldCollections[s]),e.preventDefault())}}break;case 32:if(t.pdfViewer.formDesignerModule&&"keydown"===e.type&&32===e.keyCode&&e.target&&e.target.id&&t.pdfViewer.formFields)for(s=0;s<t.pdfViewer.formFields.length;s++){var r=t.pdfViewer.formFields[s];if(e.target.id.split("_")[0]===r.id&&"Checkbox"===r.formFieldAnnotationType){t.pdfViewer.formDesignerModule.setCheckBoxState(e),e.preventDefault();break}}break;case 9:if(e.target&&(e.target.id||e.target.tabIndex)&&t.pdfViewer.formFieldCollections){var l,d=void 0,h=void 0,p=e.target;e.target.tabIndex&&!e.target.id?(p=e.target.parentElement,l=p.id.split("_content_html_element")[0]):(p=e.target,l=p.id.split("_input")[0]),t.pdfViewer.formDesignerModule&&(e.shiftKey&&"Tab"===e.key?(h=t.pdfViewer.formFieldCollections.findIndex((function(e){return e.id===l})),d=h>0?t.pdfViewer.formFieldCollections[h-1]:t.pdfViewer.formFieldCollections[t.pdfViewer.formFieldCollections.length-1]):(h=t.pdfViewer.formFieldCollections.findIndex((function(e){return e.id===l})),d=h+1<t.pdfViewer.formFieldCollections.length?t.pdfViewer.formFieldCollections[h+1]:t.pdfViewer.formFieldCollections[0]),t.pdfViewer.focusFormField(d),e.preventDefault()),t.pdfViewer.formDesigner||"e-pdfviewer-formFields"!==p.className&&(e.shiftKey&&"Tab"===e.key?(h=t.pdfViewer.formFieldCollections.findIndex((function(e){return e.id===p.id})),d=h>0?t.pdfViewer.formFieldCollections[h-1]:t.pdfViewer.formFieldCollections[t.pdfViewer.formFieldCollections.length-1]):(h=t.pdfViewer.formFieldCollections.findIndex((function(e){return e.id===p.id})),d=h+1<t.pdfViewer.formFieldCollections.length?t.pdfViewer.formFieldCollections[h+1]:t.pdfViewer.formFieldCollections[0]),t.pdfViewer.focusFormField(d),e.preventDefault())}if(e.target&&e.target.id&&t.pdfViewer.formFields)for(s=0;s<t.pdfViewer.formFields.length;s++){var c=t.pdfViewer.formFields[parseInt(s.toString(),10)];if(e.target.id===c.id){var u={value:c.value,fontFamily:c.fontFamily,fontSize:c.fontSize,fontStyle:c.fontStyle,color:c.color,backgroundColor:c.backgroundColor,alignment:c.alignment,isReadonly:c.isReadonly,visibility:c.visibility,maxLength:c.maxLength,isRequired:c.isRequired,isPrint:c.isPrint,rotation:c.rotateAngle,tooltip:c.tooltip,options:c.options,isChecked:c.isChecked,isSelected:c.isSelected};t.pdfViewer.fireFocusOutFormField(u,c.pageIndex)}}}},this.viewerContainerOnKeyDown=function(e){var i=!!navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i),n=!!i&&e.metaKey;if(!t.isFreeTextAnnotationModule()||!t.pdfViewer.annotationModule||!0!==t.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&!0!==t.pdfViewer.annotationModule.inputElementModule.isInFocus){if(e.ctrlKey||n){if(e.shiftKey&&!i||i&&!e.shiftKey)switch(e.keyCode){case 38:case 33:e.preventDefault(),1!==t.currentPageNumber&&t.updateScrollTop(0);break;case 40:case 34:e.preventDefault(),t.currentPageNumber!==t.pageCount&&t.updateScrollTop(t.pageCount-1)}switch(e.keyCode){case 79:t.pdfViewer.toolbarModule&&t.pdfViewer.enableToolbar&&t.pdfViewer.toolbarModule.openFileDialogBox(e);break;case 67:t.pdfViewer.textSelectionModule&&t.pdfViewer.enableTextSelection&&!t.isTextSelectionDisabled&&(e.preventDefault(),t.pdfViewer.textSelectionModule.copyText()),(t.pdfViewer.selectedItems.annotations.length||t.pdfViewer.selectedItems.formFields.length)&&(t.pdfViewer.copy(),t.contextMenuModule.previousAction="Copy");break;case 70:t.pdfViewer.textSearchModule&&t.pdfViewer.enableTextSearch&&(e.preventDefault(),t.pdfViewer.toolbarModule.textSearchButtonHandler());break;case 80:t.pdfViewer.printModule&&t.pdfViewer.enablePrint&&(e.preventDefault(),t.pdfViewer.print.print());break;case 90:t.pdfViewer.annotationModule&&t.pdfViewer.annotationModule.undo();break;case 88:(t.pdfViewer.selectedItems.annotations.length||t.pdfViewer.selectedItems.formFields.length)&&(t.pdfViewer.cut(),t.contextMenuModule.previousAction="Cut");break;case 89:t.pdfViewer.annotationModule&&t.pdfViewer.annotationModule.redo();break;case 86:if(t.pdfViewer.annotation&&t.pdfViewer.annotation.isShapeCopied||t.pdfViewer.formFields&&t.pdfViewer.formDesigner&&t.pdfViewer.formDesigner.isShapeCopied){var o=void 0,s=document.getElementById(t.pdfViewer.element.id+"_search_box");s&&(o="none"!==s.style.display),o||!t.pdfViewer.formDesigner||t.pdfViewer.formDesigner.isPropertyDialogOpen||(t.pdfViewer.paste(),t.contextMenuModule.previousAction="Paste")}}}else if(46===e.keyCode)t.DeleteKeyPressed(e);t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.magnifyBehaviorKeyDown(e)}},this.viewerContainerOnMousemove=function(e){t.mouseX=e.clientX,t.mouseY=e.clientY;var i=!!document.documentMode,n=e.target;if("Drag"===t.action&&e.preventDefault(),t.isViewerMouseDown&&"Perimeter"!==t.action&&"Polygon"!==t.action&&"Line"!==t.action&&"DrawTool"!==t.action&&"Distance"!==t.action)if(t.pdfViewer.textSelectionModule&&t.pdfViewer.enableTextSelection&&!t.isTextSelectionDisabled&&!t.getPopupNoteVisibleStatus())if(i){var o=window.getSelection();o.type||o.isCollapsed||null===o.anchorNode||(t.pdfViewer.textSelectionModule.isTextSelection=!0)}else{"e-pdfviewer-formFields"!=e.target.className&&e.preventDefault(),t.mouseX=e.clientX,t.mouseY=e.clientY;var s=t.pdfViewer.annotationModule;s&&s.textMarkupAnnotationModule&&s.textMarkupAnnotationModule.isDropletClicked&&s.textMarkupAnnotationModule.isEnableTextMarkupResizer(s.textMarkupAnnotationModule.currentTextMarkupAddMode)?s.textMarkupAnnotationModule.textSelect(e.target,t.mouseX,t.mouseY):t.pdfViewer.textSelectionModule.textSelectionOnMouseMove(e.target,t.mouseX,t.mouseY)}else t.skipPreventDefault(n)&&e.preventDefault();if(t.isTextMarkupAnnotationModule()&&!t.getPopupNoteVisibleStatus()&&t.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseMove(e),t.isPanMode&&t.panOnMouseMove(e),t.isShapeBasedAnnotationsEnabled()){var a=void 0;if(e.target&&(e.target.id.indexOf("_text")>-1||e.target.parentElement.classList.contains("foreign-object")||e.target.id.indexOf("_annotationCanvas")>-1||e.target.classList.contains("e-pv-hyperlink"))&&t.pdfViewer.annotation||e.target.classList.contains("e-pdfviewer-formFields")){var r=t.pdfViewer.annotation.getEventPageNumber(e);if(h=document.getElementById(t.pdfViewer.element.id+"_annotationCanvas_"+r)){var l=(p=h.getBoundingClientRect()).x?p.x:p.left,d=p.y?p.y:p.top;a=t.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation&&"Image"===t.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation.shapeAnnotationType?new Nh(l,d,p.width-10,p.height-10):new Nh(l+1,d+1,p.width-3,p.height-3)}}else if(!t.pdfViewer.annotationModule&&t.pdfViewer.formDesignerModule){var h;r=t.pdfViewer.formDesignerModule.getEventPageNumber(e);if(h=document.getElementById(t.pdfViewer.element.id+"_annotationCanvas_"+r)){l=(p=h.getBoundingClientRect()).x?p.x:p.left;var p,c=p.y?p.y:p.top;a=new Nh(l+10,c+10,p.width-10,p.height-10)}}var u=t.pdfViewer.annotationModule?t.pdfViewer.annotationModule.stampAnnotationModule:null;!a||!a.containsPoint({x:t.mouseX,y:t.mouseY})||u&&u.isStampAnnotSelected?(t.diagramMouseLeave(e),t.isAnnotationDrawn&&(t.diagramMouseUp(e),t.isAnnotationAdded=!0)):(t.diagramMouseMove(e),t.annotationEvent=e),t.pdfViewer.enableStampAnnotations&&u&&u.isStampAnnotSelected&&(t.pdfViewer.tool="Stamp",t.tool=new Ep(t.pdfViewer,t),t.isMouseDown=!0,u.isStampAnnotSelected=!1,u.isNewStampAnnot=!0),t.isSignatureAdded&&t.pdfViewer.enableHandwrittenSignature&&(t.pdfViewer.tool="Stamp",t.tool=new Ep(t.pdfViewer,t),t.isMouseDown=!0,t.isSignatureAdded=!1,t.isNewSignatureAdded=!0)}},this.panOnMouseMove=function(e){var i=!1;if("Ink"!==t.action&&"Line"!==t.action&&"Perimeter"!==t.action&&"Polygon"!==t.action&&"DrawTool"!==t.action&&"Drag"!==t.action&&-1===t.action.indexOf("Rotate")&&-1===t.action.indexOf("Resize")||(i=!0),t.viewerContainer.contains(e.target)&&e.target!==t.viewerContainer&&e.target!==t.pageContainer&&!i)if(t.isViewerMouseDown){var n=t.dragX-e.pageX,o=t.dragY-e.pageY;t.viewerContainer.scrollTop=t.viewerContainer.scrollTop+o,t.viewerContainer.scrollLeft=t.viewerContainer.scrollLeft+n,t.viewerContainer.style.cursor="move",t.viewerContainer.style.cursor="-webkit-grabbing",t.viewerContainer.style.cursor="-moz-grabbing",t.viewerContainer.style.cursor="grabbing",t.dragX=e.pageX,t.dragY=e.pageY}else t.navigationPane.isNavigationPaneResized||(t.viewerContainer.style.cursor="move",t.viewerContainer.style.cursor="-webkit-grab",t.viewerContainer.style.cursor="-moz-grab",t.viewerContainer.style.cursor="grab");else t.navigationPane.isNavigationPaneResized||(t.viewerContainer.style.cursor="auto")},this.viewerContainerOnMouseLeave=function(e){t.isViewerMouseDown&&t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&t.pdfViewer.textSelectionModule.textSelectionOnMouseLeave(e),t.pdfViewer.textSelectionModule&&t.pdfViewer.textSelectionModule.isTextSelection&&e.preventDefault(),"Ink"===t.action&&(t.diagramMouseUp(e),t.isAnnotationAdded=!0)},this.viewerContainerOnMouseEnter=function(e){t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&t.pdfViewer.textSelectionModule.clear()},this.viewerContainerOnMouseOver=function(e){var i=!!document.documentMode;t.isViewerMouseDown&&(i||e.preventDefault())},this.viewerContainerOnClick=function(e){if("dblclick"===e.type){if(!t.pdfViewer.textSelectionModule||t.isTextSelectionDisabled||t.getCurrentTextMarkupAnnotation())t.getCurrentTextMarkupAnnotation();else if(e.target.classList.contains("e-pv-text")){if(t.isViewerContainerDoubleClick=!0,!t.getTextMarkupAnnotationMode()){var i=parseFloat(e.target.id.split("_")[2]);t.pdfViewer.fireTextSelectionStart(i+1)}t.pdfViewer.textSelectionModule.selectAWord(e.target,e.clientX,e.clientY,!1),"MouseUp"===t.pdfViewer.contextMenuSettings.contextMenuAction&&t.pdfViewer.textSelectionModule.calculateContextMenuPosition(e.clientY,e.clientX),t.getTextMarkupAnnotationMode()?t.isTextMarkupAnnotationModule()&&t.getTextMarkupAnnotationMode()&&t.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(t.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode):(t.pdfViewer.textSelectionModule.maintainSelectionOnZoom(!0,!1),t.dblClickTimer=setTimeout((function(){t.applySelection()}),100),t.pdfViewer.textSelectionModule.fireTextSelectEnd())}if(t.action&&("Perimeter"===t.action||"Polygon"===t.action)&&t.tool){t.eventArgs.position=t.currentPosition,t.getMouseEventArgs(t.currentPosition,t.eventArgs,e,t.eventArgs.source);t.isMetaKey(e);var n={ctrlKey:e.ctrlKey,shiftKey:e.shiftKey};t.eventArgs.info=n,t.eventArgs.clickCount=e.detail,t.tool.mouseUp(t.eventArgs,!0)}if(t.pdfViewer.selectedItems||t.pdfViewer.annotation&&t.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)if(0!==t.pdfViewer.selectedItems.annotations.length){var o=t.pdfViewer.selectedItems.annotations[0];if(t.pdfViewer.annotationModule&&!o.formFieldAnnotationType)if(t.pdfViewer.annotationModule.annotationSelect(o.annotName,o.pageIndex,o,null,!0),!1===t.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus)if(!0===t.isFreeTextAnnotation(t.pdfViewer.selectedItems.annotations))(s={}).x=t.pdfViewer.selectedItems.annotations[0].bounds.x,s.y=t.pdfViewer.selectedItems.annotations[0].bounds.y,t.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(s,t.pdfViewer.selectedItems.annotations[0]);else if(!0===t.pdfViewer.selectedItems.annotations[0].enableShapeLabel){var s;(s={}).x=t.pdfViewer.selectedItems.annotations[0].bounds.x,s.y=t.pdfViewer.selectedItems.annotations[0].bounds.y,t.pdfViewer.annotation.inputElementModule.editLabel(s,t.pdfViewer.selectedItems.annotations[0])}else{(d=document.getElementById(t.pdfViewer.element.id+"_accordionContainer"+t.pdfViewer.currentPageNumber))&&d.ej2_instances[0].expandItem(!0);var a=document.getElementById(t.pdfViewer.selectedItems.annotations[0].annotName);a&&(a.classList.contains("e-pv-comments-border")||a.firstChild.click())}}else{var r=t.pdfViewer.annotation,l=t.pdfViewer.annotationModule;if(r&&l.textMarkupAnnotationModule&&l.textMarkupAnnotationModule.currentTextMarkupAnnotation){var d,h=t.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;t.pdfViewer.annotationModule.annotationSelect(h.annotName,t.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage,h,null,!0),(d=document.getElementById(t.pdfViewer.element.id+"_accordionContainer"+t.currentPageNumber))&&d.ej2_instances[0].expandItem(!0);var p=document.getElementById(h.annotName);p&&p.firstChild.click()}}if(t.pdfViewer.designerMode&&t.pdfViewer.selectedItems.formFields.length>0){var c={name:"formFieldDoubleClick",field:t.pdfViewer.selectedItems.formFields[0],cancel:!1};t.pdfViewer.fireFormFieldDoubleClickEvent(c),c.cancel||t.pdfViewer.formDesigner.createPropertiesWindow()}}else 3===e.detail&&(t.isViewerContainerDoubleClick&&(clearTimeout(t.dblClickTimer),t.isViewerContainerDoubleClick=!1),!t.pdfViewer.textSelectionModule||t.isTextSelectionDisabled||t.getTextMarkupAnnotationMode()||(t.pdfViewer.textSelectionModule.selectEntireLine(e),t.pdfViewer.textSelectionModule.maintainSelectionOnZoom(!0,!1),t.pdfViewer.textSelectionModule.fireTextSelectEnd(),t.applySelection()))},this.viewerContainerOnDragStart=function(e){!!document.documentMode||e.preventDefault()},this.viewerContainerOnContextMenuClick=function(e){t.isViewerMouseDown=!1},this.onWindowMouseUp=function(e){t.isFreeTextContextMenu=!1,t.isNewStamp=!1,t.signatureAdded=!1;var i=t.pdfViewer.annotationModule;if(i&&i.textMarkupAnnotationModule&&i.textMarkupAnnotationModule.isEnableTextMarkupResizer(i.textMarkupAnnotationModule.currentTextMarkupAddMode)){var n=i.textMarkupAnnotationModule;n.isLeftDropletClicked=!1,n.isDropletClicked=!1,n.isRightDropletClicked=!1,n.currentTextMarkupAnnotation||null!==window.getSelection().anchorNode?n.currentTextMarkupAnnotation||""!==n.currentTextMarkupAddMode||(n.isTextMarkupAnnotationMode=!1):n.showHideDropletDiv(!0)}if(!t.getPopupNoteVisibleStatus()){if(0===e.button){if(t.isNewFreeTextAnnotation())if(!t.pdfViewer.textSelectionModule||t.isTextSelectionDisabled||t.getTextMarkupAnnotationMode()){if(t.getTextMarkupAnnotationMode()){var o=t.pdfViewer.element,s=e.target;o&&s&&o.id.split("_")[0]===s.id.split("_")[0]&&t.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(t.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode)}}else{1!==e.detail||t.viewerContainer.contains(e.target)||t.contextMenuModule.contextMenuElement.contains(e.target)||null!==window.getSelection().anchorNode&&t.pdfViewer.textSelectionModule.textSelectionOnMouseup(e);var a=e.target;t.viewerContainer.contains(e.target)&&"e-pdfviewer-formFields"!==a.className&&"e-pv-formfield-input"!==a.className&&(t.isClickedOnScrollBar(e,!0)||t.isScrollbarMouseDown?null!==window.getSelection().anchorNode&&t.pdfViewer.textSelectionModule.applySpanForSelection():t.pdfViewer.textSelectionModule.textSelectionOnMouseup(e))}}else 2===e.button&&t.viewerContainer.contains(e.target)&&t.skipPreventDefault(e.target)&&t.checkIsNormalText()&&window.getSelection().removeAllRanges();return!t.isViewerMouseDown||(t.isViewerMouseDown=!1,t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&(t.pdfViewer.textSelectionModule.clear(),t.pdfViewer.textSelectionModule.selectionStartPage=null),e.preventDefault(),e.stopPropagation(),!1)}},this.onWindowTouchEnd=function(e){t.signatureAdded=!1,t.pdfViewer.element.contains(e.target)||t.contextMenuModule.contextMenuElement.contains(e.target)||t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&t.pdfViewer.textSelectionModule.clearTextSelection()},this.viewerContainerOnTouchStart=function(e){var i=e.touches;t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.setTouchPoints(i[0].clientX,i[0].clientY);var n=e.target;(1===i.length&&!n.classList.contains("e-pv-hyperlink")&&t.skipPreventDefault(n)&&t.preventTouchEvent(e),1===e.touches.length&&t.isTextMarkupAnnotationModule()&&!t.getPopupNoteVisibleStatus()&&(t.isToolbarInkClicked||t.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationTouchEnd(e)),t.touchClientX=i[0].clientX,t.touchClientY=i[0].clientY,t.scrollY=i[0].clientY,t.previousTime=(new Date).getTime(),1!==i.length||e.target.classList.contains("e-pv-touch-select-drop")||e.target.classList.contains("e-pv-touch-ellipse"))||(ge.isDevice&&!t.pdfViewer.enableDesktopMode&&t.pageCount>0&&!t.isThumb&&!e.target.classList.contains("e-pv-hyperlink")&&t.handleTaps(i,e),S()&&ge.isDevice&&!t.pdfViewer.enableDesktopMode||t.handleTextBoxTaps(i),t.isDesignerMode(n)?(t.contextMenuModule.close(),t.isLongTouchPropagated||(t.longTouchTimer=setTimeout((function(){t.isMoving||(t.isTouchDesignerMode=!0,t.contextMenuModule.open(t.touchClientY,t.touchClientX,t.viewerContainer))}),1e3)),t.isLongTouchPropagated=!0,t.isMoving=!1):t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&(t.pdfViewer.textSelectionModule.clearTextSelection(),t.contextMenuModule.close(),t.isLongTouchPropagated||(t.longTouchTimer=setTimeout((function(){t.viewerContainerOnLongTouch(e)}),1e3)),t.isLongTouchPropagated=!0));var o=t.pdfViewer.toolbarModule?t.pdfViewer.toolbarModule.annotationToolbarModule:"null";!n.classList.contains("e-pv-text")||o&&o.textMarkupToolbarElement&&0!==o.textMarkupToolbarElement.children.length||n.classList.add("e-pv-text-selection-none"),t.diagramMouseDown(e),"Perimeter"!==t.action&&"Polygon"!==t.action&&"DrawTool"!==t.action&&"Drag"!==t.action&&-1===t.action.indexOf("Rotate")&&-1===t.action.indexOf("Resize")||e.preventDefault()},this.viewerContainerOnLongTouch=function(e){if(t.touchClientX=e.touches[0].clientX,t.touchClientY=e.touches[0].clientY,e.preventDefault(),t.pdfViewer.textSelectionModule){var i=e.target;i.classList.contains("e-pv-text-selection-none")&&i.classList.remove("e-pv-text-selection-none"),t.pdfViewer.textSelectionModule.initiateTouchSelection(e,t.touchClientX,t.touchClientY),ge.isDevice&&!t.pdfViewer.enableDesktopMode&&(clearTimeout(t.singleTapTimer),t.tapCount=0)}},this.viewerContainerOnPointerDown=function(e){"touch"===e.pointerType&&(t.pointerCount++,t.pointerCount<=2&&(e.preventDefault(),t.pointersForTouch.push(e),2===t.pointerCount&&(t.pointerCount=0),t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.setTouchPoints(e.clientX,e.clientY)))},this.viewerContainerOnTouchMove=function(e){"Drag"===t.action&&(t.isMoving=!0),ge.isDevice&&!t.pdfViewer.enableDesktopMode&&(clearTimeout(t.singleTapTimer),t.singleTapTimer=null,t.tapCount=0),t.preventTouchEvent(e),t.isToolbarInkClicked&&e.preventDefault();var i,n=e.touches;if(t.pdfViewer.magnificationModule&&(t.isTouchScrolled=!0,n.length>1&&t.pageCount>0?(ge.isDevice&&!t.pdfViewer.enableDesktopMode&&(t.isTouchScrolled=!1),t.pdfViewer.enablePinchZoom&&t.pdfViewer.magnificationModule.initiatePinchMove(n[0].clientX,n[0].clientY,n[1].clientX,n[1].clientY)):1===n.length&&t.getPagesPinchZoomed()&&(ge.isDevice&&!t.pdfViewer.enableDesktopMode&&(t.isTouchScrolled=!1),t.pdfViewer.magnificationModule.pinchMoveScroll())),t.mouseX=n[0].clientX,t.mouseY=n[0].clientY,e.target&&(e.target.id.indexOf("_text")>-1||e.target.id.indexOf("_annotationCanvas")>-1||e.target.classList.contains("e-pv-hyperlink"))&&t.pdfViewer.annotation){var o=t.pdfViewer.annotation.getEventPageNumber(e),s=document.getElementById(t.pdfViewer.element.id+"_annotationCanvas_"+o);if(s){var a=s.getBoundingClientRect(),r=a.x?a.x:a.left,l=a.y?a.y:a.top;i=new Nh(r+10,l+10,a.width-10,a.height-10)}}i&&i.containsPoint({x:t.mouseX,y:t.mouseY})||"Ink"===t.action?(t.diagramMouseMove(e),t.annotationEvent=e):(t.diagramMouseLeave(e),t.isAnnotationDrawn&&(t.diagramMouseUp(e),t.isAnnotationAdded=!0)),n=null},this.viewerContainerOnPointerMove=function(e){if("touch"===e.pointerType&&t.pageCount>0&&(e.preventDefault(),2===t.pointersForTouch.length)){for(var i=0;i<t.pointersForTouch.length;i++)if(e.pointerId===t.pointersForTouch[parseInt(i.toString(),10)].pointerId){t.pointersForTouch[parseInt(i.toString(),10)]=e;break}t.pdfViewer.magnificationModule&&t.pdfViewer.enablePinchZoom&&t.pdfViewer.magnificationModule.initiatePinchMove(t.pointersForTouch[0].clientX,t.pointersForTouch[0].clientY,t.pointersForTouch[1].clientX,t.pointersForTouch[1].clientY)}},this.viewerContainerOnTouchEnd=function(e){if(t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.pinchMoveEnd(),e.cancelable&&!e.target.classList.contains("e-pv-touch-ellipse")&&t.pdfViewer.textSelectionModule&&t.pdfViewer.textSelectionModule.isTextSelection&&e.preventDefault(),t.isLongTouchPropagated=!1,clearInterval(t.longTouchTimer),t.longTouchTimer=null,ge.isDevice&&!t.pdfViewer.enableDesktopMode&&t.isTouchScrolled){t.currentTime=(new Date).getTime();var i=t.currentTime-t.previousTime,n=t.scrollY-e.changedTouches[0].pageY,o=n/i;if(Math.abs(o)>1.5){var s=n+i*o;s>0&&(t.viewerContainer.scrollTop+=s,t.updateMobileScrollerPosition())}}t.diagramMouseUp(e),t.renderStampAnnotation(e),ge.isDevice||t.focusViewerContainer()},this.viewerContainerOnPointerEnd=function(e){"touch"===e.pointerType&&(e.preventDefault(),t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.pinchMoveEnd(),t.pointersForTouch=[],t.pointerCount=0)},this.viewerContainerOnScroll=function(e){var i=null,n=(i=t).pdfViewer.allowServerDataBinding;i.pdfViewer.enableServerDataBinding(!1);var o=0,s=0;if(e.touches&&ge.isDevice&&!t.pdfViewer.enableDesktopMode){var a=(t.viewerContainer.scrollHeight-t.viewerContainer.clientHeight)/(t.viewerContainer.clientHeight-t.toolbarHeight);if(t.isThumb){t.ispageMoved=!0,e.preventDefault(),t.mobilePageNoContainer.style.display="block",o=e.touches[0].pageX-t.scrollX,s=e.touches[0].pageY-t.viewerContainer.offsetTop,t.viewerContainer.scrollTop=s*a;var r=e.touches[0].pageY,l=t.pdfViewer.toolbarModule?0:50;0!==t.viewerContainer.scrollTop&&r<=t.viewerContainer.clientHeight-l&&(t.mobileScrollerContainer.style.top=r+"px")}else"e-pv-touch-ellipse"!==e.touches[0].target.className&&(t.isWebkitMobile&&ge.isDevice&&!t.pdfViewer.enableDesktopMode||(t.mobilePageNoContainer.style.display="none",s=t.touchClientY-e.touches[0].pageY,o=t.touchClientX-e.touches[0].pageX,t.viewerContainer.scrollTop=t.viewerContainer.scrollTop+s,t.viewerContainer.scrollLeft=t.viewerContainer.scrollLeft+o),t.updateMobileScrollerPosition(),t.touchClientY=e.touches[0].pageY,t.touchClientX=e.touches[0].pageX)}t.scrollHoldTimer&&clearTimeout(t.scrollHoldTimer);var d=t.currentPageNumber;t.scrollHoldTimer=null,t.contextMenuModule.close();for(var h=t.viewerContainer.scrollTop,p=0;p<t.pageCount;p++)if(null!=t.pageSize[parseInt(p.toString(),10)]){var c=t.getPageHeight(p);if(t.pageStopValue=c<150?75:c>=150&&c<300?125:c>=300&&c<500?200:300,h+t.pageStopValue<=t.getPageTop(p)+c){t.currentPageNumber=p+1,t.pdfViewer.currentPageNumber=p+1;break}}t.pdfViewer.magnificationModule&&"fitToPage"===t.pdfViewer.magnificationModule.fitType&&t.currentPageNumber>0&&t.pageSize[t.currentPageNumber-1]&&(t.isPanMode||ge.isDevice||!t.pdfViewer.enableDesktopMode||(t.viewerContainer.scrollTop=t.pageSize[t.currentPageNumber-1].top*t.getZoomFactor())),t.renderElementsVirtualScroll(t.currentPageNumber),(t.isViewerMouseDown||t.getPinchZoomed()||t.getPinchScrolled()||t.getPagesPinchZoomed())&&!t.isViewerMouseWheel?t.showPageLoadingIndicator(t.currentPageNumber-1,!1):(t.pageViewScrollChanged(t.currentPageNumber),t.isViewerMouseWheel=!1),t.pdfViewer.toolbarModule&&(S()||t.pdfViewer.toolbarModule.updateCurrentPage(t.currentPageNumber),t.viewerContainer.setAttribute("aria-labelledby",t.pdfViewer.element.id+"_pageDiv_"+(t.currentPageNumber-1)),S()||ge.isDevice&&!t.pdfViewer.enableDesktopMode||t.pdfViewer.toolbarModule.updateNavigationButtons()),ge.isDevice&&!t.pdfViewer.enableDesktopMode&&(t.mobileSpanContainer.innerHTML=t.currentPageNumber.toString(),t.mobilecurrentPageContainer.innerHTML=t.currentPageNumber.toString()),d!==t.currentPageNumber&&(!i.pdfViewer.thumbnailViewModule||ge.isDevice&&!t.pdfViewer.enableDesktopMode||(i.pdfViewer.thumbnailViewModule.gotoThumbnailImage(i.currentPageNumber-1),i.pdfViewer.thumbnailViewModule.isThumbnailClicked=!1),t.pdfViewer.firePageChange(d)),t.pdfViewer.magnificationModule&&(t.isPanMode||ge.isDevice||!t.pdfViewer.enableDesktopMode||t.pdfViewer.magnificationModule.updatePagesForFitPage(t.currentPageNumber-1));var u=t.getElement("_pageDiv_"+(t.currentPageNumber-1));if(u&&(u.style.visibility="visible"),t.isViewerMouseDown)if(t.getRerenderCanvasCreated()&&!t.isPanMode&&t.pdfViewer.magnificationModule.clearIntervalTimer(),t.getStoredData(t.currentPageNumber))t.isDataExits=!0,t.initiatePageViewScrollChanged(),t.isDataExits=!1;else{var f=t.pdfViewer.scrollSettings.delayPageRequestTimeOnScroll?t.pdfViewer.scrollSettings.delayPageRequestTimeOnScroll:100;t.scrollHoldTimer=setTimeout((function(){t.initiatePageViewScrollChanged()}),f)}t.pdfViewer.annotation&&t.navigationPane.commentPanelContainer&&t.pdfViewer.annotation.stickyNotesAnnotationModule.updateCommentPanelScrollTop(t.currentPageNumber),ge.isDevice&&!t.pdfViewer.enableDesktopMode&&e.touches&&"e-pv-touch-ellipse"!==e.touches[0].target.className&&setTimeout((function(){t.updateMobileScrollerPosition()}),500),i.pdfViewer.enableServerDataBinding(n,!0)},this.pdfViewer=e,this.navigationPane=new vh(this.pdfViewer,this),this.textLayer=new $o(this.pdfViewer,this),this.signatureModule=new Sl(this.pdfViewer,this),this.isWebkitMobile=/Chrome/.test(navigator.userAgent)||/Google Inc/.test(navigator.vendor)||-1!==navigator.userAgent.indexOf("Safari")}return e.prototype.initializeComponent=function(){var e=document.getElementById(this.pdfViewer.element.id);if(e){this.blazorUIAdaptor=S()?new Ec(this.pdfViewer,this):null,ge.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.element.classList.add("e-pv-mobile-view");var t=void 0;this.viewerMainContainer=S()?e.querySelector(".e-pv-viewer-main-container"):we("div",{id:this.pdfViewer.element.id+"_viewerMainContainer",className:"e-pv-viewer-main-container"}),this.viewerContainer=S()?e.querySelector(".e-pv-viewer-container"):we("div",{id:this.pdfViewer.element.id+"_viewerContainer",className:"e-pv-viewer-container",attrs:{"aria-label":"pdfviewer scroll view"}}),ge.isDevice&&!this.pdfViewer.enableDesktopMode&&this.createMobilePageNumberContainer(),this.viewerContainer.tabIndex=0,this.pdfViewer.enableRtl&&(this.viewerContainer.style.direction="rtl"),e.style.touchAction="pan-x pan-y",this.setMaximumHeight(e),this.mainContainer=S()?e.querySelector(".e-pv-main-container"):we("div",{id:this.pdfViewer.element.id+"_mainContainer",className:"e-pv-main-container"}),this.mainContainer.appendChild(this.viewerMainContainer),e.appendChild(this.mainContainer),this.applyViewerHeight(this.mainContainer),this.pdfViewer.toolbarModule?(this.navigationPane.initializeNavigationPane(),t=this.pdfViewer.toolbarModule.intializeToolbar("100%")):S()&&(this.navigationPane.initializeNavigationPane(),t=this.pdfViewer.element.querySelector(".e-pv-toolbar"),this.pdfViewer.enableToolbar||(this.toolbarHeight=0,t.style.display="none"),!this.pdfViewer.enableNavigationToolbar&&(ge.isDevice&&this.pdfViewer.enableDesktopMode||!ge.isDevice)&&(this.navigationPane.sideBarToolbar.style.display="none",this.navigationPane.sideBarToolbarSplitter.style.display="none",(this.navigationPane.isBookmarkOpen||this.navigationPane.isThumbnailOpen)&&this.navigationPane.updateViewerContainerOnClose())),this.viewerContainer.style.height=t?this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,56):this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,0);var i=this.pdfViewer.element.clientWidth;ge.isDevice&&!this.pdfViewer.enableDesktopMode||(i=i-(this.navigationPane.sideBarToolbar?this.navigationPane.getViewerContainerLeft():0)-(this.navigationPane.commentPanelContainer?this.navigationPane.getViewerContainerRight():0)),this.viewerContainer.style.width=i+"px",this.viewerMainContainer.appendChild(this.viewerContainer),ge.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.mobileScrollerContainer.style.left=i-parseFloat(this.mobileScrollerContainer.style.width)+"px",this.mobilePageNoContainer.style.left=i/2-parseFloat(this.mobilePageNoContainer.style.width)/2+"px",this.mobilePageNoContainer.style.top=this.pdfViewer.element.clientHeight/2+"px",this.mobilePageNoContainer.style.display="none",this.mobilePageNoContainer.appendChild(this.mobilecurrentPageContainer),this.mobilePageNoContainer.appendChild(this.mobilenumberContainer),this.mobilePageNoContainer.appendChild(this.mobiletotalPageContainer),this.viewerContainer.appendChild(this.mobilePageNoContainer),this.viewerMainContainer.appendChild(this.mobileScrollerContainer),this.mobileScrollerContainer.appendChild(this.mobileSpanContainer)),this.pageContainer=we("div",{id:this.pdfViewer.element.id+"_pageViewContainer",className:"e-pv-page-container",attrs:{tabindex:"0","aria-label":"pdfviewer Page View"}}),this.pdfViewer.enableRtl&&(this.pageContainer.style.direction="ltr"),this.viewerContainer.appendChild(this.pageContainer),this.pageContainer.style.width=this.viewerContainer.clientWidth+"px",t&&this.pdfViewer.thumbnailViewModule&&(!ge.isDevice||this.pdfViewer.enableDesktopMode)&&this.pdfViewer.thumbnailViewModule.createThumbnailContainer(),this.createPrintPopup(),ge.isDevice&&!this.pdfViewer.enableDesktopMode&&this.createGoToPagePopup();var n=we("div",{id:this.pdfViewer.element.id+"_loadingIndicator"});if(this.viewerContainer.appendChild(n),fc({target:n,cssClass:"e-spin-center"}),this.setLoaderProperties(n),S()){this.contextMenuModule=new Up(this.pdfViewer,this);var o=document.getElementsByClassName(this.pdfViewer.element.id+"_spinner");o&&o[0]&&!o[0].classList.contains("e-spin-hide")&&(o[0].classList.remove("e-spin-show"),o[0].classList.add("e-spin-hide"))}else this.contextMenuModule=new Sd(this.pdfViewer,this);this.contextMenuModule.createContextMenu(),this.createFileInputElement(),this.wireEvents(),!this.pdfViewer.textSearchModule||ge.isDevice&&!this.pdfViewer.enableDesktopMode||this.pdfViewer.textSearchModule.createTextSearchBox(),this.pdfViewer.documentPath&&(S()?this.pdfViewer._dotnetInstance.invokeMethodAsync("LoadDocumentFromClient",this.pdfViewer.documentPath):this.pdfViewer.load(this.pdfViewer.documentPath,null)),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.initializeCollection()}ge.isDevice&&this.pdfViewer.enableDesktopMode&&this.pdfViewer.toolbarModule&&(this.pdfViewer.interactionMode="Pan")},e.prototype.createMobilePageNumberContainer=function(){this.mobilePageNoContainer=we("div",{id:this.pdfViewer.element.id+"_mobilepagenoContainer",className:"e-pv-mobilepagenoscroll-container"}),this.mobilecurrentPageContainer=we("span",{id:this.pdfViewer.element.id+"_mobilecurrentpageContainer",className:"e-pv-mobilecurrentpage-container"}),this.mobilenumberContainer=we("span",{id:this.pdfViewer.element.id+"_mobiledashedlineContainer",className:"e-pv-mobiledashedline-container"}),this.mobiletotalPageContainer=we("span",{id:this.pdfViewer.element.id+"_mobiletotalpageContainer",className:"e-pv-mobiletotalpage-container"}),this.mobileScrollerContainer=we("div",{id:this.pdfViewer.element.id+"_mobilescrollContainer",className:"e-pv-mobilescroll-container"}),this.mobileSpanContainer=we("span",{id:this.pdfViewer.element.id+"_mobilespanContainer",className:"e-pv-mobilespanscroll-container"}),this.mobileSpanContainer.innerHTML="1",this.mobilecurrentPageContainer.innerHTML="1",this.mobilenumberContainer.innerHTML="&#x2015;&#x2015;&#x2015;&#x2015;&#x2015;",this.mobileScrollerContainer.style.cssFloat="right",this.mobileScrollerContainer.style.width="40px",this.mobileScrollerContainer.style.height="32px",this.mobileScrollerContainer.style.zIndex="100",this.mobilePageNoContainer.style.width="120px",this.mobilePageNoContainer.style.height="100px",this.mobilePageNoContainer.style.zIndex="100",this.mobilePageNoContainer.style.position="fixed",this.mobileScrollerContainer.addEventListener("touchstart",this.mobileScrollContainerDown.bind(this)),this.mobileScrollerContainer.addEventListener("touchend",this.mobileScrollContainerEnd.bind(this)),this.mobileScrollerContainer.style.display="none"},e.prototype.initiatePageRender=function(e,t){this.loadedData=e,this.documentId=this.createGUID(),this.viewerContainer&&(this.viewerContainer.scrollTop=0),this.showLoadingIndicator(!0),this.hashId=" ",this.isFileName=!1,this.saveDocumentInfo(),"Pan"===this.pdfViewer.interactionMode&&this.initiatePanning(),e=this.checkDocumentData(e),this.setFileName(),this.pdfViewer.downloadFileName?this.downloadFileName=this.pdfViewer.downloadFileName:this.downloadFileName=this.pdfViewer.fileName;var i=this.constructJsonObject(e,t);this.createAjaxRequest(i,e,t)},e.prototype.initiateLoadDocument=function(e,t,i){e&&(this.documentId=e),this.viewerContainer&&(this.viewerContainer.scrollTop=0),this.showLoadingIndicator(!0),this.hashId=" ",this.isFileName=t,this.saveDocumentInfo(),"Pan"===this.pdfViewer.interactionMode&&this.initiatePanning(),this.setFileName(),null===this.pdfViewer.fileName&&(t&&i?(this.pdfViewer.fileName=i,this.jsonDocumentId=this.pdfViewer.fileName):(this.pdfViewer.fileName="undefined.pdf",this.jsonDocumentId=null)),this.pdfViewer.downloadFileName?this.downloadFileName=this.pdfViewer.downloadFileName:this.downloadFileName=this.pdfViewer.fileName},e.prototype.loadSuccess=function(e,t){var i=e;if(i){if("object"!==typeof i)try{i=JSON.parse(i)}catch(n){this.onControlError(500,i,this.pdfViewer.serverActionSettings.load),i=null}if(i){for(;"object"!==typeof i;)if(i=JSON.parse(i),"number"===typeof parseInt(i)&&!isNaN(parseInt(i))){i=parseInt(i);break}i.StatusText&&"File Does not Exist"===i.StatusText&&this.showLoadingIndicator(!1),(i.uniqueId===this.documentId||"number"===typeof parseInt(i)&&!isNaN(parseInt(i)))&&(this.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.load,i),this.requestSuccess(i,null,t))}}},e.prototype.mobileScrollContainerDown=function(e){if(this.ispageMoved=!1,this.isThumb=!0,this.isTextMarkupAnnotationModule()&&null!=this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage&&ge.isDevice&&!this.pdfViewer.enableDesktopMode){var t=this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage=null,this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearAnnotationSelection(t),this.pdfViewer.toolbar.showToolbar(!0)}this.mobileScrollerContainer.addEventListener("touchmove",this.viewerContainerOnScroll.bind(this),!0)},e.prototype.relativePosition=function(e){var t=this.viewerContainer.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}},e.prototype.setMaximumHeight=function(e){var t=e.getBoundingClientRect();(!ge.isDevice||this.pdfViewer.enableDesktopMode||t&&0===t.height)&&(e.style.minHeight="500px"),this.updateWidth(),this.updateHeight()},e.prototype.applyViewerHeight=function(e){var t=e.getBoundingClientRect();ge.isDevice&&!this.pdfViewer.enableDesktopMode&&t&&0===t.height&&(e.style.minHeight="500px")},e.prototype.updateWidth=function(){"auto"!==this.pdfViewer.width.toString()&&(this.pdfViewer.element.style.width=this.pdfViewer.width)},e.prototype.updateHeight=function(){"auto"!==this.pdfViewer.height.toString()&&(this.pdfViewer.element.style.height=this.pdfViewer.height)},e.prototype.updateViewerContainer=function(){var e=this.getElement("_sideBarContentContainer");e&&"none"===e.style.display?this.navigationPane.updateViewerContainerOnClose():e&&"block"===e.style.display?this.navigationPane.updateViewerContainerOnExpand():this.updateViewerContainerSize();var t=this.pdfViewer.toolbarModule;t&&(S()?(this.pdfViewer.enableToolbar||this.pdfViewer.enableAnnotationToolbar)&&this.pdfViewer._dotnetInstance.invokeMethodAsync("RefreshToolbarItems"):(this.pdfViewer.enableToolbar&&t.toolbar.refreshOverflow(),this.pdfViewer.enableAnnotationToolbar&&t.annotationToolbarModule&&t.annotationToolbarModule.toolbar.refreshOverflow()))},e.prototype.updateViewerContainerSize=function(){this.viewerContainer.style.width=this.pdfViewer.element.clientWidth+"px",this.pageContainer.style.width=this.viewerContainer.offsetWidth+"px",this.updateZoomValue()},e.prototype.mobileScrollContainerEnd=function(e){this.ispageMoved||this.goToPagePopup.show(),this.isThumb=!1,this.ispageMoved=!1,this.mobileScrollerContainer.removeEventListener("touchmove",this.viewerContainerOnScroll.bind(this),!0),this.mobilePageNoContainer.style.display="none"},e.prototype.createAjaxRequest=function(e,t,i){var n;n=this,this.pdfViewer.serverActionSettings&&(this.loadRequestHandler=new Dh(this.pdfViewer),this.loadRequestHandler.url=this.pdfViewer.serviceUrl+"/"+this.pdfViewer.serverActionSettings.load,this.loadRequestHandler.responseType="json",this.loadRequestHandler.mode=!0,e.action="Load",e.elementId=this.pdfViewer.element.id,this.loadRequestHandler.send(e),this.loadRequestHandler.onSuccess=function(e){var o=e.data;if(o){if("object"!==typeof o)try{o=JSON.parse(o)}catch(s){n.onControlError(500,o,this.pdfViewer.serverActionSettings.load),o=null}if(o){for(;"object"!==typeof o;)if(o=JSON.parse(o),"number"===typeof parseInt(o)&&!isNaN(parseInt(o))){o=parseInt(o);break}(o.uniqueId===n.documentId||"number"===typeof parseInt(o)&&!isNaN(parseInt(o)))&&(n.updateFormFieldName(o),n.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.load,o),n.requestSuccess(o,t,i))}}else n.showLoadingIndicator(!1),n.openImportExportNotificationPopup(n.pdfViewer.localeObj.getConstant("Import PDF Failed"))},this.loadRequestHandler.onFailure=function(e){"4"===e.status.toString().split("")[0]&&"404"!==e.status.toString()?n.openNotificationPopup("Client error"):n.openNotificationPopup(),n.showLoadingIndicator(!1),n.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,n.pdfViewer.serverActionSettings.load)},this.loadRequestHandler.onError=function(e){n.openNotificationPopup(),n.showLoadingIndicator(!1),n.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,n.pdfViewer.serverActionSettings.load)})},e.prototype.updateFormFieldName=function(e){if(e&&e.PdfRenderedFormFields&&e.PdfRenderedFormFields.length>0)for(var t=void 0,i=0;i<e.PdfRenderedFormFields.length;i++)(t=e.PdfRenderedFormFields[parseInt(i.toString(),10)])&&t.ActualFieldName&&(t.FieldName=t.ActualFieldName)},e.prototype.openNotificationPopup=function(e){var t=this;if(this.pdfViewer.showNotificationDialog){if("Client error"===e)if(S())this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Clienterror").then((function(e){t.textLayer.createNotificationPopup(e)}));else this.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant("Client error"));else if(S())this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Servererror").then((function(e){t.textLayer.createNotificationPopup(e)}));else this.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant("Server error"));this.getElement("_notify")&&this.getElement("_notify").classList.add("e-pv-notification-large-content")}},e.prototype.showNotificationPopup=function(e){this.pdfViewer.showNotificationDialog||""===e||(this.textLayer.createNotificationPopup(e),this.getElement("_notify")&&this.getElement("_notify").classList.add("e-pv-notification-large-content"))},e.prototype.requestSuccess=function(e,t,i){if(e&&void 0!==e.pageCount){S()&&this.isPassword&&(this.isPassword=!1,this.isPasswordAvailable=!1,this.pdfViewer._dotnetInstance.invokeMethodAsync("ClosePasswordDialog")),i&&""!=i&&(this.passwordData=i),this.pdfViewer.allowServerDataBinding=!1,this.pageCount=e.pageCount,this.pdfViewer.pageCount=e.pageCount,this.hashId=e.hashId,this.documentLiveCount=e.documentLiveCount,this.isAnnotationCollectionRemoved=!1,this.saveDocumentHashData(),this.saveFormfieldsData(e),this.pdfViewer.allowServerDataBinding=!0,this.digitalSignaturePages=e.digitalSignaturePages,this.pageRender(e);var n={pageCount:e.pageCount,pageSizes:e.pageSizes};if(window.sessionStorage.setItem(this.documentId+"_pagedata",JSON.stringify(n)),ge.isDevice&&!this.pdfViewer.enableDesktopMode){this.mobileScrollerContainer.style.display="";var o=this.pdfViewer.toolbarModule?this.toolbarHeight:0;this.mobileScrollerContainer.style.top=o+"px"}this.restrictionList=e.RestrictionSummary,this.RestrictionEnabled(this.restrictionList,!1)}else this.pageCount=0,this.currentPageNumber=0,ge.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.mobileScrollerContainer.style.display="none"),4===e?S()||this.renderPasswordPopup(t,i):3===e&&(S()||this.renderCorruptPopup()),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.updateToolbarItems();var s=this.pdfViewer.annotationModule;s&&s.textMarkupAnnotationModule&&s.textMarkupAnnotationModule.isEnableTextMarkupResizer(s.textMarkupAnnotationModule.currentTextMarkupAddMode)&&s.textMarkupAnnotationModule.createAnnotationSelectElement()},e.prototype.RestrictionEnabled=function(e,t){if(e)for(var i=0;i<e.length;i++)this.EnableRestriction(e[parseInt(i.toString(),10)],t),S()?this.pdfViewer.toolbarModule&&this.pdfViewer._dotnetInstance.invokeMethodAsync("RestrictToolbarItems",e,t):this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.DisableToolbarItems(e[parseInt(i.toString(),10)],t)},e.prototype.EnableRestriction=function(e,t){switch(e){case"Print":this.pdfViewer.enablePrint=t;break;case"CopyContent":this.pdfViewer.enableTextSelection=t;break;case"FillFields":this.pdfViewer.enableFormFields=t,this.enableFormFieldButton(t);break;case"EditAnnotations":this.pdfViewer.enableAnnotation=t}},e.prototype.pageRender=function(e){this.document=null,this.passwordDialogReset(),this.passwordPopup&&this.passwordPopup.hide();this.initPageDiv(e),this.currentPageNumber=1,this.pdfViewer.currentPageNumber=1,this.previousZoomValue=this.pdfViewer.zoomValue;var t=!1;this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isAutoZoom=!0,this.pdfViewer.zoomValue&&this.pdfViewer.zoomValue>0&&(100!==this.pdfViewer.zoomValue&&(t=!0),this.isInitialPageMode=!0,this.pdfViewer.magnification.zoomTo(this.pdfViewer.zoomValue)),"FitToWidth"===this.pdfViewer.zoomMode?(this.isInitialPageMode=!0,this.pdfViewer.magnificationModule.fitToWidth()):"FitToPage"===this.pdfViewer.zoomMode&&(this.isInitialPageMode=!0,this.pdfViewer.magnificationModule.fitToPage()),this.documentLoaded=!0,this.pdfViewer.magnificationModule.isInitialLoading=!0,this.onWindowResize(),this.documentLoaded=!1,this.pdfViewer.magnificationModule.isInitialLoading=!1),this.isDocumentLoaded=!0;var i=816;i=parseInt(i);this.pageSize[parseInt((0).toString(),10)].width;if(-1===this.renderedPagesList.indexOf(0)&&!t){this.createRequestForRender(0);var n=1;if(n<this.pageCount&&(this.createRequestForRender(n),n+=1),this.pageSize[parseInt(n.toString(),10)])for(var o=this.getPageTop(n),s=this.viewerContainer.clientHeight;s>o&&this.pageSize[parseInt(n.toString(),10)];)this.renderPageElement(n),this.createRequestForRender(n),o=this.getPageTop(n),n+=1}this.showLoadingIndicator(!1),S()||this.pdfViewer.toolbarModule&&(this.pdfViewer.toolbarModule.uploadedDocumentName=null,this.pdfViewer.toolbarModule.updateCurrentPage(this.currentPageNumber),this.pdfViewer.toolbarModule.updateToolbarItems(),this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule&&this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationAddTools(!0),this.viewerContainer.setAttribute("aria-labelledby",this.pdfViewer.element.id+"_pageDiv_"+(this.currentPageNumber-1))),ge.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.mobileSpanContainer.innerHTML=this.currentPageNumber.toString(),this.mobilecurrentPageContainer.innerHTML=this.currentPageNumber.toString())},e.prototype.renderPasswordPopup=function(e,t){var i=this;if(S()){var n=document.getElementById(this.pdfViewer.element.id+"_prompt");this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_EnterPassword").then((function(e){n.textContent=e}));var o=document.querySelector("#"+this.pdfViewer.element.id+"_password_input");if(o.addEventListener("keyup",(function(){""===o.value&&i.passwordDialogReset()})),o.addEventListener("focus",(function(){o.parentElement.classList.add("e-input-focus")})),o.addEventListener("blur",(function(){o.parentElement.classList.remove("e-input-focus")})),this.isPasswordAvailable)this.pdfViewer.fireDocumentLoadFailed(!0,t),n.classList.add("e-pv-password-error"),this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_InvalidPassword").then((function(e){n.textContent=e})),n.focus(),this.isFileName?this.document=e:this.document="data:application/pdf;base64,"+e;else this.isFileName?this.document=e:this.document="data:application/pdf;base64,"+e,this.isPasswordAvailable=!0,this.pdfViewer.fireDocumentLoadFailed(!0,null);this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenPasswordDialog")}else this.isPasswordAvailable?(this.pdfViewer.fireDocumentLoadFailed(!0,t),this.promptElement.classList.add("e-pv-password-error"),this.promptElement.textContent=this.pdfViewer.localeObj.getConstant("Invalid Password"),this.promptElement.focus(),this.isFileName?this.document=e:this.document="data:application/pdf;base64,"+e,this.passwordPopup.show()):(this.isFileName?this.document=e:this.document="data:application/pdf;base64,"+e,this.isPasswordAvailable=!0,this.createPasswordPopup(),this.pdfViewer.fireDocumentLoadFailed(!0,null),this.passwordPopup.show())},e.prototype.renderCorruptPopup=function(){this.pdfViewer.fireDocumentLoadFailed(!1,null),this.documentId=null,this.pdfViewer.showNotificationDialog&&(S()?this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenCorruptedDialog"):(this.createCorruptedPopup(),this.corruptPopup.show()))},e.prototype.constructJsonObject=function(e,t){var i;return t?(this.isPasswordAvailable=!0,this.passwordData=t,i={document:e,password:t,zoomFactor:"1",isFileName:this.isFileName.toString(),uniqueId:this.documentId,showDigitalSignatureAppearance:this.pdfViewer.showDigitalSignatureAppearance}):(this.isPasswordAvailable=!1,this.passwordData="",i={document:e,zoomFactor:"1",isFileName:this.isFileName.toString(),uniqueId:this.documentId,hideEmptyDigitalSignatureFields:this.pdfViewer.hideEmptyDigitalSignatureFields,showDigitalSignatureAppearance:this.pdfViewer.showDigitalSignatureAppearance}),i},e.prototype.checkDocumentData=function(e){var t=e.split("base64,")[1];if(void 0===t){if(this.isFileName=!0,this.jsonDocumentId=e,null===this.pdfViewer.fileName){var i=-1!==e.indexOf("\\")?e.split("\\"):e.split("/");this.pdfViewer.fileName=i[i.length-1],this.jsonDocumentId=this.pdfViewer.fileName,t=e}}else this.jsonDocumentId=null;return t},e.prototype.setFileName=function(){null===this.pdfViewer.fileName&&(this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.uploadedDocumentName?(this.pdfViewer.fileName=this.pdfViewer.toolbarModule.uploadedDocumentName,this.jsonDocumentId=this.pdfViewer.fileName):(this.pdfViewer.fileName="undefined.pdf",this.jsonDocumentId=null))},e.prototype.saveDocumentInfo=function(){window.sessionStorage.setItem("currentDocument",this.documentId),window.sessionStorage.setItem("serviceURL",this.pdfViewer.serviceUrl),this.pdfViewer.serverActionSettings&&window.sessionStorage.setItem("unload",this.pdfViewer.serverActionSettings.unload)},e.prototype.saveDocumentHashData=function(){var e="";e=ge.isIE||"edge"===ge.info.name?encodeURI(this.hashId):this.hashId,window.sessionStorage.setItem("hashId",e),this.documentLiveCount&&window.sessionStorage.setItem("documentLiveCount",this.documentLiveCount.toString())},e.prototype.saveFormfieldsData=function(e){if(this.pdfViewer.isFormFieldDocument=!1,this.enableFormFieldButton(!1),e&&e.PdfRenderedFormFields&&e.PdfRenderedFormFields.length>0){if(this.formfieldvalue)this.pdfViewer.formFieldsModule&&this.setItemInSessionStorage(this.formfieldvalue,"_formfields"),this.formfieldvalue=null;else if(this.pdfViewer.formFieldsModule){for(var t=0;t<e.PdfRenderedFormFields.length;t++)""==e.PdfRenderedFormFields[parseInt(t.toString(),10)].FieldName&&e.PdfRenderedFormFields.splice(t,1);this.setItemInSessionStorage(e.PdfRenderedFormFields,"_formfields")}this.pdfViewer.enableFormFields&&this.pdfViewer.formFieldsModule&&this.pdfViewer.formFieldsModule.formFieldCollections(),this.pdfViewer.formFieldCollections.length>0&&(this.pdfViewer.isFormFieldDocument=!0,this.enableFormFieldButton(!0))}},e.prototype.enableFormFieldButton=function(e){e&&(this.pdfViewer.isFormFieldDocument=!0),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.submitItem&&this.pdfViewer.toolbarModule.toolbar.enableItems(this.pdfViewer.toolbarModule.submitItem.parentElement,e)},e.prototype.updateWaitingPopup=function(e){if(null!=this.pageSize[parseInt(e.toString(),10)].top){var t=this.getElement("_pageDiv_"+e).getBoundingClientRect(),i=this.getElement("_pageDiv_"+e).firstChild.firstChild;t.top<0?this.toolbarHeight+this.viewerContainer.clientHeight/2-t.top<t.height?i.style.top=this.viewerContainer.clientHeight/2-t.top-this.toolbarHeight+"px":this.toolbarHeight+t.bottom/2-t.top<t.height&&(i.style.top=t.bottom/2-t.top-this.toolbarHeight+"px"):i.style.top=this.viewerContainer.clientHeight/2+"px",ge.isDevice&&!this.pdfViewer.enableDesktopMode&&t.width>this.viewerContainer.clientWidth?i.style.left=this.viewerContainer.clientWidth/2+this.viewerContainer.scrollLeft+"px":this.getZoomFactor()>1.25&&t.width>this.viewerContainer.clientWidth?i.style.left=this.viewerContainer.clientWidth/2+"px":i.style.left=t.width/2+"px"}},e.prototype.getActivePage=function(e){return this.activeElements&&!m(this.activeElements.activePageID)?e?this.activeElements.activePageID+1:this.activeElements.activePageID:e?this.currentPageNumber:this.currentPageNumber-1},e.prototype.createWaitingPopup=function(e){var t=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+e);t&&(fc({target:t}),this.setLoaderProperties(t))},e.prototype.showLoadingIndicator=function(e){var t=this.getElement("_loadingIndicator");t&&(e?(t.style.display="block",Ac(t)):(t.style.display="none",Vc(t)))},e.prototype.showPageLoadingIndicator=function(e,t){var i=this.getElement("_pageDiv_"+e);null!=i&&(t?Ac(i):Vc(i),this.updateWaitingPopup(e))},e.prototype.showPrintLoadingIndicator=function(e){var t=this.getElement("_printLoadingIndicator");null!=t&&(e?(this.printMainContainer.style.display="block",Ac(t)):(this.printMainContainer.style.display="none",Vc(t)))},e.prototype.setLoaderProperties=function(e){var t=e.firstChild.firstChild.firstChild;t&&(t.style.height="48px",t.style.width="48px",t.style.transformOrigin="24px 24px 24px")},e.prototype.updateScrollTop=function(e){var t=this;null!=this.pageSize[e]&&(this.renderElementsVirtualScroll(e),this.viewerContainer.scrollTop=this.getPageTop(e),-1===this.renderedPagesList.indexOf(e)&&this.createRequestForRender(e),setTimeout((function(){var i=e+1;i!==t.currentPageNumber&&(t.pdfViewer.currentPageNumber=i,t.currentPageNumber=i,t.pdfViewer.toolbarModule&&t.pdfViewer.toolbarModule.updateCurrentPage(i))}),100))},e.prototype.getZoomFactor=function(){return this.pdfViewer.magnificationModule?this.pdfViewer.magnificationModule.zoomFactor:1},e.prototype.getPinchZoomed=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isPinchZoomed},e.prototype.getMagnified=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isMagnified},e.prototype.getPinchScrolled=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isPinchScrolled},e.prototype.getPagesPinchZoomed=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isPagePinchZoomed},e.prototype.getPagesZoomed=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isPagesZoomed},e.prototype.getRerenderCanvasCreated=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isRerenderCanvasCreated},e.prototype.getDocumentId=function(){return this.documentId},e.prototype.download=function(){this.pageCount>0&&this.createRequestForDownload()},e.prototype.saveAsBlob=function(){var e=this;return this.pageCount>0?new Promise((function(t,i){e.saveAsBlobRequest().then((function(e){t(e)}))})):null},e.prototype.saveAsBlobRequest=function(){var e,t=this;return e=this,new Promise((function(i,n){var o=e.constructJsonDownload();t.dowonloadRequestHandler=new Dh(t.pdfViewer),t.dowonloadRequestHandler.url=e.pdfViewer.serviceUrl+"/"+e.pdfViewer.serverActionSettings.download,t.dowonloadRequestHandler.responseType="text",t.dowonloadRequestHandler.send(o),t.dowonloadRequestHandler.onSuccess=function(t){var n=t.data;if(n&&("object"===typeof n&&(n=JSON.parse(n)),"object"!==typeof n&&-1===n.indexOf("data:application/pdf")&&(e.onControlError(500,n,e.pdfViewer.serverActionSettings.download),n=null),n)){e.pdfViewer.fireAjaxRequestSuccess(e.pdfViewer.serverActionSettings.download,n);var o=e.createBlobUrl(n.split("base64,")[1],"application/pdf");i(o)}},t.dowonloadRequestHandler.onFailure=function(t){e.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText,e.pdfViewer.serverActionSettings.download)},t.dowonloadRequestHandler.onError=function(t){e.openNotificationPopup(),e.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText,e.pdfViewer.serverActionSettings.download)}}))},e.prototype.clear=function(e){var t=this,i=t.pdfViewer,n=i.printModule,o=i.textSearchModule,s=i.bookmarkViewModule,a=i.thumbnailView,r=i.annotation,l=i.magnificationModule,d=i.textSelectionModule,h=i.formFieldsModule,p=t.signatureModule;if(t.isPasswordAvailable=!1,t.isDocumentLoaded=!1,t.isInitialLoaded=!1,t.isImportAction=!1,t.annotationPageList=[],t.annotationComments=null,i.annotationCollection=[],i.signatureCollection=[],i.formFieldCollection=[],t.isAnnotationCollectionRemoved=!1,t.documentAnnotationCollections=null,t.isDrawnCompletely=!1,t.annotationRenderredList=[],t.isImportAction=!1,t.isImportedAnnotation=!1,t.importedAnnotation=[],t.isStorageExceed=!1,t.annotationStorage={},t.formFieldStorage={},t.downloadCollections={},t.annotationEvent=null,t.highestWidth=0,t.highestHeight=0,t.requestLists=[],t.tilerequestLists=[],t.isToolbarInkClicked=!1,i.formFieldCollections=[],t.passwordData="",t.isFocusField=!1,t.focusField=[],t.updateDocumentEditedProperty(!1),i.clipboardData.clipObject={},i.formDesignerModule&&(i.formDesignerModule.formFieldIndex=0,t.activeElements&&i.clearSelection(t.activeElements.activePageID),i.zIndexTable=[]),t.initiateTextSelectMode(),t.RestrictionEnabled(t.restrictionList,!0),t.restrictionList=null,ge.isDevice&&!i.enableDesktopMode||t.navigationPane.sideBarToolbar&&t.navigationPane.clear(),(!S()&&ge.isDevice||!i.enableDesktopMode)&&t.navigationPane.clear(),a&&a.clear(),s&&s.clear(),l&&(l.isMagnified=!1,l.clearIntervalTimer()),d&&d.clearTextSelection(),o&&o.resetTextSearch(),r&&(r.clear(),r.initializeCollection()),h&&(h.readOnlyCollection=[],h.signatureFieldCollection=[],h.renderedPageList=[],h.currentTarget=null),p&&(p.signaturecollection=[],p.outputcollection=[],p.signAnnotationIndex=[]),t.pageSize&&(t.pageSize=[]),t.renderedPagesList&&(t.renderedPagesList=[]),t.pageContainer)for(;t.pageContainer.hasChildNodes();)t.pageContainer.removeChild(t.pageContainer.lastChild);t.pageCount>0&&(t.unloadDocument(t),t.textLayer.characterBound=new Array,t.loadRequestHandler&&t.loadRequestHandler.clear(),t.virtualLoadRequestHandler&&t.virtualLoadRequestHandler.clear(),t.pageRequestHandler&&t.pageRequestHandler.clear(),t.dowonloadRequestHandler&&t.dowonloadRequestHandler.clear(),t.importAnnotationRequestHandler&&t.importAnnotationRequestHandler.clear(),t.exportAnnotationRequestHandler&&t.exportAnnotationRequestHandler.clear(),t.importFormFieldsRequestHandler&&t.importFormFieldsRequestHandler.clear(),t.exportFormFieldsRequestHandler&&t.exportFormFieldsRequestHandler.clear(),n&&n.printRequestHandler&&n.printRequestHandler.clear()),t.windowSessionStorageClear(),t.pinchZoomStorage&&(t.pinchZoomStorage=[]),!t.previousZoomValue&&0!==t.previousZoomValue||t.previousZoomValue===i.zoomValue||(i.zoomValue=t.previousZoomValue),e&&t.pageCount>0&&i.fireDocumentUnload(this.pdfViewer.fileName),this.pdfViewer.fileName=null},e.prototype.destroy=function(){if(ge.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.element.classList.remove("e-pv-mobile-view"),this.unWireEvents(),this.clear(!1),this.pageContainer.parentNode&&this.pageContainer.parentNode.removeChild(this.pageContainer),this.viewerContainer.parentNode&&this.viewerContainer.parentNode.removeChild(this.viewerContainer),this.contextMenuModule){var e=this.contextMenuModule.contextMenuElement;e&&e.ej2_instances&&e.ej2_instances.length>0&&this.contextMenuModule.destroy()}this.pdfViewer.toolbarModule&&this.navigationPane.destroy();var t=document.getElementById("measureElement");t&&(t=void 0)},e.prototype.unloadDocument=function(e){var t="";t=ge.isIE||"edge"===ge.info.name?decodeURI(window.sessionStorage.getItem("hashId")):e.hashId?e.hashId:window.sessionStorage.getItem("hashId");var i=window.sessionStorage.getItem("documentLiveCount");if(null!==t){var n={hashId:t,documentLiveCount:i,action:"Unload",elementId:e.pdfViewer.element.id},o=window.sessionStorage.getItem("unload");if(window.sessionStorage.getItem("serviceURL")&&"undefined"!==window.sessionStorage.getItem("serviceURL"))try{if("keepalive"in new Request("")){var s=this.setUnloadRequestHeaders(),a=this.pdfViewer.ajaxRequestSettings.withCredentials?"include":"omit";fetch(window.sessionStorage.getItem("serviceURL")+"/"+o,{method:"POST",credentials:a,headers:s,body:JSON.stringify(n)})}}catch(l){this.unloadRequestHandler=new Dh(this.pdfViewer),this.unloadRequestHandler.send(n)}else S()&&this.clearCache(o,n,e)}if(this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.zoomFactor=1),this.formFieldCollection=[],this.textrequestLists=[],window.sessionStorage.removeItem("hashId"),window.sessionStorage.removeItem("documentLiveCount"),this.documentId){window.sessionStorage.removeItem(this.documentId+"_formfields"),window.sessionStorage.removeItem(this.documentId+"_formDesigner"),window.sessionStorage.removeItem(this.documentId+"_annotations_shape"),window.sessionStorage.removeItem(this.documentId+"_annotations_shape_measure"),window.sessionStorage.removeItem(this.documentId+"_annotations_stamp"),window.sessionStorage.removeItem(this.documentId+"_annotations_sticky"),window.sessionStorage.removeItem(this.documentId+"_annotations_textMarkup"),window.sessionStorage.removeItem(this.documentId+"_annotations_freetext"),window.sessionStorage.removeItem(this.documentId+"_formfields"),window.sessionStorage.removeItem(this.documentId+"_annotations_sign"),window.sessionStorage.removeItem(this.documentId+"_annotations_ink"),window.sessionStorage.removeItem(this.documentId+"_pagedata");for(var r=0;r<this.sessionStorage.length;r++)window.sessionStorage.removeItem(this.sessionStorage[parseInt(r.toString(),10)])}},e.prototype.clearCache=function(e,t,i){this.unloadRequestHandler=new Dh(this.pdfViewer),this.unloadRequestHandler.url=window.sessionStorage.getItem("serviceURL")+"/"+e,this.unloadRequestHandler.mode=!1,this.unloadRequestHandler.responseType=null,this.unloadRequestHandler.send(t),this.unloadRequestHandler.onSuccess=function(t){var n=t.data;n&&("object"!==typeof n&&-1===n.indexOf("Document")&&(i.onControlError(500,n,e),n=null),n&&i.pdfViewer.fireAjaxRequestSuccess(i.pdfViewer.serverActionSettings.unload,n))},this.unloadRequestHandler.onFailure=function(t){i.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText,e)},this.unloadRequestHandler.onError=function(t){i.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText,e)}},e.prototype.setUnloadRequestHeaders=function(){var e=new Headers;e.append("Content-Type","application/json;charset=UTF-8");for(var t=0;t<this.pdfViewer.ajaxRequestSettings.ajaxHeaders.length;t++)e.append(this.pdfViewer.ajaxRequestSettings.ajaxHeaders[parseInt(t.toString(),10)].headerName,this.pdfViewer.ajaxRequestSettings.ajaxHeaders[parseInt(t.toString(),10)].headerValue);return e},e.prototype.windowSessionStorageClear=function(){window.sessionStorage.removeItem("currentDocument"),window.sessionStorage.removeItem("serviceURL"),window.sessionStorage.removeItem("unload");for(var e=0;e<this.sessionStorage.length;e++)window.sessionStorage.removeItem(this.sessionStorage[parseInt(e.toString(),10)])},e.prototype.updateCommentPanel=function(){for(var e=document.querySelectorAll(".e-pv-more-options-button"),t=0;t<e.length;t++)e[parseInt(t.toString(),10)].style.visibility="hidden";for(var i=document.querySelectorAll(".e-pv-new-comments-div"),n=0;n<i.length;n++)i[parseInt(n.toString(),10)].style.display="none";var o=document.querySelectorAll(".e-pv-comments-border");for(n=0;n<o.length;n++)o[parseInt(n.toString(),10)].classList.remove("e-pv-comments-border");var s=document.querySelectorAll(".e-editable-inline");for(n=0;n<s.length;n++)s[parseInt(n.toString(),10)].style.display="none";for(var a=document.querySelectorAll(".e-pv-comments-select"),r=0;r<a.length;r++)a[parseInt(r.toString(),10)].classList.remove("e-pv-comments-select");var l=document.querySelectorAll(".e-pv-comments-div");for(n=0;n<l.length;n++)l[parseInt(n.toString(),10)].style.minHeight="60px"},e.prototype.focusViewerContainer=function(e){var t=window.scrollX,i=window.scrollY,n=this.getScrollParent(this.viewerContainer),o=0,s=0;null!==n&&(o=n.scrollLeft,s=n.scrollTop),this.viewerContainer.focus(),this.currentPageNumber>0&&this.viewerContainer.setAttribute("aria-labelledby",this.pdfViewer.element.id+"_pageDiv_"+(this.currentPageNumber-1)),this.pdfViewer.annotation&&this.pdfViewer.annotation.stickyNotesAnnotationModule.accordionContainer&&this.updateCommentPanel(),(-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>-1||-1!==navigator.userAgent.indexOf("Edge"))&&null!==n?(n.scrollLeft=o,n.scrollTop=s):null!==n&&n.scrollTo(o,s),window.scrollTo(t,i)},e.prototype.getScrollParent=function(e){if(null===e||"HTML"===e.nodeName)return null;var t=getComputedStyle(e);return this.viewerContainer.id===e.id||"scroll"!==t.overflowY&&"auto"!==t.overflowY?this.getScrollParent(e.parentNode):e},e.prototype.createCorruptedPopup=function(){var e=this,t=we("div",{id:this.pdfViewer.element.id+"_corrupted_popup",className:"e-pv-corrupted-popup"});this.pageContainer.appendChild(t),this.corruptPopup=new Ko({showCloseIcon:!0,closeOnEscape:!0,isModal:!0,header:'<div class="e-pv-corrupted-popup-header"> '+this.pdfViewer.localeObj.getConstant("File Corrupted")+"</div>",visible:!1,buttons:[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.closeCorruptPopup.bind(this)}],target:this.pdfViewer.element,beforeClose:function(){e.corruptPopup.destroy(),e.getElement("_corrupted_popup").remove(),e.corruptPopup=null;var t=e.getElement("_loadingIndicator");null!=t&&Vc(t)}}),this.pdfViewer.enableRtl?(this.corruptPopup.content='<div id="templatertl" class="e-pv-notification-icon-rtl"> <div class="e-pv-corrupted-popup-content-rtl" tabindex="0">'+this.pdfViewer.localeObj.getConstant("File Corrupted Content")+"</div></div>",this.corruptPopup.enableRtl=!0):this.corruptPopup.content='<div id="template" class="e-pv-notification-icon"> <div class="e-pv-corrupted-popup-content" tabindex="0">'+this.pdfViewer.localeObj.getConstant("File Corrupted Content")+"</div></div>",this.corruptPopup.appendTo(t)},e.prototype.hideLoadingIndicator=function(){var e=this.getElement("_loadingIndicator");null!==e&&Vc(e)},e.prototype.closeCorruptPopup=function(){this.corruptPopup.hide();var e=this.getElement("_loadingIndicator");null!==e&&Vc(e)},e.prototype.createPrintPopup=function(){var e=document.getElementById(this.pdfViewer.element.id);this.printMainContainer=we("div",{id:this.pdfViewer.element.id+"_printcontainer",className:"e-pv-print-popup-container"}),e.appendChild(this.printMainContainer),this.printMainContainer.style.display="none";var t=we("div",{id:this.pdfViewer.element.id+"_printLoadingIndicator",className:"e-pv-print-loading-container"});this.printMainContainer.appendChild(t),fc({target:t,cssClass:"e-spin-center"}),this.setLoaderProperties(t)},e.prototype.createGoToPagePopup=function(){var e=this,t=we("div",{id:this.pdfViewer.element.id+"_goTopage_popup",className:"e-pv-gotopage-popup"});this.goToPageElement=we("span",{id:this.pdfViewer.element.id+"_prompt"}),this.goToPageElement.textContent=this.pdfViewer.localeObj.getConstant("Enter pagenumber"),t.appendChild(this.goToPageElement);var i=we("span",{className:"e-pv-text-input"});(this.goToPageInput=we("input",{id:this.pdfViewer.element.id+"_page_input",className:"e-input"}),this.goToPageInput.type="text",this.goToPageInput.style.maxWidth="80%",this.pageNoContainer=we("span",{className:".e-pv-number-ofpages"}),i.appendChild(this.goToPageInput),i.appendChild(this.pageNoContainer),t.appendChild(i),this.pageContainer.appendChild(t),this.goToPagePopup=new Ko({showCloseIcon:!0,closeOnEscape:!1,isModal:!0,header:this.pdfViewer.localeObj.getConstant("GoToPage"),visible:!1,buttons:[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.GoToPageCancelClick.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Apply"),disabled:!0,cssClass:"e-pv-gotopage-apply-btn",isPrimary:!0},click:this.GoToPageApplyClick.bind(this)}],close:this.closeGoToPagePopUp.bind(this)}),this.pdfViewer.enableRtl&&(this.goToPagePopup.enableRtl=!0),this.goToPagePopup.appendTo(t),S())||new Eh({format:"##",showSpinButton:!1}).appendTo(this.goToPageInput);this.goToPageInput.addEventListener("keyup",(function(){var t=e.goToPageInput.value;""!==t&&parseFloat(t)>0&&e.pdfViewer.pageCount+1>parseFloat(t)?e.EnableApplyButton():e.DisableApplyButton()}))},e.prototype.closeGoToPagePopUp=function(){this.goToPageInput.value="",this.DisableApplyButton()},e.prototype.EnableApplyButton=function(){document.getElementsByClassName("e-pv-gotopage-apply-btn")[0].removeAttribute("disabled")},e.prototype.DisableApplyButton=function(){document.getElementsByClassName("e-pv-gotopage-apply-btn")[0].setAttribute("disabled",!0)},e.prototype.GoToPageCancelClick=function(){this.goToPagePopup.hide()},e.prototype.GoToPageApplyClick=function(){this.goToPagePopup.hide();var e=this.goToPageInput.value;this.pdfViewer.navigation.goToPage(e),this.updateMobileScrollerPosition()},e.prototype.updateMobileScrollerPosition=function(){if(ge.isDevice&&!this.pdfViewer.enableDesktopMode&&this.mobileScrollerContainer){var e=(this.viewerContainer.scrollHeight-this.viewerContainer.clientHeight)/(this.viewerContainer.clientHeight-56),t=this.viewerContainer.scrollTop/e,i=this.pdfViewer.toolbarModule?this.toolbarHeight:0;this.mobileScrollerContainer.style.top=i+t+"px"}},e.prototype.createPasswordPopup=function(){var e=this,t=we("div",{id:this.pdfViewer.element.id+"_password_popup",className:"e-pv-password-popup",attrs:{tabindex:"-1"}});this.promptElement=we("span",{id:this.pdfViewer.element.id+"_prompt",attrs:{tabindex:"-1"}}),this.promptElement.textContent=this.pdfViewer.localeObj.getConstant("Enter Password"),t.appendChild(this.promptElement);var i=we("span",{className:"e-input-group e-pv-password-input"});this.passwordInput=we("input",{id:this.pdfViewer.element.id+"_password_input",className:"e-input"}),this.passwordInput.type="password",this.passwordInput.name="Required",i.appendChild(this.passwordInput),t.appendChild(i),this.pageContainer.appendChild(t),this.passwordPopup=new Ko({showCloseIcon:!0,closeOnEscape:!1,isModal:!0,header:this.pdfViewer.localeObj.getConstant("Password Protected"),visible:!1,close:this.passwordCancel.bind(this),target:this.pdfViewer.element,beforeClose:function(){e.passwordPopup.destroy(),e.getElement("_password_popup").remove(),e.passwordPopup=null;var t=e.getElement("_loadingIndicator");null!=t&&Vc(t)}}),!ge.isDevice||this.pdfViewer.enableDesktopMode?this.passwordPopup.buttons=[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.applyPassword.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.passwordCancelClick.bind(this)}]:this.passwordPopup.buttons=[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.passwordCancelClick.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.applyPassword.bind(this)}],this.pdfViewer.enableRtl&&(this.passwordPopup.enableRtl=!0),this.passwordPopup.appendTo(t),this.passwordInput.addEventListener("keyup",(function(){""===e.passwordInput.value&&e.passwordDialogReset()})),this.passwordInput.addEventListener("focus",(function(){e.passwordInput.parentElement.classList.add("e-input-focus")})),this.passwordInput.addEventListener("blur",(function(){e.passwordInput.parentElement.classList.remove("e-input-focus")}))},e.prototype.passwordCancel=function(e){e.isInteraction&&(this.clear(!1),this.passwordDialogReset(),this.passwordInput.value="");var t=this.getElement("_loadingIndicator");null!==t&&Vc(t)},e.prototype.passwordCancelClick=function(){this.clear(!1),this.passwordDialogReset(),this.passwordPopup.hide();var e=this.getElement("_loadingIndicator");null!==e&&Vc(e)},e.prototype.passwordDialogReset=function(){S()||this.promptElement&&(this.promptElement.classList.remove("e-pv-password-error"),this.promptElement.textContent=this.pdfViewer.localeObj.getConstant("Enter Password"),this.passwordInput.value="")},e.prototype.applyPassword=function(){if(!S()){var e=this.passwordInput.value;!m(e)&&e.length>0&&this.pdfViewer.load(this.document,e)}this.focusViewerContainer()},e.prototype.createFileInputElement=function(){!ge.isDevice&&this.pdfViewer.enableDesktopMode||(this.pdfViewer.enableAnnotationToolbar&&this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule.createCustomStampElement(),this.signatureModule&&this.signatureModule.createSignatureFileElement())},e.prototype.wireEvents=function(){var e=this;this.viewerContainer.addEventListener("scroll",this.viewerContainerOnScroll,!0),ge.isDevice&&!this.pdfViewer.enableDesktopMode&&this.viewerContainer.addEventListener("touchmove",this.viewerContainerOnScroll,!0),this.viewerContainer.addEventListener("mousedown",this.viewerContainerOnMousedown),this.viewerContainer.addEventListener("mouseup",this.viewerContainerOnMouseup),this.viewerContainer.addEventListener("wheel",this.detectTouchPad,!1),this.viewerContainer.addEventListener("wheel",this.viewerContainerOnMouseWheel),this.isMacSafari&&(window.addEventListener("gesturestart",(function(e){return e.preventDefault()})),window.addEventListener("gesturechange",(function(e){return e.preventDefault()})),window.addEventListener("gestureend",(function(e){return e.preventDefault()})),this.viewerContainer.addEventListener("gesturestart",this.handleMacGestureStart,!1),this.viewerContainer.addEventListener("gesturechange",this.handleMacGestureChange,!1),this.viewerContainer.addEventListener("gestureend",this.handleMacGestureEnd,!1)),this.viewerContainer.addEventListener("mousemove",this.viewerContainerOnMousemove),this.viewerContainer.addEventListener("mouseleave",this.viewerContainerOnMouseLeave),this.viewerContainer.addEventListener("mouseenter",this.viewerContainerOnMouseEnter),this.viewerContainer.addEventListener("mouseover",this.viewerContainerOnMouseOver),this.viewerContainer.addEventListener("click",this.viewerContainerOnClick),this.viewerContainer.addEventListener("dblclick",this.viewerContainerOnClick),this.viewerContainer.addEventListener("dragstart",this.viewerContainerOnDragStart),this.pdfViewer.element.addEventListener("keydown",this.viewerContainerOnKeyDown),window.addEventListener("keydown",this.onWindowKeyDown),window.addEventListener("mouseup",this.onWindowMouseUp),window.addEventListener("touchend",this.onWindowTouchEnd),this.unload=function(){return e.unloadDocument(e)},window.addEventListener("unload",this.unload),window.addEventListener("beforeunload",this.clearSessionStorage),window.addEventListener("resize",this.onWindowResize),-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.userAgent.indexOf("Edge")||-1!==navigator.userAgent.indexOf("Trident")?(this.viewerContainer.addEventListener("pointerdown",this.viewerContainerOnPointerDown),this.viewerContainer.addEventListener("pointermove",this.viewerContainerOnPointerMove),this.viewerContainer.addEventListener("pointerup",this.viewerContainerOnPointerEnd),this.viewerContainer.addEventListener("pointerleave",this.viewerContainerOnPointerEnd)):(this.viewerContainer.addEventListener("touchstart",this.viewerContainerOnTouchStart),this.isWebkitMobile&&this.isDeviceiOS&&this.viewerContainer.addEventListener("touchmove",(function(e){1!==e.scale&&e.preventDefault()}),{passive:!1}),this.viewerContainer.addEventListener("touchmove",this.viewerContainerOnTouchMove),this.viewerContainer.addEventListener("touchend",this.viewerContainerOnTouchEnd),this.viewerContainer.addEventListener("touchleave",this.viewerContainerOnTouchEnd),this.viewerContainer.addEventListener("touchcancel",this.viewerContainerOnTouchEnd))},e.prototype.unWireEvents=function(){this.viewerContainer.removeEventListener("scroll",this.viewerContainerOnScroll,!0),ge.isDevice&&!this.pdfViewer.enableDesktopMode&&this.viewerContainer.removeEventListener("touchmove",this.viewerContainerOnScroll,!0),this.viewerContainer.removeEventListener("mousedown",this.viewerContainerOnMousedown),this.viewerContainer.removeEventListener("mouseup",this.viewerContainerOnMouseup),this.viewerContainer.removeEventListener("wheel",this.detectTouchPad,!1),this.viewerContainer.removeEventListener("wheel",this.viewerContainerOnMouseWheel),this.isMacSafari&&(window.removeEventListener("gesturestart",(function(e){return e.preventDefault()})),window.removeEventListener("gesturechange",(function(e){return e.preventDefault()})),window.removeEventListener("gestureend",(function(e){return e.preventDefault()})),this.viewerContainer.removeEventListener("gesturestart",this.handleMacGestureStart,!1),this.viewerContainer.removeEventListener("gesturechange",this.handleMacGestureChange,!1),this.viewerContainer.removeEventListener("gestureend",this.handleMacGestureEnd,!1)),this.viewerContainer.removeEventListener("mousemove",this.viewerContainerOnMousemove),this.viewerContainer.removeEventListener("mouseleave",this.viewerContainerOnMouseLeave),this.viewerContainer.removeEventListener("mouseenter",this.viewerContainerOnMouseEnter),this.viewerContainer.removeEventListener("mouseover",this.viewerContainerOnMouseOver),this.viewerContainer.removeEventListener("click",this.viewerContainerOnClick),this.viewerContainer.removeEventListener("dragstart",this.viewerContainerOnDragStart),this.viewerContainer.removeEventListener("contextmenu",this.viewerContainerOnContextMenuClick),this.pdfViewer.element.removeEventListener("keydown",this.viewerContainerOnKeyDown),window.addEventListener("keydown",this.onWindowKeyDown),window.removeEventListener("mouseup",this.onWindowMouseUp),window.removeEventListener("unload",this.unload),window.removeEventListener("resize",this.onWindowResize),-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.userAgent.indexOf("Edge")||-1!==navigator.userAgent.indexOf("Trident")?(this.viewerContainer.removeEventListener("pointerdown",this.viewerContainerOnPointerDown),this.viewerContainer.removeEventListener("pointermove",this.viewerContainerOnPointerMove),this.viewerContainer.removeEventListener("pointerup",this.viewerContainerOnPointerEnd),this.viewerContainer.removeEventListener("pointerleave",this.viewerContainerOnPointerEnd)):(this.viewerContainer.removeEventListener("touchstart",this.viewerContainerOnTouchStart),this.isWebkitMobile&&this.isDeviceiOS&&this.viewerContainer.removeEventListener("touchmove",(function(e){1!==e.scale&&e.preventDefault()}),!1),this.viewerContainer.removeEventListener("touchmove",this.viewerContainerOnTouchMove),this.viewerContainer.removeEventListener("touchend",this.viewerContainerOnTouchEnd),this.viewerContainer.removeEventListener("touchleave",this.viewerContainerOnTouchEnd),this.viewerContainer.removeEventListener("touchcancel",this.viewerContainerOnTouchEnd))},e.prototype.updateZoomValue=function(){this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isAutoZoom?this.pdfViewer.magnificationModule.fitToAuto():"FitToWidth"!==this.pdfViewer.zoomMode&&"fitToWidth"===this.pdfViewer.magnificationModule.fitType?this.pdfViewer.magnificationModule.fitToWidth():"fitToPage"===this.pdfViewer.magnificationModule.fitType&&this.pdfViewer.magnificationModule.fitToPage());for(var e=0;e<this.pageCount;e++)this.applyLeftPosition(e)},e.prototype.updateFreeTextProperties=function(e){this.pdfViewer.enableShapeLabel&&(this.pdfViewer.shapeLabelSettings.fillColor&&(e.labelFillColor=this.pdfViewer.shapeLabelSettings.fillColor),this.pdfViewer.shapeLabelSettings.fontColor&&(e.fontColor=this.pdfViewer.shapeLabelSettings.fontColor),this.pdfViewer.shapeLabelSettings.fontSize&&(e.fontSize=this.pdfViewer.shapeLabelSettings.fontSize),this.pdfViewer.shapeLabelSettings.fontFamily&&(e.fontFamily=this.pdfViewer.shapeLabelSettings.fontFamily),this.pdfViewer.shapeLabelSettings.opacity&&(e.labelOpacity=this.pdfViewer.shapeLabelSettings.opacity),this.pdfViewer.shapeLabelSettings.labelContent&&(e.labelContent=this.pdfViewer.shapeLabelSettings.labelContent))},e.prototype.mouseDownHandler=function(e){var t,i=!1,n=[],o=[];if(e&&e.target&&(this.mouseDownEvent=e,this.contextMenuModule.currentTarget=e.target),this.pdfViewer.annotationModule&&(i=this.pdfViewer.annotationModule.isEnableDelete()),i||o.push("DeleteContext"),"None"===this.pdfViewer.contextMenuOption)t=!0;else if(this.pdfViewer.textSelectionModule||this.isShapeBasedAnnotationsEnabled()){if(e){var s=this.isClickWithinSelectionBounds(e);this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus?(this.isFreeTextContextMenu=!0,this.pdfViewer.annotation.freeTextAnnotationModule&&!this.pdfViewer.annotation.freeTextAnnotationModule.isTextSelected&&(o.push("Cut"),o.push("Copy")),this.pdfViewer.annotation.freeTextAnnotationModule&&""===this.pdfViewer.annotation.freeTextAnnotationModule.selectedText&&o.push("Paste"),n.push("HighlightContext"),n.push("UnderlineContext"),n.push("StrikethroughContext"),n.push("ScaleRatio"),n.push("Properties"),n.push("Comment"),n.push("DeleteContext")):s&&this.pdfViewer.textSelectionModule?(!e.target.classList.contains("e-pv-maintaincontent")&&e.target.classList.contains("e-pv-text")||e.target.classList.contains("e-pv-text-layer")?this.checkIsNormalText()&&(t=!0):(ge.isIE||"edge"===ge.info.name)&&e.target.classList.contains("e-pv-page-container")&&(t=!0),n.push("Cut"),n.push("Paste"),n.push("DeleteContext"),n.push("ScaleRatio"),n.push("Comment"),n.push("Properties")):0===this.pdfViewer.selectedItems.annotations.length||"HandWrittenSignature"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"SignatureText"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"SignatureImage"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?0!==this.pdfViewer.selectedItems.annotations.length&&"Path"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?this.shapeMenuItems(n,o,!0):this.pdfViewer.annotation&&this.pdfViewer.annotation.isShapeCopied&&(e.target.classList.contains("e-pv-text-layer")||e.target.classList.contains("e-pv-text"))&&!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?(n.push("Properties"),this.shapeMenuItems(n,o,!1)):this.isCalibrateAnnotationModule()&&this.pdfViewer.annotationModule.measureAnnotationModule.currentAnnotationMode?(n.push("HighlightContext"),n.push("UnderlineContext"),n.push("StrikethroughContext"),n.push("Properties"),o.push("Cut"),o.push("Copy"),o.push("Paste"),o.push("DeleteContext"),o.push("Comment")):this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?(n.push("HighlightContext"),n.push("UnderlineContext"),n.push("StrikethroughContext"),n.push("Properties"),n.push("Cut"),n.push("Copy"),n.push("Paste"),n.push("ScaleRatio")):t=!0:this.shapeMenuItems(n,o,!1,!0)}else this.pdfViewer.textSelectionModule&&"MouseUp"===this.pdfViewer.contextMenuOption?(n.push("Cut"),n.push("Paste"),n.push("DeleteContext"),n.push("ScaleRatio"),n.push("Comment"),n.push("Properties")):0===this.pdfViewer.selectedItems.annotations.length&&(n.push("Cut"),n.push("Paste"),n.push("DeleteContext"),n.push("ScaleRatio"),n.push("Properties"));this.pdfViewer.enableCommentPanel||o.push("Comment")}else t=!0;var a={hidenItems:n,disabledItems:o,isCancel:t};this.pdfViewer._dotnetInstance.invokeMethodAsync("MouseDownHandler",a)},e.prototype.OnItemSelected=function(e){var t=this.contextMenuModule.currentTarget;switch(e){case this.pdfViewer.localeObj.getConstant("Copy"):this.CopyItemSelected();break;case this.pdfViewer.localeObj.getConstant("Highlight context"):this.TextMarkUpSelected("Highlight");break;case this.pdfViewer.localeObj.getConstant("Underline context"):this.TextMarkUpSelected("Underline");break;case this.pdfViewer.localeObj.getConstant("Strikethrough context"):this.TextMarkUpSelected("Strikethrough");break;case this.pdfViewer.localeObj.getConstant("Properties"):this.PropertiesItemSelected();break;case this.pdfViewer.localeObj.getConstant("Cut"):this.CutItemSelected(t);break;case this.pdfViewer.localeObj.getConstant("Paste"):this.pasteItemSelected(t);break;case this.pdfViewer.localeObj.getConstant("Delete Context"):this.DeleteItemSelected();break;case this.pdfViewer.localeObj.getConstant("Scale Ratio"):this.ScaleRatioSelected();break;case this.pdfViewer.localeObj.getConstant("Comment"):this.CommentItemSelected()}},e.prototype.CommentItemSelected=function(){if(this.pdfViewer.annotation&&(this.pdfViewer.annotation.showCommentsPanel(),0!==this.pdfViewer.selectedItems.annotations.length||this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)){var e=void 0;e=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation:this.pdfViewer.selectedItems.annotations[0];var t=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+this.pdfViewer.currentPageNumber);t&&t.ej2_instances[0].expandItem(!0);var i=document.getElementById(e.annotName);i&&(i.classList.contains("e-pv-comments-border")||i.firstChild.click())}},e.prototype.ScaleRatioSelected=function(){this.isCalibrateAnnotationModule()&&this.pdfViewer.annotation.measureAnnotationModule.createScaleRatioWindow()},e.prototype.DeleteItemSelected=function(){this.pdfViewer.formDesignerModule&&0!==this.pdfViewer.selectedItems.formFields.length?this.pdfViewer.formDesignerModule.deleteFormField(this.pdfViewer.selectedItems.formFields[0].id):this.pdfViewer.annotation&&this.pdfViewer.annotation.deleteAnnotation()},e.prototype.pasteItemSelected=function(e){this.isFreeTextContextMenu||this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&e&&"free-text-input"===e.className&&"TEXTAREA"===e.tagName?(this.pdfViewer.annotation.freeTextAnnotationModule.pasteSelectedText(e),this.contextMenuModule.close()):(this.pdfViewer.paste(),this.contextMenuModule.previousAction="Paste")},e.prototype.CutItemSelected=function(e){if(this.isFreeTextContextMenu||this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&e&&"free-text-input"===e.className&&"TEXTAREA"===e.tagName)this.pdfViewer.annotation.freeTextAnnotationModule.cutSelectedText(e),this.contextMenuModule.close();else if(1===this.pdfViewer.selectedItems.annotations.length){this.pdfViewer.selectedItems.annotations[0].pageIndex;this.pdfViewer.cut(),this.contextMenuModule.previousAction="Cut"}else 1===this.pdfViewer.selectedItems.formFields.length&&(this.pdfViewer.cut(),this.contextMenuModule.previousAction="Cut")},e.prototype.CopyItemSelected=function(){var e=!1;this.isFreeTextContextMenu||this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus?(this.pdfViewer.annotation.freeTextAnnotationModule.copySelectedText(),this.contextMenuModule.close(),e=!0):this.pdfViewer.textSelectionModule&&(this.pdfViewer.textSelectionModule.copyText(),this.contextMenuModule.close()),(this.pdfViewer.selectedItems.annotations.length&&!e||this.pdfViewer.selectedItems.formFields.length>0)&&(this.pdfViewer.copy(),this.contextMenuModule.previousAction="Copy")},e.prototype.PropertiesItemSelected=function(){0===this.pdfViewer.selectedItems.annotations.length||"Line"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"LineWidthArrowHead"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"Distance"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?0!==this.pdfViewer.selectedItems.formFields.length&&this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType&&this.pdfViewer.formDesigner.createPropertiesWindow():this.pdfViewer.annotation.createPropertiesWindow()},e.prototype.TextMarkUpSelected=function(e){this.pdfViewer.annotation&&this.pdfViewer.annotation.textMarkupAnnotationModule&&(this.pdfViewer.annotation.textMarkupAnnotationModule.isSelectionMaintained=!1,this.pdfViewer.annotation.textMarkupAnnotationModule.drawTextMarkupAnnotations(e),this.pdfViewer.annotation.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1,this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode="",this.pdfViewer.annotation.textMarkupAnnotationModule.isSelectionMaintained=!0)},e.prototype.shapeMenuItems=function(e,t,i,n){this.pdfViewer.annotation&&!this.pdfViewer.annotation.isShapeCopied&&t.push("Paste"),e.push("HighlightContext"),e.push("UnderlineContext"),e.push("StrikethroughContext"),e.push("ScaleRatio"),i?"Line"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"LineWidthArrowHead"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"Distance"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&e.push("Properties"):n?(e.push("Properties"),e.push("Comment")):(e.push("Cut"),e.push("Copy"),e.push("DeleteContext"),e.push("Comment"))},e.prototype.checkIsRtlText=function(e){return new RegExp("^[^A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF\\u2C00-\\uFB1C\\uFDFE-\\uFE6F\\uFEFD-\\uFFFF]*[\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC]").test(e)},e.prototype.isClickWithinSelectionBounds=function(e){var t,i=!1,n=this.currentPageNumber-5<0?0:this.currentPageNumber-5,o=this.currentPageNumber-5>this.pageCount?this.pageCount:this.currentPageNumber+5;if(this.pdfViewer.textSelectionModule){for(var s=n;s<o;s++)if(s>=0&&(t=this.pdfViewer.textSelectionModule.getCurrentSelectionBounds(s))){var a=t;if(this.getHorizontalValue(a.left,s)<e.clientX&&this.getHorizontalValue(a.right,s)>e.clientX&&this.getVerticalValue(a.top,s)<e.clientY&&this.getVerticalValue(a.bottom,s)>e.clientY){i=!0;break}}(ge.isIE||"edge"===ge.info.name)&&t&&(i=!0)}return i},e.prototype.getHorizontalClientValue=function(e){return e-this.getElement("_pageDiv_"+(this.currentPageNumber-1)).getBoundingClientRect().left},e.prototype.getVerticalClientValue=function(e){return e-this.getElement("_pageDiv_"+(this.currentPageNumber-1)).getBoundingClientRect().top},e.prototype.getHorizontalValue=function(e,t){var i=this.getElement("_pageDiv_"+(t||this.currentPageNumber-1)).getBoundingClientRect();return e*this.getZoomFactor()+i.left},e.prototype.getVerticalValue=function(e,t){var i=this.getElement("_pageDiv_"+(t||this.currentPageNumber-1)).getBoundingClientRect();return e*this.getZoomFactor()+i.top},e.prototype.checkIsNormalText=function(){var e=!0,t="",i=this.pdfViewer.textSelectionModule;return i&&i.selectionRangeArray&&1===i.selectionRangeArray.length?t=i.selectionRangeArray[0].textContent:window.getSelection()&&window.getSelection().anchorNode&&(t=window.getSelection().toString()),""!==t&&this.checkIsRtlText(t)&&(e=!1),e},e.prototype.DeleteKeyPressed=function(e){var t;e.srcElement.parentElement.classList&&!e.srcElement.parentElement.classList.contains("e-input-focus")&&(e.preventDefault(),e.stopPropagation());var i=document.getElementById(this.pdfViewer.element.id+"_search_box");if(i&&(t="none"!==i.style.display),this.pdfViewer.formDesignerModule&&!this.pdfViewer.formDesigner.isPropertyDialogOpen&&this.pdfViewer.designerMode&&0!==this.pdfViewer.selectedItems.formFields.length&&!t)this.pdfViewer.formDesignerModule.deleteFormField(this.pdfViewer.selectedItems.formFields[0].id);else if(this.pdfViewer.annotation&&!this.pdfViewer.designerMode&&e.srcElement.parentElement.classList&&!e.srcElement.parentElement.classList.contains("e-input-focus")&&(!this.isTextMarkupAnnotationModule()||this.getPopupNoteVisibleStatus()||t||this.pdfViewer.annotationModule.deleteAnnotation(),this.pdfViewer.selectedItems.annotations.length>0)){var n=this.pdfViewer.selectedItems.annotations[0],o=!0,s=n.shapeAnnotationType;if("Path"===s||"SignatureField"===n.formFieldAnnotationType||"InitialField"===n.formFieldAnnotationType||"HandWrittenSignature"===s||"SignatureText"===s||"SignatureImage"===s){var a=document.getElementById(n.id);a&&a.disabled&&(o=!0)}o||(n.annotationSettings&&n.annotationSettings.isLock?this.pdfViewer.annotationModule.checkAllowedInteractions("Delete",n)&&(this.pdfViewer.remove(n),this.pdfViewer.renderSelector(this.pdfViewer.annotation.getEventPageNumber(e))):(this.pdfViewer.remove(n),this.pdfViewer.renderSelector(this.pdfViewer.annotation.getEventPageNumber(e))))}},e.prototype.initiatePanning=function(){this.isPanMode=!0,this.textLayer.modifyTextCursor(!1),this.disableTextSelectionMode(),this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule&&this.pdfViewer.toolbar.annotationToolbarModule.deselectAllItems()},e.prototype.initiateTextSelectMode=function(){this.isPanMode=!1,this.viewerContainer&&(this.viewerContainer.style.cursor="auto",this.pdfViewer.textSelectionModule&&(this.textLayer.modifyTextCursor(!0),this.pdfViewer.textSelectionModule.enableTextSelectionMode()),ge.isDevice&&!this.pdfViewer.enableDesktopMode||S()||this.enableAnnotationAddTools(!0))},e.prototype.initiateTextSelection=function(){this.pdfViewer.toolbar&&!this.pdfViewer.toolbar.isSelectionToolDisabled&&(this.initiateTextSelectMode(),this.pdfViewer.toolbar.updateInteractionTools(!0))},e.prototype.enableAnnotationAddTools=function(e){this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationAddTools(e)},e.prototype.applySelection=function(){null!==window.getSelection().anchorNode&&this.pdfViewer.textSelectionModule.applySpanForSelection(),this.isViewerContainerDoubleClick=!1},e.prototype.isDesignerMode=function(e){var t=!1;return 0===this.pdfViewer.selectedItems.annotations.length||"HandWrittenSignature"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"SignatureText"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"SignatureImage"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?(0!==this.pdfViewer.selectedItems.annotations.length&&"Path"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||0!==this.pdfViewer.selectedItems.formFields.length&&this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType&&this.pdfViewer.designerMode||this.pdfViewer.annotation&&this.pdfViewer.annotation.isShapeCopied&&(e.classList.contains("e-pv-text-layer")||e.classList.contains("e-pv-text"))&&!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation||this.pdfViewer.formDesigner&&this.pdfViewer.formDesigner.isShapeCopied&&(e.classList.contains("e-pv-text-layer")||e.classList.contains("e-pv-text")))&&(t=!0):t=!0,this.designerModetarget=e,t},e.prototype.handleTaps=function(e,t){var i=this;if(this.isDeviceiOS){var n=bp(t,this,this.pdfViewer),o=!this.pdfViewer.annotation.freeTextAnnotationModule.isNewFreeTextAnnot&&(!n||!this.pdfViewer.selectedItems.annotations[0]||n.id!==this.pdfViewer.selectedItems.annotations[0].id)&&document.activeElement.classList.contains("free-text-input")&&this.isFreeTextAnnotation(this.pdfViewer.selectedItems.annotations);this.singleTapTimer?this.pdfViewer.enablePinchZoom&&(this.tapCount++,clearTimeout(this.singleTapTimer),this.singleTapTimer=null,this.onDoubleTap(e)):(this.singleTapTimer=setTimeout((function(){o&&(i.pdfViewer.clearSelection(i.pdfViewer.selectedItems.annotations[0].pageIndex),i.focusViewerContainer(!0)),i.onSingleTap(e)}),300),this.tapCount++)}else this.singleTapTimer?this.pdfViewer.enablePinchZoom&&(this.tapCount++,clearTimeout(this.singleTapTimer),this.singleTapTimer=null,this.onDoubleTap(e)):(this.singleTapTimer=setTimeout((function(){i.onSingleTap(e)}),300),this.tapCount++)},e.prototype.handleTextBoxTaps=function(e){var t=this;if(setTimeout((function(){t.inputTapCount=0}),300),this.inputTapCount++,this.isDeviceiOS)this.onTextBoxDoubleTap(e);else setTimeout((function(){t.onTextBoxDoubleTap(e)}),200);this.inputTapCount>2&&(this.inputTapCount=0)},e.prototype.onTextBoxDoubleTap=function(e){e[0].target;if(2===this.inputTapCount&&0!==this.pdfViewer.selectedItems.annotations.length){if(this.pdfViewer.annotationModule){var t=this.pdfViewer.selectedItems.annotations[0];this.isDeviceiOS&&document.activeElement.classList.contains("free-text-input")&&this.isFreeTextAnnotation(this.pdfViewer.selectedItems.annotations)&&this.focusViewerContainer(!0),this.pdfViewer.annotationModule.annotationSelect(t.annotName,t.pageIndex,t,null,!0)}if(this.isFreeTextAnnotation(this.pdfViewer.selectedItems.annotations)&&!this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus){(n={}).x=this.pdfViewer.selectedItems.annotations[0].bounds.x,n.y=this.pdfViewer.selectedItems.annotations[0].bounds.y;var i=void 0;i="diagram_helper"==this.pdfViewer.selectedItems.annotations[0].id?this.pdfViewer.nameTable[this.eventArgs.source.id]:this.pdfViewer.selectedItems.annotations[0],this.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(n,i)}else if(this.pdfViewer.selectedItems.annotations[0]&&this.pdfViewer.selectedItems.annotations[0].enableShapeLabel&&!this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus){var n;(n={}).x=this.pdfViewer.selectedItems.annotations[0].bounds.x,n.y=this.pdfViewer.selectedItems.annotations[0].bounds.y,this.pdfViewer.annotation.inputElementModule.editLabel(n,this.pdfViewer.selectedItems.annotations[0])}}},e.prototype.onSingleTap=function(e){var t=e[0].target,i=!1;if(this.singleTapTimer=null,t&&(t.classList.contains("e-pdfviewer-formFields")||t.classList.contains("e-pdfviewer-ListBox")||t.classList.contains("e-pdfviewer-signatureformfields"))&&(i=!0),!this.isLongTouchPropagated&&!this.navigationPane.isNavigationToolbarVisible&&!i&&this.pdfViewer.toolbarModule){if(this.touchClientX>=e[0].clientX-10&&this.touchClientX<=e[0].clientX+10&&this.touchClientY>=e[0].clientY-10&&this.touchClientY<=e[0].clientY+10){if(this.isTapHidden)S()&&(this.viewerContainer.scrollTop+=this.pdfViewer.element.querySelector(".e-pv-mobile-toolbar").clientHeight*this.getZoomFactor());else if(S()&&(this.viewerContainer.scrollTop-=this.pdfViewer.element.querySelector(".e-pv-mobile-toolbar").clientHeight*this.getZoomFactor()),this.pdfViewer.toolbar.moreDropDown){var n=this.getElement("_more_option-popup");n.firstElementChild&&(n.classList.remove("e-popup-open"),n.classList.add("e-popup-close"),n.removeChild(n.firstElementChild))}this.isTapHidden&&ge.isDevice&&!this.pdfViewer.enableDesktopMode?(this.mobileScrollerContainer.style.display="",this.updateMobileScrollerPosition()):ge.isDevice&&!this.pdfViewer.enableDesktopMode&&null==this.getSelectTextMarkupCurrentPage()&&(this.mobileScrollerContainer.style.display="none"),null==this.getSelectTextMarkupCurrentPage()&&(S()?this.blazorUIAdaptor.tapOnMobileDevice(this.isTapHidden):this.pdfViewer.enableToolbar&&this.pdfViewer.toolbarModule.showToolbar(!0),this.isTapHidden=!this.isTapHidden)}this.tapCount=0}},e.prototype.onDoubleTap=function(e){var t=e[0].target,i=!1;t&&(t.classList.contains("e-pdfviewer-formFields")||t.classList.contains("e-pdfviewer-ListBox")||t.classList.contains("e-pdfviewer-signatureformfields"))&&(i=!0),2!==this.tapCount||i||(this.tapCount=0,this.touchClientX>=parseInt((e[0].clientX-10).toString())&&this.touchClientX<=e[0].clientX+10&&this.touchClientY>=e[0].clientY-10&&this.touchClientY<=e[0].clientY+30&&(this.pdfViewer.magnification&&1!==this.pdfViewer.selectedItems.annotations.length&&this.pdfViewer.magnification.onDoubleTapMagnification(),this.viewerContainer.style.height=this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,this.toolbarHeight),this.isTapHidden=!1,clearTimeout(this.singleTapTimer),this.singleTapTimer=null))},e.prototype.preventTouchEvent=function(e){this.pdfViewer.textSelectionModule&&(this.isPanMode||!this.pdfViewer.enableTextSelection||this.isTextSelectionDisabled||null!=this.getSelectTextMarkupCurrentPage()||this.isWebkitMobile&&ge.isDevice&&!this.pdfViewer.enableDesktopMode||(e.preventDefault(),e.stopPropagation()))},e.prototype.renderStampAnnotation=function(e){if(this.pdfViewer.annotation){var t=this.getZoomFactor(),i=this.pdfViewer.annotation.getEventPageNumber(e),n=this.getElement("_pageDiv_"+i);if(this.pdfViewer.enableStampAnnotations){var o=this.pdfViewer.annotationModule.stampAnnotationModule;if(o&&o.isStampAnnotSelected&&n){var s=n.getBoundingClientRect();if("touchend"===e.type&&"Image"===this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation.shapeAnnotationType){var a=this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation;a.pageIndex=i,a.bounds.x=(e.changedTouches[0].clientX-s.left)/t,a.bounds.y=(e.changedTouches[0].clientY-s.top)/t,o.updateDeleteItems(i,a,a.opacity),this.pdfViewer.add(a);var r=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+i);this.pdfViewer.renderDrawing(r,i)}else o.renderStamp((e.changedTouches[0].clientX-s.left)/t,(e.changedTouches[0].clientY-s.top)/t,null,null,i,null,null,null,null);o.isStampAnnotSelected=!1}this.pdfViewer.annotation.onAnnotationMouseDown()}if(this.pdfViewer.enableHandwrittenSignature&&this.isSignatureAdded&&n){s=n.getBoundingClientRect();this.currentSignatureAnnot.pageIndex=i,this.signatureModule.renderSignature((e.changedTouches[0].clientX-s.left)/t,(e.changedTouches[0].clientY-s.top)/t),this.isSignatureAdded=!1}1===e.touches.length&&this.isTextMarkupAnnotationModule()&&!this.getPopupNoteVisibleStatus()&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationTouchEnd(e)}},e.prototype.initPageDiv=function(e){if(S()||this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.updateTotalPage(),ge.isDevice&&!this.pdfViewer.enableDesktopMode&&this.mobiletotalPageContainer&&(this.mobiletotalPageContainer.innerHTML=this.pageCount.toString(),this.pageNoContainer.innerHTML="(1-"+this.pageCount.toString()+")"),this.pageCount>0){var t=0,i=0;this.isMixedSizeDocument=!1,this.pageCount>100?(i=100,this.pageLimit=i):i=this.pageCount;for(var n=!1,o=!1,s=!1,a=0;a<i;a++){if("object"!==typeof e.pageSizes[parseInt(a.toString(),10)]){var r=e.pageSizes[parseInt(a.toString(),10)].split(",");if(null!==e.pageSizes[a-1]&&0!==a){var l=e.pageSizes[a-1].split(",");t=this.pageGap+parseFloat(l[1])+t}else t=this.pageGap;var d={width:parseFloat(r[0]),height:parseFloat(r[1]),top:t};this.pageSize.push(d)}else{if(null!==e.pageSizes[a-1]&&0!==a){l=e.pageSizes[a-1];t=this.pageGap+parseFloat(l.Height)+t}else t=this.pageGap;d={width:e.pageSizes[parseInt(a.toString(),10)].Width,height:e.pageSizes[parseInt(a.toString(),10)].Height,top:t};this.pageSize.push(d)}this.pageSize[parseInt(a.toString(),10)].height>this.pageSize[parseInt(a.toString(),10)].width&&(n=!0),this.pageSize[parseInt(a.toString(),10)].width>this.pageSize[parseInt(a.toString(),10)].height&&(o=!0),a>0&&this.pageSize[parseInt(a.toString(),10)].width!==this.pageSize[a-1].width&&(s=!0);var h=this.pageSize[parseInt(a.toString(),10)].width;h>this.highestWidth&&(this.highestWidth=h);var p=this.pageSize[parseInt(a.toString(),10)].height;p>this.highestHeight&&(this.highestHeight=p)}(n&&o||s)&&(this.isMixedSizeDocument=!0);var c=this.pageCount<10?this.pageCount:10;for(a=0;a<c;a++)this.renderPageContainer(a,this.getPageWidth(a),this.getPageHeight(a),this.getPageTop(a));if(this.pageContainer.style.height=this.getPageTop(this.pageSize.length-1)+this.getPageHeight(this.pageSize.length-1)+"px",this.pageContainer.style.position="relative",100===this.pageLimit)null===this.getElement("_pageDiv_"+this.pageLimit)&&this.pageLimit<this.pageCount&&Promise.all([this.renderPagesVirtually()])}},e.prototype.renderElementsVirtualScroll=function(e){var t=1;this.pageStopValue<=200?t=4:t=2;var i=e+t;i>this.pageCount&&(i=this.pageCount);for(var n=e-1;n<=i;n++)-1!==n&&this.renderPageElement(n);var o=e-3;o<0&&(o=0);for(n=e-1;n>=o;n--)-1!==n&&this.renderPageElement(n);for(var s=0;s<this.pageCount;s++)if(!(o<=s&&s<=i)){var a,r=this.getElement("_pageDiv_"+s),l=this.getElement("_pageCanvas_"+s),d=this.getElement("_textLayer_"+s);if(l)l.parentNode.removeChild(l),d&&(this.pdfViewer.textSelectionModule&&0!==d.childNodes.length&&!this.isTextSelectionDisabled&&this.pdfViewer.textSelectionModule.maintainSelectionOnScroll(s,!0),d.parentNode.removeChild(d)),-1!==(a=this.renderedPagesList.indexOf(s))&&this.renderedPagesList.splice(a,1);if(r)r.parentNode.removeChild(r),-1!==(a=this.renderedPagesList.indexOf(s))&&this.renderedPagesList.splice(a,1)}S()&&this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateCurrentPageNumber",this.currentPageNumber)},e.prototype.renderPageElement=function(e){var t=this.getElement("_pageDiv_"+e);null==this.getElement("_pageCanvas_"+e)&&null==t&&e<this.pageSize.length&&this.renderPageContainer(e,this.getPageWidth(e),this.getPageHeight(e),this.getPageTop(e))},e.prototype.renderPagesVirtually=function(){return Dc(this,void 0,void 0,(function(){var e,t=this;return Nc(this,(function(i){return e=this,setTimeout((function(){t.initiateRenderPagesVirtually(e)}),500),[2]}))}))},e.prototype.initiateRenderPagesVirtually=function(e){var t={hashId:e.hashId,isCompletePageSizeNotReceived:!0,action:"VirtualLoad",elementId:e.pdfViewer.element.id,uniqueId:e.documentId,password:e.passwordData};e.jsonDocumentId&&(t.documentId=e.jsonDocumentId),this.virtualLoadRequestHandler=new Dh(this.pdfViewer),this.virtualLoadRequestHandler.url=e.pdfViewer.serviceUrl+"/"+e.pdfViewer.serverActionSettings.load,this.virtualLoadRequestHandler.responseType="json",this.virtualLoadRequestHandler.mode=!0,this.virtualLoadRequestHandler.send(t),this.virtualLoadRequestHandler.onSuccess=function(t){var i=t.data;if(i&&"object"!==typeof i)try{i=JSON.parse(i)}catch(p){e.onControlError(500,i,"VirtualLoad")}if(i){for(;"object"!==typeof i;)i=JSON.parse(i);if(e.documentId===i.uniqueId){e.pdfViewer.fireAjaxRequestSuccess("VirtualLoad",i);var n=i;if(e.pageSize[e.pageLimit-1]){for(var o=e.pageSize[e.pageLimit-1].top,s=e.pageLimit;s<e.pageCount;s++)if("object"!==typeof n.pageSizes[parseInt(s.toString(),10)]){var a=n.pageSizes[parseInt(s.toString(),10)].split(",");if(null!==e.pageSize[s-1]&&0!==s){var r=e.pageSize[s-1].height;o=e.pageGap+parseFloat(r)+o}var l={width:parseFloat(a[0]),height:parseFloat(a[1]),top:o};e.pageSize.push(l)}else{if(null!==e.pageSize[s-1]&&0!==s){r=e.pageSize[s-1].height;o=e.pageGap+parseFloat(r)+o}l={width:parseFloat(n.pageSizes[parseInt(s.toString(),10)].Width),height:parseFloat(n.pageSizes[parseInt(s.toString(),10)].Height),top:o};e.pageSize.push(l)}e.pageContainer.style.height=e.getPageTop(e.pageSize.length-1)+e.getPageHeight(e.pageSize.length-1)+"px";var d=window.sessionStorage.getItem(e.documentId+"_pagedata");if(e.pageCount>100){e.pdfViewer.fireDocumentLoad(d);var h=e.pdfViewer.linkAnnotationModule;h&&h.linkAnnotation&&h.linkAnnotation.length>0&&h.linkPage.length>0&&h.renderDocumentLink(h.linkAnnotation,h.linkPage,h.annotationY,e.currentPageNumber-1)}}}}},this.virtualLoadRequestHandler.onFailure=function(t){e.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText)},this.virtualLoadRequestHandler.onError=function(t){e.openNotificationPopup(),e.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText)}},e.prototype.tileRenderPage=function(e,t){var i,n=this;if(i=this,e&&this.pageSize[parseInt(t.toString(),10)]){var o=this.getPageWidth(t),s=this.getPageHeight(t),a=this.getElement("_pageCanvas_"+t),r=this.getElement("_pageDiv_"+t),l=e.tileX?e.tileX:0,d=e.tileY?e.tileY:0;r&&(r.style.width=o+"px",r.style.height=s+"px",r.style.background="#fff",r.style.top=this.getPageTop(t)+"px",this.pdfViewer.enableRtl?r.style.right=this.updateLeftPosition(t)+"px":r.style.left=this.updateLeftPosition(t)+"px"),a&&(a.style.background="#fff");var h=e.image,p=this.retrieveCurrentZoomFactor();if(this.isReRenderRequired){e.zoomFactor&&(p=e.zoomFactor);var c=this.documentId+"_"+t+"_"+p+"_"+e.tileX+"_"+e.tileY;this.tilerequestLists.push(c);var u=e.transformationMatrix,f=e.width;if(h){var g=e.tileX?e.tileX:0,y=e.tileY?e.tileY:0,v=m(e.scaleFactor)?1.5:e.scaleFactor,w=document.getElementById(this.pdfViewer.element.id+"_tileimg_"+t+"_"+this.getZoomFactor()+"_"+g+"_"+y);w||((w=new Image).id=this.pdfViewer.element.id+"_tileimg_"+t+"_"+this.getZoomFactor()+"_"+g+"_"+y,r&&r.append(w)),w.src=h,w.setAttribute("alt",""),w.onload=function(){if(i.showPageLoadingIndicator(t,!1),i.tileRenderCount=i.tileRenderCount+1,0===g&&0===y&&0===t&&n.isDocumentLoaded){i.renderPDFInformations(),i.isInitialLoaded=!0;var e=window.sessionStorage.getItem(i.documentId+"_pagedata");i.pageCount<=100&&i.pdfViewer.fireDocumentLoad(e),i.isDocumentLoaded=!1,i.pdfViewer.textSearch&&i.pdfViewer.isExtractText&&i.pdfViewer.textSearchModule.getPDFDocumentTexts()}if(i.tileRenderCount===i.tileRequestCount){i.isTextMarkupAnnotationModule()&&i.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(t),a&&(a.style.display="none",a.src="#");for(var o=document.querySelectorAll('img[id*="'+i.pdfViewer.element.id+'_oldCanvas"]'),s=0;s<o.length;s++)r.removeChild(o[parseInt(s.toString(),10)]);i.isTileImageRendered=!1,i.tileRenderCount=0,i.pdfViewer.magnificationModule&&i.pdfViewer.magnificationModule.rerenderCountIncrement(),i.isDrawnCompletely=!0}w.setAttribute("alt","Page "+(t+1))};var b=f*this.getZoomFactor()/p/v,S=u.Elements?u.Elements:u.Values,C=S[5]*this.getZoomFactor()/p/v,x=S[4]*this.getZoomFactor()/p/v;w.width=b,w.style.width=b+"px",w.style.top=C+"px",w.style.left=x+"px",w.style.position="absolute"}0===l&&0===d&&this.onPageRender(e,t,r)}else{for(var M=document.querySelectorAll('img[id*="'+i.pdfViewer.element.id+"_tileimg_"+t+'_"]'),I=function(e){var o=M[parseInt(e.toString(),10)].id.split("_"),s=i.retrieveCurrentZoomFactor(),l=JSON.parse(i.getWindowSessionStorageTile(t,parseFloat(o[o.length-2]),parseFloat(o[o.length-1]),s));if(l&&l.zoomFactor&&(s=l.zoomFactor),parseFloat(o[o.length-4])===t){var d=M[parseInt(e.toString(),10)];d.nodeType==Node.ELEMENT_NODE&&(d.onload=function(){if(i.showPageLoadingIndicator(t,!1),i.tileRenderCount=i.tileRenderCount+1,0===A&&0===k&&0===t&&n.isDocumentLoaded){n.renderPDFInformations(),n.isInitialLoaded=!0;var e=window.sessionStorage.getItem(i.documentId+"_pagedata");i.pageCount<=100&&i.pdfViewer.fireDocumentLoad(e),i.isDocumentLoaded=!1,i.pdfViewer.textSearch&&i.pdfViewer.isExtractText&&i.pdfViewer.textSearchModule.getPDFDocumentTexts()}if(i.tileRenderCount===i.tileRequestCount){a.style.display="none",a.src="#",i.isTextMarkupAnnotationModule()&&i.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(t);for(var o=document.querySelectorAll('img[id*="'+i.pdfViewer.element.id+'_oldCanvas"]'),s=0;s<o.length;s++)r.removeChild(o[parseInt(s.toString(),10)]);i.isTileImageRendered=!1,i.tileRenderCount=0,i.pdfViewer.magnificationModule&&i.pdfViewer.magnificationModule.rerenderCountIncrement(),i.isDrawnCompletely=!0}d.setAttribute("alt","Page "+(t+1))},l&&(d.src=l.image))}},T=0;T<M.length;T++)I(T);var A=e.tileX?e.tileX:0,k=e.tileY?e.tileY:0;0===A&&0===k&&this.onPageRender(e,t,r)}}},e.prototype.renderTileCanvas=function(e,t,i,n,o,s){var a=this.getElement("_pageTileCanvas_"+i);return a||((a=we("canvas",{id:this.pdfViewer.element.id+"_pageTileCanvas_"+i,className:"e-pv-pageTile-canvas"})).style.width=e+"px",a.style.height=t+"px",a.style.display="none",a.style.backgroundColor="#fff",this.isMixedSizeDocument&&this.highestWidth>0&&(a.style.marginLeft="auto",a.style.marginRight="auto"),n.appendChild(a)),a},e.prototype.calculateImageWidth=function(e,t,i,n){var o=e/this.getZoomFactor()*t*i;return parseInt(n.toString())===parseInt(o.toString())&&(n=o),n=n*this.getZoomFactor()/t},e.prototype.renderPage=function(e,t,i){var n=this,o=this;if(e&&this.pageSize[parseInt(t.toString(),10)]){var s=this.getPageWidth(t),a=this.getPageHeight(t),r=this.getElement("_pageCanvas_"+t),l=this.getElement("_pageDiv_"+t);if(l&&(l.style.width=s+"px",l.style.height=a+"px",l.style.top=this.getPageTop(t)+"px",this.pdfViewer.enableRtl?l.style.right=this.updateLeftPosition(t)+"px":l.style.left=this.updateLeftPosition(t)+"px"),r){r.style.background="#fff",r.style.display="block",r.style.width=s+"px",r.style.height=a+"px",s<parseFloat(l.style.width)&&(l.style.boxShadow="none");var d=this.renderThumbnailImages?i:e.image;d&&(r.onload=function(){for(var e=document.querySelectorAll('img[id*="'+o.pdfViewer.element.id+"_tileimg_"+t+'_"]'),i=o.getElement("_pageDiv_"+t),s=0;s<e.length;s++){var a=e[parseInt(s.toString(),10)].id.split("_");parseFloat(a[a.length-3])!=o.getZoomFactor()&&i.removeChild(e[parseInt(s.toString(),10)])}var d=document.querySelectorAll('img[id*="'+o.pdfViewer.element.id+'_oldCanvas"]');for(s=0;s<d.length;s++)l.removeChild(d[parseInt(s.toString(),10)]);if(n.pdfViewer.magnificationModule&&n.pdfViewer.magnificationModule.rerenderCountIncrement(),n.showPageLoadingIndicator(t,!1),0===t&&n.isDocumentLoaded){n.renderPDFInformations(),n.isInitialLoaded=!0;var h=window.sessionStorage.getItem(n.documentId+"_pagedata");n.pageCount<=100&&n.pdfViewer.fireDocumentLoad(h),n.isDocumentLoaded=!1,n.pdfViewer.textSearch&&n.pdfViewer.isExtractText&&n.pdfViewer.textSearchModule.getPDFDocumentTexts()}n.pdfViewer.magnificationModule&&n.pdfViewer.magnificationModule.pushImageObjects(r),r.setAttribute("alt","Page "+(t+1))},r.src=d),this.onPageRender(e,t,l)}}},e.prototype.onPageRender=function(e,t,i){var n=i&&i.getElementsByTagName("a"),o=!1;if(n&&0!==n.length)for(var s=n.length-1;s>=0;s--)n[parseInt(s.toString(),10)].parentNode.removeChild(n[parseInt(s.toString(),10)]);if((this.pdfViewer.textSearchModule||this.pdfViewer.textSelectionModule||this.pdfViewer.annotationModule)&&this.renderTextContent(e,t),this.pdfViewer.formFieldsModule&&!this.pdfViewer.magnificationModule.isFormFieldPageZoomed&&this.pdfViewer.formFieldsModule.renderFormFields(t,!1),this.pdfViewer.formDesignerModule&&!this.isDocumentLoaded&&this.pdfViewer.formDesignerModule.rerenderFormFields(t),!this.pdfViewer.formFieldsModule||this.isDocumentLoaded||this.pdfViewer.formDesignerModule||this.pdfViewer.formFieldsModule.renderFormFields(t,!1),this.pdfViewer.formDesignerModule&&this.isDocumentLoaded&&this.pdfViewer.magnificationModule.isFormFieldPageZoomed&&(this.pdfViewer.formFieldsModule.renderFormFields(t,!1),this.pdfViewer.magnificationModule.isFormFieldPageZoomed=!1),this.pdfViewer.enableHyperlink&&this.pdfViewer.linkAnnotationModule&&this.pdfViewer.linkAnnotationModule.renderHyperlinkContent(e,t),this.pdfViewer.textSelectionModule&&!this.isTextSelectionDisabled&&this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(t),this.documentAnnotationCollections){for(var a=!1,r=0;r<this.annotationRenderredList.length;r++)this.annotationRenderredList[parseInt(r.toString(),10)]===t&&(a=!0);var l;(l=this.documentAnnotationCollections[t])&&!a&&(e.shapeAnnotation=l.shapeAnnotation,e.measureShapeAnnotation=l.measureShapeAnnotation,e.textMarkupAnnotation=l.textMarkupAnnotation,e.freeTextAnnotation=l.freeTextAnnotation,e.stampAnnotations=l.stampAnnotations,e.stickyNotesAnnotation=l.stickyNotesAnnotation,e.signatureInkAnnotation=l.signatureInkAnnotation,this.annotationRenderredList.push(t))}this.isImportAction&&((l=this.checkDocumentCollectionData(t))&&(e.shapeAnnotation=l.shapeAnnotation,e.measureShapeAnnotation=l.measureShapeAnnotation,e.textMarkupAnnotation=l.textMarkupAnnotation,e.freeTextAnnotation=l.freeTextAnnotation,e.stampAnnotations=l.stampAnnotations,e.stickyNotesAnnotation=l.stickyNotesAnnotation,e.signatureInkAnnotation=l.signatureInkAnnotation,o=!0));if(this.pdfViewer.annotationModule&&(this.isTextMarkupAnnotationModule()||this.isShapeBasedAnnotationsEnabled())){if(this.isStampAnnotationModule()){var d=e.stampAnnotations;o?this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(d,t,null,!0):this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(d,t)}o?this.pdfViewer.annotationModule.renderAnnotations(t,e.shapeAnnotation,e.measureShapeAnnotation,e.textMarkupAnnotation,null,!0):this.pdfViewer.annotationModule.renderAnnotations(t,e.shapeAnnotation,e.measureShapeAnnotation,e.textMarkupAnnotation),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(e.stickyNotesAnnotation,t)}if(this.pdfViewer.formDesignerModule&&!this.pdfViewer.annotationModule&&this.pdfViewer.formDesignerModule.updateCanvas(t),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.isTextSearch&&this.pdfViewer.textSearchModule.highlightOtherOccurrences(t),this.isShapeBasedAnnotationsEnabled()){var h=this.getElement("_annotationCanvas_"+t);if(h)Wp(h.getBoundingClientRect(),"position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;z-index:1000",h,t,this.pdfViewer),this.pdfViewer.renderSelector(t,this.pdfViewer.annotationSelectorSettings)}this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.selectCommentsAnnotation(t),this.isFreeTextAnnotationModule()&&e.freeTextAnnotation&&this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(e.freeTextAnnotation,t),this.isInkAnnotationModule()&&e&&e.signatureInkAnnotation&&this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(e.signatureInkAnnotation,t,o),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.isAnnotationSelected&&this.pdfViewer.annotationModule.annotationPageIndex===t&&this.pdfViewer.annotationModule.selectAnnotationFromCodeBehind(),this.isLoadedFormFieldAdded=!1},e.prototype.renderAnnotations=function(e,t){var i={};if(this.documentAnnotationCollections){for(var n=!1,o=0;o<this.annotationRenderredList.length;o++)this.annotationRenderredList[parseInt(o.toString(),10)]===e&&(n=!0);var s=this.documentAnnotationCollections[e];s&&!n&&(i.shapeAnnotation=s.shapeAnnotation,i.measureShapeAnnotation=s.measureShapeAnnotation,i.textMarkupAnnotation=s.textMarkupAnnotation,i.freeTextAnnotation=s.freeTextAnnotation,i.stampAnnotations=s.stampAnnotations,i.stickyNotesAnnotation=s.stickyNotesAnnotation,i.signatureAnnotation=s.signatureAnnotation,i.signatureInkAnnotation=s.signatureInkAnnotation,this.annotationRenderredList.push(e))}if(this.isAnnotationCollectionRemoved&&(i.shapeAnnotation=[],i.measureShapeAnnotation=[],i.textMarkupAnnotation=[],i.freeTextAnnotation=[],i.stampAnnotations=[],i.stickyNotesAnnotation=[],i.signatureInkAnnotation=[]),this.isTextMarkupAnnotationModule()||this.isShapeBasedAnnotationsEnabled()){if(this.isStampAnnotationModule()){var a=i.stampAnnotations;this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(a,e)}this.pdfViewer.annotationModule.renderAnnotations(e,i.shapeAnnotation,i.measureShapeAnnotation,i.textMarkupAnnotation),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(i.stickyNotesAnnotation,e)}if(this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.isTextSearch&&this.pdfViewer.textSearchModule.highlightOtherOccurrences(e),this.isImportAction){for(n=!1,o=0;o<this.annotationPageList.length;o++)this.annotationPageList[parseInt(o.toString(),10)]===e&&(n=!0);n||this.importedAnnotation&&(this.drawPageAnnotations(this.importedAnnotation,e,!0),this.annotationPageList[this.annotationPageList.length]=e)}if(this.isShapeBasedAnnotationsEnabled()){var r=this.getElement("_annotationCanvas_"+e);if(r)Wp(r.getBoundingClientRect(),"position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;z-index:1000",r,e,this.pdfViewer),this.pdfViewer.renderSelector(e)}this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.selectCommentsAnnotation(e),this.isFreeTextAnnotationModule()&&i.freeTextAnnotation&&this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(i.freeTextAnnotation,e,void 0),i&&i.signatureAnnotation&&this.signatureModule.renderExistingSignature(i.signatureAnnotation,e,!1),this.isInkAnnotationModule()&&i&&i.signatureInkAnnotation&&this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(i.signatureInkAnnotation,e,!1),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.isAnnotationSelected&&this.pdfViewer.annotationModule.selectAnnotationFromCodeBehind()},e.prototype.renderTextContent=function(e,t){var i=e.textContent,n=e.textBounds,o=e.rotation,s=e.documentTextCollection?this.checkIsRtlText(e.documentTextCollection[0][t].PageText):this.checkIsRtlText(e.pageText),a=this.getElement("_textLayer_"+t);a||(a=this.textLayer.addTextLayer(t,this.getPageWidth(t),this.getPageHeight(t),this.getElement("_pageDiv_"+t))),a&&i&&n&&(a.style.display="block",0===a.childNodes.length?this.textLayer.renderTextContents(t,i,n,o,s):this.textLayer.resizeTextContents(t,i,n,o,!0))},e.prototype.renderPageContainer=function(e,t,i,n){var o=we("div",{id:this.pdfViewer.element.id+"_pageDiv_"+e,className:"e-pv-page-div",attrs:{tabindex:"-1"}});o.style.width=t+"px",o.style.height=i+"px",this.pdfViewer.enableRtl?o.style.right=this.updateLeftPosition(e)+"px":o.style.left=this.updateLeftPosition(e)+"px",o.style.top=n+"px",this.pageContainer.appendChild(o),this.pageContainer.style.width=this.viewerContainer.clientWidth+"px",this.createWaitingPopup(e),this.orderPageDivElements(o,e),this.renderPageCanvas(o,t,i,e,"block"),!ge.isDevice||this.pdfViewer.enableDesktopMode||this.isThumb||this.updateMobileScrollerPosition()},e.prototype.renderPDFInformations=function(){!this.pdfViewer.thumbnailViewModule||ge.isDevice&&!this.pdfViewer.enableDesktopMode||this.pdfViewer.thumbnailViewModule.createRequestForThumbnails(),this.pdfViewer.bookmarkViewModule&&this.pdfViewer.bookmarkViewModule.createRequestForBookmarks(),this.pdfViewer.annotationModule&&(this.pdfViewer.toolbarModule&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.initializeAcccordionContainer(),this.pdfViewer.isCommandPanelOpen&&this.pdfViewer.annotation.showCommentsPanel(),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.createRequestForComments())},e.prototype.orderPageDivElements=function(e,t){var i=this.getElement("_pageDiv_"+(t+1));i?this.pageContainer.insertBefore(e,i):this.pageContainer.appendChild(e)},e.prototype.renderPageCanvas=function(e,t,i,n,o){if(e){var s=this.getElement("_pageCanvas_"+n);return s?(s.width=t,s.height=i,s.style.display="block",this.isMixedSizeDocument&&this.highestWidth>0&&(s.style.marginLeft="auto",s.style.marginRight="auto")):((s=we("img",{id:this.pdfViewer.element.id+"_pageCanvas_"+n,className:"e-pv-page-canvas"})).width=t,s.height=i,s.style.display=o,this.isMixedSizeDocument&&this.highestWidth>0&&(s.style.marginLeft="auto",s.style.marginRight="auto"),e.appendChild(s)),s.setAttribute("alt",""),this.pdfViewer.annotationModule&&this.pdfViewer.annotation&&this.pdfViewer.annotationModule.createAnnotationLayer(e,t,i,n,o),(this.pdfViewer.textSearchModule||this.pdfViewer.textSelectionModule||this.pdfViewer.annotationModule)&&this.textLayer.addTextLayer(n,t,i,e),this.pdfViewer.formDesignerModule&&!this.pdfViewer.annotationModule&&this.pdfViewer.formDesignerModule.createAnnotationLayer(e,t,i,n,o),s}},e.prototype.applyElementStyles=function(e,t){if(this.isMixedSizeDocument&&e){var i=document.getElementById(this.pdfViewer.element.id+"_pageCanvas_"+t),n=document.getElementById(this.pdfViewer.element.id+"_oldCanvas_"+t);e&&i&&i.offsetLeft>0?(e.style.marginLeft=i.offsetLeft+"px",e.style.marginRight=i.offsetLeft+"px"):n&&n.offsetLeft>0?(e.style.marginLeft=n.offsetLeft+"px",e.style.marginRight=n.offsetLeft+"px"):(e.style.marginLeft="auto",e.style.marginRight="auto")}},e.prototype.updateLeftPosition=function(e){var t,i=this.viewerContainer.getBoundingClientRect().width;if(0===i&&(i=parseFloat(this.pdfViewer.width.toString())),this.isMixedSizeDocument&&this.highestWidth>0){t=this.viewerContainer.clientWidth>0?(this.viewerContainer.clientWidth-this.highestWidth*this.getZoomFactor())/2:(i-this.highestWidth*this.getZoomFactor())/2;var n=(this.highestWidth*this.getZoomFactor()-this.getPageWidth(e))/2;t>0?t+=n:t=n}else t=this.viewerContainer.clientWidth>0?(this.viewerContainer.clientWidth-this.getPageWidth(e))/2:(i-this.getPageWidth(e))/2;if(this.pageSize[parseInt(e.toString(),10)].width>this.pageSize[parseInt(e.toString(),10)].height&&!0,t<0||this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isAutoZoom&&this.getZoomFactor()<1||"fitToWidth"===this.pdfViewer.magnificationModule.fitType)){var o=t;(t=t>0&&ge.isDevice&&!this.pdfViewer.enableDesktopMode?o:this.pageLeft)>0&&this.isMixedSizeDocument&&o>0&&(t=o)}return t},e.prototype.applyLeftPosition=function(e){var t;if(this.pageSize[parseInt(e.toString(),10)]){if(this.isMixedSizeDocument&&this.highestWidth>0){t=this.viewerContainer.clientWidth>0?(this.viewerContainer.clientWidth-this.highestWidth*this.getZoomFactor())/2:(this.viewerContainer.getBoundingClientRect().width-this.highestWidth*this.getZoomFactor())/2;var i=(this.highestWidth*this.getZoomFactor()-this.getPageWidth(e))/2;t>0?t+=i:t=i}else t=this.viewerContainer.clientWidth>0?(this.viewerContainer.clientWidth-this.pageSize[parseInt(e.toString(),10)].width*this.getZoomFactor())/2:(this.viewerContainer.getBoundingClientRect().width-this.pageSize[parseInt(e.toString(),10)].width*this.getZoomFactor())/2;if(this.pageSize[parseInt(e.toString(),10)].width>this.pageSize[parseInt(e.toString(),10)].height&&!0,t<0||this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isAutoZoom&&this.getZoomFactor()<1||"fitToWidth"===this.pdfViewer.magnificationModule.fitType)){var n=t;t=this.pageLeft,n>0&&this.isMixedSizeDocument&&(t=n)}var o=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+e);o&&(this.pdfViewer.enableRtl?o.style.right=t+"px":o.style.left=t+"px")}},e.prototype.updatePageHeight=function(e,t){return(e-t)/e*100+"%"},e.prototype.getPageNumberFromClientPoint=function(e){for(var t=e.x+this.viewerContainer.scrollLeft,i=e.y+this.viewerContainer.scrollTop,n=0;n<this.pageCount;n++){var o=this.pageSize[parseInt(n.toString(),10)].height+this.viewerContainer.scrollTop;if(i<this.pageSize[parseInt(n.toString(),10)].top+o){var s=this.getElement("_pageViewContainer").getBoundingClientRect(),a=(s.width-this.pageSize[parseInt(n.toString(),10)].width)/2+s.x,r=0;if((r=i>this.pageSize[parseInt(n.toString(),10)].top?i-this.pageSize[parseInt(n.toString(),10)].top:this.pageSize[parseInt(n.toString(),10)].top-i)>0&&null!=this.pageSize[parseInt(n.toString(),10)]){this.getPageHeight(n);if(a>=0&&(t<a||t>a+this.pageSize[parseInt(n.toString(),10)].width))return-1;if(r<=this.getPageTop(n)+o)return n+1}}}return-1},e.prototype.convertClientPointToPagePoint=function(e,t){if(-1!==t){var i=this.getElement("_pageViewContainer").getBoundingClientRect(),n=(i.width-this.pageSize[t-1].width)/2+i.x;return{x:e.x+this.viewerContainer.scrollLeft-n,y:e.y+this.viewerContainer.scrollTop-this.pageSize[t-1].top}}return null},e.prototype.convertPagePointToClientPoint=function(e,t){if(-1!==t){var i=this.getElement("_pageViewContainer").getBoundingClientRect(),n=(i.width-this.pageSize[t-1].width)/2+i.x;return{x:e.x+n,y:e.y+this.pageSize[t-1].top}}return null},e.prototype.convertPagePointToScrollingPoint=function(e,t){return-1!==t?{x:e.x+this.viewerContainer.scrollLeft,y:e.y+this.viewerContainer.scrollTop}:null},e.prototype.initiatePageViewScrollChanged=function(){this.scrollHoldTimer&&clearTimeout(this.scrollHoldTimer),this.scrollHoldTimer=null,this.scrollPosition*this.getZoomFactor()!==this.viewerContainer.scrollTop&&(this.scrollPosition=this.viewerContainer.scrollTop,this.pageViewScrollChanged(this.currentPageNumber))},e.prototype.renderCountIncrement=function(){this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.renderCountIncrement()},e.prototype.pageViewScrollChanged=function(e){this.isPanMode?-1===this.renderedPagesList.indexOf(e-1)&&(this.reRenderedCount=0):this.reRenderedCount=0;var t=e-1;if(e!==this.previousPage&&e<=this.pageCount){var i=!1;this.isDataExits&&!this.getStoredData(t)&&(i=!0),-1!==this.renderedPagesList.indexOf(t)||this.getMagnified()||i||(this.renderCountIncrement(),this.createRequestForRender(t))}if(!this.getMagnified()&&!this.getPagesPinchZoomed()){var n=t-1,o=(i=!1,this.getElement("_pageCanvas_"+n));this.isDataExits&&!this.getStoredData(n)&&(i=!0),null===o||i||-1!==this.renderedPagesList.indexOf(n)||this.getMagnified()||(this.renderCountIncrement(),this.createRequestForRender(n)),this.isMinimumZoom&&this.renderPreviousPagesInScroll(n);var s=t+1,a=0;if(s<this.pageCount)if(a=this.getPageHeight(s),(this.isMinimumZoom?this.isMinimumZoom:-1===this.renderedPagesList.indexOf(s))&&!this.getMagnified()&&a)for(this.createRequestForRender(s),this.renderCountIncrement();this.viewerContainer.clientHeight>a&&(s+=1)<this.pageCount;)this.renderPageElement(s),this.createRequestForRender(s),a+=this.getPageHeight(s),this.renderCountIncrement()}},e.prototype.renderPreviousPagesInScroll=function(e){var t=e-1,i=t-1;t>0&&(-1!==this.renderedPagesList.indexOf(t)||this.getMagnified()||(this.createRequestForRender(t),this.renderCountIncrement()),i>0&&(-1!==this.renderedPagesList.indexOf(i)||this.getMagnified()||(this.createRequestForRender(i),this.renderCountIncrement())))},e.prototype.downloadDocument=function(e){e=(URL||webkitURL).createObjectURL(e);var t=we("a");if(t.click)t.href=e,t.target="_parent","download"in t&&(t.download=this.downloadFileName),(document.body||document.documentElement).appendChild(t),t.click(),t.parentNode.removeChild(t);else{if(window.top===window&&e.split("#")[0]===window.location.href.split("#")[0]){var i=-1===e.indexOf("?")?"?":"&";e=e.replace(/#|$/,i+"$&")}window.open(e,"_parent")}},e.prototype.downloadExportFormat=function(e,t,i,n){var o="Json"===t||"Json"===i,s=o?".json":"Fdf"===i?".fdf":"Xml"===i?".xml":"Xfdf"===t||"Xfdf"===i?".xfdf":null;if(!m(s)){e=(URL||webkitURL).createObjectURL(e);var a=we("a");if(a.click)a.href=e,a.target="_parent","download"in a&&(null!==this.pdfViewer.exportAnnotationFileName?a.download=this.pdfViewer.exportAnnotationFileName.split(".")[0]+s:a.download=this.pdfViewer.fileName.split(".")[0]+s),(document.body||document.documentElement).appendChild(a),a.click(),a.parentNode.removeChild(a),n?this.pdfViewer.fireFormExportSuccess(e,a.download):this.pdfViewer.fireExportSuccess(e,a.download);else if(o){if(window.top===window&&e.split("#")[0]===window.location.href.split("#")[0]){var r=-1===e.indexOf("?")?"?":"&";e=e.replace(/#|$/,r+"$&")}window.open(e,"_parent"),n?this.pdfViewer.fireFormExportSuccess(e,this.pdfViewer.fileName.split(".")[0]+s):this.pdfViewer.fireExportSuccess(e,this.pdfViewer.fileName.split(".")[0]+s)}}},e.prototype.exportFormFields=function(e,t){this.createRequestForExportFormfields(!1,t,e)},e.prototype.importFormFields=function(e,t){this.createRequestForImportingFormfields(e,t)},e.prototype.createRequestForExportFormfields=function(e,t,i){var n,o=this;n=this;var s=new Promise((function(s,a){var r=n.createFormfieldsJsonData();"Json"!==t&&"Fdf"!==t&&"Xfdf"!==t&&"Xml"!==t||(r.formFieldDataFormat=t,n.pdfViewer.fireFormExportStarted(r)),r.action="ExportFormFields",r.hashId=n.hashId,r.fileName=n.pdfViewer.fileName,i&&""!==i&&!e&&(r.filePath=i),r.elementId=o.pdfViewer.element.id,n.jsonDocumentId&&(r.document=n.jsonDocumentId);var l=o.getFormFieldsPageList(r.formDesigner);r.formFieldsPageList=JSON.stringify(l),r.isFormFieldAnnotationsExist=o.isAnnotationsExist(r.formDesigner)||o.isFieldsDataExist(r.fieldsData)||l.length>0;var d=n.pdfViewer.serviceUrl+"/"+n.pdfViewer.serverActionSettings.exportFormFields;n.exportFormFieldsRequestHandler=new Dh(o.pdfViewer),n.exportFormFieldsRequestHandler.url=d,n.exportFormFieldsRequestHandler.mode=!0,n.exportFormFieldsRequestHandler.responseType="text",n.exportFormFieldsRequestHandler.send(r),n.exportFormFieldsRequestHandler.onSuccess=function(i){var o=i.data;if(o&&o)if(n.pdfViewer.fireAjaxRequestSuccess(n.pdfViewer.serverActionSettings.exportFormFields,o),e){var a=decodeURIComponent(escape(atob(o.split(",")[1])));s(a),n.pdfViewer.fireFormExportSuccess(a,n.pdfViewer.fileName)}else if(o.split("base64,")[1]){var l=n.createBlobUrl(o.split("base64,")[1],"application/json");ge.isIE||"edge"===ge.info.name?window.navigator.msSaveOrOpenBlob(l,n.pdfViewer.fileName.split(".")[0]+".json"):"Json"!==r.formFieldDataFormat&&"Fdf"!==r.formFieldDataFormat&&"Xfdf"!==r.formFieldDataFormat&&"Xml"!==r.formFieldDataFormat||n.downloadExportFormat(l,null,t,!0)}},n.exportFormFieldsRequestHandler.onFailure=function(e){n.pdfViewer.fireFormExportFailed(r.pdfAnnotation,e.statusText)},n.exportFormFieldsRequestHandler.onError=function(e){n.pdfViewer.fireFormExportFailed(r.pdfAnnotation,e.statusText)}}));return!e||s},e.prototype.getLastIndexValue=function(e,t){return e.slice(e.lastIndexOf(t)+1)},e.prototype.createRequestForImportingFormfields=function(e,t){var i;i=this;var n={},o=this.getLastIndexValue(e,".");"object"===typeof e||"json"!==o&&"fdf"!==o&&"xfdf"!==o&&"xml"!==o?(n.formFieldDataFormat=t,n.data="Json"===t?JSON.stringify(e):e):(n.data=e,n.fileName=i.pdfViewer.fileName,n.formFieldDataFormat=t),i.pdfViewer.fireFormImportStarted(e),n.action="ImportFormFields",n.hashId=i.hashId,n.elementId=this.pdfViewer.element.id,i.jsonDocumentId&&(n.document=i.jsonDocumentId);var s=i.pdfViewer.serviceUrl+"/"+i.pdfViewer.serverActionSettings.importFormFields;i.importFormFieldsRequestHandler=new Dh(this.pdfViewer),i.importFormFieldsRequestHandler.url=s,i.importFormFieldsRequestHandler.mode=!0,i.importFormFieldsRequestHandler.responseType="text",i.importFormFieldsRequestHandler.send(n),i.importFormFieldsRequestHandler.onSuccess=function(t){var n=t.data;if(n&&"null"!==n){if("object"!==typeof n)try{"object"!==typeof(n=JSON.parse(n))&&(i.onControlError(500,n,i.pdfViewer.serverActionSettings.importFormFields),i.pdfViewer.fireFormImportFailed(e,t.statusText),n=null)}catch(s){if(i.pdfViewer.fireFormImportFailed(e,i.pdfViewer.localeObj.getConstant("File not found")),S())this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_FileNotFound").then((function(e){i.openImportExportNotificationPopup(e)}));else i.openImportExportNotificationPopup(i.pdfViewer.localeObj.getConstant("File not found"));i.onControlError(500,n,i.pdfViewer.serverActionSettings.importFormFields),n=null}i.pdfViewer.fireAjaxRequestSuccess(i.pdfViewer.serverActionSettings.importFormFields,n),i.pdfViewer.fireFormImportSuccess(e),window.sessionStorage.removeItem(this.documentId+"_formfields"),this.pdfViewer.formFieldsModule.removeExistingFormFields(),window.sessionStorage.removeItem(this.documentId+"_formDesigner"),i.saveFormfieldsData(n);for(var o=0;o<i.renderedPagesList.length;o++)this.pdfViewer.formFieldsModule.renderFormFields(i.renderedPagesList[parseInt(o.toString(),10)],!0)}else{if(i.pdfViewer.fireFormImportFailed(e,t.statusText),S())this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_FileNotFound").then((function(e){i.openImportExportNotificationPopup(e)}));else i.openImportExportNotificationPopup(i.pdfViewer.localeObj.getConstant("File not found"))}},i.importFormFieldsRequestHandler.onFailure=function(t){i.pdfViewer.fireFormImportFailed(e,t.statusText)},i.importFormFieldsRequestHandler.onError=function(t){i.pdfViewer.fireFormImportFailed(e,t.statusText)}},e.prototype.createFormfieldsJsonData=function(){var e={};if(this.pdfViewer.formDesignerModule){var t=this.pdfViewer.formDesignerModule.downloadFormDesigner();e.formDesigner=t}else if(this.pdfViewer.formFieldsModule){t=this.pdfViewer.formFieldsModule.downloadFormFieldsData();e.fieldsData=t}return e},e.prototype.constructJsonDownload=function(){var e={hashId:this.hashId};if(this.jsonDocumentId&&(e.documentId=this.jsonDocumentId),e.uniqueId=this.documentId,this.importPageList=[],this.pdfViewer.annotationModule&&this.saveImportedAnnotations(),this.isTextMarkupAnnotationModule()){this.isJsonExported=!1;var t=this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveTextMarkupAnnotations();e.textMarkupAnnotations=t}if(this.isShapeAnnotationModule()){this.isJsonExported=!1;var i=this.pdfViewer.annotationModule.shapeAnnotationModule.saveShapeAnnotations();e.shapeAnnotations=i}if(this.isCalibrateAnnotationModule()){this.isJsonExported=!1;var n=this.pdfViewer.annotationModule.measureAnnotationModule.saveMeasureShapeAnnotations();e.measureShapeAnnotations=n}if(this.isStampAnnotationModule()){var o=this.pdfViewer.annotationModule.stampAnnotationModule.saveStampAnnotations();e.stampAnnotations=o}if(this.isCommentAnnotationModule()){var s=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveStickyAnnotations();e.stickyNotesAnnotation=s}if(this.isImportAction){var a=JSON.stringify(this.importPageList);e.importPageList=a}if(this.pdfViewer.formDesignerModule){var r=this.pdfViewer.formDesignerModule.downloadFormDesigner();e.formDesigner=r}else if(this.pdfViewer.formFieldsModule){r=this.pdfViewer.formFieldsModule.downloadFormFieldsData();e.fieldsData=r}var l=this.signatureModule.saveSignature();if(e.signatureData=l,this.pdfViewer.isSignatureEditable&&(e.isSignatureEdited=this.pdfViewer.isSignatureEditable),this.isFreeTextAnnotationModule()){var d=this.pdfViewer.annotationModule.freeTextAnnotationModule.saveFreeTextAnnotations();e.freeTextAnnotation=d}if(this.isInkAnnotationModule()){var h=this.pdfViewer.annotationModule.inkAnnotationModule.saveInkSignature();e.inkSignatureData=h}if(e.action="Download",e.elementId=this.pdfViewer.element.id,this.pdfViewer.annotationModule){var p=this.getAnnotationsPageList();e.isAnnotationsExist=this.isAnnotationsExist(e.textMarkupAnnotations)||this.isAnnotationsExist(e.shapeAnnotations)||this.isAnnotationsExist(e.measureShapeAnnotations)||this.isAnnotationsExist(e.stampAnnotations)||this.isAnnotationsExist(e.stickyNotesAnnotation)||this.isAnnotationsExist(e.signatureData)||this.isAnnotationsExist(e.freeTextAnnotation)||this.isAnnotationsExist(e.inkSignatureData)||p.length>0,e.annotationsPageList=JSON.stringify(p)}if(this.pdfViewer.formDesignerModule||this.pdfViewer.formFieldsModule){var c=this.getFormFieldsPageList(e.formDesigner);e.isFormFieldAnnotationsExist=this.isAnnotationsExist(e.formDesigner)||this.isFieldsDataExist(e.fieldsData)||c.length>0,e.formFieldsPageList=JSON.stringify(c)}return this.pdfViewer.annotationCollection&&(e.annotationCollection=JSON.stringify(this.pdfViewer.annotationCollection)),e},e.prototype.isAnnotationsExist=function(e){return!m(e)&&JSON.parse(e).flat(1).length>0},e.prototype.isFieldsDataExist=function(e){return!m(e)&&0!==Object.entries(JSON.parse(e)).length},e.prototype.getAnnotationsPageList=function(){var e=this.pdfViewer.annotationCollection.map((function(e){return e.pageNumber})),t=this.pdfViewer.annotationModule.actionCollection.filter((function(e,t,i){return"formFields"!==e.annotation.propName&&void 0==e.annotation.formFieldAnnotationType})).map((function(e){return e.pageIndex}));return e.concat(t).filter((function(e,t,i){return i.indexOf(e)===t&&void 0!==e}))},e.prototype.getFormFieldsPageList=function(e){var t,i=this.pdfViewer.formFieldCollection.map((function(e){return m(e.properties)?e.pageNumber+1:e.properties.pageNumber})),n=m(this.pdfViewer.annotationModule)?[]:this.pdfViewer.annotationModule.actionCollection.filter((function(e,t,i){return"formFields"==e.annotation.propName||void 0!=e.annotation.formFieldAnnotationType})).map((function(e){return e.pageIndex})),o=i.concat(n);return m(e)||(t=JSON.parse(e).map((function(e){return e.FormField.pageNumber}))),o.concat(t).filter((function(e,t,i){return i.indexOf(e)===t&&void 0!==e}))},e.prototype.checkFormFieldCollection=function(e){var t,i=!1;if(t=this.getItemFromSessionStorage("_formDesigner"))for(var n=JSON.parse(t),o=0;o<n.length;o++)if("RadioButton"===n[parseInt(o.toString(),10)].FormField.formFieldAnnotationType){for(var s=0;s<n[parseInt(o.toString(),10)].FormField.radiobuttonItem.length;s++)if(e===n[parseInt(o.toString(),10)].FormField.radiobuttonItem[parseInt(s.toString(),10)].id.split("_")[0]){i=!0;break}}else if(n[parseInt(o.toString(),10)].Key.split("_")[0]===e){i=!0;break}return i},e.prototype.isFreeTextAnnotationModule=function(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.freeTextAnnotationModule)},e.prototype.createRequestForDownload=function(){var e;(e=this).pdfViewer.fireDownloadStart(e.downloadFileName);var t=this.constructJsonDownload();e.digitalSignaturePages&&0!==e.digitalSignaturePages.length&&(e.pdfViewer.isDocumentEdited?t.digitalSignatureDocumentEdited=!0:t.digitalSignatureDocumentEdited=!1),this.dowonloadRequestHandler=new Dh(this.pdfViewer),this.dowonloadRequestHandler.url=e.pdfViewer.serviceUrl+"/"+e.pdfViewer.serverActionSettings.download,this.dowonloadRequestHandler.responseType="text",this.validateForm&&this.pdfViewer.enableFormFieldsValidation?(this.pdfViewer.fireValidatedFailed(e.pdfViewer.serverActionSettings.download),this.validateForm=!1):this.dowonloadRequestHandler.send(t),this.dowonloadRequestHandler.onSuccess=function(t){var i=t.data;if(i){if("object"!==typeof i&&-1===i.indexOf("data:application/pdf")&&(e.onControlError(500,i,e.pdfViewer.serverActionSettings.download),i=null),"object"===typeof i&&(i=JSON.parse(i)),i){e.pdfViewer.downloadFileName&&e.pdfViewer.downloadFileName!==e.downloadFileName&&(e.downloadFileName=e.pdfViewer.downloadFileName),e.pdfViewer.fireAjaxRequestSuccess(e.pdfViewer.serverActionSettings.download,i);var n=e.createBlobUrl(i.split("base64,")[1],"application/pdf");ge.isIE||"edge"===ge.info.name?window.navigator.msSaveOrOpenBlob(n,e.downloadFileName):e.downloadDocument(n),e.pdfViewer.fireDownloadEnd(e.downloadFileName,i)}e.updateDocumentAnnotationCollections()}else e.pdfViewer.fireDownloadEnd(e.downloadFileName,"PDF Document saved in server side successfully")},this.dowonloadRequestHandler.onFailure=function(t){e.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText,e.pdfViewer.serverActionSettings.download)},this.dowonloadRequestHandler.onError=function(t){e.openNotificationPopup(),e.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText,e.pdfViewer.serverActionSettings.download)}},e.prototype.getTileCount=function(e){if(e&&"number"===typeof e){var t=1;t=this.getZoomFactor()>2&&e<=1200?2:e/816;var i=parseInt(t.toFixed());return i<=0?1:this.pdfViewer.tileRenderingSettings.enableTileRendering?i:1}return 1},e.prototype.createRequestForRender=function(e){var t,i=(t=this).getElement("_pageCanvas_"+e),n=t.getElement("_oldCanvas_"+e);if(this.pageSize&&this.pageSize[parseInt(e.toString(),10)]){var o=this.pageSize[parseInt(e.toString(),10)].width,s=(this.pageSize[parseInt(e.toString(),10)].height,this.getElement("_pageCanvas_"+e),1200),a=t.pdfViewer.element.clientHeight>0?t.pdfViewer.element.clientHeight:t.pdfViewer.element.style.height;s=parseInt(s),a=parseInt(a)?parseInt(a):500;var r=void 0,l=void 0,d=void 0,h=new Object;this.isMinimumZoom&&document.getElementById(this.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+e)?(this.renderThumbnailImages=!0,d=document.getElementById(this.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+e).children[0].src):this.renderThumbnailImages=!1;var p=this.getTileCount(o);if(i){isNaN(parseFloat(i.style.width))&&!n||t.isInitialLoaded&&t.showPageLoadingIndicator(e,!1);var c=t.getStoredData(e);r=l=p;var u=t.pdfViewer.tileRenderingSettings;u.enableTileRendering&&u.x>0&&u.y>0&&(s<o||this.getZoomFactor()>2)&&(r=u.x,l=u.y),t.tileRequestCount=r*l;var f=this.retrieveCurrentZoomFactor(),m=void 0;if(1===p)c=t.getStoredData(e),m=t.pageRequestSent(e,0,0);else{var g=JSON.parse(t.getWindowSessionStorageTile(e,0,0,f));g&&(c=g)}if(c&&c.uniqueId===t.documentId&&(c.image||this.isMinimumZoom)){if(i.style.backgroundColor="#fff",t.pdfViewer.magnification&&t.pdfViewer.magnification.isPinchZoomed||!this.pageSize[parseInt(e.toString(),10)])return;var y=this.retrieveCurrentZoomFactor();if(s=y>2&&o<=1200?700:1200,t.pdfViewer.tileRenderingSettings.enableTileRendering||(s=1200),s>=o||!t.pdfViewer.tileRenderingSettings.enableTileRendering)this.renderThumbnailImages?t.renderPage(c,e,d):t.renderPage(c,e);else if(t.isTileImageRendered=!0,t.tileRenderCount=0,this.renderThumbnailImages)t.renderPage(c,e,d);else{t.tileRenderPage(c,e);for(var v=0;v<r;v++)for(var w=0;w<l;w++)0===v&&0===w||(c=JSON.parse(this.getWindowSessionStorageTile(e,v,w,y)))&&t.tileRenderPage(c,e)}c=null}else if(null===c||!m){if(this.renderThumbnailImages||(this.getPagesPinchZoomed()?t.showPageLoadingIndicator(e,!1):t.showPageLoadingIndicator(e,!0),t.getPagesZoomed()&&t.isInitialLoaded&&t.showPageLoadingIndicator(e,!1)),t.pdfViewer.magnification&&t.pdfViewer.magnification.isPinchZoomed)return;t.pdfViewer.tileRenderingSettings.enableTileRendering&&!this.renderThumbnailImages||(r=1,l=1),t.tileRenderCount=0,t.isTileImageRendered=!0;for(var b=0;b<r;b++)for(var S=0;S<l;S++){var C=null,x=this.retrieveCurrentZoomFactor();s=x>2&&o<=1200?700:1200,t.pdfViewer.tileRenderingSettings.enableTileRendering||(s=1200),this.renderThumbnailImages?(t.renderPage(h,e,d),-1==this.textrequestLists.indexOf(e)&&(C={pageStartIndex:e,pageEndIndex:e+1,documentId:t.getDocumentId(),hashId:t.hashId,action:"RenderPdfTexts",elementId:t.pdfViewer.element.id,uniqueId:t.documentId},this.jsonDocumentId&&(C.documentId=this.jsonDocumentId),this.textRequestHandler=new Dh(this.pdfViewer),this.textRequestHandler.url=this.pdfViewer.serviceUrl+"/"+this.pdfViewer.serverActionSettings.renderTexts,this.textRequestHandler.responseType="json",this.textRequestHandler.send(C),this.textrequestLists.push(e),t.textRequestHandler.onSuccess=function(i){if(!(t.pdfViewer.magnification&&t.pdfViewer.magnification.isPinchZoomed||!t.pageSize[parseInt(e.toString(),10)])){var n=i.data;if(n&&"object"!==typeof n)try{n=JSON.parse(n)}catch(s){t.onControlError(500,n,t.pdfViewer.serverActionSettings.renderTexts),n=null}if(n){for(;"object"!==typeof n;)n=JSON.parse(n);if(n.documentTextCollection&&n.uniqueId===t.documentId){t.pdfViewer.fireAjaxRequestSuccess(t.pdfViewer.serverActionSettings.renderTexts,n);var o=void 0!==n.pageNumber?n.pageNumber:e;t.storeWinData(n,o),t.renderPage(n,e)}}}},this.textRequestHandler.onFailure=function(e){t.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,t.pdfViewer.serverActionSettings.renderTexts)},this.textRequestHandler.onError=function(e){t.openNotificationPopup(),t.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,t.pdfViewer.serverActionSettings.renderTexts)})):(C={xCoordinate:b.toString(),yCoordinate:S.toString(),viewPortWidth:s.toString(),viewPortHeight:a.toString(),pageNumber:e.toString(),hashId:t.hashId,tilecount:p.toString(),tileXCount:r.toString(),tileYCount:l.toString(),zoomFactor:x.toString(),action:"RenderPdfPages",uniqueId:this.documentId,elementId:t.pdfViewer.element.id,digitalSignaturePresent:t.digitalSignaturePresent(e)},this.jsonDocumentId&&(C.documentId=this.jsonDocumentId),t.pageRequestHandler=new Dh(this.pdfViewer),t.pageRequestHandler.url=t.pdfViewer.serviceUrl+"/"+t.pdfViewer.serverActionSettings.renderPages,t.pageRequestHandler.responseType="json",t.pageRequestHandler.send(C),t.requestLists.push(t.documentId+"_"+e+"_"+b+"_"+S+"_"+x),t.pageRequestHandler.onSuccess=function(i){if(!(t.pdfViewer.magnification&&t.pdfViewer.magnification.isPinchZoomed||!t.pageSize[parseInt(e.toString(),10)])){var n=i.data;if(n&&"object"!==typeof n)try{n=JSON.parse(n)}catch(l){t.onControlError(500,n,t.pdfViewer.serverActionSettings.renderPages),n=null}if(n){for(;"object"!==typeof n;)n=JSON.parse(n);if(n.image&&n.uniqueId===t.documentId){var a=n.pageWidth&&n.pageWidth>0?n.pageWidth:o;t.pdfViewer.fireAjaxRequestSuccess(t.pdfViewer.serverActionSettings.renderPages,n);var r=void 0!==n.pageNumber?n.pageNumber:e;s>=a||!t.pdfViewer.tileRenderingSettings.enableTileRendering?t.storeWinData(n,r):t.storeWinData(n,r,n.tileX,n.tileY),s>=a||!t.pdfViewer.tileRenderingSettings.enableTileRendering?t.renderPage(n,r):t.tileRenderPage(n,r)}}}},this.pageRequestHandler.onFailure=function(e){t.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,t.pdfViewer.serverActionSettings.renderPages)},this.pageRequestHandler.onError=function(e){t.openNotificationPopup(),t.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,t.pdfViewer.serverActionSettings.renderPages)})}}-1===this.renderedPagesList.indexOf(e)&&t.renderedPagesList.push(e)}}},e.prototype.requestForTextExtraction=function(e,t){var i,n=this;i={pageStartIndex:e,pageEndIndex:e+1,documentId:n.getDocumentId(),hashId:n.hashId,action:"RenderPdfTexts",elementId:n.pdfViewer.element.id,uniqueId:n.documentId},this.jsonDocumentId&&(i.documentId=this.jsonDocumentId),this.textRequestHandler=new Dh(this.pdfViewer),this.textRequestHandler.url=this.pdfViewer.serviceUrl+"/"+this.pdfViewer.serverActionSettings.renderTexts,this.textRequestHandler.responseType="json",this.textRequestHandler.send(i),this.textrequestLists.push(e),n.textRequestHandler.onSuccess=function(i){if(!(n.pdfViewer.magnification&&n.pdfViewer.magnification.isPinchZoomed||!n.pageSize[parseInt(e.toString(),10)])){var o=i.data;if(o&&"object"!==typeof o)try{o=JSON.parse(o)}catch(h){n.onControlError(500,o,n.pdfViewer.serverActionSettings.renderTexts),o=null}if(o){for(;"object"!==typeof o;)o=JSON.parse(o);if(o.documentTextCollection&&o.uniqueId===n.documentId){n.pdfViewer.fireAjaxRequestSuccess(n.pdfViewer.serverActionSettings.renderTexts,o);var s=void 0!==o.pageNumber?o.pageNumber:e;if(n.storeWinData(o,s),m(t))n.renderPage(o,e);else{var a=t.bounds[0],r=o.documentTextCollection[0][e].PageText.split(""),l=o.characterBounds,d=n.textMarkUpContent(a,r,l);t.textMarkupContent=d,this.pdfViewer.annotationModule.storeAnnotations(e,t,"_annotations_textMarkup")}}}}},this.textRequestHandler.onFailure=function(e){n.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,n.pdfViewer.serverActionSettings.renderTexts)},this.textRequestHandler.onError=function(e){n.openNotificationPopup(),n.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,n.pdfViewer.serverActionSettings.renderTexts)}},e.prototype.textMarkUpContent=function(e,t,i){for(var n="",o=0;o<i.length;o++){var s=.5;i[o].Y>=e.Y-s&&i[o].X>=e.X-s&&i[o].Y<=e.Y+e.Height+s&&i[o].X<=e.X+e.Width+s&&(n+=t[o])}return n.replace(/(\r\n)/gm,"")},e.prototype.digitalSignaturePresent=function(e){var t=!1;return this.digitalSignaturePages&&0!==this.digitalSignaturePages.length&&-1!=this.digitalSignaturePages.indexOf(e)&&(t=!0),t},e.prototype.pageRequestSent=function(e,t,i){var n=this.retrieveCurrentZoomFactor(),o=this.documentId+"_"+e+"_"+t+"_"+i+"_"+n;return!!(this.requestLists&&this.requestLists.indexOf(o)>-1)},e.prototype.onControlError=function(e,t,i){this.openNotificationPopup(),this.pdfViewer.fireAjaxRequestFailed(e,t,i)},e.prototype.getStoredData=function(e,t){var i=this.retrieveCurrentZoomFactor();this.pdfViewer.restrictZoomRequest&&!this.pdfViewer.tileRenderingSettings.enableTileRendering&&(i=1);var n=this.getWindowSessionStorage(e,i)?this.getWindowSessionStorage(e,i):this.getPinchZoomPage(e);if(!n&&t){var o=this.getWindowSessionStorageTile(e,0,0,i);o&&(n=o)}var s=null;return n&&(s=n,this.isPinchZoomStorage||(s=JSON.parse(n)),this.isPinchZoomStorage=!1),s},e.prototype.storeWinData=function(e,t,i,n){var o;if(e.image){var s=this.createBlobUrl(e.image.split("base64,")[1],"image/png"),a=(URL||webkitURL).createObjectURL(s);isNaN(i)&&isNaN(n)||0===i&&0===n?(o={image:a,transformationMatrix:e.transformationMatrix,hyperlinks:e.hyperlinks,hyperlinkBounds:e.hyperlinkBounds,linkAnnotation:e.linkAnnotation,linkPage:e.linkPage,annotationLocation:e.annotationLocation,textContent:e.textContent,width:e.width,textBounds:e.textBounds,pageText:e.pageText,rotation:e.rotation,scaleFactor:e.scaleFactor,uniqueId:e.uniqueId,zoomFactor:e.zoomFactor,tileX:i,tileY:n},this.pageSize[parseInt(t.toString(),10)]&&(this.pageSize[t].rotation=parseFloat(e.rotation)),this.textLayer.characterBound[t]=e.characterBounds):o={image:a,transformationMatrix:e.transformationMatrix,tileX:i,tileY:n,width:e.width,zoomFactor:e.zoomFactor}}else{var r=e.documentTextCollection[0][t];o={textContent:e.textContent,textBounds:e.textBounds,pageText:r.PageText,rotation:e.rotation,uniqueId:e.uniqueId},this.pageSize[parseInt(t.toString(),10)]&&(this.pageSize[t].rotation=parseFloat(e.rotation)),this.textLayer.characterBound[t]=e.characterBounds}this.pageSize[parseInt(t.toString(),10)]&&this.pageSize[parseInt(t.toString(),10)].width,this.manageSessionStorage(t,o,i,n)},e.prototype.setCustomAjaxHeaders=function(e){for(var t=0;t<this.pdfViewer.ajaxRequestSettings.ajaxHeaders.length;t++)e.setRequestHeader(this.pdfViewer.ajaxRequestSettings.ajaxHeaders[parseInt(t.toString(),10)].headerName,this.pdfViewer.ajaxRequestSettings.ajaxHeaders[parseInt(t.toString(),10)].headerValue)},e.prototype.getPinchZoomPage=function(e){for(var t in this.pinchZoomStorage)if(this.pinchZoomStorage.hasOwnProperty(t)&&this.pinchZoomStorage[t].index===e)return this.isPinchZoomStorage=!0,this.pinchZoomStorage[t].pinchZoomStorage;return null},e.prototype.getWindowSessionStorage=function(e,t){return window.sessionStorage.getItem(this.documentId+"_"+e+"_"+t)},e.prototype.getWindowSessionStorageTile=function(e,t,i,n){return window.sessionStorage.getItem(this.documentId+"_"+e+"_"+t+"_"+i+"_"+n)},e.prototype.retrieveCurrentZoomFactor=function(){var e=this.getZoomFactor();return this.pdfViewer.enableZoomOptimization?(e<=1?e=1:e>1&&e<=2?e=2:e>2&&e<=3?e=3:e>3&&e<=4&&(e=4),e):(e<=0&&(e=1),e)},e.prototype.manageSessionStorage=function(e,t,i,n){var o=Math.round(JSON.stringify(window.sessionStorage).length/1024);if(o>=5e3){if(!this.isStorageExceed){for(var s=[],a=[],r=0;r<window.sessionStorage.length;r++)window.sessionStorage.key(r)&&window.sessionStorage.key(r).split("_")[3]&&("annotations"===window.sessionStorage.key(r).split("_")[3]?(this.annotationStorage[window.sessionStorage.key(r)]=window.sessionStorage.getItem(window.sessionStorage.key(r)),s.push(window.sessionStorage.key(r))):("formfields"===window.sessionStorage.key(r).split("_")[3]||"formDesigner"===window.sessionStorage.key(r).split("_")[3])&&(this.formFieldStorage[window.sessionStorage.key(r)]=window.sessionStorage.getItem(window.sessionStorage.key(r)),a.push(window.sessionStorage.key(r))));if(s)for(r=0;r<s.length;r++)window.sessionStorage.removeItem(s[parseInt(r.toString(),10)]);if(a)for(r=0;r<a.length;r++)window.sessionStorage.removeItem(a[parseInt(r.toString(),10)])}if(this.isStorageExceed=!0,(o=Math.round(JSON.stringify(window.sessionStorage).length/1024))>=5e3){var l=window.sessionStorage.length;l>200&&(l=200);for(r=0;r<l;r++)window.sessionStorage.key(r)&&window.sessionStorage.key(r).split("_")[3]&&"annotations"!==window.sessionStorage.key(r).split("_")[3]&&window.sessionStorage.removeItem(window.sessionStorage.key(r))}}var d=this.retrieveCurrentZoomFactor();isNaN(i)&&isNaN(n)?(window.sessionStorage.setItem(this.documentId+"_"+e+"_"+d,JSON.stringify(t)),this.sessionStorage.push(this.documentId+"_"+e+"_"+d)):(this.sessionStorage.push(this.documentId+"_"+e+"_"+i+"_"+n+"_"+d),window.sessionStorage.setItem(this.documentId+"_"+e+"_"+i+"_"+n+"_"+d,JSON.stringify(t)))},e.prototype.createBlobUrl=function(e,t){for(var i=atob(e),n=[],o=0;o<i.length;o+=512){for(var s=i.slice(o,o+512),a=new Array(s.length),r=0;r<s.length;r++)a[r]=s.charCodeAt(r);var l=new Uint8Array(a);n.push(l)}return new Blob(n,{type:t})},e.prototype.getRandomNumber=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return t.toString(16)}))},e.prototype.createGUID=function(){return"Sync_PdfViewer_"+this.getRandomNumber()},e.prototype.isClickedOnScrollBar=function(e,t){var i=!1;return t&&this.setScrollDownValue(e.type,!1),this.viewerContainer.clientWidth+this.viewerContainer.offsetLeft<e.clientX&&e.clientX<this.viewerContainer.offsetWidth+this.viewerContainer.offsetLeft&&(i=!0,t&&this.setScrollDownValue(e.type,!0)),this.viewerContainer.clientHeight+this.viewerContainer.offsetTop<e.clientY&&e.clientY<this.viewerContainer.offsetHeight+this.viewerContainer.offsetTop&&(i=!0,t&&this.setScrollDownValue(e.type,!0)),i},e.prototype.setScrollDownValue=function(e,t){"mousedown"===e&&(this.isScrollbarMouseDown=t)},e.prototype.disableTextSelectionMode=function(){this.isTextSelectionDisabled=!0,this.viewerContainer.classList.remove("e-enable-text-selection"),this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.clearTextSelection(),this.viewerContainer.classList.add("e-disable-text-selection"),this.viewerContainer.addEventListener("selectstart",(function(){return!1}))},e.prototype.getElement=function(e){return document.getElementById(this.pdfViewer.element.id+e)},e.prototype.getPageWidth=function(e){return this.pageSize[parseInt(e.toString(),10)]?this.pageSize[parseInt(e.toString(),10)].width*this.getZoomFactor():0},e.prototype.getPageHeight=function(e){return this.pageSize[parseInt(e.toString(),10)]?this.pageSize[parseInt(e.toString(),10)].height*this.getZoomFactor():0},e.prototype.getPageTop=function(e){return this.pageSize[parseInt(e.toString(),10)]?this.pageSize[parseInt(e.toString(),10)].top*this.getZoomFactor():0},e.prototype.isAnnotationToolbarHidden=function(){return!this.pdfViewer.toolbarModule.annotationToolbarModule||this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden},e.prototype.isFormDesignerToolbarHidded=function(){var e=this.pdfViewer.toolbarModule.formDesignerToolbarModule;return!e||e.isToolbarHidden},e.prototype.getTextMarkupAnnotationMode=function(){return!!this.isTextMarkupAnnotationModule()&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode},e.prototype.isNewFreeTextAnnotation=function(){return!this.pdfViewer.annotationModule||!this.pdfViewer.annotationModule.freeTextAnnotationModule||!this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot},e.prototype.getCurrentTextMarkupAnnotation=function(){return!!this.isTextMarkupAnnotationModule()&&!!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation},e.prototype.getSelectTextMarkupCurrentPage=function(){return this.isTextMarkupAnnotationModule()?this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage:null},e.prototype.getAnnotationToolStatus=function(){return!!this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule.isAnnotationButtonsEnabled()},e.prototype.getPopupNoteVisibleStatus=function(){return!!this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.isPopupNoteVisible},e.prototype.isTextMarkupAnnotationModule=function(){return this.pdfViewer.annotationModule?this.pdfViewer.annotationModule.textMarkupAnnotationModule:null},e.prototype.isShapeAnnotationModule=function(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.shapeAnnotationModule)},e.prototype.isFormDesignerModule=function(){return!!this.pdfViewer.formDesignerModule},e.prototype.isCalibrateAnnotationModule=function(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.measureAnnotationModule)},e.prototype.isStampAnnotationModule=function(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.stampAnnotationModule)},e.prototype.isInkAnnotationModule=function(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.inkAnnotationModule)},e.prototype.isCommentAnnotationModule=function(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.stickyNotesAnnotationModule)},e.prototype.isShapeBasedAnnotationsEnabled=function(){return!!(this.isShapeAnnotationModule()||this.isCalibrateAnnotationModule()||this.isStampAnnotationModule()||this.isCommentAnnotationModule()||this.isFormDesignerModule())},e.prototype.getMousePosition=function(e){var t,i,n,o=e.target.parentElement;if(-1!==e.type.indexOf("touch")){if(t=e,this.pdfViewer.annotation){var s=this.getElement("_pageDiv_"+this.pdfViewer.annotation.getEventPageNumber(e));if(s){var a=s.getBoundingClientRect();i=t.changedTouches[0].clientX-a.left,n=t.changedTouches[0].clientY-a.top}}}else if(e.target.classList.contains("e-pv-hyperlink"))i=e.offsetX+e.target.offsetLeft,n=e.offsetY+e.target.offsetTop;else if(e.target.classList.contains("e-pv-text")&&o){var r=o.getBoundingClientRect();i=e.clientX-r.left,n=e.clientY-r.top}else if(e.target&&e&&e.path&&o&&(o.classList.contains("foreign-object")||o.parentElement.classList.contains("foreign-object"))){r=void 0;if("e-pv-page-div"===e.path[4].className)r=e.path[4].getBoundingClientRect();else for(var l=0;l<e.path.length;l++)if("e-pv-page-div"===e.path[parseInt(l.toString(),10)].className){r=e.path[parseInt(l.toString(),10)].getBoundingClientRect();break}i=e.clientX-r.left,n=e.clientY-r.top}else if(e.target&&o&&o.classList.contains("foreign-object")||e.target.classList.contains("e-pv-checkbox-div")){r=void 0;r=e.target.classList.contains("e-pv-checkbox-div")?e.target.offsetParent.offsetParent.offsetParent.offsetParent.getBoundingClientRect():e.target.offsetParent.offsetParent.offsetParent.getBoundingClientRect(),i=e.clientX-r.left,n=e.clientY-r.top}else i=e.offsetX,n=e.offsetY;return{x:i,y:n}},e.prototype.getMouseEventArgs=function(e,t,i,n){var o,s;return t.position=e,n?o=bp(i,this,this.pdfViewer):"Drag"===this.action||"ConnectorSourceEnd"===this.action||"SegmentEnd"===this.action||"OrthoThumb"===this.action||"BezierSourceThumb"===this.action||"BezierTargetThumb"===this.action||"ConnectorTargetEnd"===this.action||-1!==this.action.indexOf("Rotate")||-1!==this.action.indexOf("Resize")?(o=this.pdfViewer.selectedItems,("Drag"===this.action&&o&&this.pdfViewer.selectedItems.annotations.length>0||"Drag"===this.action&&o&&this.pdfViewer.selectedItems.formFields.length>0)&&(o=bp(i,this,this.pdfViewer))):o=bp(i,this,this.pdfViewer),o&&(s=o.wrapper),n?(t.target=o,t.targetWrapper=s):(t.source=o,t.sourceWrapper=s),t.actualObject=this.eventArgs.actualObject,t},e.prototype.findToolToActivate=function(e,t){t={x:t.x/this.getZoomFactor(),y:t.y/this.getZoomFactor()};var i=this.pdfViewer.selectedItems.wrapper;if(i&&e){var n=i.bounds,o=new Nh(n.x,n.y,n.width,n.height);if("Line"===e.shapeAnnotationType||"LineWidthArrowHead"===e.shapeAnnotationType||"Distance"===e.shapeAnnotationType||"Polygon"===e.shapeAnnotationType){var s=this.pdfViewer.selectedItems.annotations[0];if(s)for(var a=0;a<s.vertexPoints.length;a++)if(Lh(t,s.vertexPoints[parseInt(a.toString(),10)],10)&&0!==s.leaderHeight)return"ConnectorSegmentPoint_"+a}if("Distance"===e.shapeAnnotationType){var r=0,l=void 0;if(e&&e.wrapper)for(a=0;a<e.wrapper.children.length;a++){var d=Ns.findAngle(e.sourcePoint,e.targetPoint);if(e.wrapper.children[a].id.indexOf("leader")>-1){var h=e.wrapper.children[0].bounds.center;0===r?(l={x:e.sourcePoint.x,y:e.sourcePoint.y-e.leaderHeight},h=e.sourcePoint):(l={x:e.targetPoint.x,y:e.targetPoint.y-e.leaderHeight},h=e.targetPoint);var p=Ls();if(Os(p,d,h.x,h.y),Lh(t,Ps(p,{x:l.x,y:l.y}),10))return"Leader"+r;r++}}}var c=this.pdfViewer.touchPadding;this.getZoomFactor()<=1.5&&(c/=this.getZoomFactor());var u=Ls();Os(u,e.rotateAngle+i.parentTransform,i.offsetX,i.offsetY);var f=i.offsetX-i.pivot.x*i.actualSize.width,m=i.offsetY-i.pivot.y*i.actualSize.height,g={x:f+(.5===i.pivot.x?2*i.pivot.x:i.pivot.x)*i.actualSize.width/2,y:m-30/this.getZoomFactor()};if(g=Ps(u,g),"Stamp"===e.shapeAnnotationType&&Lh(t,g,c))return"Rotate";if((o=this.inflate(c,o)).containsPoint(t,0)){var y=this.checkResizeHandles(this.pdfViewer,i,t,u,f,m);if(y)return y}return this.pdfViewer.selectedItems.annotations.indexOf(e)>-1||this.pdfViewer.selectedItems.formFields.indexOf(e)>-1&&this.pdfViewer.designerMode?"Drag":"Select"}return this.pdfViewer.tool||"Select"},e.prototype.inflate=function(e,t){return t.x-=e,t.y-=e,t.width+=2*e,t.height+=2*e,t},e.prototype.checkResizeHandles=function(e,t,i,n,o,s){var a;return a||(a=this.checkForResizeHandles(e,t,i,n,o,s)),a||null},e.prototype.checkForResizeHandles=function(e,t,i,n,o,s){var a=this.pdfViewer.touchPadding/1;this.getZoomFactor()>=2&&!ge.isDevice&&(a/=this.getZoomFactor()/1.9),(t.actualSize.width<40||t.actualSize.height<40&&ge.isDevice)&&(a=a/2*this.getZoomFactor()/1);e.selectedItems;var r=!1,l=!1,d=!1,h=!1,p=this.pdfViewer.annotationSelectorSettings.resizerLocation;if((p<1||p>3)&&(p=3),!this.pdfViewer.selectedItems.annotations[0]||"Stamp"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"FreeText"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"Image"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"HandWrittenSignature"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"SignatureText"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"SignatureImage"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||(r=!0),this.pdfViewer.selectedItems.annotations[0]&&"StickyNotes"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(l=!0),this.pdfViewer.selectedItems.annotations[0]&&"Ink"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(h=!0),!this.pdfViewer.selectedItems.annotations[0]||"Ellipse"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"Radius"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"Rectangle"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||(d=!0),!l){if(h||r||this.pdfViewer.selectedItems.annotations[0]&&("HandWrittenSignature"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureImage"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType)||t.actualSize.width>=40&&t.actualSize.height>=40&&d&&(1===p||3===p)){if(Lh(i,Ps(n,{x:o+t.actualSize.width,y:s+t.actualSize.height}),a))return"ResizeSouthEast";if(Lh(i,Ps(n,{x:o,y:s+t.actualSize.height}),a))return"ResizeSouthWest";if(Lh(i,Ps(n,{x:o+t.actualSize.width,y:s}),a))return"ResizeNorthEast";if(Lh(i,Ps(n,{x:o,y:s}),a))return"ResizeNorthWest"}if(h||!d||d&&(2===p||3===p||!(t.actualSize.width>=40&&t.actualSize.height>=40)&&1===p)){if(Lh(i,Ps(n,{x:o+t.actualSize.width,y:s+t.actualSize.height/2}),a)&&!r)return"ResizeEast";if(Lh(i,Ps(n,{x:o,y:s+t.actualSize.height/2}),a)&&!r)return"ResizeWest";if(Lh(i,Ps(n,{x:o+t.actualSize.width/2,y:s+t.actualSize.height}),a)&&!r)return"ResizeSouth";if(Lh(i,Ps(n,{x:o+t.actualSize.width/2,y:s}),a)&&!r)return"ResizeNorth"}}return null},e.prototype.checkSignatureFormField=function(e){var t=!1;this.pdfViewer.formDesignerModule&&(e=e.split("_")[0]);var i=this.pdfViewer.nameTable[e];return i&&("SignatureField"!==i.formFieldAnnotationType&&"InitialField"!==i.formFieldAnnotationType&&"SignatureField"!==i.annotName||(t=!0)),t},e.prototype.diagramMouseMove=function(e){var t=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(!1),this.currentPosition=this.getMousePosition(e),this.pdfViewer.firePageMouseover(this.currentPosition.x,this.currentPosition.y),this.pdfViewer.annotation?this.activeElements.activePageID=this.pdfViewer.annotation.getEventPageNumber(e):this.pdfViewer.formDesignerModule&&(this.activeElements.activePageID=this.pdfViewer.formDesignerModule.getEventPageNumber(e));var i,n=bp(e,this,this.pdfViewer);(this.tool instanceof Lp||this.tool instanceof Op)&&(n=this.pdfViewer.drawingObject);var o=this.pdfViewer.selectedItems.annotations.length>0&&this.checkSignatureFormField(this.pdfViewer.selectedItems.annotations[0].id);if(!1===Ns.equals(this.currentPosition,this.prevPosition)||this.inAction){if(!1===this.isMouseDown){this.eventArgs={};n&&(this.tool=this.getTool(this.action),n.wrapper&&n.wrapper.children[0]&&(i=n));var s=e.target;this.action=this.findToolToActivate(n,this.currentPosition),n&&n.annotationSettings&&n.annotationSettings.isLock&&("Select"===this.action&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Select",n)||(this.action="")),"Drag"===this.action&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Move",n)||(this.action="Select")),("ResizeSouthEast"===this.action||"ResizeNorthEast"===this.action||"ResizeNorthWest"===this.action||"ResizeSouthWest"===this.action||"ResizeNorth"===this.action||"ResizeWest"===this.action||"ResizeEast"===this.action||"ResizeSouth"===this.action||this.action.includes("ConnectorSegmentPoint")||this.action.includes("Leader"))&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Resize",n)||(this.action="Select"))),this.pdfViewer.designerMode||(m(i)||m(i.formFieldAnnotationType))&&!o||("ResizeSouthEast"===this.action||"ResizeNorthEast"===this.action||"ResizeNorthWest"===this.action||"ResizeSouthWest"===this.action||"ResizeNorth"===this.action||"Drag"===this.action||"ResizeWest"===this.action||"ResizeEast"===this.action||"ResizeSouth"===this.action||this.action.includes("ConnectorSegmentPoint")||this.action.includes("Leader"))&&(this.action=""),this.tool=this.getTool(this.action),this.setCursor(s,e),this.pdfViewer.linkAnnotationModule&&this.pdfViewer.linkAnnotationModule.disableHyperlinkNavigationUnderObjects(s,e,this)}else{if(!this.tool&&this.action&&"Rotate"===this.action&&(this.tool=this.getTool(this.action),e.target&&this.setCursor(e.target,e)),this.pdfViewer.designerMode||(m(i)||m(i.formFieldAnnotationType))&&!o||("ResizeSouthEast"===this.action||"ResizeNorthEast"===this.action||"ResizeNorthWest"===this.action||"ResizeSouthWest"===this.action||"ResizeNorth"===this.action||"Drag"===this.action||"ResizeWest"===this.action||"ResizeEast"===this.action||"ResizeSouth"===this.action||this.action.includes("ConnectorSegmentPoint")||this.action.includes("Leader"))&&(this.action="",this.tool=null),this.eventArgs&&this.eventArgs.source){s=e.target;this.updateDefaultCursor(this.eventArgs.source,s,e)}else this.setCursor(e.target,e);if(this.diagramMouseActionHelper(e),this.tool){if(n&&"FreeText"===n.shapeAnnotationType)if(this.pdfViewer.freeTextSettings.allowEditTextOnly&&"Ink"!==this.action&&this.eventArgs.source&&"FreeText"===this.eventArgs.source.shapeAnnotationType)(s=event.target).style.cursor="default",this.tool=null;if(null!=this.tool){var a={ctrlKey:e.ctrlKey,shiftKey:e.shiftKey};this.eventArgs.info=a,this.tool.mouseMove(this.eventArgs)}}}if(this.pdfViewer.drawingObject&&this.pdfViewer.drawingObject.formFieldAnnotationType&&"Drag"!==this.action&&!(this.tool instanceof Fp)&&(this.tool=this.getTool(this.action),this.tool instanceof Lp)){var r=this.pdfViewer.drawingObject,l=this.pdfViewer.formDesignerModule.updateFormFieldInitialSize(r,r.formFieldAnnotationType),d=this.pageContainer.firstElementChild.clientWidth-l.width,h=this.pageContainer.firstElementChild.clientHeight-l.height;if(this.pdfViewer.formDesignerModule&&r.formFieldAnnotationType&&this.currentPosition.x<d&&this.currentPosition.y<h)if(u=document.getElementById("FormField_helper_html_element")){if(u){var p=u.parentElement.id.split("_text_")[1]||u.parentElement.id.split("_textLayer_")[1]||u.parentElement.id.split("_annotationCanvas_")[1]||u.parentElement.id.split("_pageDiv_")[1];if(parseInt(p)!==this.activeElements.activePageID)u.remove("FormField_helper_html_element");else{var c=this.getMousePosition(event);"Checkbox"===r.formFieldAnnotationType?u.firstElementChild.firstElementChild.lastElementChild.style.visibility="visible":"SignatureField"===r.formFieldAnnotationType||"InitialField"===r.formFieldAnnotationType?(u.firstElementChild.firstElementChild.style.visibility="visible",u.firstElementChild.lastElementChild.style.visibility="visible"):u.firstElementChild.firstElementChild.style.visibility="visible",u.setAttribute("style","height:"+l.height+"px; width:"+l.width+"px;left:"+c.x+"px; top:"+c.y+"px;position:absolute;opacity: 0.5;")}}}else this.pdfViewer.formDesignerModule.drawHelper(r.formFieldAnnotationType,r,e);else if(this.currentPosition.x>d||this.currentPosition.y>h){var u;if(u=document.getElementById("FormField_helper_html_element")){if(u){c=this.getMousePosition(event);u.setAttribute("style","height:"+l.height+"px; width:"+l.width+"px;left:"+c.x+"px; top:"+c.y+"px;position:absolute;opacity: 0.5;"),"Checkbox"===r.formFieldAnnotationType?u.firstElementChild.firstElementChild.lastElementChild.style.visibility="hidden":"SignatureField"===r.formFieldAnnotationType||"InitialField"===r.formFieldAnnotationType?(u.firstElementChild.firstElementChild.style.visibility="hidden",u.firstElementChild.lastElementChild.style.visibility="hidden"):u.firstElementChild.firstElementChild.style.visibility="hidden"}}else this.pdfViewer.formDesignerModule.drawHelper(r.formFieldAnnotationType,r,e)}}this.prevPosition=this.currentPosition}this.pdfViewer.enableServerDataBinding(t,!0)},e.prototype.updateDefaultCursor=function(e,t,i){e&&void 0!==e.pageIndex&&e.pageIndex!==this.activeElements.activePageID&&t?this.isPanMode?t.style.cursor="grab":t.style.cursor="default":this.setCursor(t,i)},e.prototype.diagramMouseLeave=function(e){this.currentPosition=this.getMousePosition(e),this.pdfViewer.annotation&&(this.activeElements.activePageID=this.pdfViewer.annotation.getEventPageNumber(e)),isNaN(this.activeElements.activePageID)&&this.pdfViewer.formDesignerModule&&(this.activeElements.activePageID=this.pdfViewer.formDesignerModule.getEventPageNumber(e));var t=bp(e,this,this.pdfViewer),i=!1;if(!1===Ns.equals(this.currentPosition,this.prevPosition)||this.inAction){if(!1===this.isMouseDown||i){this.eventArgs={};t&&(t.wrapper.children[0]&&t,i=!1)}else this.diagramMouseActionHelper(e),this.tool&&"Drag"!==this.action&&"Stamp"!==this.pdfViewer.tool&&this.tool.currentElement&&"Stamp"!==this.tool.currentElement.shapeAnnotationType&&(this.tool.mouseLeave(this.eventArgs),this.tool=null,this.pdfViewer.annotation&&this.pdfViewer.annotationModule.renderAnnotations(this.previousPage,null,null,null));this.prevPosition=this.currentPosition}},e.prototype.diagramMouseActionHelper=function(e){this.eventArgs.position=this.currentPosition,"Drag"===this.action&&this.eventArgs.source instanceof np&&this.getMouseEventArgs(this.currentPosition,this.eventArgs,e),this.getMouseEventArgs(this.currentPosition,this.eventArgs,e,this.eventArgs.source),this.inAction=!0,this.initialEventArgs=null},e.prototype.setCursor=function(e,t){var i,n=this.pdfViewer.annotationModule?this.pdfViewer.annotationModule.freeTextAnnotationModule:null;if(this.tool instanceof Fp)"ResizeNorthWest"===this.tool.corner?(i=this.setResizerCursorType(),e.style.cursor=m(i)?"nw-resize":i):"ResizeNorthEast"===this.tool.corner?(i=this.setResizerCursorType(),e.style.cursor=m(i)?"ne-resize":i):"ResizeSouthWest"===this.tool.corner?(i=this.setResizerCursorType(),e.style.cursor=m(i)?"sw-resize":i):"ResizeSouthEast"===this.tool.corner?(i=this.setResizerCursorType(),e.style.cursor=m(i)?"se-resize":i):"ResizeNorth"===this.tool.corner?(i=this.setResizerCursorType(),e.style.cursor=m(i)?"n-resize":i):"ResizeWest"===this.tool.corner?(i=this.setResizerCursorType(),e.style.cursor=m(i)?"w-resize":i):"ResizeEast"===this.tool.corner?(i=this.setResizerCursorType(),e.style.cursor=m(i)?"e-resize":i):"ResizeSouth"===this.tool.corner&&(i=this.setResizerCursorType(),e.style.cursor=m(i)?"s-resize":i);else if(this.isCommentIconAdded&&this.isAddComment)e.style.cursor="crosshair";else if(this.pdfViewer.enableHandwrittenSignature&&this.isNewSignatureAdded&&this.tool instanceof Ep)e.style.cursor="crosshair";else if(this.tool instanceof Vp)e.style.cursor="move";else if(this.tool instanceof Lp||this.tool instanceof Op||this.tool instanceof Pp||n&&n.isNewAddedAnnot||this.tool instanceof Dp)e.style.cursor="crosshair";else if(this.tool instanceof Np)this.tool.endPoint&&this.tool.endPoint.indexOf("Leader0")?(i=this.setResizerCursorType(),e.style.cursor=m(i)?"nw-resize":i):this.tool.endPoint&&this.tool.endPoint.indexOf("Leader1")?(i=this.setResizerCursorType(),e.style.cursor=m(i)?"ne-resize":i):this.tool.endPoint&&this.tool.endPoint.indexOf("ConnectorSegmentPoint")&&(e.style.cursor="sw-resize");else if(e.classList.contains("e-pv-text"))e.style.cursor="text";else if(e.classList.contains("e-pv-hyperlink"))e.style.cursor="pointer";else if(this.isPanMode){if(this.isViewerMouseDown&&"mousemove"===t.type)e.style.cursor="grabbing";else if((c=bp(t,this,this.pdfViewer))&&"mousemove"===t.type){e.style.cursor="pointer";var o=c,s=this.getMousePosition(t),a={left:(g=this.relativePosition(t)).x,top:g.y},r={left:s.x,top:s.y},l={opacity:o.opacity,fillColor:o.fillColor,strokeColor:o.strokeColor,thicknes:o.thickness,author:o.author,subject:o.subject,modifiedDate:o.modifiedDate};this.isMousedOver=!0;var d=this.checkSignatureFormField(o.id);if(o.formFieldAnnotationType){this.isFormFieldMousedOver=!0;var h={value:o.value,fontFamily:o.fontFamily,fontSize:o.fontSize,fontStyle:o.fontStyle,color:o.color,backgroundColor:o.backgroundColor,borderColor:o.borderColor,thickness:o.thickness,alignment:o.alignment,isReadonly:o.isReadonly,visibility:o.visibility,maxLength:o.maxLength,isRequired:o.isRequired,isPrint:o.isPrint,rotation:o.rotateAngle,tooltip:o.tooltip,options:o.options,isChecked:o.isChecked,isSelected:o.isSelected};this.pdfViewer.fireFormFieldMouseoverEvent("formFieldMouseover",h,o.pageIndex,g.x,g.y,s.x,s.y)}else d||this.pdfViewer.fireAnnotationMouseover(o.annotName,o.pageIndex,o.shapeAnnotationType,o.bounds,l,r,a)}else if(e.style.cursor="grab",this.isMousedOver){var p=void 0;p=this.pdfViewer.formDesignerModule?this.pdfViewer.formDesignerModule.getEventPageNumber(t):this.pdfViewer.annotation.getEventPageNumber(t),this.isFormFieldMousedOver?this.pdfViewer.fireFormFieldMouseLeaveEvent("formFieldMouseLeave",null,p):this.pdfViewer.fireAnnotationMouseLeave(p),this.isMousedOver=!1,this.isFormFieldMousedOver=!1}}else{var c;if((c=bp(t,this,this.pdfViewer))&&0===this.pdfViewer.selectedItems.annotations.length&&"mousemove"===t.type){o=c;var u=this.pdfViewer.nameTable[o.id];"HandWrittenSignature"!==u.shapeAnnotationType&&"Ink"!==u.shapeAnnotationType&&u.annotationSettings&&void 0!==u.annotationSettings.isLock&&(u.annotationSettings.isLock=JSON.parse(u.annotationSettings.isLock)),u.annotationSettings&&u.annotationSettings.isLock?e.style.cursor="default":e.style.cursor="pointer";s=this.getMousePosition(t),a={left:(g=this.relativePosition(t)).x,top:g.y},r={left:s.x,top:s.y},l={opacity:o.opacity,fillColor:o.fillColor,strokeColor:o.strokeColor,thicknes:o.thickness,author:o.author,subject:o.subject,modifiedDate:o.modifiedDate};this.isMousedOver=!0;d=this.checkSignatureFormField(o.id);if(o.formFieldAnnotationType){this.isFormFieldMousedOver=!0;var f={value:o.value,fontFamily:o.fontFamily,fontSize:o.fontSize,fontStyle:o.fontStyle,color:o.color,backgroundColor:o.backgroundColor,borderColor:o.borderColor,thickness:o.thickness,alignment:o.alignment,isReadonly:o.isReadonly,visibility:o.visibility,maxLength:o.maxLength,isRequired:o.isRequired,isPrint:o.isPrint,rotation:o.rotateAngle,tooltip:o.tooltip,options:o.options,isChecked:o.isChecked,isSelected:o.isSelected};this.fromTarget=o,this.pdfViewer.fireFormFieldMouseoverEvent("formFieldMouseover",f,o.pageIndex,g.x,g.y,s.x,s.y)}else d||this.pdfViewer.fireAnnotationMouseover(o.annotName,o.pageIndex,o.shapeAnnotationType,o.bounds,l,r,a)}else if(!this.pdfViewer.formDesignerModule&&t.target.classList.contains("e-pdfviewer-formFields")){p=this.pdfViewer.annotation.getEventPageNumber(t),s=this.getMousePosition(t),a={left:(g=this.relativePosition(t)).x,top:g.y},r={left:s.x,top:s.y};for(var g,y=this.getItemFromSessionStorage("_formfields"),v=JSON.parse(y),w=0;w<v.length;w++)if(v[parseInt(w.toString(),10)].FieldName===t.target.name)var b={name:v[parseInt(w.toString(),10)].FieldName};this.isMousedOver=!0,this.isFormFieldMousedOver=!0,this.pdfViewer.fireFormFieldMouseoverEvent("formFieldMouseover",b,p,g.x,g.y,s.x,s.y)}else{if(this.isMousedOver){p=void 0;if(p=this.pdfViewer.formDesignerModule?this.pdfViewer.formDesignerModule.getEventPageNumber(t):this.pdfViewer.annotation.getEventPageNumber(t),this.isFormFieldMousedOver)if(this.fromTarget){var S={name:this.fromTarget.name,id:this.fromTarget.id,value:this.fromTarget.value,fontFamily:this.fromTarget.fontFamily,fontSize:this.fromTarget.fontSize,fontStyle:this.fromTarget.fontStyle,color:this.fromTarget.color,backgroundColor:this.fromTarget.backgroundColor,borderColor:this.fromTarget.borderColor,thickness:this.fromTarget.thickness,alignment:this.fromTarget.alignment,isReadonly:this.fromTarget.isReadonly,visibility:this.fromTarget.visibility,maxLength:this.fromTarget.maxLength,isRequired:this.fromTarget.isRequired,isPrint:this.fromTarget.isPrint,rotation:this.fromTarget.rotateAngle,tooltip:this.fromTarget.tooltip,options:this.fromTarget.options,isChecked:this.fromTarget.isChecked,isSelected:this.fromTarget.isSelected};this.pdfViewer.fireFormFieldMouseLeaveEvent("formFieldMouseLeave",S,p)}else this.pdfViewer.fireFormFieldMouseLeaveEvent("formFieldMouseLeave",null,p);else this.pdfViewer.fireAnnotationMouseLeave(p);this.isMousedOver=!1,this.isFormFieldMousedOver=!1,e.style.cursor="default"}c&&1===this.pdfViewer.selectedItems.annotations.length&&"mousemove"===t.type?e.style.cursor="pointer":e.style.cursor="default"}}},e.prototype.setResizerCursorType=function(){var e;return this.pdfViewer.selectedItems.annotations[0]&&m(this.pdfViewer.selectedItems.annotations[0].annotationSelectorSettings.resizerCursorType)?"FreeText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=m(this.pdfViewer.freeTextSettings.annotationSelectorSettings)?null:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerCursorType:"Stamp"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=m(this.pdfViewer.stampSettings.annotationSelectorSettings)?null:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerCursorType:"HandWrittenSignature"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureImage"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=m(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings)?null:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerCursorType:"Ink"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=m(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings)?null:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerCursorType:this.pdfViewer.selectedItems.annotations[0].measureType?this.pdfViewer.selectedItems.annotations[0].measureType&&("Distance calculation"===this.pdfViewer.selectedItems.annotations[0].subject?e=m(this.pdfViewer.distanceSettings.annotationSelectorSettings)?null:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerCursorType:"Perimeter calculation"===this.pdfViewer.selectedItems.annotations[0].subject?e=m(this.pdfViewer.perimeterSettings.annotationSelectorSettings)?null:this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerCursorType:"Area calculation"===this.pdfViewer.selectedItems.annotations[0].subject?e=m(this.pdfViewer.areaSettings.annotationSelectorSettings)?null:this.pdfViewer.areaSettings.annotationSelectorSettings.resizerCursorType:"Radius calculation"===this.pdfViewer.selectedItems.annotations[0].subject?e=m(this.pdfViewer.radiusSettings.annotationSelectorSettings)?null:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerCursorType:"Volume calculation"===this.pdfViewer.selectedItems.annotations[0].subject&&(e=m(this.pdfViewer.volumeSettings.annotationSelectorSettings)?null:this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerCursorType)):"Line"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=m(this.pdfViewer.lineSettings.annotationSelectorSettings)?null:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerCursorType:"LineWidthArrowHead"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=m(this.pdfViewer.arrowSettings.annotationSelectorSettings)?null:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerCursorType:"Rectangle"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=m(this.pdfViewer.rectangleSettings.annotationSelectorSettings)?null:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerCursorType:"Ellipse"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=m(this.pdfViewer.circleSettings.annotationSelectorSettings)?null:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerCursorType:"Polygon"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(e=m(this.pdfViewer.polygonSettings.annotationSelectorSettings)?null:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerCursorType):this.pdfViewer.selectedItems.annotations[0]&&(e=this.pdfViewer.selectedItems.annotations[0].annotationSelectorSettings.resizerCursorType),e||(e=this.pdfViewer.annotationSelectorSettings.resizerCursorType),e},e.prototype.getTool=function(e){switch(e){case"Select":return new kp(this.pdfViewer,this);case"Drag":return new Vp(this.pdfViewer,this);case"ResizeSouthEast":case"ResizeSouthWest":case"ResizeNorthEast":case"ResizeNorthWest":case"ResizeSouth":case"ResizeNorth":case"ResizeWest":case"ResizeEast":return new Fp(this.pdfViewer,this,e);case"ConnectorSourceEnd":case"ConnectorTargetEnd":case"Leader":case"ConnectorSegmentPoint":return new Np(this.pdfViewer,this,e);case"DrawTool":return new Lp(this.pdfViewer,this,this.pdfViewer.drawingObject);case"Polygon":return new Pp(this.pdfViewer,this,"Polygon");case"Distance":return new Op(this.pdfViewer,this,"Leader1",void 0);case"Line":return new Op(this.pdfViewer,this,"ConnectorSegmentPoint_1",this.pdfViewer.drawingObject);case"Perimeter":return new Pp(this.pdfViewer,this,"Perimeter");case"Rotate":return new Bp(this.pdfViewer,this);case"Stamp":return new Ep(this.pdfViewer,this);case"Ink":return new Dp(this.pdfViewer,this,this.pdfViewer.drawingObject)}return e.indexOf("ConnectorSegmentPoint")>-1||e.indexOf("Leader")>-1?new Np(this.pdfViewer,this,e):null},e.prototype.diagramMouseUp=function(e){var t=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(!1);var i=this.action.toLowerCase().includes("resize")||this.action.toLowerCase().includes("connectorsegmentpoint"),n="Drag"===this.action||i||(this.tool instanceof Lp||this.tool instanceof Op||this.tool instanceof Pp)&&this.tool.dragging&&this.tool.drawingObject;if(this.tool){if(!this.inAction&&3!==e.which&&"Drag"===this.action){this.action="Select";var o=bp(e,this,this.pdfViewer)}if(this.tool instanceof Pp||this.tool instanceof Op||this.tool instanceof Lp||(this.inAction=!1,this.isMouseDown=!1),this.currentPosition=this.getMousePosition(e),this.tool){this.eventArgs.position=this.currentPosition,this.getMouseEventArgs(this.currentPosition,this.eventArgs,e,this.eventArgs.source);this.isMetaKey(e);var s={ctrlKey:e.ctrlKey,shiftKey:e.shiftKey};if(this.eventArgs.info=s,this.eventArgs.clickCount=e.detail,this.tool.mouseUp(this.eventArgs),this.isAnnotationMouseDown=!1,this.isFormFieldMouseDown=!1,(this.tool instanceof Lp||this.tool instanceof Op||this.tool instanceof Pp)&&!this.tool.dragging&&(this.inAction=!1,this.isMouseDown=!1),n){o=bp(e,this,this.pdfViewer);(this.isShapeAnnotationModule()||this.isCalibrateAnnotationModule())&&this.pdfViewer.annotation.onShapesMouseup(o,e)}this.isAnnotationDrawn=!1}}var a=e.target;e.cancelable&&this.skipPreventDefault(a)&&(!ge.isDevice||this.pdfViewer.enableDesktopMode)&&e.preventDefault(),this.eventArgs={},this.pdfViewer.enableServerDataBinding(t,!0)},e.prototype.skipPreventDefault=function(e){var t=!1,i=!1;return this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&(i=!0),!e.parentElement||"foreign-object"===e.parentElement.className||e.classList.contains("e-pv-radio-btn")||e.classList.contains("e-pv-radiobtn-span")||e.classList.contains("e-pv-checkbox-div")||e.classList.contains("e-pdfviewer-formFields")||e.classList.contains("e-pdfviewer-ListBox")||e.classList.contains("e-pdfviewer-signatureformfields")||"free-text-input"===e.className&&"TEXTAREA"===e.tagName||i||"e-pv-hyperlink"===e.className||(t=!0),t},e.prototype.isMetaKey=function(e){return navigator.platform.match("Mac")?e.metaKey:e.ctrlKey},e.prototype.diagramMouseDown=function(e){var t=this;this.tool instanceof Vp&&!(this.tool instanceof Ep)&&this.tool.inAction&&(this.diagramMouseUp(e),1===e.which&&(this.preventContextmenu=!0,setTimeout((function(){t.preventContextmenu=!1}),200)));var i=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(!1);var n;n=e.touches,this.isMouseDown=!0,this.isAnnotationAdded=!1,this.currentPosition=this.prevPosition=this.getMousePosition(e),this.eventArgs={};var o=!1;"Stamp"===this.pdfViewer.tool&&(this.pdfViewer.tool="",o=!0),ge.isDevice&&this.pdfViewer.annotation&&(this.activeElements.activePageID=this.pdfViewer.annotation.getEventPageNumber(e));var s=bp(e,this,this.pdfViewer);if(!ge.isDevice||this.pdfViewer.enableDesktopMode||!s||s instanceof kd||e.preventDefault(),this.pdfViewer.annotation&&this.pdfViewer.enableStampAnnotations){var a=this.pdfViewer.annotationModule.stampAnnotationModule;if(a&&a.isNewStampAnnot){var r=s;if(!r&&this.pdfViewer.selectedItems.annotations[0]&&(r=this.pdfViewer.selectedItems.annotations[0]),r){this.isViewerMouseDown=!1,r.opacity=this.pdfViewer.stampSettings.opacity,this.isNewStamp=!0;var l=void 0;if(l="Image"===r.shapeAnnotationType?this.pdfViewer.customStampSettings.opacity:this.pdfViewer.stampSettings.opacity,this.pdfViewer.nodePropertyChange(r,{opacity:l}),this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!1,"Image"===r.shapeAnnotationType&&!this.isAlreadyAdded){this.stampAdded=!0;var d=r.id;a.currentStampAnnotation&&a.currentStampAnnotation.signatureName&&(d=a.currentStampAnnotation.signatureName);for(var h=!1,p=0;p<this.customStampCollection.length;p++)if(this.customStampCollection[parseInt(p.toString(),10)].customStampName===d){h=!0;break}h&&(d=r.id),d=a.customStampName?a.customStampName:a.currentStampAnnotation.signatureName,this.customStampCollection.push({customStampName:d,customStampImageSource:r.data}),S()&&this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateCustomStampCollection",d,r.data)}this.pdfViewer.customStampSettings.enableCustomStamp&&this.pdfViewer.customStampSettings.isAddToMenu&&(this.stampAdded=!0),this.isAlreadyAdded=!1,a.updateDeleteItems(r.pageIndex,r,r.opacity),a.resetAnnotation(),a.isNewStampAnnot=!1}}}if(this.isNewSignatureAdded){this.signatureCount++,this.currentSignatureAnnot=null;var c=s;if(m(c)&&this.pdfViewer.selectedItems.annotations[0]&&(c=this.pdfViewer.selectedItems.annotations[0]),c){this.signatureAdded=!0,this.signatureModule.storeSignatureData(c.pageIndex,c);var u={left:c.bounds.x,top:c.bounds.y,width:c.bounds.width,height:c.bounds.height};this.pdfViewer.fireSignatureAdd(c.pageIndex,c.signatureName,c.shapeAnnotationType,u,c.opacity,c.strokeColor,c.thickness,this.signatureModule.saveImageString)}this.isNewSignatureAdded=!1}if(this.pdfViewer.annotationModule){var f=this.pdfViewer.annotationModule.freeTextAnnotationModule;if(!0===f.isNewFreeTextAnnot){var g=void 0;if(e.target&&(e.target.id.indexOf("_text")>-1||e.target.id.indexOf("_annotationCanvas")>-1||e.target.classList.contains("e-pv-hyperlink"))&&this.pdfViewer.annotation){var y=this.pdfViewer.annotation.getEventPageNumber(e),v=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+y);if(v){var w=v.getBoundingClientRect(),b=w.x?w.x:w.left,C=w.y?w.y:w.top;g=new Nh(b+5,C+5,w.width-10,w.height-10)}}if(n&&(this.mouseX=n[0].clientX,this.mouseY=n[0].clientY),g&&g.containsPoint({x:this.mouseX,y:this.mouseY})&&f.isNewAddedAnnot){y=this.pdfViewer.annotation.getEventPageNumber(e);if(!this.pdfViewer.freeTextSettings.enableAutoFit){var x=this.getZoomFactor(),M=this.currentPosition.x+f.defautWidth*x,I=this.getPageWidth(y);M>=I&&(this.currentPosition.x=I-f.defautWidth*x,this.currentPosition.x<=0?this.currentPosition.x=5:this.currentPosition.x,f.defautWidth=f.defautWidth*x>=I?I-10:f.defautWidth)}if(f.addInuptElemet(this.currentPosition,null,y),this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule){var T=this.pdfViewer.toolbar.annotationToolbarModule;S()||T.primaryToolbar.deSelectItem(T.freeTextEditItem)}e.preventDefault(),f.isNewAddedAnnot=!1}}}s&&s.wrapper.children[0],(!this.tool||this.tool&&!this.tool.drawingObject)&&(o?(this.action="Select",this.tool=this.getTool(this.action)):(this.action=this.findToolToActivate(s,this.currentPosition),s&&s.annotationSettings&&s.annotationSettings.isLock&&("Select"===this.action&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Select",s)||(this.action="")),"Drag"===this.action&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Move",s)||(this.action="Select")),"Rotate"===this.action&&(this.action="Select"),("ResizeSouthEast"===this.action||"ResizeNorthEast"===this.action||"ResizeNorthWest"===this.action||"ResizeSouthWest"===this.action||"ResizeSouth"===this.action||"ResizeNorth"===this.action||"ResizeWest"===this.action||"ResizeEast"===this.action||this.action.includes("ConnectorSegmentPoint")||this.action.includes("Leader"))&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Resize",s)||(this.action="Select"))),this.tool=this.getTool(this.action),this.tool||(this.action=this.pdfViewer.tool||"Select",this.tool=this.getTool(this.action)))),this.getMouseEventArgs(this.currentPosition,this.eventArgs,e),this.eventArgs.position=this.currentPosition,this.tool&&(this.isAnnotationMouseDown=!1,this.isFormFieldMouseDown=!1,this.isAnnotationMouseMove=!1,this.isFormFieldMouseMove=!1,this.tool.mouseDown(this.eventArgs),this.isAnnotationDrawn=!0,this.signatureAdded=!0),this.pdfViewer.annotation&&this.pdfViewer.annotation.onAnnotationMouseDown(),this.pdfViewer.selectedItems&&1===this.pdfViewer.selectedItems.formFields.length&&(m(this.pdfViewer.toolbar)||m(this.pdfViewer.toolbar.formDesignerToolbarModule)||this.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(!0));var A=1===this.pdfViewer.selectedItems.annotations.length?this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id.split("_")[0]+"_content"]:null;if(A||(A=1===this.pdfViewer.selectedItems.annotations.length?this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id]:null),this.eventArgs&&this.eventArgs.source&&(this.eventArgs.source.formFieldAnnotationType||A)&&!this.pdfViewer.designerMode){var k=void 0;if((k=A?this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id.split("_")[0]]:this.eventArgs.source)||(k=this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.findIndex((function(e){return e.id===A.id}))]),k){var V={name:k.name,id:k.id,fontFamily:k.fontFamily,fontSize:k.fontSize,fontStyle:k.fontStyle,color:k.color,value:k.value,type:k.formFieldAnnotationType?k.formFieldAnnotationType:k.type,backgroundColor:k.backgroundColor,alignment:k.alignment},E=document.getElementById(k.id);(E=E||(document.getElementById(k.id+"_content_html_element")?document.getElementById(k.id+"_content_html_element").children[0].children[0]:null))&&(this.currentTarget=E,this.pdfViewer.fireFormFieldClickEvent("formFieldClicked",V,!1,0===e.button))}}this.initialEventArgs={source:this.eventArgs.source,sourceWrapper:this.eventArgs.sourceWrapper},this.initialEventArgs.position=this.currentPosition,this.initialEventArgs.info=this.eventArgs.info,this.pdfViewer.enableServerDataBinding(i,!0)},e.prototype.exportAnnotationsAsObject=function(){var e=this;if(this.pdfViewer.annotationModule&&this.updateExportItem())return new Promise((function(t,i){e.createRequestForExportAnnotations(!0,oa.Json).then((function(e){t(e)}))}))},e.prototype.getItemFromSessionStorage=function(e){return this.isStorageExceed?this.formFieldStorage[this.documentId+e]:window.sessionStorage.getItem(this.documentId+e)},e.prototype.setStyleToTextDiv=function(e,t,i,n,o,s,a){var r=this.getZoomFactor();a&&(r=1,e.style.position="absolute"),e.style.left=t*r+"px",e.style.top=i*r+"px",e.style.height=s*r+"px",e.style.width=o*r+"px",e.style.margin="0px",n>0&&(e.style.fontSize=n*r+"px")},e.prototype.ConvertPointToPixel=function(e){return e*(96/72)},e.prototype.setItemInSessionStorage=function(e,t){var i=Math.round(JSON.stringify(e).length/1024),n=Math.round(JSON.stringify(window.sessionStorage).length/1024);i>4500&&(this.isStorageExceed=!0,this.pdfViewer.formFieldsModule&&(this.isFormStorageExceed||(this.pdfViewer.formFieldsModule.clearFormFieldStorage(),this.isFormStorageExceed=!0))),this.isStorageExceed?this.formFieldStorage[this.documentId+t]=JSON.stringify(e):i+n>4500?(this.isStorageExceed=!0,this.pdfViewer.formFieldsModule.clearFormFieldStorage(),this.isFormStorageExceed=!0,this.pdfViewer.annotationModule.clearAnnotationStorage(),this.formFieldStorage[this.documentId+t]=JSON.stringify(e)):window.sessionStorage.setItem(this.documentId+t,JSON.stringify(e))},e.prototype.exportFormFieldsAsObject=function(e){var t=this;if(this.pdfViewer.formFieldsModule)return new Promise((function(i,n){t.createRequestForExportFormfields(!0,e).then((function(e){i(e)}))}))},e.prototype.importAnnotations=function(e,t,i){this.pdfViewer.annotationModule&&this.createRequestForImportAnnotations(e,t,i)},e.prototype.exportAnnotations=function(e){this.pdfViewer.annotationModule&&(this.updateExportItem()&&this.createRequestForExportAnnotations(!1,e))},e.prototype.createRequestForExportAnnotations=function(e,t,i){var n,o=this;n=this;var s=new Promise((function(s,a){var r;"Json"===t?(r={hashId:n.hashId,action:"ExportAnnotations",pdfAnnotation:n.createAnnotationJsonData(),elementId:n.pdfViewer.element.id,annotationDataFormat:t,uniqueId:n.documentId},n.pdfViewer.fireExportStart(r.pdfAnnotation)):((r=o.constructJsonDownload()).annotationDataFormat=t,r.action="ExportAnnotations",n.pdfViewer.fireExportStart(r)),n.jsonDocumentId&&(r.document=n.jsonDocumentId);var l=n.pdfViewer.serviceUrl+"/"+n.pdfViewer.serverActionSettings.exportAnnotations;n.exportAnnotationRequestHandler=new Dh(o.pdfViewer),n.exportAnnotationRequestHandler.url=l,n.exportAnnotationRequestHandler.mode=!0,n.exportAnnotationRequestHandler.responseType="text",n.exportAnnotationRequestHandler.send(r),n.exportAnnotationRequestHandler.onSuccess=function(o){var a=o.data;if(a){if("object"===typeof a&&(a=JSON.parse(a)),a){var l=n.pdfViewer.fireAjaxRequestSuccess(n.pdfViewer.serverActionSettings.exportAnnotations,a);if(e||i&&!S())if(a.split("base64,")[1]){var d=a,h=atob(a.split(",")[1]);e&&(d="Json"===r.annotationDataFormat?JSON.parse(h):h),null!==n.pdfViewer.exportAnnotationFileName?n.pdfViewer.fireExportSuccess(d,n.pdfViewer.exportAnnotationFileName):n.pdfViewer.fireExportSuccess(d,n.pdfViewer.fileName),n.updateDocumentAnnotationCollections(),s(i?a:h)}else n.pdfViewer.fireExportFailed(r.pdfAnnotation,n.pdfViewer.localeObj.getConstant("Export Failed"));else if("Json"===t)if(a.split("base64,")[1]){if(l)return a;var p=n.createBlobUrl(a.split("base64,")[1],"application/json");ge.isIE||"edge"===ge.info.name?null!==n.pdfViewer.exportAnnotationFileName?window.navigator.msSaveOrOpenBlob(p,n.pdfViewer.exportAnnotationFileName.split(".")[0]+".json"):window.navigator.msSaveOrOpenBlob(p,n.pdfViewer.fileName.split(".")[0]+".json"):n.downloadExportFormat(p,t),n.updateDocumentAnnotationCollections()}else{if(S())this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_ExportFailed").then((function(e){n.openImportExportNotificationPopup(e)}));else n.openImportExportNotificationPopup(n.pdfViewer.localeObj.getConstant("Export Failed"));n.pdfViewer.fireExportFailed(r.pdfAnnotation,n.pdfViewer.localeObj.getConstant("Export Failed"))}else if(a.split("base64,")[1]){if(l)return a;p=n.createBlobUrl(a.split("base64,")[1],"application/vnd.adobe.xfdf");ge.isIE||"edge"===ge.info.name?window.navigator.msSaveOrOpenBlob(p,n.pdfViewer.fileName.split(".")[0]+".xfdf"):n.downloadExportFormat(p,t),n.updateDocumentAnnotationCollections()}else{if(S())this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_ExportFailed").then((function(e){n.openImportExportNotificationPopup(e)}));else n.openImportExportNotificationPopup(n.pdfViewer.localeObj.getConstant("Export Failed"));n.pdfViewer.fireExportFailed(r,n.pdfViewer.localeObj.getConstant("Export Failed"))}}if("string"!==typeof a)try{"string"===typeof a&&(n.onControlError(500,a,n.pdfViewer.serverActionSettings.exportAnnotations),a=null)}catch(u){n.pdfViewer.fireExportFailed(r.pdfAnnotation,n.pdfViewer.localeObj.getConstant("Export Failed")),n.onControlError(500,a,n.pdfViewer.serverActionSettings.exportAnnotations),a=null}}else{var c=void 0;c=null!==n.pdfViewer.exportAnnotationFileName?n.pdfViewer.exportAnnotationFileName:n.pdfViewer.fileName,n.pdfViewer.fireExportSuccess("Exported data saved in server side successfully",c)}},n.exportAnnotationRequestHandler.onFailure=function(e){n.pdfViewer.fireExportFailed(r.pdfAnnotation,e.statusText)},n.exportAnnotationRequestHandler.onError=function(e){n.pdfViewer.fireExportFailed(r.pdfAnnotation,e.statusText)}}));return!e&&!i||s},e.prototype.updateModifiedDateToLocalDate=function(e,t){if(e[t]&&e[t].length>0){var i=e[t];if(i)for(var n=0;n<i.length;n++)if(i[n].ModifiedDate=this.convertUTCDateTimeToLocalDateTime(i[n].ModifiedDate),i[n].Comments)for(var o=0;o<i[n].Comments.length;o++)i[n].Comments[o].ModifiedDate=this.convertUTCDateTimeToLocalDateTime(i[n].Comments[o].ModifiedDate)}},e.prototype.convertUTCDateTimeToLocalDateTime=function(e){var t;if(this.globalize=new ee(this.pdfViewer.locale),null!==e&&void 0!==e&&""!==e)t=new Date(Date.parse(e+" UTC"));else{var i=new Date,n=Date.UTC(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds());t=new Date(n)}return this.globalize.formatDate(t,{format:this.pdfViewer.dateTimeFormat,type:"dateTime"})},e.prototype.createRequestForImportAnnotations=function(e,t,i){var n,o;if(o=this,"string"===typeof e&&"Json"===t&&-1===e.indexOf(".json")&&(e=e.split(",")[1]?e.split(",")[1]:e.split(",")[0],e=JSON.parse(decodeURIComponent(escape(atob(e))))),"object"===typeof e){if(this.isJsonImported=!i,e&&e.pdfAnnotation)for(var s=Object.keys(e.pdfAnnotation),a=0;a<s.length;a++){var r=e.pdfAnnotation[s[a]];this.updateModifiedDateToLocalDate(r,"freeTextAnnotation"),this.updateModifiedDateToLocalDate(r,"measureShapeAnnotation"),this.updateModifiedDateToLocalDate(r,"shapeAnnotation"),this.updateModifiedDateToLocalDate(r,"signatureAnnotation"),this.updateModifiedDateToLocalDate(r,"signatureInkAnnotation"),this.updateModifiedDateToLocalDate(r,"stampAnnotations"),this.updateModifiedDateToLocalDate(r,"stickyNotesAnnotation"),this.updateModifiedDateToLocalDate(r,"textMarkupAnnotation")}o.reRenderAnnotations(e.pdfAnnotation),o.isImportedAnnotation=!0,o.updateDocumentEditedProperty(!0),this.isAddAnnotation||o.pdfViewer.fireImportSuccess(e.pdfAnnotation)}else{o.pdfViewer.fireImportStart(e),"Json"===t?n={fileName:e,action:"ImportAnnotations",elementId:o.pdfViewer.element.id,hashId:o.hashId,uniqueId:o.documentId}:(i||(e=btoa(e)),n={importedData:e=e.split(",")[1]?e.split(",")[1]:e.split(",")[0],action:"ImportAnnotations",elementId:o.pdfViewer.element.id,hashId:o.hashId,uniqueId:o.documentId}),o.jsonDocumentId&&(n.document=o.jsonDocumentId);var l=o.pdfViewer.serviceUrl+"/"+o.pdfViewer.serverActionSettings.importAnnotations;o.importAnnotationRequestHandler=new Dh(o.pdfViewer),o.importAnnotationRequestHandler.url=l,o.importAnnotationRequestHandler.mode=!0,o.importAnnotationRequestHandler.responseType="text",o.importAnnotationRequestHandler.send(n),o.importAnnotationRequestHandler.onSuccess=function(t){var i=t.data;if(i){if("object"!==typeof i)try{"object"!==typeof(i=JSON.parse(i))&&(o.onControlError(500,i,o.pdfViewer.serverActionSettings.importAnnotations),i=null)}catch(a){if(o.pdfViewer.fireImportFailed(e,o.pdfViewer.localeObj.getConstant("File not found")),S())this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_FileNotFound").then((function(e){o.openImportExportNotificationPopup(e)}));else o.openImportExportNotificationPopup(o.pdfViewer.localeObj.getConstant("File not found"));o.onControlError(500,i,o.pdfViewer.serverActionSettings.importAnnotations),i=null}if(i&&(o.pdfViewer.fireAjaxRequestSuccess(o.pdfViewer.serverActionSettings.importAnnotations,i),i.pdfAnnotation)){for(var n=0;n<Object.keys(i.pdfAnnotation).length;n++){var s=i.pdfAnnotation[n];o.updateModifiedDateToLocalDate(s,"freeTextAnnotation"),o.updateModifiedDateToLocalDate(s,"measureShapeAnnotation"),o.updateModifiedDateToLocalDate(s,"shapeAnnotation"),o.updateModifiedDateToLocalDate(s,"signatureAnnotation"),o.updateModifiedDateToLocalDate(s,"signatureInkAnnotation"),o.updateModifiedDateToLocalDate(s,"stampAnnotations"),o.updateModifiedDateToLocalDate(s,"stickyNotesAnnotation"),o.updateModifiedDateToLocalDate(s,"textMarkupAnnotation")}o.reRenderAnnotations(i.pdfAnnotation),o.isImportedAnnotation=!0,o.updateDocumentEditedProperty(!0),o.pdfViewer.fireImportSuccess(i.pdfAnnotation)}}},o.importAnnotationRequestHandler.onFailure=function(t){o.pdfViewer.fireImportFailed(e,t.statusText)},o.importAnnotationRequestHandler.onError=function(t){o.pdfViewer.fireImportFailed(e,t.statusText)}}},e.prototype.openImportExportNotificationPopup=function(e){this.pdfViewer.showNotificationDialog&&this.textLayer.createNotificationPopup(e)},e.prototype.reRenderAnnotations=function(e){if(e){this.isImportAction=!0;var t=0;this.isImportedAnnotation?this.importedAnnotation=this.combineImportedData(this.importedAnnotation,e):this.pageCount>0&&(this.importedAnnotation=e),this.isImportedAnnotation||(t=0);for(var i=0;i<this.pageCount;i++)if(e[parseInt(i.toString(),10)]){var n=[],o=window.sessionStorage.getItem(this.documentId+"_annotations_textMarkup"),s=window.sessionStorage.getItem(this.documentId+"_annotations_shape"),a=window.sessionStorage.getItem(this.documentId+"_annotations_shape_measure"),r=window.sessionStorage.getItem(this.documentId+"_annotations_stamp"),l=window.sessionStorage.getItem(this.documentId+"_annotations_sticky"),d=window.sessionStorage.getItem(this.documentId+"_annotations_freetext"),h=window.sessionStorage.getItem(this.documentId+"_annotations_sign"),p=window.sessionStorage.getItem(this.documentId+"_annotations_ink");if(this.isStorageExceed&&(o=this.annotationStorage[this.documentId+"_annotations_textMarkup"],s=this.annotationStorage[this.documentId+"_annotations_shape"],a=this.annotationStorage[this.documentId+"_annotations_shape_measure"],r=this.annotationStorage[this.documentId+"_annotations_stamp"],l=this.annotationStorage[this.documentId+"_annotations_sticky"],d=this.annotationStorage[this.documentId+"_annotations_freetext"],p=this.annotationStorage[this.documentId+"_annotations_ink"]),this.getElement("_annotationCanvas_"+i))if(this.drawPageAnnotations(e[parseInt(i.toString(),10)],i),this.isImportedAnnotation){for(var c=!1,u=0;u<this.annotationPageList.length;u++)this.annotationPageList[parseInt(u.toString(),10)]===i&&(c=!0);c&&(this.annotationPageList[parseInt(t.toString(),10)]=i,t+=1)}else this.annotationPageList[parseInt(t.toString(),10)]=i,t+=1;if(e[parseInt(i.toString(),10)].textMarkupAnnotation&&0!==e[parseInt(i.toString(),10)].textMarkupAnnotation.length){if(o){var f=JSON.parse(o);e[parseInt(i.toString(),10)].textMarkupAnnotation=this.checkAnnotationCollections(f,e[parseInt(i.toString(),10)].textMarkupAnnotation,i)}if(e[parseInt(i.toString(),10)].textMarkupAnnotation=this.checkAnnotationCommentsCollections(e[parseInt(i.toString(),10)].textMarkupAnnotation,i),n.textMarkupAnnotation=e[parseInt(i.toString(),10)].textMarkupAnnotation,0!==e[parseInt(i.toString(),10)].textMarkupAnnotation.length){this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(e[parseInt(i.toString(),10)].textMarkupAnnotation,i);for(u=0;u<e[parseInt(i.toString(),10)].textMarkupAnnotation.length;u++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.textMarkupAnnotationModule.updateTextMarkupAnnotationCollections(e[parseInt(i.toString(),10)].textMarkupAnnotation[parseInt(u.toString(),10)],i))}}if(e[parseInt(i.toString(),10)].shapeAnnotation&&0!==e[parseInt(i.toString(),10)].shapeAnnotation.length){if(s){f=JSON.parse(s);e[parseInt(i.toString(),10)].shapeAnnotation=this.checkAnnotationCollections(f,e[parseInt(i.toString(),10)].shapeAnnotation,i)}if(e[parseInt(i.toString(),10)].shapeAnnotation=this.checkAnnotationCommentsCollections(e[parseInt(i.toString(),10)].shapeAnnotation,i),n.shapeAnnotation=e[parseInt(i.toString(),10)].shapeAnnotation,0!==e[parseInt(i.toString(),10)].shapeAnnotation.length){this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(e[parseInt(i.toString(),10)].shapeAnnotation,i);for(u=0;u<e[parseInt(i.toString(),10)].shapeAnnotation.length;u++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.shapeAnnotationModule.updateShapeAnnotationCollections(e[parseInt(i.toString(),10)].shapeAnnotation[parseInt(u.toString(),10)],i))}}if(e[parseInt(i.toString(),10)].measureShapeAnnotation&&0!==e[parseInt(i.toString(),10)].measureShapeAnnotation.length){if(a){f=JSON.parse(a);e[parseInt(i.toString(),10)].measureShapeAnnotation=this.checkAnnotationCollections(f,e[parseInt(i.toString(),10)].measureShapeAnnotation,i)}if(e[parseInt(i.toString(),10)].measureShapeAnnotation=this.checkAnnotationCommentsCollections(e[parseInt(i.toString(),10)].measureShapeAnnotation,i),n.measureShapeAnnotation=e[parseInt(i.toString(),10)].measureShapeAnnotation,0!==e[parseInt(i.toString(),10)].measureShapeAnnotation.length){this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(e[parseInt(i.toString(),10)].measureShapeAnnotation,i);for(u=0;u<e[parseInt(i.toString(),10)].measureShapeAnnotation.length;u++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.measureAnnotationModule.updateMeasureAnnotationCollections(e[parseInt(i.toString(),10)].measureShapeAnnotation[parseInt(u.toString(),10)],i))}}if(e[parseInt(i.toString(),10)].stampAnnotations&&0!==e[parseInt(i.toString(),10)].stampAnnotations.length){if(r){f=JSON.parse(r);e[parseInt(i.toString(),10)].stampAnnotations=this.checkAnnotationCollections(f,e[parseInt(i.toString(),10)].stampAnnotations,i)}if(e[parseInt(i.toString(),10)].stampAnnotations=this.checkAnnotationCommentsCollections(e[parseInt(i.toString(),10)].stampAnnotations,i),n.stampAnnotations=e[parseInt(i.toString(),10)].stampAnnotations,0!==e[parseInt(i.toString(),10)].stampAnnotations.length){this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(e[parseInt(i.toString(),10)].stampAnnotations,i);for(u=0;u<e[parseInt(i.toString(),10)].stampAnnotations.length;u++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.stampAnnotationModule.updateStampAnnotationCollections(e[parseInt(i.toString(),10)].stampAnnotations[parseInt(u.toString(),10)],i))}}if(e[parseInt(i.toString(),10)].stickyNotesAnnotation&&0!==e[parseInt(i.toString(),10)].stickyNotesAnnotation.length){if(l){f=JSON.parse(l);e[parseInt(i.toString(),10)].stickyNotesAnnotation=this.checkAnnotationCollections(f,e[parseInt(i.toString(),10)].stickyNotesAnnotation,i)}if(e[parseInt(i.toString(),10)].stickyNotesAnnotation=this.checkAnnotationCommentsCollections(e[parseInt(i.toString(),10)].stickyNotesAnnotation,i),n.stickyNotesAnnotation=e[parseInt(i.toString(),10)].stickyNotesAnnotation,0!==e[parseInt(i.toString(),10)].stickyNotesAnnotation.length){this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(e[parseInt(i.toString(),10)].stickyNotesAnnotation,i);for(u=0;u<e[parseInt(i.toString(),10)].stickyNotesAnnotation.length;u++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateStickyNotesAnnotationCollections(e[parseInt(i.toString(),10)].stickyNotesAnnotation[parseInt(u.toString(),10)],i))}}if(e[parseInt(i.toString(),10)].freeTextAnnotation&&0!==e[parseInt(i.toString(),10)].freeTextAnnotation.length){if(d){f=JSON.parse(d);e[parseInt(i.toString(),10)].freeTextAnnotation=this.checkAnnotationCollections(f,e[parseInt(i.toString(),10)].freeTextAnnotation,i)}if(e[parseInt(i.toString(),10)].freeTextAnnotation=this.checkAnnotationCommentsCollections(e[parseInt(i.toString(),10)].freeTextAnnotation,i),n.freeTextAnnotation=e[parseInt(i.toString(),10)].freeTextAnnotation,0!==e[parseInt(i.toString(),10)].freeTextAnnotation.length){this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(e[parseInt(i.toString(),10)].freeTextAnnotation,i);for(u=0;u<e[parseInt(i.toString(),10)].freeTextAnnotation.length;u++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.freeTextAnnotationModule.updateFreeTextAnnotationCollections(e[parseInt(i.toString(),10)].freeTextAnnotation[parseInt(u.toString(),10)],i))}}if(e[parseInt(i.toString(),10)].signatureAnnotation&&0!==e[parseInt(i.toString(),10)].signatureAnnotation.length){if(h){f=JSON.parse(h);e[parseInt(i.toString(),10)].signatureAnnotation=this.checkSignatureCollections(f,e[parseInt(i.toString(),10)].signatureAnnotation,i)}if(n.signatureAnnotation=e[parseInt(i.toString(),10)].signatureAnnotation,0!==e[parseInt(i.toString(),10)].signatureAnnotation.length)for(u=0;u<e[parseInt(i.toString(),10)].signatureAnnotation.length;u++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.signatureModule.updateSignatureCollections(e[parseInt(i.toString(),10)].signatureAnnotation[parseInt(u.toString(),10)],i),!0)}if(e[parseInt(i.toString(),10)].signatureInkAnnotation&&0!==e[parseInt(i.toString(),10)].signatureInkAnnotation.length){if(p){f=JSON.parse(p);e[parseInt(i.toString(),10)].signatureInkAnnotation=this.checkAnnotationCollections(f,e[parseInt(i.toString(),10)].signatureInkAnnotation,i)}if(e[parseInt(i.toString(),10)].signatureInkAnnotation=this.checkAnnotationCommentsCollections(e[parseInt(i.toString(),10)].signatureInkAnnotation,i),n.signatureInkAnnotation=e[parseInt(i.toString(),10)].signatureInkAnnotation,0!==e[parseInt(i.toString(),10)].signatureInkAnnotation.length){this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(e[parseInt(i.toString(),10)].signatureInkAnnotation,i);for(u=0;u<e[parseInt(i.toString(),10)].signatureInkAnnotation.length;u++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.inkAnnotationModule.updateInkCollections(e[parseInt(i.toString(),10)].signatureInkAnnotation[parseInt(u.toString(),10)],i))}}this.updateImportedAnnotationsInDocumentCollections(n,i)}if(this.pageCount>0&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule&&!this.pdfViewer.annotationModule.stickyNotesAnnotationModule.isAnnotationRendered){var m=this.createAnnotationsCollection();m&&(this.documentAnnotationCollections=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationsInDocumentCollections(this.importedAnnotation,m))}}},e.prototype.updateImportedAnnotationsInDocumentCollections=function(e,t){if(this.documentAnnotationCollections){var i=this.documentAnnotationCollections[t];if(i){if(e.textMarkupAnnotation&&0!==e.textMarkupAnnotation.length)for(var n=0;n<e.textMarkupAnnotation.length;n++)i.textMarkupAnnotation.push(e.textMarkupAnnotation[parseInt(n.toString(),10)]);if(e.shapeAnnotation&&0!==e.shapeAnnotation.length)for(n=0;n<e.shapeAnnotation.length;n++)i.shapeAnnotation.push(e.shapeAnnotation[parseInt(n.toString(),10)]);if(e.measureShapeAnnotation&&0!==e.measureShapeAnnotation.length)for(n=0;n<e.measureShapeAnnotation.length;n++)i.measureShapeAnnotation.push(e.measureShapeAnnotation[parseInt(n.toString(),10)]);if(e.stampAnnotations&&0!==e.stampAnnotations.length)for(n=0;n<e.stampAnnotations.length;n++)i.stampAnnotations.push(e.stampAnnotations[parseInt(n.toString(),10)]);if(e.stickyNotesAnnotation&&0!==e.stickyNotesAnnotation.length)for(n=0;n<e.stickyNotesAnnotation.length;n++)i.stickyNotesAnnotation.push(e.stickyNotesAnnotation[parseInt(n.toString(),10)]);if(e.freeTextAnnotation&&0!==e.freeTextAnnotation.length)for(n=0;n<e.freeTextAnnotation.length;n++)i.freeTextAnnotation.push(e.freeTextAnnotation[parseInt(n.toString(),10)]);if(e.signatureAnnotation&&0!==e.signatureAnnotation.length)for(n=0;n<e.signatureAnnotation.length;n++)i.signatureAnnotation.push(e.signatureAnnotation[parseInt(n.toString(),10)]);if(e.signatureInkAnnotation&&0!==e.signatureInkAnnotation.length)for(n=0;n<e.signatureInkAnnotation.length;n++)i.signatureInkAnnotation.push(e.signatureInkAnnotation[parseInt(n.toString(),10)]);this.documentAnnotationCollections[parseInt(t.toString(),10)]=i}}},e.prototype.checkDocumentCollectionData=function(e,t){var i;if(t)i=t;else if(this.documentAnnotationCollections){var n=this.documentAnnotationCollections[e];n&&(i=qs(n))}if(i){var o,s=window.sessionStorage.getItem(this.documentId+"_annotations_textMarkup"),a=window.sessionStorage.getItem(this.documentId+"_annotations_shape"),r=window.sessionStorage.getItem(this.documentId+"_annotations_shape_measure"),l=window.sessionStorage.getItem(this.documentId+"_annotations_stamp"),d=window.sessionStorage.getItem(this.documentId+"_annotations_sticky"),h=window.sessionStorage.getItem(this.documentId+"_annotations_freetext"),p=window.sessionStorage.getItem(this.documentId+"_annotations_ink"),c=window.sessionStorage.getItem(this.documentId+"_annotations_sign");if(this.isStorageExceed&&(s=this.annotationStorage[this.documentId+"_annotations_textMarkup"],a=this.annotationStorage[this.documentId+"_annotations_shape"],r=this.annotationStorage[this.documentId+"_annotations_shape_measure"],l=this.annotationStorage[this.documentId+"_annotations_stamp"],d=this.annotationStorage[this.documentId+"_annotations_sticky"],h=this.annotationStorage[this.documentId+"_annotations_freetext"],p=this.annotationStorage[this.documentId+"_annotations_ink"],c=this.annotationStorage[this.documentId+"_annotations_sign"]),i.textMarkupAnnotation&&0!==i.textMarkupAnnotation.length)if(s)(o=JSON.parse(s))&&(i.textMarkupAnnotation=this.findImportedAnnotations(o,i.textMarkupAnnotation,e));if(i.shapeAnnotation&&0!==i.shapeAnnotation.length)if(a)(o=JSON.parse(a))&&(i.shapeAnnotation=this.findImportedAnnotations(o,i.shapeAnnotation,e));if(i.measureShapeAnnotation&&0!==i.measureShapeAnnotation.length)if(r)(o=JSON.parse(r))&&(i.measureShapeAnnotation=this.findImportedAnnotations(o,i.measureShapeAnnotation,e));if(i.stampAnnotations&&0!==i.stampAnnotations.length)if(l)(o=JSON.parse(l))&&(i.stampAnnotations=this.findImportedAnnotations(o,i.stampAnnotations,e));if(i.stickyNotesAnnotation&&0!==i.stickyNotesAnnotation.length)if(d)(o=JSON.parse(d))&&(i.stickyNotesAnnotation=this.findImportedAnnotations(o,i.stickyNotesAnnotation,e));if(i.freeTextAnnotation&&0!==i.freeTextAnnotation.length)if(h)(o=JSON.parse(h))&&(i.freeTextAnnotation=this.findImportedAnnotations(o,i.freeTextAnnotation,e));if(i.signatureInkAnnotation&&0!==i.signatureInkAnnotation.length)if(p)(o=JSON.parse(p))&&(i.signatureInkAnnotation=this.findImportedAnnotations(o,i.signatureInkAnnotation,e));if(i.signatureAnnotation&&0!==i.signatureAnnotation.length)if(c)(o=JSON.parse(p))&&(i.signatureAnnotation=this.findImportedAnnotations(o,i.signatureAnnotation,e));return i}},e.prototype.findImportedAnnotations=function(e,t,i){for(var n=null,o=0;o<e.length;o++)e[parseInt(o.toString(),10)].pageIndex===i&&(n=e[parseInt(o.toString(),10)].annotations);if(n)for(var s=0;s<n.length;s++)for(var a=0;a<t.length;a++)n[parseInt(s.toString(),10)].annotName===t[parseInt(a.toString(),10)].AnnotName&&(t.splice(a,1),a-=1);return n=null,t},e.prototype.drawPageAnnotations=function(e,t,i){if(i&&(e=e[parseInt(t.toString(),10)]),e){if(e.textMarkupAnnotation&&0!==e.textMarkupAnnotation.length){var n=window.sessionStorage.getItem(this.documentId+"_annotations_textMarkup");if(this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_textMarkup"]),n)(o=JSON.parse(n))&&(e.textMarkupAnnotation=this.checkAnnotationCollections(o,e.textMarkupAnnotation,t));e.textMarkupAnnotation=this.checkAnnotationCommentsCollections(e.textMarkupAnnotation,t),0!==e.textMarkupAnnotation.length&&this.pdfViewer.annotationModule.renderAnnotations(t,null,null,e.textMarkupAnnotation,null,!0)}if(e.shapeAnnotation&&0!==e.shapeAnnotation.length){n=window.sessionStorage.getItem(this.documentId+"_annotations_shape");if(this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_shape"]),n){var o=JSON.parse(n);e.shapeAnnotation=this.checkAnnotationCollections(o,e.shapeAnnotation,t)}e.shapeAnnotation=this.checkAnnotationCommentsCollections(e.shapeAnnotation,t),0!==e.shapeAnnotation.length&&this.pdfViewer.annotationModule.renderAnnotations(t,e.shapeAnnotation,null,null,null,!0)}if(e.measureShapeAnnotation&&0!==e.measureShapeAnnotation.length){n=window.sessionStorage.getItem(this.documentId+"_annotations_shape_measure");if(this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_shape_measure"]),n){o=JSON.parse(n);e.measureShapeAnnotation=this.checkAnnotationCollections(o,e.measureShapeAnnotation,t)}e.measureShapeAnnotation=this.checkAnnotationCommentsCollections(e.measureShapeAnnotation,t),0!==e.measureShapeAnnotation.length&&this.pdfViewer.annotationModule.renderAnnotations(t,null,e.measureShapeAnnotation,null,null,!0)}if(e.stampAnnotations&&0!==e.stampAnnotations.length){n=window.sessionStorage.getItem(this.documentId+"_annotations_stamp");if(this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_stamp"]),n){o=JSON.parse(n);e.stampAnnotations=this.checkAnnotationCollections(o,e.stampAnnotations,t)}e.stampAnnotations=this.checkAnnotationCommentsCollections(e.stampAnnotations,t),0!==e.stampAnnotations.length&&this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(e.stampAnnotations,t,null,!0)}if(e.stickyNotesAnnotation&&0!==e.stickyNotesAnnotation.length){n=window.sessionStorage.getItem(this.documentId+"_annotations_sticky");if(this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_sticky"]),n){o=JSON.parse(n);e.stickyNotesAnnotation=this.checkAnnotationCollections(o,e.stickyNotesAnnotation,t)}e.stickyNotesAnnotation=this.checkAnnotationCommentsCollections(e.stickyNotesAnnotation,t),0!==e.stickyNotesAnnotation.length&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(e.stickyNotesAnnotation,t)}if(e.freeTextAnnotation&&0!==e.freeTextAnnotation.length){n=window.sessionStorage.getItem(this.documentId+"_annotations_freetext");if(this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_freetext"]),n){o=JSON.parse(n);e.freeTextAnnotation=this.checkAnnotationCollections(o,e.freeTextAnnotation,t)}e.freeTextAnnotation=this.checkAnnotationCommentsCollections(e.freeTextAnnotation,t),0!==e.freeTextAnnotation.length&&this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(e.freeTextAnnotation,t,!0)}if(e.signatureAnnotation&&0!==e.signatureAnnotation.length){n=window.sessionStorage.getItem(this.documentId+"_annotations_sign");(o=JSON.parse(n))&&(e.signatureAnnotation=this.checkSignatureCollections(o,e.signatureAnnotation,t)),this.signatureModule.renderExistingSignature(e.signatureAnnotation,t,!0)}if(e.signatureInkAnnotation&&0!==e.signatureInkAnnotation.length){n=window.sessionStorage.getItem(this.documentId+"_annotations_ink");if(this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_ink"]),n){o=JSON.parse(n);e.signatureInkAnnotation=this.checkAnnotationCollections(o,e.signatureInkAnnotation,t)}e.signatureInkAnnotation=this.checkAnnotationCommentsCollections(e.signatureInkAnnotation,t),0!==e.signatureInkAnnotation.length&&this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(e.signatureInkAnnotation,t,!0)}}},e.prototype.checkSignatureCollections=function(e,t,i){for(var n=null,o=0;o<e.length;o++)e[parseInt(o.toString(),10)].pageIndex===i&&(n=e[parseInt(o.toString(),10)].annotations);if(n)for(var s=0;s<n.length;s++)for(var a=0;a<t.length;a++)n[parseInt(s.toString(),10)].signatureName===t[parseInt(a.toString(),10)].SignatureName&&(t.splice(a,1),a-=1);return n=null,t},e.prototype.checkAnnotationCollections=function(e,t,i){for(var n=null,o=0;o<e.length;o++)e[parseInt(o.toString(),10)].pageIndex===i&&(n=e[parseInt(o.toString(),10)].annotations);if(n)for(var s=0;s<n.length;s++)for(var a=0;a<t.length;a++)n[parseInt(s.toString(),10)].annotName===t[parseInt(a.toString(),10)].AnnotName&&(t.splice(a,1),a-=1);return n=null,t},e.prototype.checkAnnotationCommentsCollections=function(e,t){if(this.annotationComments){var i=this.annotationComments[t];if(i=this.selectAnnotationCollections(i))for(var n=0;n<i.length;n++)for(var o=0;o<e.length;o++)i[parseInt(n.toString(),10)].AnnotName===e[parseInt(o.toString(),10)].AnnotName&&(e.splice(o,1),o-=1);i=null}return e},e.prototype.selectAnnotationCollections=function(e){var t=[];if(e){if(e.textMarkupAnnotation&&0!==e.textMarkupAnnotation.length)for(var i=0;i<e.textMarkupAnnotation.length;i++)t.push(e.textMarkupAnnotation[parseInt(i.toString(),10)]);if(e.shapeAnnotation&&0!==e.shapeAnnotation.length)for(i=0;i<e.shapeAnnotation.length;i++)t.push(e.shapeAnnotation[parseInt(i.toString(),10)]);if(e.measureShapeAnnotation&&0!==e.measureShapeAnnotation.length)for(i=0;i<e.measureShapeAnnotation.length;i++)t.push(e.measureShapeAnnotation[parseInt(i.toString(),10)]);if(e.stampAnnotations&&0!==e.stampAnnotations.length)for(i=0;i<e.stampAnnotations.length;i++)t.push(e.stampAnnotations[parseInt(i.toString(),10)]);if(e.stickyNotesAnnotation&&0!==e.stickyNotesAnnotation.length)for(i=0;i<e.stickyNotesAnnotation.length;i++)t.push(e.stickyNotesAnnotation[parseInt(i.toString(),10)]);if(e.freeTextAnnotation&&0!==e.freeTextAnnotation.length)for(i=0;i<e.freeTextAnnotation.length;i++)t.push(e.freeTextAnnotation[parseInt(i.toString(),10)]);if(e.signatureInkAnnotation&&0!==e.signatureInkAnnotation.length)for(i=0;i<e.signatureInkAnnotation.length;i++)t.push(e.signatureInkAnnotation[parseInt(i.toString(),10)])}return t},e.prototype.saveImportedAnnotations=function(){var e=window.sessionStorage.getItem(this.documentId+"_annotations_textMarkup"),t=window.sessionStorage.getItem(this.documentId+"_annotations_shape"),i=window.sessionStorage.getItem(this.documentId+"_annotations_shape_measure"),n=window.sessionStorage.getItem(this.documentId+"_annotations_stamp"),o=window.sessionStorage.getItem(this.documentId+"_annotations_sticky"),s=window.sessionStorage.getItem(this.documentId+"_annotations_freetext"),a=window.sessionStorage.getItem(this.documentId+"_annotations_ink"),r=window.sessionStorage.getItem(this.documentId+"_annotations_sign");if(this.isStorageExceed&&(e=this.annotationStorage[this.documentId+"_annotations_textMarkup"],t=this.annotationStorage[this.documentId+"_annotations_shape"],i=this.annotationStorage[this.documentId+"_annotations_shape_measure"],n=this.annotationStorage[this.documentId+"_annotations_stamp"],o=this.annotationStorage[this.documentId+"_annotations_sticky"],s=this.annotationStorage[this.documentId+"_annotations_freetext"],a=this.annotationStorage[this.documentId+"_annotations_ink"],r=this.annotationStorage[this.documentId+"_annotations_sign"]),this.downloadCollections={textMarkupObject:e,shapeObject:t,measureShapeObject:i,stampObject:n,stickyObject:o,freeTextObject:s,inkObject:a,signatureObject:r},this.documentAnnotationCollections)for(var l=0;l<this.pageCount;l++)if(this.documentAnnotationCollections[parseInt(l.toString(),10)]){var d=qs(this.documentAnnotationCollections[l]);d=this.checkDocumentCollectionData(l,d),this.savePageAnnotations(d,l)}},e.prototype.savePageAnnotations=function(e,t){if(0!==e.textMarkupAnnotation.length)for(var i=0;i<e.textMarkupAnnotation.length;i++)this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveImportedTextMarkupAnnotations(e.textMarkupAnnotation[parseInt(i.toString(),10)],t);if(0!==e.shapeAnnotation.length)for(i=0;i<e.shapeAnnotation.length;i++)this.pdfViewer.annotationModule.shapeAnnotationModule.saveImportedShapeAnnotations(e.shapeAnnotation[parseInt(i.toString(),10)],t);if(0!==e.measureShapeAnnotation.length)for(i=0;i<e.measureShapeAnnotation.length;i++)this.pdfViewer.annotationModule.measureAnnotationModule.saveImportedMeasureAnnotations(e.measureShapeAnnotation[parseInt(i.toString(),10)],t);if(0!==e.stampAnnotations.length)for(i=0;i<e.stampAnnotations.length;i++)this.pdfViewer.annotationModule.stampAnnotationModule.saveImportedStampAnnotations(e.stampAnnotations[parseInt(i.toString(),10)],t);if(0!==e.stickyNotesAnnotation.length)for(i=0;i<e.stickyNotesAnnotation.length;i++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveImportedStickyNotesAnnotations(e.stickyNotesAnnotation[parseInt(i.toString(),10)],t);if(0!==e.freeTextAnnotation.length)for(i=0;i<e.freeTextAnnotation.length;i++)this.pdfViewer.annotationModule.freeTextAnnotationModule.saveImportedFreeTextAnnotations(e.freeTextAnnotation[parseInt(i.toString(),10)],t);if(0!==e.signatureInkAnnotation.length)for(i=0;i<e.signatureInkAnnotation.length;i++)this.pdfViewer.annotationModule.inkAnnotationModule.saveImportedInkAnnotation(e.signatureInkAnnotation[parseInt(i.toString(),10)],t)},e.prototype.updateDocumentAnnotationCollections=function(){window.sessionStorage.removeItem(this.documentId+"_annotations_textMarkup"),window.sessionStorage.removeItem(this.documentId+"_annotations_shape"),window.sessionStorage.removeItem(this.documentId+"_annotations_shape_measure"),window.sessionStorage.removeItem(this.documentId+"_annotations_stamp"),window.sessionStorage.removeItem(this.documentId+"_annotations_sticky"),window.sessionStorage.removeItem(this.documentId+"_annotations_freetext"),window.sessionStorage.removeItem(this.documentId+"_annotations_ink"),this.downloadCollections&&(this.isStorageExceed?(this.annotationStorage[this.documentId+"_annotations_textMarkup"]=this.downloadCollections.textMarkupObject,this.annotationStorage[this.documentId+"_annotations_shape"]=this.downloadCollections.shapeObject,this.annotationStorage[this.documentId+"_annotations_shape_measure"]=this.downloadCollections.measureShapeObject,this.annotationStorage[this.documentId+"_annotations_stamp"]=this.downloadCollections.stampObject,this.annotationStorage[this.documentId+"_annotations_sticky"]=this.downloadCollections.stickyObject,this.annotationStorage[this.documentId+"_annotations_freetext"]=this.downloadCollections.freeTextObject,this.annotationStorage[this.documentId+"_annotations_ink"]=this.downloadCollections.inkObject):(this.downloadCollections.textMarkupObject&&window.sessionStorage.setItem(this.documentId+"_annotations_textMarkup",this.downloadCollections.textMarkupObject),this.downloadCollections.shapeObject&&window.sessionStorage.setItem(this.documentId+"_annotations_shape",this.downloadCollections.shapeObject),this.downloadCollections.measureShapeObject&&window.sessionStorage.setItem(this.documentId+"_annotations_shape_measure",this.downloadCollections.measureShapeObject),this.downloadCollections.stampObject&&window.sessionStorage.setItem(this.documentId+"_annotations_stamp",this.downloadCollections.stampObject),this.downloadCollections.stickyObject&&window.sessionStorage.setItem(this.documentId+"_annotations_sticky",this.downloadCollections.stickyObject),this.downloadCollections.freeTextObject&&window.sessionStorage.setItem(this.documentId+"_annotations_freetext",this.downloadCollections.freeTextObject),this.downloadCollections.inkObject&&window.sessionStorage.setItem(this.documentId+"_annotations_ink",this.downloadCollections.inkObject)))},e.prototype.createAnnotationJsonData=function(){var e,t,i,n,o,s,a,r,l={};if(this.saveImportedAnnotations(),this.isTextMarkupAnnotationModule()&&(this.isJsonExported=!0,e=this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveTextMarkupAnnotations()),this.isShapeAnnotationModule()&&(this.isJsonExported=!0,t=this.pdfViewer.annotationModule.shapeAnnotationModule.saveShapeAnnotations()),this.isCalibrateAnnotationModule()&&(this.isJsonExported=!0,i=this.pdfViewer.annotationModule.measureAnnotationModule.saveMeasureShapeAnnotations()),this.isStampAnnotationModule()&&(n=this.pdfViewer.annotationModule.stampAnnotationModule.saveStampAnnotations()),this.isCommentAnnotationModule()&&(o=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveStickyAnnotations()),this.isFreeTextAnnotationModule()&&(s=this.pdfViewer.annotationModule.freeTextAnnotationModule.saveFreeTextAnnotations()),this.isInkAnnotationModule()&&(r=this.pdfViewer.annotationModule.inkAnnotationModule.saveInkSignature()),this.pdfViewer.isSignatureEditable)a=this.signatureModule.saveSignature();else{for(var d=new Array,h=0;h<this.pageCount;h++)d[parseInt(h.toString(),10)]=[];a=JSON.stringify(d)}for(var p=0;p<this.pageCount;p++){var c={textMarkupAnnotation:JSON.parse(e)[parseInt(p.toString(),10)],shapeAnnotation:JSON.parse(t)[parseInt(p.toString(),10)],measureShapeAnnotation:JSON.parse(i)[parseInt(p.toString(),10)],stampAnnotations:JSON.parse(n)[parseInt(p.toString(),10)],stickyNotesAnnotation:JSON.parse(o)[parseInt(p.toString(),10)],freeTextAnnotation:JSON.parse(s)[parseInt(p.toString(),10)],signatureAnnotation:JSON.parse(a)[parseInt(p.toString(),10)],signatureInkAnnotation:JSON.parse(r)[parseInt(p.toString(),10)]};l[parseInt(p.toString(),10)]=c}return JSON.stringify(l)},e.prototype.combineImportedData=function(e,t){for(var i=0;i<this.pageCount;i++)if(t[parseInt(i.toString(),10)])if(e[parseInt(i.toString(),10)])t[parseInt(i.toString(),10)].textMarkupAnnotation&&0!==t[parseInt(i.toString(),10)].textMarkupAnnotation.length&&(e[parseInt(i.toString(),10)].textMarkupAnnotation?(t[parseInt(i.toString(),10)].textMarkupAnnotation=this.checkImportedData(e[parseInt(i.toString(),10)].textMarkupAnnotation,t[parseInt(i.toString(),10)].textMarkupAnnotation,i),0!==t[parseInt(i.toString(),10)].textMarkupAnnotation.length&&(e[parseInt(i.toString(),10)].textMarkupAnnotation=e[parseInt(i.toString(),10)].textMarkupAnnotation.concat(t[parseInt(i.toString(),10)].textMarkupAnnotation))):e[parseInt(i.toString(),10)].textMarkupAnnotation=t[parseInt(i.toString(),10)].textMarkupAnnotation),t[parseInt(i.toString(),10)].shapeAnnotation&&0!==t[parseInt(i.toString(),10)].shapeAnnotation.length&&(e[parseInt(i.toString(),10)].shapeAnnotation?(t[parseInt(i.toString(),10)].shapeAnnotation=this.checkImportedData(e[parseInt(i.toString(),10)].shapeAnnotation,t[parseInt(i.toString(),10)].shapeAnnotation,i),0!==t[parseInt(i.toString(),10)].shapeAnnotation.length&&(e[parseInt(i.toString(),10)].shapeAnnotation=e[parseInt(i.toString(),10)].shapeAnnotation.concat(t[parseInt(i.toString(),10)].shapeAnnotation))):e[parseInt(i.toString(),10)].shapeAnnotation=t[parseInt(i.toString(),10)].shapeAnnotation),t[parseInt(i.toString(),10)].measureShapeAnnotation&&0!==t[parseInt(i.toString(),10)].measureShapeAnnotation.length&&(e[parseInt(i.toString(),10)].measureShapeAnnotation?(t[parseInt(i.toString(),10)].measureShapeAnnotation=this.checkImportedData(e[parseInt(i.toString(),10)].measureShapeAnnotation,t[parseInt(i.toString(),10)].measureShapeAnnotation,i),0!==t[parseInt(i.toString(),10)].measureShapeAnnotation.length&&(e[parseInt(i.toString(),10)].measureShapeAnnotation=e[parseInt(i.toString(),10)].measureShapeAnnotation.concat(t[parseInt(i.toString(),10)].measureShapeAnnotation))):e[parseInt(i.toString(),10)].measureShapeAnnotation=t[parseInt(i.toString(),10)].measureShapeAnnotation),t[parseInt(i.toString(),10)].stampAnnotations&&0!==t[parseInt(i.toString(),10)].stampAnnotations.length&&(e[parseInt(i.toString(),10)].stampAnnotations?(t[parseInt(i.toString(),10)].stampAnnotations=this.checkImportedData(e[parseInt(i.toString(),10)].stampAnnotations,t[parseInt(i.toString(),10)].stampAnnotations,i),0!==t[parseInt(i.toString(),10)].stampAnnotations.length&&(e[parseInt(i.toString(),10)].stampAnnotations=e[parseInt(i.toString(),10)].stampAnnotations.concat(t[parseInt(i.toString(),10)].stampAnnotations))):e[parseInt(i.toString(),10)].stampAnnotations=t[parseInt(i.toString(),10)].stampAnnotations),t[parseInt(i.toString(),10)].stickyNotesAnnotation&&0!==t[parseInt(i.toString(),10)].stickyNotesAnnotation.length&&(e[parseInt(i.toString(),10)].stickyNotesAnnotation?(t[parseInt(i.toString(),10)].stickyNotesAnnotation=this.checkImportedData(e[parseInt(i.toString(),10)].stickyNotesAnnotation,t[parseInt(i.toString(),10)].stickyNotesAnnotation,i),0!==t[parseInt(i.toString(),10)].stickyNotesAnnotation.length&&(e[parseInt(i.toString(),10)].stickyNotesAnnotation=e[parseInt(i.toString(),10)].stickyNotesAnnotation.concat(t[parseInt(i.toString(),10)].stickyNotesAnnotation))):e[parseInt(i.toString(),10)].stickyNotesAnnotation=t[parseInt(i.toString(),10)].stickyNotesAnnotation),t[parseInt(i.toString(),10)].freeTextAnnotation&&0!==t[parseInt(i.toString(),10)].freeTextAnnotation.length&&(e[parseInt(i.toString(),10)].freeTextAnnotation?(t[parseInt(i.toString(),10)].freeTextAnnotation=this.checkImportedData(e[parseInt(i.toString(),10)].freeTextAnnotation,t[parseInt(i.toString(),10)].freeTextAnnotation,i),0!==t[parseInt(i.toString(),10)].freeTextAnnotation.length&&(e[parseInt(i.toString(),10)].freeTextAnnotation=e[parseInt(i.toString(),10)].freeTextAnnotation.concat(t[parseInt(i.toString(),10)].freeTextAnnotation))):e[parseInt(i.toString(),10)].freeTextAnnotation=t[parseInt(i.toString(),10)].freeTextAnnotation),t[parseInt(i.toString(),10)].signatureInkAnnotation&&0!==t[parseInt(i.toString(),10)].signatureInkAnnotation.length&&(e[parseInt(i.toString(),10)].signatureInkAnnotation?(t[parseInt(i.toString(),10)].signatureInkAnnotation=this.checkImportedData(e[parseInt(i.toString(),10)].signatureInkAnnotation,t[parseInt(i.toString(),10)].signatureInkAnnotation,i),0!==t[parseInt(i.toString(),10)].signatureInkAnnotation.length&&(e[parseInt(i.toString(),10)].signatureInkAnnotation=e[parseInt(i.toString(),10)].signatureInkAnnotation.concat(t[parseInt(i.toString(),10)].signatureInkAnnotation))):e[parseInt(i.toString(),10)].signatureInkAnnotation=t[parseInt(i.toString(),10)].signatureInkAnnotation);else{var n={textMarkupAnnotation:t[parseInt(i.toString(),10)].textMarkupAnnotation,shapeAnnotation:t[parseInt(i.toString(),10)].shapeAnnotation,measureShapeAnnotation:t[parseInt(i.toString(),10)].measureShapeAnnotation,stampAnnotations:t[parseInt(i.toString(),10)].stampAnnotations,stickyNotesAnnotation:t[parseInt(i.toString(),10)].stickyNotesAnnotation,freeTextAnnotation:t[parseInt(i.toString(),10)].freeTextAnnotation,signatureInkAnnotation:t[parseInt(i.toString(),10)].signatureInkAnnotation};e[parseInt(i.toString(),10)]=n}return e},e.prototype.updateExportItem=function(){var e=window.sessionStorage.getItem(this.documentId+"_annotations_shape"),t=window.sessionStorage.getItem(this.documentId+"_annotations_shape_measure"),i=window.sessionStorage.getItem(this.documentId+"_annotations_stamp"),n=window.sessionStorage.getItem(this.documentId+"_annotations_sticky"),o=window.sessionStorage.getItem(this.documentId+"_annotations_textMarkup"),s=window.sessionStorage.getItem(this.documentId+"_annotations_freetext"),a=!1,r=window.sessionStorage.getItem(this.documentId+"_annotations_ink");this.pdfViewer.isSignatureEditable&&(window.sessionStorage.getItem(this.documentId+"_annotations_sign")&&(a=!0));return!!(e||t||i||n||o||s||this.isImportAction||this.isStorageExceed||a||r)},e.prototype.isFreeTextAnnotation=function(e){var t=!1;return e&&e.length>0&&(t=e.some((function(e){return"FreeText"===e.shapeAnnotationType&&"Text Box"===e.subject}))),t},e.prototype.checkImportedData=function(e,t,i){for(var n=0;n<e.length;n++)for(var o=0;o<t.length;o++)if(e[parseInt(n.toString(),10)].AnnotName===t[parseInt(o.toString(),10)].AnnotName){for(var s=this.pdfViewer.annotationCollection.length,a=0;a<s;a++)if(this.pdfViewer.annotationCollection[parseInt(a.toString(),10)].annotationId===t[parseInt(o.toString(),10)].AnnotName){this.pdfViewer.annotationCollection[parseInt(a.toString(),10)].comments=this.pdfViewer.annotationModule.getAnnotationComments(t[parseInt(o.toString(),10)].Comments,t[parseInt(o.toString(),10)],t[parseInt(o.toString(),10)].Author),this.pdfViewer.annotationCollection[parseInt(a.toString(),10)].review={state:t[parseInt(o.toString(),10)].State,stateModel:t[parseInt(o.toString(),10)].StateModel,modifiedDate:t[parseInt(o.toString(),10)].ModifiedDate,author:t[parseInt(o.toString(),10)].Author},this.pdfViewer.annotationCollection[parseInt(a.toString(),10)].note=t[parseInt(o.toString(),10)].Note;var r=this.pdfViewer.annotationCollection[parseInt(a.toString(),10)];"shape"===e[parseInt(n.toString(),10)].AnnotType&&this.pdfViewer.annotationModule.shapeAnnotationModule?(this.documentAnnotationCollections[parseInt(i.toString(),10)].shapeAnnotation[parseInt(n.toString(),10)]=t[parseInt(o.toString(),10)],this.updateAnnotationsInSessionStorage(t[parseInt(o.toString(),10)],r,"_annotations_shape")):"textMarkup"===e[parseInt(n.toString(),10)].AnnotType&&this.pdfViewer.annotationModule.textMarkupAnnotationModule?(this.documentAnnotationCollections[parseInt(i.toString(),10)].textMarkupAnnotation[parseInt(n.toString(),10)]=t[parseInt(o.toString(),10)],this.updateAnnotationsInSessionStorage(t[parseInt(o.toString(),10)],r,"_annotations_textMarkup")):"shape_measure"===e[parseInt(n.toString(),10)].AnnotType&&this.pdfViewer.annotationModule.measureAnnotationModule?(this.documentAnnotationCollections[parseInt(i.toString(),10)].measureShapeAnnotation[parseInt(n.toString(),10)]=t[parseInt(o.toString(),10)],this.updateAnnotationsInSessionStorage(t[parseInt(o.toString(),10)],r,"_annotations_shape_measure")):"stamp"===e[parseInt(n.toString(),10)].AnnotType&&this.pdfViewer.annotationModule.stampAnnotationModule?(this.documentAnnotationCollections[parseInt(i.toString(),10)].stampAnnotations[parseInt(n.toString(),10)]=t[parseInt(o.toString(),10)],this.updateAnnotationsInSessionStorage(t[parseInt(o.toString(),10)],r,"_annotations_stamp")):"freeText"===e[parseInt(n.toString(),10)].AnnotType&&this.pdfViewer.annotationModule.freeTextAnnotationModule?(this.documentAnnotationCollections[parseInt(i.toString(),10)].freeTextAnnotation[parseInt(n.toString(),10)]=t[parseInt(o.toString(),10)],this.updateAnnotationsInSessionStorage(t[parseInt(o.toString(),10)],r,"_annotations_freetext")):"ink"===e[parseInt(n.toString(),10)].AnnotType&&this.pdfViewer.annotationModule.inkAnnotationModule?(this.documentAnnotationCollections[parseInt(i.toString(),10)].signatureInkAnnotation[parseInt(n.toString(),10)]=t[parseInt(o.toString(),10)],this.updateAnnotationsInSessionStorage(t[parseInt(o.toString(),10)],r,"_annotations_ink")):"sticky"===e[parseInt(n.toString(),10)].AnnotType&&(this.documentAnnotationCollections[parseInt(i.toString(),10)].stickyNotesAnnotation[parseInt(n.toString(),10)]=t[parseInt(o.toString(),10)],this.updateAnnotationsInSessionStorage(t[parseInt(o.toString(),10)],r,"_annotations_sticky"));break}this.pdfViewer.annotationModule.stickyNotesAnnotationModule.createCommentControlPanel(t[parseInt(o.toString(),10)],i+1,null,null,!0),t.splice(o,1),o-=1}if(this.annotationComments){var l=this.annotationComments[i];if(l=this.selectAnnotationCollections(l))for(n=0;n<l.length;n++)for(o=0;o<t.length;o++)l[parseInt(n.toString(),10)].AnnotName===t[parseInt(o.toString(),10)].AnnotName&&(t.splice(o,1),o-=1)}return t},e.prototype.updateAnnotationsInSessionStorage=function(e,t,i){var n=window.sessionStorage.getItem(this.documentId+i),o=JSON.parse(n);if(o){for(var s=0;s<o.length;s++)if(o[parseInt(s.toString(),10)].annotations)for(var a=0;a<o[parseInt(s.toString(),10)].annotations.length;a++)if(o[parseInt(s.toString(),10)].annotations[parseInt(a.toString(),10)].annotName===e.AnnotName){o[parseInt(s.toString(),10)].annotations[parseInt(a.toString(),10)].comments=t.comments,o[parseInt(s.toString(),10)].annotations[parseInt(a.toString(),10)].review=t.review,o[parseInt(s.toString(),10)].annotations[parseInt(a.toString(),10)].note=t.note;break}window.sessionStorage.setItem(this.documentId+i,JSON.stringify(o))}},e.prototype.checkAnnotationWidth=function(e){for(var t,i,n,o,s=0;s<e.length;s++)t?(t>e[parseInt(s.toString(),10)].x?t=e[parseInt(s.toString(),10)].x:i<e[parseInt(s.toString(),10)].x&&(i=e[parseInt(s.toString(),10)].x),n>e[parseInt(s.toString(),10)].y?n=e[parseInt(s.toString(),10)].y:o<e[parseInt(s.toString(),10)].y&&(o=e[parseInt(s.toString(),10)].y)):(t=e[parseInt(s.toString(),10)].x,i=e[parseInt(s.toString(),10)].x,n=e[parseInt(s.toString(),10)].y,o=e[parseInt(s.toString(),10)].y);return{width:i-t,height:o-n}},e.prototype.deleteAnnotations=function(){if(this.pdfViewer.annotationModule){this.pdfViewer.annotations=[],this.pdfViewer.zIndexTable=[],this.pdfViewer.annotationCollection=[],this.pdfViewer.signatureCollection=[];var e=this.createAnnotationsCollection();this.annotationComments=e,this.documentAnnotationCollections=e,this.annotationRenderredList=[],window.sessionStorage.removeItem(this.documentId+"_annotations_shape"),window.sessionStorage.removeItem(this.documentId+"_annotations_shape_measure"),window.sessionStorage.removeItem(this.documentId+"_annotations_stamp"),window.sessionStorage.removeItem(this.documentId+"_annotations_sticky"),window.sessionStorage.removeItem(this.documentId+"_annotations_textMarkup"),window.sessionStorage.removeItem(this.documentId+"_annotations_freetext"),window.sessionStorage.removeItem(this.documentId+"_annotations_sign"),window.sessionStorage.removeItem(this.documentId+"_annotations_ink");for(var t=0;t<this.pageCount;t++){this.pdfViewer.annotationModule.renderAnnotations(t,null,null,null),this.pdfViewer.renderDrawing(void 0,t),this.pdfViewer.clearSelection(t);var i=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+(t+1));i&&i.remove();var n=document.getElementById(this.pdfViewer.element.id+"_accordionContentContainer");n&&0===n.childElementCount&&(n.style.display="none",document.getElementById(this.pdfViewer.element.id+"_commentsPanelText")&&(this.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export Annotations")],!1),document.getElementById(this.pdfViewer.element.id+"_commentsPanelText").style.display="block"))}this.isImportedAnnotation=!1,this.isImportAction=!1,this.importedAnnotation=[],this.annotationPageList=[],this.pdfViewer.annotationModule.freeTextAnnotationModule.freeTextPageNumbers=[],this.pdfViewer.annotationModule.stampAnnotationModule.stampPageNumber=[],this.pdfViewer.annotation.inkAnnotationModule.inkAnnotationindex=[],this.isAnnotationCollectionRemoved=!0}},e.prototype.createAnnotationsCollection=function(e,t){var i=[];if(t){o={textMarkupAnnotation:[],shapeAnnotation:[],measureShapeAnnotation:[],stampAnnotations:[],stickyNotesAnnotation:[],freeTextAnnotation:[],signatureAnnotation:[],signatureInkAnnotation:[]};(i={})[parseInt(e.toString(),10)]=o}else for(var n=0;n<this.pageCount;n++){var o={textMarkupAnnotation:[],shapeAnnotation:[],measureShapeAnnotation:[],stampAnnotations:[],stickyNotesAnnotation:[],freeTextAnnotation:[],signatureAnnotation:[],signatureInkAnnotation:[]};i.push(o)}return i},e.prototype.addAnnotation=function(e){var t,i={};if(e){var n=!1,o=1;e.shapeAnnotationType||e.author?(n=!0,t=this.createAnnotationsCollection(e.pageNumber,!0)):e.length?(o=e.length,t=this.createAnnotationsCollection()):(n=!0,t=this.createAnnotationsCollection(e.pageNumber,!0));for(var s=0;s<o;s++){var a=void 0;a=n?e:e[parseInt(s.toString(),10)];var r={};if(r.ShapeAnnotationType=a.shapeAnnotationType,r.AnnotationAddMode=a.annotationAddMode,r.Author=a.author,r.AnnotationSelectorSettings=a.annotationSelectorSettings,r.AnnotationSettings=a.annotationSettings,r.PageNumber=a.pageNumber,r.ModifiedDate=a.modifiedDate,r.Subject=a.subject,r.Note=a.note,r.AnnotName=a.annotationId,r.IsCommentLock=a.isCommentLock,r.Comments=a.comments,a.comments&&a.comments.length>0){for(var l=[],d=0;d<a.comments.length;d++)l.push(this.updateComments(a,a.comments[parseInt(d.toString(),10)]));r.Comments=l}if(a.review&&(r.State=a.review.state,r.StateModel=a.review.stateModel),r.CustomData=a.customData,r.Opacity=a.opacity,"textMarkup"===a.shapeAnnotationType){if(r.AnnotType="textMarkup",r.Color=a.color,r.IsMultiSelect=a.isMultiSelect,r.TextMarkupAnnotationType=a.textMarkupAnnotationType,r.TextMarkupContent=a.textMarkupContent,r.TextMarkupStartIndex=a.textMarkupStartIndex,r.TextMarkupEndIndex=a.textMarkupEndIndex,a.rect&&(r.Rect=this.convertBounds(a.rect,!0)),a.bounds&&a.bounds.length>=1){var h=new Array;for(d=0;d<a.bounds.length;d++)h.push(this.convertBounds(a.bounds[parseInt(d.toString(),10)]));r.Bounds=h}t[a.pageNumber].textMarkupAnnotation.push(r)}else if("sticky"===a.shapeAnnotationType)r.AnnotType="sticky",r.Icon="Comment",r.Bounds=this.convertBounds(a.bounds),r.StrokeColor=a.strokeColor,r.Color=a.color,t[a.pageNumber].stickyNotesAnnotation.push(r);else if("FreeText"===a.shapeAnnotationType)r.AnnotType="freeText",r.Name=a.annotationId,r.MarkupText=a.dynamicText,r.Text=a.dynamicText,r.Note=a.dynamicText,r.TextAlign=a.textAlign,r.Thickness=a.thicknes,r.StrokeColor=a.strokeColor,r.FillColor=a.fillColor,r.FontColor=a.fontColor,r.FontSize=a.fontSize,r.FontFamily=a.fontFamily,r.Rotate=a.rotateAngle,r.Bounds=this.convertBounds(a.bounds),r.Font={Name:a.fontFamily,Size:a.fontSize,Bold:a.font.isBold,Italic:a.font.isItalic,Strikeout:a.font.isStrikeout,Underline:a.font.isUnderline},t[a.pageNumber].freeTextAnnotation.push(r);else if("stamp"===a.shapeAnnotationType){if(r.AnnotType="stamp",r.Icon=a.icon,r.isDynamic=!1,r.Rect=this.convertBounds(a.bounds,!1,!0),r.RotateAngle=a.rotateAngle,r.FillColor=a.fillColor,r.StrokeColor=a.strokeColor,r.StampAnnotationType=a.stampAnnotationType,r.CreationDate=a.creationDate,"image"===a.stampAnnotationType){var p=[],c={imagedata:a.stampAnnotationPath};p.push(c),r.Apperarance=p}if(a.isDynamicStamp){r.IsDynamic=!0,r.StrokeColor=a.stampFillcolor;p=[],c={type:"string",text:a.dynamicText,currentFontname:"95b303ab-d397-438a-83af-e2ff8a9900f1",baseFontName:"Helvetica-BoldOblique",fontSize:10,isImport:!0};p.push(c),r.Apperarance=p}t[a.pageNumber].stampAnnotations.push(r)}else if("Ink"===a.shapeAnnotationType||"Signature"===a.shapeAnnotationType)r.StrokeColor=a.strokeColor,r.FillColor=a.fillColor,r.Thickness=a.thickness,r.Bounds=this.convertBounds(a.bounds),r.PathData=a.data,r.pageIndex=a.pageNumber,"Ink"===a.shapeAnnotationType&&(r.AnnotType="Ink",r.IsPathData=!0,t[a.pageNumber].signatureInkAnnotation.push(r)),"Signature"===a.shapeAnnotationType&&(r.AnnotType="Signature",r.SignatureName=a.annotationId,r.IsSignature=!0,t[a.pageNumber].signatureAnnotation.push(r));else if("Line"===a.shapeAnnotationType||"LineWidthArrowHead"===a.shapeAnnotationType||"Polyline"===a.shapeAnnotationType||"Polygon"===a.shapeAnnotationType||"Polyline"===a.shapeAnnotationType||"Circle"===a.shapeAnnotationType||"Oval"===a.shapeAnnotationType||"Rectangle"===a.shapeAnnotationType||"Square"===a.shapeAnnotationType||"Ellipse"===a.shapeAnnotationType){if(r.AnnotType="shape",r.StrokeColor=a.strokeColor,r.FillColor=a.fillColor,r.Thickness=a.thickness,r.BorderStyle=a.borderStyle,r.BorderDashArray=a.borderDashArray,r.RotateAngle=a.rotateAngle,r.IsCloudShape=a.isCloudShape,r.CloudIntensity=a.cloudIntensity,r.RectangleDifference=a.rectangleDifference,r.LineHeadStart=a.lineHeadStart,r.LineHeadEnd=a.lineHeadEnd,r.IsLocked=a.isLocked,r.EnableShapeLabel=a.enableShapeLabel,r.LabelContent=a.labelContent,r.LabelFillColor=a.labelFillColor,r.LabelBorderColor=a.labelBorderColor,r.FontColor=a.fontColor,r.FontSize=a.fontSize,r.LabelBounds=this.convertBounds(a.labelBounds),r.LabelSettings=a.labelSettings,r.Bounds=this.convertBounds(a.bounds),r.LeaderLength=a.leaderLength,r.LeaderLineExtenstion=a.leaderLineExtension,a.vertexPoints&&a.vertexPoints.length>=1){var u=new Array;for(d=0;d<a.vertexPoints.length;d++)u.push(this.convertVertexPoints(a.vertexPoints[parseInt(d.toString(),10)]));r.VertexPoints=u}if(r.EnableShapeLabel=a.enableShapeLabel,"Distance calculation"===a.subject||"Perimeter calculation"===a.subject||"Area calculation"===a.subject||"Radius calculation"===a.subject||"Volume calculation"===a.subject){r.AnnotType="shape_measure";var f=a.calibrate;f&&(r.Calibrate={Ratio:f.ratio,X:[{Unit:f.x[0].unit,ConversionFactor:f.x[0].conversionFactor,FractionalType:f.x[0].fractionalType,Denominator:f.x[0].denominator,FormatDenominator:f.x[0].formatDenominator}],Distance:[{Unit:f.distance[0].unit,ConversionFactor:f.distance[0].conversionFactor,FractionalType:f.distance[0].fractionalType,Denominator:f.distance[0].denominator,FormatDenominator:f.distance[0].formatDenominator}],Area:[{Unit:f.area[0].unit,ConversionFactor:f.area[0].conversionFactor,FractionalType:f.area[0].fractionalType,Denominator:f.area[0].denominator,FormatDenominator:f.area[0].formatDenominator}],Angle:null,Volume:null,TargetUnitConversion:f.targetUnitConversion,Depth:f.depth}),r.Indent=a.indent,r.Caption=a.caption,r.CaptionPosition=a.captionPosition,r.LeaderLineExtension=a.leaderLineExtension,r.LeaderLength=a.leaderLength,r.LeaderLineOffset=a.leaderLineOffset,t[a.pageNumber].measureShapeAnnotation.push(r)}else t[a.pageNumber].shapeAnnotation.push(r)}}i.pdfAnnotation=t,this.pdfViewer.importAnnotation(i)}},e.prototype.convertBounds=function(e,t,i){if(e){if(t)return{left:e.left?e.left:e.Left?e.Left:0,right:e.right?e.right:e.Right?e.Right:0,bottom:e.bottom?e.bottom:e.Bottom?e.Bottom:0,top:e.top?e.top:e.Top?e.Top:0};var n=e.x?e.x:e.left?e.left:e.Left?e.Left:0,o=e.y?e.y:e.top?e.top:e.Top?e.Top:0,s=e.width?e.width:e.Width?e.Width:0,a=e.height?e.height:e.Height?e.Height:0;return i?{X:this.ConvertPixelToPoint(n),Y:this.ConvertPixelToPoint(o),Left:this.ConvertPixelToPoint(n),Top:this.ConvertPixelToPoint(o),Height:this.ConvertPixelToPoint(a),Width:this.ConvertPixelToPoint(s)}:{X:n,Y:o,Left:n,Top:o,Height:a,Width:s}}},e.prototype.ConvertPixelToPoint=function(e){return.75*e},e.prototype.convertVertexPoints=function(e){if(e){var t=e.x?e.x:e.X?e.X:0,i=e.y?e.y:e.Y?e.Y:0;return{X:t,Y:i,Left:t,Top:i}}},e.prototype.updateComments=function(e,t){if(e&&t){var i={};return i.ShapeAnnotationType=e.shapeAnnotationType,i.Author=t.author,i.AnnotationSelectorSettings=e.annotationSelectorSettings,i.AnnotationSettings=e.annotationSettings,i.PageNumber=e.pageNumber,i.ModifiedDate=t.modifiedDate,i.Subject=e.subject,i.Note=t.note,i.AnnotName=t.annotName,i.Comments=t.comments,i.State=t.review.state,i.StateModel=t.review.stateModel,i.CustomData=e.customData,i.IsLock=t.isLock,i}},e.prototype.removeFocus=function(){if(S()){var e=this.pdfViewer.element.querySelector("#"+this.pdfViewer.element.id+"_totalPage");e&&e.firstElementChild&&e.firstElementChild.firstElementChild&&e.firstElementChild.firstElementChild.blur()}},e.prototype.updateDocumentEditedProperty=function(e){this.pdfViewer.allowServerDataBinding=!0,this.pdfViewer.isDocumentEdited=e,this.pdfViewer.allowServerDataBinding=!1},e.prototype.getWindowDevicePixelRatio=function(){var e=window.devicePixelRatio;return ge.isDevice?2:e},e.prototype.getZoomRatio=function(e){var t=this.getZoomFactor(),i=e||1,n=this.getWindowDevicePixelRatio();return!ge.isDevice||ge.isDevice&&t<=.7?i*n:i},e.prototype.importJsonForRotatedDocuments=function(e,t,i,n){var o=Math.abs(e),s=this.pageSize[parseInt(t.toString(),10)];return n!==s.rotation?(o=this.getRotationAngle(n,t),this.isPageRotated=!0):(o=0,this.isPageRotated=!1),1===o?{X:s.width-i.Y-i.Height,Y:i.X,Height:i.Width,Width:i.Height}:2===o?{X:s.width-i.X-i.Width,Y:s.height-i.Y-i.Height,Height:i.Height,Width:i.Width}:3===o?{X:i.Y,Y:s.height-i.X-i.Width,Height:i.Width,Width:i.Height}:i},e.prototype.getRotationAngle=function(e,t){var i=this.pageSize[parseInt(t.toString(),10)];if(0===(e=Math.abs(e)))return i.rotation;if(1===e||90===e){if(0==i.rotation)return 3;if(2===i.rotation)return 1;if(3===i.rotation)return 2}else if(2===e||180===e){if(0==i.rotation)return 2;if(1===i.rotation)return 3;if(3===i.rotation)return 1}else if(3===e||270===e){if(0==i.rotation)return 1;if(2===i.rotation)return 3;if(1===i.rotation)return 2}},e.prototype.calculateVertexPoints=function(e,t,i,n){var o,s=Math.abs(e),a=[],r=this.pageSize[parseInt(t.toString(),10)];s=n!==r.rotation?this.getRotationAngle(n,t):0;for(var l=0;l<i.length;l++)if(1===s)o={x:i[parseInt(l.toString(),10)].Y?r.width-i[parseInt(l.toString(),10)].Y:r.width-i[parseInt(l.toString(),10)].y,y:i[parseInt(l.toString(),10)].X?i[parseInt(l.toString(),10)].X:i[parseInt(l.toString(),10)].x},a.push(o);else if(2===s){var d={x:i[parseInt(l.toString(),10)].X?r.width-i[parseInt(l.toString(),10)].X:r.width-i[parseInt(l.toString(),10)].x,y:i[parseInt(l.toString(),10)].Y?r.height-i[parseInt(l.toString(),10)].Y:r.height-i[parseInt(l.toString(),10)].y};a.push(d)}else if(3==s)o={x:i[parseInt(l.toString(),10)].Y?i[parseInt(l.toString(),10)].Y:i[parseInt(l.toString(),10)].y,y:i[parseInt(l.toString(),10)].X?r.height-i[parseInt(l.toString(),10)].X:r.height-i[parseInt(l.toString(),10)].x},a.push(o);else{var h={x:i[parseInt(l.toString(),10)].X?i[parseInt(l.toString(),10)].X:i[parseInt(l.toString(),10)].x,y:i[parseInt(l.toString(),10)].Y?i[parseInt(l.toString(),10)].Y:i[parseInt(l.toString(),10)].y};a.push(h)}return a},e}(),Lc=function(){function e(e,t){this.maintainTabIndex={},this.maintanMinTabindex={},this.isSignatureField=!1,this.paddingDifferenceValue=10,this.indicatorPaddingValue=4,this.isKeyDownCheck=!1,this.readOnlyCollection=[],this.isSignatureRendered=!1,this.signatureFieldCollection=[],this.selectedIndex=[],this.renderedPageList=[],this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.renderFormFields=function(e,t){if(this.maxTabIndex=0,this.minTabIndex=-1,-1===this.renderedPageList.indexOf(e)||t?this.data=this.pdfViewerBase.getItemFromSessionStorage("_formfields"):(this.data=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),this.data&&"[]"!==this.data||(this.data=this.pdfViewerBase.getItemFromSessionStorage("_formfields"))),this.data){this.formFieldsData=JSON.parse(this.data);var i=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+e),n=document.getElementById(this.pdfViewer.element.id+"_pageCanvas_"+e),o=void 0;if(null!==this.formFieldsData&&null!==n&&null!==i){for(var s=!1,a=0;a<this.formFieldsData.length;a++){var r=this.formFieldsData[a];!s&&m(r.ActualFieldName)&&r.PageIndex===e&&(o=parseInt(r.FieldName.slice(r.FieldName.lastIndexOf("_")+1)),s=!0)}-1===this.renderedPageList.indexOf(e)&&this.renderedPageList.push(e);for(var l,d,h=function(t){var n=p.formFieldsData[t];if(""!==n.FieldName){n.IsInitialField&&(n.Name="InitialField");var s=n.Font;if(p.pdfViewer.formDesigner){if(parseFloat(n.PageIndex)==e){var a=void 0,r=void 0,h=void 0;null!==s&&s.Height&&(a=s.Name,s.Italic&&(r="Italic"),s.Bold&&(r="Bold"),s.Strikeout&&(r="Strikethrough"),s.Underline&&(r="Underline"),h=p.ConvertPointToPixel(s.Size));var c=2===n.Alignment?"right":1===n.Alignment?"center":"left",u=n.BackColor,f=n.LineBounds,g="rgba("+u.R+","+u.G+","+u.B+",1)";!0===n.IsTransparent&&(g="rgba(0,0,0,0)"),"#000000ff"===(g=p.rgbaToHex(g))&&(g="#daeaf7ff");var y=n.FontColor,v={left:p.ConvertPointToPixel(f.X),top:p.ConvertPointToPixel(f.Y),width:p.ConvertPointToPixel(f.Width),height:p.ConvertPointToPixel(f.Height)},w=!1,b=0;0!==n.Rotation?-90!==n.RotationAngle&&-270!==n.RotationAngle&&-180!==n.RotationAngle||(v=p.getBounds(v,e,0,w)):(w=!0,v=p.getBounds(v,e,0,w),b=p.getAngle(e));var S="rgba("+y.R+","+y.G+","+y.B+",1)";S=p.rgbaToHex(S);var C=n.BorderColor,x="rgba("+C.R+","+C.G+","+C.B+",1)";x=p.rgbaToHex(x);var M=n.BorderWidth;p.selectedIndex=[],l="",l="RadioButton"===n.Name?n.Text?n.Text:n.Value:n.Text;var I={bounds:{X:v.left,Y:v.top,Width:v.width,Height:v.height},pageNumber:parseFloat(n.PageIndex)+1,name:n.ActualFieldName,tooltip:n.ToolTip,value:l,insertSpaces:n.InsertSpaces,isChecked:n.Selected,isSelected:n.Selected,fontFamily:a,fontStyle:r,backgroundColor:g,color:S,borderColor:x,thickness:M,fontSize:h,isMultiline:n.Multiline,rotateAngle:b,isReadOnly:n.IsReadonly,isRequired:n.IsRequired,alignment:c,options:p.getListValues(n),selectedIndex:p.selectedIndex,maxLength:n.MaxLength,visibility:1===n.Visible?"hidden":"visible",font:{isItalic:!m(s)&&s.Italic,isBold:!m(s)&&s.Bold,isStrikeout:!m(s)&&s.Strikeout,isUnderline:!m(s)&&s.Underline},isTransparent:n.IsTransparent};n.id||!p.pdfViewer.formFieldCollections[t]||m(n.ActualFieldName)||(I.id=p.pdfViewer.formFieldCollections[t].id),"DropDown"!==n.Name&&"ListBox"!==n.Name||(I.value=n.SelectedValue);var T=p.getFormFieldType(n);if(("SignatureText"!==n.Name||"SignatureImage"!==n.Name)&&!m(p.getFormFieldType(n))){if(n.IsRequired){var A=I.thickness;A=A>0?A:1,I.thickness=A}var k=p.pdfViewer.formDesignerModule.addFormField(T,I,!1,I.id);k&&k.parentElement&&(n.id=k.parentElement.id.split("_")[0]),k&&"hidden"===k.style.visibility&&(k.childNodes[0].disabled=!0)}"SignatureField"!==T&&"InitialField"!==T||(p.addSignaturePath(n,o),m(n.Value)||(p.renderExistingAnnnot(n,parseFloat(n.PageIndex)+1,null,w),p.isSignatureRendered=!0,o++)),null===n.ActualFieldName&&0===p.formFieldsData.filter((function(e){return e.FieldName.includes(n.FieldName.replace(/_\d$/,""))})).filter((function(e){return"ink"!=e.Name})).length&&(p.renderExistingAnnnot(n,parseFloat(n.PageIndex)+1,null,w),p.pdfViewerBase.signatureModule.storeSignatureData(e,n),p.isSignatureRendered=!0,o++),p.pdfViewerBase.isLoadedFormFieldAdded=!0}}else if(parseFloat(n.PageIndex)==e){var V=p.createFormFields(n,e,t,null,o),E=V.currentField,D=V.count;w=!1;if(null===n.ActualFieldName&&0===p.formFieldsData.filter((function(e){return e.FieldName.includes(n.FieldName.replace(/_\d$/,""))})).filter((function(e){return"ink"!=e.Name})).length&&(p.renderExistingAnnnot(n,parseFloat(n.PageIndex)+1,null,w),p.pdfViewerBase.signatureModule.storeSignatureData(e,n),p.isSignatureRendered=!0,o++),E){var N=p.createParentElement(n,e),F=(f=n.LineBounds,n.Font);if(d=0,0===n.Rotation?(w=!0,d=p.getAngle(e),N?N.style.transform="rotate("+d+"deg)":E.style.transform="rotate("+d+"deg)"):N?N.style.transform="rotate("+d+"deg)":E.style.transform="rotate("+d+"deg)",p.applyPosition(E,f,F,e,0,w),E.InsertSpaces=n.InsertSpaces,E.InsertSpaces){var L=p.pdfViewerBase.getZoomFactor(),P=parseInt(E.style.width)/E.maxLength-parseFloat(E.style.fontSize)/2-.6*L;E.style.letterSpacing=P+"px",E.style.fontFamily="monospace",E.style.paddingLeft=P/2+"px"}n.uniqueID=p.pdfViewer.element.id+"input_"+e+"_"+t;for(var O=0;O<p.pdfViewer.formFieldCollections.length;O++)"text"!==E.type&&"password"!==E.type&&"textarea"!==E.type||"SignatureField"===n.Name||n.uniqueID===p.pdfViewer.formFieldCollections[O].id&&(p.pdfViewer.formFieldCollections[O].value=n.Text);m(n.Value)&&(n.Value=n.Text),n.ToolTip&&p.setToolTip(n.ToolTip,E),p.applyCommonProperties(E,e,t,n,w),p.checkIsReadonly(n,E),p.applyTabIndex(n,E,e),p.checkIsRequiredField(n,E),p.applyDefaultColor(E),p.updateFormFieldsCollection(n),N?(N.appendChild(E),i.appendChild(N)):(E.style.position="absolute",i.appendChild(E)),E.addEventListener("focus",p.focusFormFields.bind(p)),E.addEventListener("blur",p.blurFormFields.bind(p)),E.addEventListener("click",p.updateFormFields.bind(p)),E.addEventListener("change",p.changeFormFields.bind(p)),E.addEventListener("keydown",p.updateFormFieldsValue.bind(p)),E.addEventListener("keyup",p.updateSameFieldsValue.bind(p)),o=D}}}},p=this,c=0;c<this.formFieldsData.length;c++)h(c);this.pdfViewer.formDesigner||(window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_formfields"),this.pdfViewerBase.setItemInSessionStorage(this.formFieldsData,"_formfields"))}}if(this.pdfViewerBase.isFocusField&&this.pdfViewerBase.focusField){var u=document.getElementById(this.pdfViewerBase.focusField.id);if(u){if("SignatureField"!==this.pdfViewerBase.focusField.type&&"InitialField"!==this.pdfViewerBase.focusField.type||!this.pdfViewer.formDesignerModule)u.focus();else{var f=this.pdfViewerBase.focusField.bounds.y,g=this.pdfViewerBase.pageSize[e].height;this.pdfViewer.bookmark.goToBookmark(this.pdfViewerBase.focusField.pageIndex,g-f)}this.pdfViewerBase.isFocusField=!1,this.pdfViewerBase.focusField=[]}}},e.prototype.setToolTip=function(e,t){new Xd({content:e}).appendTo(t)},e.prototype.trim=function(e){return e.replace(/^\s+|\s+$/gm,"")},e.prototype.rgbaToHex=function(e){var t=e.substring(e.indexOf("(")).split(","),i=parseInt(this.trim(t[0].substring(1)),10),n=parseInt(this.trim(t[1]),10),o=parseInt(this.trim(t[2]),10),s=parseFloat(parseFloat(this.trim(t[3].substring(0,t[3].length-1))).toFixed(2)),a=[i.toString(16),n.toString(16),o.toString(16),Math.round(255*s).toString(16).substring(0,2)];return a.forEach((function(e,t){1===e.length&&(a[t]="0"+e)})),"#"+a.join("")},e.prototype.getListValues=function(e){for(var t=e.TextList,i=[],n=0;n<t.length;n++)t[n]===e.SelectedValue&&this.selectedIndex.push(n),i.push({itemName:t[n],itemValue:t[n]});return"ListBox"===this.getFormFieldType(e)&&(this.selectedIndex=e.SelectedList),i},e.prototype.createParentElement=function(e,t){var i;if("Textbox"===e.Name||"Password"===e.Name){(i=document.createElement("div")).style.background="white",e.InsertSpaces&&(i.style.background="transparent");var n=e.LineBounds,o=e.Font;i.style.position="absolute";var s=!1;0===e.Rotation&&(s=!0),this.applyPosition(i,n,o,t,0,s)}return i},e.prototype.getAngle=function(e){var t=0,i=this.pdfViewerBase.pageSize[e];if(i&&i.rotation)switch(i.rotation){case 0:t=0;break;case 1:t=90;break;case 2:t=180;break;case 3:t=270}return t},e.prototype.nextField=function(){this.signatureFieldNavigate(!0)},e.prototype.previousField=function(){this.signatureFieldNavigate(!1)},e.prototype.signatureFieldNavigate=function(e){var t,i=e,n=this.signatureFieldCollection;if(0===n.length&&(n=this.getSignField()),this.currentTarget){for(var o=0;o<n.length;o++)if(t=this.pdfViewer.formDesignerModule?n[o].FormField:n[o],this.currentTarget.id===t.uniqueID){this.currentTarget=document.getElementById(t.uniqueID),this.getSignatureIndex(o,n.length,i);break}}else e&&(t=this.pdfViewer.formDesignerModule?n[0].FormField:n[0]).uniqueID&&(this.currentTarget=document.getElementById(t.uniqueID),this.getSignatureIndex(0,n.length,i,!0))},e.prototype.getSignatureIndex=function(e,t,i,n){var o=e;n||(i?o++:o--),1===t?this.renderSignatureField(0):o<t&&o>=0?this.renderSignatureField(o):i?o>=t&&this.renderSignatureField(0):o<=0&&this.renderSignatureField(t-1)},e.prototype.renderSignatureField=function(e){var t,i=e,n=this.signatureFieldCollection;if(i<n.length){for(var o=0;o<n.length;o++){var s=this.pdfViewer.formDesignerModule?n[i].FormField.uniqueID:n[i].uniqueID,a=this.pdfViewer.formDesignerModule?n[o].FormField:n[o];if(s===a.uniqueID){var r=a.PageIndex>=0?a.PageIndex:a.pageNumber;this.pdfViewer.annotationModule.findRenderPageList(r)||this.pdfViewer.navigation.goToPage(r),this.currentTarget=document.getElementById(a.uniqueID),t=a;break}}if(null===this.currentTarget){r=t.PageIndex>=0?t.PageIndex:t.pageNumber;this.pdfViewer.navigation.goToPage(r),this.currentTarget=document.getElementById(t.uniqueID)}this.currentTarget&&("e-pdfviewer-signatureformfields-signature"===this.currentTarget.className?(document.getElementById(this.currentTarget.id).focus(),this.pdfViewer.select([this.currentTarget.id],null)):"e-pdfviewer-signatureformfields"===this.currentTarget.className&&(this.pdfViewer.formDesignerModule?document.getElementById(this.currentTarget.id).parentElement.focus():document.getElementById(this.currentTarget.id).focus()))}},e.prototype.setFocus=function(e){e?(this.removeFocus(),document.getElementById(e).classList.add("e-pv-signature-focus")):this.currentTarget&&document.getElementById(this.currentTarget.id).focus()},e.prototype.removeFocus=function(){if(this.signatureFieldCollection){var e=this.signatureFieldCollection;0===e.length&&(e=this.getSignField());for(var t=0;t<this.signatureFieldCollection.length;t++){var i=this.pdfViewer.formDesignerModule?this.signatureFieldCollection[t].FormField.uniqueID:this.signatureFieldCollection[t].uniqueID,n=document.getElementById(i);n&&n.classList.remove("e-pv-signature-focus")}this.pdfViewer.formFieldsModule.currentTarget&&this.pdfViewer.formFieldsModule.currentTarget.classList.remove("e-pv-signature-focus")}},e.prototype.getSignField=function(){return this.pdfViewer.formDesignerModule?this.signatureFieldCollection=this.pdfViewer.formDesignerModule.getFormDesignerSignField(this.signatureFieldCollection):this.signatureFieldCollection=this.getFormFieldSignField(),this.signatureFieldCollection},e.prototype.getFormFieldSignField=function(){var e,t=this.pdfViewerBase.getItemFromSessionStorage("_formfields");if(t)for(var i=JSON.parse(t),n=0;n<i.length;n++)"SignatureField"===(e=i[n]).Name&&(e.uniqueID=this.pdfViewer.element.id+"input_"+e.PageIndex+"_"+n,this.signatureFieldCollection.push(i[n]));return this.signatureFieldCollection},e.prototype.formFieldCollections=function(){var e=this.pdfViewerBase.getItemFromSessionStorage("_formfields");if(e)for(var t=JSON.parse(e),i=0;i<t.length;i++){var n=t[i],o=n.Name;if(this.pdfViewer.formDesignerModule)"ink"!==n.Name&&"SignatureImage"!==n.Name&&"SignatureText"!==n.Name&&this.retreiveFormFieldsData(n,!0);else if("ink"!==n.Name){var s={name:this.retriveFieldName(n),id:this.pdfViewer.element.id+"input_"+parseFloat(n.PageIndex)+"_"+i,isReadOnly:!1,type:n.IsInitialField?"InitialField":o,value:this.retriveCurrentValue(n),fontName:"",isRequired:n.IsRequired};this.pdfViewer.formFieldCollections.push(s)}}},e.prototype.retreiveFormFieldsData=function(e,t){var i,n,o;if(""!==e.FieldName){e.IsInitialField&&(e.Name="InitialField");var s=e.Font;null!==s&&s.Height&&(i=s.Name,s.Italic&&(n="Italic"),s.Bold&&(n="Bold"),s.Strikeout&&(n="Strikethrough"),s.Underline&&(n="Underline"),o=this.ConvertPointToPixel(s.Size));var a=2===e.Alignment?"right":1===e.Alignment?"center":"left",r=e.BackColor,l=e.LineBounds,d="rgba("+r.R+","+r.G+","+r.B+",1)";d=this.rgbaToHex(d),!0===e.IsTransparent?d="rgba(0,0,0,0)":"#000000ff"===d&&(d="#daeaf7ff");var h=e.FontColor,p={left:this.ConvertPointToPixel(l.X),top:this.ConvertPointToPixel(l.Y),width:this.ConvertPointToPixel(l.Width),height:this.ConvertPointToPixel(l.Height)},c="rgba("+h.R+","+h.G+","+h.B+",1)";c=this.rgbaToHex(c);var u=e.BorderColor,f="rgba("+u.R+","+u.G+","+u.B+",1)";f=this.rgbaToHex(f);var g=e.BorderWidth;this.selectedIndex=[];var y={bounds:{X:p.left,Y:p.top,Width:p.width,Height:p.height},pageNumber:parseFloat(e.PageIndex)+1,name:e.ActualFieldName,tooltip:e.ToolTip,value:e.Text,isChecked:e.Selected,isSelected:e.Selected,fontFamily:i,fontStyle:n,backgroundColor:d,color:c,borderColor:f,thickness:g,fontSize:o,isMultiline:e.Multiline,isReadOnly:e.IsReadonly,isRequired:e.IsRequired,insertSpaces:e.InsertSpaces,alignment:a,options:this.getListValues(e),selectedIndex:this.selectedIndex,maxLength:e.MaxLength,visibility:1===e.Visible?"hidden":"visible",font:{isItalic:!m(s)&&s.Italic,isBold:!m(s)&&s.Bold,isStrikeout:!m(s)&&s.Strikeout,isUnderline:!m(s)&&s.Underline}};"DropDown"!==e.Name&&"ListBox"!==e.Name||(y.value=e.SelectedValue);var v=this.getFormFieldType(e);return"SignatureField"!==v&&"InitialField"!==v||(this.addSignaturePath(e),this.isSignatureField&&(y.value=e.Value)),this.pdfViewer.formDesignerModule.addFormField(v,y,t)}return null},e.prototype.updateFormFieldsCollection=function(e){var t=e.Name,i={name:this.retriveFieldName(e),id:e.uniqueID,isReadOnly:e.IsReadonly,isRequired:e.IsRequired,isSelected:"CheckBox"!==t&&e.Selected,isChecked:"RadioButton"!==t&&e.Selected,type:t,value:"ListBox"===t||"DropDown"===t?e.SelectedValue:e.Value,fontName:e.FontFamily?e.FontFamily:""};this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.findIndex((function(e){return e.id===i.id}))]=i},e.prototype.updateFormFieldValues=function(e){if(this.readOnlyCollection.push(e.id),e){var t=document.getElementById(e.id);t&&(e.isReadOnly?(t.disabled=!0,t.style.backgroundColor="",t.style.cursor="default"):(""===t.style.backgroundColor&&(t.style.backgroundColor="rgba(0, 20, 200, 0.2)"),t.disabled=!1,t.style.cursor="")),this.updateDataInSession(t)}},e.prototype.retriveFieldName=function(e){var t;switch(e.Name){case"Textbox":case"Password":case"SignatureField":case"InitialField":t=e.FieldName;break;case"RadioButton":case"CheckBox":t=e.GroupName;break;case"DropDown":case"ListBox":t=e.Text}return t},e.prototype.retriveCurrentValue=function(e){var t;switch(e.Name){case"Textbox":case"Password":t=e.Text;break;case"SignatureField":t=e.Value;break;case"RadioButton":case"CheckBox":t=e.Selected;break;case"DropDown":t=e.SelectedValue;break;case"ListBox":t=e.SelectedList}return t},e.prototype.getSignatureBounds=function(e,t,i){var n=this.pdfViewerBase.pageSize[i],o=0;switch(n.rotation){case 0:o=t;break;case 1:o={x:t.x+e.Width+t.width/3.5,y:n.width-e.X+t.height/4};break;case 2:o={x:n.width-t.x-t.width,y:n.height-t.y-t.height};break;case 3:o={x:t.y-t.width/2+t.height,y:t.x+t.width/3}}return o},e.prototype.downloadFormFieldsData=function(){var e=this.pdfViewerBase.getItemFromSessionStorage("_formfields");if(e){for(var t=JSON.parse(e),i={},n=[],o=0;o<t.length;o++){var s=t[o],a=s.IsRequired;if("Textbox"===s.Name||"Password"===s.Name||s.Multiline)!a||""!==s.Text&&null!==s.Text?delete this.pdfViewerBase.nonFillableFields[s.FieldName]:(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[s.FieldName]=s.Text),n={fieldValue:s.Text,isReadOnly:s.IsReadonly},i[s.FieldName]=n;else if("RadioButton"===s.Name&&s.Selected)a&&!1===s.Selected?(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[s.GroupName]=s.Value):delete this.pdfViewerBase.nonFillableFields[s.GroupName],n={fieldValue:s.Value,isReadOnly:s.IsReadonly},i[s.GroupName]=n;else if("CheckBox"===s.Name)a&&!1===s.Selected?(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[s.GroupName]=s.Selected):delete this.pdfViewerBase.nonFillableFields[s.GroupName],s.CheckboxIndex&&s.Selected?(n={fieldValue:s.CheckboxIndex,isReadOnly:s.IsReadonly},i[s.GroupName]=n):void 0!==i[s.GroupName]&&null!==i[s.GroupName]||(n={fieldValue:s.Selected,isReadOnly:s.IsReadonly},i[s.GroupName]=n);else if("DropDown"===s.Name)a&&""===s.SelectedValue?(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[s.Text]=s.SelectedValue):delete this.pdfViewerBase.nonFillableFields[s.Text],n={fieldValue:s.SelectedValue,isReadOnly:s.IsReadonly},i[s.Text]=n;else if("ListBox"===s.Name){for(var r=s.TextList,l=[],d=0;d<s.SelectedList.length;d++){var h=s.SelectedList[d];l.push(r[h])}n={fieldValue:JSON.stringify(l),isReadOnly:s.IsReadonly},i[s.Text]=n}else if("SignatureField"===s.Name||"InitialField"===s.Name){var p=void 0;if(null!==s.Value&&""!==s.Value||this.addSignaturePath(s),s.Value&&""!==s.Value){p=s.Value;var c=s.fontFamily?s.fontFamily:s.FontFamily;if(c)i[s.FieldName+"fontName"]=c,i[s.FieldName+"fontSize"]=s.fontSize?s.fontSize:s.FontSize;else if(s.Value.split("base64,")[1])i[s.FieldName+"ImageData"]=!0;else{p=os(es(s.Value))}}if(a&&null===s.Value||""===s.Value?(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[s.FieldName]=JSON.stringify(p)):delete this.pdfViewerBase.nonFillableFields[s.FieldName],i[s.FieldName]=JSON.stringify(p),s.Bounds){var u=this.getSignatureBounds(s.LineBounds,s.Bounds,s.PageIndex);s.Bounds.x=u.x,s.Bounds.y=u.y,i[s.FieldName+"bounds"]=JSON.stringify(s.Bounds)}else{var f=s.LineBounds;u={x:this.ConvertPointToPixel(f.X),y:this.ConvertPointToPixel(f.Y),width:this.ConvertPointToPixel(f.Width),height:this.ConvertPointToPixel(f.Height)};i[s.FieldName+"bounds"]=JSON.stringify(u)}i[s.FieldName+"isReadOnly"]=s.IsReadonly}}return JSON.stringify(i)}},e.prototype.focusFormFields=function(e){var t=e.target;if(t&&"e-pdfviewer-signatureformfields"!==t.className&&"e-pdfviewer-signatureformfields e-pv-signature-focus"!==t.className){var i=t.style.backgroundColor,n=i.lastIndexOf(","),o=i.slice(0,n+1)+0+")";t.style.backgroundColor=o,"checkbox"===t.type&&(t.style.webkitAppearance=""),t.style.boxShadow="0 0 5px "+("transparent"===t.style.borderColor?"#000000":t.style.borderColor)}else t&&("e-pdfviewer-signatureformfields"!==t.className&&"e-pdfviewer-signatureformfields-signature"!==t.className&&"e-pdfviewer-signatureformfields e-pv-signature-focus"!==t.className&&"e-pdfviewer-signatureformfields-signature  e-pv-signature-focus"!==t.className||this.setFocus(t.id))},e.prototype.blurFormFields=function(e){var t=e.target;if(t.InsertSpaces&&this.isKeyDownCheck){var i=parseInt(t.style.width)-parseInt(t.style.height)/2;t.style.width=i+"px",this.isKeyDownCheck=!1}"checkbox"===t.type?this.pdfViewer.fireFocusOutFormField(t.name,t.checked):this.pdfViewer.fireFocusOutFormField(t.name,t.value);var n=t.style.backgroundColor,o=n.lastIndexOf(","),s=n.slice(0,o+1)+.2+")";t.style.backgroundColor=s,t.style.boxShadow="none","checkbox"!==t.type||t.checked?t.style.webkitAppearance="":t.style.webkitAppearance="none"},e.prototype.updateFormFields=function(e){var t=e.target;"e-pdfviewer-ListBox"===t.className?(t=t.parentElement,this.updateDataInSession(t)):"e-pdfviewer-signatureformfields"===t.className||"e-pdfviewer-signatureformfields e-pv-signature-focus"===t.className?this.currentTarget=t:"e-pv-buttonItem"!==t.className&&"button"!==t.type||this.pdfViewer.fireButtonFieldClickEvent(t.value,t.name,t.id);for(var i=0;i<this.pdfViewer.formFieldCollections.length;i++)t.id===this.pdfViewer.formFieldCollections[i].id&&((this.pdfViewer.formDesignerModule||this.pdfViewer.annotationModule)&&this.pdfViewer.fireFormFieldClickEvent("formFieldClicked",this.pdfViewer.formFieldCollections[i]),"e-pdfviewer-signatureformfields"!==t.className&&"e-pdfviewer-signatureformfields-signature"!==t.className&&"e-pdfviewer-signatureformfields e-pv-signature-focus"!==t.className&&"e-pdfviewer-signatureformfields-signature  e-pv-signature-focus"!==t.className||this.setFocus(t.id))},e.prototype.drawSignature=function(e,t,i,n){var o,s,a,r,l,d=this;l=this.pdfViewer.formDesigner?this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"):this.pdfViewerBase.getItemFromSessionStorage("_formfields");for(var h=JSON.parse(l),p=this.currentTarget?this.currentTarget.name:i.name?i.name:i.offsetParent.name,c=function(){var l=u.pdfViewer.formDesigner?h[f].FormField.name:h[f].FieldName;if(u.pdfViewer.formDesigner?l===p:l===p&&!m(h[f].ActualFieldName)){var c=i=u.pdfViewer.formDesigner?document.getElementById(h[f].Key.split("_")[0]):document.getElementById(h[f].uniqueID),g=c.offsetParent.offsetParent.id.split("_")[0],y=u.pdfViewer.nameTable[g];i&&i.offsetParent&&y&&(a=i.getBoundingClientRect(),r=i.offsetParent.offsetParent.offsetParent.getBoundingClientRect(),u.pdfViewerBase.drawSignatureWithTool=!0,i.nextSibling&&-1!==i.nextSibling.id.indexOf("initial")&&(u.pdfViewer.isInitialFieldToolbarSelection=!0));var v,w,b=t||u.pdfViewerBase.signatureModule.outputString,S=n||u.pdfViewerBase.signatureModule.fontName,C=u.pdfViewerBase.getZoomFactor(),x=u.pdfViewerBase.drawSignatureWithTool?a.width/C:parseFloat(c.style.width)/C,M=u.pdfViewerBase.drawSignatureWithTool?a.height/C:parseFloat(c.style.height)/C,I=u.pdfViewerBase.drawSignatureWithTool?(a.left-r.left)/C:parseFloat(c.style.left)/C,T=u.pdfViewerBase.drawSignatureWithTool?(a.top-r.top)/C:parseFloat(c.style.top)/C,A=u.pdfViewerBase.drawSignatureWithTool&&i.nextElementSibling?parseFloat(i.nextElementSibling.id.split("_")[1]):parseFloat(c.id.split("_")[1]),k=u.pdfViewerBase.drawSignatureWithTool&&i.nextElementSibling?parseFloat(i.nextElementSibling.id.split("_")[2]):parseFloat(c.id.split("_")[2]),V=u.pdfViewerBase.signatureModule.saveImageString,E=c.offsetParent.offsetParent.style.transform?c.offsetParent.offsetParent.style.transform:c.style.transform,D=(E=E.substring(E.indexOf("(")+1,E.indexOf("d")))?parseInt(E):0;if("Type"===e){if(S||(S="Helvetica"),s=u.getSignBounds(k,D,A,C,I,T,x,M),"Default"===u.pdfViewer.signatureFitMode&&(s=u.getDefaultBoundsforSign(s)),"SignatureText"===(o={id:c.id,bounds:{x:s.x,y:s.y,width:s.width,height:s.height},pageIndex:A,data:b,modifiedDate:"",shapeAnnotationType:"SignatureText",opacity:1,rotateAngle:D,annotName:"SignatureText",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""},fontFamily:S,fontSize:90===D||270===D?s.width/1.35:s.height/1.35}).shapeAnnotationType){var N=u.getTextWidth(o.data,o.fontSize,o.fontFamily),F=1;N>s.width&&(F=s.width/N),o.fontSize=u.getFontSize(Math.floor(o.fontSize*F))}V=o.data,v=o.fontFamily,w=o.fontSize}else if("Image"===e){s=u.getSignBounds(k,D,A,C,I,T,x,M);var L=new Image;L.src=b,L.onload=function(){d.imageOnLoad(s,L,b,A,D,c,y,V,v,w,i)}}else if(-1!==b.indexOf("base64"))s=u.getSignBounds(k,D,A,C,I,T,x,M),"Default"===u.pdfViewer.signatureFitMode&&(s=u.getDefaultBoundsforSign(s)),o={id:c.id,bounds:{x:s.x,y:s.y,width:s.width,height:s.height},pageIndex:A,data:b,modifiedDate:"",shapeAnnotationType:"SignatureImage",opacity:1,rotateAngle:D,annotName:"SignatureField",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""}},V=o.data;else{if("Default"===u.pdfViewer.signatureFitMode){var P=u.updateSignatureAspectRatio(b,!1,c);(s=u.getSignBounds(k,D,A,C,I,T,P.width,P.height,!0)).x=s.x+P.left,s.y=s.y+P.top}else s=u.getSignBounds(k,D,A,C,I,T,x,M);o={id:c.id,bounds:{x:s.x,y:s.y,width:s.width,height:s.height},pageIndex:A,data:b,modifiedDate:"",shapeAnnotationType:"Path",opacity:1,rotateAngle:D,annotName:"SignatureField",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""}}}if(u.pdfViewerBase.drawSignatureWithTool&&y&&"Image"!==e){o.id=y.id+"_content";var O=u.pdfViewer.add(o);y.wrapper.children.push(O.wrapper)}else"Image"!==e&&u.pdfViewer.add(o);if(o&&"Path"===o.shapeAnnotationType&&""!==b){u.pdfViewerBase.currentSignatureAnnot=o;var B={currentHeight:M,currentWidth:x,currentLeft:I,currentTop:T};u.pdfViewerBase.signatureModule.addSignatureCollection(s,B),V=u.pdfViewerBase.signatureModule.saveImageString,u.pdfViewerBase.currentSignatureAnnot=null}if("Image"!==e){var z=document.getElementById(u.pdfViewer.element.id+"_annotationCanvas_"+A);if(u.pdfViewer.renderDrawing(z,A),u.pdfViewerBase.signatureModule.showSignatureDialog(!1),"e-pdfviewer-signatureformfields e-pv-signature-focus"===c.className?c.className="e-pdfviewer-signatureformfields-signature e-pv-signature-focus":c.className="e-pdfviewer-signatureformfields-signature",u.pdfViewerBase.drawSignatureWithTool&&y){var j=i.offsetParent.offsetParent.id.split("_")[0]+"_content";o.bounds={x:s.x*C,y:s.y*C,width:s.width*C,height:s.height*C},u.updateSignatureDataInSession(o,j)}else u.updateDataInSession(c,o.data,o.bounds,v,w);c.style.pointerEvents="none",u.pdfViewer.annotation&&u.pdfViewer.annotation.addAction(o.pageIndex,null,o,"FormField Value Change","",o,o),"Path"!==o.shapeAnnotationType&&"SignatureText"!==o.shapeAnnotationType||u.pdfViewer.fireSignatureAdd(o.pageIndex,o.id,o.shapeAnnotationType,o.bounds,o.opacity,null,null,V),u.pdfViewer.fireFocusOutFormField(c.name,b)}}},u=this,f=0;f<h.length;f++)c();"Image"!==e&&(this.pdfViewerBase.signatureModule.hideSignaturePanel(),this.pdfViewerBase.drawSignatureWithTool=!1,this.pdfViewer.isInitialFieldToolbarSelection=!1)},e.prototype.imageOnLoad=function(e,t,i,n,o,s,a,r,l,d,h){var p;if(h&&h.offsetParent&&a&&(this.pdfViewerBase.drawSignatureWithTool=!0,h.nextSibling&&-1!==h.nextSibling.id.indexOf("initial")&&(this.pdfViewer.isInitialFieldToolbarSelection=!0)),"Default"===this.pdfViewer.signatureFitMode){var c=Math.min(e.height/this.paddingDifferenceValue,e.width/this.paddingDifferenceValue),u=e.height-c,f=e.width-c,m=t.width,g=t.height,y=e.width,v=e.height,w=Math.min(f/m,u/g);if(e.width=m*w,e.height=g*w,e.x=e.x+(y-e.width)/2,e.y=e.y+(v-e.height)/2,r=(p={id:s.id,bounds:{x:e.x,y:e.y,width:e.width,height:e.height},pageIndex:n,data:i,modifiedDate:"",shapeAnnotationType:"SignatureImage",opacity:1,rotateAngle:o,annotName:"SignatureField",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""}}).data,this.pdfViewerBase.drawSignatureWithTool&&a){p.id=a.id+"_content";var b=this.pdfViewer.add(p);a.wrapper.children.push(b.wrapper)}else this.pdfViewer.add(p);var S=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+n);if(this.pdfViewer.renderDrawing(S,n),this.pdfViewerBase.signatureModule.showSignatureDialog(!1),"e-pdfviewer-signatureformfields e-pv-signature-focus"===s.className?s.className="e-pdfviewer-signatureformfields-signature e-pv-signature-focus":s.className="e-pdfviewer-signatureformfields-signature",this.pdfViewerBase.drawSignatureWithTool&&a){var C=h.offsetParent.offsetParent.id.split("_")[0]+"_content";this.updateSignatureDataInSession(p,C)}else this.updateDataInSession(s,p.data,p.bounds,l,d);s.style.pointerEvents="none",this.pdfViewer.annotation&&this.pdfViewer.annotation.addAction(p.pageIndex,null,p,"FormField Value Change","",p,p),"SignatureImage"===p.shapeAnnotationType&&this.pdfViewer.fireSignatureAdd(p.pageIndex,p.id,p.shapeAnnotationType,p.bounds,p.opacity,null,null,r),this.pdfViewer.fireFocusOutFormField(s.name,i)}this.pdfViewerBase.signatureModule.hideSignaturePanel(),this.pdfViewerBase.drawSignatureWithTool=!1,this.pdfViewer.isInitialFieldToolbarSelection=!1},e.prototype.updateSignatureDataInSession=function(e,t){var i=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),n=JSON.parse(i);if(!m(n))for(var o=function(i){if(n[i].Key===t){var o=s.pdfViewer.formFieldCollection.findIndex((function(e){return e.id===n[i].FormField.id.split("_")[0]}));if("SignatureText"===e.shapeAnnotationType?(n[i].FormField.signatureType="Text",s.pdfViewerBase.formFieldCollection[i].FormField.signatureType="Text",s.pdfViewer.nameTable[t].signatureType="Text",n[i].FormField.fontFamily="TimesRoman"===e.fontFamily?"Times New Roman":e.fontFamily,s.pdfViewerBase.formFieldCollection[i].FormField.fontFamily=e.fontFamily,s.pdfViewer.nameTable[t].fontFamily=e.fontFamily,n[i].FormField.fontSize=e.fontSize,s.pdfViewerBase.formFieldCollection[i].FormField.fontSize=e.fontSize,s.pdfViewer.nameTable[t].fontSize=e.fontSize,o>-1&&(s.pdfViewer.formFieldCollection[o].signatureType="Text")):"SignatureImage"===e.shapeAnnotationType?(n[i].FormField.signatureType="Image",s.pdfViewerBase.formFieldCollection[i].FormField.signatureType="Image",s.pdfViewer.nameTable[t].signatureType="Image",o>-1&&(s.pdfViewer.formFieldCollection[o].signatureType="Image")):(n[i].FormField.signatureType="Path",s.pdfViewerBase.formFieldCollection[i].FormField.signatureType="Path",s.pdfViewer.nameTable[t].signatureType="Path",o>-1&&(s.pdfViewer.formFieldCollection[o].signatureType="Path")),n[i].FormField.signatureBound=e.bounds,s.pdfViewerBase.formFieldCollection[i].FormField.signatureBound=e.bounds,s.pdfViewer.nameTable[t].signatureBound=e.bounds,o>-1&&(s.pdfViewer.formFieldCollection[o].signatureBound=e.bounds),"Path"===e.shapeAnnotationType){var a=os(es(e.data));n[i].FormField.value=JSON.stringify(a),s.pdfViewer.nameTable[t].value=e.data,s.pdfViewer.nameTable[t.split("_")[0]].value=e.data,s.pdfViewerBase.formFieldCollection[i].FormField.value=JSON.stringify(a),o>-1&&(s.pdfViewer.formFieldCollection[o].value=JSON.stringify(a))}else n[i].FormField.value=e.data,s.pdfViewerBase.formFieldCollection[i].FormField.value=e.data,s.pdfViewer.nameTable[t.split("_")[0]].value=e.data,s.pdfViewer.nameTable[t].value=e.data,o>-1&&(s.pdfViewer.formFieldCollection[o].value=e.data);s.pdfViewer.formDesigner.updateFormFieldCollections(n[i].FormField),s.pdfViewer.formDesigner.updateFormFieldPropertiesChanges("formFieldPropertiesChange",n[i].FormField,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,"",n[i].FormField.value)}},s=this,a=0;a<n.length;a++)o(a);this.pdfViewerBase.setItemInSessionStorage(n,"_formDesigner")},e.prototype.getDefaultBoundsforSign=function(e){return{x:e.x+4,y:e.y+4,width:e.width-8,height:e.height-8}},e.prototype.getSignBounds=function(e,t,i,n,o,s,a,r,l){var d=this.pdfViewer.isInitialFieldToolbarSelection?"initialIcon":"signIcon",h=document.getElementById(d+"_"+i+"_"+e),p=o*n-(h?parseFloat(h.style.left)*n:0)/n;return 90===t||270===t?(this.rotateAngle=0,""!==h.style.left?l?{x:o-p/n-n,y:s+p/n+n,width:a,height:r}:{x:o-p/n-n,y:s+p/n+n,width:r,height:a}:(p=10,l?{x:o-a,y:s+a,width:r,height:a}:{x:o-a-p/2,y:s+a+p,width:r,height:a})):(this.rotateAngle=0,{x:o,y:s,width:a,height:r})},e.prototype.updateSameFieldsValue=function(e){if(this.formFieldsData)for(var t=0;t<this.formFieldsData.length;t++){var i=this.formFieldsData[t];if(e.target.name===i.FieldName&&e.target.id!==i.uniqueID){var n=document.getElementById(this.formFieldsData[t].uniqueID);n?n.value=e.target.value:(i.Text=e.target.value,this.pdfViewerBase.setItemInSessionStorage(this.formFieldsData,"_formfields"))}}},e.prototype.updateFormFieldsValue=function(e){var t,i,n=e.target;if(n.InsertSpaces&&!this.isKeyDownCheck){var o=parseInt(n.style.width)+parseInt(n.style.height)/2;n.style.width=o+"px",this.isKeyDownCheck=!0}if(9===e.which&&n&&("e-pdfviewer-formFields"===n.className||"e-pdfviewer-signatureformfields e-pv-signature-focus"===n.className||"e-pdfviewer-signatureformfields-signature"===n.className)){var s=n.id.split("input_")[1].split("_")[0],a=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+parseInt(s)).getElementsByClassName("e-pdfviewer-formFields"),r=!0;t=this.pdfViewer.formFieldCollections.findIndex((function(e){return e.id===n.id})),e.shiftKey||"Tab"!==e.key||(i=t+1<this.pdfViewer.formFieldCollections.length?this.pdfViewer.formFieldCollections[t+1]:this.pdfViewer.formFieldCollections[0]),this.pdfViewer.focusFormField(i),r=!0,e.preventDefault();for(var l=n.tabIndex+1;!r;){for(var d=0;d<a.length;d++)if(r=!1,a[d].tabIndex===l){a[d].focus(),r=!0,e.preventDefault();break}this.maintainTabIndex[s]===l&&(r=!0),l+=1}}if(e.shiftKey&&"Tab"===e.key){var h=this.pdfViewer.formFieldCollections.findIndex((function(e){return e.id===n.id})),p=h>0?this.pdfViewer.formFieldCollections[h-1]:this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.length-1];this.pdfViewer.focusFormField(p),e.preventDefault()}if(e.currentTarget.classList.contains("e-pdfviewer-signatureformfields")||e.currentTarget.classList.contains("e-pdfviewer-signatureformfields-signature"))if("Enter"===e.key)for(var c=e.target,u=0;u<this.pdfViewer.formFieldCollections.length;u++)c.id===this.pdfViewer.formFieldCollections[u].id&&(this.setFocus(c.id),this.pdfViewer.fireFormFieldClickEvent("formFieldClicked",this.pdfViewer.formFieldCollections[u]));else e.preventDefault()},e.prototype.changeFormFields=function(e){var t=e.target;this.updateDataInSession(t)},e.prototype.calculateSignatureBounds=function(e,t,i,n,o,s,a){var r=i/e,l=n/t,d=this.pdfViewerBase.getZoomFactor(),h=0,p=0,c=!1,u=!1,f=0,m=0;if(o)h=this.pdfViewer.handWrittenSignatureSettings.width?this.pdfViewer.handWrittenSignatureSettings.width:150,p=this.pdfViewer.handWrittenSignatureSettings.height?this.pdfViewer.handWrittenSignatureSettings.height:100;else{var g=s?"100%"===s.style.width?s.clientWidth:parseFloat(s.style.width):this.ConvertPointToPixel(a.LineBounds.Width),y=s?"100%"===s.style.height?s.clientHeight:parseFloat(s.style.height):this.ConvertPointToPixel(a.LineBounds.Height),v=g/y,w=y/g,b=e/t,S=t/e,C=s?s.offsetParent.offsetParent.style.transform?s.offsetParent.offsetParent.style.transform:s.style.transform:a.RotationAngle;if(v>b||w>b||Math.abs(v-w)<=1){var x=0;w>b||Math.abs(v-w)<=1?(u=!0,x=w/S):(c=!0,x=v/b),"rotate(90deg)"===C||"rotate(270deg)"===C?(h=y/d,p=g/d):(c&&(f=g/d,h=g/x/d,p=y/d),u&&(m=y/d,h=g/d,p=y/x/d))}else"rotate(90deg)"===C||"rotate(270deg)"===C?(h=y/d,p=g/d):(h=g/d,p=y/d)}var M=(e-i)/2,I=(t-n)/2;if(c)M=M/e*f,M+=(f*r-h*r)/2,I=I/t*p;else if(u){M=M/e*h,I=I/t*m,I+=(m*l-p*l)/2}else M=M/e*h,I=I/t*p;return{currentLeftDiff:M,currentTopDiff:I,currentWidth:h*=r,currentHeight:p*=l}},e.prototype.updateSignatureAspectRatio=function(e,t,i,n){for(var o,s,a=os(es(e)),r=-1,l=-1,d=-1,h=-1,p=document.getElementById(this.pdfViewer.element.id+"_signatureCanvas_"),c=0;c<a.length;c++){var u=a[c];if(-1===r)r=parseFloat(u.x.toString()),d=parseFloat(u.x.toString()),l=parseFloat(u.y.toString()),h=parseFloat(u.y.toString());else{var f=parseFloat(u.x.toString()),m=parseFloat(u.y.toString());r>=f&&(r=f),l>=m&&(l=m),d<=f&&(d=f),h<=m&&(h=m)}}o=p?p.clientWidth:650,s=p?p.clientHeight:300;var g=d-r,y=h-l,v=this.calculateSignatureBounds(o,s,g,y,t,i,n);if(t){var w=this.pdfViewerBase.getZoomFactor(),b=this.pdfViewerBase.currentPageNumber-1,S=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+b);return{x:(parseFloat(S.style.width)/2-v.currentWidth/2)/w,y:(parseFloat(S.style.height)/2-v.currentHeight/2)/w,width:v.currentWidth,height:v.currentHeight}}return{left:v.currentLeftDiff,top:v.currentTopDiff,width:v.currentWidth,height:v.currentHeight}},e.prototype.updateDataInSession=function(e,t,i,n,o){this.pdfViewerBase.updateDocumentEditedProperty(!0);var s=[],a=" ",r=0,l=this.pdfViewerBase.getItemFromSessionStorage("_formfields");if(l&&!this.pdfViewer.formDesignerModule){var d=JSON.parse(l);(s=d.filter((function(t){return t.uniqueID===e.id}))).length>0&&(a=s[0].FieldName,r=d.filter((function(e){return e.FieldName===a})).length);for(var h=0;h<d.length;h++){var p=d[h];if(p.uniqueID===e.id||a===p.FieldName){if(e&&"text"===e.type||"password"===e.type||"textarea"===e.type){var c=e;c.classList.contains("e-pdfviewer-signatureformfields")||c.classList.contains("e-pdfviewer-signatureformfields-signature")?(t&&(p.Value=t),i&&(p.Bounds=i),n&&(p.FontFamily=n,p.FontSize=o)):(p.Text=e.value,p.Value=e.value)}else if("radio"===e.type){if(e.checked){for(var u=0;u<d.length;u++){var f=d[u];d[u].GroupName===e.name&&(d[u].Selected=!1)}if(e.value==p.Value){p.Selected=!0;break}p.Selected=!1}}else if("checkbox"===e.type){var m=e.id,g=d.filter((function(t){return t.GroupName===e.name&&"CheckBox"==t.Name}));for(u=0;u<g.length;u++){(f=g[u]).Selected=!1,f.checked=!1;var y=document.getElementById(f.uniqueID);y&&m!==y.id&&(y.Selected=!1,y.checked=!1,y.style.webkitAppearance="none")}e.checked?p.Selected=!0:p.Selected=!1}else if("select-one"===e.type&&0===e.size)for(var v=e.options[e.selectedIndex].text,w=e.children,b=0;b<w.length;b++)w[b].text===v&&(p.SelectedValue=v);else if("select-multiple"===e.type||e.size>0){v=e.selectedOptions;p.SelectedList=[];for(var S=0;S<v.length;S++)for(w=e.children,b=0;b<w.length;b++)w[b]===v[S]&&p.SelectedList.push(b);p.SelectedValue=e.value;var C=p.TextList?p.TextList.indexOf(e.value):0;p.selectedIndex=C>-1?C:0,p.SelectedList=[p.selectedIndex]}if(e.disabled&&(p.IsReadonly=!0),this.updateFormFieldsCollection(p),0==--r)break}else e&&null!=e.getAttribute("list")&&"text"===e.type&&p.uniqueID===e.list.id&&(p.SelectedValue=e.value);this.updateFormFieldsCollection(p)}window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_formfields"),this.pdfViewerBase.setItemInSessionStorage(d,"_formfields")}if(this.pdfViewer.formDesignerModule&&e&&e.id){var x=this.pdfViewer.nameTable[e.id.split("_")[0]];if(x&&x.wrapper&&x.wrapper.children[0]){x.value=e.value;var M=Wh(x.wrapper.children[0]).topLeft;this.pdfViewer.formDesignerModule.updateFormDesignerFieldInSessionStorage(M,x.wrapper.children[0],x.formFieldAnnotationType,x)}}},e.prototype.removeExistingFormFields=function(){var e=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),t=JSON.parse(e);if(t)for(var i=0;i<t.length;i++){if("RadioButton"===t[i].FormField.formFieldAnnotationType){var n;n=t[i].FormField.radiobuttonItem;for(var o=t[i].FormField.id.split("_")[0],s=0;s<n.length;s++){var a=n[s];a.id.split("_")[0]!==o&&this.pdfViewer.formDesignerModule.deleteFormField(a.id.split("_")[0])}}t[i].Key&&this.pdfViewer.formDesignerModule.deleteFormField(t[i].Key.split("_")[0])}},e.prototype.applyCommonProperties=function(e,t,i,n,o){var s=document.getElementById(this.pdfViewer.element.id+"input_"+t+"_"+i);if(s){var a=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+t);"text"===e.type&&s.parentElement!==a&&s.parentElement.remove(),s.remove()}var r,l,d,h,p=document.getElementById("signIcon_"+t+"_"+i),c=parseFloat(e.style.left),u=parseInt(e.style.top),f=parseFloat(e.style.width),m=parseFloat(e.style.height),g=this.pdfViewerBase.getZoomFactor();p&&!o&&(r=parseFloat(p.style.width),l=parseFloat(p.style.height),"rotate(90deg)"==p.style.transform&&(p.style.transform="rotate(0deg)",d=m/2,h=r*g,p.style.left=c-(d-r*g)+h/2+"px"),"rotate(180deg)"==p.style.transform&&(p.style.transform="rotate(0deg)",p.style.left=c+"px",p.style.top=u+"px"),"rotate(270deg)"==p.style.transform&&(p.style.transform="rotate(0deg)",d=m/2,h=r*g,p.style.left=c-(d-h)+h/2+"px",p.style.top=u+(f+l*g)+l*g/2+"px")),n.IsSignatureField&&this.isSignatureField?(e.className="e-pdfviewer-signatureformfields-signature",e.style.pointerEvents="none"):n.IsSignatureField?n.Value?(e.className="e-pdfviewer-signatureformfields-signature",e.style.pointerEvents="none"):e.className="e-pdfviewer-signatureformfields":"Button"!==n.Name&&(e.className="e-pdfviewer-formFields"),e.id=this.pdfViewer.element.id+"input_"+t+"_"+i,e.ariaLabel=this.pdfViewer.element.id+"input_"+t,e.style.zIndex=1e3},e.prototype.createFormFields=function(e,t,i,n,o){var s;switch(e.Name){case"Textbox":s=this.createTextBoxField(e,t,"text");break;case"Password":s=this.createTextBoxField(e,t,"password");break;case"RadioButton":s=this.createRadioBoxField(e,t,"radio");break;case"CheckBox":s=this.createRadioBoxField(e,t,"checkbox",n);break;case"DropDown":s=this.createDropDownField(e,t,i,n);break;case"ListBox":s=this.createListBoxField(e,t);break;case"InitialField":case"SignatureField":s=this.createSignatureField(e,t,i,n,o);var a=!1;0===e.Rotation&&(a=!0),e.Value&&""!==e.Value&&(this.renderExistingAnnnot(e,i,n,a),this.isSignatureRendered=!0,o++);break;case"Button":s=this.createButtonField(e,t);break;case"ink":this.pdfViewer.formDesignerModule&&e.Value&&""!==e.Value&&!this.isSignatureRendered&&this.renderExistingAnnnot(e,i,n);break;case"SignatureText":case"SignatureImage":e.Value&&""!==e.Value&&!this.isSignatureRendered&&this.renderExistingAnnnot(e,i,n)}return{currentField:s,count:o}},e.prototype.getFormFieldType=function(e){var t;switch(e.Name){case"Textbox":t="Textbox";break;case"Password":t="Password";break;case"RadioButton":t="RadioButton";break;case"CheckBox":t="CheckBox";break;case"DropDown":t="DropDown";break;case"ListBox":t="ListBox";break;case"SignatureField":t="SignatureField",e.IsInitialField&&(t="InitialField");break;case"InitialField":t="InitialField"}return t},e.prototype.createButtonField=function(e,t){var i=document.createElement("input");return e.Value&&(this.isBase64(e.Value)||this.isURL(e.Value))?(i.type="image",i.src=e.Value):i.type="button",i.className="e-pv-buttonItem",""!==e.Text?i.value=e.Text:i.value="",i.name=e.FieldName,i},e.prototype.isBase64=function(e){return/^data:([a-zA-Z]*\/[a-zA-Z+.-]*);base64,/.test(e)},e.prototype.isURL=function(e){try{return new URL(e),!0}catch(t){return!1}},e.prototype.createTextBoxField=function(e,t,i){var n;if(1!==e.Visible)return e.Multiline?(n=document.createElement("textarea")).style.resize="none":(n=document.createElement("input")).type=i,e.MaxLength>0&&(n.maxLength=e.MaxLength),this.addAlignmentPropety(e,n),""!==e.Text?n.value=e.Text:n.value="",this.pdfViewer.enableAutoComplete||(n.autocomplete="off"),n.name=e.FieldName,n},e.prototype.checkIsReadonly=function(e,t){for(var i=!1,n=0;n<this.readOnlyCollection.length;n++)if(t.id===this.readOnlyCollection[n]){i=!0;break}if(this.pdfViewer.formDesignerModule||this.pdfViewer.annotationModule||!e.IsInitialField&&!e.IsSignatureField||(i=!0),e.IsReadonly||!this.pdfViewer.enableFormFields||i)t.disabled=!0,t.style.cursor="default",t.style.backgroundColor="transparent";else{var o=e.BackColor;t.style.backgroundColor="rgba("+o.R+","+o.G+","+o.B+",0.2)";var s=e.FontColor;t.style.color="rgba("+s.R+","+s.G+","+s.B+",1)"}},e.prototype.formFieldsReadOnly=function(e){var t=document.getElementsByClassName("e-pdfviewer-formFields");this.makeformFieldsReadonly(t,e);var i=document.getElementsByClassName("e-pdfviewer-signatureformfields");this.makeformFieldsReadonly(i,e)},e.prototype.makeformFieldsReadonly=function(e,t){for(var i=0;i<e.length;i++)if(e[i]){var n=e[i];t?n.disabled=!1:(n.disabled=!0,n.style.cursor="default")}},e.prototype.applyTabIndex=function(e,t,i){t.tabIndex=e.TabIndex,this.maxTabIndex=Math.max(this.maxTabIndex,t.tabIndex),-1===this.minTabIndex&&(this.minTabIndex=t.tabIndex),this.minTabIndex=Math.min(this.minTabIndex,t.tabIndex),this.maintainTabIndex[i.toString()]=this.maxTabIndex,this.maintanMinTabindex[i.toString()]=this.minTabIndex},e.prototype.checkIsRequiredField=function(e,t){if(e.IsRequired)t.required=!0,t.style.border="1px solid red";else{var i=e.BorderColor;t.style.border=e.BorderWidth,t.style.borderColor="rgba("+i.R+","+i.G+","+i.B+",1)"}if("checkbox"!==t.type&&"radio"!==t.type){var n=e.BorderStyle;this.addBorderStylePropety(n,t)}},e.prototype.applyDefaultColor=function(e){("button"===e.type||"rgba(255, 255, 255, 0.2)"!==e.style.backgroundColor&&"rgba(0, 0, 0, 0.2)"!==e.style.backgroundColor)&&"rgba(218, 234, 247, 0.2)"!==e.style.backgroundColor||(e.style.backgroundColor="rgba(0, 20, 200, 0.2)"),"rgba(255, 255, 255, 0.2)"===e.style.color&&(e.style.color="black")},e.prototype.addAlignmentPropety=function(e,t){switch(e.Alignment){case 0:t.style.textAlign="left";break;case 1:t.style.textAlign="center";break;case 2:t.style.textAlign="right";break;case 3:t.style.textAlign="justify"}},e.prototype.addBorderStylePropety=function(e,t){switch(e){case 0:t.style.borderStyle="solid";break;case 1:t.style.borderStyle="dashed";break;case 2:case 4:t.style.borderStyle="outset";break;case 3:case 6:t.style.borderStyle="inset";break;case 5:t.style.borderStyle="dotted"}},e.prototype.createRadioBoxField=function(e,t,i,n){var o=document.createElement("input");return o.type=i,e.Selected?o.checked=!0:"checkbox"!==i||n||(o.style.webkitAppearance="none"),o.name=e.GroupName,o.value=e.Value,o},e.prototype.createDropDownField=function(e,t,i,n){var o=document.createElement("select"),s=e.TextList;if(e.Selected&&!n){var a=document.getElementById("editableDropdown"+t+"_"+i);a&&a.remove();var r=document.createElement("input");r.id="editableDropdown"+t+"_"+i,r.setAttribute("list",this.pdfViewer.element.id+"input_"+t+"_"+i);var l=e.LineBounds,d=e.Font;if(r.style.position="absolute",r.style.border="0px",this.applyPosition(r,l,d,t,e.Rotation),r.style.backgroundColor="rgba(0, 20, 200, 0.2)",r.className="e-pdfviewer-formFields",-1===e.selectedIndex&&(r.value=e.SelectedValue),n)n.appendChild(r);else document.getElementById(this.pdfViewer.element.id+"_textLayer_"+t).appendChild(r);r.addEventListener("focus",this.focusFormFields.bind(this)),r.addEventListener("blur",this.blurFormFields.bind(this)),r.addEventListener("click",this.updateFormFields.bind(this)),r.addEventListener("change",this.changeFormFields.bind(this)),r.addEventListener("keydown",this.updateFormFieldsValue.bind(this)),o=document.createElement("DATALIST")}for(var h=0;h<s.length;h++){var p=document.createElement("option");p.className="e-dropdownSelect",e.SelectedValue===s[h]||e.selectedIndex===h?p.selected=!0:p.selected=!1,p.innerHTML=s[h],o.appendChild(p)}return o.name=e.Text,o},e.prototype.createListBoxField=function(e,t){var i=document.createElement("select"),n=e.TextList;e.MultiSelect?i.multiple=!0:(i.multiple=!1,i.size=n.length);for(var o=0;o<n.length;o++){var s=document.createElement("option");s.className="e-pdfviewer-ListBox";for(var a=0;a<e.SelectedList.length;a++)e.SelectedList[a]===o&&(s.selected=!0);s.innerHTML=n[o],i.appendChild(s)}return i.name=e.Text,i},e.prototype.createSignatureField=function(e,t,i,n,o){var s=document.createElement("input");s.type="text",s.name=e.FieldName;var a=this.pdfViewerBase.getZoomFactor(),r=document.getElementById("signIcon_"+t+"_"+i);r&&!n&&r.remove(),this.pdfViewerBase.isInitialField=e.IsInitialField;var l=this.pdfViewerBase.isInitialField?"Initial":"Sign",d=this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings?19===this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.width?this.pdfViewerBase.isInitialField?27:19:this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.width:19,h=document.createElement("span"),p=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+t),c=e.LineBounds,u=(e.Font,this.ConvertPointToPixel(c.X)),f=this.ConvertPointToPixel(c.Y),g=this.ConvertPointToPixel(c.Width),y=this.ConvertPointToPixel(c.Height),v=this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings?this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.height>y*a/2?y*a/2:this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.height:y*a/2,w=d>g*a/2?g*a/2:d,b=this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings?this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.fontSize>v/2?10:this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.fontSize:10,C=b>w?w/2:b>v?v/2:b;h.style.position="absolute",h.id="signIcon_"+t+"_"+i;var x=this.getAngle(t),M={left:u,top:f,width:w,height:v},I=this.getBounds(M,t);return h.style.transform="rotate("+x+"deg)",h.style.left=I.left*a+"px",h.style.top=I.top*a+"px",ge.isDevice&&!this.pdfViewer.enableDesktopMode?(h.style.height="5px",h.style.width="10px",h.style.fontSize="3px"):(h.style.height=v+"px",h.style.width=w+"px",h.style.fontSize=C+"px",S()&&(h.style.fontSize=C-1+"px")),v+this.indicatorPaddingValue>y*a||w+this.indicatorPaddingValue>g*a||(h.style.padding="2px"),h.style.textAlign="center",h.style.boxSizing="content-box",h.innerHTML=this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings&&this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.text?this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.text:l,h.style.color=this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings&&this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.color?this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.color:"black",h.style.backgroundColor=this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings&&this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.backgroundColor?this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.backgroundColor:"orange",h.style.opacity=this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings&&this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.opacity?this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.opacity:1,m(p)||p.appendChild(h),this.addSignaturePath(e,o),s},e.prototype.addSignaturePath=function(e,t){this.isSignatureField=!1;var i=this.pdfViewerBase.getItemFromSessionStorage("_formfields");if(i)for(var n=JSON.parse(i),o=0;o<n.length;o++){var s=n[o];if("ink"!==s.Name&&"SignatureField"!==s.Name&&"SignatureImage"!==s.Name&&"SignatureText"!==s.Name||!this.pdfViewer.formDesigner?(s.FieldName===e.FieldName+"_"+t||s.FieldName===e.ActualFieldName+"_"+t)&&!m(e.ActualFieldName)&&s.Value&&""!==s.Value:s.FieldName===e.ActualFieldName+"_"+t||s.FieldName===e.FieldName+"_"+t){e.Value=s.Value,e.FontFamily=s.FontFamily,e.FontSize=s.FontSize,this.isSignatureField=!0,e.Bounds||(e.Bounds=s.LineBounds);break}}return this.isSignatureField},e.prototype.getBounds=function(e,t,i,n){var o=this.pdfViewerBase.pageSize[t];return i>0?this.getBoundsPosition(i,e,o,n):this.getBoundsPosition(o.rotation,e,o,n)},e.prototype.getBoundsPosition=function(e,t,i,n){var o;if(n){switch(e){case 0:o=t;break;case 1:o={left:i.width-t.top-t.height-(t.width/2-t.height/2),top:t.left+(t.width/2-t.height/2),width:t.width,height:t.height};break;case 2:o={left:i.width-t.left-t.width,top:i.height-t.top-t.height,width:t.width,height:t.height};break;case 3:o={left:t.top-(t.width/2-t.height/2),top:i.height-t.left-t.width+(t.width/2-t.height/2),width:t.width,height:t.height}}o||(o=t)}else{switch(e){case 90:case 1:o={left:i.width-t.top-t.height,top:t.left,width:t.height,height:t.width};break;case 180:case 2:o={left:i.width-t.left-t.width,top:i.height-t.top-t.height,width:t.width,height:t.height};break;case 270:case 3:o={left:t.top,top:i.height-t.left-t.width,width:t.height,height:t.width};break;case 0:o=t}o||(o=t)}return o},e.prototype.applyPosition=function(e,t,i,n,o,s){if(t){var a=0,r={left:this.ConvertPointToPixel(t.X),top:this.ConvertPointToPixel(t.Y),width:this.ConvertPointToPixel(t.Width),height:this.ConvertPointToPixel(t.Height)},l=this.getBounds(r,n,o,s);null!==i&&i.Height&&(e.style.fontFamily=i.Name,i.Italic&&(e.style.fontStyle="italic"),i.Bold&&(e.style.fontWeight="Bold"),a=this.ConvertPointToPixel(i.Size)),this.pdfViewerBase.setStyleToTextDiv(e,l.left,l.top,a,l.width,l.height,!1)}},e.prototype.renderExistingAnnnot=function(e,t,i,n){if(!i){var o=void 0,s=void 0,a=void 0,r=void 0,l=void 0;(o=e.Bounds&&"ink"!==e.Name?e.Bounds:e.LineBounds).x||o.y||o.width||o.height?(s=o.x,a=o.y,r=o.width,l=o.height):(s=this.ConvertPointToPixel(o.X),a=this.ConvertPointToPixel(o.Y),r=this.ConvertPointToPixel(o.Width),l=this.ConvertPointToPixel(o.Height));var d=parseFloat(e.PageIndex),h={left:s,top:a,width:r,height:l},p=this.updateSignatureBounds(h,d,n),c=void 0,u=e.FontFamily?e.FontFamily:e.fontFamily;if(e.Value.split("base64,")[1])c={id:this.pdfViewer.element.id+"input_"+d+"_"+t,bounds:p,pageIndex:d,data:e.Value,modifiedDate:"",shapeAnnotationType:"SignatureImage",opacity:1,rotateAngle:n?this.getAngle(d):0,annotName:"SignatureField",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""}};else if(!u||e.Value&&e.Value.startsWith("M")&&e.Value.split(",")[1].split(" ")[1].startsWith("L")){var f,g={left:p.x,top:p.y,width:p.width,height:p.height};f=this.updateSignatureBounds(g,d,!1),c={id:this.pdfViewer.element.id+"input_"+d+"_"+t,bounds:f,pageIndex:d,data:e.Value,modifiedDate:"",shapeAnnotationType:"Path",opacity:1,rotateAngle:0,annotName:"SignatureField",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""}}}else(c={id:this.pdfViewer.element.id+"input_"+d+"_"+t,bounds:p,pageIndex:d,data:e.Value,modifiedDate:"",shapeAnnotationType:"SignatureText",opacity:1,rotateAngle:n?this.getAngle(d):0,annotName:"SignatureField",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""},fontFamily:e.FontFamily,fontSize:e.FontSize}).fontFamily="TimesRoman"===u?"Times New Roman":u,c.fontSize=e.FontSize?e.FontSize:e.fontSize;if("SignatureField"!==e.Name&&"InitialField"!==e.Name||m(e.id)){var y=document.getElementById(c.id);y&&y.classList.contains("e-pdfviewer-signatureformfields-signature")&&this.pdfViewer.annotation.deleteAnnotationById(c.id),this.pdfViewer.add(c),y&&(this.updateDataInSession(y,c.data,c.bounds),this.pdfViewer.fireSignatureAdd(c.pageIndex,c.id,c.shapeAnnotationType,c.bounds,c.opacity,c.strokeColor,c.thickness,c.data))}else{var v=e.id,w=document.getElementById(v+"_content_html_element"),b=this.pdfViewer.nameTable[v];c.id=b.id+"_content";var S=this.pdfViewer.add(c);if(b.wrapper.children.push(S.wrapper),!m(w)&&this.isSignatureField)(C=w.children[0].children[0]).style.pointerEvents="none",C.className="e-pdfviewer-signatureformfields-signature",C.parentElement.style.pointerEvents="none";else if(!m(w)&&e.Value){var C;(C=w.children[0].children[0]).style.pointerEvents="none",C.className="e-pdfviewer-signatureformfields-signature",C.parentElement.style.pointerEvents="none"}}if(e.Bounds=c.bounds,this.pdfViewer.formDesignerModule){var x=this.pdfViewerBase.getZoomFactor();c.bounds={x:s*x,y:a*x,width:r*x,height:l*x},this.updateSignatureDataInSession(c,c.id)}var M=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+d);this.pdfViewer.renderDrawing(M,d)}},e.prototype.updateSignatureBounds=function(e,t,i){var n=this.pdfViewerBase.pageSize[t];return n?i?1===n.rotation?{x:n.width-e.top-e.height-(e.width/2-e.height/2),y:e.left+(e.width/2-e.height/2),width:e.width,height:e.height}:2===n.rotation?{x:n.width-e.left-e.width,y:n.height-e.top-e.height,width:e.width,height:e.height}:3===n.rotation?{x:e.top-(e.width/2-e.height/2),y:n.height-e.left-e.width+(e.width/2-e.height/2),width:e.width,height:e.height}:{x:e.left,y:e.top,width:e.width,height:e.height}:1===n.rotation?{x:n.width-e.top-e.height,y:e.left,width:e.height,height:e.width}:2===n.rotation?{x:n.width-e.left-e.width,y:n.height-e.top-e.height,width:e.width,height:e.height}:3===n.rotation?{x:e.top,y:n.height-e.left-e.width,width:e.height,height:e.width}:{x:e.left,y:e.top,width:e.width,height:e.height}:{x:e.left,y:e.top,width:e.width,height:e.height}},e.prototype.resetFormFields=function(){for(var e=this.pdfViewer.formFieldCollections,t=0;t<e.length;t++){var i=e[t];if(this.currentTarget=document.getElementById(i.id),"Textbox"===i.type)this.currentTarget.value=i.value;else if("RadioButton"===i.type)this.currentTarget.checked=i.value,i.value&&this.updateDataInSession(this.currentTarget);else if("DropDown"===i.type)this.currentTarget.value=i.value;else if("CheckBox"===i.type)this.currentTarget.checked=i.value;else if("SignatureField"===i.type){var n=this.pdfViewer.nameTable[i.id];n&&(this.currentTarget&&"e-pdfviewer-signatureformfields-signature"===this.currentTarget.className&&(this.currentTarget.className="e-pdfviewer-signatureformfields",this.currentTarget.style.pointerEvents="",this.updateDataInSession(this.currentTarget,"")),this.pdfViewer.remove(n),this.pdfViewer.renderDrawing())}"RadioButton"!==i.type&&"SignatureField"!==i.type&&this.updateDataInSession(this.currentTarget)}},e.prototype.clearFormFieldStorage=function(){Math.round(JSON.stringify(window.sessionStorage).length/1024);if(this.pdfViewerBase.isStorageExceed){for(var e=window.sessionStorage.length,t=[],i=0;i<e;i++)window.sessionStorage.key(i)&&window.sessionStorage.key(i).split("_")[3]&&("formfields"===window.sessionStorage.key(i).split("_")[3]||"formDesigner"===window.sessionStorage.key(i).split("_")[3])&&(this.pdfViewerBase.formFieldStorage[window.sessionStorage.key(i)]=window.sessionStorage.getItem(window.sessionStorage.key(i)),t.push(window.sessionStorage.key(i)));if(t)for(i=0;i<t.length;i++)window.sessionStorage.removeItem(t[i])}},e.prototype.clearFormFields=function(e){var t=this.pdfViewerBase.getItemFromSessionStorage("_formfields");if(t){var i=void 0;i=e?[e]:JSON.parse(t);for(var n=!0,o=0;o<i.length;o++){var s=i[o];if(e&&(s.uniqueID=e.id,s.Name=e.type),this.currentTarget=document.getElementById(s.uniqueID),"Textbox"===s.Name)this.currentTarget.value="";else if("RadioButton"===s.Name)n&&(this.currentTarget.checked=!0,this.updateDataInSession(this.currentTarget),n=!1);else if("DropDown"===s.Name)this.currentTarget.value=s.TextList[0];else if("CheckBox"===s.Name)this.currentTarget.checked=!1;else if("SignatureField"===s.Name){var a=this.pdfViewer.nameTable[s.uniqueID];a&&(this.currentTarget&&"e-pdfviewer-signatureformfields-signature"===this.currentTarget.className&&(this.currentTarget.className="e-pdfviewer-signatureformfields",this.currentTarget.style.pointerEvents="",this.currentTarget.parentElement.style.pointerEvents="",this.updateDataInSession(this.currentTarget,""),e&&(e.value="",e.signatureType=[e.signatureType],e.signatureType[0]="")),this.pdfViewer.remove(a),this.pdfViewer.renderDrawing())}"SignatureField"!==s.Name&&"ink"!==s.Name&&"RadioButton"!==s.Name&&this.updateDataInSession(this.currentTarget)}}},e.prototype.ConvertPointToPixel=function(e){return e*(96/72)},e.prototype.destroy=function(){this.currentTarget=null,this.readOnlyCollection=[],this.pdfViewerBase&&this.pdfViewerBase.signatureModule&&this.pdfViewerBase.signatureModule.destroy()},e.prototype.getModuleName=function(){return"FormFields"},e.prototype.getTextWidth=function(e,t,i){var n,o=document.createElement("canvas").getContext("2d");return t&&(n=t+"px "+i),o.font=n||getComputedStyle(document.body).font,o.measureText(e).width},e.prototype.getFontSize=function(e){return e},e}(),Pc=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Oc=function(e){function t(){var t=e.call(this)||this;return t.imageSource="",t.printID="",t.imageScale="None",t.imageAlign="None",t.stretch="Stretch",t}return Pc(t,e),Object.defineProperty(t.prototype,"source",{get:function(){return this.imageSource},set:function(e){this.imageSource=e,this.isDirt=!0},enumerable:!0,configurable:!0}),t.prototype.measure=function(e){return this.isDirt&&("Stretch"!==this.stretch||void 0===this.width&&void 0===this.height)&&(this.contentSize=function(e,t){var i="measureElement";window[i].style.visibility="visible";var n=window[i].children[1];n.setAttribute("src",e);var o=n.getBoundingClientRect(),s=o.width,a=o.height;return t=new Cd(s,a),window[i].style.visibility="hidden",t}(this.source,this.contentSize),this.isDirt=!1),void 0!==this.width&&void 0!==this.height?(this.desiredSize=new Cd(this.width,this.height),this.contentSize=this.desiredSize):this.desiredSize=this.contentSize,this.desiredSize=this.validateDesiredSize(this.desiredSize,e),this.desiredSize},t.prototype.arrange=function(e){return this.actualSize=new Cd(this.desiredSize.width,this.desiredSize.height),this.updateBounds(),this.actualSize},t}(Gh),Bc=function(){function e(e,t){this.renderer=null,this.isSvgMode=!0,this.diagramId=e,this.element=Rh(this.diagramId),this.isSvgMode=t,this.renderer=new zp}return e.prototype.renderElement=function(e,t,i,n,o,s,a,r){e instanceof ep?(!1,this.renderContainer(e,t,i,n,o,s,a,r)):e instanceof Oc?this.renderImageElement(e,t,n,o,a):e instanceof sp?this.renderPathElement(e,t,n,o,a):e instanceof Kh?this.renderTextElement(e,t,n,o,a):this.renderRect(e,t,n,o)},e.prototype.renderImageElement=function(e,t,i,n,o){var s,a,r,l,d=this.getBaseAttributes(e,i);if(d.cornerRadius=0,this.renderer.drawRectangle(t,d),"Stretch"===e.stretch)s=e.actualSize.width,a=e.actualSize.height;else{var h=e.contentSize.width,p=e.contentSize.height,c=d.width/h,u=d.height/p,f=void 0;switch(e.stretch){case"Meet":s=h*(f=Math.min(c,u)),a=p*f,d.x+=Math.abs(d.width-s)/2,d.y+=Math.abs(d.height-a)/2;break;case"Slice":c=d.width/h,u=d.height/p,s=h*(f=Math.max(c,u)),a=p*f,r=d.width/s*h,l=d.height/a*p;break;case"None":s=h,a=p}}d.width=s,d.height=a,d.sourceWidth=r,d.sourceHeight=l,d.source=e.source,d.alignment=e.imageAlign,d.scale=e.imageScale,d.printID=e.printID,this.renderer.drawImage(t,d,n,o)},e.prototype.renderPathElement=function(e,t,i,n,o){var s=this.getBaseAttributes(e,i);s.data=e.absolutePath,s.data=e.absolutePath;e.id;this.isSvgMode||(s.x=s.x,s.y=s.y),this.renderer.drawPath(t,s)},e.prototype.renderTextElement=function(e,t,i,n,o){var s=this.getBaseAttributes(e,i);s.cornerRadius=0,s.whiteSpace=Zh(e.style.whiteSpace,e.style.textWrapping),s.content=e.content,s.breakWord=Yh(e.style.textWrapping),s.textAlign=qh(e.style.textAlign),s.color=e.style.color,s.italic=e.style.italic,s.bold=e.style.bold,s.fontSize=e.style.fontSize,s.fontFamily=e.style.fontFamily,s.textOverflow=e.style.textOverflow,s.textDecoration=e.style.textDecoration,s.doWrap=e.doWrap,s.wrapBounds=e.wrapBounds,s.childNodes=e.childNodes,s.dashArray="",s.strokeWidth=0,s.fill=e.style.fill;e.content?e.content:e.id;this.renderer.drawRectangle(t,s),this.renderer.drawText(t,s)},e.prototype.renderContainer=function(e,t,i,n,o,s,a,r){n={tx:0,ty:0,scale:1};if(this.diagramId,this.renderRect(e,t,n,o),e.hasChildren())for(var l=0,d=e.children;l<d.length;l++){var h=d[l];this.renderElement(h,t,i,n,o,!0,a,r)}},e.prototype.renderRect=function(e,t,i,n){var o=this.getBaseAttributes(e,i);o.cornerRadius=e.cornerRadius||0;e.id;this.renderer.drawRectangle(t,o)},e.prototype.getBaseAttributes=function(e,t){var i={width:e.actualSize.width,height:e.actualSize.height,x:e.offsetX-e.actualSize.width*e.pivot.x+.5,y:e.offsetY-e.actualSize.height*e.pivot.y+.5,fill:e.style.fill,stroke:e.style.strokeColor,angle:e.rotateAngle+e.parentTransform,pivotX:e.pivot.x,pivotY:e.pivot.y,strokeWidth:e.style.strokeWidth,dashArray:e.style.strokeDashArray||"",opacity:e.style.opacity,visible:e.visible,id:e.id,gradient:e.style.gradient};return t&&(i.x+=t.tx,i.y+=t.ty),i},e}(),zc=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),jc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.measureChildren=void 0,t}return zc(t,e),t.prototype.measure=function(t){var i=void 0,n=void 0;if(this.hasChildren()){for(var o=0,s=this.children;o<s.length;o++){var a=s[o];if(a instanceof Kh){if(!a.canMeasure)break;t.width=t.width||this.maxWidth||this.minWidth,a.measure(t)}else a instanceof Kh||a.measure(t);var r=a.desiredSize.clone();0!==a.rotateAngle&&(r=Uh(r,a.rotateAngle));var l=r.width+a.margin.right,d=r.height+a.margin.bottom,h=new Nh(a.margin.left,a.margin.top,l,d);if(a.float)if(void 0!==a.getAbsolutePosition(r))continue;a instanceof Kh&&!(a instanceof Kh&&a.canConsiderBounds)||(void 0===n?n=h:n.uniteRect(h))}if(n){var p,c;p=Math.max(n.left,0),c=Math.max(n.top,0),i=new Cd(n.width+p,n.height+c)}}return i=e.prototype.validateDesiredSize.call(this,i,t),e.prototype.stretchChildren.call(this,i),this.desiredSize=i,i},t.prototype.arrange=function(t){if(this.outerBounds=new Nh,this.hasChildren()){var i,n;i=this.offsetY-t.height*this.pivot.y,n=this.offsetX-t.width*this.pivot.x;for(var o=0,s=this.children;o<s.length;o++){var a=s[o];if(0!==(a.transform&ch.Parent)){a.parentTransform=this.parentTransform+this.rotateAngle;var r=a.desiredSize.clone(),l=void 0,d={x:0,y:0},h=n,p=i;if("Point"===a.relativeMode){var c=a.getAbsolutePosition(t);void 0!==c&&(h+=c.x,p+=c.y)}if(d={x:(l="Object"===a.relativeMode?this.alignChildBasedOnParent(a,r,t,h,p):this.alignChildBasedOnaPoint(a,h,p)).x+r.width/2,y:l.y+r.height/2},a.rotateValue){var u={x:this.offsetX+(a.rotateValue.x||0),y:this.offsetY+(a.rotateValue.y||0)},f={x:this.offsetX,y:this.offsetY},m=0|a.rotateValue.angle,g=Ls();Os(g,m,f.x,f.y),d=Ps(g,u)}e.prototype.findChildOffsetFromCenter.call(this,a,d)}"Stretch"===a.horizontalAlignment||"Stretch"===a.verticalAlignment?a.arrange(t):a instanceof Kh&&a.canMeasure?(a.arrange(a.desiredSize),this.outerBounds.uniteRect(a.outerBounds)):a instanceof Kh||(a.arrange(a.desiredSize),this.outerBounds.uniteRect(a.outerBounds))}}return this.actualSize=t,this.updateBounds(),this.outerBounds.uniteRect(this.bounds),t},t.prototype.alignChildBasedOnParent=function(e,t,i,n,o){switch(e.horizontalAlignment){case"Auto":case"Left":n+=e.margin.left;break;case"Right":n+=i.width-t.width-e.margin.right;break;case"Stretch":case"Center":n+=i.width/2-t.width/2}switch(e.verticalAlignment){case"Auto":case"Top":o+=e.margin.top;break;case"Bottom":o+=i.height-t.height-e.margin.bottom;break;case"Stretch":case"Center":o+=i.height/2-t.height/2}return{x:n,y:o}},t.prototype.alignChildBasedOnaPoint=function(e,t,i){switch(t+=e.margin.left-e.margin.right,i+=e.margin.top-e.margin.bottom,e.horizontalAlignment){case"Auto":case"Left":break;case"Stretch":case"Center":t-=e.desiredSize.width*e.pivot.x;break;case"Right":t-=e.desiredSize.width}switch(e.verticalAlignment){case"Auto":case"Top":break;case"Stretch":case"Center":i-=e.desiredSize.height*e.pivot.y;break;case"Bottom":i-=e.desiredSize.height}return{x:t,y:i}},t}(ep),Rc=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),_c=function(e){function t(t){var i=e.call(this)||this;return i.templateFn=i.templateCompiler(t),i}return Rc(t,e),t.prototype.templateCompiler=function(e){if(e){try{if(document.querySelectorAll(e).length)return Mi(document.querySelector(e).innerHTML.trim())}catch(t){return Mi(e)}}},t.prototype.getNodeTemplate=function(){return this.templateFn},t}(Gh),Hc=function(){function e(e){this.isDynamicStamps=!1,this.pdfViewer=e,this.renderer=new Bc("this.pdfViewer.element.id",!1),this.svgRenderer=new Rp}return e.prototype.renderLabels=function(e){var t=e.annotations;if(t)for(var i=0;i<t.length;i++){var n=t[parseInt(i.toString(),10)];this.initObject(n)}},e.prototype.createNewZindexTable=function(e){var t=new Vd;return this.pdfViewer.zIndex++,t.pageId=this.pdfViewer.zIndex,this.pdfViewer.zIndexTable.push(t),t},e.prototype.getPageTable=function(e){var t;if(void 0!==this.pdfViewer.zIndexTable.length){for(var i=!0,n=0;n<this.pdfViewer.zIndexTable.length;n++)if(this.pdfViewer.zIndexTable[parseInt(n.toString(),10)].pageId===e){i=!1,t=this.pdfViewer.zIndexTable[parseInt(n.toString(),10)];break}i&&((t=this.createNewZindexTable(e)).pageId=e)}else t=this.createNewZindexTable(e);return t},e.prototype.setZIndex=function(e,t){if(void 0!==t.pageIndex){var i=this.getPageTable(t.pageIndex);if(-1===t.zIndex)i.zIndex++,t.zIndex=i.zIndex,i.objects.push(t);else{t.zIndex;var n=i.objects.length;t.zIndex=n++,i.objects.push(t)}}},e.prototype.initObject=function(e){return this.setZIndex(this.pdfViewer.zIndex,e),function(){var e="measureElement";if(window[e])window[e].usageCount+=1;else{var t,i=_h("div",{id:"measureElement",style:"visibility:hidden ; height: 0px ; width: 0px; overflow: hidden;"}),n=_h("span",{style:"display:inline-block ; line-height: normal"});i.appendChild(n),t=_h("img",{}),i.appendChild(t);var o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("xlink","http://www.w3.org/1999/xlink"),i.appendChild(o);var s=document.createElementNS("http://www.w3.org/2000/svg","path");o.appendChild(s),document.createTextNode("");var a=document.createElementNS("http://www.w3.org/2000/svg","text");a.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),o.appendChild(a),window[e]=i,window[e].usageCount=1,document.body.appendChild(i)}}(),_s(e)?(this.initLine(e),e.wrapper.measure(new Cd(void 0,void 0)),e.wrapper.arrange(e.wrapper.desiredSize)):this.initNode(e),e.wrapper,this.pdfViewer.nameTable[e.id]=e,e.formFieldAnnotationType&&this.nodePropertyChange(e,{bounds:{width:e.bounds.width,height:e.bounds.height}}),e},e.prototype.initNode=function(e){var t,i=this.initContainer(e);i.children||(i.children=[]),t||(t=this.init(e,i)),i.rotateAngle=e.rotateAngle,i.measure(new Cd(e.wrapper.width,e.wrapper.height)),i.arrange(i.desiredSize),this.isDynamicStamps&&(this.pdfViewer.annotation.stampAnnotationModule.updateSessionStorage(e,null,"dynamicStamp"),this.isDynamicStamps=!1)},e.prototype.init=function(e,t){var i;i=new Gh;var n=this.pdfViewer.annotationModule?this.pdfViewer.annotationModule.findAnnotationSettings(e):{},o=0,s=0,a=0,r=0;(n.minWidth||n.maxWidth||n.minHeight||n.maxHeight)&&(o=n.maxHeight?n.maxHeight:2e3,s=n.maxWidth?n.maxWidth:2e3,a=n.minHeight?n.minHeight:0,r=n.minWidth?n.minWidth:0);var l=!1;return(a||r||o||s)&&(l=!0),(i=e.formFieldAnnotationType?this.initFormFields(e,i,t):this.initAnnotationObject(e,undefined,i,t,!1,undefined,l,o,s,r,a)).id=e.id+"_content",i.relativeMode="Object","Stamp"!==e.shapeAnnotationType&&(void 0!==e.bounds.width&&(i.width=e.bounds.width,l&&(i.width<r||i.width>s)&&(i.width<r&&(i.width=r),i.width>s&&(i.width=s))),i.horizontalAlignment="Stretch",void 0!==e.bounds.height&&(i.height=e.bounds.height,l&&(i.height<a||i.width>o)&&(i.height<a&&(i.height=a),i.height>o&&(i.height=o))),Hs(e,i),this.pdfViewer.viewerBase.drawSignatureWithTool&&"SignatureText"===e.shapeAnnotationType&&(i.style.strokeWidth=0)),i.isRectElement=!0,i.verticalAlignment="Stretch",i},e.prototype.initFormFields=function(e,t,i){switch(e.formFieldAnnotationType){case"Textbox":case"PasswordField":case"Checkbox":case"RadioButton":case"DropdownList":case"ListBox":case"SignatureField":case"InitialField":(t=new _c).id=e.id+"_content",i.children.push(t)}return t},e.prototype.initAnnotationObject=function(e,t,i,n,o,s,a,r,l,d,h){switch(e.shapeAnnotationType){case"Ellipse":if((t=new sp).data="M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",i=t,n.children.push(i),e.enableShapeLabel)(m=this.textElement(e)).content=e.labelContent,m.style.color=e.fontColor,m.style.strokeColor=e.labelBorderColor,m.style.fill=e.labelFillColor,m.style.fontSize=e.fontSize,m.style.fontFamily=e.fontFamily,m.style.opacity=e.labelOpacity,n.children.push(m);break;case"Path":(t=new sp).data=e.data,i=t,n.children.push(i);break;case"HandWrittenSignature":case"Ink":(t=new sp).data=e.data,t.style.strokeColor=e.strokeColor,t.style.strokeWidth=e.thickness,t.style.opacity=e.opacity,i=t,n.children.push(i);break;case"Polygon":(t=new sp).data=fp(e.vertexPoints),i=t,n.children.push(i);break;case"Stamp":if(o=!0,this.isDynamicStamps=!0,e&&e.annotationAddMode&&("Existing Annotation"===e.annotationAddMode||"Imported Annotation"===e.annotationAddMode)&&(e.bounds.width=e.bounds.width-20,e.bounds.height=e.bounds.height-20),e.isDynamicStamp){n.horizontalAlignment="Left",(i=s=new Gh).cornerRadius=10,i.style.fill=e.stampFillColor,i.style.strokeColor=e.stampStrokeColor,n.children.push(i);var p=this.textElement(e);(p=new Kh).style.fontFamily="Helvetica",p.style.fontSize=14,p.style.italic=!0,p.style.bold=!0,p.style.color=e.fillColor,p.rotateValue=void 0,p.content=e.dynamicText,p.relativeMode="Point",p.margin.left=10,p.margin.bottom=-7,p.setOffsetWithRespectToBounds(0,.57,null),p.relativeMode="Point",n.children.push(p),(u=new sp).id=Hh()+"_stamp",u.data=e.data,u.width=e.bounds.width,a&&e.bounds.width>l&&(u.width=l,e.bounds.width=l),u.height=e.bounds.height/2,a&&e.bounds.height>r&&(u.height=r/2,e.bounds.height=r/2),u.rotateValue=void 0,u.margin.left=10,u.margin.bottom=-5,u.relativeMode="Point",u.setOffsetWithRespectToBounds(0,.1,null);var c=u;u.style.fill=e.fillColor,u.style.strokeColor=e.strokeColor,u.style.opacity=e.opacity,i.width=e.bounds.width+20,i.height=e.bounds.height+20,i.style.opacity=e.opacity,n.children.push(c)}else{var u;n.horizontalAlignment="Left",(i=s=new Gh).cornerRadius=10,i.style.fill=e.stampFillColor,i.style.strokeColor=e.stampStrokeColor,n.children.push(i),(u=new sp).id=Hh()+"_stamp",u.data=e.data,u.width=e.bounds.width,a&&e.bounds.width>l&&(u.width=l,e.bounds.width=l),u.height=e.bounds.height,a&&e.bounds.height>r&&(u.height=r,e.bounds.height=r),u.minWidth=u.width/2,u.minHeight=u.height/2;c=u;u.style.fill=e.fillColor,u.style.strokeColor=e.strokeColor,u.style.opacity=e.opacity,i.width=e.bounds.width+20,i.height=e.bounds.height+20,i.minWidth=u.width/2,i.minHeight=u.height/2,i.style.opacity=e.opacity,n.children.push(c),n.minHeight=i.minHeight+20,n.minWidth=i.minWidth+20}break;case"Image":case"SignatureImage":var f=new Oc;f.source=e.data,(i=f).style.strokeWidth=0,n.children.push(i);break;case"Rectangle":var m;if(i=s=new Gh,n.children.push(i),e.enableShapeLabel)(m=this.textElement(e)).content=e.labelContent,m.style.color=e.fontColor,m.style.strokeColor=e.labelBorderColor,m.style.fill=e.labelFillColor,m.style.fontSize=e.fontSize,m.style.fontFamily=e.fontFamily,m.style.opacity=e.labelOpacity,n.children.push(m);break;case"Perimeter":(t=new sp).data="M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",i=t,Hs(e,t),n.children.push(i),(s=new Gh).id="perimeter_"+Hh(),s.height=.2,s.width=.2,s.transform=ch.Self,s.horizontalAlignment="Stretch",this.setNodePosition(s,e),s.rotateAngle=e.rotateAngle,Hs(e,s),n.children.push(s);var g=this.textElement(e);(g=new Kh).content=g.content=Ws([{x:e.bounds.x,y:e.bounds.y},{x:e.bounds.x+e.bounds.width,y:e.bounds.y+e.bounds.height}]).toString(),g.rotateValue={y:-10,angle:e.rotateAngle},n.children.push(g);break;case"Radius":(t=new sp).data="M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",i=t,Hs(e,t),n.children.push(i),(s=new Gh).id="radius_"+Hh(),s.height=.2,s.width=e.bounds.width/2,s.transform=ch.Self,this.setNodePosition(s,e),s.rotateAngle=e.rotateAngle,Hs(e,s),n.children.push(s);var y=this.textElement(e);e.enableShapeLabel&&(y.style.color=e.fontColor,y.style.strokeColor=e.labelBorderColor,y.style.fill=e.labelFillColor,y.style.fontSize=e.fontSize,y.style.fontFamily=e.fontFamily,y.style.opacity=e.labelOpacity);Ws([{x:e.bounds.x,y:e.bounds.y},{x:e.bounds.x+e.bounds.width,y:e.bounds.y+e.bounds.height}]);!this.pdfViewer.enableImportAnnotationMeasurement&&e.notes&&""!==e.notes?y.content=e.notes:y.content=this.pdfViewer.annotation.measureAnnotationModule.setConversion(e.bounds.width/2*this.pdfViewer.annotation.measureAnnotationModule.pixelToPointFactor,e),y.rotateValue={y:-10,x:e.bounds.width/4,angle:e.rotateAngle},n.children.push(y);break;case"StickyNotes":var v=new Oc;v.source=e.data,v.width=e.bounds.width,v.height=e.bounds.height,v.style.strokeColor=e.strokeColor,v.style.strokeWidth=0,i=v,n.children.push(i);break;case"SignatureText":var w=new Gh;w.style.strokeWidth=0,(i=w).style.strokeWidth=0,n.style.strokeWidth=0,n.children.push(i);var b=this.textElement(e);b.style.fontFamily=e.fontFamily,b.style.fontSize=e.fontSize,b.style.textAlign="Left",b.rotateValue=void 0,b.content=e.data,b.style.strokeWidth=0,n.children.push(b);break;case"FreeText":i=new Gh,n.children.push(i);var S=this.textElement(e);(S=new Kh).style.fontFamily=e.fontFamily,S.style.fontSize=e.fontSize,S.style.textAlign="Left","center"===e.textAlign.toLowerCase()?S.style.textAlign="Center":"right"===e.textAlign.toLowerCase()?S.style.textAlign="Right":"justify"===e.textAlign.toLowerCase()&&(S.style.textAlign="Justify"),S.style.color=e.fontColor,S.style.bold=e.font.isBold,S.style.italic=e.font.isItalic,!0===e.font.isUnderline?S.style.textDecoration="Underline":!0===e.font.isStrikeout&&(S.style.textDecoration="LineThrough"),S.rotateValue=void 0,S.content=e.dynamicText,S.style.opacity=e.opacity,S.margin.left=4,S.margin.top=e.fontSize/16*5,this.pdfViewer.freeTextSettings.enableAutoFit?S.style.textWrapping="Wrap":S.style.textWrapping="WrapWithOverflow",S.relativeMode="Point",S.setOffsetWithRespectToBounds(0,0,null),S.relativeMode="Point",n.children.push(S)}return i.id=e.id+"_content",i.relativeMode="Object",o||(void 0!==e.bounds.width&&(i.width=e.bounds.width,a&&(i.width<d||i.width>l)&&(i.width<d&&(i.width=d),i.width>l&&(i.width=l))),i.horizontalAlignment="Stretch",void 0!==e.bounds.height&&(i.height=e.bounds.height,a&&(i.height<h||i.width>r)&&(i.height<h&&(i.height=h),i.height>r&&(i.height=r))),Hs(e,i)),i.isRectElement=!0,i.verticalAlignment="Stretch",i},e.prototype.textElement=function(e){var t=new Kh;return Hs(e,t),t.horizontalAlignment="Center","SignatureText"===e.shapeAnnotationType?t.verticalAlignment="Center":t.verticalAlignment="Top",t.relativeMode="Object",t.setOffsetWithRespectToBounds(.5,.5,"Absolute"),t},e.prototype.setNodePosition=function(e,t){if("Perimeter"===t.shapeAnnotationType)e.offsetX=t.bounds.x+t.bounds.width/2,e.offsetY=t.bounds.y+t.bounds.height/2;else if("Radius"===t.shapeAnnotationType){var i={x:t.bounds.x+t.bounds.width/2+t.bounds.width/4,y:t.bounds.y+t.bounds.height/2},n={x:t.bounds.x+t.bounds.width/2,y:t.bounds.y+t.bounds.height/2},o=Ls();Os(o,t.rotateAngle,n.x,n.y);var s=Ps(o,i),a={x:s.x,y:s.y};e.offsetX=a.x,e.offsetY=a.y,e.width=t.bounds.width/2}},e.prototype.initContainer=function(e){e.id||(e.id=Hh());var t=new jc;return t.id=e.id,t.offsetX=e.bounds.x+.5*e.bounds.width,t.offsetY=e.bounds.y+.5*e.bounds.height,t.style.fill="transparent",t.style.strokeColor="transparent",t.rotateAngle=e.rotateAngle,e.wrapper=t,t},e.prototype.initLine=function(e){e.id||(e.id=Hh());var t=new jc,i=new sp;i.id=e.id+"_path";var n=new sp,o=new sp;if(e.vertexPoints.length){e.sourcePoint=e.vertexPoints[0],e.targetPoint=e.vertexPoints[e.vertexPoints.length-1];for(var s=0;s<e.vertexPoints.length;s++)0!==s&&s!==e.vertexPoints.length-1&&e.segments.push(e.vertexPoints[parseInt(s.toString(),10)])}i=function(e,t){var i;return i=ap(e),t.staticSize=!0,Hs(e,t=rp(e,i,t)),t}(e,i);var a=[];a=ap(e);var r=[],l=[];if("Distance"===e.shapeAnnotationType&&(r=function(e,t){var i=[],n=gp(e,t[0],t[1]);return i.push(n),n=gp(e,t[1],t[0],!0),i.push(n),i}(e,a),l=function(e,t,i,n){var o=[],s=Ns.findAngle(t[0],t[1]),a=mp(e,s);return!n.enableImportAnnotationMeasurement&&e.notes&&""!==e.notes?a.content=e.notes:a.content=i.setConversion(Ws([t[0],t[1]])*i.pixelToPointFactor,e),a.rotateValue={y:-10,angle:s},!0===e.enableShapeLabel&&(a.style.strokeColor=e.labelBorderColor,a.style.fill=e.labelFillColor,a.style.fontSize=e.fontSize,a.style.color=e.fontColor,a.style.fontFamily=e.fontFamily),o.push(a),o}(e,a,this.pdfViewer.annotation.measureAnnotationModule,this.pdfViewer)),"Line"!==e.shapeAnnotationType&&"LineWidthArrowHead"!==e.shapeAnnotationType||"Perimeter"!==e.measureType||(l=function(e,t,i,n){var o=[],s=Ns.findAngle(t[0],t[1]),a=mp(e,s);return!n.enableImportAnnotationMeasurement&&e.notes&&""!==e.notes?a.content=e.notes:a.content=i.calculatePerimeter(e),!0===e.enableShapeLabel&&(a.style.strokeColor=e.labelBorderColor,a.style.fill=e.labelFillColor,a.style.fontSize=e.fontSize,a.style.color=e.fontColor,a.style.fontFamily=e.fontFamily),a.rotateValue={y:-10,angle:s},o.push(a),o}(e,a,this.pdfViewer.annotation.measureAnnotationModule,this.pdfViewer)),!0===e.enableShapeLabel&&"Distance"!==e.shapeAnnotationType&&"Perimeter"!==e.measureType){var d=Ns.findAngle(a[0],a[1]),h=this.textElement(e);h.id=Hh(),!this.pdfViewer.enableImportAnnotationMeasurement&&e.notes&&""!==e.notes?h.content=e.notes:h.content=e.labelContent,h.style.strokeColor=e.labelBorderColor,h.style.fill=e.labelFillColor,h.style.fontSize=e.fontSize,h.style.color=e.fontColor,h.style.fontFamily=e.fontFamily,h.style.opacity=e.labelOpacity,h.rotateValue={y:-10,angle:d},l.push(h)}a=hp(e,a);var p=Nh.toBounds(a);t.width=p.width,t.height=p.height,t.offsetX=p.x+t.pivot.x*p.width,t.offsetY=p.y+t.pivot.y*p.height;var c=e.vertexPoints;if("Line"!==e.shapeAnnotationType&&"LineWidthArrowHead"!==e.shapeAnnotationType&&"Distance"!==e.shapeAnnotationType||(n=dp(e,a[0],c[1],!0),o=dp(e,a[a.length-1],c[c.length-2],!1)),n.id=e.id+"_srcDec",o.id=e.id+"_tarDec",i.style.fill="transparent",t.style.strokeColor="transparent",t.style.fill="transparent",t.style.strokeWidth=0,t.children=[],Hs(e,i),t.children.push(i),r.length>0)for(s=0;s<r.length;s++)t.children.push(r[parseInt(s.toString(),10)]);if(l.length>0)for(s=0;s<l.length;s++)t.children.push(l[parseInt(s.toString(),10)]);return t.children.push(n),t.children.push(o),"LineWidthArrowHead"===e.shapeAnnotationType&&(t.children[1].width=12*e.thickness,t.children[1].height=12*e.thickness,t.children[2].width=12*e.thickness,t.children[2].height=12*e.thickness),t.id=e.id,t.offsetX=i.offsetX,t.offsetY=i.offsetY,t.width=i.width,t.height=i.height,a=ap(e),e.wrapper=t,t},e.prototype.add=function(e){var t=this.pdfViewer.allowServerDataBinding;return this.pdfViewer.enableServerDataBinding(!1),e.formFieldAnnotationType&&this.pdfViewer.formDesignerModule?(e=new kd(this.pdfViewer,"formFields",e,!0),e=this.initObject(e),this.pdfViewer.formFields.push(e)):(e=new Ad(this.pdfViewer,"annotations",e,!0),e=this.initObject(e),this.pdfViewer.annotations.push(e)),this.pdfViewer.enableServerDataBinding(t,!0),e},e.prototype.remove=function(e){var t=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(!1);for(var i=e.pageIndex,n=0;n<this.pdfViewer.annotations.length;n++){var o=this.pdfViewer.annotations[parseInt(n.toString(),10)];if(o.id&&(o.id===e.id||o.id.split("_")[0]===e.id)||o.wrapper&&o.wrapper.id===e.id){this.pdfViewer.annotations.splice(n,1);for(var s=this.getPageObjects(e.pageIndex),a=0;a<s.length;a++)s[parseInt(a.toString(),10)].id===e.id&&(s.splice(a,1),"Path"===e.shapeAnnotationType||"SignatureImage"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType?this.refreshCanvasDiagramLayer(void 0,i,e.id):this.pdfViewer.renderDrawing(void 0,i))}}for(n=0;n<this.pdfViewer.formFields.length;n++){if((r=this.pdfViewer.formFields[parseInt(n.toString(),10)]).id===e.id||r.wrapper.id===e.id){this.pdfViewer.formFields.splice(n,1),this.pdfViewer.formDesignerModule&&e.formFieldAnnotationType&&this.pdfViewer.formFieldCollection.splice(n,1);for(s=this.getPageObjects(e.pageIndex),a=0;a<s.length;a++){if(s[parseInt(a.toString(),10)].id===e.id){s.splice(a,1);break}s[parseInt(a.toString(),10)]&&s[parseInt(a.toString(),10)].id&&-1!==s[parseInt(a.toString(),10)].id.indexOf(e.id)&&s.splice(a,1)}}}if("Textbox"===e.formFieldAnnotationType||"Checkbox"===e.formFieldAnnotationType||"RadioButton"===e.formFieldAnnotationType||"PasswordField"===e.formFieldAnnotationType||"DropdownList"===e.formFieldAnnotationType||"ListBox"===e.formFieldAnnotationType||"SignatureField"===e.formFieldAnnotationType||"InitialField"===e.formFieldAnnotationType)for(n=0;n<this.pdfViewer.formFieldCollections.length;n++){var r;(r=this.pdfViewer.formFieldCollections[n]).id===e.id&&this.pdfViewer.formFieldCollections.splice(n,1)}if("Textbox"===e.formFieldAnnotationType||"Checkbox"===e.formFieldAnnotationType||"RadioButton"===e.formFieldAnnotationType||"PasswordField"===e.formFieldAnnotationType||"DropdownList"===e.formFieldAnnotationType||"ListBox"===e.formFieldAnnotationType||"SignatureField"===e.formFieldAnnotationType||"InitialField"===e.formFieldAnnotationType){var l=document.getElementById("form_field_"+e.id+"_content_html_element");if(l){l.remove(),this.pdfViewer.renderDrawing(void 0,i);var d={name:e.name,id:e.id,value:e.value,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,color:e.color,backgroundColor:e.backgroundColor,alignment:e.alignment,isReadonly:e.isReadonly,visibility:e.visibility,maxLength:e.maxLength,isRequired:e.isRequired,isPrint:e.isPrint,rotation:e.rotateAngle,tooltip:e.tooltip,options:e.options,isChecked:e.isChecked,isSelected:e.isSelected};this.pdfViewer.fireFormFieldRemoveEvent("formFieldRemove",d,e.pageIndex),this.pdfViewer.formDesignerModule.removeFieldsFromAnnotationCollections(e.id)}}this.pdfViewer.enableServerDataBinding(t,!0)},e.prototype.getPageObjects=function(e){return this.getPageTable(e).objects},e.prototype.refreshCanvasDiagramLayer=function(e,t,i){if(e||(e=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+t)),e){var n=this.pdfViewer.viewerBase.getZoomFactor(),o=e.width/n,s=e.height/n,a=e.getContext("2d");a.lineCap="round",a.lineJoin="round",n<1&&(a.lineWidth=a.lineWidth/n);var r=n*this.pdfViewer.viewerBase.getWindowDevicePixelRatio();!ge.isDevice||ge.isDevice&&n<=.7?a.setTransform(r,0,0,r,0,0):a.setTransform(n,0,0,n,0,0),a.clearRect(0,0,o,s);for(var l=this.getPageObjects(t),d=0;d<l.length;d++){var h=void 0;e.id===this.pdfViewer.element.id+"_print_annotation_layer_"+t?l[parseInt(d.toString(),10)].isPrint&&(m(h=this.pdfViewer.nameTable[l[parseInt(d.toString(),10)].id].wrapper)||jp(e,[h],this.renderer)):jp(e,[h=this.pdfViewer.nameTable[l[d].id].wrapper],this.renderer)}}},e.prototype.clearHighlighter=function(e){var t=this.getAdornerLayerSvg(this.pdfViewer.element.id+e+"_diagramAdornerLayer",e);if(t){var i=t.getElementById(t.id+"_highlighter");i&&i.parentNode.removeChild(i)}},e.prototype.getSelectorElement=function(e,t){var i=null,n=this.getAdornerLayerSvg(e,t);return n&&(i=n.getElementById(e+t+"_SelectorElement")),i},e.prototype.getAdornerLayerSvg=function(e,t){var i=null,n=Rh(e+t+"_diagramAdornerLayer");return n&&(i=n.getElementsByClassName("e-adorner-layer"+t)[0]),i},e.prototype.clearSelectorLayer=function(e){var t=this.getAdornerLayerSvg(this.pdfViewer.element.id,e);if(t){var i=t.getElementById(this.pdfViewer.adornerSvgLayer.id+"_selected_region");i&&i.parentNode.removeChild(i),this.clearHighlighter(e);for(var n=this.getSelectorElement(this.pdfViewer.element.id,e).childNodes,o=void 0,s=n.length;s>0;s--)(o=n[s-1]).parentNode.removeChild(o)}},e.prototype.renderSelector=function(e,t,i,n){if(!i||n){var o=new Cd,s=this.pdfViewer.selectedItems;if(this.clearSelectorLayer(e),s.wrapper){s.wrapper.measure(o);var a=this.pdfViewer.viewerBase.getZoomFactor();s.wrapper.arrange(s.wrapper.desiredSize),s.width=s.wrapper.actualSize.width,s.height=s.wrapper.actualSize.height,s.offsetX=s.wrapper.offsetX,s.offsetY=s.wrapper.offsetY,1===s.annotations.length&&(s.rotateAngle=s.annotations[0].rotateAngle,s.wrapper.rotateAngle=s.annotations[0].rotateAngle);s.wrapper.bounds;var r=void 0;if(s.formFields.length)for(var l=0;l<s.formFields.length;l++){var d=s.formFields[parseInt(l.toString(),10)];if((r=this.getSelectorElement(this.pdfViewer.element.id,e))&&d.pageIndex===e&&this.pdfViewer.designerMode&&this.renderResizeHandle(d.wrapper.children[0],r,s.thumbsConstraints,a,void 0,void 0,void 0,!1,!0,null,null,t),this.pdfViewer.formDesignerModule&&d.formFieldAnnotationType&&!this.pdfViewer.viewerBase.isFormFieldSelect&&!this.pdfViewer.viewerBase.isFormFieldMouseDown&&!this.pdfViewer.viewerBase.isFormFieldMouseMove){this.pdfViewer.viewerBase.isFormFieldSelect=!0;var h={name:d.name,id:d.id,value:d.value,fontFamily:d.fontFamily,fontSize:d.fontSize,fontStyle:d.fontStyle,color:d.color,backgroundColor:d.backgroundColor,alignment:d.alignment,isReadonly:d.isReadonly,visibility:d.visibility,maxLength:d.maxLength,isRequired:d.isRequired,isPrint:d.isPrint,rotation:d.rotateAngle,tooltip:d.tooltip,options:d.options,isChecked:d.isChecked,isSelected:d.isSelected};this.pdfViewer.fireFormFieldSelectEvent("formFieldSelect",h,d.pageIndex,this.pdfViewer.formDesignerModule.isProgrammaticSelection)}}if(s.annotations.length)for(var p=0;p<s.annotations.length;p++){d=s.annotations[parseInt(p.toString(),10)];if((r=this.getSelectorElement(this.pdfViewer.element.id,e))&&d.pageIndex===e){if("Distance"===d.shapeAnnotationType||"Line"===d.shapeAnnotationType||"LineWidthArrowHead"===d.shapeAnnotationType||"Polygon"===d.shapeAnnotationType)this.renderEndPointHandle(d,r,s.thumbsConstraints,{scale:a,tx:0,ty:0},void 0,void 0,!0,t);else if("StickyNotes"===d.shapeAnnotationType)this.renderResizeHandle(d.wrapper.children[0],r,s.thumbsConstraints,a,void 0,void 0,void 0,!1,!0,null,null,t);else if("Stamp"!==this.pdfViewer.tool){var c="Path"===d.shapeAnnotationType||"SignatureField"===d.formFieldAnnotationType||"InitialField"===d.formFieldAnnotationType;this.renderResizeHandle(d.wrapper.children[0],r,s.thumbsConstraints,a,void 0,void 0,void 0,"Stamp"===d.shapeAnnotationType,!1,c,"FreeText"===d.shapeAnnotationType||"HandWrittenSignature"===d.shapeAnnotationType||"SignatureImage"===d.shapeAnnotationType||"Image"===d.shapeAnnotationType||"SignatureText"===d.shapeAnnotationType,t)}if(this.pdfViewer.viewerBase.isNewSignatureAdded||"HandWrittenSignature"!==d.shapeAnnotationType&&"SignatureText"!==d.shapeAnnotationType&&"SignatureImage"!==d.shapeAnnotationType||this.pdfViewer.annotationModule.selectSignature(d.signatureName,d.pageIndex,d),this.pdfViewer.formDesignerModule&&d.formFieldAnnotationType&&!this.pdfViewer.viewerBase.isFormFieldSelect&&!this.pdfViewer.viewerBase.isFormFieldMouseDown&&!this.pdfViewer.viewerBase.isFormFieldMouseMove){this.pdfViewer.viewerBase.isFormFieldSelect=!0;h={value:d.value,fontFamily:d.fontFamily,fontSize:d.fontSize,fontStyle:d.fontStyle,color:d.color,backgroundColor:d.backgroundColor,alignment:d.alignment,isReadonly:d.isReadonly,visibility:d.visibility,maxLength:d.maxLength,isRequired:d.isRequired,isPrint:d.isPrint,rotation:d.rotateAngle,tooltip:d.tooltip,options:d.options,isChecked:d.isChecked,isSelected:d.isSelected};this.pdfViewer.fireFormFieldSelectEvent("formFieldSelect",h,d.pageIndex,this.pdfViewer.formDesignerModule.isProgrammaticSelection)}""!==d.annotName&&"SignatureText"!==d.annotName&&i&&d===i&&!d.formFieldAnnotationType&&(this.pdfViewer.viewerBase.isAddComment||this.pdfViewer.viewerBase.isAnnotationSelect||this.pdfViewer.viewerBase.isAnnotationMouseDown||this.pdfViewer.viewerBase.isAnnotationMouseMove||this.pdfViewer.viewerBase.isInkAdded||this.pdfViewer.viewerBase.isNewStamp||(this.pdfViewer.viewerBase.isAnnotationSelect=!0,this.pdfViewer.annotationModule.annotationSelect(d.annotName,d.pageIndex,d)))}}}}},e.prototype.rotate=function(e,t,i,n){if(e)if(i=i||{x:e.wrapper.offsetX,y:e.wrapper.offsetY},e instanceof np){e.rotateAngle+=t,e.wrapper.rotateAngle+=t;var o=[];o=o.concat(e.annotations),this.rotateObjects(e,o,t,i,null,n)}else this.rotateObjects(e,[e],t,i)},e.prototype.rotateObjects=function(e,t,i,n,o,s){n=n||{};var a=Ls();Os(a,i,n.x,n.y);for(var r=0,l=t;r<l.length;r++){var d=l[r];if(d instanceof Ad){if(!1!==o||e!==d){d.rotateAngle+=i,d.rotateAngle=(d.rotateAngle+360)%360;var h=Ps(a,{x:d.wrapper.offsetX,y:d.wrapper.offsetY});d.wrapper.offsetX=h.x,d.wrapper.offsetY=h.y,this.nodePropertyChange(d,{rotateAngle:d.rotateAngle})}this.renderSelector(d.pageIndex,s)}}},e.prototype.getParentSvg=function(e,t,i){return e&&e.id&&t&&"selector"===t?this.pdfViewer.adornerSvgLayer:i},e.prototype.renderBorder=function(e,t,i,n,o,s,a,r){var l=Us(e,n);if(n=n||{scale:1,tx:0,ty:0},r){l.x*=n.scale,l.y*=n.scale,l.width*=n.scale,l.height*=n.scale;d=this.pdfViewer.selectedItems.annotations.length>0?this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType:this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType;if(i&&"object"!==typeof i&&""!==i){c=""===(h=JSON.parse(i)).selectionBorderColor?"black":h.selectionBorderColor;l.stroke=c,l.strokeWidth=1===i.selectionBorderThickness?1:h.selectionBorderThickness,(p=0===h.selectorLineDashArray.length?[6,3]:h.selectorLineDashArray).length>2&&(p=[p[0],p[1]]),l.dashArray=p.toString()}else this.getBorderSelector(d,l)}else{l.x*=n.scale,l.y*=n.scale,l.width*=n.scale,l.height*=n.scale,l.fill="transparent";var d=this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType;if(i&&"object"!==typeof i&&""!==i){var h,p,c=""===(h=JSON.parse(i)).selectionBorderColor?"black":h.selectionBorderColor;l.stroke=c,l.strokeWidth=1===i.selectionBorderThickness?1:h.selectionBorderThickness,(p=0===h.selectorLineDashArray.length?[6,3]:h.selectorLineDashArray).length>2&&(p=[p[0],p[1]]),l.dashArray=p.toString()}else if(!this.pdfViewer.designerMode)if("HandWrittenSignature"===d||"SignatureText"===d||"SignatureImage"===d||"Ink"===d){this.pdfViewer.nameTable[e.id.split("_")[0]];var u=this.pdfViewer.viewerBase.checkSignatureFormField(e.id);this.getSignBorder(d,l,u)}else this.getBorderSelector(d,l);l.class="e-pv-diagram-border",a&&(l.class+=" e-diagram-lane"),l.id="borderRect",l.id="borderRect",o||(l.class+=" e-disabled"),s&&(l.class+=" e-thick-border"),l.cornerRadius=0}var f=this.getParentSvg(e,"selector");this.svgRenderer.drawRectangle(t,l,this.pdfViewer.element.id,void 0,!0,f)},e.prototype.getSignBorder=function(e,t,i){if(i||"HandWrittenSignature"!==e&&"SignatureText"!==e&&"SignatureImage"!==e||!this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings)if("Ink"===e&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings){o=m(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderColor?"#0000ff":this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=o;a=m(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=a,(s=m(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectorLineDashArray).length>2&&(s=[s[0],s[1]]),t.dashArray=s.toString()}else{var n=this.pdfViewer.annotationSelectorSettings;o=""===n.selectionBorderColor?"black":n.selectionBorderColor;t.stroke=o,t.strokeWidth=1===n.selectionBorderThickness?1:n.selectionBorderThickness,(s=0===n.selectorLineDashArray.length?[6,3]:n.selectorLineDashArray).length>2&&(s=[s[0],s[1]]),t.dashArray=s.toString()}else{var o=m(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderColor?"#0000ff":this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=o;var s,a=m(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=a,(s=m(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectorLineDashArray).length>2&&(s=[s[0],s[1]]),t.dashArray=s.toString()}},e.prototype.getBorderSelector=function(e,t){var i=this.pdfViewer.annotationSelectorSettings,n=m(i.selectionBorderColor)||""===i.selectionBorderColor?"black":i.selectionBorderColor;t.stroke=n,t.strokeWidth=m(i.selectionBorderThickness)||1===i.selectionBorderThickness?1:i.selectionBorderThickness;var o=m(i.selectorLineDashArray)||0===i.selectorLineDashArray.length?[6,3]:i.selectorLineDashArray;if(o.length>2&&(o=[o[0],o[1]]),t.dashArray=o.toString(),"Rectangle"===e&&this.pdfViewer.rectangleSettings.annotationSelectorSettings){var s=m(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor?"black":this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=s;var a=m(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=a;var r=m(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray;r.length>2&&(r=[r[0],r[1]]),t.dashArray=r.toString()}else if("Textbox"!==e&&"Checkbox"!==e&&"RadioButton"!==e&&"SignatureField"!==e&&"InitialField"!==e&&"DropdownList"!==e&&"ListBox"!==e&&"PasswordField"!==e||!this.pdfViewer.rectangleSettings.annotationSelectorSettings){if("Ellipse"===e&&this.pdfViewer.circleSettings.annotationSelectorSettings){var l=m(this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderColor?"black":this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=l;a=m(this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=a;var d=m(this.pdfViewer.circleSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.circleSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.circleSettings.annotationSelectorSettings.selectorLineDashArray;d.length>2&&(d=[d[0],d[1]]),t.dashArray=d.toString()}else if("Radius"===e&&this.pdfViewer.radiusSettings.annotationSelectorSettings){var h=m(this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderColor?"black":this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=h;a=m(this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=a;var p=m(this.pdfViewer.radiusSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.radiusSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.radiusSettings.annotationSelectorSettings.selectorLineDashArray;p.length>2&&(p=[p[0],p[1]]),t.dashArray=p.toString()}else if("FreeText"===e&&this.pdfViewer.freeTextSettings.annotationSelectorSettings){var c=m(this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderColor?"black":this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=c;a=m(this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=a;var u=m(this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectorLineDashArray;u.length>2&&(u=[u[0],u[1]]),t.dashArray=u.toString()}else if("StickyNotes"===e&&this.pdfViewer.stickyNotesSettings.annotationSelectorSettings){var f=m(this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderColor?"black":this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=f;a=m(this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=a;var g=m(this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectorLineDashArray.length?[6,3]:this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectorLineDashArray;g.length>2&&(g=[g[0],g[1]]),t.dashArray=g.toString()}else if("Stamp"===e&&this.pdfViewer.stampSettings.annotationSelectorSettings){var y=m(this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderColor?"#0000ff":this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=y;a=m(this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=a;var v=m(this.pdfViewer.stampSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.stampSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.stampSettings.annotationSelectorSettings.selectorLineDashArray;v.length>2&&(v=[v[0],v[1]]),t.dashArray=v.toString()}}else{var w=m(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor?"black":this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=w;var a=m(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=a;var b=m(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray;b.length>2&&(b=[b[0],b[1]]),t.dashArray=b.toString()}},e.prototype.renderCircularHandle=function(e,t,i,n,o,s,a,r,l,d,h,p,c,u){var f=t,m={x:i,y:n};if(r=r||{scale:1,tx:0,ty:0},0!==f.rotateAngle||0!==f.parentTransform){var g=Ls();Os(g,f.rotateAngle+f.parentTransform,f.offsetX,f.offsetY),m=Ps(g,m)}var y,v=Us(f);y=this.pdfViewer.selectedItems.annotations.length>0&&this.pdfViewer.selectedItems.annotations[0].measureType?this.pdfViewer.selectedItems.annotations[0].measureType:this.pdfViewer.selectedItems.formFields.length>0?this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType:this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType,this.getResizerColors(y,v,u,r),this.getShapeSize(y,v,u,r),v.strokeWidth=1,void 0!==p&&(5,v.id="segmentEnd_"+p),v.centerX=(m.x+r.tx)*r.scale,v.centerY=(m.y+r.ty)*r.scale,v.angle=0,v.id=e,v.visible=s,v.class=c,v.opacity=1,l&&(v.class+=" e-connected"),d&&(v.visible=!1),v.x=m.x*r.scale-v.width/2,v.y=m.y*r.scale-v.height/2;var w=this.getParentSvg(t,"selector");"Square"===this.getShape(y,u)?this.svgRenderer.drawRectangle(o,v,e,void 0,!0,w):"Circle"===this.getShape(y,u)&&this.svgRenderer.drawCircle(o,v,1)},e.prototype.getShapeSize=function(e,t,i,n){if(i&&"object"!==typeof i&&""!==i){var o=JSON.parse(i);t.radius=(m(o.resizerSize)||8===o.resizerSize?8:o.resizerSize)/2,t.width=(m(o.resizerSize)||8===o.resizerSize?8:o.resizerSize)*n.scale,t.height=(m(o.resizerSize)||8===o.resizerSize?8:o.resizerSize)*n.scale}else{o=this.pdfViewer.annotationSelectorSettings;t.radius=(m(o.resizerSize)||8===o.resizerSize?8:o.resizerSize)/2,t.width=(m(o.resizerSize)||8===o.resizerSize?8:o.resizerSize)*n.scale,t.height=(m(o.resizerSize)||8===o.resizerSize?8:o.resizerSize)*n.scale,"Line"===e&&this.pdfViewer.lineSettings.annotationSelectorSettings?(t.radius=(m(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)/2,t.width=(m(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=(m(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)*n.scale):"LineWidthArrowHead"===e&&this.pdfViewer.arrowSettings.annotationSelectorSettings?(t.radius=(m(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)/2,t.width=(m(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=(m(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)*n.scale):"Rectangle"===e&&this.pdfViewer.rectangleSettings.annotationSelectorSettings?(t.radius=(m(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)/2,t.width=(m(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=(m(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)*n.scale):"Ellipse"===e&&this.pdfViewer.circleSettings.annotationSelectorSettings?(t.radius=(m(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)/2,t.width=(m(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=(m(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)*n.scale):"Distance"===e&&this.pdfViewer.distanceSettings.annotationSelectorSettings?(t.radius=(m(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)/2,t.width=(m(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=(m(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)*n.scale):"Polygon"===e&&this.pdfViewer.polygonSettings.annotationSelectorSettings?(t.radius=(m(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)/2,t.width=(m(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=(m(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)*n.scale):"Radius"===e&&this.pdfViewer.radiusSettings.annotationSelectorSettings?(t.radius=(m(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)/2,t.width=(m(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=(m(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)*n.scale):"Stamp"===e&&this.pdfViewer.stampSettings.annotationSelectorSettings?(t.radius=(m(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)/2,t.width=(m(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=(m(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)*n.scale):"FreeText"===e&&this.pdfViewer.freeTextSettings.annotationSelectorSettings?(t.radius=(m(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)/2,t.width=(m(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=(m(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)*n.scale):"HandWrittenSignature"!==e&&"SignatureText"!==e&&"SignatureImage"!==e||!this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings?"Perimeter"===e&&this.pdfViewer.perimeterSettings.annotationSelectorSettings?(t.radius=(m(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)/2,t.width=(m(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=(m(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)*n.scale):"Area"===e&&this.pdfViewer.areaSettings.annotationSelectorSettings?(t.radius=(m(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)/2,t.width=(m(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=(m(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)*n.scale):"Volume"===e&&this.pdfViewer.volumeSettings.annotationSelectorSettings?(t.radius=(m(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)/2,t.width=(m(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=(m(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)*n.scale):"Ink"===e&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings&&(t.radius=(m(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)/2,t.width=(m(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=(m(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)*n.scale):(t.radius=(m(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)/2,t.width=(m(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)*n.scale,t.height=(m(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)*n.scale)}},e.prototype.getShape=function(e,t){var i,n;t&&"object"!==typeof t&&""!==t?i=m((n=JSON.parse(t)).resizerShape)||"Square"===n.resizerShape?"Square":n.resizerShape:(i=m((n=this.pdfViewer.annotationSelectorSettings).resizerShape)||"Square"===n.resizerShape?"Square":n.resizerShape,"Line"===e&&this.pdfViewer.lineSettings.annotationSelectorSettings?i=m(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.lineSettings.annotationSelectorSettings.resizerShape:"LineWidthArrowHead"===e&&this.pdfViewer.arrowSettings.annotationSelectorSettings?i=m(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerShape:"Rectangle"===e&&this.pdfViewer.rectangleSettings.annotationSelectorSettings?i=m(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerShape:"Ellipse"===e&&this.pdfViewer.circleSettings.annotationSelectorSettings?i=m(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.circleSettings.annotationSelectorSettings.resizerShape:"Polygon"===e&&this.pdfViewer.polygonSettings.annotationSelectorSettings?i=m(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerShape:"Distance"===e&&this.pdfViewer.distanceSettings.annotationSelectorSettings?i=m(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerShape:"Radius"===e&&this.pdfViewer.radiusSettings.annotationSelectorSettings?i=m(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerShape:"Stamp"===e&&this.pdfViewer.stampSettings.annotationSelectorSettings?i=m(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.stampSettings.annotationSelectorSettings.resizerShape:"FreeText"===e&&this.pdfViewer.freeTextSettings.annotationSelectorSettings?i=m(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerShape:("HandWrittenSignature"===e||"SignatureText"===e||"SignatureImage"===e)&&this.pdfViewer.handWrittenSignatureSettings&&this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings?i=m(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerShape:"Perimeter"===e&&this.pdfViewer.perimeterSettings.annotationSelectorSettings?i=m(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerShape:"Area"===e&&this.pdfViewer.areaSettings.annotationSelectorSettings?i=m(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.areaSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.areaSettings.annotationSelectorSettings.resizerShape:"Volume"===e&&this.pdfViewer.volumeSettings.annotationSelectorSettings?i=m(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerShape:"Ink"===e&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings&&(i=m(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerShape));return i},e.prototype.getResizerColors=function(e,t,i,n){if(i&&"object"!==typeof i&&""!==i){var o=JSON.parse(i);t.stroke=m(o.resizerBorderColor)||"black"===o.resizerBorderColor?"black":o.resizerBorderColor,t.fill=m(o.resizerFillColor)||"#FF4081"===o.resizerFillColor?"#FF4081":o.resizerFillColor}else{o=this.pdfViewer.annotationSelectorSettings;t.stroke=m(o.resizerBorderColor)||"black"===o.resizerBorderColor?"black":o.resizerBorderColor,t.fill=m(o.resizerFillColor)||"#FF4081"===o.resizerFillColor?"#FF4081":o.resizerFillColor,"Line"===e&&this.pdfViewer.lineSettings.annotationSelectorSettings?(t.stroke=m(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.lineSettings.annotationSelectorSettings.resizerBorderColor,t.fill=m(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.lineSettings.annotationSelectorSettings.resizerFillColor):"LineWidthArrowHead"===e&&this.pdfViewer.arrowSettings.annotationSelectorSettings?(t.stroke=m(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerBorderColor,t.fill=m(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerFillColor):"Rectangle"===e&&this.pdfViewer.rectangleSettings.annotationSelectorSettings?(t.stroke=m(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerBorderColor,t.fill=m(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerFillColor):"Ellipse"===e&&this.pdfViewer.circleSettings.annotationSelectorSettings?(t.stroke=m(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.circleSettings.annotationSelectorSettings.resizerBorderColor,t.fill=m(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.circleSettings.annotationSelectorSettings.resizerFillColor):"Distance"===e&&this.pdfViewer.distanceSettings.annotationSelectorSettings?(t.stroke=m(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerBorderColor,t.fill=m(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerFillColor):"Polygon"===e&&this.pdfViewer.polygonSettings.annotationSelectorSettings?(t.stroke=m(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerBorderColor,t.fill=m(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerFillColor):"Radius"===e&&this.pdfViewer.radiusSettings.annotationSelectorSettings?(t.stroke=m(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerBorderColor,t.fill=m(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerFillColor):"Stamp"===e&&this.pdfViewer.stampSettings.annotationSelectorSettings?(t.stroke=m(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.stampSettings.annotationSelectorSettings.resizerBorderColor,t.fill=m(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.stampSettings.annotationSelectorSettings.resizerFillColor):"FreeText"===e&&this.pdfViewer.freeTextSettings.annotationSelectorSettings?(t.stroke=m(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerBorderColor,t.fill=m(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerFillColor):"HandWrittenSignature"!==e&&"SignatureText"!==e&&"SignatureImage"!==e||!this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings?"Perimeter"===e&&this.pdfViewer.perimeterSettings.annotationSelectorSettings?(t.stroke=m(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerBorderColor,t.fill=m(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerFillColor):"Area"===e&&this.pdfViewer.areaSettings.annotationSelectorSettings?(t.stroke=m(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.areaSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.areaSettings.annotationSelectorSettings.resizerBorderColor,t.fill=m(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.areaSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.areaSettings.annotationSelectorSettings.resizerFillColor):"Volume"===e&&this.pdfViewer.volumeSettings.annotationSelectorSettings?(t.stroke=m(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerBorderColor,t.fill=m(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerFillColor):"Ink"===e&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings&&(t.stroke=m(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerBorderColor,t.fill=m(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerFillColor):(t.stroke=m(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerBorderColor,t.fill=m(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerFillColor)}},e.prototype.renderRotateThumb=function(e,t,i,n,o){new sp;var s,a=e.offsetY-e.actualSize.height*e.pivot.y,r=e.offsetX-e.actualSize.width*e.pivot.x+e.pivot.x*e.actualSize.width,l=a;if(s={x:r=(r+i.tx)*i.scale,y:(l=(l+i.ty)*i.scale)-25},0!==e.rotateAngle||0!==e.parentTransform){var d=Ls();Os(d,e.rotateAngle+e.parentTransform,(i.tx+e.offsetX)*i.scale,(i.ty+e.offsetY)*i.scale),s=Ps(d,s)}var h=Us(e);h.stroke="black",h.strokeWidth=1,h.opacity=1,h.fill="#FF4081",h.centerX=s.x,h.centerY=s.y,h.radius=4,h.angle=0,h.visible=!0,h.class="e-diagram-rotate-handle",h.id="rotateThumb",this.svgRenderer.drawCircle(t,h,mh.Rotate,{"aria-label":"Thumb to rotate the selected object"});var p=t.querySelector("#"+h.id);p&&p.setAttribute("role","separator")},e.prototype.renderResizeHandle=function(e,t,i,n,o,s,a,r,l,d,h,p){var c=e.offsetX-e.actualSize.width*e.pivot.x,u=e.offsetY-e.actualSize.height*e.pivot.y,f=e.actualSize.height,m=e.actualSize.width,g={scale:n,tx:0,ty:0};r&&(this.renderPivotLine(e,t,g),this.renderRotateThumb(e,t,g)),h&&(r=!0),this.renderBorder(e,t,p,g,s,a,!0,l);var y=e.actualSize.width*n,v=e.actualSize.height*n,w=this.pdfViewer.selectedItems.annotations.length>0?this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType:this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType,b=!1;if(!this.pdfViewer.formDesignerModule){var S=this.pdfViewer.selectedItems.annotations[0],C=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(S);(this.pdfViewer.annotationModule.checkIsLockSettings(S)||S.annotationSettings.isLock)&&this.getAllowedInteractions(C)&&(b=!0)}var x=this.getResizerLocation(w,p);(x<1||x>3)&&(x=3);var M=!1;!this.pdfViewer.selectedItems.annotations[0]||"Ellipse"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"Radius"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"Rectangle"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"Ink"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||(M=!0),this.pdfViewer.viewerBase.checkSignatureFormField(e.id)||a||l||d||b||((r||M&&y>=40&&v>=40&&(1===x||3===x))&&(this.renderCircularHandle("resizeNorthWest",e,c,u,t,!0,i&mh.ResizeNorthWest,g,void 0,o,{"aria-label":"Thumb to resize the selected object on top left side direction"},void 0,"e-pv-diagram-resize-handle e-northwest",p),this.renderCircularHandle("resizeNorthEast",e,c+m,u,t,!0,i&mh.ResizeNorthEast,g,void 0,o,{"aria-label":"Thumb to resize the selected object on top right side direction"},void 0,"e-pv-diagram-resize-handle e-northeast",p),this.renderCircularHandle("resizeSouthWest",e,c,u+f,t,!0,i&mh.ResizeSouthWest,g,void 0,o,{"aria-label":"Thumb to resize the selected object on bottom left side direction"},void 0,"e-pv-diagram-resize-handle e-southwest",p),this.renderCircularHandle("resizeSouthEast",e,c+m,u+f,t,!0,i&mh.ResizeSouthEast,g,void 0,o,{"aria-label":"Thumb to resize the selected object on bottom right side direction"},void 0,"e-pv-diagram-resize-handle e-southeast",p)),(r||M)&&(!M||2!==x&&3!==x&&(y>=40&&v>=40||1!==x))||(this.renderCircularHandle("resizeNorth",e,c+m/2,u,t,!0,i&mh.ResizeNorth,g,void 0,o,{"aria-label":"Thumb to resize the selected object on top side direction"},void 0,"e-pv-diagram-resize-handle e-north",p),this.renderCircularHandle("resizeSouth",e,c+m/2,u+f,t,!0,i&mh.ResizeSouth,g,void 0,o,{"aria-label":"Thumb to resize the selected object on bottom side direction"},void 0,"e-pv-diagram-resize-handle e-south",p),this.renderCircularHandle("resizeWest",e,c,u+f/2,t,!0,i&mh.ResizeWest,g,void 0,o,{"aria-label":"Thumb to resize the selected object on left side direction"},void 0,"e-pv-diagram-resize-handle e-west",p),this.renderCircularHandle("resizeEast",e,c+m,u+f/2,t,!0,i&mh.ResizeEast,g,void 0,o,{"aria-label":"Thumb to resize the selected object on right side direction"},void 0,"e-pv-diagram-resize-handle e-east",p))),"Textbox"!==w&&"Checkbox"!==w&&"RadioButton"!==w&&"SignatureField"!==w&&"InitialField"!==w&&"DropdownList"!==w&&"ListBox"!==w&&"PasswordField"!==w||(this.renderCircularHandle("resizeNorth",e,c+m/2,u,t,!0,i&mh.ResizeNorth,g,void 0,o,{"aria-label":"Thumb to resize the selected object on top side direction"},void 0,"e-pv-diagram-resize-handle e-north",p),this.renderCircularHandle("resizeSouth",e,c+m/2,u+f,t,!0,i&mh.ResizeSouth,g,void 0,o,{"aria-label":"Thumb to resize the selected object on bottom side direction"},void 0,"e-pv-diagram-resize-handle e-south",p),this.renderCircularHandle("resizeWest",e,c,u+f/2,t,!0,i&mh.ResizeWest,g,void 0,o,{"aria-label":"Thumb to resize the selected object on left side direction"},void 0,"e-pv-diagram-resize-handle e-west",p),this.renderCircularHandle("resizeEast",e,c+m,u+f/2,t,!0,i&mh.ResizeEast,g,void 0,o,{"aria-label":"Thumb to resize the selected object on right side direction"},void 0,"e-pv-diagram-resize-handle e-east",p))},e.prototype.getAllowedInteractions=function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++)if("None"!==e[0]&&"Resize"===e[parseInt(t.toString(),10)])return!1;return!0},e.prototype.getResizerLocation=function(e,t){var i,n;t&&"object"!==typeof t&&""!==t?i=m((n=JSON.parse(t)).resizerLocation)||3===n.resizerLocation?3:n.resizerLocation:(i=m((n=this.pdfViewer.annotationSelectorSettings).resizerLocation)||3===n.resizerLocation?3:n.resizerLocation,"Line"===e&&this.pdfViewer.lineSettings.annotationSelectorSettings?i=m(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerLocation:"LineWidthArrowHead"===e&&this.pdfViewer.arrowSettings.annotationSelectorSettings?i=m(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerLocation:"Rectangle"===e&&this.pdfViewer.rectangleSettings.annotationSelectorSettings?i=m(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerLocation:"Ellipse"===e&&this.pdfViewer.circleSettings.annotationSelectorSettings?i=m(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerLocation:"Polygon"===e&&this.pdfViewer.polygonSettings.annotationSelectorSettings?i=m(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerLocation:"Distance"===e?i=m(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerLocation:"Radius"===e&&this.pdfViewer.radiusSettings.annotationSelectorSettings?i=m(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerLocation:"Stamp"===e&&this.pdfViewer.stampSettings.annotationSelectorSettings?i=m(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerLocation:"FreeText"===e&&this.pdfViewer.freeTextSettings.annotationSelectorSettings?i=m(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerLocation:"HandWrittenSignature"!==e&&"SignatureText"!==e&&"SignatureImage"!==e||!this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings?"Ink"===e&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings&&(i=m(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerLocation):i=m(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerLocation);return i},e.prototype.renderPivotLine=function(e,t,i,n,o){var s=e,a=!0;o&&(a=!1);var r=Us(s,i);r.fill="None",r.stroke="black",r.strokeWidth=1,r.dashArray="2,3",r.visible=a;var l=i.scale;r.x*=l,r.y*=l,r.width*=l,r.height*=l,r.id="pivotLine",r.class="e-diagram-pivot-line";var d={x:s.actualSize.width*s.pivot.x*l,y:-20},h={x:s.actualSize.width*s.pivot.x*l,y:0};r.startPoint=d,r.endPoint=h,this.svgRenderer.drawLine(t,r)},e.prototype.renderEndPointHandle=function(e,t,i,n,o,s,a,r){n=n||{tx:0,ty:0,scale:1};var l,d=e.sourcePoint,h=e.targetPoint,p=e.wrapper;for(l=0;l<e.vertexPoints.length;l++){var c=e.vertexPoints[parseInt(l.toString(),10)];this.renderCircularHandle("segementThumb_"+(l+1),p,c.x,c.y,t,!0,i&mh.ConnectorSource,n,o,null,null,l,null,r)}var u=0;if("Distance"===e.shapeAnnotationType)for(l=0;l<e.wrapper.children.length;l++){c=e.wrapper.children[parseInt(l.toString(),10)];var f=void 0,m=Ns.findAngle(e.sourcePoint,e.targetPoint);if(c.id.indexOf("leader")>-1){var g=e.wrapper.children[0].bounds.center;0===u?(f={x:e.sourcePoint.x,y:e.sourcePoint.y-e.leaderHeight},g=d):(f={x:e.targetPoint.x,y:e.targetPoint.y-e.leaderHeight},g=h);var y=Ls();Os(y,m,g.x,g.y);var v=Ps(y,{x:f.x,y:f.y});this.renderCircularHandle("leaderThumb_"+(l+1),p,v.x,v.y,t,!0,i&mh.ConnectorSource,n,o,null,null,l,null,r),u++}}},e.prototype.initSelectorWrapper=function(){this.pdfViewer.selectedItems.init(this)},e.prototype.select=function(e,t,i,n){for(var o=this.pdfViewer.selectedItems,s=0;s<e.length;s++){var a=this.pdfViewer.nameTable[e[s]];if(a.formFieldAnnotationType&&this.pdfViewer.designerMode)o.formFields.push(a),this.initSelectorWrapper(),o.wrapper.children.push(a.wrapper),this.renderSelector(a.pageIndex,t,a,!0);else if(a&&!a.formFieldAnnotationType&&!(a instanceof np)&&a.wrapper.visible&&this.pdfViewer.annotationModule){var r=void 0;a.annotationSettings?(r=a.annotationSettings).isLock=JSON.parse(r.isLock):a.formFieldAnnotationType||(r=this.pdfViewer.annotationModule.findAnnotationSettings(a,!0),a.annotationSettings=r);var l=!a.formFieldAnnotationType&&r.isLock;r&&r.isLock&&this.pdfViewer.annotationModule.checkAllowedInteractions("Select",a)&&(l=!1),l||(o.annotations.push(a),this.initSelectorWrapper(),o.wrapper.rotateAngle=o.rotateAngle=0,o.wrapper.children.push(a.wrapper),n||this.renderSelector(a.pageIndex,t,a,!0))}}},e.prototype.dragSelectedObjects=function(e,t,i,n,o){var s=this.pdfViewer.selectedItems;return this.drag(s,e,t,n,o),!0},e.prototype.drag=function(e,t,i,n,o){if(e instanceof np){if(e.annotations.length)for(var s=0,a=e.annotations;s<a.length;s++){var r=a[s];this.drag(r,t,i,n,o),this.renderSelector(r.pageIndex,n,o)}else if(e.formFields.length)for(var l=0,d=e.formFields;l<d.length;l++){r=d[l];this.drag(r,t,i,n,o),this.renderSelector(r.pageIndex,n,o)}}else this.dragAnnotation(e,t,i)},e.prototype.dragAnnotation=function(e,t,i){e.wrapper.offsetX,e.wrapper.offsetY;var n=this.moveInsideViewer(e,t,i);if(e.wrapper.offsetX+=n.tx,e.wrapper.offsetY+=n.ty,_s(e)||"Polygon"===e.shapeAnnotationType){if(e.wrapper.children.length)for(var o=e.wrapper.children,s=0;s<o.length;s++)o[parseInt(s.toString(),10)].offsetX+=t,o[parseInt(s.toString(),10)].offsetY+=i;this.dragControlPoint(e,t,i,!0)}this.nodePropertyChange(e,{bounds:{x:e.wrapper.offsetX,y:e.wrapper.offsetY}}),e.wrapper.measureChildren=!1;var a=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+e.pageIndex);this.pdfViewer.renderDrawing(a,e.pageIndex)},e.prototype.dragControlPoint=function(e,t,i,n,o){for(var s=this.pdfViewer.nameTable[e.id],a=0;a<s.vertexPoints.length;a++)s.vertexPoints[parseInt(a.toString(),10)].x+=t,s.vertexPoints[parseInt(a.toString(),10)].y+=i;return n||this.updateEndPoint(s),!0},e.prototype.updateEndPoint=function(e){this.nodePropertyChange(e,{vertexPoints:e.vertexPoints}),this.renderSelector(e.pageIndex)},e.prototype.nodePropertyChange=function(e,t){var i;e.wrapper.outerBounds,e.wrapper.bounds;if(t.bounds&&(void 0!==t.bounds.width&&(e.bounds.width=e.wrapper.width=t.bounds.width),void 0!==t.bounds.height&&(e.bounds.height=e.wrapper.height=t.bounds.height),void 0!==t.bounds.x&&(e.bounds.x=t.bounds.x-.5*e.bounds.width,e.wrapper.offsetX=t.bounds.x,!0,!0),void 0!==t.bounds.y&&(e.bounds.y=t.bounds.y-.5*e.bounds.height,e.wrapper.offsetY=t.bounds.y,!0,!0),void 0!==t.leaderHeight&&(e.leaderHeight=t.leaderHeight,this.updateConnector(e,e.vertexPoints)),e.wrapper.children.length))for(var n=e.wrapper.children,o=0;o<n.length;o++)if(n[parseInt(o.toString(),10)].id){var s=n[parseInt(o.toString(),10)].id.split("_");if(s.length&&(s.indexOf("perimeter")>-1||s.indexOf("radius")>-1))this.setNodePosition(n[parseInt(o.toString(),10)],e);else if(s.length&&s.indexOf("srcDec")>-1)n[parseInt(o.toString(),10)].offsetX=e.vertexPoints[0].x,n[parseInt(o.toString(),10)].offsetY=e.vertexPoints[0].y;else if(s.length&&s.indexOf("tarDec")>-1)n[parseInt(o.toString(),10)].offsetX=e.vertexPoints[e.vertexPoints.length-1].x,n[parseInt(o.toString(),10)].offsetY=e.vertexPoints[e.vertexPoints.length-1].y;else if(s.length&&s.indexOf("stamp")>-1){var a=0;if(void 0!==e.wrapper.width&&void 0!==e.wrapper.height&&(a=20,2.9),e.isDynamicStamp){n[parseInt(o.toString(),10)].width=e.bounds.width-a,n[parseInt(o.toString(),10)].height=e.bounds.height/2-a;var r=n[1],l=this.pdfViewer.stampSettings?this.pdfViewer.stampSettings:this.pdfViewer.annotationSettings;l&&(l.maxHeight||l.maxWidth)&&e.bounds.height>60?r.style.fontSize=0!=a?e.bounds.width/a:e.wrapper.bounds.width/20:r.style.fontSize=0!=a?this.fontSizeCalculation(e,r,e.bounds.width-20):this.fontSizeCalculation(e,r,e.wrapper.bounds.width-20),0!==a&&(r.margin.bottom=-n[parseInt(o.toString(),10)].height/2)}else n[parseInt(o.toString(),10)].width=e.bounds.width-a,n[parseInt(o.toString(),10)].height=e.bounds.height-a;n[parseInt(o.toString(),10)].offsetX=e.wrapper.offsetX,n[parseInt(o.toString(),10)].offsetY=e.wrapper.offsetX,n[parseInt(o.toString(),10)].isDirt=!0}}if(void 0!==t.sourceDecoraterShapes&&(e.sourceDecoraterShapes=t.sourceDecoraterShapes,this.updateConnector(e,e.vertexPoints)),void 0!==t.isReadonly&&"FreeText"===e.shapeAnnotationType&&(e.isReadonly=t.isReadonly),void 0!==t.taregetDecoraterShapes&&(e.taregetDecoraterShapes=t.taregetDecoraterShapes,!0,this.updateConnector(e,e.vertexPoints)),void 0!==t.fillColor){if(e.fillColor=t.fillColor,e.wrapper.children[0].style.fill=t.fillColor,(e.enableShapeLabel||e.measureType)&&e.wrapper&&e.wrapper.children)for(var n=e.wrapper.children,d=0;d<n.length;d++)n[parseInt(d.toString(),10)].textNodes&&(e.enableShapeLabel&&(e.labelFillColor=t.fillColor,n[parseInt(d.toString(),10)].style.fill=t.fillColor),e.measureType&&(n[parseInt(d.toString(),10)].style.fill=t.fillColor));!0}if(e.enableShapeLabel&&void 0!==t.labelFillColor&&e.enableShapeLabel&&e.wrapper&&e.wrapper.children)for(var n=e.wrapper.children,h=0;h<n.length;h++)n[parseInt(h.toString(),10)].textNodes&&(e.labelFillColor=t.labelFillColor,n[parseInt(h.toString(),10)].style.fill=t.labelFillColor);if(void 0!==t.opacity){if("Stamp"===e.shapeAnnotationType||"FreeText"===e.shapeAnnotationType?(e.wrapper.children[1].style.opacity=t.opacity,e.wrapper.children[2]&&(e.wrapper.children[2].style.opacity=t.opacity)):("StickyNotes"===e.shapeAnnotationType&&(this.pdfViewer.nameTable[e.annotName].wrapper.children[0].style.opacity=t.opacity),e.opacity=t.opacity),e.wrapper.children[0].style.opacity=t.opacity,e.enableShapeLabel&&e.wrapper&&e.wrapper.children){n=e.wrapper.children;for(var p=0;p<n.length;p++)n[parseInt(p.toString(),10)].textNodes&&(n[parseInt(p.toString(),10)].style.opacity=t.labelOpacity)}!0,!0}if(e.enableShapeLabel&&void 0!==t.labelOpacity&&e.enableShapeLabel&&e.wrapper&&e.wrapper.children){n=e.wrapper.children;for(var c=0;c<n.length;c++)n[parseInt(c.toString(),10)].textNodes&&(n[parseInt(c.toString(),10)].style.opacity=t.labelOpacity)}if(void 0!==t.rotateAngle&&(e.rotateAngle=t.rotateAngle,e.wrapper.rotateAngle=t.rotateAngle,!0,!0),void 0!==t.strokeColor&&(e.strokeColor=t.strokeColor,e.wrapper.children[0].style.strokeColor=t.strokeColor,!0,!0),void 0!==t.fontColor){if(e.fontColor=t.fontColor,"FreeText"===e.shapeAnnotationType&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length)(n=e.wrapper.children)[1].style.color=t.fontColor,"Justify"===e.textAlign?n[1].horizontalAlignment="Center":n[1].horizontalAlignment="Auto";if(e.enableShapeLabel&&e.wrapper&&e.wrapper.children){n=e.wrapper.children;for(var u=0;u<n.length;u++)n[parseInt(u.toString(),10)].textNodes&&(n[parseInt(u.toString(),10)].style.color=t.fontColor)}!0,!0}if(void 0!==t.fontFamily){if(e.fontFamily=t.fontFamily,"FreeText"===e.shapeAnnotationType&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length)(n=e.wrapper.children)[1].style.fontFamily=t.fontFamily;if(e.enableShapeLabel&&e.wrapper&&e.wrapper.children){n=e.wrapper.children;for(var f=0;f<n.length;f++)n[parseInt(f.toString(),10)].textNodes&&(n[parseInt(f.toString(),10)].style.fontFamily=t.fontFamily)}!0,!0}if(void 0!==t.fontSize){if(e.fontSize=t.fontSize,("FreeText"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType)&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length)(n=e.wrapper.children)[1].style.fontSize=t.fontSize,"SignatureText"===e.shapeAnnotationType&&(e.wrapper.children[1].bounds.width=e.bounds.width,e.wrapper.children[1].desiredSize.width=e.bounds.width,e.wrapper.children[1].actualSize.width=e.bounds.width,n[1].horizontalAlignment="Center",n[1].verticalAlignment="Center",n[1].setOffsetWithRespectToBounds(0,0,"Absolute"));if(e.enableShapeLabel&&e.wrapper&&e.wrapper.children){n=e.wrapper.children;for(var m=0;m<n.length;m++)n[parseInt(m.toString(),10)].textNodes&&(n[parseInt(m.toString(),10)].style.fontSize=t.fontSize)}!0,!0}if(void 0!==t.font){if("FreeText"===e.shapeAnnotationType&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length){n=e.wrapper.children;void 0!==t.font.isBold&&(n[1].style.bold=t.font.isBold,e.font.isBold=t.font.isBold),void 0!==t.font.isItalic&&(n[1].style.italic=t.font.isItalic,e.font.isItalic=t.font.isItalic),void 0!==t.font.isUnderline&&(t.font.isUnderline&&(e.font.isStrikeout=!1),!0===t.font.isUnderline?n[1].style.textDecoration="Underline":t.font.isStrikeout||(n[1].style.textDecoration="None"),e.font.isUnderline=t.font.isUnderline),void 0!==t.font.isStrikeout&&(t.font.isStrikeout&&(e.font.isUnderline=!1),!0===t.font.isStrikeout?n[1].style.textDecoration="LineThrough":t.font.isUnderline||(n[1].style.textDecoration="None"),e.font.isStrikeout=t.font.isStrikeout)}!0,!0}if(void 0!==t.textAlign){if(e.textAlign=t.textAlign,"FreeText"===e.shapeAnnotationType&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length)(n=e.wrapper.children)[1].style.textAlign=t.textAlign,1===n[1].childNodes.length?"Justify"===e.textAlign?(n[1].horizontalAlignment="Left",n[1].setOffsetWithRespectToBounds(0,0,null)):"Right"===e.textAlign?(n[1].horizontalAlignment="Right",n[1].setOffsetWithRespectToBounds(.97,0,null)):"Left"===e.textAlign?(n[1].horizontalAlignment="Left",n[1].setOffsetWithRespectToBounds(0,0,null)):"Center"===e.textAlign&&(n[1].horizontalAlignment="Center",n[1].setOffsetWithRespectToBounds(.46,0,null)):n[1].childNodes.length>1&&"Justify"===e.textAlign?n[1].horizontalAlignment="Center":n[1].horizontalAlignment="Auto";!0,!0}if(void 0!==t.thickness&&(e.thickness=t.thickness,e.wrapper.children[0].style.strokeWidth=t.thickness,"LineWidthArrowHead"===e.shapeAnnotationType&&(e.wrapper.children[1].width=12*t.thickness,e.wrapper.children[1].height=12*t.thickness,e.wrapper.children[2].width=12*t.thickness,e.wrapper.children[2].height=12*t.thickness),!0,!0),void 0!==t.borderDashArray&&(e.borderDashArray=t.borderDashArray,e.wrapper.children[0].style.strokeDashArray=t.borderDashArray),void 0!==t.borderStyle&&(e.borderStyle=t.borderStyle),void 0!==t.author&&(e.author=t.author),void 0!==t.modifiedDate&&(e.modifiedDate=t.modifiedDate),void 0!==t.subject&&(e.subject=t.subject),void 0!==t.vertexPoints&&(e.vertexPoints=t.vertexPoints,this.pdfViewer.nameTable[e.id].vertexPoints=t.vertexPoints,this.updateConnector(e,t.vertexPoints)),void 0!==t.leaderHeight&&"Polygon"!==e.shapeAnnotationType&&(e.leaderHeight=t.leaderHeight,this.updateConnector(e,e.vertexPoints)),void 0!==t.notes&&(e.notes=t.notes),void 0!==t.annotName&&(e.annotName=t.annotName),"Distance"===e.shapeAnnotationType){for(i=0;i<e.wrapper.children.length;i++){var g=e.wrapper.children[i],y=ap(e);g.id.indexOf("leader1")>-1&&this.setLineDistance(e,y,g,!1),g.id.indexOf("leader2")>-1&&this.setLineDistance(e,y,g,!0)}this.updateConnector(e,e.vertexPoints)}if("Polygon"===e.shapeAnnotationType&&t.vertexPoints){e.data=fp(e.vertexPoints);var v=e.wrapper.children[0];v.data=e.data,v.canMeasurePath=!0}if(_s(e))for(var w=0;w<e.wrapper.children.length;w++){e.wrapper.children[w].textNodes||Hs(e,e.wrapper.children[parseInt(w.toString(),10)]),!0===e.enableShapeLabel?(e.wrapper.children[parseInt(w.toString(),10)]instanceof Kh&&(e.wrapper.children[parseInt(w.toString(),10)].style.fill=e.labelFillColor),e.wrapper.children[parseInt(w.toString(),10)]instanceof sp&&"Perimeter"===e.measureType&&(e.wrapper.children[parseInt(w.toString(),10)].style.fill="transparent")):(e.wrapper.children[parseInt(w.toString(),10)]instanceof sp&&"Perimeter"===e.measureType||e.wrapper.children[parseInt(w.toString(),10)]instanceof Kh)&&(e.wrapper.children[parseInt(w.toString(),10)].style.fill="transparent")}if(e&&("FreeText"===e.shapeAnnotationType||!0===e.enableShapeLabel)&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length){n=e.wrapper.children;for(var b=0;b<n.length;b++)n[parseInt(b.toString(),10)].textNodes&&("FreeText"===e.shapeAnnotationType?(t.dynamicText?(n[parseInt(b.toString(),10)].content=t.dynamicText,e.dynamicText=t.dynamicText):n[parseInt(b.toString(),10)].content=e.dynamicText,n[parseInt(b.toString(),10)].width=e.bounds.width):(!0===e.enableShapeLabel&&e.measureType||!0===e.enableShapeLabel)&&(t.labelContent?(n[parseInt(b.toString(),10)].content=t.labelContent,e.labelContent=t.labelContent):n[parseInt(b.toString(),10)].content=e.labelContent,e.notes=n[parseInt(b.toString(),10)].content),n[parseInt(b.toString(),10)].isDirt=!0)}(e&&"SignatureText"===e.shapeAnnotationType&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length>1&&(e.wrapper.children[1].isDirt=!0),e.wrapper.measure(new Cd(e.wrapper.bounds.width,e.wrapper.bounds.height)),e.wrapper.arrange(e.wrapper.desiredSize),e&&e.formFieldAnnotationType)&&(e.wrapper&&e.wrapper.children&&e.wrapper.children.length&&((n=e.wrapper.children[0]).actualSize.width=e.wrapper.desiredSize.width,n.actualSize.height=e.wrapper.desiredSize.height));if(e&&"FreeText"===e.shapeAnnotationType&&"Text Box"===e.subject){if(e.wrapper&&e.wrapper.children&&e.wrapper.children.length){(n=e.wrapper.children)[1].childNodes.length>1&&"Justify"===e.textAlign?n[1].horizontalAlignment="Center":1===n[1].childNodes.length&&("Justify"===e.textAlign?(n[1].horizontalAlignment="Left",n[1].setOffsetWithRespectToBounds(0,0,null)):"Right"===e.textAlign?(n[1].horizontalAlignment="Right",n[1].setOffsetWithRespectToBounds(.97,0,null)):"Left"===e.textAlign?(n[1].horizontalAlignment="Left",n[1].setOffsetWithRespectToBounds(0,0,null)):"Center"===e.textAlign&&(n[1].horizontalAlignment="Center",n[1].setOffsetWithRespectToBounds(.46,0,null)));for(var S=0;S<n.length;S++){if(n[parseInt(S.toString(),10)].textNodes&&n[parseInt(S.toString(),10)].textNodes.length>0){n[parseInt(S.toString(),10)].isDirt=!0;var C=n[parseInt(S.toString(),10)].textNodes.length*n[parseInt(S.toString(),10)].textNodes[0].dy,x=e.bounds.height-C;if(x>0&&x<n[parseInt(S.toString(),10)].textNodes[0].dy&&(C+=n[parseInt(S.toString(),10)].textNodes[0].dy),C>e.bounds.height){for(var M="",I=0;I<n[parseInt(S.toString(),10)].textNodes.length;I++){n[S].textNodes[0].dy;M+=n[parseInt(S.toString(),10)].textNodes[parseInt(I.toString(),10)].text}n[parseInt(S.toString(),10)].content=M}}n[parseInt(S.toString(),10)].width=e.bounds.width}}e.wrapper.measure(new Cd(e.wrapper.bounds.width,e.wrapper.bounds.height)),e.wrapper.arrange(e.wrapper.desiredSize)}(this.pdfViewer.renderDrawing(void 0,e.pageIndex),e&&"FreeText"===e.shapeAnnotationType)&&(e.wrapper&&e.wrapper.children&&e.wrapper.children.length&&(1===(n=e.wrapper.children)[1].childNodes.length&&"Justify"===e.textAlign?(n[1].horizontalAlignment="Left",n[1].setOffsetWithRespectToBounds(.5,0,null)):n[1].childNodes.length>1&&"Justify"===e.textAlign&&(n[1].horizontalAlignment="Center",n[1].setOffsetWithRespectToBounds(0,0,null))))},e.prototype.fontSizeCalculation=function(e,t,i){var n=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+e.pageIndex).getContext("2d"),o=0,s=0,a="";for(t.style.italic&&t.style.bold?a="bold italic ":t.style.bold?a="bold ":t.style.italic&&(a="italic ");i>o;)n.font=a+s+"px "+t.style.fontFamily,o=n.measureText(e.dynamicText).width,s+=.1;return s-=.1},e.prototype.setLineDistance=function(e,t,i,n){var o;o=n?gp(e,t[1],t[0],n):gp(e,t[0],t[1],n),i.data=o.data,i.offsetX=o.offsetX,i.offsetY=o.offsetY,i.rotateAngle=o.rotateAngle,i.width=o.width,i.height=o.height,i.pivot=o.pivot,i.canMeasurePath=!0,i.isDirt=!0},e.prototype.scaleSelectedItems=function(e,t,i){var n=this.pdfViewer.selectedItems;return this.scale(n,e,t,i)},e.prototype.scale=function(e,t,i,n){var o=!0;if(e instanceof np){if(e.annotations&&e.annotations.length)for(var s=0,a=e.annotations;s<a.length;s++){var r=a[s];o=this.scaleAnnotation(r,t,i,n,e)}else if(e.formFields&&e.formFields.length)for(var l=0,d=e.formFields;l<d.length;l++){r=d[l];o=this.scaleAnnotation(r,t,i,n,e)}}else o=this.scaleAnnotation(e,t,i,n,void 0);return o},e.prototype.scaleObject=function(e,t,i,n,o,s){if(t=t<0?1:t,1!==(e=e<0?1:e)||1!==t){var a=void 0,r=void 0;if(!_s(n)){a=(h=n).wrapper.actualSize.width*e,r=h.wrapper.actualSize.height*t,e=a/h.wrapper.actualSize.width,t=r/h.wrapper.actualSize.height}var l=Ls();s||(s=n);var d=s.wrapper;if(Os(l,-d.rotateAngle,i.x,i.y),Bs(l,e,t,i.x,i.y),Os(l,d.rotateAngle,i.x,i.y),!_s(n)){var h,p=Ps(l,{x:(h=n).wrapper.offsetX,y:h.wrapper.offsetY});a>0&&(h.wrapper.width=a,h.wrapper.offsetX=p.x),r>0&&(h.wrapper.height=r,h.wrapper.offsetY=p.y),this.nodePropertyChange(n,{bounds:{width:h.wrapper.width,height:h.wrapper.height,x:h.wrapper.offsetX,y:h.wrapper.offsetY}})}}},e.prototype.scaleAnnotation=function(e,t,i,n,o){var s=this.pdfViewer.nameTable[e.id],a=s.wrapper;o||(o=e);var r=o.wrapper,l=r.offsetX-r.actualSize.width*r.pivot.x,d=r.offsetY-r.actualSize.height*r.pivot.y,h=this.getShapePoint(l,d,r.actualSize.width,r.actualSize.height,r.rotateAngle,r.offsetX,r.offsetY,n);void 0!==a.actualSize.width&&void 0!==a.actualSize.height&&this.scaleObject(t,i,h,s,a,o);var p=this.checkBoundaryConstraints(void 0,void 0,e.pageIndex,e.wrapper.bounds);if(!p&&(this.scaleObject(1/t,1/i,h,s,a,o),"FreeText"===e.shapeAnnotationType&&("free_text"===e.id.slice(0,9)||"freetext"===e.id.slice(0,8)))){var c=this.moveInsideViewer(e);this.nodePropertyChange(e,{bounds:{width:e.wrapper.width,height:e.wrapper.height,x:e.wrapper.offsetX+c.tx,y:e.wrapper.offsetY+c.ty}})}return p},e.prototype.moveInsideViewer=function(e,t,i){if(t=t||0,i=i||0,"FreeText"===e.shapeAnnotationType&&("free_text"===e.id.slice(0,9)||"freetext"===e.id.slice(0,8))){var n=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+e.pageIndex);if(n){var o=e.wrapper.bounds,s=n.clientWidth/this.pdfViewer.viewerBase.getZoomFactor(),a=n.clientHeight/this.pdfViewer.viewerBase.getZoomFactor(),r=o.right,l=o.left,d=o.top,h=o.bottom;if(!(r+t<=s-3&&l+t>=1&&h+i<=a-3&&d+i>=1)){var p=0,c=0;r<=s-3||(p=s-r-3),l>=1||(p=p-l+1),h<=a-3||(c=a-h-3),d>=1||(c=c-d+1),0!==p&&(t=p),0!==c&&(i=c)}}}return{tx:t,ty:i}},e.prototype.checkBoundaryConstraints=function(e,t,i,n,o,s){var a=n?void 0:this.pdfViewer.selectedItems.wrapper.bounds,r=n,l=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+i),d=1;if(l){var h=l.clientWidth/this.pdfViewer.viewerBase.getZoomFactor(),p=l.clientHeight/this.pdfViewer.viewerBase.getZoomFactor(),c=(n?r.right:a.right)+(e||0),u=(n?r.left:a.left)+(e||0),f=(n?r.top:a.top)+(t||0),m=(n?r.bottom:a.bottom)+(t||0);if(o&&(d=50,this.pdfViewer.viewerBase.eventArgs&&this.pdfViewer.viewerBase.eventArgs.source&&this.RestrictStamp(this.pdfViewer.viewerBase.eventArgs.source)))return!1;if(c<=h-3&&u>=1&&m<=p-3&&f>=d||s)return!0}return!1},e.prototype.RestrictStamp=function(e){return!(!e||void 0===e.pageIndex||!this.pdfViewer.viewerBase.activeElements||e.pageIndex===this.pdfViewer.viewerBase.activeElements.activePageID)},e.prototype.getShapeBounds=function(e){var t=new Nh,i=Wh(e),n=i.middleLeft,o=i.topCenter,s=i.bottomCenter,a=i.middleRight,r=i.topLeft,l=i.topRight,d=i.bottomLeft,h=i.bottomRight;if(e.corners={topLeft:r,topCenter:o,topRight:l,middleLeft:n,middleRight:a,bottomLeft:d,bottomCenter:s,bottomRight:h},0!==e.rotateAngle||0!==e.parentTransform){var p=Ls();Os(p,e.rotateAngle+e.parentTransform,e.offsetX,e.offsetY),e.corners.topLeft=r=Ps(p,r),e.corners.topCenter=o=Ps(p,o),e.corners.topRight=l=Ps(p,l),e.corners.middleLeft=n=Ps(p,n),e.corners.middleRight=a=Ps(p,a),e.corners.bottomLeft=d=Ps(p,d),e.corners.bottomCenter=s=Ps(p,s),e.corners.bottomRight=h=Ps(p,h)}return t=Nh.toBounds([r,l,d,h]),e.corners.left=t.left,e.corners.right=t.right,e.corners.top=t.top,e.corners.bottom=t.bottom,e.corners.center=t.center,e.corners.width=t.width,e.corners.height=t.height,t},e.prototype.getShapePoint=function(e,t,i,n,o,s,a,r){var l={x:0,y:0},d=Ls();switch(Os(d,o,s,a),r.x){case 1:switch(r.y){case 1:l=Ps(d,{x:e+i,y:t+n});break;case 0:l=Ps(d,{x:e+i,y:t});break;case.5:l=Ps(d,{x:e+i,y:t+n/2})}break;case 0:switch(r.y){case.5:l=Ps(d,{x:e,y:t+n/2});break;case 1:l=Ps(d,{x:e,y:t+n});break;case 0:l=Ps(d,{x:e,y:t})}break;case.5:switch(r.y){case 0:l=Ps(d,{x:e+i/2,y:t});break;case.5:l=Ps(d,{x:e+i/2,y:t+n/2});break;case 1:l=Ps(d,{x:e+i/2,y:t+n})}}return{x:l.x,y:l.y}},e.prototype.dragConnectorEnds=function(e,t,i,n,o,s,a){var r,l,d;if(r=t instanceof np?t.annotations[0]:t,i={x:i.x/this.pdfViewer.viewerBase.getZoomFactor(),y:i.y/this.pdfViewer.viewerBase.getZoomFactor()},this.checkBoundaryConstraints(void 0,void 0,r.pageIndex,r.wrapper.bounds)){if("Distance"===r.shapeAnnotationType){var h=function(e,t){var i;if("Distance"===e.shapeAnnotationType)for(var n=0,o=void 0,s=0;s<e.wrapper.children.length;s++){var a=Ns.findAngle(e.sourcePoint,e.targetPoint);if(e.wrapper.children[s].id.indexOf("leader")>-1){var r=e.wrapper.children[0].bounds.center;0===n?(o={x:e.sourcePoint.x,y:e.sourcePoint.y-e.leaderHeight},r=e.sourcePoint):(o={x:e.targetPoint.x,y:e.targetPoint.y-e.leaderHeight},r=e.targetPoint);var l=Ls();if(Os(l,a,r.x,r.y),i=Ps(l,{x:o.x,y:o.y}),t==="Leader"+n)return{leader:"leader"+n,point:i};n++}}return{leader:"",point:i}}(r,e);if("Leader0"===e)this.pdfViewer.viewerBase.tool instanceof Op?(r.vertexPoints[0].x=i.x,r.vertexPoints[0].y=i.y):(l=i.x-h.point.x,d=i.y-h.point.y,r.vertexPoints[0].x+=l,r.vertexPoints[0].y+=d);else if("Leader1"===e){var p=r.vertexPoints.length-1;this.pdfViewer.viewerBase.tool instanceof Op?(r.vertexPoints[parseInt(p.toString(),10)].x=i.x,r.vertexPoints[parseInt(p.toString(),10)].y=i.y):(l=i.x-h.point.x,d=i.y-h.point.y,r.vertexPoints[parseInt(p.toString(),10)].x+=l,r.vertexPoints[parseInt(p.toString(),10)].y+=d)}else{var c=Ns.findAngle(r.sourcePoint,r.targetPoint),u=t.wrapper.children[0].bounds.center;Os(m=Ls(),-c,u.x,u.y);var f=Ps(m,{x:i.x,y:i.y});if("ConnectorSegmentPoint"===e.split("_")[0]){Os(m=Ls(),-c,u.x,u.y);var m,g=Ps(m,r.vertexPoints[0]),y=Ps(m,r.vertexPoints[r.vertexPoints.length-1]);if(d=f.y-g.y,0===r.leaderHeight&&null!=r.leaderHeight)r.leaderHeight=this.pdfViewer.distanceSettings.leaderLength;else r.leaderHeight+=d,g.y+=d,y.y+=d,Os(m=Ls(),c,u.x,u.y),r.vertexPoints[0]=Ps(m,g),r.vertexPoints[r.vertexPoints.length-1]=Ps(m,y)}}}else if("ConnectorSegmentPoint"===e.split("_")[0]){var v=Number(e.split("_")[1]);l=i.x-r.vertexPoints[parseInt(v.toString(),10)].x,d=i.y-r.vertexPoints[parseInt(v.toString(),10)].y,r.vertexPoints[parseInt(v.toString(),10)].x+=l,r.vertexPoints[parseInt(v.toString(),10)].y+=d,r.vertexPoints.length>2&&"Perimeter"!==t.measureType&&(0===parseFloat(e.split("_")[1])?(r.vertexPoints[r.vertexPoints.length-1].x+=l,r.vertexPoints[r.vertexPoints.length-1].y+=d):parseFloat(e.split("_")[1])===r.vertexPoints.length-1&&(r.vertexPoints[0].x+=l,r.vertexPoints[0].y+=d))}this.nodePropertyChange(r,{vertexPoints:r.vertexPoints}),this.renderSelector(r.pageIndex,a)}return this.pdfViewer.renderDrawing(),!0},e.prototype.dragSourceEnd=function(e,t,i,n){var o=this.pdfViewer.nameTable[e.id];return o.vertexPoints[parseInt(n.toString(),10)].x+=t,o.vertexPoints[parseInt(n.toString(),10)].y+=i,this.pdfViewer.renderDrawing(),!0},e.prototype.updateConnector=function(e,t){e.vertexPoints=t,rp(e,t,e.wrapper.children[0]);e.sourcePoint;var i=e.vertexPoints,n=e.wrapper.children[0];n.canMeasurePath=!0;for(var o=0;o<e.wrapper.children.length;o++)n=e.wrapper.children[parseInt(o.toString(),10)],"Polygon"!==e.shapeAnnotationType&&(n.id.indexOf("srcDec")>-1&&lp(e,n,t[0],i[1],!0),e.targetPoint,n.id.indexOf("tarDec")>-1&&lp(e,n,t[t.length-1],i[i.length-2],!1))},e.prototype.copy=function(){var e;!(this.pdfViewer.formDesignerModule&&!this.pdfViewer.formDesigner.isPropertyDialogOpen||this.pdfViewer.annotationModule)||!this.pdfViewer.designerMode&&!this.pdfViewer.enableAnnotation||0===this.pdfViewer.selectedItems.formFields.length&&0===this.pdfViewer.selectedItems.annotations.length||(this.pdfViewer.clipboardData.pasteIndex=1,this.pdfViewer.clipboardData.clipObject=this.copyObjects());var t=document.getElementById(this.pdfViewer.element.id+"_search_box");return t&&(e="none"!==t.style.display),(this.pdfViewer.formDesigner&&this.pdfViewer.formDesigner.isPropertyDialogOpen||e)&&(this.pdfViewer.clipboardData.clipObject={}),this.pdfViewer.clipboardData.clipObject},e.prototype.copyObjects=function(){var e=[],t=[];if(this.pdfViewer.clipboardData.childTable={},this.pdfViewer.selectedItems.annotations.length>0){e=this.pdfViewer.selectedItems.annotations;for(var i=0;i<e.length;i++){var n=qs(e[parseInt(i.toString(),10)]);t.push(n)}}if(this.pdfViewer.selectedItems.formFields.length>0){e=this.pdfViewer.selectedItems.formFields;for(i=0;i<e.length;i++){n=qs(e[parseInt(i.toString(),10)]);t.push(n)}}if(0===this.pdfViewer.clipboardData.pasteIndex)for(var o=0,s=e;o<s.length;o++){var a=s[o];this.pdfViewer.nameTable[a.id]&&(a.formFieldAnnotationType?(this.pdfViewer.clearSelection(a.pageIndex),this.pdfViewer.formDesignerModule.deleteFormField(a.id)):a.annotName?this.pdfViewer.annotationModule.deleteAnnotationById(a.annotName):this.pdfViewer.annotationModule.deleteAnnotation())}return this.sortByZIndex(t,"zIndex"),t},e.prototype.getNewObject=function(e){var t,i=[];this.pdfViewer.clipboardData.pasteIndex=1;for(var n=0;n<e.length;n++)t=qs(e[parseInt(n.toString(),10)]),i.push(t);return i},e.prototype.paste=function(e,t){var i,n=this.pdfViewer.viewerBase.getZoomFactor(),o=this.pdfViewer.allowServerDataBinding;if(this.pdfViewer.enableServerDataBinding(!1),e||this.pdfViewer.clipboardData.clipObject){var s=e?this.getNewObject(e):this.pdfViewer.clipboardData.clipObject;if(s){var a={};0!==this.pdfViewer.clipboardData.pasteIndex&&this.pdfViewer.clearSelection(t);for(var r=0,l=s;r<l.length;r++){i=(c=l[r]).id,c.id+=Hh();var d=this.splitFormFieldName(c),h=0;this.pdfViewer.formDesigner&&(this.pdfViewer.formDesigner.setFormFieldIndex(),h=this.pdfViewer.formDesigner.formFieldIndex,c.name=d+h),a[c.id]=c}for(var p=0;p<s.length;p++){var c=s[parseInt(p.toString(),10)],u=this.pdfViewer.viewerBase.getElement("_pageDiv_"+c.pageIndex),f=event;if(!f||f.clientX||f.clientY||(f={clientX:this.pdfViewer.viewerBase.mouseLeft,clientY:this.pdfViewer.viewerBase.mouseTop}),S()&&(f=this.pdfViewer.viewerBase.mouseDownEvent),_s(c))this.calculateCopyPosition(c,u,f);else if(u){var m=u.getBoundingClientRect();c.bounds.x=(f.clientX-m.left)/n,c.bounds.y=(f.clientY-m.top)/n}var g=qs(c);"Cut"!==this.pdfViewer.viewerBase.contextMenuModule.previousAction?(g.id+=Hh(),this.pdfViewer.annotationModule&&"HandWrittenSignature"!==g.shapeAnnotationType&&(g.annotName=g.id,this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationCollection(g,s[0],!1)),"SignatureText"!==g.shapeAnnotationType&&"HandWrittenSignature"!==g.shapeAnnotationType&&"SignatureImage"!==g.shapeAnnotationType||this.pdfViewer.viewerBase.signatureModule.storeSignatureData(g.pageIndex,g),g.formFieldAnnotationType||this.pdfViewer.annotation.addAction(this.pdfViewer.viewerBase.getActivePage(!1),null,g,"Addition","",g,g)):(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationCollection(g,s[0],!0),"SignatureText"!==g.shapeAnnotationType&&"HandWrittenSignature"!==g.shapeAnnotationType&&"SignatureImage"!==g.shapeAnnotationType||this.pdfViewer.viewerBase.signatureModule.storeSignatureData(g.pageIndex,g));var y=this.add(g);if(this.pdfViewer.formDesigner&&y.formFieldAnnotationType&&this.pdfViewer.annotation.addAction(this.pdfViewer.viewerBase.getActivePage(!0),null,y,"Addition","",y,y),("FreeText"===g.shapeAnnotationType||g.enableShapeLabel)&&y&&this.nodePropertyChange(y,{}),y.formFieldAnnotationType&&y.pageIndex===t){this.pdfViewer.formFieldCollection.push(y);var v={id:y.id,name:y.name,value:y.value,type:y.formFieldAnnotationType,isReadOnly:y.isReadonly,fontFamily:y.fontFamily,fontSize:y.fontSize,fontStyle:y.fontStyle,color:y.color,backgroundColor:y.backgroundColor,alignment:y.alignment,visibility:y.visibility,maxLength:y.maxLength,isRequired:y.isRequired,isPrint:y.isPrint,isSelected:y.isSelected,isChecked:y.isChecked,tooltip:y.tooltip,bounds:y.bounds,thickness:y.thickness,borderColor:y.borderColor,signatureIndicatorSettings:y.signatureIndicatorSettings};y.options&&y.options.length>0&&(v.options=y.options),this.pdfViewer.formFieldCollections.push(v),this.pdfViewer.formDesigner.drawHTMLContent(y.formFieldAnnotationType,y.wrapper.children[0],y,y.pageIndex,this.pdfViewer,i)}this.pdfViewer.select([g.id],this.pdfViewer.annotationSelectorSettings),y.formFieldAnnotationType||this.pdfViewer.annotationModule.triggerAnnotationAddEvent(g)}}this.pdfViewer.renderDrawing(void 0,t),this.pdfViewer.clipboardData.pasteIndex++}this.pdfViewer.enableServerDataBinding(o,!0)},e.prototype.splitFormFieldName=function(e){var t=null;if(e)switch(e.formFieldAnnotationType){case"Textbox":t="Textbox";break;case"PasswordField":t="Password";break;case"Checkbox":t="Check Box";break;case"RadioButton":t="Radio Button";break;case"DropdownList":t="Dropdown";break;case"ListBox":t="List Box";break;case"SignatureField":t="Signature";break;case"InitialField":t="Initial"}return t},e.prototype.calculateCopyPosition=function(e,t,i){for(var n,o,s,a,r=this.pdfViewer.viewerBase.getZoomFactor(),l=0;l<e.vertexPoints.length;l++)if(t)if(0===l){var d=t.getBoundingClientRect();n=e.vertexPoints[parseInt(l.toString(),10)].x,o=e.vertexPoints[parseInt(l.toString(),10)].y,e.vertexPoints[parseInt(l.toString(),10)].x=(i.clientX-d.left)/r,e.vertexPoints[parseInt(l.toString(),10)].y=(i.clientY-d.top)/r,s=e.vertexPoints[parseInt(l.toString(),10)].x,a=e.vertexPoints[parseInt(l.toString(),10)].y}else e.vertexPoints[parseInt(l.toString(),10)].x+=s-n,e.vertexPoints[parseInt(l.toString(),10)].y+=a-o},e.prototype.cut=function(e){var t,i=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(!1),this.pdfViewer.annotationModule&&(this.pdfViewer.annotationModule.removedAnnotationCollection=[]),(this.pdfViewer.formDesignerModule&&!this.pdfViewer.formDesigner.isPropertyDialogOpen||this.pdfViewer.selectedItems.annotations.length>0)&&(this.pdfViewer.designerMode||this.pdfViewer.selectedItems.annotations.length>0)&&(0!==this.pdfViewer.selectedItems.formFields.length||0!==this.pdfViewer.selectedItems.annotations.length)&&(this.pdfViewer.clipboardData.pasteIndex=0,this.pdfViewer.clipboardData.clipObject=this.copyObjects(),this.pdfViewer.renderDrawing(void 0,e),this.pdfViewer.enableServerDataBinding(i,!0));var n=document.getElementById(this.pdfViewer.element.id+"_search_box");n&&(t="none"!==n.style.display),(this.pdfViewer.formDesigner&&this.pdfViewer.formDesigner.isPropertyDialogOpen||t)&&(this.pdfViewer.clipboardData.clipObject={})},e.prototype.sortByZIndex=function(e,t){var i=t||"zIndex";return e=e.sort((function(e,t){return e[i]-t[i]}))},e}(),Wc=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Uc=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},qc=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function a(e){try{l(n.next(e))}catch(t){s(t)}}function r(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){e.done?o(e.value):new i((function(t){t(e.value)})).then(a,r)}l((n=n.apply(e,t||[])).next())}))},Yc=function(e,t){var i,n,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(s){return function(r){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(r){s=[6,r],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,r])}}},Qc=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge(!0)],t.prototype,"showTooltip",void 0),Uc([Ge()],t.prototype,"toolbarItems",void 0),Uc([Ge()],t.prototype,"annotationToolbarItems",void 0),Uc([Ge()],t.prototype,"formDesignerToolbarItems",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge()],t.prototype,"ajaxHeaders",void 0),Uc([Ge(!1)],t.prototype,"withCredentials",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge("")],t.prototype,"customStampName",void 0),Uc([Ge("")],t.prototype,"customStampImageSource",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge(!0)],t.prototype,"showTooltip",void 0),Uc([Ge()],t.prototype,"annotationToolbarItem",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge(!0)],t.prototype,"showTooltip",void 0),Uc([Ge()],t.prototype,"formDesignerToolbarItem",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge({x:0,y:0,width:0,height:0})],t.prototype,"bounds",void 0),Uc([Ge("")],t.prototype,"name",void 0),Uc([Ge(!1)],t.prototype,"isReadOnly",void 0),Uc([Ge("visible")],t.prototype,"visibility",void 0),Uc([Ge(!1)],t.prototype,"isRequired",void 0),Uc([Ge(!1)],t.prototype,"isPrint",void 0),Uc([Ge("")],t.prototype,"tooltip",void 0),Uc([Ge(1)],t.prototype,"thickness",void 0),Uc([Ge(0)],t.prototype,"pageNumber",void 0),Uc([Ge()],t.prototype,"signatureDialogSettings",void 0),Uc([Ge()],t.prototype,"signatureIndicatorSettings",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge({x:0,y:0,width:0,height:0})],t.prototype,"bounds",void 0),Uc([Ge("")],t.prototype,"name",void 0),Uc([Ge(!1)],t.prototype,"isReadOnly",void 0),Uc([Ge("visible")],t.prototype,"visibility",void 0),Uc([Ge(!1)],t.prototype,"isRequired",void 0),Uc([Ge(!1)],t.prototype,"isPrint",void 0),Uc([Ge("")],t.prototype,"tooltip",void 0),Uc([Ge(1)],t.prototype,"thickness",void 0),Uc([Ge(0)],t.prototype,"pageNumber",void 0),Uc([Ge(!1)],t.prototype,"isInitialField",void 0),Uc([Ge()],t.prototype,"initialDialogSettings",void 0),Uc([Ge()],t.prototype,"initialIndicatorSettings",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge(1)],t.prototype,"opacity",void 0),Uc([Ge("orange")],t.prototype,"backgroundColor",void 0),Uc([Ge(19)],t.prototype,"width",void 0),Uc([Ge(10)],t.prototype,"height",void 0),Uc([Ge(10)],t.prototype,"fontSize",void 0),Uc([Ge(null)],t.prototype,"text",void 0),Uc([Ge("black")],t.prototype,"color",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge(Ks.Draw|Ks.Text|Ks.Upload)],t.prototype,"displayMode",void 0),Uc([Ge(!1)],t.prototype,"hideSaveSignature",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge("Load")],t.prototype,"load",void 0),Uc([Ge("Unload")],t.prototype,"unload",void 0),Uc([Ge("RenderPdfPages")],t.prototype,"renderPages",void 0),Uc([Ge("RenderPdfPages")],t.prototype,"print",void 0),Uc([Ge("Download")],t.prototype,"download",void 0),Uc([Ge("RenderThumbnailImages")],t.prototype,"renderThumbnail",void 0),Uc([Ge("RenderAnnotationComments")],t.prototype,"renderComments",void 0),Uc([Ge("ImportAnnotations")],t.prototype,"importAnnotations",void 0),Uc([Ge("ExportAnnotations")],t.prototype,"exportAnnotations",void 0),Uc([Ge("ImportFormFields")],t.prototype,"importFormFields",void 0),Uc([Ge("ExportFormFields")],t.prototype,"exportFormFields",void 0),Uc([Ge("RenderPdfTexts")],t.prototype,"renderTexts",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge(1)],t.prototype,"pageNumber",void 0),Uc([Ge(1)],t.prototype,"opacity",void 0),Uc([Ge("#ff0000")],t.prototype,"color",void 0),Uc([Ge("Guest")],t.prototype,"author",void 0),Uc([Ge("")],t.prototype,"annotationSelectorSettings",void 0),Uc([Ge(null)],t.prototype,"customData",void 0),Uc([Ge(!1)],t.prototype,"isLock",void 0),Uc([Ge(!1)],t.prototype,"enableMultiPageAnnotation",void 0),Uc([Ge(!1)],t.prototype,"enableTextMarkupResizer",void 0),Uc([Ge(["None"])],t.prototype,"allowedInteractions",void 0),Uc([Ge(!0)],t.prototype,"isPrint",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge(1)],t.prototype,"pageNumber",void 0),Uc([Ge(1)],t.prototype,"opacity",void 0),Uc([Ge("#00ff00")],t.prototype,"color",void 0),Uc([Ge("Guest")],t.prototype,"author",void 0),Uc([Ge("")],t.prototype,"annotationSelectorSettings",void 0),Uc([Ge(null)],t.prototype,"customData",void 0),Uc([Ge(!1)],t.prototype,"isLock",void 0),Uc([Ge(!1)],t.prototype,"enableMultiPageAnnotation",void 0),Uc([Ge(!1)],t.prototype,"enableTextMarkupResizer",void 0),Uc([Ge(["None"])],t.prototype,"allowedInteractions",void 0),Uc([Ge(!0)],t.prototype,"isPrint",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge(1)],t.prototype,"pageNumber",void 0),Uc([Ge(1)],t.prototype,"opacity",void 0),Uc([Ge("#ffff00")],t.prototype,"color",void 0),Uc([Ge("Guest")],t.prototype,"author",void 0),Uc([Ge("")],t.prototype,"annotationSelectorSettings",void 0),Uc([Ge(null)],t.prototype,"customData",void 0),Uc([Ge(!1)],t.prototype,"isLock",void 0),Uc([Ge(!1)],t.prototype,"enableMultiPageAnnotation",void 0),Uc([Ge(!1)],t.prototype,"enableTextMarkupResizer",void 0),Uc([Ge(["None"])],t.prototype,"allowedInteractions",void 0),Uc([Ge(!0)],t.prototype,"isPrint",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge({x:0,y:0})],t.prototype,"offset",void 0),Uc([Ge(1)],t.prototype,"pageNumber",void 0),Uc([Ge(1)],t.prototype,"opacity",void 0),Uc([Ge("#ffffff00")],t.prototype,"fillColor",void 0),Uc([Ge("#ff0000")],t.prototype,"strokeColor",void 0),Uc([Ge("Guest")],t.prototype,"author",void 0),Uc([Ge("1")],t.prototype,"thickness",void 0),Uc([Ge("None")],t.prototype,"lineHeadStartStyle",void 0),Uc([Ge("None")],t.prototype,"lineHeadEndStyle",void 0),Uc([Ge(0)],t.prototype,"borderDashArray",void 0),Uc([Ge("")],t.prototype,"annotationSelectorSettings",void 0),Uc([Ge(0)],t.prototype,"minHeight",void 0),Uc([Ge(0)],t.prototype,"minWidth",void 0),Uc([Ge(0)],t.prototype,"maxHeight",void 0),Uc([Ge(0)],t.prototype,"maxWidth",void 0),Uc([Ge(!1)],t.prototype,"isLock",void 0),Uc([Ge(null)],t.prototype,"customData",void 0),Uc([Ge(["None"])],t.prototype,"allowedInteractions",void 0),Uc([Ge(!0)],t.prototype,"isPrint",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge({x:0,y:0})],t.prototype,"offset",void 0),Uc([Ge(1)],t.prototype,"pageNumber",void 0),Uc([Ge(1)],t.prototype,"opacity",void 0),Uc([Ge("#ffffff00")],t.prototype,"fillColor",void 0),Uc([Ge("#ff0000")],t.prototype,"strokeColor",void 0),Uc([Ge("Guest")],t.prototype,"author",void 0),Uc([Ge("1")],t.prototype,"thickness",void 0),Uc([Ge("None")],t.prototype,"lineHeadStartStyle",void 0),Uc([Ge("None")],t.prototype,"lineHeadEndStyle",void 0),Uc([Ge(0)],t.prototype,"borderDashArray",void 0),Uc([Ge("")],t.prototype,"annotationSelectorSettings",void 0),Uc([Ge(0)],t.prototype,"minHeight",void 0),Uc([Ge(0)],t.prototype,"minWidth",void 0),Uc([Ge(0)],t.prototype,"maxHeight",void 0),Uc([Ge(0)],t.prototype,"maxWidth",void 0),Uc([Ge(!1)],t.prototype,"isLock",void 0),Uc([Ge(null)],t.prototype,"customData",void 0),Uc([Ge(["None"])],t.prototype,"allowedInteractions",void 0),Uc([Ge(!0)],t.prototype,"isPrint",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge({x:0,y:0})],t.prototype,"offset",void 0),Uc([Ge(1)],t.prototype,"pageNumber",void 0),Uc([Ge(100)],t.prototype,"width",void 0),Uc([Ge(50)],t.prototype,"height",void 0),Uc([Ge(1)],t.prototype,"opacity",void 0),Uc([Ge("#ffffff00")],t.prototype,"fillColor",void 0),Uc([Ge("#ff0000")],t.prototype,"strokeColor",void 0),Uc([Ge("Guest")],t.prototype,"author",void 0),Uc([Ge("1")],t.prototype,"thickness",void 0),Uc([Ge("")],t.prototype,"annotationSelectorSettings",void 0),Uc([Ge(0)],t.prototype,"minHeight",void 0),Uc([Ge(0)],t.prototype,"minWidth",void 0),Uc([Ge(0)],t.prototype,"maxHeight",void 0),Uc([Ge(0)],t.prototype,"maxWidth",void 0),Uc([Ge(!1)],t.prototype,"isLock",void 0),Uc([Ge(null)],t.prototype,"customData",void 0),Uc([Ge(["None"])],t.prototype,"allowedInteractions",void 0),Uc([Ge(!0)],t.prototype,"isPrint",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge({x:0,y:0})],t.prototype,"offset",void 0),Uc([Ge(1)],t.prototype,"pageNumber",void 0),Uc([Ge(100)],t.prototype,"width",void 0),Uc([Ge(100)],t.prototype,"height",void 0),Uc([Ge(1)],t.prototype,"opacity",void 0),Uc([Ge("#ffffff00")],t.prototype,"fillColor",void 0),Uc([Ge("#ff0000")],t.prototype,"strokeColor",void 0),Uc([Ge("Guest")],t.prototype,"author",void 0),Uc([Ge("1")],t.prototype,"thickness",void 0),Uc([Ge("")],t.prototype,"annotationSelectorSettings",void 0),Uc([Ge(0)],t.prototype,"minHeight",void 0),Uc([Ge(0)],t.prototype,"minWidth",void 0),Uc([Ge(0)],t.prototype,"maxHeight",void 0),Uc([Ge(0)],t.prototype,"maxWidth",void 0),Uc([Ge(!1)],t.prototype,"isLock",void 0),Uc([Ge(null)],t.prototype,"customData",void 0),Uc([Ge(["None"])],t.prototype,"allowedInteractions",void 0),Uc([Ge(!0)],t.prototype,"isPrint",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge(1)],t.prototype,"opacity",void 0),Uc([Ge("#ffffff00")],t.prototype,"fillColor",void 0),Uc([Ge("#000")],t.prototype,"fontColor",void 0),Uc([Ge(16)],t.prototype,"fontSize",void 0),Uc([Ge("Helvetica")],t.prototype,"fontFamily",void 0),Uc([Ge("Label")],t.prototype,"labelContent",void 0),Uc([Ge("")],t.prototype,"notes",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge({x:0,y:0})],t.prototype,"offset",void 0),Uc([Ge(1)],t.prototype,"pageNumber",void 0),Uc([Ge(1)],t.prototype,"opacity",void 0),Uc([Ge("#ffffff00")],t.prototype,"fillColor",void 0),Uc([Ge("#ff0000")],t.prototype,"strokeColor",void 0),Uc([Ge("Guest")],t.prototype,"author",void 0),Uc([Ge("1")],t.prototype,"thickness",void 0),Uc([Ge("")],t.prototype,"annotationSelectorSettings",void 0),Uc([Ge(0)],t.prototype,"minHeight",void 0),Uc([Ge(0)],t.prototype,"minWidth",void 0),Uc([Ge(0)],t.prototype,"maxHeight",void 0),Uc([Ge(0)],t.prototype,"maxWidth",void 0),Uc([Ge(!1)],t.prototype,"isLock",void 0),Uc([Ge(null)],t.prototype,"customData",void 0),Uc([Ge(["None"])],t.prototype,"allowedInteractions",void 0),Uc([Ge(!0)],t.prototype,"isPrint",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge({x:0,y:0})],t.prototype,"offset",void 0),Uc([Ge(1)],t.prototype,"pageNumber",void 0),Uc([Ge(150)],t.prototype,"width",void 0),Uc([Ge(50)],t.prototype,"height",void 0),Uc([Ge(1)],t.prototype,"opacity",void 0),Uc([Ge("Guest")],t.prototype,"author",void 0),Uc([Ge("")],t.prototype,"annotationSelectorSettings",void 0),Uc([Ge(0)],t.prototype,"minHeight",void 0),Uc([Ge(0)],t.prototype,"minWidth",void 0),Uc([Ge(0)],t.prototype,"maxHeight",void 0),Uc([Ge(0)],t.prototype,"maxWidth",void 0),Uc([Ge(!1)],t.prototype,"isLock",void 0),Uc([Ge(null)],t.prototype,"customData",void 0),Uc([Ge([])],t.prototype,"dynamicStamps",void 0),Uc([Ge([])],t.prototype,"signStamps",void 0),Uc([Ge([])],t.prototype,"standardBusinessStamps",void 0),Uc([Ge(["None"])],t.prototype,"allowedInteractions",void 0),Uc([Ge(!0)],t.prototype,"isPrint",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge({x:0,y:0})],t.prototype,"offset",void 0),Uc([Ge(1)],t.prototype,"pageNumber",void 0),Uc([Ge(1)],t.prototype,"opacity",void 0),Uc([Ge("Guest")],t.prototype,"author",void 0),Uc([Ge(0)],t.prototype,"width",void 0),Uc([Ge(0)],t.prototype,"height",void 0),Uc([Ge(0)],t.prototype,"left",void 0),Uc([Ge(0)],t.prototype,"top",void 0),Uc([Ge(!1)],t.prototype,"isAddToMenu",void 0),Uc([Ge(0)],t.prototype,"minHeight",void 0),Uc([Ge(0)],t.prototype,"minWidth",void 0),Uc([Ge(0)],t.prototype,"maxHeight",void 0),Uc([Ge(0)],t.prototype,"maxWidth",void 0),Uc([Ge(!1)],t.prototype,"isLock",void 0),Uc([Ge("")],t.prototype,"customStamps",void 0),Uc([Ge(!0)],t.prototype,"enableCustomStamp",void 0),Uc([Ge(["None"])],t.prototype,"allowedInteractions",void 0),Uc([Ge(!0)],t.prototype,"isPrint",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge({x:0,y:0})],t.prototype,"offset",void 0),Uc([Ge(1)],t.prototype,"pageNumber",void 0),Uc([Ge(1)],t.prototype,"opacity",void 0),Uc([Ge("#ff0000")],t.prototype,"fillColor",void 0),Uc([Ge("#ff0000")],t.prototype,"strokeColor",void 0),Uc([Ge("Guest")],t.prototype,"author",void 0),Uc([Ge("1")],t.prototype,"thickness",void 0),Uc([Ge("None")],t.prototype,"lineHeadStartStyle",void 0),Uc([Ge("None")],t.prototype,"lineHeadEndStyle",void 0),Uc([Ge(0)],t.prototype,"borderDashArray",void 0),Uc([Ge("")],t.prototype,"annotationSelectorSettings",void 0),Uc([Ge(0)],t.prototype,"minHeight",void 0),Uc([Ge(0)],t.prototype,"minWidth",void 0),Uc([Ge(0)],t.prototype,"maxHeight",void 0),Uc([Ge(0)],t.prototype,"maxWidth",void 0),Uc([Ge(!1)],t.prototype,"isLock",void 0),Uc([Ge(null)],t.prototype,"customData",void 0),Uc([Ge(40)],t.prototype,"leaderLength",void 0),Uc([Ge($s.move)],t.prototype,"resizeCursorType",void 0),Uc([Ge(["None"])],t.prototype,"allowedInteractions",void 0),Uc([Ge(!0)],t.prototype,"isPrint",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge({x:0,y:0})],t.prototype,"offset",void 0),Uc([Ge(1)],t.prototype,"pageNumber",void 0),Uc([Ge(1)],t.prototype,"opacity",void 0),Uc([Ge("#ffffff00")],t.prototype,"fillColor",void 0),Uc([Ge("#ff0000")],t.prototype,"strokeColor",void 0),Uc([Ge("Guest")],t.prototype,"author",void 0),Uc([Ge("1")],t.prototype,"thickness",void 0),Uc([Ge("None")],t.prototype,"lineHeadStartStyle",void 0),Uc([Ge("None")],t.prototype,"lineHeadEndStyle",void 0),Uc([Ge(0)],t.prototype,"borderDashArray",void 0),Uc([Ge(0)],t.prototype,"minHeight",void 0),Uc([Ge(0)],t.prototype,"minWidth",void 0),Uc([Ge(0)],t.prototype,"maxHeight",void 0),Uc([Ge(0)],t.prototype,"maxWidth",void 0),Uc([Ge(!1)],t.prototype,"isLock",void 0),Uc([Ge("")],t.prototype,"annotationSelectorSettings",void 0),Uc([Ge(["None"])],t.prototype,"allowedInteractions",void 0),Uc([Ge(!0)],t.prototype,"isPrint",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge({x:0,y:0})],t.prototype,"offset",void 0),Uc([Ge(1)],t.prototype,"pageNumber",void 0),Uc([Ge(1)],t.prototype,"opacity",void 0),Uc([Ge("#ffffff00")],t.prototype,"fillColor",void 0),Uc([Ge("#ff0000")],t.prototype,"strokeColor",void 0),Uc([Ge("Guest")],t.prototype,"author",void 0),Uc([Ge("1")],t.prototype,"thickness",void 0),Uc([Ge(0)],t.prototype,"minHeight",void 0),Uc([Ge(0)],t.prototype,"minWidth",void 0),Uc([Ge(0)],t.prototype,"maxHeight",void 0),Uc([Ge(0)],t.prototype,"maxWidth",void 0),Uc([Ge(!1)],t.prototype,"isLock",void 0),Uc([Ge("")],t.prototype,"annotationSelectorSettings",void 0),Uc([Ge(["None"])],t.prototype,"allowedInteractions",void 0),Uc([Ge(!0)],t.prototype,"isPrint",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge({x:0,y:0})],t.prototype,"offset",void 0),Uc([Ge(1)],t.prototype,"pageNumber",void 0),Uc([Ge(100)],t.prototype,"width",void 0),Uc([Ge(90)],t.prototype,"height",void 0),Uc([Ge(1)],t.prototype,"opacity",void 0),Uc([Ge("#ffffff00")],t.prototype,"fillColor",void 0),Uc([Ge("#ff0000")],t.prototype,"strokeColor",void 0),Uc([Ge("Guest")],t.prototype,"author",void 0),Uc([Ge("1")],t.prototype,"thickness",void 0),Uc([Ge("")],t.prototype,"annotationSelectorSettings",void 0),Uc([Ge(0)],t.prototype,"minHeight",void 0),Uc([Ge(0)],t.prototype,"minWidth",void 0),Uc([Ge(0)],t.prototype,"maxHeight",void 0),Uc([Ge(0)],t.prototype,"maxWidth",void 0),Uc([Ge(!1)],t.prototype,"isLock",void 0),Uc([Ge(null)],t.prototype,"customData",void 0),Uc([Ge(["None"])],t.prototype,"allowedInteractions",void 0),Uc([Ge(!0)],t.prototype,"isPrint",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge({x:0,y:0})],t.prototype,"offset",void 0),Uc([Ge(1)],t.prototype,"pageNumber",void 0),Uc([Ge(1)],t.prototype,"opacity",void 0),Uc([Ge("#ffffff00")],t.prototype,"fillColor",void 0),Uc([Ge("#ff0000")],t.prototype,"strokeColor",void 0),Uc([Ge("Guest")],t.prototype,"author",void 0),Uc([Ge("1")],t.prototype,"thickness",void 0),Uc([Ge(0)],t.prototype,"minHeight",void 0),Uc([Ge(0)],t.prototype,"minWidth",void 0),Uc([Ge(0)],t.prototype,"maxHeight",void 0),Uc([Ge(0)],t.prototype,"maxWidth",void 0),Uc([Ge(!1)],t.prototype,"isLock",void 0),Uc([Ge("")],t.prototype,"annotationSelectorSettings",void 0),Uc([Ge(["None"])],t.prototype,"allowedInteractions",void 0),Uc([Ge(!0)],t.prototype,"isPrint",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge({x:0,y:0})],t.prototype,"offset",void 0),Uc([Ge(1)],t.prototype,"pageNumber",void 0),Uc([Ge(0)],t.prototype,"width",void 0),Uc([Ge(0)],t.prototype,"height",void 0),Uc([Ge(0)],t.prototype,"path",void 0),Uc([Ge(1)],t.prototype,"opacity",void 0),Uc([Ge("#ff0000")],t.prototype,"strokeColor",void 0),Uc([Ge(1)],t.prototype,"thickness",void 0),Uc([Ge("")],t.prototype,"annotationSelectorSettings",void 0),Uc([Ge(!1)],t.prototype,"isLock",void 0),Uc([Ge("Guest")],t.prototype,"author",void 0),Uc([Ge(["None"])],t.prototype,"allowedInteractions",void 0),Uc([Ge(null)],t.prototype,"customData",void 0),Uc([Ge(!0)],t.prototype,"isPrint",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge({x:0,y:0})],t.prototype,"offset",void 0),Uc([Ge(1)],t.prototype,"pageNumber",void 0),Uc([Ge("Guest")],t.prototype,"author",void 0),Uc([Ge(1)],t.prototype,"opacity",void 0),Uc([Ge("")],t.prototype,"annotationSelectorSettings",void 0),Uc([Ge(null)],t.prototype,"customData",void 0),Uc([Ge(!1)],t.prototype,"isLock",void 0),Uc([Ge(["None"])],t.prototype,"allowedInteractions",void 0),Uc([Ge(!0)],t.prototype,"isPrint",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge(1)],t.prototype,"scaleRatio",void 0),Uc([Ge("in")],t.prototype,"conversionUnit",void 0),Uc([Ge("in")],t.prototype,"displayUnit",void 0),Uc([Ge(96)],t.prototype,"depth",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge({x:0,y:0})],t.prototype,"offset",void 0),Uc([Ge(1)],t.prototype,"pageNumber",void 0),Uc([Ge(1)],t.prototype,"opacity",void 0),Uc([Ge("#ffffff00")],t.prototype,"borderColor",void 0),Uc([Ge(1)],t.prototype,"borderWidth",void 0),Uc([Ge("solid")],t.prototype,"borderStyle",void 0),Uc([Ge("Guest")],t.prototype,"author",void 0),Uc([Ge("#ffffff00")],t.prototype,"fillColor",void 0),Uc([Ge(16)],t.prototype,"fontSize",void 0),Uc([Ge(151)],t.prototype,"width",void 0),Uc([Ge(24.6)],t.prototype,"height",void 0),Uc([Ge("#000")],t.prototype,"fontColor",void 0),Uc([Ge("Helvetica")],t.prototype,"fontFamily",void 0),Uc([Ge("TypeHere")],t.prototype,"defaultText",void 0),Uc([Ge("None")],t.prototype,"fontStyle",void 0),Uc([Ge("Left")],t.prototype,"textAlignment",void 0),Uc([Ge(!1)],t.prototype,"allowEditTextOnly",void 0),Uc([Ge("")],t.prototype,"annotationSelectorSettings",void 0),Uc([Ge(0)],t.prototype,"minHeight",void 0),Uc([Ge(0)],t.prototype,"minWidth",void 0),Uc([Ge(0)],t.prototype,"maxHeight",void 0),Uc([Ge(0)],t.prototype,"maxWidth",void 0),Uc([Ge(!1)],t.prototype,"isLock",void 0),Uc([Ge(null)],t.prototype,"customData",void 0),Uc([Ge(["None"])],t.prototype,"allowedInteractions",void 0),Uc([Ge(!0)],t.prototype,"isPrint",void 0),Uc([Ge(!1)],t.prototype,"isReadonly",void 0),Uc([Ge(!1)],t.prototype,"enableAutoFit",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge("")],t.prototype,"selectionBorderColor",void 0),Uc([Ge("black")],t.prototype,"resizerBorderColor",void 0),Uc([Ge("#FF4081")],t.prototype,"resizerFillColor",void 0),Uc([Ge(8)],t.prototype,"resizerSize",void 0),Uc([Ge(1)],t.prototype,"selectionBorderThickness",void 0),Uc([Ge("Square")],t.prototype,"resizerShape",void 0),Uc([Ge("")],t.prototype,"selectorLineDashArray",void 0),Uc([Ge(Js.Corners|Js.Edges)],t.prototype,"resizerLocation",void 0),Uc([Ge(null)],t.prototype,"resizerCursorType",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge("#fdd835")],t.prototype,"searchHighlightColor",void 0),Uc([Ge("#8b4c12")],t.prototype,"searchColor",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge(1)],t.prototype,"opacity",void 0),Uc([Ge("#000000")],t.prototype,"strokeColor",void 0),Uc([Ge(1)],t.prototype,"thickness",void 0),Uc([Ge(150)],t.prototype,"width",void 0),Uc([Ge(100)],t.prototype,"height",void 0),Uc([Ge(1)],t.prototype,"saveSignatureLimit",void 0),Uc([Ge(1)],t.prototype,"saveInitialLimit",void 0),Uc([Ge([])],t.prototype,"signatureItem",void 0),Uc([Ge()],t.prototype,"typeSignatureFonts",void 0),Uc([Ge("")],t.prototype,"annotationSelectorSettings",void 0),Uc([Ge()],t.prototype,"signatureDialogSettings",void 0),Uc([Ge()],t.prototype,"initialDialogSettings",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge("Guest")],t.prototype,"author",void 0),Uc([Ge(0)],t.prototype,"minHeight",void 0),Uc([Ge(0)],t.prototype,"minWidth",void 0),Uc([Ge(0)],t.prototype,"maxHeight",void 0),Uc([Ge(0)],t.prototype,"maxWidth",void 0),Uc([Ge(!1)],t.prototype,"isLock",void 0),Uc([Ge(!1)],t.prototype,"skipPrint",void 0),Uc([Ge(!1)],t.prototype,"skipDownload",void 0),Uc([Ge(null)],t.prototype,"customData",void 0),Uc([Ge(["None"])],t.prototype,"allowedInteractions",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge()],t.prototype,"textData",void 0),Uc([Ge()],t.prototype,"pageText",void 0),Uc([Ge()],t.prototype,"pageSize",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge()],t.prototype,"bounds",void 0),Uc([Ge()],t.prototype,"text",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge()],t.prototype,"size",void 0),Uc([Ge()],t.prototype,"x",void 0),Uc([Ge()],t.prototype,"y",void 0),Uc([Ge()],t.prototype,"width",void 0),Uc([Ge()],t.prototype,"height",void 0),Uc([Ge()],t.prototype,"left",void 0),Uc([Ge()],t.prototype,"top",void 0),Uc([Ge()],t.prototype,"right",void 0),Uc([Ge()],t.prototype,"bottom",void 0),Uc([Ge()],t.prototype,"isEmpty",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge(!0)],t.prototype,"enableTileRendering",void 0),Uc([Ge(0)],t.prototype,"x",void 0),Uc([Ge(0)],t.prototype,"y",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge(100)],t.prototype,"delayPageRequestTimeOnScroll",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge("")],t.prototype,"name",void 0),Uc([Ge(!1)],t.prototype,"isChecked",void 0),Uc([Ge(!1)],t.prototype,"isSelected",void 0),Uc([Ge("")],t.prototype,"id",void 0),Uc([Ge("")],t.prototype,"value",void 0),Uc([Ge("")],t.prototype,"type",void 0),Uc([Ge(!1)],t.prototype,"isReadOnly",void 0),Uc([Ge([""])],t.prototype,"signatureType",void 0),Uc([Ge("")],t.prototype,"fontName",void 0),Uc([Ge({x:0,y:0,width:0,height:0})],t.prototype,"bounds",void 0),Uc([Ge("Helvetica")],t.prototype,"fontFamily",void 0),Uc([Ge(10)],t.prototype,"fontSize",void 0),Uc([Ge("None")],t.prototype,"fontStyle",void 0),Uc([Ge("black")],t.prototype,"color",void 0),Uc([Ge("white")],t.prototype,"backgroundColor",void 0),Uc([Ge("Left")],t.prototype,"alignment",void 0),Uc([Ge("visible")],t.prototype,"visibility",void 0),Uc([Ge(0)],t.prototype,"maxLength",void 0),Uc([Ge(!1)],t.prototype,"isRequired",void 0),Uc([Ge(!1)],t.prototype,"isPrint",void 0),Uc([Ge("")],t.prototype,"tooltip",void 0),Uc([Ge("")],t.prototype,"options",void 0),Uc([Ge()],t.prototype,"signatureIndicatorSettings",void 0),Uc([Ge(1)],t.prototype,"thickness",void 0),Uc([Ge("#303030")],t.prototype,"borderColor",void 0),Uc([Ge(!1)],t.prototype,"isMultiline",void 0),Uc([Ge(!1)],t.prototype,"insertSpaces",void 0),Uc([Ge(-1)],t.prototype,"pageIndex",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge("RightClick")],t.prototype,"contextMenuAction",void 0),Uc([Ge([])],t.prototype,"contextMenuItems",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge({x:0,y:0,width:0,height:0})],t.prototype,"bounds",void 0),Uc([Ge("")],t.prototype,"name",void 0),Uc([Ge("")],t.prototype,"value",void 0),Uc([Ge("Helvetica")],t.prototype,"fontFamily",void 0),Uc([Ge(10)],t.prototype,"fontSize",void 0),Uc([Ge(0)],t.prototype,"pageNumber",void 0),Uc([Ge("None")],t.prototype,"fontStyle",void 0),Uc([Ge("black")],t.prototype,"color",void 0),Uc([Ge("white")],t.prototype,"backgroundColor",void 0),Uc([Ge("Left")],t.prototype,"alignment",void 0),Uc([Ge(!1)],t.prototype,"isReadOnly",void 0),Uc([Ge("visible")],t.prototype,"visibility",void 0),Uc([Ge(0)],t.prototype,"maxLength",void 0),Uc([Ge(!1)],t.prototype,"isRequired",void 0),Uc([Ge(!1)],t.prototype,"isPrint",void 0),Uc([Ge("")],t.prototype,"tooltip",void 0),Uc([Ge(1)],t.prototype,"thickness",void 0),Uc([Ge("#303030")],t.prototype,"borderColor",void 0),Uc([Ge(!1)],t.prototype,"isMultiline",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge({x:0,y:0,width:0,height:0})],t.prototype,"bounds",void 0),Uc([Ge("")],t.prototype,"name",void 0),Uc([Ge("")],t.prototype,"value",void 0),Uc([Ge(0)],t.prototype,"pageNumber",void 0),Uc([Ge("Helvetica")],t.prototype,"fontFamily",void 0),Uc([Ge(10)],t.prototype,"fontSize",void 0),Uc([Ge("None")],t.prototype,"fontStyle",void 0),Uc([Ge("black")],t.prototype,"color",void 0),Uc([Ge("white")],t.prototype,"backgroundColor",void 0),Uc([Ge("Left")],t.prototype,"alignment",void 0),Uc([Ge(!1)],t.prototype,"isReadOnly",void 0),Uc([Ge("visible")],t.prototype,"visibility",void 0),Uc([Ge(0)],t.prototype,"maxLength",void 0),Uc([Ge(!1)],t.prototype,"isRequired",void 0),Uc([Ge(!1)],t.prototype,"isPrint",void 0),Uc([Ge("")],t.prototype,"tooltip",void 0),Uc([Ge(1)],t.prototype,"thickness",void 0),Uc([Ge("#303030")],t.prototype,"borderColor",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge({x:0,y:0,width:0,height:0})],t.prototype,"bounds",void 0),Uc([Ge("")],t.prototype,"name",void 0),Uc([Ge(!1)],t.prototype,"isChecked",void 0),Uc([Ge("white")],t.prototype,"backgroundColor",void 0),Uc([Ge(!1)],t.prototype,"isReadOnly",void 0),Uc([Ge("visible")],t.prototype,"visibility",void 0),Uc([Ge(!1)],t.prototype,"isPrint",void 0),Uc([Ge(0)],t.prototype,"pageNumber",void 0),Uc([Ge("")],t.prototype,"tooltip",void 0),Uc([Ge(!1)],t.prototype,"isRequired",void 0),Uc([Ge(1)],t.prototype,"thickness",void 0),Uc([Ge("#303030")],t.prototype,"borderColor",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge({x:0,y:0,width:0,height:0})],t.prototype,"bounds",void 0),Uc([Ge("")],t.prototype,"name",void 0),Uc([Ge(!1)],t.prototype,"isSelected",void 0),Uc([Ge("white")],t.prototype,"backgroundColor",void 0),Uc([Ge(!1)],t.prototype,"isReadOnly",void 0),Uc([Ge(!1)],t.prototype,"isRequired",void 0),Uc([Ge(0)],t.prototype,"pageNumber",void 0),Uc([Ge("visible")],t.prototype,"visibility",void 0),Uc([Ge(!1)],t.prototype,"isPrint",void 0),Uc([Ge("")],t.prototype,"tooltip",void 0),Uc([Ge(1)],t.prototype,"thickness",void 0),Uc([Ge("#303030")],t.prototype,"borderColor",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge({x:0,y:0,width:0,height:0})],t.prototype,"bounds",void 0),Uc([Ge("")],t.prototype,"name",void 0),Uc([Ge("")],t.prototype,"value",void 0),Uc([Ge("Helvetica")],t.prototype,"fontFamily",void 0),Uc([Ge(10)],t.prototype,"fontSize",void 0),Uc([Ge(0)],t.prototype,"pageNumber",void 0),Uc([Ge("None")],t.prototype,"fontStyle",void 0),Uc([Ge("black")],t.prototype,"color",void 0),Uc([Ge("white")],t.prototype,"backgroundColor",void 0),Uc([Ge("Left")],t.prototype,"alignment",void 0),Uc([Ge(!1)],t.prototype,"isReadOnly",void 0),Uc([Ge("visible")],t.prototype,"visibility",void 0),Uc([Ge(!1)],t.prototype,"isRequired",void 0),Uc([Ge(!1)],t.prototype,"isPrint",void 0),Uc([Ge("")],t.prototype,"tooltip",void 0),Uc([Ge("")],t.prototype,"options",void 0),Uc([Ge(1)],t.prototype,"thickness",void 0),Uc([Ge("#303030")],t.prototype,"borderColor",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge({x:0,y:0,width:0,height:0})],t.prototype,"bounds",void 0),Uc([Ge("")],t.prototype,"name",void 0),Uc([Ge("")],t.prototype,"value",void 0),Uc([Ge("Helvetica")],t.prototype,"fontFamily",void 0),Uc([Ge(10)],t.prototype,"fontSize",void 0),Uc([Ge(0)],t.prototype,"pageNumber",void 0),Uc([Ge("None")],t.prototype,"fontStyle",void 0),Uc([Ge("black")],t.prototype,"color",void 0),Uc([Ge("white")],t.prototype,"backgroundColor",void 0),Uc([Ge("Left")],t.prototype,"alignment",void 0),Uc([Ge(!1)],t.prototype,"isReadOnly",void 0),Uc([Ge("visible")],t.prototype,"visibility",void 0),Uc([Ge(!1)],t.prototype,"isRequired",void 0),Uc([Ge(!1)],t.prototype,"isPrint",void 0),Uc([Ge("")],t.prototype,"tooltip",void 0),Uc([Ge([])],t.prototype,"options",void 0),Uc([Ge(1)],t.prototype,"thickness",void 0),Uc([Ge("#303030")],t.prototype,"borderColor",void 0)}(mt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wc(t,e),Uc([Ge("")],t.prototype,"itemName",void 0),Uc([Ge("")],t.prototype,"itemValue",void 0)}(mt),function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.signatureCollection=[],n.fileName=null,n.zIndex=-1,n.nameTable={},n.clipboardData={},n.zIndexTable=[],n.isTextSelectionStarted=!1,n.touchPadding=10,n.paddingDifferenceValue=10,n.defaultLocale={PdfViewer:"PDF Viewer",Cancel:"Cancel","Download file":"Download file",Download:"Download","Enter Password":"This document is password protected. Please enter a password.","File Corrupted":"File Corrupted","File Corrupted Content":"The file is corrupted and cannot be opened.","Fit Page":"Fit Page","Fit Width":"Fit Width",Automatic:"Automatic","Go To First Page":"Show first page","Invalid Password":"Incorrect Password. Please try again.","Next Page":"Show next page",OK:"OK",Open:"Open file","Page Number":"Current page number","Previous Page":"Show previous page","Go To Last Page":"Show last page",Zoom:"Zoom","Zoom In":"Zoom in","Zoom Out":"Zoom out","Page Thumbnails":"Page thumbnails",Bookmarks:"Bookmarks",Print:"Print file","Password Protected":"Password Required",Copy:"Copy","Text Selection":"Text selection tool",Panning:"Pan mode","Text Search":"Find text","Find in document":"Find in document","Match case":"Match case",Apply:"Apply",GoToPage:"Go to Page","No matches":"Viewer has finished searching the document. No more matches were found","No Text Found":"No Text Found",Undo:"Undo",Redo:"Redo",Annotation:"Add or Edit annotations",FormDesigner:"Add and Edit Form Fields",Highlight:"Highlight Text",Underline:"Underline Text",Strikethrough:"Strikethrough Text",Delete:"Delete annotation",Opacity:"Opacity","Color edit":"Change Color","Opacity edit":"Change Opacity","Highlight context":"Highlight","Underline context":"Underline","Strikethrough context":"Strikethrough","Server error":"Web-service is not listening. PDF Viewer depends on web-service for all it's features. Please start the web service to continue.","Client error":"Client-side error is found. Please check the custom headers provided in the AjaxRequestSettings property and web action methods in the ServerActionSettings property.","Open text":"Open","First text":"First Page","Previous text":"Previous Page","Next text":"Next Page","Last text":"Last Page","Zoom in text":"Zoom In","Zoom out text":"Zoom Out","Selection text":"Selection","Pan text":"Pan","Print text":"Print","Search text":"Search","Annotation Edit text":"Edit Annotation","FormDesigner Edit text":"Add and Edit Form Fields","Line Thickness":"Line Thickness","Line Properties":"Line Properties","Start Arrow":"Start Arrow","End Arrow":"End Arrow","Line Style":"Line Style","Fill Color":"Fill Color","Line Color":"Line Color",None:"None","Open Arrow":"Open","Closed Arrow":"Closed","Round Arrow":"Round","Square Arrow":"Square","Diamond Arrow":"Diamond",Butt:"Butt",Cut:"Cut",Paste:"Paste","Delete Context":"Delete",Properties:"Properties","Add Stamp":"Add Stamp","Add Shapes":"Add Shapes","Stroke edit":"Change Stroke Color","Change thickness":"Change Border Thickness","Add line":"Add Line","Add arrow":"Add Arrow","Add rectangle":"Add Rectangle","Add circle":"Add Circle","Add polygon":"Add Polygon","Add Comments":"Add Comments",Comments:"Comments",SubmitForm:"Submit Form","No Comments Yet":"No Comments Yet",Accepted:"Accepted",Completed:"Completed",Cancelled:"Cancelled",Rejected:"Rejected","Leader Length":"Leader Length","Scale Ratio":"Scale Ratio",Calibrate:"Calibrate","Calibrate Distance":"Calibrate Distance","Calibrate Perimeter":"Calibrate Perimeter","Calibrate Area":"Calibrate Area","Calibrate Radius":"Calibrate Radius","Calibrate Volume":"Calibrate Volume",Depth:"Depth",Closed:"Closed",Round:"Round",Square:"Square",Diamond:"Diamond",Edit:"Edit",Comment:"Comment","Comment Panel":"Comment Panel","Set Status":"Set Status",Post:"Post",Page:"Page","Add a comment":"Add a comment","Add a reply":"Add a reply","Import Annotations":"Import annotations from JSON file","Export Annotations":"Export annotation to JSON file","Export XFDF":"Export annotation to XFDF file","Import XFDF":"Import annotations from XFDF file",Add:"Add",Clear:"Clear",Bold:"Bold",Italic:"Italic",Strikethroughs:"Strikethrough",Underlines:"Underline",Superscript:"Superscript",Subscript:"Subscript","Align left":"Align Left","Align right":"Align Right",Center:"Center",Justify:"Justify","Font color":"Font Color","Text Align":"Text Align","Text Properties":"Font Style",SignatureFieldDialogHeaderText:"Add Signature",HandwrittenSignatureDialogHeaderText:"Add Signature",InitialFieldDialogHeaderText:"Add Initial",HandwrittenInitialDialogHeaderText:"Add Initial","Draw Ink":"Draw Ink",Create:"Create","Font family":"Font Family","Font size":"Font Size","Free Text":"Free Text","Import Failed":"Invalid JSON file type or file name; please select a valid JSON file","Import PDF Failed":"Invalid PDF file type or PDF file not found. Please select a valid PDF file","File not found":"Imported JSON file is not found in the desired location","Export Failed":"Export annotations action has failed; please ensure annotations are added properly",of:"of ",Dynamic:"Dynamic","Standard Business":"Standard Business","Sign Here":"Sign Here","Custom Stamp":"Custom Stamp","Enter Signature as Name":"Enter your name","Draw-hand Signature":"DRAW","Type Signature":"TYPE","Upload Signature":"UPLOAD","Browse Signature Image":"BROWSE","Save Signature":"Save Signature","Save Initial":"Save Initial",Textbox:"Textbox",Password:"Password","Check Box":"Checkbox","Radio Button":"Radio Button",Dropdown:"Drop Down","List Box":"List Box",Signature:"Signature","Delete FormField":"Delete Form Field","Textbox Properties":"Textbox Properties",Name:"Name",Tooltip:"Tooltip",Value:"Value","Form Field Visibility":"Form Field Visibility","Read Only":"Read Only",Required:"Required",Checked:"Checked","Show Printing":"Show Printing",Formatting:"Format",Fill:"Fill",Border:"Border","Border Color":"Border Color",Thickness:"Thickness","Max Length":"Max Length","List Item":"Item Name","Export Value":"Item Value","Dropdown Item List":"Dropdown Item List","List Box Item List":"List Box Item List",General:"GENERAL",Appearance:"APPEARANCE",Options:"OPTIONS","Delete Item":"Delete",Up:"Up",Down:"Down",Multiline:"Multiline",Revised:"Revised",Reviewed:"Reviewed",Received:"Received",Confidential:"Confidential",Approved:"Approved","Not Approved":"Not Approved",Witness:"Witness","Initial Here":"Initial Here",Draft:"Draft",Final:"Final","For Public Release":"For Public Release","Not For Public Release":"Not For Public Release","For Comment":"For Comment",Void:"Void","Preliminary Results":"Preliminary Results","Information Only":"Information Only",in:"in",m:"m",ft_in:"ft_in",ft:"ft",p:"p",cm:"cm",mm:"mm",pt:"pt",cu:"cu",sq:"sq",Initial:"Initial"},n.viewerBase=new Fc(n),n.drawing=new Hc(n),n}return Wc(t,e),Object.defineProperty(t.prototype,"zoomPercentage",{get:function(){return 100*this.magnificationModule.zoomFactor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bookmark",{get:function(){return this.bookmarkViewModule},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"print",{get:function(){return this.printModule},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"magnification",{get:function(){return this.magnificationModule},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"navigation",{get:function(){return this.navigationModule},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textSearch",{get:function(){return this.textSearchModule},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"toolbar",{get:function(){return this.toolbarModule},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"thumbnailView",{get:function(){return this.thumbnailViewModule},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"annotation",{get:function(){return this.annotationModule},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formDesigner",{get:function(){return this.formDesignerModule},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textSelection",{get:function(){return this.textSelectionModule},enumerable:!0,configurable:!0}),t.prototype.preRender=function(){this.localeObj=new qt(this.getModuleName(),this.defaultLocale,this.locale),m(this.element)||""!=this.element.id||(this.element.id=this.getUniqueElementId()),ge.isDevice&&(this.touchPadding=16)},t.prototype.getUniqueElementId=function(){return"pdfViewer_"+Date.now().toString(36)+Math.random().toString(36).substring(2)},t.prototype.render=function(){this.viewerBase.initializeComponent(),this.enableFormFields||(this.formFieldsModule=new Lc(this,this.viewerBase),this.formFieldsModule.formFieldsReadOnly(this.enableFormFields)),this.enableTextSelection&&this.textSelectionModule?this.textSelectionModule.enableTextSelectionMode():this.viewerBase.disableTextSelectionMode(),this.drawing.renderLabels(this),this.renderComplete()},t.prototype.getModuleName=function(){return"PdfViewer"},t.prototype.getLocaleConstants=function(){return this.defaultLocale},t.prototype.setJsonData=function(e){this.viewerBase.ajaxData=e},t.prototype.onPropertyChanged=function(t,i){if(!this.isDestroyed)for(var n=0,o=Object.keys(t);n<o.length;n++){var s=o[n];switch(s){case"locale":if(this.viewerBase.loadedData){var a=null;if(this.formFieldsModule&&(a=this.viewerBase.getItemFromSessionStorage("_formfields")),a){this.viewerBase.formfieldvalue=JSON.parse(a);var r=this.annotationCollection,l=this.viewerBase.jsonDocumentId;e.prototype.refresh.call(this),this.load(this.viewerBase.loadedData,null),this.addAnnotation(r),this.viewerBase.loadedData=null,this.downloadFileName=l,this.fileName=l}}break;case"toolbarSettings":!ge.isDevice||this.enableDesktopMode?(this.toolbar.applyToolbarSettings(),this.toolbar.annotationToolbarModule.applyAnnotationToolbarSettings(),this.toolbar.formDesignerToolbarModule.applyFormDesignerToolbarSettings()):(this.toolbar.applyToolbarSettingsForMobile(),this.toolbar.annotationToolbarModule.applyMobileAnnotationToolbarSettings());break;case"enableToolbar":this.notify("",{module:"toolbar",enable:this.enableToolbar}),!0;break;case"enableCommentPanel":this.notify("",{module:"annotation",enable:this.enableCommentPanel}),!0,this.toolbarModule&&this.toolbarModule.annotationToolbarModule&&this.toolbarModule.annotationToolbarModule.enableCommentPanelTool(this.enableCommentPanel),this.enableCommentPanel||this.viewerBase.navigationPane&&this.viewerBase.navigationPane.closeCommentPanelContainer();break;case"documentPath":S()?this._dotnetInstance.invokeMethodAsync("LoadDocumentFromClient",t.documentPath):this.load(t.documentPath,null);break;case"interactionMode":this.interactionMode=t.interactionMode,"Pan"===t.interactionMode?(this.viewerBase.initiatePanning(),this.toolbar&&this.toolbar.updateInteractionTools(!1)):"TextSelection"===t.interactionMode&&(this.viewerBase.initiateTextSelectMode(),this.toolbar&&this.toolbar.updateInteractionTools(!0));break;case"height":this.height=t.height,this.viewerBase.updateHeight(),this.viewerBase.onWindowResize(),this.toolbar&&this.toolbar.annotationToolbarModule&&(this.toolbar.annotationToolbarModule.isToolbarHidden?this.toolbar.annotationToolbarModule.adjustViewer(!1):this.toolbar.annotationToolbarModule.adjustViewer(!0));break;case"width":this.width=t.width,this.viewerBase.updateWidth(),this.viewerBase.onWindowResize();break;case"customStamp":this.renderCustomerStamp(this.customStamp[0]);break;case"customStampSettings":t.customStampSettings.customStamps&&this.renderCustomerStamp(this.customStampSettings.customStamps[0]);break;case"enableFormFields":if(this.enableFormFields&&this.formFieldsModule)for(var d=0;d<this.pageCount;d++)this.formFieldsModule.renderFormFields(d,!1);else this.formFieldsModule=new Lc(this,this.viewerBase),this.formFieldsModule.formFieldsReadOnly(this.enableFormFields);break;case"designerMode":this.designerMode?this.formDesignerModule.setMode("designer"):this.formDesignerModule.setMode("edit");break;case"highlightSettings":case"underlineSettings":case"strikethroughSettings":this.annotationModule&&this.annotationModule.textMarkupAnnotationModule&&this.annotationModule.textMarkupAnnotationModule.updateTextMarkupSettings(s);break;case"signatureFieldSettings":case"initialFieldSettings":if(this.formDesignerModule){var h="initialFieldSettings"===s;this.formDesignerModule.updateSignatureSettings(t[s],h)}break;case"textFieldSettings":this.formDesignerModule&&this.formDesignerModule.updateTextFieldSettings(t[s]);break;case"passwordFieldSettings":this.formDesignerModule&&this.formDesignerModule.updatePasswordFieldSettings(t[s]);break;case"checkBoxFieldSettings":this.formDesignerModule&&this.formDesignerModule.updateCheckBoxFieldSettings(t[s]);break;case"radioButtonFieldSettings":this.formDesignerModule&&this.formDesignerModule.updateRadioButtonFieldSettings(t[s]);break;case"DropdownFieldSettings":this.formDesignerModule&&this.formDesignerModule.updateDropDownFieldSettings(t[s]);break;case"listBoxFieldSettings":this.formDesignerModule&&this.formDesignerModule.updateListBoxFieldSettings(t[s]);break;case"isFormDesignerToolbarVisible":this.formDesignerModule&&!i.isFormDesignerToolbarVisible&&t.isFormDesignerToolbarVisible&&(this.isAnnotationToolbarVisible&&(this.isAnnotationToolbarVisible=!1,this.toolbarModule.annotationToolbarModule.showAnnotationToolbar()),this.toolbarModule.formDesignerToolbarModule.resetFormDesignerToolbar())}}},t.prototype.renderCustomerStamp=function(e){this.annotation.stampAnnotationModule.isStampAddMode=!0,this.annotationModule.stampAnnotationModule.isStampAnnotSelected=!0,this.viewerBase.stampAdded=!0,this.viewerBase.isAlreadyAdded=!1,this.annotation.stampAnnotationModule.createCustomStampAnnotation(e.customStampImageSource,e.customStampName)},t.prototype.getPersistData=function(){return"PdfViewer"},t.prototype.requiredModules=function(){var e=[];return this.enableMagnification&&e.push({member:"Magnification",args:[this,this.viewerBase]}),this.enableNavigation&&e.push({member:"Navigation",args:[this,this.viewerBase]}),(this.enableToolbar||this.enableNavigationToolbar||this.enableAnnotationToolbar||this.enableFormDesignerToolbar)&&e.push({member:"Toolbar",args:[this,this.viewerBase]}),this.enableHyperlink&&e.push({member:"LinkAnnotation",args:[this,this.viewerBase]}),this.enableThumbnail&&e.push({member:"ThumbnailView",args:[this,this.viewerBase]}),this.enableBookmark&&e.push({member:"BookmarkView",args:[this,this.viewerBase]}),this.enableTextSelection&&e.push({member:"TextSelection",args:[this,this.viewerBase]}),this.enableTextSearch&&e.push({member:"TextSearch",args:[this,this.viewerBase]}),this.enablePrint&&e.push({member:"Print",args:[this,this.viewerBase]}),this.enableAnnotation&&e.push({member:"Annotation",args:[this,this.viewerBase]}),this.enableFormFields&&e.push({member:"FormFields",args:[this,this.viewerBase]}),this.enableFormDesigner&&!S()&&e.push({member:"FormDesigner",args:[this,this.viewerBase]}),e},t.prototype.load=function(e,t){0!==this.pageCount?this.viewerBase.clear(!0):this.viewerBase.clear(!1),this.pageCount=0,this.currentPageNumber=0,S()?this.viewerBase.blazorUIAdaptor.resetToolbar():this.toolbarModule&&this.toolbarModule.resetToolbar(),this.viewerBase.initiatePageRender(e,t)},t.prototype.loadDocument=function(e,t,i){0!==this.pageCount?this.viewerBase.clear(!0):this.viewerBase.clear(!1),this.pageCount=0,this.currentPageNumber=0,this.viewerBase.blazorUIAdaptor.resetToolbar(),this.fileName=i,this.viewerBase.initiateLoadDocument(e,t,i)},t.prototype.loadSuccess=function(e,t){this.viewerBase.loadSuccess(e,t)},t.prototype.focusElement=function(e){var t=document.getElementById(e);null!=t&&t.focus()},t.prototype.download=function(){this.enableDownload&&this.viewerBase.download()},t.prototype.saveAsBlob=function(){var e=this;return this.enableDownload?new Promise((function(t,i){t(e.viewerBase.saveAsBlob())})):null},t.prototype.updateViewerContainer=function(){this.viewerBase.updateViewerContainer()},t.prototype.showNotificationPopup=function(e){this.viewerBase.showNotificationPopup(e)},t.prototype.focusFormField=function(e){var t=this;if("string"===typeof e)for(var i=this.retrieveFormFields(),n=0;n<i.length;n++)i[n].name===e&&(e=i[n]);if(e){if(this.viewerBase.isFocusField=!0,this.viewerBase.focusField=e,this.formDesignerModule)this.navigationModule.goToPage(e.pageIndex+1);else{var o=parseFloat(e.id.split("_")[1]);this.navigationModule.goToPage(o+1)}setTimeout((function(){var i=document.getElementById(e.id);t.formDesignerModule&&"Checkbox"===e.type&&(i=document.getElementById(e.id+"_input")),i&&(!t.formDesignerModule||"SignatureField"!==e.type&&"InitialField"!==e.type?(i.focus(),t.viewerBase.isFocusField=!1,t.viewerBase.focusField=[]):i.parentElement.focus())}),100)}},t.prototype.updateFormFieldsValue=function(e){var t=document.getElementById(e.id),i=!1;if(t){if((t=t||document.getElementById(e.id+"_content_html_element").children[0].children[0])&&"Textbox"===e.type||"Password"===e.type||"PasswordField"===e.type)t.value=e.value;else if("Checkbox"===e.type||"RadioButton"===e.type||"CheckBox"===e.type)if("CheckBox"===e.type&&(t.style.appearance="auto"),this.formDesignerModule)if("RadioButton"===e.type){var n={isSelected:e.isSelected};this.formDesignerModule.updateFormField(e,n)}else{var o={isChecked:e.isChecked};this.formDesignerModule.updateFormField(e,o)}else"RadioButton"===e.type?t.selected=e.isSelected:t.checked=e.isChecked;else if("DropDown"===e.type||"ListBox"===e.type||"DropdownList"===e.type)if(this.formDesignerModule){i=!0;var s={options:e.value};this.formDesignerModule.updateFormField(e,s)}else t.value=e.value;if("SignatureField"===e.type||"InitialField"===e.type){(e.signatureType||e.initialType)&&("string"===typeof e.signatureType?e.signatureType=e.signatureType:e.signatureType=e.initialType),e.fontName=e.fontName?e.fontName:e.fontFamily;var a=e.value,r=this.getFormFieldByID(e.id),l=this.formDesignerModule?r.value===e.value:r.Value===e.value;t.classList.contains("e-pdfviewer-signatureformfields-signature")&&!l&&(this.formDesignerModule?this.annotation.deleteAnnotationById(e.id.split("_")[0]+"_content"):this.annotation.deleteAnnotationById(e.id)),e.signatureType&&e.value||(e.value=a,e.value&&(e.signatureType=e.value.indexOf("base64")>-1?"Image":e.value.startsWith("M")&&e.value.split(",")[1].split(" ")[1].startsWith("L")?"Path":"Type")),l||this.formFieldsModule.drawSignature(e.signatureType,e.value,t,e.fontName)}else i||this.formFieldsModule.updateDataInSession(t)}else{var d=this.viewerBase.getItemFromSessionStorage("_formfields");if(d)for(var h=JSON.parse(d),p=0;p<h.length;p++){var c=h[p];if(("Checkbox"===e.type||"RadioButton"===e.type||"CheckBox"===e.type?c.GroupName:"DropDown"===e.type||"ListBox"===e.type||"DropdownList"===e.type?c.Text:c.FieldName)===e.name){if("Textbox"===e.type||"Password"===e.type||"PasswordField"===e.type)e.value&&(c.Text=e.value,c.Value=e.value);else if("Checkbox"===e.type||"RadioButton"===e.type||"CheckBox"===e.type)e.isSelected||e.isChecked?c.Selected=!0:c.Selected=!1;else if("DropDown"===e.type||"ListBox"===e.type||"DropdownList"===e.type){c.SelectedValue=e.value;var u=c.TextList?c.TextList.indexOf(e.value):0;c.selectedIndex=u>-1?u:0,"ListBox"!==e.type||(c.SelectedListed=[c.selectedIndex])}else"SignatureField"!==e.type&&"InitialField"!==e.type||e.value&&(c.Value=e.value,c=this.updateSignatureValue(c,e));this.formFieldsModule.updateFormFieldsCollection(c)}}window.sessionStorage.removeItem(this.viewerBase.documentId+"_formfields"),this.viewerBase.setItemInSessionStorage(h,"_formfields")}},t.prototype.getFormFieldByID=function(e){if(this.formDesignerModule)return this.nameTable[e.split("_")[0]];var t=window.sessionStorage.getItem(this.viewerBase.documentId+"_formfields"),i=JSON.parse(t);return i[i.findIndex((function(t){return t.uniqueID===e}))]},t.prototype.ConvertPointToPixel=function(e){return e*(96/72)},t.prototype.updateSignatureValue=function(e,t){t.signatureType||(t.signatureType=t.value.indexOf("base64")>-1?"Image":t.value.startsWith("M")&&t.split(",")[1].split(" ")[1].startsWith("L")?"Path":"Type");var i,n=e.LineBounds,o=this.ConvertPointToPixel(n.X),s=this.ConvertPointToPixel(n.Y),a=this.ConvertPointToPixel(n.Width),r=this.ConvertPointToPixel(n.Height);if("Type"===t.signatureType){e.FontFamily||(e.FontFamily="Helvetica"),i=this.formFieldsModule.getSignBounds(e.pageIndex,e.RotationAngle,e.pageIndex,this.viewerBase.getZoomFactor(),o,s,a,r),"Default"===this.signatureFitMode&&(i=this.formFieldsModule.getDefaultBoundsforSign(i)),e.Bounds=i;var l=i.height/1.35,d=this.formFieldsModule.getTextWidth(e.value,l,e.FontFamily),h=1;d>i.width&&(h=i.width/d),e.FontSize=this.formFieldsModule.getFontSize(Math.floor(l*h))}else if("Image"===t.signatureType){i=this.formFieldsModule.getSignBounds(e.pageIndex,e.RotationAngle,e.pageIndex,this.viewerBase.getZoomFactor(),o,s,a,r);var p=new Image;p.src=e.Value;var c=this;p.onload=function(){c.imageOnLoad(i,p,e)}}else{if(-1!==e.Value.indexOf("base64"))i=this.formFieldsModule.getSignBounds(e.pageIndex,e.RotationAngle,e.pageIndex,this.viewerBase.getZoomFactor(),o,s,a,r),"Default"===this.signatureFitMode&&(i=this.formFieldsModule.getDefaultBoundsforSign(i));else if("Default"===this.signatureFitMode){var u=this.formFieldsModule.updateSignatureAspectRatio(e.Value,!1,null,e);(i=this.formFieldsModule.getSignBounds(e.pageIndex,e.RotationAngle,e.pageIndex,this.viewerBase.getZoomFactor(),o,s,u.width,u.height,!0)).x=i.x+u.left,i.y=i.y+u.top}else i=this.formFieldsModule.getSignBounds(e.pageIndex,e.RotationAngle,e.pageIndex,this.viewerBase.getZoomFactor(),o,s,a,r);e.Bounds=i}return e},t.prototype.imageOnLoad=function(e,t,i){if("Default"===this.signatureFitMode){var n=Math.min(e.height/this.paddingDifferenceValue,e.width/this.paddingDifferenceValue),o=e.height-n,s=e.width-n,a=t.width,r=t.height,l=e.width,d=e.height,h=Math.min(s/a,o/r);e.width=a*h,e.height=r*h,e.x=e.x+(l-e.width)/2,e.y=e.y+(d-e.height)/2;var p=this.viewerBase.getItemFromSessionStorage("_formfields");if(p){for(var c=JSON.parse(p),u=0;u<c.length;u++)c[u].FieldName==i.FieldName&&(c[u].Bounds=e,this.formFieldsModule.updateFormFieldsCollection(c[u]));window.sessionStorage.removeItem(this.viewerBase.documentId+"_formfields"),this.viewerBase.setItemInSessionStorage(c,"_formfields")}}},t.prototype.undo=function(){this.annotationModule&&this.annotationModule.undo()},t.prototype.redo=function(){this.annotationModule&&this.annotationModule.redo()},t.prototype.unload=function(){this.viewerBase.clear(!0),this.pageCount=0,S()?this.viewerBase.blazorUIAdaptor.resetToolbar():this.toolbarModule&&(this.viewerBase.pageCount=0,this.toolbarModule.resetToolbar()),this.magnificationModule.zoomTo(100)},t.prototype.destroy=function(){e.prototype.destroy.call(this),m(this.element)||(this.refreshing||this.element.classList.remove("e-pdfviewer"),this.element.innerHTML=""),this.viewerBase.navigationPane&&(this.viewerBase.navigationPane.restrictUpdateZoomValue=!1),this.viewerBase.destroy(),this.viewerBase.navigationPane&&(this.viewerBase.navigationPane.restrictUpdateZoomValue=!0)},t.prototype.importAnnotation=function(e,t){if(this.annotationModule)if("string"===typeof e){var i=e.indexOf(".xfdf")>-1||t.indexOf("Xfdf")>-1;t?e.indexOf("</xfdf>")>-1?this.viewerBase.importAnnotations(e,t,!1):this.viewerBase.importAnnotations(e,t,i):"json"===e.split(".")[1]?this.viewerBase.importAnnotations(e,oa.Json):this.viewerBase.importAnnotations(e,oa.Xfdf,i)}else this.viewerBase.importAnnotations(e)},t.prototype.exportAnnotation=function(e){this.annotationModule&&(e&&"Xfdf"===e?this.viewerBase.exportAnnotations(oa.Xfdf):this.viewerBase.exportAnnotations(oa.Json))},t.prototype.exportAnnotationsAsObject=function(){var e=this;return this.annotationModule?new Promise((function(t,i){e.viewerBase.exportAnnotationsAsObject().then((function(e){var i=JSON.parse(e),n=JSON.stringify(i);t(n)}))})):null},t.prototype.exportAnnotationsAsBase64String=function(e){var t=this;return this.annotationModule?new Promise((function(i,n){t.viewerBase.createRequestForExportAnnotations(!1,e,!0).then((function(e){i(e)}))})):null},t.prototype.addAnnotation=function(e){this.viewerBase&&this.viewerBase.addAnnotation(e)},t.prototype.importFormFields=function(e,t){this.formFieldsModule&&(m(t)&&(t=sa.Json),this.viewerBase.importFormFields(e,t))},t.prototype.exportFormFields=function(e,t){this.formFieldsModule&&this.viewerBase.exportFormFields(e,t)},t.prototype.exportFormFieldsAsObject=function(e){var t=this;return this.formFieldsModule?new Promise((function(i,n){t.viewerBase.exportFormFieldsAsObject(e).then((function(e){i(e)}))})):null},t.prototype.resetFormFields=function(){this.formFieldsModule.resetFormFields()},t.prototype.clearFormFields=function(e){this.formFieldsModule.clearFormFields(e)},t.prototype.deleteAnnotations=function(){this.annotationModule&&this.viewerBase.deleteAnnotations()},t.prototype.retrieveFormFields=function(){return this.formFieldCollections},t.prototype.updateFormFields=function(e){this.updateFormFieldsValue(e),this.formFieldsModule.updateFormFieldValues(e)},t.prototype.fireAjaxRequestInitiate=function(e){var t={name:"ajaxRequestInitiate",JsonData:e};this.trigger("ajaxRequestInitiate",t)},t.prototype.fireButtonFieldClickEvent=function(e,t,i){var n={name:"buttonFieldClicked",buttonFieldValue:e,buttonFieldName:t,id:i};this.trigger("buttonFieldClick",n)},t.prototype.fireFormFieldClickEvent=function(e,t,i,n){return qc(this,void 0,void 0,(function(){var o,s,a,r;return Yc(this,(function(l){switch(l.label){case 0:return o={name:e,field:t,cancel:i},S()?[4,this.triggerEvent("formFieldClick",o)]:[3,2];case 1:return(o=l.sent()||o).field.type=t.type,[3,3];case 2:this.triggerEvent("formFieldClick",o),l.label=3;case 3:return"SignatureField"!==t.type&&"InitialField"!==t.type||("InitialField"===t.type?this.viewerBase.isInitialField=!0:this.viewerBase.isInitialField=!1,"hidden"===(s=document.getElementById(t.id)).style.visibility&&(s.disabled=!0),s=s||(document.getElementById(t.id+"_content_html_element")?document.getElementById(t.id+"_content_html_element").children[0].children[0]:null),(a=this.formFieldCollections.filter((function(e){return e.id===t.id})))&&((r=a[0].isReadOnly)||o.cancel||!s||s.disabled||!s.classList.contains("e-pdfviewer-signatureformfields")||!n&&!m(n)?r&&(s.disabled=!0):this.viewerBase.signatureModule.showSignatureDialog(!0))),[2]}}))}))},t.prototype.fireFormFieldAddEvent=function(e,t,i){var n={name:e,field:t,pageIndex:i};this.viewerBase.isFormFieldSelect=!1,this.trigger("formFieldAdd",n)},t.prototype.fireFormFieldRemoveEvent=function(e,t,i){var n={name:e,field:t,pageIndex:i};this.trigger("formFieldRemove",n)},t.prototype.fireFormFieldDoubleClickEvent=function(e){return this.trigger("formFieldDoubleClick",e),e},t.prototype.fireFormFieldPropertiesChangeEvent=function(e,t,i,n,o,s,a,r,l,d,h,p,c,u,f,g,y,v,w,b,S){var C={name:e,field:t,pageIndex:i,isValueChanged:n,isFontFamilyChanged:o,isFontSizeChanged:s,isFontStyleChanged:a,isColorChanged:r,isBackgroundColorChanged:l,isBorderColorChanged:d,isBorderWidthChanged:h,isAlignmentChanged:p,isReadOnlyChanged:c,isVisibilityChanged:u,isMaxLengthChanged:f,isRequiredChanged:g,isPrintChanged:y,isToolTipChanged:v,oldValue:w,newValue:b,isNameChanged:!m(S)&&S};this.trigger("formFieldPropertiesChange",C)},t.prototype.fireFormFieldMouseLeaveEvent=function(e,t,i){var n={name:e,field:t,pageIndex:i};this.trigger("formFieldMouseLeave",n)},t.prototype.fireFormFieldMouseoverEvent=function(e,t,i,n,o,s,a){var r={name:e,field:t,pageIndex:i,pageX:n,pageY:o,X:s,Y:a};this.trigger("formFieldMouseover",r)},t.prototype.fireFormFieldMoveEvent=function(e,t,i,n,o){var s={name:e,field:t,pageIndex:i,previousPosition:n,currentPosition:o};this.trigger("formFieldMove",s)},t.prototype.fireFormFieldResizeEvent=function(e,t,i,n,o){var s={name:e,field:t,pageIndex:i,previousPosition:n,currentPosition:o};this.trigger("formFieldResize",s)},t.prototype.fireFormFieldSelectEvent=function(e,t,i,n){var o={name:e,field:t,pageIndex:i,isProgrammaticSelection:n};this.trigger("formFieldSelect",o)},t.prototype.fireFormFieldUnselectEvent=function(e,t,i){var n={name:e,field:t,pageIndex:i};this.trigger("formFieldUnselect",n)},t.prototype.fireDocumentLoad=function(e){var t={name:"documentLoad",documentName:this.fileName,pageData:e};this.trigger("documentLoad",t),S()&&(this._dotnetInstance.invokeMethodAsync("LoadDocument",null),this.viewerBase.blazorUIAdaptor.loadDocument())},t.prototype.fireDocumentUnload=function(e){var t={name:"documentUnload",documentName:e};this.trigger("documentUnload",t)},t.prototype.fireDocumentLoadFailed=function(e,t){var i={name:"documentLoadFailed",documentName:this.fileName,isPasswordRequired:e,password:t};this.trigger("documentLoadFailed",i)},t.prototype.fireAjaxRequestFailed=function(e,t,i,n){var o={name:"ajaxRequestFailed",documentName:this.fileName,errorStatusCode:e,errorMessage:t,action:i};n&&(o.retryCount=!0),this.trigger("ajaxRequestFailed",o)},t.prototype.fireAjaxRequestSuccess=function(e,t){var i={name:"ajaxRequestSuccess",documentName:this.fileName,action:e,data:t,cancel:!1};return this.trigger("ajaxRequestSuccess",i),!!i.cancel},t.prototype.fireValidatedFailed=function(e){if(S()){(t={}).documentName=this.fileName,t.formFields=this.formFieldCollections,t.nonFillableFields=this.viewerBase.nonFillableFields,this.trigger("validateFormFields",t)}else{var t={formField:this.formFieldCollections,documentName:this.fileName,nonFillableFields:this.viewerBase.nonFillableFields};this.trigger("validateFormFields",t)}},t.prototype.firePageClick=function(e,t,i){var n={name:"pageClick",documentName:this.fileName,x:e,y:t,pageNumber:i};this.trigger("pageClick",n)},t.prototype.firePageChange=function(e){var t={name:"pageChange",documentName:this.fileName,currentPageNumber:this.currentPageNumber,previousPageNumber:e};this.trigger("pageChange",t),S()&&this.viewerBase.blazorUIAdaptor.pageChanged(this.currentPageNumber)},t.prototype.fireZoomChange=function(){var e={name:"zoomChange",zoomValue:100*this.magnificationModule.zoomFactor,previousZoomValue:100*this.magnificationModule.previousZoomFactor};this.trigger("zoomChange",e)},t.prototype.fireHyperlinkClick=function(e,t){return qc(this,void 0,void 0,(function(){var i;return Yc(this,(function(n){switch(n.label){case 0:return i={name:"hyperlinkClick",hyperlink:e,hyperlinkElement:t,cancel:!1},S()?[4,this.triggerEvent("hyperlinkClick",i)]:[3,2];case 1:return i=n.sent()||i,[3,3];case 2:this.triggerEvent("hyperlinkClick",i),n.label=3;case 3:return i.hyperlinkElement.href!=i.hyperlink&&(t.href=i.hyperlink),i.cancel?[2,!1]:[2,!0]}}))}))},t.prototype.fireHyperlinkHover=function(e){var t={name:"hyperlinkMouseOver",hyperlinkElement:e};this.trigger("hyperlinkMouseOver",t)},t.prototype.fireFocusOutFormField=function(e,t){var i={name:"formFieldFocusOut",fieldName:e,value:t};this.trigger("formFieldFocusOut",i)},t.prototype.fireAnnotationAdd=function(e,t,i,n,o,s,a,r,l,d,h){var p={name:"annotationAdd",pageIndex:e,annotationId:t,annotationType:i,annotationBound:n,annotationSettings:o};s&&(S()?(p.annotationSettings.textMarkupContent=s,p.annotationSettings.textMarkupStartIndex=a,p.annotationSettings.textMarkupEndIndex=r):(p.textMarkupContent=s,p.textMarkupStartIndex=a,p.textMarkupEndIndex=r)),l&&(p.labelSettings=l),d&&(p.multiplePageCollection=d),"Image"===i&&(p.customStampName=h),this.viewerBase.isAnnotationSelect=!1,this.trigger("annotationAdd",p),S()&&this.viewerBase.blazorUIAdaptor.annotationAdd()},t.prototype.fireAnnotationRemove=function(e,t,i,n,o,s,a,r){var l={name:"annotationRemove",pageIndex:e,annotationId:t,annotationType:i,annotationBounds:n};o&&(l.textMarkupContent=o,l.textMarkupStartIndex=s,l.textMarkupEndIndex=a),r&&(l.multiplePageCollection=r),this.trigger("annotationRemove",l)},t.prototype.fireBeforeAddFreeTextAnnotation=function(e){var t={name:"beforeAddFreeText",value:e};this.trigger("beforeAddFreeText",t)},t.prototype.fireCommentAdd=function(e,t,i){var n={name:"CommentAdd",id:e,text:t,annotation:i};this.trigger("commentAdd",n)},t.prototype.fireCommentEdit=function(e,t,i){var n={name:"CommentEdit",id:e,text:t,annotation:i};this.trigger("commentEdit",n)},t.prototype.fireCommentDelete=function(e,t,i){var n={name:"CommentDelete",id:e,text:t,annotation:i};this.trigger("commentDelete",n)},t.prototype.fireCommentSelect=function(e,t,i){var n={name:"CommentSelect",id:e,text:t,annotation:i};this.trigger("commentSelect",n)},t.prototype.fireCommentStatusChanged=function(e,t,i,n){var o={name:"CommentStatusChanged",id:e,text:t,annotation:i,status:n};this.trigger("commentStatusChanged",o)},t.prototype.fireAnnotationPropertiesChange=function(e,t,i,n,o,s,a,r,l,d,h){var p={name:"annotationPropertiesChange",pageIndex:e,annotationId:t,annotationType:i,isColorChanged:n,isOpacityChanged:o,isTextChanged:s,isCommentsChanged:a};r&&(p.textMarkupContent=r,p.textMarkupStartIndex=l,p.textMarkupEndIndex=d),h&&(p.multiplePageCollection=h),this.trigger("annotationPropertiesChange",p)},t.prototype.fireSignatureAdd=function(e,t,i,n,o,s,a,r){var l={pageIndex:e,id:t,type:i,bounds:n,opacity:o};a&&(l.thickness=a),s&&(l.strokeColor=s),r&&(l.data=r),this.trigger("addSignature",l)},t.prototype.fireSignatureRemove=function(e,t,i,n){var o={pageIndex:e,id:t,type:i,bounds:n};this.trigger("removeSignature",o)},t.prototype.fireSignatureMove=function(e,t,i,n,o,s,a,r){var l={pageIndex:e,id:t,type:i,opacity:n,strokeColor:o,thickness:s,previousPosition:a,currentPosition:r};this.trigger("moveSignature",l)},t.prototype.fireSignaturePropertiesChange=function(e,t,i,n,o,s,a,r){var l={pageIndex:e,id:t,type:i,isStrokeColorChanged:n,isOpacityChanged:o,isThicknessChanged:s,oldValue:a,newValue:r};this.trigger("signaturePropertiesChange",l)},t.prototype.fireSignatureResize=function(e,t,i,n,o,s,a,r){var l={pageIndex:e,id:t,type:i,opacity:n,strokeColor:o,thickness:s,currentPosition:a,previousPosition:r};this.trigger("resizeSignature",l)},t.prototype.fireSignatureSelect=function(e,t,i){var n={id:e,pageIndex:t,signature:i};this.trigger("signatureSelect",n)},t.prototype.fireAnnotationSelect=function(e,t,i,n,o,s,a){var r={name:"annotationSelect",annotationId:e,pageIndex:t,annotation:i};if(n&&(r={name:"annotationSelect",annotationId:e,pageIndex:t,annotation:i,annotationCollection:n}),o&&(r.multiplePageCollection=o),s&&(r.isProgrammaticSelection=s),a&&(r.annotationAddMode=a),S()){if("FreeText"===i.type){var l={isBold:!1,isItalic:!1,isStrikeout:!1,isUnderline:!1};1===i.fontStyle?l.isBold=!0:2===i.fontStyle?l.isItalic=!0:3===i.fontStyle?l.isStrikeout=!0:4===i.fontStyle&&(l.isUnderline=!0),i.fontStyle=l}this.viewerBase.blazorUIAdaptor.annotationSelect(i.type)}this.trigger("annotationSelect",r)},t.prototype.fireAnnotationUnSelect=function(e,t,i){S()&&this.viewerBase.blazorUIAdaptor.annotationUnSelect();var n={name:"annotationUnSelect",annotationId:e,pageIndex:t,annotation:i};this.trigger("annotationUnSelect",n)},t.prototype.fireAnnotationDoubleClick=function(e,t,i){var n={name:"annotationDblClick",annotationId:e,pageIndex:t,annotation:i};this.trigger("annotationDoubleClick",n)},t.prototype.fireTextSelectionStart=function(e){this.isTextSelectionStarted=!0;var t={pageIndex:e};this.trigger("textSelectionStart",t)},t.prototype.fireTextSelectionEnd=function(e,t,i){if(this.isTextSelectionStarted){var n={pageIndex:e,textContent:t,textBounds:i};this.trigger("textSelectionEnd",n),this.isTextSelectionStarted=!1}},t.prototype.renderDrawing=function(e,t){m(t)&&this.viewerBase.activeElements.activePageID&&!this.viewerBase.isPrint&&(t=this.viewerBase.activeElements.activePageID),this.annotation?this.annotation.renderAnnotations(t,null,null,null,e):this.formDesignerModule&&this.formDesignerModule.updateCanvas(t,e)},t.prototype.fireAnnotationResize=function(e,t,i,n,o,s,a,r,l,d){var h={name:"annotationResize",pageIndex:e,annotationId:t,annotationType:i,annotationBound:n,annotationSettings:o};s&&(h.textMarkupContent=s,h.textMarkupStartIndex=a,h.textMarkupEndIndex=r),l&&(h.labelSettings=l),d&&(h.multiplePageCollection=d),this.trigger("annotationResize",h)},t.prototype.fireAnnotationMoving=function(e,t,i,n,o,s){var a={name:"annotationMoving",pageIndex:e,annotationId:t,annotationType:i,annotationSettings:n,previousPosition:o,currentPosition:s};this.trigger("annotationMoving",a)},t.prototype.fireAnnotationMove=function(e,t,i,n,o,s){var a={name:"annotationMove",pageIndex:e,annotationId:t,annotationType:i,annotationSettings:n,previousPosition:o,currentPosition:s};this.trigger("annotationMove",a)},t.prototype.fireAnnotationMouseover=function(e,t,i,n,o,s,a){var r={name:"annotationMouseover",annotationId:e,pageIndex:t,annotationType:i,annotationBounds:n,annotation:o,pageX:s.left,pageY:s.top,X:a.left,Y:a.top};S()&&("Perimeter calculation"===o.subject?r.annotationType="Perimeter":"Area calculation"===o.subject?r.annotationType="Area":"Volume calculation"===o.subject?r.annotationType="Volume":"Arrow"===o.subject?r.annotationType="Arrow":"Circle"===o.subject&&(r.annotationType="Circle")),this.trigger("annotationMouseover",r)},t.prototype.fireAnnotationMouseLeave=function(e){var t={name:"annotationMouseLeave",pageIndex:e};this.trigger("annotationMouseLeave",t)},t.prototype.firePageMouseover=function(e,t){var i={pageX:e,pageY:t};this.trigger("pageMouseover",i)},t.prototype.fireDownloadStart=function(e){var t={fileName:e};this.trigger("downloadStart",t)},t.prototype.fireDownloadEnd=function(e,t){var i={fileName:e,downloadDocument:t};this.trigger("downloadEnd",i)},t.prototype.firePrintStart=function(){return qc(this,void 0,void 0,(function(){var e;return Yc(this,(function(t){switch(t.label){case 0:return e={fileName:this.downloadFileName,cancel:!1},S?[4,this.triggerEvent("printStart",e)]:[3,2];case 1:return e=t.sent()||e,[3,3];case 2:this.triggerEvent("printStart",e),t.label=3;case 3:return e.cancel||this.printModule.print(),[2]}}))}))},t.prototype.triggerEvent=function(e,t){return qc(this,void 0,void 0,(function(){var i;return Yc(this,(function(n){switch(n.label){case 0:return[4,this.trigger(e,t)];case 1:return i=n.sent(),S&&"string"===typeof i&&(i=JSON.parse(i)),[2,i]}}))}))},t.prototype.firePrintEnd=function(e){var t={fileName:e};this.trigger("printEnd",t)},t.prototype.fireThumbnailClick=function(e){var t={name:"thumbnailClick",pageNumber:e};this.trigger("thumbnailClick",t)},t.prototype.fireBookmarkClick=function(e,t,i,n){var o={name:"bookmarkClick",pageNumber:e,position:t,text:i,fileName:n};this.trigger("bookmarkClick",o)},t.prototype.fireImportStart=function(e){var t={name:"importAnnotationsStart",importData:e,formFieldData:null};this.trigger("importStart",t)},t.prototype.fireExportStart=function(e){var t={name:"exportAnnotationsStart",exportData:e,formFieldData:null};this.trigger("exportStart",t)},t.prototype.fireImportSuccess=function(e){var t={name:"importAnnotationsSuccess",importData:e,formFieldData:null};this.trigger("importSuccess",t)},t.prototype.fireExportSuccess=function(e,t){var i={name:"exportAnnotationsSuccess",exportData:e,fileName:t,formFieldData:null};this.trigger("exportSuccess",i)},t.prototype.fireImportFailed=function(e,t){var i={name:"importAnnotationsFailed",importData:e,errorDetails:t,formFieldData:null};this.trigger("importFailed",i)},t.prototype.fireExportFailed=function(e,t){var i={name:"exportAnnotationsFailed",exportData:e,errorDetails:t,formFieldData:null};this.trigger("exportFailed",i)},t.prototype.fireFormImportStarted=function(e){var t={name:"importFormFieldsStart",importData:null,formFieldData:e};this.trigger("importStart",t)},t.prototype.fireFormExportStarted=function(e){var t={name:"exportFormFieldsStart",exportData:null,formFieldData:e};this.trigger("exportStart",t)},t.prototype.fireFormImportSuccess=function(e){var t={name:"importFormFieldsSuccess",importData:e,formFieldData:e};this.trigger("importSuccess",t)},t.prototype.fireFormExportSuccess=function(e,t){var i={name:"exportFormFieldsSuccess",exportData:e,fileName:t,formFieldData:e};this.trigger("exportSuccess",i)},t.prototype.fireFormImportFailed=function(e,t){var i={name:"importFormFieldsfailed",importData:e,errorDetails:t,formFieldData:e};this.trigger("importFailed",i)},t.prototype.fireFormExportFailed=function(e,t){var i={name:"exportFormFieldsFailed",exportData:e,errorDetails:t,formFieldData:e};this.trigger("exportFailed",i)},t.prototype.fireTextExtractionCompleted=function(e){var t={documentTextCollection:e};this.trigger("extractTextCompleted",t)},t.prototype.fireTextSearchStart=function(e,t){var i={name:"textSearchStart",searchText:e,matchCase:t};this.trigger("textSearchStart",i)},t.prototype.fireTextSearchComplete=function(e,t){var i={name:"textSearchComplete",searchText:e,matchCase:t};this.trigger("textSearchComplete",i)},t.prototype.fireTextSearchHighlight=function(e,t,i,n){var o={name:"textSearchHighlight",searchText:e,matchCase:t,bounds:i,pageNumber:n};this.trigger("textSearchHighlight",o)},t.prototype.renderAdornerLayer=function(e,t,i,n){Wp(e,t,i,n,this)},t.prototype.renderSelector=function(e,t){this.drawing.renderSelector(e,t)},t.prototype.select=function(e,t,i,n){var o=this.allowServerDataBinding;if(this.enableServerDataBinding(!1),this.annotationModule){var s=this.annotationModule.textMarkupAnnotationModule,a=s&&s.selectTextMarkupCurrentPage,r=this.selectedItems.annotations[0];if(a){var l=this.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;this.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(a,!0),this.fireAnnotationUnSelect(l.annotName,l.pageNumber,l)}i||this.viewerBase.activeElements&&this.viewerBase.activeElements.activePageID>=0&&!this.viewerBase.isNewStamp&&r&&"HandWrittenSignature"!==r.shapeAnnotationType&&"SignatureText"!==r.shapeAnnotationType&&"SignatureImage"!==r.shapeAnnotationType&&this.fireAnnotationUnSelect(r.annotName,r.pageIndex,r)}if(this.formDesignerModule){var d=this.selectedItems.formFields[0];if(d&&this.formDesignerModule&&d&&d.formFieldAnnotationType){var h={name:d.name,id:d.id,value:d.value,fontFamily:d.fontFamily,fontSize:d.fontSize,fontStyle:d.fontStyle,color:d.color,backgroundColor:d.backgroundColor,borderColor:d.borderColor,thickness:d.thickness,alignment:d.alignment,isReadonly:d.isReadonly,visibility:d.visibility,maxLength:d.maxLength,isRequired:d.isRequired,isPrint:d.isPrint,rotation:d.rotateAngle,tooltip:d.tooltip,options:d.options,isChecked:d.isChecked,isSelected:d.isSelected};this.fireFormFieldUnselectEvent("formFieldUnselect",h,d.pageIndex)}}var p=this;this.viewerBase.renderedPagesList.forEach((function(e){p.clearSelection(e)})),this.drawing.select(e,t,i,n),this.enableServerDataBinding(o,!0)},t.prototype.getPageTable=function(e){return this.drawing.getPageTable(e)},t.prototype.dragSelectedObjects=function(e,t,i,n,o){return this.drawing.dragSelectedObjects(e,t,i,n,o)},t.prototype.scaleSelectedItems=function(e,t,i){return this.drawing.scaleSelectedItems(e,t,i)},t.prototype.dragConnectorEnds=function(e,t,i,n,o,s,a){return this.drawing.dragConnectorEnds(e,t,i,n,o,null,a)},t.prototype.clearSelection=function(e){var t=this.allowServerDataBinding;this.enableServerDataBinding(!1);var i=this.selectedItems;i.annotations.length>0?this.selectedItems.annotations[0]:this.selectedItems.formFields[0];if(i.annotations.length>0?(i.offsetX=0,i.offsetY=0,i.width=0,i.height=0,i.rotateAngle=0,i.annotations=[],i.wrapper=null):i.formFields.length>0&&(i.offsetX=0,i.offsetY=0,i.width=0,i.height=0,i.rotateAngle=0,i.formFields=[],i.wrapper=null),this.drawing.clearSelectorLayer(e),this.viewerBase.isAnnotationSelect=!1,this.viewerBase.isFormFieldSelect=!1,this.annotationModule){var n=this.annotationModule.textMarkupAnnotationModule;if(n){var o=n.selectTextMarkupCurrentPage;this.annotationModule.textMarkupAnnotationModule.clearCurrentSelectedAnnotation(),this.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(o)}}this.enableServerDataBinding(t,!0)},t.prototype.getPageNumberFromClientPoint=function(e){return this.viewerBase.getPageNumberFromClientPoint(e)},t.prototype.convertClientPointToPagePoint=function(e,t){return this.viewerBase.convertClientPointToPagePoint(e,t)},t.prototype.convertPagePointToClientPoint=function(e,t){return this.viewerBase.convertPagePointToClientPoint(e,t)},t.prototype.convertPagePointToScrollingPoint=function(e,t){return this.viewerBase.convertPagePointToScrollingPoint(e,t)},t.prototype.zoomToRect=function(e){this.magnificationModule.zoomToRect(e)},t.prototype.add=function(e){return this.drawing.add(e)},t.prototype.remove=function(e){return this.drawing.remove(e)},t.prototype.copy=function(){return this.annotation?this.annotation.isShapeCopied=!0:this.formDesigner&&this.designerMode&&(this.formDesigner.isShapeCopied=!0),this.drawing.copy()},t.prototype.rotate=function(e,t){return this.drawing.rotate(this.selectedItems,e,null,t)},t.prototype.paste=function(e){var t;return this.viewerBase.activeElements.activePageID&&(t=this.viewerBase.activeElements.activePageID),this.drawing.paste(e,t||0)},t.prototype.refresh=function(){for(var e=0;e<this.annotations.length;e++){if(void 0!==this.zIndexTable.length){for(var t=0;t<this.zIndexTable.length;t++){for(var i=this.zIndexTable[t].objects,n=0;n<i.length;n++)i.splice(n,1);delete this.zIndexTable[t]}this.annotations[e]&&delete this.annotations[e],this.selectedItems.annotations&&this.selectedItems.annotations[e]&&delete this.selectedItems.annotations[e],this.zIndexTable=[],this.renderDrawing()}this.annotations&&0!==this.annotations.length&&(this.annotations.length=0,this.selectedItems.annotations.length=0)}},t.prototype.cut=function(){var e;return this.viewerBase.activeElements.activePageID&&(e=this.viewerBase.activeElements.activePageID),this.annotation?this.annotation.isShapeCopied=!0:this.formDesigner&&this.designerMode&&(this.formDesigner.isShapeCopied=!0),this.drawing.cut(e||0)},t.prototype.nodePropertyChange=function(e,t){this.drawing.nodePropertyChange(e,t)},t.prototype.enableServerDataBinding=function(e,t){void 0===t&&(t=!1),S()&&(this.allowServerDataBinding=e,t&&(this.bulkChanges={}))},t.prototype.checkBoundaryConstraints=function(e,t,i,n,o,s){return this.drawing.checkBoundaryConstraints(e,t,i,n,o,s)},Uc([Ge()],t.prototype,"serviceUrl",void 0),Uc([Ge(0)],t.prototype,"pageCount",void 0),Uc([Ge(!1)],t.prototype,"isDocumentEdited",void 0),Uc([Ge(0)],t.prototype,"currentPageNumber",void 0),Uc([Ge()],t.prototype,"documentPath",void 0),Uc([Ge(null)],t.prototype,"exportAnnotationFileName",void 0),Uc([Ge()],t.prototype,"downloadFileName",void 0),Uc([Ge("auto")],t.prototype,"height",void 0),Uc([Ge("auto")],t.prototype,"width",void 0),Uc([Ge(!0)],t.prototype,"enableToolbar",void 0),Uc([Ge(1)],t.prototype,"retryCount",void 0),Uc([Ge([500])],t.prototype,"retryStatusCodes",void 0),Uc([Ge(!0)],t.prototype,"showNotificationDialog",void 0),Uc([Ge(!0)],t.prototype,"enableNavigationToolbar",void 0),Uc([Ge(!0)],t.prototype,"enableCommentPanel",void 0),Uc([Ge(!1)],t.prototype,"isCommandPanelOpen",void 0),Uc([Ge(!1)],t.prototype,"enableTextMarkupResizer",void 0),Uc([Ge(!1)],t.prototype,"enableMultiLineOverlap",void 0),Uc([Ge(!1)],t.prototype,"isValidFreeText",void 0),Uc([Ge(!1)],t.prototype,"isAnnotationToolbarOpen",void 0),Uc([Ge(!1)],t.prototype,"isAnnotationToolbarVisible",void 0),Uc([Ge(!1)],t.prototype,"isFormDesignerToolbarVisible",void 0),Uc([Ge(!1)],t.prototype,"enableMultiPageAnnotation",void 0),Uc([Ge(!0)],t.prototype,"enableDownload",void 0),Uc([Ge(!0)],t.prototype,"enablePrint",void 0),Uc([Ge(!0)],t.prototype,"enablePrintRotation",void 0),Uc([Ge(!0)],t.prototype,"enableThumbnail",void 0),Uc([Ge(!1)],t.prototype,"isThumbnailViewOpen",void 0),Uc([Ge(!1)],t.prototype,"isSignatureEditable",void 0),Uc([Ge(!0)],t.prototype,"enableBookmark",void 0),Uc([Ge(!1)],t.prototype,"enableBookmarkStyles",void 0),Uc([Ge(!0)],t.prototype,"enableHyperlink",void 0),Uc([Ge(!0)],t.prototype,"enableHandwrittenSignature",void 0),Uc([Ge(!0)],t.prototype,"enableInkAnnotation",void 0),Uc([Ge(!1)],t.prototype,"restrictZoomRequest",void 0),Uc([Ge("CurrentTab")],t.prototype,"hyperlinkOpenState",void 0),Uc([Ge("RightClick")],t.prototype,"contextMenuOption",void 0),Uc([Ge([])],t.prototype,"disableContextMenuItems",void 0),Uc([Ge({name:"",id:"",type:"",isReadOnly:!1,isSelected:!1,isChecked:!1,value:"",signatureType:[""],fontName:"",fontFamily:"Helvetica",fontSize:10,fontStyle:"None",color:"black",backgroundColor:"white",alignment:"Left",visibility:"visible",maxLength:0,isRequired:!1,isPrint:!1,tooltip:"",pageIndex:-1,options:[],signatureIndicatorSettings:{opacity:1,backgroundColor:"orange",width:19,height:10,fontSize:10,text:null,color:"black"}})],t.prototype,"formFieldCollections",void 0),Uc([Ge(!0)],t.prototype,"enableNavigation",void 0),Uc([Ge(!0)],t.prototype,"enableAutoComplete",void 0),Uc([Ge(!0)],t.prototype,"enableMagnification",void 0),Uc([Ge(!1)],t.prototype,"enableShapeLabel",void 0),Uc([Ge(!0)],t.prototype,"enableImportAnnotationMeasurement",void 0),Uc([Ge(!0)],t.prototype,"enablePinchZoom",void 0),Uc([Ge(!0)],t.prototype,"enableTextSelection",void 0),Uc([Ge(!0)],t.prototype,"enableTextSearch",void 0),Uc([Ge(!0)],t.prototype,"enableAnnotation",void 0),Uc([Ge(!0)],t.prototype,"enableFormFields",void 0),Uc([Ge(!0)],t.prototype,"enableFormDesigner",void 0),Uc([Ge(!1)],t.prototype,"designerMode",void 0),Uc([Ge(!1)],t.prototype,"enableFormFieldsValidation",void 0),Uc([Ge(!1)],t.prototype,"isFormFieldDocument",void 0),Uc([Ge(!1)],t.prototype,"enableDesktopMode",void 0),Uc([Ge(!1)],t.prototype,"hideSaveSignature",void 0),Uc([Ge(!0)],t.prototype,"enableFreeText",void 0),Uc([Ge(!0)],t.prototype,"enableTextMarkupAnnotation",void 0),Uc([Ge(!0)],t.prototype,"enableShapeAnnotation",void 0),Uc([Ge(!0)],t.prototype,"enableMeasureAnnotation",void 0),Uc([Ge(!0)],t.prototype,"enableStampAnnotations",void 0),Uc([Ge(!0)],t.prototype,"enableStickyNotesAnnotation",void 0),Uc([Ge(!0)],t.prototype,"enableAnnotationToolbar",void 0),Uc([Ge(!0)],t.prototype,"enableFormDesignerToolbar",void 0),Uc([Ge(!1)],t.prototype,"isBookmarkPanelOpen",void 0),Uc([Ge(!1)],t.prototype,"isInitialFieldToolbarSelection",void 0),Uc([Ge("TextSelection")],t.prototype,"interactionMode",void 0),Uc([Ge("Default")],t.prototype,"zoomMode",void 0),Uc([Ge("Default")],t.prototype,"signatureFitMode",void 0),Uc([Ge("Default")],t.prototype,"printMode",void 0),Uc([Ge(0)],t.prototype,"zoomValue",void 0),Uc([Ge(!0)],t.prototype,"enableZoomOptimization",void 0),Uc([Ge(!1)],t.prototype,"isExtractText",void 0),Uc([Ge(!1)],t.prototype,"isMaintainSelection",void 0),Uc([Ge(!1)],t.prototype,"hideEmptyDigitalSignatureFields",void 0),Uc([Ge(!0)],t.prototype,"showDigitalSignatureAppearance",void 0),Uc([Ge("M/d/yyyy h:mm:ss a")],t.prototype,"dateTimeFormat",void 0),Uc([Ge({showTooltip:!0,toolbarItems:["OpenOption","UndoRedoTool","PageNavigationTool","MagnificationTool","PanTool","SelectionTool","CommentTool","SubmitForm","AnnotationEditTool","FormDesignerEditTool","FreeTextAnnotationOption","InkAnnotationOption","ShapeAnnotationOption","StampAnnotation","SignatureOption","SearchOption","PrintOption","DownloadOption"],annotationToolbarItems:["HighlightTool","UnderlineTool","StrikethroughTool","ColorEditTool","OpacityEditTool","AnnotationDeleteTool","StampAnnotationTool","HandWrittenSignatureTool","InkAnnotationTool","ShapeTool","CalibrateTool","StrokeColorEditTool","ThicknessEditTool","FreeTextAnnotationTool","FontFamilyAnnotationTool","FontSizeAnnotationTool","FontStylesAnnotationTool","FontAlignAnnotationTool","FontColorAnnotationTool","CommentPanelTool"],formDesignerToolbarItems:["TextboxTool","PasswordTool","CheckBoxTool","RadioButtonTool","DropdownTool","ListboxTool","DrawSignatureTool","DeleteTool"]})],t.prototype,"toolbarSettings",void 0),Uc([Ge({ajaxHeaders:[],withCredentials:!1})],t.prototype,"ajaxRequestSettings",void 0),Uc([Ge({customStampName:"",customStampImageSource:""})],t.prototype,"customStamp",void 0),Uc([Ge({load:"Load",renderPages:"RenderPdfPages",unload:"Unload",download:"Download",renderThumbnail:"RenderThumbnailImages",print:"PrintImages",renderComments:"RenderAnnotationComments",importAnnotations:"ImportAnnotations",exportAnnotations:"ExportAnnotations",importFormFields:"ImportFormFields",exportFormFields:"ExportFormFields",renderTexts:"RenderPdfTexts"})],t.prototype,"serverActionSettings",void 0),Uc([Ge({name:"",isReadOnly:!1,visibility:"visible",isRequired:!1,isPrint:!0,tooltip:"",thickness:1,signatureIndicatorSettings:{opacity:1,backgroundColor:"orange",width:19,height:10,fontSize:10,text:null,color:"black"},signatureDialogSettings:{displayMode:Ks.Draw|Ks.Text|Ks.Upload,hideSaveSignature:!1}})],t.prototype,"signatureFieldSettings",void 0),Uc([Ge({name:"",isReadOnly:!1,visibility:"visible",isRequired:!1,isPrint:!0,tooltip:"",thickness:1,initialIndicatorSettings:{opacity:1,backgroundColor:"orange",width:19,height:10,fontSize:10,text:null,color:"black"},initialDialogSettings:{displayMode:Ks.Draw|Ks.Text|Ks.Upload,hideSaveSignature:!1}})],t.prototype,"initialFieldSettings",void 0),Uc([Ge({opacity:1,color:"#FFDF56",author:"Guest",annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Js.Corners|Js.Edges},isLock:!1,enableMultiPageAnnotation:!1,enableTextMarkupResizer:!1,allowedInteractions:["None"],isPrint:!0})],t.prototype,"highlightSettings",void 0),Uc([Ge({opacity:1,color:"#ff0000",author:"Guest",annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Js.Corners|Js.Edges},isLock:!1,enableMultiPageAnnotation:!1,enableTextMarkupResizer:!1,allowedInteractions:["None"],isPrint:!0})],t.prototype,"strikethroughSettings",void 0),Uc([Ge({opacity:1,color:"#00ff00",author:"Guest",annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Js.Corners|Js.Edges},isLock:!1,enableMultiPageAnnotation:!1,enableTextMarkupResizer:!1,allowedInteractions:["None"],isPrint:!0})],t.prototype,"underlineSettings",void 0),Uc([Ge({opacity:1,fillColor:"#ffffff00",strokeColor:"#ff0000",author:"Guest",thickness:1,borderDashArray:0,lineHeadStartStyle:"None",lineHeadEndStyle:"None",annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Js.Corners|Js.Edges,resizerCursorType:null},minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,allowedInteractions:["None"],isPrint:!0})],t.prototype,"lineSettings",void 0),Uc([Ge({opacity:1,fillColor:"#ffffff00",strokeColor:"#ff0000",author:"Guest",thickness:1,borderDashArray:0,lineHeadStartStyle:"Closed",lineHeadEndStyle:"Closed",annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Js.Corners|Js.Edges,resizerCursorType:null},minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,allowedInteractions:["None"],isPrint:!0})],t.prototype,"arrowSettings",void 0),Uc([Ge({opacity:1,fillColor:"#ffffff00",strokeColor:"#ff0000",author:"Guest",thickness:1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Js.Corners|Js.Edges,resizerCursorType:null},minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,allowedInteractions:["None"],isPrint:!0})],t.prototype,"rectangleSettings",void 0),Uc([Ge({opacity:1,fillColor:"#ffffff00",borderColor:"#ff0000",fontColor:"#000",fontSize:16,labelHeight:24.6,labelMaxWidth:151,labelContent:"Label"})],t.prototype,"shapeLabelSettings",void 0),Uc([Ge({opacity:1,fillColor:"#ffffff00",strokeColor:"#ff0000",author:"Guest",thickness:1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Js.Corners|Js.Edges,resizerCursorType:null},minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,allowedInteractions:["None"],isPrint:!0})],t.prototype,"circleSettings",void 0),Uc([Ge({opacity:1,fillColor:"#ffffff00",strokeColor:"#ff0000",author:"Guest",thickness:1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Js.Corners|Js.Edges,resizerCursorType:null},minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,allowedInteractions:["None"],isPrint:!0})],t.prototype,"polygonSettings",void 0),Uc([Ge({opacity:1,author:"Guest",annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Js.Corners|Js.Edges,resizerCursorType:null},minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,dynamicStamps:[ea.Revised,ea.Reviewed,ea.Received,ea.Confidential,ea.Approved,ea.NotApproved],signStamps:[ta.Witness,ta.InitialHere,ta.SignHere,ta.Accepted,ta.Rejected],standardBusinessStamps:[ia.Approved,ia.NotApproved,ia.Draft,ia.Final,ia.Completed,ia.Confidential,ia.ForPublicRelease,ia.NotForPublicRelease,ia.ForComment,ia.Void,ia.PreliminaryResults,ia.InformationOnly],allowedInteractions:["None"],isPrint:!0})],t.prototype,"stampSettings",void 0),Uc([Ge({opacity:1,author:"Guest",width:0,height:0,left:0,top:0,minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,enableCustomStamp:!0,allowedInteractions:["None"],isPrint:!0})],t.prototype,"customStampSettings",void 0),Uc([Ge({opacity:1,fillColor:"#ffffff00",strokeColor:"#ff0000",author:"Guest",thickness:1,borderDashArray:0,lineHeadStartStyle:"Closed",lineHeadEndStyle:"Closed",annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Js.Corners|Js.Edges,resizerCursorType:null},minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,leaderLength:40,resizeCursorType:$s.move,allowedInteractions:["None"],isPrint:!0})],t.prototype,"distanceSettings",void 0),Uc([Ge({opacity:1,fillColor:"#ffffff00",strokeColor:"#ff0000",author:"Guest",thickness:1,borderDashArray:0,lineHeadStartStyle:"Open",lineHeadEndStyle:"Open",minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Js.Corners|Js.Edges,resizerCursorType:null},allowedInteractions:["None"],isPrint:!0})],t.prototype,"perimeterSettings",void 0),Uc([Ge({opacity:1,fillColor:"#ffffff00",strokeColor:"#ff0000",author:"Guest",thickness:1,minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Js.Corners|Js.Edges,resizerCursorType:null},allowedInteractions:["None"],isPrint:!0})],t.prototype,"areaSettings",void 0),Uc([Ge({opacity:1,fillColor:"#ffffff00",strokeColor:"#ff0000",author:"Guest",thickness:1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Js.Corners|Js.Edges,resizerCursorType:null},minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,allowedInteractions:["None"],isPrint:!0})],t.prototype,"radiusSettings",void 0),Uc([Ge({opacity:1,fillColor:"#ffffff00",strokeColor:"#ff0000",author:"Guest",thickness:1,minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Js.Corners|Js.Edges,resizerCursorType:null},allowedInteractions:["None"],isPrint:!0})],t.prototype,"volumeSettings",void 0),Uc([Ge({author:"Guest",opacity:1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Js.Corners|Js.Edges,resizerCursorType:null},isLock:!1,allowedInteractions:["None"],isPrint:!0})],t.prototype,"stickyNotesSettings",void 0),Uc([Ge({opacity:1,fillColor:"#ffffff00",borderColor:"#ffffff00",author:"Guest",borderWidth:1,width:151,fontSize:16,height:24.6,fontColor:"#000",fontFamily:"Helvetica",defaultText:"Type Here",textAlignment:"Left",fontStyle:Zs.None,allowTextOnly:!1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Js.Corners|Js.Edges,resizerCursorType:null},minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,allowedInteractions:["None"],isPrint:!0,isReadonly:!1,enableAutoFit:!1})],t.prototype,"freeTextSettings",void 0),Uc([Ge({conversionUnit:"in",displayUnit:"in",scaleRatio:1,depth:96})],t.prototype,"measurementSettings",void 0),Uc([Ge({selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Js.Corners|Js.Edges,resizerCursorType:null})],t.prototype,"annotationSelectorSettings",void 0),Uc([Ge({searchHighlightColor:"#fdd835",searchColor:"#8b4c12"})],t.prototype,"textSearchColorSettings",void 0),Uc([Ge({displayMode:Ks.Draw|Ks.Text|Ks.Upload,hideSaveSignature:!1})],t.prototype,"signatureDialogSettings",void 0),Uc([Ge({displayMode:Ks.Draw|Ks.Text|Ks.Upload,hideSaveSignature:!1})],t.prototype,"initialDialogSettings",void 0),Uc([Ge({signatureItem:["Signature","Initial"],saveSignatureLimit:1,saveInitialLimit:1,opacity:1,strokeColor:"#000000",width:150,height:100,thickness:1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Js.Corners|Js.Edges,resizerCursorType:null},allowedInteractions:["None"],signatureDialogSettings:{displayMode:Ks.Draw|Ks.Text|Ks.Upload,hideSaveSignature:!1},initialDialogSettings:{displayMode:Ks.Draw|Ks.Text|Ks.Upload,hideSaveSignature:!1}})],t.prototype,"handWrittenSignatureSettings",void 0),Uc([Ge({author:"Guest",opacity:1,strokeColor:"#ff0000",thickness:1,annotationSelectorSettings:{selectionBorderColor:"",resizerBorderColor:"black",resizerFillColor:"#FF4081",resizerSize:8,selectionBorderThickness:1,resizerShape:"Square",selectorLineDashArray:[],resizerLocation:Js.Corners|Js.Edges,resizerCursorType:null},isLock:!1,allowedInteractions:["None"],isPrint:!0})],t.prototype,"inkAnnotationSettings",void 0),Uc([Ge({author:"Guest",minHeight:0,minWidth:0,maxWidth:0,maxHeight:0,isLock:!1,skipPrint:!1,skipDownload:!1,allowedInteractions:["None"]})],t.prototype,"annotationSettings",void 0),Uc([Ge({enableTileRendering:!0,x:0,y:0})],t.prototype,"tileRenderingSettings",void 0),Uc([Ge({delayPageRequestTimeOnScroll:100})],t.prototype,"scrollSettings",void 0),Uc([Ge({name:"",value:"",fontFamily:"Helvetica",fontSize:10,fontStyle:"None",color:"black",borderColor:"black",backgroundColor:"white",alignment:"Left",isReadOnly:!1,visibility:"visible",maxLength:0,isRequired:!1,isPrint:!0,tooltip:"",thickness:1,isMultiline:!1})],t.prototype,"textFieldSettings",void 0),Uc([Ge({name:"",value:"",fontFamily:"Helvetica",fontSize:10,fontStyle:"None",color:"black",borderColor:"black",backgroundColor:"white",alignment:"Left",isReadOnly:!1,visibility:"visible",maxLength:0,isRequired:!1,isPrint:!0,tooltip:"",thickness:1})],t.prototype,"passwordFieldSettings",void 0),Uc([Ge({name:"",isChecked:!1,backgroundColor:"white",isReadOnly:!1,visibility:"visible",isPrint:!0,tooltip:"",isRequired:!1,thickness:1,borderColor:"black"})],t.prototype,"checkBoxFieldSettings",void 0),Uc([Ge({name:"",isSelected:!1,backgroundColor:"white",isReadOnly:!1,visibility:"visible",isPrint:!0,tooltip:"",isRequired:!1,thickness:1,borderColor:"black"})],t.prototype,"radioButtonFieldSettings",void 0),Uc([Ge({name:"",fontFamily:"Helvetica",fontSize:10,fontStyle:"None",color:"black",backgroundColor:"white",alignment:"Left",isReadOnly:!1,visibility:"visible",isRequired:!1,isPrint:!0,tooltip:"",options:[],thickness:1,borderColor:"black"})],t.prototype,"DropdownFieldSettings",void 0),Uc([Ge({name:"",fontFamily:"Helvetica",fontSize:10,fontStyle:"None",color:"black",backgroundColor:"white",alignment:"Left",isReadOnly:!1,visibility:"visible",isRequired:!1,isPrint:!1,tooltip:"",options:[],thickness:1,borderColor:"black"})],t.prototype,"listBoxFieldSettings",void 0),Uc([Ge({contextMenuAction:"RightClick",contextMenuItems:[Xs.Comment,Xs.Copy,Xs.Cut,Xs.Delete,Xs.Highlight,Xs.Paste,Xs.Properties,Xs.ScaleRatio,Xs.Strikethrough,Xs.Underline]})],t.prototype,"contextMenuSettings",void 0),Uc([Je({},np)],t.prototype,"selectedItems",void 0),Uc([$e()],t.prototype,"created",void 0),Uc([$e()],t.prototype,"documentLoad",void 0),Uc([$e()],t.prototype,"documentUnload",void 0),Uc([$e()],t.prototype,"documentLoadFailed",void 0),Uc([$e()],t.prototype,"ajaxRequestFailed",void 0),Uc([$e()],t.prototype,"ajaxRequestSuccess",void 0),Uc([$e()],t.prototype,"validateFormFields",void 0),Uc([$e()],t.prototype,"pageClick",void 0),Uc([$e()],t.prototype,"pageChange",void 0),Uc([$e()],t.prototype,"hyperlinkClick",void 0),Uc([$e()],t.prototype,"hyperlinkMouseOver",void 0),Uc([$e()],t.prototype,"zoomChange",void 0),Uc([$e()],t.prototype,"annotationAdd",void 0),Uc([$e()],t.prototype,"annotationRemove",void 0),Uc([$e()],t.prototype,"annotationPropertiesChange",void 0),Uc([$e()],t.prototype,"annotationResize",void 0),Uc([$e()],t.prototype,"addSignature",void 0),Uc([$e()],t.prototype,"removeSignature",void 0),Uc([$e()],t.prototype,"moveSignature",void 0),Uc([$e()],t.prototype,"signaturePropertiesChange",void 0),Uc([$e()],t.prototype,"resizeSignature",void 0),Uc([$e()],t.prototype,"signatureSelect",void 0),Uc([$e()],t.prototype,"annotationSelect",void 0),Uc([$e()],t.prototype,"annotationUnSelect",void 0),Uc([$e()],t.prototype,"annotationDoubleClick",void 0),Uc([$e()],t.prototype,"annotationMove",void 0),Uc([$e()],t.prototype,"annotationMoving",void 0),Uc([$e()],t.prototype,"annotationMouseover",void 0),Uc([$e()],t.prototype,"annotationMouseLeave",void 0),Uc([$e()],t.prototype,"pageMouseover",void 0),Uc([$e()],t.prototype,"importStart",void 0),Uc([$e()],t.prototype,"exportStart",void 0),Uc([$e()],t.prototype,"importSuccess",void 0),Uc([$e()],t.prototype,"exportSuccess",void 0),Uc([$e()],t.prototype,"importFailed",void 0),Uc([$e()],t.prototype,"exportFailed",void 0),Uc([$e()],t.prototype,"extractTextCompleted",void 0),Uc([$e()],t.prototype,"thumbnailClick",void 0),Uc([$e()],t.prototype,"bookmarkClick",void 0),Uc([$e()],t.prototype,"textSelectionStart",void 0),Uc([$e()],t.prototype,"textSelectionEnd",void 0),Uc([$e()],t.prototype,"downloadStart",void 0),Uc([$e()],t.prototype,"buttonFieldClick",void 0),Uc([$e()],t.prototype,"formFieldClick",void 0),Uc([$e()],t.prototype,"downloadEnd",void 0),Uc([$e()],t.prototype,"printStart",void 0),Uc([$e()],t.prototype,"printEnd",void 0),Uc([$e()],t.prototype,"textSearchStart",void 0),Uc([$e()],t.prototype,"textSearchComplete",void 0),Uc([$e()],t.prototype,"textSearchHighlight",void 0),Uc([$e()],t.prototype,"ajaxRequestInitiate",void 0),Uc([$e()],t.prototype,"commentAdd",void 0),Uc([$e()],t.prototype,"commentEdit",void 0),Uc([$e()],t.prototype,"commentDelete",void 0),Uc([$e()],t.prototype,"commentSelect",void 0),Uc([$e()],t.prototype,"commentStatusChanged",void 0),Uc([$e()],t.prototype,"beforeAddFreeText",void 0),Uc([$e()],t.prototype,"formFieldFocusOut",void 0),Uc([$e()],t.prototype,"formFieldAdd",void 0),Uc([$e()],t.prototype,"formFieldRemove",void 0),Uc([$e()],t.prototype,"formFieldPropertiesChange",void 0),Uc([$e()],t.prototype,"formFieldMouseLeave",void 0),Uc([$e()],t.prototype,"formFieldMouseover",void 0),Uc([$e()],t.prototype,"formFieldMove",void 0),Uc([$e()],t.prototype,"formFieldResize",void 0),Uc([$e()],t.prototype,"formFieldSelect",void 0),Uc([$e()],t.prototype,"formFieldUnselect",void 0),Uc([$e()],t.prototype,"formFieldDoubleClick",void 0),Uc([Ke([],Ad)],t.prototype,"annotations",void 0),Uc([Ke([],kd)],t.prototype,"formFields",void 0),Uc([Ge()],t.prototype,"drawingObject",void 0),t=Uc([et],t)}(Dt)),Zc=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Xc=["alt","className","disabled","form","id","readOnly","style","tabIndex","title","type","name","onClick","onFocus","onBlur"],Gc=["accordion","tab","splitter"],Jc=new RegExp("]"),Kc=function(i){function n(){var e=null!==i&&i.apply(this,arguments)||this;return e.mountingState=!1,e.attrKeys=[],e.cachedTimeOut=0,e.isAppendCalled=!1,e.initRenderCalled=!1,e.isReactForeceUpdate=!1,e.isReact=!0,e.isshouldComponentUpdateCalled=!1,e.isCreated=!1,e}return Zc(n,i),n.prototype.componentDidMount=function(){this.refreshChild(!0),this.canDelayUpdate=-1!==Gc.indexOf(this.getModuleName()),this.renderReactComponent(),this.portals&&this.portals.length&&(this.mountingState=!0,this.renderReactTemplates(),this.mountingState=!1)},n.prototype.componentDidUpdate=function(e){this.isshouldComponentUpdateCalled||!this.initRenderCalled||this.isReactForeceUpdate||(this.isshouldComponentUpdateCalled=!0,e!==this.props&&this.refreshProperties(this.props,!0))},n.prototype.renderReactComponent=function(){var e=this.reactElement;e&&!this.isAppendCalled&&(this.isAppendCalled=!0,this.appendTo(e))},n.prototype.shouldComponentUpdate=function(e){return this.isshouldComponentUpdateCalled=!0,this.initRenderCalled?(this.isAppendCalled||(clearTimeout(this.cachedTimeOut),this.isAppendCalled=!0,this.appendTo(this.reactElement)),this.updateProperties(e),!0):(this.updateProperties(e,!0),!0)},n.prototype.updateProperties=function(e,t){for(var i=this,n=f({},e),o=Object.keys(e),s=m(this.props.statelessTemplates)?["valueTemplate","itemTemplate","headerTemplate","content"]:this.props.statelessTemplates,a=0,r=o;a<r.length;a++){var l=r[a],d="className"===l;if("children"!==l)if(d||m(this.htmlattributes[""+l])||this.htmlattributes[""+l]===n[""+l]||(this.htmlattributes[""+l]=n[""+l]),this.compareValues(this.props[""+l],e[""+l]))delete n[""+l];else if(-1!==this.attrKeys.indexOf(l))if(d){this.clsName=!0;for(var h=this.props[""+l].split(" "),p=0;p<h.length;p++)this.element.classList.remove(h[parseInt(p.toString(),10)]);for(var c=n[""+l].split(" "),u=0;u<c.length;u++)this.element.classList.add(c[parseInt(u.toString(),10)])}else"disabled"!==l&&delete n[""+l];else("value"===l&&e[""+l]===this[""+l]||s.indexOf(l)>-1&&("content"===l&&"function"===typeof n[""+l]||e[""+l].toString()===this[""+l].toString()))&&delete n[""+l]}n.children&&delete n.children,this.initRenderCalled&&(this.canDelayUpdate||this.props.delayUpdate)?setTimeout((function(){i.refreshProperties(n,e,t)})):this.refreshProperties(n,e,t)},n.prototype.refreshProperties=function(e,t,i){var n=m(this.props.statelessTemplates)?[]:this.props.statelessTemplates;Object.keys(e).length&&(i||this.processComplexTemplate(e,this),this.setProperties(e,i)),-1===n.indexOf("directiveTemplates")&&this.refreshChild(i,t)},n.prototype.processComplexTemplate=function(e,t){var i=t.complexTemplate;if(i)for(var n in i){var o=i[""+n];e[""+n]&&d(o,l(n,e),e)}},n.prototype.getDefaultAttributes=function(){var e=this;this.isReact=!0;var t=Object.keys(this.props);this.htmlattributes||(this.htmlattributes={}),this.attrKeys=Xc.concat(this.controlAttributes||[]);for(var i=0,o=t;i<o.length;i++){var s=o[i];-1===s.indexOf("data-")&&-1===s.indexOf("aria-")&&-1===this.attrKeys.indexOf(s)||this.htmlattributes[""+s]!==this.props[""+s]&&(this.htmlattributes[""+s]=this.props[""+s])}if(!this.htmlattributes.ref){this.htmlattributes.ref=function(t){e.reactElement=t};-1!==["autocomplete","combobox","dropdownlist","dropdowntree","multiselect","listbox","colorpicker","numerictextbox","textbox","uploader","maskedtextbox","slider","datepicker","datetimepicker","daterangepicker","timepicker","checkbox","switch","radio"].indexOf(this.getModuleName())&&(this.htmlattributes.key=""+n.reactUid,n.reactUid++)}if(this.clsName){for(var a=this.element.classList,r=this.htmlattributes.className,l=0;l<a.length;l++)-1===r.indexOf(a[parseInt(l.toString(),10)])&&(this.htmlattributes.className=this.htmlattributes.className+" "+a[parseInt(l.toString(),10)]);this.clsName=!1}return this.htmlattributes},n.prototype.trigger=function(e,t,i){var n=this;if(!0!==this.isDestroyed&&this.modelObserver){if(Jc.test(e)){var o=l(e,this);o?(o.call(this,t),i&&i.call(this,t)):i&&i.call(this,t)}"change"!==e&&"input"!==e||this.props.onChange&&t.event&&this.props.onChange.call(void 0,{syntheticEvent:t.event,nativeEvent:{text:t.value},value:t.value,target:this});var s=this.isProtectedOnChange;this.isProtectedOnChange=!1,"created"===e?setTimeout((function(){n.isCreated=!0,n.isDestroyed||n.modelObserver.notify(e,t,i)}),10):this.modelObserver.notify(e,t,i),this.isProtectedOnChange=s}},n.prototype.compareValues=function(e,t){if(typeof e===typeof t){if(e===t)return!0;if((!m(e)&&e.constructor)!==(!m(t)&&t.constructor))return!1;if(e instanceof Date||e instanceof RegExp||e instanceof String||e instanceof Number)return e.toString()===t.toString();if(c(e)||Array.isArray(e)){var i=e,n=t;return c(i)&&(i=[e],n=[t]),this.compareObjects(i,n).status}}return!1},n.prototype.compareObjects=function(e,t,i){var n=!0,o=[];if(e.length===t.length)for(var s=0,a=t.length;s<a;s++){var r={},l=e[parseInt(s.toString(),10)],d=t[parseInt(s.toString(),10)],h=Object.keys(d);if(0!==h.length)for(var p=0,c=h;p<c.length;p++){var u=c[p],f=l[""+u],m=d[""+u];if("items"===u)for(var g=0;g<m.length;g++)if("richtexteditor"===this.getModuleName()&&"object"===typeof m[parseInt(g.toString(),10)])return{status:!0};if("grid"===this.getModuleName()&&"field"===u&&(r[""+u]=m),!l.hasOwnProperty(u)||!this.compareValues(f,m)){if(!i)return{status:!1};n=!1,r[""+u]=m}}else if(t[parseInt(s.toString(),10)]===e[parseInt(s.toString(),10)])n=!0;else{if(!i)return{status:!1};n=!1}Object.keys(r).length&&o.push({index:s,value:r,key:i})}else n=!1;return{status:n,changedProperties:o}},n.prototype.refreshChild=function(e,t){if(this.checkInjectedModules){for(var i=this.getInjectedModules()||[],n=0,o=this.getInjectedServices()||[];n<o.length;n++){var s=o[n];-1===i.indexOf(s)&&i.push(s)}this.injectedModules=i}if(this.directivekeys){var a=[],r=this.validateChildren({},this.directivekeys,t||this.props);if(r&&Object.keys(r).length){if(!e&&this.skipRefresh)for(var d=0,h=this.skipRefresh;d<h.length;d++){delete r[""+h[d]]}if(this.prevProperties)for(var p=Object.keys(this.prevProperties),c=0;c<p.length;c++){var u=p[parseInt(c.toString(),10)];if(r.hasOwnProperty(u)){var m=this.compareObjects(this.prevProperties[""+u],r[""+u],u);if(m.status)delete r[""+u];else{m.changedProperties.length&&(a=a.concat(m.changedProperties));var g={};g[""+u]=r[""+u],this.prevProperties=f(this.prevProperties,g)}}}else this.prevProperties=f({},r,{},!0);if(a.length)if("grid"===this.getModuleName()&&"columns"===u)for(var y=0,v=this.columns;y<v.length;y++){if(l("field",v[parseInt(y.toString(),10)])===l(y+".value.field",a)){var w=l(a[parseInt(y.toString(),10)].key+"."+a[parseInt(y.toString(),10)].index,this);w&&w.setProperties?w.setProperties(a[parseInt(y.toString(),10)].value):f(w,a[parseInt(y.toString(),10)].value)}else this.setProperties(r,e)}else for(var b=0,S=a;b<S.length;b++){var C=S[b],x=l(C.key+"."+C.index,this);x&&x.setProperties?x.setProperties(C.value):f(x,C.value)}else this.setProperties(r,e)}}},n.prototype.componentWillUnmount=function(){clearTimeout(this.cachedTimeOut);this.initRenderCalled&&this.isAppendCalled&&this.element&&(["dropdowntree","checkbox"].indexOf(this.getModuleName())||document.body.contains(this.element))&&!this.isDestroyed&&this.isCreated&&this.destroy()},n.prototype.appendReactElement=function(t,i){var n=e.createPortal(t,i);this.portals?this.portals.push(n):this.portals=[n]},n.prototype.renderReactTemplates=function(e){this.isReactForeceUpdate=!0,e?this.forceUpdate(e):this.forceUpdate(),this.isReactForeceUpdate=!1},n.prototype.clearTemplate=function(e,t,i){var n=this,o=[];e&&e.length?Array.prototype.forEach.call(e,(function(e){var i=0,s=0;if(n.portals.forEach((function(t){t.propName===e&&(o.push(s),s++)})),m(t)||n.portals[o[(""+t)[parseInt(i.toString(),10)]]].propName!==e)for(var a=0;a<n.portals.length;a++)n.portals[parseInt(a.toString(),10)].propName===e&&(n.portals.splice(a,1),a--);else n.portals.splice(t,1),i++})):this.portals=[],this.renderReactTemplates(i)},n.prototype.validateChildren=function(e,i,n){for(var o=!1,s=0,a=t.Children.toArray(n.children);s<a.length;s++){var r=a[s],l=this.getChildType(r),d=i[""+l];if(l&&i){var h=this.getChildProps(t.Children.toArray(r.props.children),d);h.length&&(o=!0,e[r.type.propertyName||l]=h)}}return o?e:null},n.prototype.getChildType=function(e){return e.type&&e.type.isDirective&&e.type.moduleName||""},n.prototype.getChildProps=function(e,t){for(var i=[],n=0,o=e;n<o.length;n++){var s=o[n],a=!1,r=void 0;"string"===typeof t?(a=!0,r=t):r=Object.keys(t)[0];var l=s.props;if(this.getChildType(s)===r)if(a||!l.children){var d=f({},l,{},!0);this.processComplexTemplate(d,s.type),i.push(d)}else{var h=this.validateChildren(f({},l),t[""+r],l)||l;h.children&&delete h.children,this.processComplexTemplate(h,s.type),i.push(h)}}return i},n.prototype.getInjectedServices=function(){for(var e=0,i=t.Children.toArray(this.props.children);e<i.length;e++){var n=i[e];if(n.type.isService)return n.props.services}return[]},n.reactUid=1,n}(t.Component);var $c,eu=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),tu=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}eu(t,e),t.prototype.render=function(){return null},t.isDirective=!0}(t.PureComponent),function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),iu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tu(t,e),t.prototype.render=function(){return null},t.isService=!0,t}(t.PureComponent),nu=Ii.compile;$c={compile:function(i,n){return"string"===typeof i?nu(i,n):function(n,o,s,a){var r,l=i,d=n;"object"===typeof l&&(l=i.template,d=f({},n,i.data||{})),r=a||document.createElement("div");var h=t.createElement(l,d),p=e.createPortal(h,r);if(p.propName=s,o.portals?o.portals.push(p):o.portals=[p],!a)return[r]}}},Ii.compile=$c.compile;var ou,su=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),au=function(e){function i(t){var i=e.call(this,t)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!0,i.immediateRender=!0,i.portals=[],i}return su(i,e),i.prototype.render=function(){if(!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return t.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));e.prototype.render.call(this),this.initRenderCalled=!0},i}(Qc);ou=au,[Kc,t.Component].forEach((function(e){Object.getOwnPropertyNames(e.prototype).forEach((function(t){"isMounted"!==t&&"replaceState"!==t&&(ou.prototype[""+t]=e.prototype[""+t])}))}));var ru={},lu=30,du=30,hu=30,pu=30,cu=36,uu=36,fu="e-spin-show",mu="e-spin-hide",gu="e-spin-material",yu="e-spin-fabric",vu="e-spin-fluent",wu="e-spin-tailwind",bu="e-spin-bootstrap",Su="e-spin-bootstrap4",Cu="e-spin-bootstrap5",xu="e-spin-high-contrast",Mu="e-spinner-pane",Iu="e-spinner-inner",Tu="e-path-circle",Au="e-path-arc",ku="e-spin-label",Vu="e-spin-template",Eu=null,Du=null;function Nu(e,t){if(e.target){var i,n=m(t)?we:t,o=function(e,t){var i=t("div",{}),n=t("div",{});return i.classList.add(Mu),n.classList.add(Iu),e.appendChild(i),i.appendChild(n),{wrap:i,inner_wrap:n}}(e.target,n);if(m(e.cssClass)||o.wrap.classList.add(e.cssClass),m(e.template)&&m(Eu)){var s=m(e.type)?function(e){var t=window.getComputedStyle(e,":after").getPropertyValue("content");return t.replace(/['"]+/g,"")}(o.wrap):e.type;i=function(e,t){var i;switch(t){case"Material":i=lu;break;case"Fabric":case"Tailwind":case"Tailwind-dark":i=du;break;case"Fluent":i=hu;break;case"Bootstrap4":i=cu;break;case"Bootstrap5":i=uu;break;default:i=pu}return e=e?parseFloat(e+""):i,"Bootstrap"===t?e:e/2}(m(e.width)?void 0:e.width,s),Fu(s,o.wrap,i,n),m(e.label)||function(e,t,i){var n=i("div",{});n.classList.add(ku),n.innerHTML=t,e.appendChild(n)}(o.inner_wrap,e.label,n)}else{var a=m(e.template)?Eu:e.template;o.wrap.classList.add(Vu),function(e,t,i){m(i)||e.classList.add(i);var n=e.querySelector(".e-spinner-inner");n.innerHTML=t}(o.wrap,a,Du)}o.wrap.classList.add(mu),o=null}}function Fu(e,t,i,n){var o=t.querySelector("."+Iu),s=o.querySelector("svg");switch(m(s)||o.removeChild(s),e){case"Material":!function(e,t,i){var n=Pu();ru[""+n]={timeOut:0,type:"Material",radius:t},Bu(e,n,i,gu),ju(t,e,"Material",gu)}(o,i,n);break;case"Fabric":!function(e,t,i){var n=Pu();ru[""+n]={timeOut:0,type:"Fabric",radius:t},Ou(e,n,yu,i),Wu(t,e,yu)}(o,i,n);break;case"Fluent":!function(e,t,i){var n=Pu();ru[""+n]={timeOut:0,type:"Fluent",radius:t},Ou(e,n,vu,i),Wu(t,e,vu)}(o,i,n);break;case"Bootstrap":!function(e,t,i){var n=Pu();ru[""+n]={timeOut:0,type:"Bootstrap",radius:t},function(e,t,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=64,s=32,a=2;n.setAttribute("id",t),n.setAttribute("class",bu),n.setAttribute("viewBox","0 0 "+o+" "+o),e.insertBefore(n,e.firstChild);for(var r=0;r<=7;r++){var l=document.createElementNS("http://www.w3.org/2000/svg","circle");l.setAttribute("class",Tu+"_"+r),l.setAttribute("r",a+""),l.setAttribute("transform","translate("+s+","+s+")"),n.appendChild(l)}}(e,n),function(e,t){var i=e.querySelector("svg.e-spin-bootstrap"),n=0,o=0,s=24;i.style.width=i.style.height=t+"px";for(var a=90,r=0;r<=7;r++){var l=Uu(n,o,s,a),d=i.querySelector("."+Tu+"_"+r);d.setAttribute("cx",l.x+""),d.setAttribute("cy",l.y+""),a=a>=360?0:a,a+=45}}(e,t)}(o,i);break;case"HighContrast":!function(e,t,i){var n=Pu();ru[""+n]={timeOut:0,type:"HighContrast",radius:t},Ou(e,n,xu,i),Wu(t,e,xu)}(o,i,n);break;case"Bootstrap4":!function(e,t,i){var n=Pu();ru[""+n]={timeOut:0,type:"Bootstrap4",radius:t},Bu(e,n,i,Su),ju(t,e,"Bootstrap4",Su)}(o,i,n);break;case"Bootstrap5":!function(e,t,i){var n=Pu();ru[""+n]={timeOut:0,type:"Bootstrap5",radius:t},Bu(e,n,i,Cu),ju(t,e,"Bootstrap5",Cu)}(o,i,n);break;case"Tailwind":case"Tailwind-dark":!function(e,t,i){var n=Pu();ru[""+n]={timeOut:0,type:"Tailwind",radius:t},Ou(e,n,wu,i),Wu(t,e,wu)}(o,i,n)}}function Lu(e,t){var i=[],n=e,o=t,s=!1,a=1;return function e(t){i.push(t),(t!==o||1===a)&&(t<=n&&t>1&&!s?t=parseFloat((t-.2).toFixed(2)):1===t?(t=7,t=parseFloat((t+.2).toFixed(2)),s=!0):t<8&&s?8===(t=parseFloat((t+.2).toFixed(2)))&&(s=!1):t<=8&&!s&&(t=parseFloat((t-.2).toFixed(2))),++a,e(t))}(n),i}function Pu(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function Ou(e,t,i,n){var o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("id",t),o.setAttribute("class",i);var s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("class",Tu);var a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttribute("class",Au),e.insertBefore(o,e.firstChild),o.appendChild(s),o.appendChild(a)}function Bu(e,t,i,n){var o=document.createElementNS("http://www.w3.org/2000/svg","svg"),s=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("class",n),o.setAttribute("id",t),s.setAttribute("class",Tu),e.insertBefore(o,e.firstChild),o.appendChild(s)}function zu(e){!function(e,t,i,n,o,s,a){var r=++a.globalInfo[a.uniqueID].previousId,l=(new Date).getTime(),d=t-e,h=(u=2*a.globalInfo[a.uniqueID].radius+"",parseFloat(u)),p=Ru(h),c=-90*(a.globalInfo[a.uniqueID].count||0);var u;function f(t){var o=Math.max(0,Math.min((new Date).getTime()-l,n));g(i(o,e,d,n),t.container),r===t.globalInfo[t.uniqueID].previousId&&o<n?ru[t.uniqueID].timeOut=setTimeout(f.bind(null,t),1):zu(t)}function g(e,t){if(!m(t.querySelector("svg.e-spin-material"))&&!m(t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))){var i=t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle");i.setAttribute("stroke-dashoffset",_u(h,p,e,s)+""),i.setAttribute("transform","rotate("+c+" "+h/2+" "+h/2+")")}}f(a)}(1,149,Hu,1333,e.globalInfo[e.uniqueID].count,75,e),e.globalInfo[e.uniqueID].count=++e.globalInfo[e.uniqueID].count%4}function ju(e,t,i,n){var o=2*e,s=t.querySelector("svg."+n),a=s.querySelector("path.e-path-circle"),r=Ru(o),l=o/2+"px";s.setAttribute("viewBox","0 0 "+o+" "+o),s.style.width=s.style.height=o+"px",s.style.transformOrigin=l+" "+l+" "+l,a.setAttribute("d",function(e,t){var i=e/2,n=t/2;return"M"+i+","+n+"A"+(i-n)+","+(i-n)+" 0 1 1 "+n+","+i}(o,r)),"Material"===i&&(a.setAttribute("stroke-width",r+""),a.setAttribute("stroke-dasharray",(o-r)*Math.PI*.75+""),a.setAttribute("stroke-dashoffset",_u(o,r,1,75)+""))}function Ru(e){return.1*e}function _u(e,t,i,n){return(e-t)*Math.PI*(3*n/100-i/100)}function Hu(e,t,i,n){var o=(e/=n)*e,s=o*e;return t+i*(6*s*o+-15*o*o+10*s)}function Wu(e,t,i){var n=e,o=e,s=2*e,a=t.querySelector("."+i),r=a.querySelector(".e-path-circle"),l=a.querySelector(".e-path-arc"),d=s/2+"px";r.setAttribute("d",function(e,t,i){var n=["M",e,t,"m",-i,0,"a",i,i,0,1,0,2*i,0,"a",i,i,0,1,0,2*-i,0].join(" ");return n}(n,o,e)),l.setAttribute("d",function(e,t,i,n,o){var s=Uu(e,t,i,o),a=Uu(e,t,i,n),r=["M",s.x,s.y,"A",i,i,0,0,0,a.x,a.y].join(" ");return r}(n,o,e,315,45)),a.setAttribute("viewBox","0 0 "+s+" "+s),a.style.transformOrigin=d+" "+d+" "+d,a.style.width=a.style.height=s+"px"}function Uu(e,t,i,n){var o=(n-90)*Math.PI/180;return{x:e+i*Math.cos(o),y:t+i*Math.sin(o)}}function qu(e){Yu(e,!1),e=null}function Yu(e,t){var i;if(e&&(i=e.classList.contains(Mu)?e:e.querySelector("."+Mu)),e&&i){var n=i.querySelector("."+Iu);if(t?!i.classList.contains(Vu)&&!i.classList.contains(mu):!i.classList.contains(Vu)&&!i.classList.contains(fu)){var o=i.querySelector("svg");if(m(o))return;var s=o.getAttribute("id");switch(ru[""+s].isAnimate=!t,ru[""+s].type){case"Material":t?clearTimeout(ru[s].timeOut):function(e,t,i){var n={};ru[""+t].timeOut=0,n[""+t]=function(e,t,i,n){return{radius:t,count:0,previousId:0}}(0,i),zu({uniqueID:t,container:e,globalInfo:n,timeOutVar:0})}(n,s,ru[s].radius);break;case"Bootstrap":t?clearTimeout(ru[s].timeOut):function(e){for(var t=e.querySelector("svg.e-spin-bootstrap").getAttribute("id"),i=1;i<=8;i++)n(e.getElementsByClassName("e-path-circle_"+(8===i?0:i))[0],i,i,Lu(i,i),t);function n(e,t,i,n,o){var s=0;!function t(i){ru[""+o].isAnimate&&(++s,e.setAttribute("r",i+""),s>=n.length&&(s=0),ru[o].timeOut=setTimeout(t.bind(null,n[s]),18))}(t)}}(n)}}t?Pe(i,[mu],[fu]):Pe(i,[fu],[mu]),e=null}}function Qu(e){Yu(e,!0),e=null}var Zu="",Xu="",Gu=[],Ju="e-active",Ku="";function $u(e,t,i,n,o,s,a){var r=t;n=void 0===n||null===n||n;var l={item:null,index:null};if(e&&e.length){var d=e.length,h=n?e.toLocaleLowerCase():e;h=h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");for(var p=function(e,r){var p,c=r[e],u=void 0;if(t&&o){var f=c,m=s.text.split(".");o.filter((function(e){Array.prototype.slice.call(m).forEach((function(t){("object"===a&&-1!==f.textContent.toString().indexOf(e[t])&&f.getAttribute("data-value")===e[s.value].toString()||"string"===a&&-1!==f.textContent.toString().indexOf(e))&&(p="object"===a?e[t]:e)}))}))}if(u=o&&p?(n?p.toLocaleLowerCase():p).replace(/^\s+|\s+$/g,""):(n?c.textContent.toLocaleLowerCase():c.textContent).replace(/^\s+|\s+$/g,""),"Equal"===i&&u===h||"StartsWith"===i&&u.substr(0,d)===h||"EndsWith"===i&&u.substr(u.length-h.length)===h||"Contains"===i&&new RegExp(h,"g").test(u))return l.item=c,l.index=e,{value:{item:c,index:e}}},c=0,u=r;c<u.length;c++){var f=p(c,u);if("object"===typeof f)return f.value}return l}return l}var ef=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),tf=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},nf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ef(t,e),tf([Ge()],t.prototype,"text",void 0),tf([Ge()],t.prototype,"value",void 0),tf([Ge()],t.prototype,"iconCss",void 0),tf([Ge()],t.prototype,"groupBy",void 0),tf([Ge()],t.prototype,"htmlAttributes",void 0),t}(mt),of="e-dropdownbase",sf="e-rtl",af="e-content",rf="e-active",lf="e-hover",df="e-nodata",hf="e-fixed-head",pf="e-item-focus",cf="e-list-item",uf="e-list-group-item",ff="e-disabled",mf="e-dd-group",gf=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.preventChange=!1,n.isAngular=!1,n.isPreventChange=!1,n.isDynamicDataChange=!1,n.addedNewItem=!1,n}return ef(t,e),t.prototype.getPropObject=function(e,t,i){var n=new Object,o=new Object;n[e]=t[e],o[e]=i[e];var s=new Object;return s.newProperty=n,s.oldProperty=o,s},t.prototype.getValueByText=function(e,t,i){var n=null;return m(this.listData)||(n=t?this.checkValueCase(e,!0,i):this.checkValueCase(e,!1,i)),n},t.prototype.checkValueCase=function(e,t,i,n){var o=this,s=null;n&&(s=e);var a=this.listData,r=this.fields,d=this.typeOfData(a).typeof;if("string"===d||"number"===d||"boolean"===d)for(var h=0,p=a;h<p.length;h++){var c=p[h];m(c)||(i?s=this.checkingAccent(String(c),e,t):t?this.checkIgnoreCase(String(c),e)&&(s=this.getItemValue(String(c),e,t)):this.checkNonIgnoreCase(String(c),e)&&(s=this.getItemValue(String(c),e,t,n)))}else if(t)a.filter((function(t){!m(l(r.value,t))&&o.checkIgnoreCase(l(r.text,t).toString(),e)&&(s=l(r.value,t))}));else if(n){var u=null;u=s,a.filter((function(e){var t=l(r.value,e);m(t)||m(s)||t.toString()!==u.toString()||(s=l(r.text,e))}))}else a.filter((function(t){o.checkNonIgnoreCase(l(r.text,t),e)&&(s=l(r.value,t))}));return s},t.prototype.checkingAccent=function(e,t,i){var n=Ol.ignoreDiacritics(String(e)),o=Ol.ignoreDiacritics(t.toString()),s=null;return i?this.checkIgnoreCase(n,o)&&(s=this.getItemValue(String(e),t,i)):this.checkNonIgnoreCase(String(e),t)&&(s=this.getItemValue(String(e),t,i)),s},t.prototype.checkIgnoreCase=function(e,t){return String(e).toLowerCase()===t.toString().toLowerCase()},t.prototype.checkNonIgnoreCase=function(e,t){return String(e)===t.toString()},t.prototype.getItemValue=function(e,t,i,n){var o=this.listData,s=this.typeOfData(o).typeof;return n?e.toString():i?"string"===s?String(e):this.getFormattedValue(String(e)):"string"===s?t:this.getFormattedValue(t)},t.prototype.templateCompiler=function(e){var t=!1;if(e)try{t=!!De(e,document).length}catch(i){t=!1}return t},t.prototype.l10nUpdate=function(e){var t="listbox"===this.getModuleName()?this.ulElement:this.list;if("No records found"!==this.noRecordsTemplate||"Request failed"!==this.actionFailureTemplate){var i=e?this.actionFailureTemplate:this.noRecordsTemplate,n=e?this.actionFailureTemplateId:this.noRecordsTemplateId;t.innerHTML="";var o=Mi(this.templateCompiler(i)?Ee(i,document).innerHTML.trim():i)({},this,e?"actionFailureTemplate":"noRecordsTemplate",n,this.isStringTemplate,null,t);if(o&&o.length>0)for(var s=0;s<o.length;s++)t.appendChild(o[s]);this.renderReactTemplates()}else{var a=new qt(this.getLocaleName(),{},this.locale);""!==a.getConstant("actionFailureTemplate")?this.l10n=a:this.l10n=new qt("listbox"===this.getModuleName()?"listbox":"mention"===this.getModuleName()?"mention":"dropdowns",{noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed"},this.locale);var r=e?this.l10n.getConstant("actionFailureTemplate"):this.l10n.getConstant("noRecordsTemplate");if("listbox"===this.getModuleName()){var l=this.createElement("li");l.textContent=r,t.appendChild(l),l.classList.add("e-list-nrt"),l.setAttribute("role","option")}else m(t)||(t.innerHTML=r)}},t.prototype.getLocaleName=function(){return"drop-down-base"},t.prototype.getTextByValue=function(e){return this.checkValueCase(e,!1,!1,!0)},t.prototype.getFormattedValue=function(e){if(this.listData&&this.listData.length){var t=this.typeOfData(this.listData);if("number"===typeof l(this.fields.value?this.fields.value:"value",t.item)||"number"===t.typeof)return parseFloat(e);if("boolean"===typeof l(this.fields.value?this.fields.value:"value",t.item)||"boolean"===t.typeof)return"true"===e||""+e==="true"}return e},t.prototype.setEnableRtl=function(){m(this.enableRtlElements)||(this.list&&this.enableRtlElements.push(this.list),this.enableRtl?be(this.enableRtlElements,sf):Se(this.enableRtlElements,sf))},t.prototype.initialize=function(e){if(this.bindEvent=!0,this.actionFailureTemplateId=this.element.id+"ActionFailureTemplate","UL"===this.element.tagName){var t=bl.createJsonFromElement(this.element);this.setProperties({fields:{text:"text",value:"text"}},!0),this.resetList(t,this.fields)}else if("SELECT"===this.element.tagName){(this.dataSource instanceof Array?this.dataSource.length>0:!m(this.dataSource))?this.isDynamicDataChange&&this.setListData(this.dataSource,this.fields,this.query):this.renderItemsBySelect()}else this.setListData(this.dataSource,this.fields,this.query,e)},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.updateDataAttribute=function(e){for(var t=["class","style","id","type","aria-expanded","aria-autocomplete","aria-readonly"],i={},n=0;n<this.element.attributes.length;n++)-1!==t.indexOf(this.element.attributes[n].name)||"dropdownlist"===this.getModuleName()&&"readonly"===this.element.attributes[n].name||(i[this.element.attributes[n].name]=this.element.getAttribute(this.element.attributes[n].name));f(i,e,i),this.setProperties({htmlAttributes:i},!0)},t.prototype.renderItemsBySelect=function(){var e=this.element,t={value:"value",text:"text"},i=[],n=e.querySelectorAll("select>optgroup"),o=e.querySelectorAll("select>option");if(this.getJSONfromOption(i,o,t),n.length){for(var s=0;s<n.length;s++){var a=n[s],r={};r[t.text]=a.label,r.isHeader=!0;var l=a.querySelectorAll("option");i.push(r),this.getJSONfromOption(i,l,t)}e.querySelectorAll("select>option")}this.updateFields(t.text,t.value,this.fields.groupBy,this.fields.htmlAttributes,this.fields.iconCss),this.resetList(i,t)},t.prototype.updateFields=function(e,t,i,n,o){var s={fields:{text:e,value:t,groupBy:m(i)?this.fields&&this.fields.groupBy:i,htmlAttributes:m(n)?this.fields&&this.fields.htmlAttributes:n,iconCss:m(o)?this.fields&&this.fields.iconCss:o}};this.setProperties(s,!0)},t.prototype.getJSONfromOption=function(e,t,i){for(var n=0,o=t;n<o.length;n++){var s=o[n],a={};a[i.text]=s.innerText,a[i.value]=m(s.getAttribute(i.value))?s.innerText:s.getAttribute(i.value),e.push(a)}},t.prototype.preRender=function(){this.scrollTimer=-1,this.enableRtlElements=[],this.isRequested=!1,this.isDataFetched=!1,this.itemTemplateId=this.element.id+"ItemTemplate",this.displayTemplateId=this.element.id+"DisplayTemplate",this.spinnerTemplateId=this.element.id+"SpinnerTemplate",this.valueTemplateId=this.element.id+"ValueTemplate",this.groupTemplateId=this.element.id+"GroupTemplate",this.headerTemplateId=this.element.id+"HeaderTemplate",this.footerTemplateId=this.element.id+"FooterTemplate",this.noRecordsTemplateId=this.element.id+"NoRecordsTemplate"},t.prototype.setListData=function(e,t,i,n){var o,s=this;t=t||this.fields,this.isActive=!0;var a={cancel:!1,data:e,query:i};this.isPreventChange=!(!this.isAngular||!this.preventChange)||this.isPreventChange,this.trigger("actionBegin",a,(function(i){if(!i.cancel)if(s.showSpinner(),e instanceof Fl){if(s.isRequested=!0,s.isDataFetched)return void s.emptyDataRequest(t);i.data.executeQuery(s.getQuery(i.query)).then((function(e){s.isPreventChange=!(!s.isAngular||!s.preventChange)||s.isPreventChange,s.trigger("actionComplete",e,(function(e){if(!e.cancel){var i=e.result;0===i.length&&(s.isDataFetched=!0),o=s.renderItems(i,t),s.onActionComplete(o,i,e),s.groupTemplate&&s.renderGroupTemplate(o),s.isRequested=!1,s.bindChildItems(i,o,t,e)}}))})).catch((function(e){s.isRequested=!1,s.onActionFailure(e),s.hideSpinner()}))}else{var a=new Fl(i.data),r={cancel:!1,result:s.getQuery(i.query).executeLocal(a)};s.isPreventChange=!(!s.isAngular||!s.preventChange)||s.isPreventChange,s.trigger("actionComplete",r,(function(e){e.cancel||(o=s.renderItems(e.result,t),s.onActionComplete(o,e.result,n),s.groupTemplate&&s.renderGroupTemplate(o),s.bindChildItems(e.result,o,t),setTimeout((function(){"multiselect"===s.getModuleName()&&null!=s.itemTemplate&&o.childElementCount>0&&(o.children[0].childElementCount>0||s.fields.groupBy&&o.children[1]&&o.children[1].childElementCount>0)&&s.updateDataList()})))}))}}))},t.prototype.bindChildItems=function(e,t,i,n){var o=this;e.length>=100&&"autocomplete"===this.getModuleName()?setTimeout((function(){Ie(o.remainingItems(o.sortedData,i),t),o.liCollections=o.list.querySelectorAll("."+cf),o.updateListValues(),o.raiseDataBound(e,n)}),0):this.raiseDataBound(e,n)},t.prototype.updateListValues=function(){},t.prototype.findListElement=function(e,t,i,n){var o=null;if(e)for(var s=[].slice.call(e.querySelectorAll(t)),a=0;a<s.length;a++)if(s[a].getAttribute(i)===n+""){o=s[a];break}return o},t.prototype.raiseDataBound=function(e,t){this.hideSpinner();var i={items:e,e:t};this.trigger("dataBound",i)},t.prototype.remainingItems=function(e,t){var i=new Fl(e).executeLocal((new Bl).skip(100));if(this.itemTemplate){var n=this.templateListItem(i,t);return[].slice.call(n.childNodes)}var o=this.typeOfData(i).typeof;return"string"===o||"number"===o||"boolean"===o?bl.createListItemFromArray(this.createElement,i,!0,this.listOption(i,t),this):bl.createListItemFromJson(this.createElement,i,this.listOption(i,t),1,!0,this)},t.prototype.emptyDataRequest=function(e){var t=[];this.onActionComplete(this.renderItems(t,e),t),this.isRequested=!1,this.hideSpinner()},t.prototype.showSpinner=function(){},t.prototype.hideSpinner=function(){},t.prototype.onActionFailure=function(e){this.liCollections=[],this.trigger("actionFailure",e),this.l10nUpdate(!0),m(this.list)||be([this.list],df)},t.prototype.onActionComplete=function(e,t,i){if(this.listData=t,this.isReact&&this.clearTemplate(["itemTemplate","groupTemplate","actionFailureTemplate","noRecordsTemplate"]),this.fixedHeaderElement=m(this.fixedHeaderElement)?this.fixedHeaderElement:null,"multiselect"===this.getModuleName()&&this.properties.allowCustomValue&&this.fields.groupBy)for(var n=0;n<e.childElementCount;n++)e.children[n].classList.contains("e-list-group-item")&&(m(e.children[n].innerHTML)||""==e.children[n].innerHTML)&&be([e.children[n]],"e-hide-group-header");m(this.list)||(this.list.innerHTML="",this.list.appendChild(e),this.liCollections=this.list.querySelectorAll("."+cf),this.ulElement=this.list.querySelector("ul"),this.postRender(this.list,t,this.bindEvent))},t.prototype.postRender=function(e,t,i){var n=e.querySelector("."+cf),o=e.querySelector("."+rf);n&&!o&&n.classList.add(pf),t.length<=0?(this.l10nUpdate(),be([e],df)):e.classList.remove(df)},t.prototype.getQuery=function(e){return e||(this.query?this.query:new Bl)},t.prototype.renderGroupTemplate=function(e){if(null!==this.fields.groupBy&&this.dataSource||this.element.querySelector("."+uf)){var t=this.dataSource,i={groupTemplateID:this.groupTemplateId,isStringTemplate:this.isStringTemplate},n=e.querySelectorAll("."+uf);if(this.templateCompiler(this.groupTemplate)){var o=Ee(this.groupTemplate,document).innerHTML.trim(),s=bl.renderGroupTemplate(o,t,this.fields.properties,n,i,this);if(this.isGroupChecking)for(var a=0;a<s.length;a++)this.notify("addItem",{module:"CheckBoxSelection",item:s[a]})}else{s=bl.renderGroupTemplate(this.groupTemplate,t,this.fields.properties,n,i,this);if(this.isGroupChecking)for(a=0;a<s.length;a++)this.notify("addItem",{module:"CheckBoxSelection",item:s[a]})}this.renderReactTemplates()}},t.prototype.createListItems=function(e,t){e&&t.groupBy||this.element.querySelector("optgroup")?(t.groupBy&&("None"!==this.sortOrder&&(e=this.getSortedDataSource(e)),e=bl.groupDataSource(e,t.properties,this.sortOrder)),be([this.list],mf)):e=this.getSortedDataSource(e);var i=this.listOption(e,t),n=e.length>100?new Fl(e).executeLocal((new Bl).take(100)):e;return this.sortedData=e,bl.createList(this.createElement,"autocomplete"===this.getModuleName()?n:e,i,!0,this)},t.prototype.listOption=function(e,t){var i=!m(t.iconCss),n=m(t.properties)?t:t.properties;return f({},null!==t.text||null!==t.value?{fields:n,showIcon:i,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}},t,!0)},t.prototype.setFloatingHeader=function(e){m(this.list)||this.list.classList.contains(df)||(m(this.fixedHeaderElement)&&(this.fixedHeaderElement=this.createElement("div",{className:hf}),m(this.list)||this.list.querySelector("li").classList.contains(uf)||(this.fixedHeaderElement.style.display="none"),m(this.fixedHeaderElement)||m(this.list)||Me([this.fixedHeaderElement],this.list),this.setFixedHeader()),m(this.fixedHeaderElement)||"0"!==this.fixedHeaderElement.style.zIndex||this.setFixedHeader(),this.scrollStop(e))},t.prototype.scrollStop=function(e){for(var t=m(e)?this.list:e.target,i=parseInt(getComputedStyle(this.getValidLi(),null).getPropertyValue("height"),10),n=Math.round(t.scrollTop/i),o=this.list.querySelectorAll("li:not(.e-hide-listitem)"),s=n;s>-1;s--){if(!m(o[s])&&o[s].classList.contains(uf)){var a=o[s];this.fixedHeaderElement.innerHTML=a.innerHTML,this.fixedHeaderElement.style.top=t.scrollTop+"px",this.fixedHeaderElement.style.display="block";break}this.fixedHeaderElement.style.display="none",this.fixedHeaderElement.style.top="none"}},t.prototype.getValidLi=function(){return this.liCollections[0]},t.prototype.renderItems=function(e,t){var i;if(this.itemTemplate&&e){var n=e;n&&t.groupBy?("None"!==this.sortOrder&&(n=this.getSortedDataSource(n)),n=bl.groupDataSource(n,t.properties,this.sortOrder)):n=this.getSortedDataSource(n),this.sortedData=n;var o=n.length>100?new Fl(n).executeLocal((new Bl).take(100)):n;i=this.templateListItem("autocomplete"===this.getModuleName()?o:n,t)}else i=this.createListItems(e,t);return i},t.prototype.templateListItem=function(e,t){var i=this.listOption(e,t);if(i.templateID=this.itemTemplateId,i.isStringTemplate=this.isStringTemplate,this.templateCompiler(this.itemTemplate)){var n=Ee(this.itemTemplate,document).innerHTML.trim();return bl.renderContentTemplate(this.createElement,n,e,t.properties,i,this)}return bl.renderContentTemplate(this.createElement,this.itemTemplate,e,t.properties,i,this)},t.prototype.typeOfData=function(e){for(var t={typeof:null,item:null},i=0;!m(e)&&i<e.length;i++){if(!m(e[i]))if(!m("string"===typeof e[i]||"number"===typeof e[i]||"boolean"===typeof e[i]?e[i]:l(this.fields.value?this.fields.value:"value",e[i])))return{typeof:typeof e[i],item:e[i]}}return t},t.prototype.setFixedHeader=function(){m(this.list)||(this.list.parentElement.style.display="block");var e=0;this.list&&this.list.parentElement&&(e=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-width"),10),isNaN(e)&&(e=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-top-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-bottom-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-left-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-right-width"),10)));if(!m(this.liCollections)){var t=this.getValidLi().offsetWidth-e;this.fixedHeaderElement.style.width=t.toString()+"px"}Le(this.fixedHeaderElement,{zIndex:10});var i=this.ulElement.querySelector("."+uf+":not(.e-hide-listitem)");this.fixedHeaderElement.innerHTML=i.innerHTML},t.prototype.getSortedDataSource=function(e){if(e&&"None"!==this.sortOrder){var t=this.fields.text?this.fields.text:"text";"string"!==this.typeOfData(e).typeof&&"number"!==this.typeOfData(e).typeof&&"boolean"!==this.typeOfData(e).typeof||(t=""),e=bl.getDataSource(e,bl.addSorting(this.sortOrder,t))}return e},t.prototype.getIndexByValue=function(e){for(var t,i=this.getItems(),n=0;n<i.length;n++)if(!m(e)&&i[n].getAttribute("data-value")===e.toString()){t=n;break}return t},t.prototype.dispatchEvent=function(e,t){var i=document.createEvent("HTMLEvents");i.initEvent(t,!1,!0),e.dispatchEvent(i)},t.prototype.setFields=function(){this.fields.value&&!this.fields.text?this.updateFields(this.fields.value,this.fields.value):!this.fields.value&&this.fields.text?this.updateFields(this.fields.text,this.fields.text):this.fields.value||this.fields.text||this.updateFields("text","text")},t.prototype.resetList=function(e,t,i,n){if(this.list){if("SELECT"===this.element.tagName&&this.element.options.length>0||"UL"===this.element.tagName&&this.element.childNodes.length>0)!(e instanceof Array?e.length>0:!m(e))&&this.selectData&&this.selectData.length>0&&(e=this.selectData);e="combobox"===this.getModuleName()&&this.selectData&&e instanceof Array&&e.length<this.selectData.length&&this.addedNewItem?this.selectData:e,this.addedNewItem=!1,this.setListData(e,t,i,n)}},t.prototype.updateSelectElementData=function(e){e&&m(this.selectData)&&this.listData&&this.listData.length>0&&(this.selectData=this.listData)},t.prototype.updateSelection=function(){},t.prototype.renderList=function(){this.render()},t.prototype.updateDataSource=function(e){this.resetList(this.dataSource)},t.prototype.setUpdateInitial=function(e,t){this.isDataFetched=!1;for(var i={},n=0;e.length>n;n++)t[e[n]]&&"fields"===e[n]?(this.setFields(),i[e[n]]=t[e[n]]):t[e[n]]&&(i[e[n]]=t[e[n]]);Object.keys(i).length>0&&(-1===Object.keys(i).indexOf("dataSource")&&(i.dataSource=this.dataSource),this.updateDataSource(i))},t.prototype.onPropertyChanged=function(e,t){"dropdownbase"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],e),this.setUpdateInitial(["sortOrder","itemTemplate"],e);for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"query":case"sortOrder":case"dataSource":case"itemTemplate":break;case"enableRtl":this.setEnableRtl();break;case"groupTemplate":if(this.renderGroupTemplate(this.list),this.ulElement&&this.fixedHeaderElement){var o=this.ulElement.querySelector("."+uf);this.fixedHeaderElement.innerHTML=o.innerHTML}break;case"locale":this.list&&!m(this.liCollections)&&0===this.liCollections.length&&this.l10nUpdate();break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0),this.setZIndex()}}},t.prototype.render=function(e,t){this.list=this.createElement("div",{className:af,attrs:{tabindex:"0"}}),this.list.classList.add(of),this.setFields();var i={duration:300,selector:"."+cf};this.rippleFun=at(this.list,i);var n=this.element.querySelector("select>optgroup");if(!this.fields.groupBy&&m(n)||this.isGroupChecking||ye.add(this.list,"scroll",this.setFloatingHeader,this),"dropdownbase"===this.getModuleName()){this.element.getAttribute("tabindex")&&this.list.setAttribute("tabindex",this.element.getAttribute("tabindex")),Se([this.element],of),this.element.style.display="none";var o=this.createElement("div");this.element.parentElement.insertBefore(o,this.element),o.appendChild(this.element),o.appendChild(this.list)}this.setEnableRtl(),t||this.initialize(e)},t.prototype.getModuleName=function(){return"dropdownbase"},t.prototype.getItems=function(){return this.ulElement.querySelectorAll("."+cf)},t.prototype.addItem=function(e,t){if((!this.list||this.list.textContent===this.noRecordsTemplate&&"listbox"!==this.getModuleName())&&this.renderList(),"None"!==this.sortOrder&&m(t)){var i=[].slice.call(this.listData);i.push(e),i=this.getSortedDataSource(i),t=this.fields.groupBy?(i=bl.groupDataSource(i,this.fields.properties,this.sortOrder)).indexOf(e):i.indexOf(e)}var n,o=this.getItems().length,s=this.list.querySelector("."+rf);e=e instanceof Array?e:[e],n=m(t)||t<0||t>o-1?o:t;var a=this.fields;e&&a.groupBy&&(e=bl.groupDataSource(e,a.properties));for(var r=[],d=0;d<e.length;d++){var h=e[d],p=h.isHeader,c=this.createElement("li",{className:p?uf:cf,id:"option-add-"+d}),u=h instanceof Object?l(a.text,h):h;if(p&&(c.innerText=u),this.itemTemplate&&!p){var f=Mi(this.templateCompiler(this.itemTemplate)?Ee(this.itemTemplate,document).innerHTML.trim():this.itemTemplate)(h,this,"itemTemplate",this.itemTemplateId,this.isStringTemplate,null,c);f&&Ie(f,c)}else p||c.appendChild(document.createTextNode(u));c.setAttribute("data-value",h instanceof Object?l(a.value,h):h),c.setAttribute("role","option"),this.notify("addItem",{module:"CheckBoxSelection",item:c}),r.push(c),this.listData.push(h),"None"===this.sortOrder&&m(t)&&0===n&&(n=null),this.updateActionCompleteData(c,h,n),this.trigger("beforeItemRender",{element:c,item:h})}if(0===o&&m(this.list.querySelector("ul")))m(this.list)||(this.list.innerHTML="",this.list.classList.remove(df),m(this.ulElement)||this.list.appendChild(this.ulElement)),this.liCollections=r,m(r)||m(this.ulElement)||Ie(r,this.ulElement),this.updateAddItemList(this.list,o);else{"listbox"===this.getModuleName()&&0===o&&(this.ulElement.innerHTML="");var g=[];for(d=0;d<e.length;d++){for(var y=this.ulElement.querySelectorAll(".e-list-group-item"),v=0;v<y.length;v++)g[v]=y[v].innerText;if(g.indexOf(r[d].innerText)>-1&&a.groupBy){for(v=0;v<y.length;v++)if(g[v]===r[d].innerText){"None"===this.sortOrder?this.ulElement.insertBefore(r[d+1],y[v+1]):this.ulElement.insertBefore(r[d+1],this.ulElement.childNodes[t]),d+=1;break}}else this.liCollections[n]?this.liCollections[n].parentNode.insertBefore(r[d],this.liCollections[n]):this.ulElement.appendChild(r[d]);var w=[].slice.call(this.liCollections);w.splice(n,0,r[d]),this.liCollections=w,n+=1,"multiselect"===this.getModuleName()&&this.updateDataList()}}(s||0===t)&&this.updateSelection(),this.addedNewItem=!0},t.prototype.validationAttribute=function(e,t){var i=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");t.setAttribute("name",i),e.removeAttribute("name");for(var n=["required","aria-required","form"],o=0;o<n.length;o++)if(e.getAttribute(n[o])){var s=e.getAttribute(n[o]);t.setAttribute(n[o],s),e.removeAttribute(n[o])}},t.prototype.setZIndex=function(){},t.prototype.updateActionCompleteData=function(e,t,i){},t.prototype.updateAddItemList=function(e,t){},t.prototype.updateDataList=function(){},t.prototype.getDataByValue=function(e){if(!m(this.listData)){var t=this.typeOfData(this.listData).typeof;if("string"===t||"number"===t||"boolean"===t)for(var i=0,n=this.listData;i<n.length;i++){if(!m(a=n[i])&&a===e)return a}else for(var o=0,s=this.listData;o<s.length;o++){var a;if(!m(a=s[o])&&l(this.fields.value?this.fields.value:"value",a)===e)return a}}return null},t.prototype.destroy=function(){document.body.contains(this.list)&&(ye.remove(this.list,"scroll",this.setFloatingHeader),m(this.rippleFun)||this.rippleFun(),Ae(this.list)),this.liCollections=null,this.ulElement=null,this.list=null,this.enableRtlElements=null,this.rippleFun=null,e.prototype.destroy.call(this)},tf([Je({text:null,value:null,iconCss:null,groupBy:null},nf)],t.prototype,"fields",void 0),tf([Ge(null)],t.prototype,"itemTemplate",void 0),tf([Ge(null)],t.prototype,"groupTemplate",void 0),tf([Ge("No records found")],t.prototype,"noRecordsTemplate",void 0),tf([Ge("Request failed")],t.prototype,"actionFailureTemplate",void 0),tf([Ge("None")],t.prototype,"sortOrder",void 0),tf([Ge([])],t.prototype,"dataSource",void 0),tf([Ge(null)],t.prototype,"query",void 0),tf([Ge("StartsWith")],t.prototype,"filterType",void 0),tf([Ge(!0)],t.prototype,"ignoreCase",void 0),tf([Ge(1e3)],t.prototype,"zIndex",void 0),tf([Ge(!1)],t.prototype,"ignoreAccent",void 0),tf([Ge()],t.prototype,"locale",void 0),tf([$e()],t.prototype,"actionBegin",void 0),tf([$e()],t.prototype,"actionComplete",void 0),tf([$e()],t.prototype,"actionFailure",void 0),tf([$e()],t.prototype,"select",void 0),tf([$e()],t.prototype,"dataBound",void 0),tf([$e()],t.prototype,"created",void 0),tf([$e()],t.prototype,"destroyed",void 0),t=tf([et],t)}(Dt),yf=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),vf=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},wf={root:"e-dropdownlist",hover:lf,selected:rf,rtl:sf,li:cf,disable:ff,base:of,focus:pf,input:"e-input-group",inputFocus:"e-input-focus",icon:"e-input-group-icon e-ddl-icon",iconAnimation:"e-icon-anim",value:"e-input-value",device:"e-ddl-device",backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",mobileFilter:"e-ddl-device-filter",footer:"e-ddl-footer",header:"e-ddl-header",clearIcon:"e-clear-icon",clearIconHide:"e-clear-icon-hide",popupFullScreen:"e-popup-full-page",disableIcon:"e-ddl-disable-icon",hiddenElement:"e-ddl-hidden"},bf={container:null,buttons:[]},Sf=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.isListSearched=!1,n.preventChange=!1,n.isAngular=!1,n}return yf(t,e),t.prototype.preRender=function(){this.valueTempElement=null,this.element.style.opacity="0",this.initializeData(),e.prototype.preRender.call(this),this.activeIndex=this.index,this.queryString=""},t.prototype.initializeData=function(){this.isPopupOpen=!1,this.isDocumentClick=!1,this.isInteracted=!1,this.isFilterFocus=!1,this.beforePopupOpen=!1,this.initial=!0,this.initRemoteRender=!1,this.isNotSearchList=!1,this.isTyped=!1,this.isSelected=!1,this.preventFocus=!1,this.preventAutoFill=!1,this.isValidKey=!1,this.typedString="",this.isEscapeKey=!1,this.isPreventBlur=!1,this.isTabKey=!1,this.actionCompleteData={isUpdated:!1},this.actionData={isUpdated:!1},this.prevSelectPoints={},this.isSelectCustom=!1,this.isDropDownClick=!1,this.preventAltUp=!1,this.isCustomFilter=!1,this.isSecondClick=!1,this.previousValue=null,this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"}},t.prototype.setZIndex=function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})},t.prototype.renderList=function(t,i){e.prototype.render.call(this,t,i),this.unWireListEvents(),this.wireListEvents()},t.prototype.floatLabelChange=function(){if("dropdownlist"===this.getModuleName()&&"Auto"===this.floatLabelType){var e=this.inputWrapper.container.querySelector(".e-float-text");""!==this.inputElement.value||this.isInteracted?Pe(e,["e-label-top"],["e-label-bottom"]):Pe(e,["e-label-bottom"],["e-label-top"])}},t.prototype.resetHandler=function(e){e.preventDefault(),this.clearAll(e)},t.prototype.resetFocusElement=function(){if(this.removeHover(),this.removeSelection(),this.removeFocus(),this.list.scrollTop=0,"autocomplete"!==this.getModuleName()&&!m(this.ulElement)){var e=this.ulElement.querySelector("."+wf.li);e&&e.classList.add(wf.focus)}},t.prototype.clearAll=function(e,t){this.previousItemData=m(this.itemData)?null:this.itemData,!m(t)&&(m(t)||!m(t.dataSource)&&(t.dataSource instanceof Fl||0!==t.dataSource.length))||(this.isActive=!0,this.resetSelection(t));var i=this.getItemData();this.previousValue!==i.value&&this.onChangeEvent(e)},t.prototype.resetSelection=function(e){this.list&&(m(e)||!m(e.dataSource)&&(e.dataSource instanceof Fl||0!==e.dataSource.length)?(this.allowFiltering&&"autocomplete"!==this.getModuleName()&&!m(this.actionCompleteData.ulElement)&&!m(this.actionCompleteData.list)&&this.actionCompleteData.list.length>0&&this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(!0),this.actionCompleteData.list),this.resetFocusElement()):(this.selectedLI=null,this.actionCompleteData.isUpdated=!1,this.actionCompleteData.ulElement=null,this.actionCompleteData.list=null,this.resetList(e.dataSource))),m(this.hiddenElement)||(this.hiddenElement.innerHTML=""),m(this.inputElement)||(this.inputElement.value=""),this.value=null,this.itemData=null,this.text=null,this.index=null,this.activeIndex=null,this.item=null,this.queryString="",this.valueTempElement&&(Ae(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null),this.setSelection(null,null),this.isSelectCustom=!1,this.updateIconState(),this.cloneElements()},t.prototype.setHTMLAttributes=function(){if(Object.keys(this.htmlAttributes).length)for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if("class"===i){var n=this.htmlAttributes[""+i].replace(/\s+/g," ").trim();""!==n&&be([this.inputWrapper.container],n.split(" "))}else if("disabled"===i&&"disabled"===this.htmlAttributes[""+i])this.enabled=!1,this.setEnable();else if("readonly"!==i||m(this.htmlAttributes[""+i]))if("style"===i)this.inputWrapper.container.setAttribute("style",this.htmlAttributes[""+i]);else{var o=["title","id","placeholder","role","autocomplete","autocapitalize","spellcheck","minlength","maxlength"];"autocomplete"!==this.getModuleName()&&"combobox"!==this.getModuleName()||o.push("tabindex"),["name","required"].indexOf(i)>-1||0===i.indexOf("data")?this.hiddenElement.setAttribute(i,this.htmlAttributes[""+i]):o.indexOf(i)>-1?"placeholder"===i?rs.setPlaceholder(this.htmlAttributes[""+i],this.inputElement):this.inputElement.setAttribute(i,this.htmlAttributes[""+i]):this.inputWrapper.container.setAttribute(i,this.htmlAttributes[""+i])}else this.readonly=!0,this.dataBind()}"autocomplete"!==this.getModuleName()&&"combobox"!==this.getModuleName()||this.inputWrapper.container.removeAttribute("tabindex")},t.prototype.getAriaAttributes=function(){return{"aria-disabled":"false",role:"combobox","aria-expanded":"false","aria-live":"polite","aria-labelledby":this.hiddenElement.id}},t.prototype.setEnableRtl=function(){rs.setEnableRtl(this.enableRtl,[this.inputElement.parentElement]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())},t.prototype.setEnable=function(){rs.setEnabled(this.enabled,this.inputElement),this.enabled?(Se([this.inputWrapper.container],wf.disable),this.inputElement.setAttribute("aria-disabled","false"),this.targetElement().setAttribute("tabindex",this.tabIndex)):(this.hidePopup(),be([this.inputWrapper.container],wf.disable),this.inputElement.setAttribute("aria-disabled","true"),this.targetElement().tabIndex=-1)},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.getLocaleName=function(){return"drop-down-list"},t.prototype.preventTabIndex=function(e){"dropdownlist"===this.getModuleName()&&(e.tabIndex=-1)},t.prototype.targetElement=function(){return m(this.inputWrapper)?null:this.inputWrapper.container},t.prototype.getNgDirective=function(){return"EJS-DROPDOWNLIST"},t.prototype.getElementByText=function(e){return this.getElementByValue(this.getValueByText(e))},t.prototype.getElementByValue=function(e){for(var t,i=0,n=this.getItems();i<n.length;i++){var o=n[i];if(this.getFormattedValue(o.getAttribute("data-value"))===e){t=o;break}}return t},t.prototype.initValue=function(){this.renderList(),this.dataSource instanceof Fl?this.initRemoteRender=!0:this.updateValues()},t.prototype.updateValues=function(){if(m(this.value))if(this.text&&m(this.value)){var e=this.getElementByText(this.text);if(m(e))return void this.setProperties({text:null});this.setSelection(e,null)}else this.setSelection(this.liCollections[this.activeIndex],null);else this.setSelection(this.getElementByValue(this.value),null);this.setHiddenValue(),rs.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.onBlurHandler=function(e){if(this.enabled){var t=e.relatedTarget,i=e.target,n=this.isPreventBlur;this.isPreventBlur=!1,!n||this.isDocumentClick||!this.isPopupOpen||m(i)&&(this.isFilterLayout()||!m(t))?this.isDocumentClick||!m(this.popupObj)&&document.body.contains(this.popupObj.element)&&this.popupObj.element.classList.contains(wf.mobileFilter)?this.beforePopupOpen||(this.isDocumentClick=!1):(("dropdownlist"===this.getModuleName()&&!this.isFilterFocus&&t!==this.inputElement&&(document.activeElement!==t||document.activeElement===t&&i.classList.contains(wf.inputFocus))||m(t)&&"dropdownlist"===this.getModuleName()&&this.allowFiltering&&i!==this.inputWrapper.container||"dropdownlist"!==this.getModuleName()&&!this.inputWrapper.container.contains(t)||this.isTabKey)&&(this.isDocumentClick=!!this.isPopupOpen,this.focusOutAction(e),this.isTabKey=!1),!this.isRequested||this.isPopupOpen||this.isPreventBlur||(this.isActive=!1,this.beforePopupOpen=!1)):"dropdownlist"===this.getModuleName()&&this.allowFiltering&&this.isPopupOpen?this.filterInput.focus():this.targetElement().focus()}},t.prototype.focusOutAction=function(e){this.isInteracted=!1,this.focusOut(e),this.onFocusOut()},t.prototype.onFocusOut=function(){this.enabled&&(this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(null)),this.floatLabelChange(),this.dispatchEvent(this.hiddenElement,"change"),"dropdownlist"===this.getModuleName()&&"INPUT"!==this.element.tagName&&this.dispatchEvent(this.inputElement,"blur"),this.inputWrapper.clearButton&&be([this.inputWrapper.clearButton],wf.clearIconHide),this.trigger("blur"))},t.prototype.onFocus=function(e){if(!this.isInteracted){this.isInteracted=!0;var t={isInteracted:!!e,event:e};this.trigger("focus",t)}this.updateIconState()},t.prototype.resetValueHandler=function(e){var t=Fe(this.inputElement,"form");if(t&&e.target===t){var i=this.element.tagName===this.getNgDirective()?null:this.inputElement.getAttribute("value");this.text=i}},t.prototype.wireEvent=function(){ye.add(this.inputWrapper.container,"mousedown",this.dropDownClick,this),ye.add(this.inputWrapper.container,"focus",this.focusIn,this),ye.add(this.inputWrapper.container,"keypress",this.onSearch,this),this.bindCommonEvent()},t.prototype.bindCommonEvent=function(){ye.add(this.targetElement(),"blur",this.onBlurHandler,this);var e=Fe(this.inputElement,"form");e&&ye.add(e,"reset",this.resetValueHandler,this),ge.isDevice?this.keyboardModule=new Ut(this.targetElement(),{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}):this.keyboardModule=new Ut(this.targetElement(),{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.bindClearEvent()},t.prototype.bindClearEvent=function(){this.showClearButton&&ye.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this)},t.prototype.unBindCommonEvent=function(){!m(this.inputWrapper)&&this.targetElement()&&ye.remove(this.targetElement(),"blur",this.onBlurHandler);var e=this.inputElement&&Fe(this.inputElement,"form");e&&ye.remove(e,"reset",this.resetValueHandler),ge.isDevice||this.keyboardModule.destroy(),this.showClearButton&&ye.remove(this.inputWrapper.clearButton,"mousedown",this.resetHandler)},t.prototype.updateIconState=function(){this.showClearButton&&(""===this.inputElement.value||this.readonly?be([this.inputWrapper.clearButton],wf.clearIconHide):Se([this.inputWrapper.clearButton],wf.clearIconHide))},t.prototype.wireListEvents=function(){m(this.list)||(ye.add(this.list,"click",this.onMouseClick,this),ye.add(this.list,"mouseover",this.onMouseOver,this),ye.add(this.list,"mouseout",this.onMouseLeave,this))},t.prototype.onSearch=function(e){32!==e.charCode&&13!==e.charCode&&(void 0===this.list&&this.renderList(),this.searchKeyEvent=e,this.onServerIncrementalSearch(e))},t.prototype.onServerIncrementalSearch=function(e){this.isRequested||m(this.list)||m(this.list.querySelector("li"))||!this.enabled||this.readonly||this.incrementalSearch(e)},t.prototype.onMouseClick=function(e){var t=Fe(e.target,"."+cf);if(this.isValidLI(t))if(this.setSelection(t,e),ge.isDevice&&this.isFilterLayout())history.back();else{this.closePopup(100,e)}},t.prototype.onMouseOver=function(e){var t=Fe(e.target,"."+cf);this.setHover(t)},t.prototype.setHover=function(e){this.enabled&&this.isValidLI(e)&&!e.classList.contains(lf)&&(this.removeHover(),be([e],lf))},t.prototype.onMouseLeave=function(){this.removeHover()},t.prototype.removeHover=function(){if(this.list){var e=this.list.querySelectorAll("."+lf);e&&e.length&&Se(e,lf)}},t.prototype.isValidLI=function(e){return e&&e.hasAttribute("role")&&"option"===e.getAttribute("role")},t.prototype.incrementalSearch=function(e){if(this.liCollections.length>0){var t=function(e,t,i,n,o){var s;if(Zu+=String.fromCharCode(e),setTimeout((function(){Zu=""}),1e3),Zu=n?Zu.toLowerCase():Zu,Ku===o&&Xu===Zu){for(var a=0;a<Gu.length;a++)if(Gu[a].classList.contains(Ju)){s=a;break}return Gu[s+=1]?Gu[s]:Gu[0]}var r=t,l=Zu.length,d=void 0;a=i=i?i+1:0,Gu=[];do{a===r.length&&(a=-1),d=r[s=-1===a?0:a],(n?d.innerText.toLowerCase():d.innerText).substr(0,l)===Zu&&Gu.push(r[s]),a++}while(a!==i);return Xu=Zu,Ku=o,Gu[0]}(e.charCode,this.liCollections,this.activeIndex,!0,this.element.id);m(t)||(this.setSelection(t,e),this.setScrollPosition())}},t.prototype.hideSpinner=function(){m(this.spinnerElement)||(Qu(this.spinnerElement),Se([this.spinnerElement],wf.disableIcon),this.spinnerElement.innerHTML="",this.spinnerElement=null)},t.prototype.showSpinner=function(){m(this.spinnerElement)&&(this.spinnerElement=ge.isDevice&&!m(this.filterInputObj)&&this.filterInputObj.buttons[1]||!m(this.filterInputObj)&&this.filterInputObj.buttons[0]||this.inputWrapper.buttons[0],be([this.spinnerElement],wf.disableIcon),Nu({target:this.spinnerElement,width:ge.isDevice?"16px":"14px"},this.createElement),qu(this.spinnerElement))},t.prototype.keyActionHandler=function(e){if(this.enabled){var t="pageUp"===e.action||"pageDown"===e.action,i="dropdownlist"!==this.getModuleName()&&("home"===e.action||"end"===e.action);this.isEscapeKey="escape"===e.action,this.isTabKey=!this.isPopupOpen&&"tab"===e.action;"down"===e.action||"up"===e.action||"home"===e.action||e.action;var n="down"===e.action||"up"===e.action||"pageUp"===e.action||"pageDown"===e.action||"home"===e.action||"end"===e.action;if((!(this.isEditTextBox()||t||i)||this.isPopupOpen)&&!this.readonly){var o="tab"===e.action||"close"===e.action;if(!m(this.list)||this.isRequested||o||"escape"===e.action||(this.searchKeyEvent=e,this.renderList(e)),m(this.list)||!m(this.liCollections)&&n&&0===this.liCollections.length||this.isRequested)return;switch((o&&"autocomplete"!==this.getModuleName()&&this.isPopupOpen||"escape"===e.action)&&e.preventDefault(),this.isSelected="escape"!==e.action&&this.isSelected,this.isTyped=!n&&"escape"!==e.action&&this.isTyped,e.action){case"down":case"up":this.updateUpDownAction(e);break;case"pageUp":this.pageUpSelection(this.activeIndex-this.getPageCount(),e),e.preventDefault();break;case"pageDown":this.pageDownSelection(this.activeIndex+this.getPageCount(),e),e.preventDefault();break;case"home":case"end":this.updateHomeEndAction(e);break;case"space":"dropdownlist"===this.getModuleName()&&(this.beforePopupOpen||this.showPopup());break;case"open":this.showPopup(e);break;case"hide":this.preventAltUp=this.isPopupOpen,this.hidePopup(e),this.focusDropDown(e);break;case"enter":this.selectCurrentItem(e);break;case"tab":this.selectCurrentValueOnTab(e);break;case"escape":case"close":this.isPopupOpen&&(this.hidePopup(e),this.focusDropDown(e))}}}},t.prototype.updateUpDownAction=function(e){var t=this.list.querySelector("."+wf.focus);if(this.isSelectFocusItem(t))this.setSelection(t,e);else if(!m(this.liCollections)){var i="down"===e.action?this.activeIndex+1:this.activeIndex-1,n=0;"autocomplete"===this.getModuleName()&&(n="down"===e.action&&m(this.activeIndex)?0:this.liCollections.length-1,i=i<0?this.liCollections.length-1:i===this.liCollections.length?0:i);var o=m(this.activeIndex)?this.liCollections[n]:this.liCollections[i];m(o)||this.setSelection(o,e)}e.preventDefault()},t.prototype.updateHomeEndAction=function(e){if("dropdownlist"===this.getModuleName()){var t=0;if(t="home"===e.action?0:this.getItems().length-1,e.preventDefault(),this.activeIndex===t)return;this.setSelection(this.liCollections[t],e)}},t.prototype.selectCurrentValueOnTab=function(e){"autocomplete"===this.getModuleName()?this.selectCurrentItem(e):this.isPopupOpen&&(this.hidePopup(e),this.focusDropDown(e))},t.prototype.mobileKeyActionHandler=function(e){if(this.enabled&&(!this.isEditTextBox()||this.isPopupOpen)&&!this.readonly){if(void 0!==this.list||this.isRequested||(this.searchKeyEvent=e,this.renderList()),m(this.list)||!m(this.liCollections)&&0===this.liCollections.length||this.isRequested)return;"enter"===e.action&&this.selectCurrentItem(e)}},t.prototype.selectCurrentItem=function(e){if(this.isPopupOpen){var t=this.list.querySelector("."+wf.focus);t&&(this.setSelection(t,e),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e)),this.hidePopup(e),this.focusDropDown(e)}else this.showPopup()},t.prototype.isSelectFocusItem=function(e){return!m(e)},t.prototype.getPageCount=function(){var e=this.list.classList.contains(df)?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height");return Math.round(this.list.getBoundingClientRect().height/parseInt(e,10))},t.prototype.pageUpSelection=function(e,t){var i=e>=0?this.liCollections[e+1]:this.liCollections[0];this.setSelection(i,t)},t.prototype.pageDownSelection=function(e,t){var i=this.getItems(),n=e<=i.length?this.liCollections[e-1]:this.liCollections[i.length-1];this.setSelection(n,t)},t.prototype.unWireEvent=function(){m(this.inputWrapper)||(ye.remove(this.inputWrapper.container,"mousedown",this.dropDownClick),ye.remove(this.inputWrapper.container,"keypress",this.onSearch),ye.remove(this.inputWrapper.container,"focus",this.focusIn)),this.unBindCommonEvent()},t.prototype.unWireListEvents=function(){this.list&&(ye.remove(this.list,"click",this.onMouseClick),ye.remove(this.list,"mouseover",this.onMouseOver),ye.remove(this.list,"mouseout",this.onMouseLeave))},t.prototype.checkSelector=function(e){return'[id="'+e.replace(/(:|\.|\[|\]|,|=|@|\\|\/|#)/g,"\\$1")+'"]'},t.prototype.onDocumentClick=function(e){var t=e.target;if(!m(this.popupObj)&&Fe(t,this.checkSelector(this.popupObj.element.id))||m(this.inputWrapper)||this.inputWrapper.container.contains(e.target))t===this.inputElement||this.allowFiltering&&t===this.filterInput||"combobox"===this.getModuleName()&&!this.allowFiltering&&ge.isDevice&&t===this.inputWrapper.buttons[0]||(this.isPreventBlur=(ge.isIE||"edge"===ge.info.name)&&(document.activeElement===this.targetElement()||document.activeElement===this.filterInput),e.preventDefault());else if(this.inputWrapper.container.classList.contains(wf.inputFocus)||this.isPopupOpen){this.isDocumentClick=!0;var i=this.isRequested;this.isInteracted=!1,this.hidePopup(e),i||(this.onFocusOut(),this.inputWrapper.container.classList.remove(wf.inputFocus))}},t.prototype.activeStateChange=function(){this.isDocumentClick&&(this.hidePopup(),this.onFocusOut(),this.inputWrapper.container.classList.remove(wf.inputFocus))},t.prototype.focusDropDown=function(e){!this.initial&&this.isFilterLayout()&&this.focusIn(e)},t.prototype.dropDownClick=function(e){if(3!==e.which&&2!==e.button&&!this.targetElement().classList.contains(wf.disable)&&this.inputWrapper.clearButton!==e.target){var t=e.target;if(t===this.inputElement||this.allowFiltering&&t===this.filterInput||"combobox"===this.getModuleName()||e.preventDefault(),this.readonly)this.focusIn(e);else{this.isPopupOpen?(this.hidePopup(e),this.isFilterLayout()&&this.focusDropDown(e)):(this.focusIn(e),this.floatLabelChange(),this.queryString=""===this.inputElement.value.trim()?null:this.inputElement.value,this.isDropDownClick=!0,this.showPopup(e));var i=this,n=this.element.tagName===this.getNgDirective()&&this.itemTemplate?500:100;this.isSecondClick||setTimeout((function(){i.cloneElements(),i.isSecondClick=!0}),n)}}},t.prototype.cloneElements=function(){if(this.list){var e=this.list.querySelector("ul");e&&(e=e.cloneNode?e.cloneNode(!0):e,this.actionCompleteData.ulElement=e)}},t.prototype.updateSelectedItem=function(e,t,i,n){var o=this;this.removeSelection(),e.classList.add(rf),this.removeHover();var s=this.getFormattedValue(e.getAttribute("data-value")),a=this.getDataByValue(s);if(this.initial||i||m(t))this.selectEventCallback(e,t,i,a,s),n&&this.setSelectOptions(e,t);else{var r=this.detachChanges(a);this.isSelected=!0;var l={e:t,item:e,itemData:r,isInteracted:!!t,cancel:!1};this.trigger("select",l,(function(r){r.cancel?e.classList.remove(rf):(o.selectEventCallback(e,t,i,a,s),n&&o.setSelectOptions(e,t))}))}},t.prototype.selectEventCallback=function(e,t,i,n,o){this.previousItemData=m(this.itemData)?null:this.itemData,this.itemData!=n&&(this.previousValue=m(this.itemData)?null:"object"==typeof this.itemData?this.checkFieldValue(this.itemData,this.fields.value.split(".")):this.itemData),this.item=e,this.itemData=n;var s=this.list.querySelector("."+pf);s&&Se([s],pf),e.setAttribute("aria-selected","true"),this.activeIndex=this.getIndexByValue(o)},t.prototype.activeItem=function(e){this.isValidLI(e)&&!e.classList.contains(rf)&&(this.removeSelection(),e.classList.add(rf),this.removeHover(),e.setAttribute("aria-selected","true"))},t.prototype.setValue=function(e){var t=this.getItemData();null===t.value?rs.setValue(null,this.inputElement,this.floatLabelType,this.showClearButton):rs.setValue(t.text,this.inputElement,this.floatLabelType,this.showClearButton),this.valueTemplate&&null!==this.itemData?this.setValueTemplate():m(this.valueTempElement)||this.inputElement.previousSibling!==this.valueTempElement||(Ae(this.valueTempElement),this.inputElement.style.display="block");var i=wf.clearIcon,n=this.isFiltering()&&this.filterInput&&"combobox"===this.getModuleName()&&this.filterInput.parentElement.querySelector("."+i);return this.isFiltering()&&n&&n.style.removeProperty("visibility"),this.previousValue===t.value?(this.isSelected=!1,!0):(this.isSelected=!this.initial,this.isSelectCustom=!1,"dropdownlist"===this.getModuleName()&&this.updateIconState(),!1)},t.prototype.setSelection=function(e,t){this.isValidLI(e)&&(!e.classList.contains(rf)||this.isPopupOpen&&this.isSelected&&e.classList.contains(rf))?this.updateSelectedItem(e,t,!1,!0):this.setSelectOptions(e,t)},t.prototype.setSelectOptions=function(e,t){this.list&&this.removeHover(),this.previousSelectedLI=m(this.selectedLI)?null:this.selectedLI,this.selectedLI=e,this.setValue(t)||((!this.isPopupOpen&&!m(e)||this.isPopupOpen&&!m(t)&&("keydown"!==t.type||"keydown"===t.type&&"enter"===t.action))&&(this.isSelectCustom=!1,this.onChangeEvent(t)),!this.isPopupOpen||m(this.selectedLI)||null===this.itemData||t&&"click"===t.type||this.setScrollPosition(t),"mozilla"!==ge.info.name&&this.targetElement()&&(Ve(this.targetElement(),{"aria-label":this.inputElement.value}),Ve(this.targetElement(),{"aria-describedby":""!=this.inputElement.id?this.inputElement.id:this.element.id}),this.targetElement().removeAttribute("aria-live")),!this.isPopupOpen||m(this.ulElement)||m(this.ulElement.getElementsByClassName("e-item-focus")[0])?!this.isPopupOpen||m(this.ulElement)||m(this.ulElement.getElementsByClassName("e-active")[0])||Ve(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}):Ve(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}))},t.prototype.dropdownCompiler=function(e){var t=!1;if(e)try{t=!!document.querySelectorAll(e).length}catch(i){t=!1}return t},t.prototype.setValueTemplate=function(){this.isReact&&(this.clearTemplate(["valueTemplate"]),this.valueTempElement&&(Ae(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null)),this.valueTempElement||(this.valueTempElement=this.createElement("span",{className:wf.value}),this.inputElement.parentElement.insertBefore(this.valueTempElement,this.inputElement),this.inputElement.style.display="none"),this.isReact||(this.valueTempElement.innerHTML="");var e=Mi(this.dropdownCompiler(this.valueTemplate)?document.querySelector(this.valueTemplate).innerHTML.trim():this.valueTemplate)(this.itemData,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,this.valueTempElement);if(e&&e.length>0)for(var t=0;t<e.length;t++)this.valueTempElement.appendChild(e[t]);this.renderReactTemplates()},t.prototype.removeSelection=function(){if(this.list){var e=this.list.querySelectorAll("."+rf);e.length&&(Se(e,rf),e[0].removeAttribute("aria-selected"))}},t.prototype.getItemData=function(){var e,t,i,n=this.fields;return m(e=this.itemData)||(t=l(n.value,e),i=l(n.text,e)),{value:m(e)||g(t)?e:t,text:m(e)||g(t)?e:i}},t.prototype.onChangeEvent=function(e){var t=this.getItemData(),i=this.isSelectCustom?null:this.activeIndex;this.setProperties({index:i,text:t.text,value:t.value},!0),this.detachChangeEvent(e)},t.prototype.detachChanges=function(e){return"string"===typeof e||"boolean"===typeof e||"number"===typeof e?Object.defineProperties({},{value:{value:e,enumerable:!0},text:{value:e,enumerable:!0}}):e},t.prototype.detachChangeEvent=function(e){if(this.isSelected=!1,this.previousValue=this.value,this.activeIndex=this.index,this.typedString=m(this.text)?"":this.text,!this.initial){var t=this.detachChanges(this.itemData),i=void 0;i="string"===typeof this.previousItemData||"boolean"===typeof this.previousItemData||"number"===typeof this.previousItemData?Object.defineProperties({},{value:{value:this.previousItemData,enumerable:!0},text:{value:this.previousItemData,enumerable:!0}}):this.previousItemData,this.setHiddenValue();var n={e:e,item:this.item,itemData:t,previousItem:this.previousSelectedLI,previousItemData:i,isInteracted:!!e,value:this.value,element:this.element,event:e};this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",n)}!m(this.value)&&""!==this.value||"Always"===this.floatLabelType||Se([this.inputWrapper.container],"e-valid-input")},t.prototype.setHiddenValue=function(){var e;m(this.value)?this.hiddenElement.innerHTML="":this.hiddenElement.querySelector("option")?((e=this.hiddenElement.querySelector("option")).textContent=this.text,e.setAttribute("value",this.value.toString())):m(this.hiddenElement)||(this.hiddenElement.innerHTML="<option selected>"+this.text+"</option>",(e=this.hiddenElement.querySelector("option")).setAttribute("value",this.value.toString()))},t.prototype.onFilterUp=function(e){if(e.ctrlKey&&86===e.keyCode||!this.isValidKey&&40!==e.keyCode&&38!==e.keyCode)this.isValidKey=!1;else switch(this.isValidKey=!1,e.keyCode){case 38:case 40:"autocomplete"!==this.getModuleName()||this.isPopupOpen||this.preventAltUp||this.isRequested?this.preventAutoFill=!1:(this.preventAutoFill=!0,this.searchLists(e)),this.preventAltUp=!1,"autocomplete"!==this.getModuleName()||m(this.ulElement)||m(this.ulElement.getElementsByClassName("e-item-focus")[0])||Ve(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}),e.preventDefault();break;case 46:case 8:this.typedString=this.filterInput.value,!this.isPopupOpen&&""!==this.typedString||this.isPopupOpen&&this.queryString.length>0||""===this.typedString&&""===this.queryString&&"autocomplete"!==this.getModuleName()?(this.preventAutoFill=!0,this.searchLists(e)):""===this.typedString&&(this.list&&this.resetFocusElement(),this.activeIndex=null,"dropdownlist"!==this.getModuleName()&&(this.preventAutoFill=!0,this.searchLists(e),"autocomplete"===this.getModuleName()&&this.hidePopup())),e.preventDefault();break;default:this.typedString=this.filterInput.value,this.preventAutoFill=!1,this.searchLists(e)}},t.prototype.onFilterDown=function(e){switch(e.keyCode){case 13:break;case 40:case 38:this.queryString=this.filterInput.value,e.preventDefault();break;case 9:this.isPopupOpen&&"autocomplete"!==this.getModuleName()&&e.preventDefault();break;default:this.prevSelectPoints=this.getSelectionPoints(),this.queryString=this.filterInput.value}},t.prototype.removeFillSelection=function(){if(this.isInteracted){var e=this.getSelectionPoints();this.inputElement.setSelectionRange(e.end,e.end)}},t.prototype.getQuery=function(e){var t;if(!this.isCustomFilter&&this.allowFiltering&&this.filterInput){t=e?e.clone():this.query?this.query.clone():new Bl;var i=""===this.typedString?"contains":this.filterType,n=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof Fl||"string"!==n)&&"number"!==n){var o=this.fields.text?this.fields.text:"";t.where(o,i,this.typedString,this.ignoreCase,this.ignoreAccent)}else t.where("",i,this.typedString,this.ignoreCase,this.ignoreAccent)}else t=e?e.clone():this.query?this.query.clone():new Bl;return t},t.prototype.getSelectionPoints=function(){var e=this.inputElement;return{start:Math.abs(e.selectionStart),end:Math.abs(e.selectionEnd)}},t.prototype.searchLists=function(e){var t=this;(this.isTyped=!0,this.activeIndex=null,this.isListSearched=!0,this.filterInput.parentElement.querySelector("."+wf.clearIcon))&&(this.filterInput.parentElement.querySelector("."+wf.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible");if(this.isDataFetched=!1,this.isFiltering()){var i={preventDefaultAction:!1,text:this.filterInput.value,updateData:function(e,n,o){i.cancel||(t.isCustomFilter=!0,t.filteringAction(e,n,o))},baseEventArgs:e,cancel:!1};this.trigger("filtering",i,(function(e){e.cancel||t.isCustomFilter||e.preventDefaultAction||t.filteringAction(t.dataSource,null,t.fields)}))}},t.prototype.filter=function(e,t,i){this.isCustomFilter=!0,this.filteringAction(e,t,i)},t.prototype.filteringAction=function(e,t,i){m(this.filterInput)||(this.beforePopupOpen=!(!this.isPopupOpen&&"combobox"===this.getModuleName()&&""===this.filterInput.value),""!==this.filterInput.value.trim()||this.itemTemplate?(this.isNotSearchList=!1,t=""===this.filterInput.value.trim()?null:t,this.resetList(e,i,t)):(this.actionCompleteData.isUpdated=!1,this.isTyped=!1,m(this.actionCompleteData.ulElement)||m(this.actionCompleteData.list)||this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list),this.isTyped=!0,m(this.itemData)||"dropdownlist"!==this.getModuleName()||(this.focusIndexItem(),this.setScrollPosition()),this.isNotSearchList=!0),this.renderReactTemplates())},t.prototype.setSearchBox=function(e){if(this.isFiltering()){var t=e.querySelector("."+wf.filterParent)?e.querySelector("."+wf.filterParent):this.createElement("span",{className:wf.filterParent});this.filterInput=this.createElement("input",{attrs:{type:"text"},className:wf.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element);var i=!1;return ge.isDevice&&(i=!0),this.filterInputObj=rs.createInput({element:this.filterInput,buttons:i?[wf.backIcon,wf.filterBarClearIcon]:[wf.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement),m(this.cssClass)||(-1!==this.cssClass.split(" ").indexOf("e-outline")?be([this.filterInputObj.container],"e-outline"):-1!==this.cssClass.split(" ").indexOf("e-filled")&&be([this.filterInputObj.container],"e-filled")),Ie([this.filterInputObj.container],t),Me([t],e),Ve(this.filterInput,{"aria-disabled":"false",role:"combobox",autocomplete:"off",autocapitalize:"off",spellcheck:"false"}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+wf.clearIcon),!ge.isDevice&&this.clearIconElement&&(ye.add(this.clearIconElement,"click",this.clearText,this),this.clearIconElement.style.visibility="hidden"),ge.isDevice?this.searchKeyModule=new Ut(this.filterInput,{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}):this.searchKeyModule=new Ut(this.filterInput,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),ye.add(this.filterInput,"input",this.onInput,this),ye.add(this.filterInput,"keyup",this.onFilterUp,this),ye.add(this.filterInput,"keydown",this.onFilterDown,this),ye.add(this.filterInput,"blur",this.onBlurHandler,this),ye.add(this.filterInput,"paste",this.pasteHandler,this),this.filterInputObj}return bf},t.prototype.onInput=function(e){this.isValidKey=!0,ge.isDevice&&"mozilla"===ge.info.name&&(this.typedString=this.filterInput.value,this.preventAutoFill=!0,this.searchLists(e))},t.prototype.pasteHandler=function(e){var t=this;setTimeout((function(){t.typedString=t.filterInput.value,t.searchLists(e)}))},t.prototype.onActionFailure=function(t){e.prototype.onActionFailure.call(this,t),this.beforePopupOpen&&this.renderPopup()},t.prototype.onActionComplete=function(t,i,n,o){var s=this;if(this.isNotSearchList)this.isNotSearchList=!1;else if(this.isActive){var a=this.selectedLI?this.selectedLI.cloneNode(!0):null;if(e.prototype.onActionComplete.call(this,t,i,n),this.updateSelectElementData(this.allowFiltering),this.isRequested&&!m(this.searchKeyEvent)&&"keydown"===this.searchKeyEvent.type&&(this.isRequested=!1,this.keyActionHandler(this.searchKeyEvent),this.searchKeyEvent=null),this.isRequested&&!m(this.searchKeyEvent)&&(this.incrementalSearch(this.searchKeyEvent),this.searchKeyEvent=null),this.list.scrollTop=0,m(t)||Ve(t,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false"}),this.initRemoteRender){if(this.initial=!0,this.activeIndex=this.index,this.initRemoteRender=!1,this.value&&this.dataSource instanceof Fl){var r=m(this.fields.value)?this.fields.text:this.fields.value,l=this.fields.value.split(".");i.some((function(e){return m(e[r])&&l.length>1?s.checkFieldValue(e,l)===s.value:e[r]===s.value}))?this.updateValues():this.dataSource.executeQuery(this.getQuery(this.query).where(new zl(r,"equal",this.value))).then((function(e){e.result.length>0?(s.addItem(e.result,i.length),s.updateValues()):s.updateValues()}))}else this.updateValues();this.initial=!1}else"autocomplete"===this.getModuleName()&&this.value&&this.setInputValue();"autocomplete"!==this.getModuleName()&&this.isFiltering()&&!this.isTyped&&((!this.actionCompleteData.isUpdated||!this.isCustomFilter&&!this.isFilterFocus||m(this.itemData)&&this.allowFiltering&&(this.dataSource instanceof Fl||!m(this.dataSource)&&!m(this.dataSource.length)&&0!==this.dataSource.length))&&(this.itemTemplate&&"EJS-COMBOBOX"===this.element.tagName&&this.allowFiltering?setTimeout((function(){s.updateActionCompleteDataValues(t,i)}),0):this.updateActionCompleteDataValues(t,i)),this.addNewItem(i,a),m(this.itemData)||this.focusIndexItem()),this.beforePopupOpen&&this.renderPopup(n)}},t.prototype.checkFieldValue=function(e,t){var i=e;return t.forEach((function(e){i=i[e]})),i},t.prototype.updateActionCompleteDataValues=function(e,t){this.actionCompleteData={ulElement:e.cloneNode(!0),list:t,isUpdated:!0},this.actionData.list!==this.actionCompleteData.list&&this.actionCompleteData.ulElement&&this.actionCompleteData.list&&(this.actionData=this.actionCompleteData)},t.prototype.addNewItem=function(e,t){var i=this;if(!m(this.itemData)&&!m(t)){var n=this.getItemData().value;e.some((function(e){return("string"===typeof e||"number"===typeof e)&&e===n||l(i.fields.value,e)===n}))||this.addItem(this.itemData)}},t.prototype.updateActionCompleteData=function(e,t,i){var n=this;"autocomplete"!==this.getModuleName()&&this.actionCompleteData.ulElement&&(this.itemTemplate&&"EJS-COMBOBOX"===this.element.tagName&&this.allowFiltering?setTimeout((function(){n.actionCompleteDataUpdate(e,t,i)}),0):this.actionCompleteDataUpdate(e,t,i))},t.prototype.actionCompleteDataUpdate=function(e,t,i){null!=i?this.actionCompleteData.ulElement.insertBefore(e.cloneNode(!0),this.actionCompleteData.ulElement.childNodes[i]):this.actionCompleteData.ulElement.appendChild(e.cloneNode(!0)),this.isFiltering()&&this.actionCompleteData.list.indexOf(t)<0&&this.actionCompleteData.list.push(t)},t.prototype.focusIndexItem=function(){var e=this.getItemData().value;this.activeIndex=this.getIndexByValue(e);var t=this.findListElement(this.list,"li","data-value",e);this.selectedLI=t,this.activeItem(t),this.removeFocus()},t.prototype.updateSelection=function(){var e=this.list.querySelector("."+rf);e?(this.setProperties({index:this.getIndexByValue(e.getAttribute("data-value"))}),this.activeIndex=this.index):(this.removeFocus(),this.list.querySelector("."+cf).classList.add(wf.focus))},t.prototype.removeFocus=function(){var e=this.list.querySelectorAll("."+wf.focus);e&&e.length&&Se(e,wf.focus)},t.prototype.renderPopup=function(e){var t=this;if(this.popupObj&&document.body.contains(this.popupObj.element))this.refreshPopup();else{this.trigger("beforeOpen",{cancel:!1},(function(i){if(i.cancel)t.beforePopupOpen=!1;else{var n=t.createElement("div",{id:t.element.id+"_popup",className:"e-ddl e-popup "+(null!=t.cssClass?t.cssClass:"")}),o=t.setSearchBox(n);if(t.listHeight=b(t.popupHeight),t.headerTemplate&&t.setHeaderTemplate(n),Ie([t.list],n),t.footerTemplate&&t.setFooterTemplate(n),document.body.appendChild(n),n.style.visibility="hidden","auto"!==t.popupHeight){if(t.searchBoxHeight=0,m(o.container)||(t.searchBoxHeight=o.container.parentElement.getBoundingClientRect().height,t.listHeight=(parseInt(t.listHeight,10)-t.searchBoxHeight).toString()+"px"),t.headerTemplate){t.header=t.header?t.header:n.querySelector(".e-ddl-header");var s=Math.round(t.header.getBoundingClientRect().height);t.listHeight=(parseInt(t.listHeight,10)-(s+t.searchBoxHeight)).toString()+"px"}if(t.footerTemplate){t.footer=t.footer?t.footer:n.querySelector(".e-ddl-footer");s=Math.round(t.footer.getBoundingClientRect().height);t.listHeight=(parseInt(t.listHeight,10)-(s+t.searchBoxHeight)).toString()+"px"}t.list.style.maxHeight=(parseInt(t.listHeight,10)-2).toString()+"px",n.style.maxHeight=b(t.popupHeight)}else n.style.height="auto";var a=0,r=void 0;if(!m(t.selectedLI)&&!m(t.activeIndex)&&t.activeIndex>=0?t.setScrollPosition():t.list.scrollTop=0,ge.isDevice&&!t.allowFiltering&&("dropdownlist"===t.getModuleName()||t.isDropDownClick&&"combobox"===t.getModuleName())){a=t.getOffsetValue(n);var l=t.isEmptyList()?t.list:t.liCollections[0];m(t.inputElement)||(r=-(parseInt(getComputedStyle(l).textIndent,10)-parseInt(getComputedStyle(t.inputElement).paddingLeft,10)+parseInt(getComputedStyle(t.inputElement.parentElement).borderLeftWidth,10)))}t.getFocusElement(),t.createPopup(n,a,r),t.checkCollision(n),ge.isDevice&&(t.popupObj.element.classList.add(wf.device),("dropdownlist"===t.getModuleName()||"combobox"===t.getModuleName()&&!t.allowFiltering&&t.isDropDownClick)&&(t.popupObj.collision={X:"fit",Y:"fit"}),t.isFilterLayout()&&(t.popupObj.element.classList.add(wf.mobileFilter),t.popupObj.position={X:0,Y:0},t.popupObj.dataBind(),Ve(t.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),be([document.body,t.popupObj.element],wf.popupFullScreen),t.setSearchBoxPosition(),t.backIconElement=o.container.querySelector(".e-back-icon"),t.clearIconElement=o.container.querySelector("."+wf.clearIcon),ye.add(t.backIconElement,"click",t.clickOnBackIcon,t),ye.add(t.clearIconElement,"click",t.clearText,t))),n.style.visibility="visible",be([n],"e-popup-close");for(var d=0,h=t.popupObj.getScrollableParent(t.inputWrapper.container);d<h.length;d++){var p=h[d];ye.add(p,"scroll",t.scrollHandler,t)}m(t.list)||(t.unWireListEvents(),t.wireListEvents()),t.selectedElementID=t.selectedLI?t.selectedLI.id:null,Ve(t.targetElement(),{"aria-expanded":"true","aria-owns":t.inputElement.id+"_options"}),t.inputElement.setAttribute("aria-expanded","true"),be([t.isFiltering()?t.filterInput.parentElement:t.inputWrapper.container],[wf.inputFocus]);t.beforePopupOpen=!0;var c={popup:t.popupObj,event:e,cancel:!1,animation:{name:"FadeIn",duration:100}};t.trigger("open",c,(function(e){e.cancel?(t.beforePopupOpen=!1,t.destroyPopup()):(m(t.inputWrapper)||be([t.inputWrapper.container],[wf.iconAnimation]),t.renderReactTemplates(),m(t.popupObj)||t.popupObj.show(new st(e.animation),1e3===t.zIndex?t.element:null))}))}}))}},t.prototype.checkCollision=function(e){(!ge.isDevice||ge.isDevice&&"dropdownlist"!==this.getModuleName()&&!this.isDropDownClick)&&(ln(e).length>0&&(e.style.marginTop=-parseInt(getComputedStyle(e).marginTop,10)+"px"),this.popupObj.resolveCollision())},t.prototype.getOffsetValue=function(e){var t=getComputedStyle(e),i=parseInt(t.borderTopWidth,10),n=parseInt(t.borderBottomWidth,10);return this.setPopupPosition(i+n)},t.prototype.createPopup=function(e,t,i){var n=this;this.popupObj=new Ln(e,{width:this.setWidth(),targetType:"relative",relateTo:this.inputWrapper.container,collision:{X:"flip",Y:"flip"},offsetY:t,enableRtl:this.enableRtl,offsetX:i,position:{X:"left",Y:"bottom"},zIndex:this.zIndex,close:function(){n.isDocumentClick||n.focusDropDown(),n.isReact&&n.clearTemplate(["headerTemplate","footerTemplate"]);n.getModuleName();n.isNotSearchList=!1,n.isDocumentClick=!1,n.destroyPopup(),n.isFiltering()&&n.actionCompleteData.list&&n.actionCompleteData.list[0]&&(n.isActive=!0,n.onActionComplete(n.actionCompleteData.ulElement,n.actionCompleteData.list,null,!0))},open:function(){ye.remove(document,"mousedown",n.onDocumentClick),ye.add(document,"mousedown",n.onDocumentClick,n),n.isPopupOpen=!0;var e=n.actionCompleteData&&n.actionCompleteData.ulElement&&n.actionCompleteData.ulElement.querySelector("li"),t=n.list.querySelector("ul li");m(n.ulElement)||m(n.ulElement.getElementsByClassName("e-item-focus")[0])?m(n.ulElement)||m(n.ulElement.getElementsByClassName("e-active")[0])||Ve(n.targetElement(),{"aria-activedescendant":n.ulElement.getElementsByClassName("e-active")[0].id}):Ve(n.targetElement(),{"aria-activedescendant":n.ulElement.getElementsByClassName("e-item-focus")[0].id}),n.isFiltering()&&n.itemTemplate&&n.element.tagName===n.getNgDirective()&&e&&t&&e.textContent!==t.textContent&&"EJS-COMBOBOX"!==n.element.tagName&&n.cloneElements(),n.isFilterLayout()&&(Se([n.inputWrapper.container],[wf.inputFocus]),n.isFilterFocus=!0,n.filterInput.focus(),n.inputWrapper.clearButton&&be([n.inputWrapper.clearButton],wf.clearIconHide)),n.activeStateChange()},targetExitViewport:function(){ge.isDevice||n.hidePopup()}})},t.prototype.isEmptyList=function(){return!m(this.liCollections)&&0===this.liCollections.length},t.prototype.getFocusElement=function(){},t.prototype.isFilterLayout=function(){return"dropdownlist"===this.getModuleName()&&this.allowFiltering},t.prototype.scrollHandler=function(){ge.isDevice&&("dropdownlist"===this.getModuleName()&&!this.isFilterLayout()||"combobox"===this.getModuleName()&&!this.allowFiltering&&this.isDropDownClick)&&this.hidePopup()},t.prototype.setSearchBoxPosition=function(){var e=this.filterInput.parentElement.getBoundingClientRect().height;this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%",this.list.style.maxHeight=window.innerHeight-e+"px",this.list.style.height=window.innerHeight-e+"px";var t=this.filterInput.parentElement.querySelector("."+wf.clearIcon);Ae(this.filterInput),t.parentElement.insertBefore(this.filterInput,t)},t.prototype.setPopupPosition=function(e){var t,i=e,n=this.list.querySelector("."+wf.focus)||this.selectedLI,o=this.isEmptyList()?this.list:this.liCollections[0],s=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],a=o.getBoundingClientRect().height,r=this.list.offsetHeight/2,l=m(n)?o.offsetTop:n.offsetTop;if(s.offsetTop-r<l&&!m(this.liCollections)&&this.liCollections.length>0&&!m(n)){var d=this.list.offsetHeight/a,h=parseInt(getComputedStyle(this.list).paddingBottom,10);t=(d-(this.liCollections.length-this.activeIndex))*a-i+h,this.list.scrollTop=n.offsetTop}else l>r?(t=r-a/2,this.list.scrollTop=l-r+a/2):t=l;return-(t=t+a+i-(a-this.inputWrapper.container.offsetHeight)/2)},t.prototype.setWidth=function(){var e=b(this.popupWidth);e.indexOf("%")>-1&&(e=(this.inputWrapper.container.offsetWidth*parseFloat(e)/100).toString()+"px");if(ge.isDevice&&!this.allowFiltering&&("dropdownlist"===this.getModuleName()||this.isDropDownClick&&"combobox"===this.getModuleName())){var t=this.isEmptyList()?this.list:this.liCollections[0];e=parseInt(e,10)+2*(parseInt(getComputedStyle(t).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))+"px"}return e},t.prototype.scrollBottom=function(e){if(!m(this.selectedLI)){var t=this.list.offsetHeight,i=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop,n=this.list.scrollTop+i-t;n=e?n+2*parseInt(getComputedStyle(this.list).paddingTop,10):n;var o=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;o=this.fields.groupBy&&!m(this.fixedHeaderElement)?o-this.fixedHeaderElement.offsetHeight:o,0===this.activeIndex?this.list.scrollTop=0:(i>t||!(o>0&&this.list.offsetHeight>o))&&(this.list.scrollTop=n)}},t.prototype.scrollTop=function(){if(!m(this.selectedLI)){var e=this.selectedLI.offsetTop-this.list.scrollTop;e=this.fields.groupBy&&!m(this.fixedHeaderElement)?e-this.fixedHeaderElement.offsetHeight:e;var t=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;0===this.activeIndex?this.list.scrollTop=0:e<0?this.list.scrollTop=this.list.scrollTop+e:t>0&&this.list.offsetHeight>t||(this.list.scrollTop=this.selectedLI.offsetTop-(this.fields.groupBy&&!m(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}},t.prototype.isEditTextBox=function(){return!1},t.prototype.isFiltering=function(){return this.allowFiltering},t.prototype.isPopupButton=function(){return!0},t.prototype.setScrollPosition=function(e){if(m(e))this.scrollBottom(!0);else switch(e.action){case"pageDown":case"down":case"end":this.scrollBottom();break;default:this.scrollTop()}},t.prototype.clearText=function(){this.filterInput.value=this.typedString="",this.searchLists(null)},t.prototype.setEleWidth=function(e){m(e)||("number"===typeof e?this.inputWrapper.container.style.width=b(e):"string"===typeof e&&(this.inputWrapper.container.style.width=e.match(/px|%|em/)?e:b(e)))},t.prototype.closePopup=function(e,t){var i=this;if(this.isTyped=!1,this.popupObj&&document.body.contains(this.popupObj.element)&&(this.beforePopupOpen||this.isEventCancel)){this.isActive=!1,this.filterInputObj=null,this.isDropDownClick=!1,this.preventAutoFill=!1;for(var n=0,o=this.popupObj.getScrollableParent(this.inputWrapper.container);n<o.length;n++){var s=o[n];ye.remove(s,"scroll",this.scrollHandler)}ge.isDevice&&this.isFilterLayout()&&Se([document.body,this.popupObj.element],wf.popupFullScreen),this.isFilterLayout()&&(ge.isDevice||(this.searchKeyModule.destroy(),this.clearIconElement&&ye.remove(this.clearIconElement,"click",this.clearText)),this.backIconElement&&(ye.remove(this.backIconElement,"click",this.clickOnBackIcon),ye.remove(this.clearIconElement,"click",this.clearText)),m(this.filterInput)||(ye.remove(this.filterInput,"input",this.onInput),ye.remove(this.filterInput,"keyup",this.onFilterUp),ye.remove(this.filterInput,"keydown",this.onFilterDown),ye.remove(this.filterInput,"blur",this.onBlurHandler),ye.remove(this.filterInput,"paste",this.pasteHandler)),this.filterInput=null),Ve(this.targetElement(),{"aria-expanded":"false"}),this.inputElement.setAttribute("aria-expanded","false"),this.targetElement().removeAttribute("aria-owns"),this.targetElement().removeAttribute("aria-activedescendant"),this.inputWrapper.container.classList.remove(wf.iconAnimation),this.isFiltering()&&(this.actionCompleteData.isUpdated=!1),this.beforePopupOpen=!1;var a={name:"FadeOut",duration:100,delay:e||0},r={popup:this.popupObj,cancel:!1,animation:a,event:t||null};this.trigger("close",r,(function(e){if(i.isEventCancel=e.cancel,!m(i.popupObj)&&!m(i.popupObj.element.querySelector(".e-fixed-head"))){var t=i.popupObj.element.querySelector(".e-fixed-head");t.parentNode.removeChild(t),i.fixedHeaderElement=null}e.cancel||("autocomplete"===i.getModuleName()&&i.rippleFun(),i.isPopupOpen?i.popupObj.hide(new st(e.animation)):i.destroyPopup())}))}},t.prototype.destroyPopup=function(){this.isPopupOpen=!1,this.isFilterFocus=!1,this.popupObj.destroy(),Ae(this.popupObj.element)},t.prototype.clickOnBackIcon=function(){this.hidePopup(),this.focusIn()},t.prototype.render=function(){"INPUT"===this.element.tagName?(this.inputElement=this.element,m(this.inputElement.getAttribute("role"))&&this.inputElement.setAttribute("role","combobox"),m(this.inputElement.getAttribute("type"))&&this.inputElement.setAttribute("type","text"),this.inputElement.setAttribute("aria-expanded","false")):(this.inputElement=this.createElement("input",{attrs:{role:"combobox",type:"text"}}),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.parentElement.insertBefore(this.inputElement,this.element),this.preventTabIndex(this.inputElement));var e=this.cssClass;m(this.cssClass)||""===this.cssClass||(e=this.cssClass.replace(/\s+/g," ").trim()),!m(Fe(this.element,"fieldset"))&&Fe(this.element,"fieldset").disabled&&(this.enabled=!1),this.inputWrapper=rs.createInput({element:this.inputElement,buttons:this.isPopupButton()?[wf.icon]:null,floatLabelType:this.floatLabelType,properties:{readonly:"dropdownlist"===this.getModuleName()||this.readonly,placeholder:this.placeholder,cssClass:e,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton}},this.createElement),this.element.tagName===this.getNgDirective()?this.element.appendChild(this.inputWrapper.container):this.inputElement.parentElement.insertBefore(this.element,this.inputElement),this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",tabindex:"-1",class:wf.hiddenElement}}),Me([this.hiddenElement],this.inputWrapper.container),this.validationAttribute(this.element,this.hiddenElement),this.setReadOnly(),this.setFields(),this.inputWrapper.container.style.width=b(this.width),this.inputWrapper.container.classList.add("e-ddl"),rs.calculateWidth(this.inputElement,this.inputWrapper.container),!m(this.inputWrapper.buttons[0])&&this.inputWrapper.container.getElementsByClassName("e-float-text-content")[0]&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon"),this.wireEvent(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex");var t=this.element.getAttribute("id")?this.element.getAttribute("id"):y("ej2_dropdownlist");if(this.element.id=t,this.hiddenElement.id=t+"_hidden",this.targetElement().setAttribute("tabindex",this.tabIndex),Ve(this.targetElement(),this.getAriaAttributes()),this.updateDataAttribute(this.htmlAttributes),this.setHTMLAttributes(),this.targetElement()===this.inputElement&&this.inputElement.removeAttribute("aria-labelledby"),null!==this.value||null!==this.activeIndex||null!==this.text)this.initValue();else if("SELECT"===this.element.tagName&&this.element.options[0]){var i=this.element;this.value=i.options[i.selectedIndex].value,this.text=m(this.value)?null:i.options[i.selectedIndex].textContent,this.initValue()}this.setEnabled(),this.preventTabIndex(this.element),this.enabled||(this.targetElement().tabIndex=-1),this.initial=!1,this.element.style.opacity="",this.inputElement.onselect=function(e){e.stopImmediatePropagation()},this.inputElement.onchange=function(e){e.stopImmediatePropagation()},this.element.hasAttribute("autofocus")&&this.focusIn(),m(this.text)||this.inputElement.setAttribute("value",this.text),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false");var n=this.inputWrapper.container.getElementsByClassName("e-float-text")[0];m(this.element.id)||""===this.element.id||m(n)||(n.id="label_"+this.element.id.replace(/ /g,"_"),Ve(this.inputElement,{"aria-labelledby":n.id})),this.renderComplete()},t.prototype.setFooterTemplate=function(e){this.footer?this.isReact?this.clearTemplate(["footerTemplate"]):this.footer.innerHTML="":(this.footer=this.createElement("div"),be([this.footer],wf.footer));var t=Mi(this.dropdownCompiler(this.footerTemplate)?Ee(this.footerTemplate,document).innerHTML.trim():this.footerTemplate)({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);if(t&&t.length>0)for(var i=0;i<t.length;i++)this.footer.appendChild(t[i]);Ie([this.footer],e)},t.prototype.setHeaderTemplate=function(e){this.header?this.header.innerHTML="":(this.header=this.createElement("div"),be([this.header],wf.header));var t=Mi(this.dropdownCompiler(this.headerTemplate)?Ee(this.headerTemplate,document).innerHTML.trim():this.headerTemplate)({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);if(t&&t.length)for(var i=0;i<t.length;i++)this.header.appendChild(t[i]);var n=e.querySelector("div.e-content");e.insertBefore(this.header,n)},t.prototype.setEnabled=function(){this.element.setAttribute("aria-disabled",this.enabled?"false":"true")},t.prototype.setOldText=function(e){this.text=e},t.prototype.setOldValue=function(e){this.value=e},t.prototype.refreshPopup=function(){m(this.popupObj)||!document.body.contains(this.popupObj.element)||(!this.allowFiltering||ge.isDevice&&this.isFilterLayout())&&"autocomplete"!==this.getModuleName()||(Se([this.popupObj.element],"e-popup-close"),this.popupObj.refreshPosition(this.inputWrapper.container),this.popupObj.resolveCollision())},t.prototype.checkData=function(e){!e.dataSource||m(Object.keys(e.dataSource))||!this.itemTemplate||!this.allowFiltering||this.isListSearched&&e.dataSource instanceof Fl||(this.list=null,this.actionCompleteData={ulElement:null,list:null,isUpdated:!1}),this.isListSearched=!1;var t=-1!==Object.keys(e).indexOf("value")&&m(e.value),i=-1!==Object.keys(e).indexOf("text")&&m(e.text);"autocomplete"!==this.getModuleName()&&this.allowFiltering&&(t||i)&&(this.itemData=null),this.allowFiltering&&e.dataSource&&!m(Object.keys(e.dataSource))?(this.actionCompleteData={ulElement:null,list:null,isUpdated:!1},this.actionData=this.actionCompleteData):this.allowFiltering&&e.query&&!m(Object.keys(e.query))&&(this.actionCompleteData="combobox"===this.getModuleName()?{ulElement:null,list:null,isUpdated:!1}:this.actionCompleteData,this.actionData=this.actionCompleteData)},t.prototype.updateDataSource=function(e){""===this.inputElement.value&&(m(e)||!m(e.dataSource)&&(e.dataSource instanceof Fl||0!==e.dataSource.length))||this.clearAll(null,e),this.fields.groupBy&&e.fields&&!this.isGroupChecking&&this.list&&(ye.remove(this.list,"scroll",this.setFloatingHeader),ye.add(this.list,"scroll",this.setFloatingHeader,this)),(m(e)||!m(e.dataSource)&&(e.dataSource instanceof Fl||0!==e.dataSource.length)||e.dataSource!==[])&&(this.typedString="",this.resetList(this.dataSource)),this.isCustomFilter||this.isFilterFocus||document.activeElement===this.filterInput||this.checkCustomValue()},t.prototype.checkCustomValue=function(){this.itemData=this.getDataByValue(this.value);var e=this.getItemData();this.setProperties({text:e.text,value:e.value})},t.prototype.updateInputFields=function(){"dropdownlist"===this.getModuleName()&&rs.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.onPropertyChanged=function(t,i){var n=this;"dropdownlist"===this.getModuleName()&&(this.checkData(t),this.setUpdateInitial(["fields","query","dataSource"],t));for(var o=function(o){switch(o){case"query":case"dataSource":break;case"htmlAttributes":s.setHTMLAttributes();break;case"width":s.setEleWidth(t.width),rs.calculateWidth(s.inputElement,s.inputWrapper.container);break;case"placeholder":rs.setPlaceholder(t.placeholder,s.inputElement);break;case"filterBarPlaceholder":s.filterInput&&rs.setPlaceholder(t.filterBarPlaceholder,s.filterInput);break;case"readonly":"dropdownlist"!==s.getModuleName()&&rs.setReadonly(t.readonly,s.inputElement),s.setReadOnly();break;case"cssClass":s.setCssClass(t.cssClass,i.cssClass),rs.calculateWidth(s.inputElement,s.inputWrapper.container);break;case"enableRtl":s.setEnableRtl();break;case"enabled":s.setEnable();break;case"text":if(null===t.text){s.clearAll();break}if(s.list||(s.dataSource instanceof Fl&&(s.initRemoteRender=!0),s.renderList()),!s.initRemoteRender){var a=s.getElementByText(t.text);if(!s.checkValidLi(a))if(s.liCollections&&100===s.liCollections.length&&"autocomplete"===s.getModuleName()&&s.listData.length>100)s.setSelectionData(t.text,i.text,"text");else if(t.text&&s.dataSource instanceof Fl){var r=s.getItems().length,l=m(s.fields.text)?s.fields.value:s.fields.text;s.typedString="",s.dataSource.executeQuery(s.getQuery(s.query).where(new zl(l,"equal",t.text))).then((function(e){e.result.length>0?(n.addItem(e.result,r),n.updateValues()):n.setOldText(i.text)}))}else"autocomplete"===s.getModuleName()?s.setInputValue(t,i):s.setOldText(i.text);s.updateInputFields()}break;case"value":if(null===t.value){s.clearAll();break}if(s.notify("beforeValueChange",{newProp:t}),s.list||(s.dataSource instanceof Fl&&(s.initRemoteRender=!0),s.renderList()),!s.initRemoteRender){var d=s.getElementByValue(t.value);if(!s.checkValidLi(d))if(s.liCollections&&100===s.liCollections.length&&"autocomplete"===s.getModuleName()&&s.listData.length>100)s.setSelectionData(t.value,i.value,"value");else if(t.value&&s.dataSource instanceof Fl){var h=s.getItems().length;l=m(s.fields.value)?s.fields.text:s.fields.value;s.typedString="",s.dataSource.executeQuery(s.getQuery(s.query).where(new zl(l,"equal",t.value))).then((function(e){e.result.length>0?(n.addItem(e.result,h),n.updateValues()):n.setOldValue(i.value)}))}else"autocomplete"===s.getModuleName()?s.setInputValue(t,i):s.setOldValue(i.value);s.updateInputFields(),s.preventChange=s.isAngular&&s.preventChange?!s.preventChange:s.preventChange}break;case"index":if(null===t.index){s.clearAll();break}if(s.list||(s.dataSource instanceof Fl&&(s.initRemoteRender=!0),s.renderList()),!s.initRemoteRender&&s.liCollections){var p=s.liCollections[t.index];s.checkValidLi(p)||(s.liCollections&&100===s.liCollections.length&&"autocomplete"===s.getModuleName()&&s.listData.length>100?s.setSelectionData(t.index,i.index,"index"):s.index=i.index),s.updateInputFields()}break;case"footerTemplate":s.popupObj&&s.setFooterTemplate(s.popupObj.element);break;case"headerTemplate":s.popupObj&&s.setHeaderTemplate(s.popupObj.element);break;case"valueTemplate":m(s.itemData)||null==s.valueTemplate||s.setValueTemplate();break;case"allowFiltering":s.allowFiltering&&(s.actionCompleteData={ulElement:s.ulElement,list:s.listData,isUpdated:!0},s.actionData=s.actionCompleteData,s.updateSelectElementData(s.allowFiltering));break;case"floatLabelType":rs.removeFloating(s.inputWrapper),rs.addFloating(s.inputElement,t.floatLabelType,s.placeholder,s.createElement),!m(s.inputWrapper.buttons[0])&&s.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0]&&"Never"!==s.floatLabelType&&s.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"showClearButton":rs.setClearButton(t.showClearButton,s.inputElement,s.inputWrapper,null,s.createElement),s.bindClearEvent();break;default:var c=s.getPropObject(o,t,i);e.prototype.onPropertyChanged.call(s,c.newProperty,c.oldProperty)}},s=this,a=0,r=Object.keys(t);a<r.length;a++){o(r[a])}},t.prototype.checkValidLi=function(e){return!!this.isValidLI(e)&&(this.setSelection(e,null),!0)},t.prototype.setSelectionData=function(e,t,i){var n,o=this;this.updateListValues=function(){"text"===i?(n=o.getElementByText(e),o.checkValidLi(n)||o.setOldText(t)):"value"===i?(n=o.getElementByValue(e),o.checkValidLi(n)||o.setOldValue(t)):"index"===i&&(n=o.liCollections[e],o.checkValidLi(n)||(o.index=t))}},t.prototype.setReadOnly=function(){this.readonly?be([this.inputWrapper.container],["e-readonly"]):Se([this.inputWrapper.container],["e-readonly"])},t.prototype.setInputValue=function(e,t){},t.prototype.setCssClass=function(e,t){m(t)||(t=t.replace(/\s+/g," ").trim()),m(e)||(e=e.replace(/\s+/g," ").trim()),rs.setCssClass(e,[this.inputWrapper.container],t),this.popupObj&&rs.setCssClass(e,[this.popupObj.element],t)},t.prototype.getModuleName=function(){return"dropdownlist"},t.prototype.showPopup=function(e){this.enabled&&(this.isFiltering()&&this.dataSource instanceof Fl&&this.actionData.list!=this.actionCompleteData.list&&this.actionData.list&&this.actionData.ulElement&&(this.actionCompleteData=this.actionData,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)),this.beforePopupOpen?this.refreshPopup():(this.beforePopupOpen=!0,this.isFiltering()&&!this.isActive&&this.actionCompleteData.list&&this.actionCompleteData.list[0]?(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)):(m(this.list)||!g(this.list)&&(this.list.classList.contains(df)||this.list.querySelectorAll("."+cf).length<=0))&&this.renderList(e),this.invokeRenderPopup(e)))},t.prototype.invokeRenderPopup=function(e){if(ge.isDevice&&this.isFilterLayout()){var t=this;window.onpopstate=function(){t.hidePopup()},history.pushState({},"")}m(this.list)||m(this.list.children[0])&&!this.list.classList.contains(df)||this.renderPopup(e)},t.prototype.renderHightSearch=function(){},t.prototype.hidePopup=function(e){if(this.isEscapeKey&&"dropdownlist"===this.getModuleName())if(m(this.inputElement)||rs.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1,m(this.index))this.resetSelection();else{var t=this.findListElement(this.ulElement,"li","data-value",this.value);this.selectedLI=this.liCollections[this.index]||t,this.selectedLI&&(this.updateSelectedItem(this.selectedLI,null,!0),this.valueTemplate&&null!==this.itemData&&this.setValueTemplate())}this.closePopup(0,e);var i=this.getItemData(),n=!m(this.selectedLI);this.inputElement&&""===this.inputElement.value.trim()&&!this.isInteracted&&(this.isSelectCustom||n&&this.inputElement.value!==i.text)&&(this.isSelectCustom=!1,this.clearAll(e))},t.prototype.focusIn=function(e){if(this.enabled&&!this.targetElement().classList.contains(wf.disable)){var t=!1;this.preventFocus&&ge.isDevice&&(this.inputWrapper.container.tabIndex=1,this.inputWrapper.container.focus(),this.preventFocus=!1,t=!0),t||this.targetElement().focus(),be([this.inputWrapper.container],[wf.inputFocus]),this.onFocus(e),rs.calculateWidth(this.inputElement,this.inputWrapper.container)}},t.prototype.focusOut=function(e){this.enabled&&(this.isTyped=!0,this.hidePopup(e),this.targetElement()&&this.targetElement().blur(),Se([this.inputWrapper.container],[wf.inputFocus]),rs.calculateWidth(this.inputElement,this.inputWrapper.container))},t.prototype.destroy=function(){var t;if(this.isActive=!1,t=this.element.id,Ku===t&&(Ku="",Xu="",Zu="",Gu=[]),this.isReact&&this.clearTemplate(),this.hidePopup(),this.unWireEvent(),this.list&&this.unWireListEvents(),!this.element||this.element.classList.contains("e-"+this.getModuleName())){if(this.inputElement){for(var i=["readonly","aria-disabled","placeholder","aria-labelledby","aria-expanded","autocomplete","aria-readonly","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-describedby","aria-label"],n=0;n<i.length;n++)this.inputElement.removeAttribute(i[n]);this.inputElement.setAttribute("tabindex",this.tabIndex),this.inputElement.classList.remove("e-input"),rs.setValue("",this.inputElement,this.floatLabelType,this.showClearButton)}this.element.style.display="block",this.inputWrapper.container.parentElement.tagName===this.getNgDirective()||this.inputWrapper.container.parentElement.insertBefore(this.element,this.inputWrapper.container),Ae(this.inputWrapper.container),this.hiddenElement=null,this.inputWrapper=null,this.keyboardModule=null,this.ulElement=null,this.list=null,this.popupObj=null,this.rippleFun=null,this.selectedLI=null,this.liCollections=null,this.item=null,this.inputWrapper=null,this.footer=null,this.header=null,this.previousSelectedLI=null,this.valueTempElement=null,e.prototype.destroy.call(this)}},t.prototype.getItems=function(){return this.list||(this.dataSource instanceof Fl&&(this.initRemoteRender=!0),this.renderList()),this.ulElement?e.prototype.getItems.call(this):[]},t.prototype.getDataByValue=function(t){return e.prototype.getDataByValue.call(this,t)},t.prototype.clear=function(){this.value=null},vf([Ge(null)],t.prototype,"cssClass",void 0),vf([Ge("100%")],t.prototype,"width",void 0),vf([Ge(!0)],t.prototype,"enabled",void 0),vf([Ge(!1)],t.prototype,"enablePersistence",void 0),vf([Ge("300px")],t.prototype,"popupHeight",void 0),vf([Ge("100%")],t.prototype,"popupWidth",void 0),vf([Ge(null)],t.prototype,"placeholder",void 0),vf([Ge(null)],t.prototype,"filterBarPlaceholder",void 0),vf([Ge({})],t.prototype,"htmlAttributes",void 0),vf([Ge(null)],t.prototype,"query",void 0),vf([Ge(null)],t.prototype,"valueTemplate",void 0),vf([Ge(null)],t.prototype,"headerTemplate",void 0),vf([Ge(null)],t.prototype,"footerTemplate",void 0),vf([Ge(!1)],t.prototype,"allowFiltering",void 0),vf([Ge(!1)],t.prototype,"readonly",void 0),vf([Ge(null)],t.prototype,"text",void 0),vf([Ge(null)],t.prototype,"value",void 0),vf([Ge(null)],t.prototype,"index",void 0),vf([Ge("Never")],t.prototype,"floatLabelType",void 0),vf([Ge(!1)],t.prototype,"showClearButton",void 0),vf([$e()],t.prototype,"filtering",void 0),vf([$e()],t.prototype,"change",void 0),vf([$e()],t.prototype,"beforeOpen",void 0),vf([$e()],t.prototype,"open",void 0),vf([$e()],t.prototype,"close",void 0),vf([$e()],t.prototype,"blur",void 0),vf([$e()],t.prototype,"focus",void 0),t=vf([et],t)}(gf),Cf=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),xf=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Mf="e-atc-spinner-icon";wf.root="e-combobox";var If={container:null,buttons:[]},Tf=function(e){function t(t,i){return e.call(this,t,i)||this}return Cf(t,e),t.prototype.preRender=function(){e.prototype.preRender.call(this)},t.prototype.getLocaleName=function(){return"combo-box"},t.prototype.wireEvent=function(){"combobox"===this.getModuleName()&&(ye.add(this.inputWrapper.buttons[0],"mousedown",this.preventBlur,this),ye.add(this.inputWrapper.container,"blur",this.onBlurHandler,this)),m(this.inputWrapper.buttons[0])||ye.add(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick,this),ye.add(this.inputElement,"focus",this.targetFocus,this),this.readonly||(ye.add(this.inputElement,"input",this.onInput,this),ye.add(this.inputElement,"keyup",this.onFilterUp,this),ye.add(this.inputElement,"keydown",this.onFilterDown,this),ye.add(this.inputElement,"paste",this.pasteHandler,this)),this.bindCommonEvent()},t.prototype.preventBlur=function(e){(this.allowFiltering||document.activeElement===this.inputElement||document.activeElement.classList.contains(wf.input)||!ge.isDevice)&&ge.isDevice||e.preventDefault()},t.prototype.onBlurHandler=function(t){var i=this.inputElement&&""===this.inputElement.value?null:this.inputElement&&this.inputElement.value;m(this.listData)||m(i)||i===this.text||this.customValue(t),e.prototype.onBlurHandler.call(this,t)},t.prototype.targetElement=function(){return this.inputElement},t.prototype.setOldText=function(e){rs.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue(),this.removeSelection()},t.prototype.setOldValue=function(e){this.allowCustom?this.valueMuteChange(this.value):this.valueMuteChange(null),this.removeSelection(),this.setHiddenValue()},t.prototype.valueMuteChange=function(e){var t=m(e)?null:e.toString();rs.setValue(t,this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({value:e,text:e,index:null},!0),this.activeIndex=this.index;var i=this.fields,n={};n[i.text]=m(e)?null:e.toString(),n[i.value]=m(e)?null:e.toString(),this.itemData=n,this.item=null,this.previousValue!==this.value&&this.detachChangeEvent(null)},t.prototype.updateValues=function(){if(m(this.value))if(this.text&&m(this.value)){var e;(e=this.getElementByText(this.text))?this.setSelection(e,null):(rs.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue())}else this.setSelection(this.liCollections[this.activeIndex],null);else(e=this.getElementByValue(this.value))?this.setSelection(e,null):this.allowCustom?this.valueMuteChange(this.value):this.valueMuteChange(null);this.setHiddenValue(),rs.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.updateIconState=function(){this.showClearButton&&(this.inputElement&&""!==this.inputElement.value&&!this.readonly?Se([this.inputWrapper.clearButton],wf.clearIconHide):be([this.inputWrapper.clearButton],wf.clearIconHide))},t.prototype.getAriaAttributes=function(){return{role:"combobox","aria-autocomplete":"both","aria-labelledby":this.hiddenElement.id,"aria-expanded":"false","aria-readonly":this.readonly.toString(),autocomplete:"off",autocapitalize:"off",spellcheck:"false"}},t.prototype.searchLists=function(t){this.isTyped=!0,this.isFiltering()?(e.prototype.searchLists.call(this,t),this.ulElement&&""===this.filterInput.value.trim()&&this.setHoverList(this.ulElement.querySelector("."+wf.li))):(this.ulElement&&""===this.inputElement.value&&this.preventAutoFill&&this.setHoverList(this.ulElement.querySelector("."+wf.li)),this.incrementalSearch(t))},t.prototype.getNgDirective=function(){return"EJS-COMBOBOX"},t.prototype.setSearchBox=function(){return this.filterInput=this.inputElement,this.isFiltering()?this.inputWrapper:If},t.prototype.onActionComplete=function(t,i,n,o){var s=this;e.prototype.onActionComplete.call(this,t,i,n),this.isSelectCustom&&this.removeSelection(),!this.preventAutoFill&&"combobox"===this.getModuleName()&&this.isTyped&&setTimeout((function(){s.inlineSearch()}))},t.prototype.getFocusElement=function(){var e=this.isSelectCustom?{text:""}:this.getItemData(),t=m(this.list)?this.list:this.list.querySelector("."+wf.selected);if(e.text===this.inputElement.value&&!m(t))return t;if((ge.isDevice&&!this.isDropDownClick||!ge.isDevice)&&!m(this.liCollections)&&this.liCollections.length>0){var i=this.inputElement.value,n=this.sortedData,o=this.typeOfData(n).typeof,s=$u(i,this.liCollections,this.filterType,!0,n,this.fields,o).item;if(m(s))this.isSelectCustom&&""!==this.inputElement.value.trim()&&(this.removeFocus(),this.list.scrollTop=0);else{var a=this.getIndexByValue(s.getAttribute("data-value"))-1,r=parseInt(getComputedStyle(this.liCollections[0],null).getPropertyValue("height"),10);if(!isNaN(r)&&"autocomplete"!==this.getModuleName()){this.removeFocus();var l=this.fields.groupBy?this.liCollections[0].offsetHeight:0;this.list.scrollTop=a*r+l,be([s],wf.focus)}}return s}return null},t.prototype.setValue=function(t){return t&&"keydown"===t.type&&"enter"===t.action&&this.removeFillSelection(),this.autofill&&"combobox"===this.getModuleName()&&t&&"keydown"===t.type&&"enter"!==t.action?(this.preventAutoFill=!1,this.inlineSearch(t),!1):e.prototype.setValue.call(this,t)},t.prototype.checkCustomValue=function(){this.itemData=this.getDataByValue(this.value);var e=this.getItemData();this.allowCustom&&m(e.value)&&m(e.text)||this.setProperties({value:e.value},!this.allowCustom)},t.prototype.showSpinner=function(){m(this.spinnerElement)&&(this.spinnerElement="autocomplete"===this.getModuleName()?this.inputWrapper.buttons[0]||this.inputWrapper.clearButton||rs.appendSpan("e-input-group-icon "+Mf,this.inputWrapper.container,this.createElement):this.inputWrapper.buttons[0]||this.inputWrapper.clearButton,be([this.spinnerElement],wf.disableIcon),Nu({target:this.spinnerElement,width:ge.isDevice?"16px":"14px"},this.createElement),qu(this.spinnerElement))},t.prototype.hideSpinner=function(){m(this.spinnerElement)||(Qu(this.spinnerElement),Se([this.spinnerElement],wf.disableIcon),this.spinnerElement.classList.contains(Mf)?Ae(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)},t.prototype.setAutoFill=function(e,t){if(t||this.setHoverList(e),this.autofill&&!this.preventAutoFill){var i=this.getTextByValue(e.getAttribute("data-value")).toString(),n=this.getFormattedValue(e.getAttribute("data-value"));"combobox"===this.getModuleName()&&(this.isSelected||this.previousValue===n?this.updateSelectedItem(e,null,!0):(this.updateSelectedItem(e,null),this.isSelected=!0,this.previousValue=this.getFormattedValue(e.getAttribute("data-value")))),this.isAndroidAutoFill(i)||this.setAutoFillSelection(i,t)}},t.prototype.isAndroidAutoFill=function(e){if(ge.isAndroid){var t=this.getSelectionPoints(),i=this.prevSelectPoints.end,n=t.end,o=this.prevSelectPoints.start,s=t.start;return 0!==i&&(i===e.length&&o===e.length||o>s&&i>n||i===n&&o===s)}return!1},t.prototype.clearAll=function(t,i){(m(i)||!m(i)&&m(i.dataSource))&&e.prototype.clearAll.call(this,t),this.isFiltering()&&!m(t)&&t.target===this.inputWrapper.clearButton&&this.searchLists(t)},t.prototype.isSelectFocusItem=function(e){return!m(e)},t.prototype.inlineSearch=function(e){var t=e&&("down"===e.action||"up"===e.action||"home"===e.action||"end"===e.action||"pageUp"===e.action||"pageDown"===e.action),i=t?this.liCollections[this.activeIndex]:this.getFocusElement();if(m(i))if(""===this.inputElement.value){if(this.activeIndex=null,!m(this.list)){this.list.scrollTop=0;var n=this.list.querySelector("."+wf.li);this.setHoverList(n)}}else this.activeIndex=null,this.removeSelection(),this.liCollections&&this.liCollections.length>0&&!this.isCustomFilter&&this.removeFocus();else{if(!t){var o=this.getFormattedValue(i.getAttribute("data-value"));this.activeIndex=this.getIndexByValue(o),this.activeIndex=m(this.activeIndex)?null:this.activeIndex}this.preventAutoFill=""!==this.inputElement.value&&this.preventAutoFill,this.setAutoFill(i,t)}},t.prototype.incrementalSearch=function(e){this.showPopup(e),m(this.listData)||(this.inlineSearch(e),e.preventDefault())},t.prototype.setAutoFillSelection=function(e,t){void 0===t&&(t=!1);var i=this.getSelectionPoints(),n=this.inputElement.value.substr(0,i.start);if(n&&n.toLowerCase()===e.substr(0,i.start).toLowerCase()){var o=n+e.substr(n.length,e.length);rs.setValue(o,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(i.start,this.inputElement.value.length)}else t&&(rs.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(0,this.inputElement.value.length))},t.prototype.getValueByText=function(t){return e.prototype.getValueByText.call(this,t,!0,this.ignoreAccent)},t.prototype.unWireEvent=function(){"combobox"===this.getModuleName()&&(ye.remove(this.inputWrapper.buttons[0],"mousedown",this.preventBlur),ye.remove(this.inputWrapper.container,"blur",this.onBlurHandler)),m(this.inputWrapper.buttons[0])||ye.remove(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick),this.inputElement&&(ye.remove(this.inputElement,"focus",this.targetFocus),this.readonly||(ye.remove(this.inputElement,"input",this.onInput),ye.remove(this.inputElement,"keyup",this.onFilterUp),ye.remove(this.inputElement,"keydown",this.onFilterDown),ye.remove(this.inputElement,"paste",this.pasteHandler))),this.unBindCommonEvent()},t.prototype.setSelection=function(t,i){e.prototype.setSelection.call(this,t,i),m(t)||this.autofill||this.isDropDownClick||this.removeFocus()},t.prototype.selectCurrentItem=function(e){var t;this.isPopupOpen&&((t=this.isSelected?this.list.querySelector("."+wf.selected):this.list.querySelector("."+wf.focus))&&(this.setSelection(t,e),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e))),"enter"===e.action&&""===this.inputElement.value.trim()?this.clearAll(e):this.isTyped&&!this.isSelected&&m(t)&&this.customValue(e),this.hidePopup(e)},t.prototype.setHoverList=function(e){this.removeSelection(),this.isValidLI(e)&&!e.classList.contains(wf.selected)&&(this.removeFocus(),e.classList.add(wf.focus))},t.prototype.targetFocus=function(e){ge.isDevice&&!this.allowFiltering&&(this.preventFocus=!1),this.onFocus(e),rs.calculateWidth(this.inputElement,this.inputWrapper.container)},t.prototype.dropDownClick=function(t){t.preventDefault(),ge.isDevice&&!this.isFiltering()&&(this.preventFocus=!0),e.prototype.dropDownClick.call(this,t)},t.prototype.customValue=function(e){var t=this,i=this.getValueByText(this.inputElement.value);if(this.allowCustom||""===this.inputElement.value)if(""!==this.inputElement.value.trim()){var n=this.value;if(m(i)){var o=""===this.inputElement.value?null:this.inputElement.value,s={text:o,item:{}};this.initial?this.updateCustomValueCallback(o,s,n):this.trigger("customValueSpecifier",s,(function(i){t.updateCustomValueCallback(o,i,n,e)}))}else this.isSelectCustom=!1,this.setProperties({value:i}),n!==this.value&&this.onChangeEvent(e)}else this.allowCustom&&(this.isSelectCustom=!0);else{var a=this.previousValue,r=this.value;this.setProperties({value:i}),m(this.value)&&rs.setValue("",this.inputElement,this.floatLabelType,this.showClearButton),this.autofill&&a===this.value&&r!==this.value&&this.onChangeEvent(null)}},t.prototype.updateCustomValueCallback=function(e,t,i,n){var o=this.fields,s=t.item,a={};s&&l(o.text,s)&&l(o.value,s)?a=s:(d(o.text,e,a),d(o.value,e,a)),this.itemData=a;var r={text:l(o.text,this.itemData),value:l(o.value,this.itemData),index:null};this.setProperties(r,!0),this.setSelection(null,null),this.isSelectCustom=!0,i!==this.value&&this.onChangeEvent(n)},t.prototype.onPropertyChanged=function(t,i){"combobox"===this.getModuleName()&&(this.checkData(t),this.setUpdateInitial(["fields","query","dataSource"],t));for(var n=0,o=Object.keys(t);n<o.length;n++){var s=o[n];switch(s){case"readonly":rs.setReadonly(this.readonly,this.inputElement),this.readonly?(ye.remove(this.inputElement,"input",this.onInput),ye.remove(this.inputElement,"keyup",this.onFilterUp),ye.remove(this.inputElement,"keydown",this.onFilterDown)):(ye.add(this.inputElement,"input",this.onInput,this),ye.add(this.inputElement,"keyup",this.onFilterUp,this),ye.add(this.inputElement,"keydown",this.onFilterDown,this)),this.setReadOnly();break;case"allowFiltering":this.setSearchBox(),this.isFiltering()&&"combobox"===this.getModuleName()&&m(this.list)&&e.prototype.renderList.call(this);break;case"allowCustom":break;default:var a=this.getPropObject(s,t,i);e.prototype.onPropertyChanged.call(this,a.newProperty,a.oldProperty),this.isFiltering()&&"dataSource"===s&&m(this.list)&&this.itemTemplate&&"combobox"===this.getModuleName()&&e.prototype.renderList.call(this)}}},t.prototype.render=function(){e.prototype.render.call(this),this.setSearchBox(),this.isFiltering()&&"combobox"===this.getModuleName()&&m(this.list)&&e.prototype.renderList.call(this),this.renderComplete()},t.prototype.getModuleName=function(){return"combobox"},t.prototype.addItem=function(t,i){e.prototype.addItem.call(this,t,i)},t.prototype.filter=function(t,i,n){e.prototype.filter.call(this,t,i,n)},t.prototype.showPopup=function(t){e.prototype.showPopup.call(this,t)},t.prototype.hidePopup=function(t){var i=this.inputElement&&""===this.inputElement.value?null:this.inputElement&&this.inputElement.value;if(!m(this.listData)){var n=this.isEscapeKey;this.isEscapeKey&&(rs.setValue(this.typedString,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1),this.autofill&&this.removeFillSelection();var o=this.isSelectCustom?{text:""}:this.getItemData(),s=m(this.list)?null:this.list.querySelector("."+wf.selected);if(this.inputElement&&o.text===this.inputElement.value&&!m(s))return this.isSelected&&(this.onChangeEvent(t),this.isSelectCustom=!1),void e.prototype.hidePopup.call(this,t);if("combobox"===this.getModuleName()&&""!==this.inputElement.value.trim()){var a=this.sortedData,r=this.typeOfData(a).typeof,l=$u(this.inputElement.value,this.liCollections,"Equal",!0,a,this.fields,r);this.selectedLI=l.item,m(l.index)&&(l.index=$u(this.inputElement.value,this.liCollections,"StartsWith",!0,a,this.fields,r).index),this.activeIndex=l.index,m(this.selectedLI)?n&&(this.isSelectCustom=!0,this.removeSelection()):this.updateSelectedItem(this.selectedLI,null,!0)}this.isEscapeKey||!this.isTyped||this.isInteracted||this.customValue(t)}m(this.listData)&&this.allowCustom&&!m(i)&&i!==this.value&&this.customValue(),e.prototype.hidePopup.call(this,t)},t.prototype.focusIn=function(){this.enabled&&(ge.isDevice&&!this.isFiltering()&&(this.preventFocus=!0),e.prototype.focusIn.call(this))},t.prototype.clear=function(){this.value=null},t.prototype.focusOut=function(t){e.prototype.focusOut.call(this,t)},t.prototype.getItems=function(){return e.prototype.getItems.call(this)},t.prototype.getDataByValue=function(t){return e.prototype.getDataByValue.call(this,t)},t.prototype.renderHightSearch=function(){},xf([Ge(!1)],t.prototype,"autofill",void 0),xf([Ge(!0)],t.prototype,"allowCustom",void 0),xf([Ge({})],t.prototype,"htmlAttributes",void 0),xf([Ge(!1)],t.prototype,"allowFiltering",void 0),xf([Ge(null)],t.prototype,"query",void 0),xf([Ge(null)],t.prototype,"index",void 0),xf([Ge(!0)],t.prototype,"showClearButton",void 0),xf([Ge(!1)],t.prototype,"enableRtl",void 0),xf([$e()],t.prototype,"customValueSpecifier",void 0),xf([$e()],t.prototype,"filtering",void 0),xf([Ge(null)],t.prototype,"valueTemplate",void 0),xf([Ge("Never")],t.prototype,"floatLabelType",void 0),xf([Ge(null)],t.prototype,"filterBarPlaceholder",void 0),xf([Ge(null)],t.prototype,"cssClass",void 0),xf([Ge(null)],t.prototype,"headerTemplate",void 0),xf([Ge(null)],t.prototype,"footerTemplate",void 0),xf([Ge(null)],t.prototype,"placeholder",void 0),xf([Ge("100%")],t.prototype,"width",void 0),xf([Ge("300px")],t.prototype,"popupHeight",void 0),xf([Ge("100%")],t.prototype,"popupWidth",void 0),xf([Ge(!1)],t.prototype,"readonly",void 0),xf([Ge(null)],t.prototype,"text",void 0),xf([Ge(null)],t.prototype,"value",void 0),t=xf([et],t)}(Sf),Af=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),kf=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Vf="e-vertical",Ef="e-hamburger",Df=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.tempItems=[],n}return Af(t,e),t.prototype.getModuleName=function(){return"menu"},t.prototype.preRender=function(){if(this.isMenu=!0,this.element.id=this.element.id||y("ej2-menu"),this.template){try{document.querySelectorAll(this.template).length&&(this.template=document.querySelector(this.template).innerHTML.trim(),this.clearChanges())}catch(t){}this.updateMenuItems(this.items)}else this.updateMenuItems(this.items);e.prototype.preRender.call(this)},t.prototype.initialize=function(){e.prototype.initialize.call(this),Ve(this.element,{role:"menubar",tabindex:"0"}),"Vertical"===this.orientation?(this.element.classList.add(Vf),this.hamburgerMode&&!this.target&&this.element.previousElementSibling.classList.add(Vf),this.element.setAttribute("aria-orientation","vertical")):ge.isDevice&&!this.enableScrolling&&this.element.parentElement.classList.add("e-scrollable"),this.hamburgerMode&&(this.element.parentElement.classList.add(Ef),"Horizontal"===this.orientation&&this.element.classList.add("e-hide-menu"))},t.prototype.updateMenuItems=function(e){this.tempItems=e,this.items=[],this.tempItems.map(this.createMenuItems,this),this.setProperties({items:this.items},!0),this.tempItems=[]},t.prototype.onPropertyChanged=function(t,i){for(var n=this,o=0,s=Object.keys(t);o<s.length;o++){switch(s[o]){case"orientation":"Vertical"===t.orientation?(this.element.classList.add(Vf),this.hamburgerMode&&(this.target||this.element.previousElementSibling.classList.add(Vf),this.element.classList.remove("e-hide-menu")),this.element.setAttribute("aria-orientation","vertical")):(this.element.classList.remove(Vf),this.hamburgerMode&&(this.target||this.element.previousElementSibling.classList.remove(Vf),this.element.classList.add("e-hide-menu")),this.element.removeAttribute("aria-orientation"));break;case"items":Object.keys(i.items).length||this.updateMenuItems(t.items);break;case"hamburgerMode":this.element.previousElementSibling||e.prototype.createHeaderContainer.call(this),t.hamburgerMode?(this.element.parentElement.classList.add(Ef),[].slice.call(this.element.getElementsByClassName("e-blankicon")).forEach((function(e){e.style[n.enableRtl?"paddingRight":"paddingLeft"]=""}))):(this.element.parentElement.classList.remove(Ef),"Vertical"===this.orientation&&this.setBlankIconStyle(this.element)),"Vertical"===this.orientation?(this.target||this.element.previousElementSibling.classList.add(Vf),this.element.classList.remove("e-hide-menu")):(this.target?this.element.previousElementSibling.classList.add(Vf):this.element.previousElementSibling.classList.remove(Vf),this.element.classList[t.hamburgerMode?"add":"remove"]("e-hide-menu"));break;case"title":this.hamburgerMode&&this.element.previousElementSibling&&(t.title=this.enableHtmlSanitizer?Vi.sanitize(t.title):t.title,this.element.previousElementSibling.querySelector(".e-menu-title").innerHTML=t.title);break;case"target":this.hamburgerMode&&(this.unWireEvents(i.target),this.wireEvents(),"Horizontal"===this.orientation&&(t.target?this.element.previousElementSibling.classList.add(Vf):(this.element.previousElementSibling||e.prototype.createHeaderContainer.call(this),this.element.previousElementSibling.classList.remove(Vf)),this.element.classList.add("e-hide-menu")))}}e.prototype.onPropertyChanged.call(this,t,i)},t.prototype.createMenuItems=function(e){var t,i,n=this.items,o=this.getField("parentId");if(e[""+o]){for(t=this.getIndex(e[""+o].toString(),!0),i=0;i<t.length;i++)n[t[i]].items||(n[t[i]].items=[]),n=n[t[i]].items;n.push(e)}else this.items.push(e)},t.prototype.open=function(){e.prototype.openHamburgerMenu.call(this)},t.prototype.close=function(){e.prototype.closeHamburgerMenu.call(this)},kf([Ge("Horizontal")],t.prototype,"orientation",void 0),kf([Ge("")],t.prototype,"target",void 0),kf([Ge(null)],t.prototype,"template",void 0),kf([Ge(!1)],t.prototype,"enableScrolling",void 0),kf([Ge(!1)],t.prototype,"hamburgerMode",void 0),kf([Ge("Menu")],t.prototype,"title",void 0),kf([Ge(!1)],t.prototype,"enableHtmlSanitizer",void 0),kf([Je({itemId:"id",text:"text",parentId:"parentId",iconCss:"iconCss",url:"url",separator:"separator",children:"items"},fd)],t.prototype,"fields",void 0),t=kf([et],t)}(yd),Nf=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ff=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};function Lf(e,t){for(var i=f({},e),n=0,o=Object.keys(i);n<o.length;n++){var s=o[n];t.indexOf(s)<0&&h(i,s)}return i}function Pf(e,t){var i=40===t?0:e.childElementCount-1,n=i,o=e.querySelector(".e-selected");o&&o.classList.remove("e-selected");for(var s=0,a=e.children.length;s<a;s++)e.children[s].classList.contains("e-focused")&&(n=s,e.children[s].classList.remove("e-focused"),40===t?n++:n--,n===(40===t?e.childElementCount:-1)&&(n=i));-1!==(n=Of(e,e.children[n],n,t))&&(be([e.children[n]],"e-focused"),e.children[n].focus())}function Of(e,t,i,n,o){if(void 0===o&&(o=0),(t.classList.contains("e-separator")||t.classList.contains("e-disabled"))&&(i===(40===n?e.childElementCount-1:0)?i=40===n?0:e.childElementCount-1:40===n?i++:i--),(t=e.children[i]).classList.contains("e-separator")||t.classList.contains("e-disabled")){if(++o===e.childElementCount)return-1;i=Of(e,t,i,n,o)}return i}var Bf,zf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Nf(t,e),Ff([Ge("")],t.prototype,"iconCss",void 0),Ff([Ge("")],t.prototype,"id",void 0),Ff([Ge(!1)],t.prototype,"separator",void 0),Ff([Ge("")],t.prototype,"text",void 0),Ff([Ge("")],t.prototype,"url",void 0),Ff([Ge(!1)],t.prototype,"disabled",void 0),t}(mt),jf=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Rf=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},_f="e-menu-icon",Hf="e-item",Wf="e-dropdown-popup",Uf="e-separator",qf="e-vertical",Yf=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.isPopupCreated=!0,n}return jf(t,e),t.prototype.preRender=function(){},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.toggle=function(){this.canOpen()?this.openPopUp():this.closePopup()},t.prototype.render=function(){this.initialize(),this.disabled||this.wireEvents(),this.renderComplete()},t.prototype.addItems=function(e,t){for(var i,n=this.items.length,o=0,s=this.items.length;o<s;o++)if(t===this.items[o].text){n=o;break}for(var a=e.length-1;a>=0;a--)i=new zf(this,"items",e[a],!0),this.items.splice(n,0,i);this.canOpen()||this.createItems()},t.prototype.removeItems=function(e,t){for(var i=!1,n=0,o=e.length;n<o;n++)for(var s=0,a=this.items.length;s<a;s++)if(e[n]===(t?this.items[s].id:this.items[s].text)){this.items.splice(s,1),i=!0;break}i&&this.getULElement()&&this.createItems()},t.prototype.createPopup=function(){var e,t=this.createElement("div",{className:Wf,id:this.element.id+"-popup"});document.body.appendChild(t),this.dropDown=new Ln(t,{relateTo:this.element,collision:{X:"fit",Y:"flip"},position:{X:"left",Y:"bottom"},targetType:"relative",content:this.target?this.getTargetElement():"",enableRtl:this.enableRtl}),"fixed"===this.dropDown.element.style.position&&this.dropDown.refreshPosition(this.element),this.dropDown.hide(),Ve(this.element,((e={})["aria-haspopup"]=this.items.length||this.target?"true":"false",e["aria-expanded"]="false",e.type="button",e["aria-label"]=this.element.textContent?this.element.textContent:"dropdownbutton",e)),this.cssClass&&be([t],this.cssClass.split(" ")),this.isPopupCreated=!0},t.prototype.getTargetElement=function(){return"string"===typeof this.target?Ee(this.target):this.target},t.prototype.createItems=function(e){var t,i,n,o,s=this.items,a=this.hasIcon(this.items,"iconCss"),r=this.getULElement();r?r.innerHTML="":r=this.createElement("ul",{attrs:{role:"menu",tabindex:"0"}});for(var l=0;l<s.length;l++){var d=(i=s[l]).text;n=this.createElement("li",{innerHTML:i.url?"":d,className:i.separator?Hf+" "+Uf:Hf,attrs:i.separator?{role:"separator",tabindex:"-1"}:{role:"menuitem",tabindex:"-1","aria-label":d},id:i.id?i.id:y("e-"+this.getModuleName()+"-item")}),this.enableHtmlSanitizer?n.textContent=i.url?"":d:n.innerHTML=i.url?"":d,i.url&&(n.appendChild(this.createAnchor(i)),n.classList.add("e-url")),i.iconCss?(t=this.createElement("span",{className:_f+" "+i.iconCss}),i.url?n.childNodes[0].appendChild(t):n.insertBefore(t,n.childNodes[0])):a&&!i.separator&&n.classList.add("e-blank-icon"),i.disabled&&n.classList.add("e-disabled"),o={item:i,element:n},this.trigger("beforeItemRender",o),r.appendChild(n)}e&&this.getPopUpElement().appendChild(r),a&&function(e,t){var i=[].slice.call(e.getElementsByClassName("e-blank-icon"));if(t&&[].slice.call(e.getElementsByClassName("e-item")).forEach((function(e){(e.style.paddingLeft||e.style.paddingRight)&&e.removeAttribute("style")})),i.length){var n=e.querySelector(".e-item:not(.e-blank-icon):not(.e-separator)");if(!m(n)){n.classList.contains("e-url")&&(n=n.querySelector(".e-menu-url"));var o,s=n.querySelector(".e-menu-icon"),a=e.classList.contains("e-rtl");o=a?{padding:"paddingRight",margin:"marginLeft"}:{padding:"paddingLeft",margin:"marginRight"};var r=parseInt(getComputedStyle(s).fontSize,10)+parseInt(getComputedStyle(s)[o.margin],10)+parseInt(getComputedStyle(n).paddingLeft,10)+"px";i.forEach((function(e){e.classList.contains("e-url")?e.querySelector(".e-menu-url").style[o.padding]=r:e.style[o.padding]=r}))}}}(this.getPopUpElement())},t.prototype.hasIcon=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i][""+t])return!0;return!1},t.prototype.createAnchor=function(e){var t=this.enableHtmlSanitizer?Vi.sanitize(e.text):e.text;return this.createElement("a",{className:"e-menu-text e-menu-url",innerHTML:t,attrs:{href:e.url}})},t.prototype.initialize=function(){this.button=new Qi({iconCss:this.iconCss,iconPosition:this.iconPosition,cssClass:this.cssClass,content:this.content,disabled:this.disabled,enableRtl:this.enableRtl,enablePersistence:this.enablePersistence}),this.button.createElement=this.createElement,this.button.appendTo(this.element),this.element.id||(this.element.id=y("e-"+this.getModuleName())),this.appendArrowSpan(),this.setActiveElem([this.element]),this.target&&!this.isColorPicker()||!this.createPopupOnClick?this.createPopup():this.isPopupCreated=!1},t.prototype.isColorPicker=function(){if(!this.element)return!1;var e=this.element.previousSibling;return!!(e&&e.classList&&e.classList.contains("e-split-colorpicker"))},t.prototype.appendArrowSpan=function(){this.element.appendChild(this.createElement("span",{className:"e-btn-icon e-icons e-icon-"+(this.cssClass.indexOf(qf)>-1?"bottom":"right")+" e-caret"}))},t.prototype.setActiveElem=function(e){this.activeElem=e},t.prototype.getModuleName=function(){return"dropdown-btn"},t.prototype.canOpen=function(){var e=!1;return this.isPopupCreated&&(e=this.getPopUpElement().classList.contains("e-popup-close")),e},t.prototype.destroy=function(){var t,i=this;(e.prototype.destroy.call(this),"dropdown-btn"===this.getModuleName())&&(this.element.querySelector("span.e-caret")&&Ae(this.element.querySelector("span.e-caret")),this.cssClass&&(t=this.cssClass.split(" ")),this.button.destroy(),t&&Se([this.element],t),Se(this.activeElem,["e-active"]),(this.element.getAttribute("class")?["aria-haspopup","aria-expanded","aria-owns","type"]:["aria-haspopup","aria-expanded","aria-owns","type","class"]).forEach((function(e){i.element.removeAttribute(e)})),this.popupUnWireEvents(),this.destroyPopup(),this.isPopupCreated=!1,this.disabled||this.unWireEvents())},t.prototype.destroyPopup=function(){if(this.isPopupCreated){if(this.dropDown.destroy(),this.getPopUpElement()){var e=document.getElementById(this.getPopUpElement().id);e&&(Se([e],["e-popup-open","e-popup-close"]),Ae(e))}ye.remove(this.getPopUpElement(),"click",this.clickHandler),ye.remove(this.getPopUpElement(),"keydown",this.keyBoardHandler),this.isPopupCreated&&(this.dropDown=void 0)}this.isPopupCreated=!1},t.prototype.getPopUpElement=function(){var e=null;return this.dropDown&&(e=this.dropDown.element),e},t.prototype.getULElement=function(){var e=null;return this.getPopUpElement()&&(e=this.getPopUpElement().children[0]),e},t.prototype.wireEvents=function(){this.delegateMousedownHandler=this.mousedownHandler.bind(this),this.createPopupOnClick||ye.add(document,"mousedown touchstart",this.delegateMousedownHandler,this),ye.add(this.element,"click",this.clickHandler,this),ye.add(this.element,"keydown",this.keyBoardHandler,this)},t.prototype.popupWireEvents=function(){var e=this.getPopUpElement();this.createPopupOnClick&&ye.add(document,"mousedown touchstart",this.delegateMousedownHandler,this),e&&(ye.add(e,"click",this.clickHandler,this),ye.add(e,"keydown",this.keyBoardHandler,this),this.closeActionEvents&&ye.add(e,this.closeActionEvents,this.focusoutHandler,this)),this.rippleFn=at(e,{selector:"."+Hf})},t.prototype.popupUnWireEvents=function(){var e=this.getPopUpElement();this.createPopupOnClick&&ye.remove(document,"mousedown touchstart",this.delegateMousedownHandler),e&&e.parentElement&&(ye.remove(e,"click",this.clickHandler),ye.remove(e,"keydown",this.keyBoardHandler),this.closeActionEvents&&ye.remove(e,this.closeActionEvents,this.focusoutHandler)),pt&&this.rippleFn&&this.rippleFn()},t.prototype.keyBoardHandler=function(e){if(e.target!==this.element||9!==e.keyCode&&(e.altKey||40!==e.keyCode)&&38!==e.keyCode)switch(e.keyCode){case 38:case 40:!e.altKey||38!==e.keyCode&&40!==e.keyCode?this.upDownKeyHandler(e):this.keyEventHandler(e);break;case 9:case 13:case 27:case 32:this.keyEventHandler(e)}},t.prototype.upDownKeyHandler=function(e){(!this.target||38!==e.keyCode&&40!==e.keyCode)&&(e.preventDefault(),Pf(this.getULElement(),e.keyCode))},t.prototype.keyEventHandler=function(e){(!this.target||13!==e.keyCode&&9!==e.keyCode)&&(e.target&&e.target.className.indexOf("e-edit-template")>-1&&32===e.keyCode||(9!==e.keyCode&&e.preventDefault(),27===e.keyCode||38===e.keyCode||9===e.keyCode?this.canOpen()||this.closePopup(e,this.element):this.clickHandler(e)))},t.prototype.getLI=function(e){return"LI"===e.tagName?e:Fe(e,"li")},t.prototype.mousedownHandler=function(e){var t=e.target;!this.dropDown||this.canOpen()||Fe(t,'[id="'+this.getPopUpElement().id+'"]')||Fe(t,'[id="'+this.element.id+'"]')||this.closePopup(e)},t.prototype.focusoutHandler=function(e){if(this.isPopupCreated&&!this.canOpen()){var t=e.relatedTarget;if(t&&t.className.indexOf("e-item")>-1){var i=this.getLI(t);if(i){var n=Array.prototype.indexOf.call(this.getULElement().children,i),o=this.items[n];if(o){var s={element:i,item:o};this.trigger("select",s)}}}this.closePopup(e)}},t.prototype.clickHandler=function(e){var t=e.target;if(Fe(t,'[id="'+this.element.id+'"]'))!this.createPopupOnClick||this.target&&!this.isColorPicker()?this.getPopUpElement().classList.contains("e-popup-close")?this.openPopUp(e):this.closePopup(e):this.isPopupCreated?this.closePopup(e,this.activeElem[0]):(this.createPopup(),this.openPopUp(e));else if(Fe(t,'[id="'+this.getPopUpElement().id+'"]')){var i=void 0,n=void 0,o=void 0,s=this.getLI(t);s&&(n=Array.prototype.indexOf.call(this.getULElement().children,s),(o=this.items[n])&&(i={element:s,item:o},this.trigger("select",i)),this.closePopup(e,this.activeElem[0]))}},t.prototype.openPopUp=function(e){var t=this;void 0===e&&(e=null);var i=this.getPopUpElement();if(this.target)if(this.activeElem.length>1){var n=je(this.activeElem[0],"split-btn");n.isReact&&i.childNodes.length<1&&(!0,n.appendReactElement(this.getTargetElement(),this.getPopUpElement()),this.renderReactTemplates())}else this.isReact&&i.childNodes.length<1&&(!0,this.appendReactElement(this.getTargetElement(),this.getPopUpElement()),this.renderReactTemplates());else this.createItems(!0);var o=this.getULElement();this.popupWireEvents();var s={element:o,items:this.items,event:e,cancel:!1};this.trigger("beforeOpen",s,(function(e){if(!e.cancel){var i=t.getULElement();t.dropDown.show(null,t.element),be([t.element],"e-active"),t.element.setAttribute("aria-expanded","true"),t.element.setAttribute("aria-owns",t.getPopUpElement().id),i&&i.focus();var n={element:i,items:t.items};t.trigger("open",n)}}))},t.prototype.closePopup=function(e,t){var i=this;void 0===e&&(e=null);var n=this.getULElement(),o={element:n,items:this.items,event:e,cancel:!1};this.trigger("beforeClose",o,(function(e){if(e.cancel)n&&n.focus();else{var o=i.getPopUpElement();o&&ye.remove(o,"keydown",i.keyBoardHandler),i.popupUnWireEvents();var s=i.getULElement(),a=void 0;s&&(a=s.querySelector(".e-selected")),a&&a.classList.remove("e-selected"),i.dropDown.hide(),Se(i.activeElem,"e-active"),i.element.setAttribute("aria-expanded","false"),i.element.removeAttribute("aria-owns"),t&&t.focus();var r={element:s,items:i.items};i.trigger("close",r),!i.target&&s&&Ae(s),i.target&&!i.isColorPicker()||i.createPopupOnClick&&i.destroyPopup(),i.target&&(i.isPopupCreated=!i.createPopupOnClick)}}))},t.prototype.unWireEvents=function(){this.createPopupOnClick||ye.remove(document,"mousedown touchstart",this.delegateMousedownHandler),ye.remove(this.element,"click",this.clickHandler),ye.remove(this.element,"keydown",this.keyBoardHandler),this.isPopupCreated&&(ye.remove(this.getPopUpElement(),"click",this.clickHandler),ye.remove(this.getPopUpElement(),"keydown",this.keyBoardHandler))},t.prototype.onPropertyChanged=function(e,t){var i;this.button.setProperties(Lf(e,["content","cssClass","iconCss","iconPosition","disabled","enableRtl"])),this.isPopupCreated&&(i=this.getPopUpElement(),this.dropDown.setProperties(Lf(e,["enableRtl"])));for(var n=0,o=Object.keys(e);n<o.length;n++){switch(o[n]){case"content":this.element.querySelector("span.e-caret")||this.appendArrowSpan();break;case"disabled":e.disabled?(this.unWireEvents(),this.isPopupCreated&&!this.canOpen()&&this.closePopup()):this.wireEvents();break;case"cssClass":if(e.cssClass.indexOf(qf)>-1||t.cssClass.indexOf(qf)>-1){this.element.querySelector("span.e-caret")||this.appendArrowSpan();var s=this.element.querySelector("span.e-caret");e.cssClass.indexOf(qf)>-1?Pe(s,["e-icon-bottom"],["e-icon-right"]):Pe(s,["e-icon-right"],["e-icon-bottom"])}this.isPopupCreated&&(t.cssClass&&Se([i],t.cssClass.split(" ")),e.cssClass&&be([i],e.cssClass.split(" ")));break;case"target":this.dropDown.content=this.getTargetElement(),this.dropDown.dataBind();break;case"items":this.isPopupCreated&&this.getULElement()&&this.createItems();break;case"createPopupOnClick":e.createPopupOnClick?this.destroyPopup():this.createPopup()}}},t.prototype.focusIn=function(){this.element.focus()},Rf([Ge("")],t.prototype,"content",void 0),Rf([Ge("")],t.prototype,"cssClass",void 0),Rf([Ge(!1)],t.prototype,"disabled",void 0),Rf([Ge("")],t.prototype,"iconCss",void 0),Rf([Ge("Left")],t.prototype,"iconPosition",void 0),Rf([Ge(!1)],t.prototype,"enableHtmlSanitizer",void 0),Rf([Ke([],zf)],t.prototype,"items",void 0),Rf([Ge(!1)],t.prototype,"createPopupOnClick",void 0),Rf([Ge("")],t.prototype,"target",void 0),Rf([Ge("")],t.prototype,"closeActionEvents",void 0),Rf([$e()],t.prototype,"beforeItemRender",void 0),Rf([$e()],t.prototype,"beforeOpen",void 0),Rf([$e()],t.prototype,"beforeClose",void 0),Rf([$e()],t.prototype,"close",void 0),Rf([$e()],t.prototype,"open",void 0),Rf([$e()],t.prototype,"select",void 0),Rf([$e()],t.prototype,"created",void 0),t=Rf([et],t)}(Dt),Qf=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Zf=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Xf="e-rtl",Gf="EJS-SPLITBUTTON",Jf=function(e){function t(t,i){return e.call(this,t,i)||this}return Qf(t,e),t.prototype.preRender=function(){var e=this.element;if(e.tagName===Gf){for(var t=l("ej2_instances",e),i=this.createElement("button",{attrs:{type:"button"}}),n=this.createElement(Gf,{className:"e-"+this.getModuleName()+"-wrapper"}),o=0,s=e.attributes.length;o<s;o++)i.setAttribute(e.attributes[o].nodeName,e.attributes[o].nodeValue);e.parentNode.insertBefore(n,e),Ae(e),e=i,n.appendChild(e),d("ej2_instances",t,e),this.wrapper=n,this.element=e}this.element.id||(this.element.id=y("e-"+this.getModuleName()))},t.prototype.render=function(){this.initWrapper(),this.createPrimaryButton(),this.renderControl()},t.prototype.renderControl=function(){this.createSecondaryButton(),this.setActiveElem([this.element,this.secondaryBtnObj.element]),this.setAria(),this.wireEvents(),this.renderComplete()},t.prototype.addItems=function(t,i){e.prototype.addItems.call(this,t,i),this.secondaryBtnObj.items=this.items},t.prototype.removeItems=function(t,i){e.prototype.removeItems.call(this,t,i),this.secondaryBtnObj.items=this.items},t.prototype.initWrapper=function(){this.wrapper||(this.wrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"}),this.element.parentNode.insertBefore(this.wrapper,this.element)),this.element.classList.remove("e-"+this.getModuleName()),this.enableRtl&&this.wrapper.classList.add(Xf),this.cssClass&&be([this.wrapper],this.cssClass.split(" "))},t.prototype.createPrimaryButton=function(){var e={cssClass:this.cssClass,enableRtl:this.enableRtl,iconCss:this.iconCss,iconPosition:this.iconPosition,content:this.content,disabled:this.disabled};this.primaryBtnObj=new Qi(e),this.primaryBtnObj.createElement=this.createElement,this.primaryBtnObj.appendTo(this.element),this.element.classList.add("e-"+this.getModuleName()),this.element.type="button",this.wrapper.appendChild(this.element)},t.prototype.createSecondaryButton=function(){var e=this,t=this.createElement("button",{className:"e-icon-btn",attrs:{tabindex:"-1"},id:this.element.id+"_dropdownbtn"});this.wrapper.appendChild(t);var i={cssClass:this.cssClass,disabled:this.disabled,enableRtl:this.enableRtl,items:this.items,target:this.target,createPopupOnClick:this.createPopupOnClick,beforeItemRender:function(t){e.createPopupOnClick&&(e.secondaryBtnObj.dropDown.relateTo=e.wrapper,e.dropDown=e.secondaryBtnObj.dropDown),e.trigger("beforeItemRender",t)},open:function(t){e.trigger("open",t)},close:function(t){e.trigger("close",t)},select:function(t){e.trigger("select",t)},beforeOpen:function(t){e.createPopupOnClick&&0==e.items.length&&(e.secondaryBtnObj.dropDown.relateTo=e.wrapper,e.dropDown=e.secondaryBtnObj.dropDown);var i=new Kf;return e.trigger("beforeOpen",t,(function(e){i.resolve(e)})),i},beforeClose:function(t){var i=new Kf;return e.trigger("beforeClose",t,(function(e){i.resolve(e)})),i}};this.secondaryBtnObj=new Yf(i),this.secondaryBtnObj.createElement=this.createElement,this.secondaryBtnObj.appendTo(t),this.createPopupOnClick||(this.secondaryBtnObj.dropDown.relateTo=this.wrapper,this.dropDown=this.secondaryBtnObj.dropDown),this.secondaryBtnObj.activeElem=[this.element,this.secondaryBtnObj.element],this.secondaryBtnObj.element.querySelector(".e-btn-icon").classList.remove("e-icon-right")},t.prototype.setAria=function(){Ve(this.element,{"aria-expanded":"false","aria-haspopup":"true","aria-label":this.element.textContent+" splitbutton","aria-owns":this.element.id+"_dropdownbtn-popup"})},t.prototype.getModuleName=function(){return"split-btn"},t.prototype.toggle=function(){this.secondaryBtnObj.toggle()},t.prototype.destroy=function(){var t=this,i=[Xf];if(this.cssClass&&(i=i.concat(this.cssClass.split(" "))),this.element){var n=document.getElementById(this.element.id);n&&n.parentElement===this.wrapper&&(this.wrapper.tagName===Gf?(this.wrapper.innerHTML="",Se([this.wrapper],["e-rtl","e-"+this.getModuleName()+"-wrapper"]),Se([this.wrapper],this.cssClass.split(" "))):(Se([this.element],i),["aria-label","aria-haspopup","aria-expanded","aria-owns","type"].forEach((function(e){t.element.removeAttribute(e)})),this.wrapper.parentNode.insertBefore(this.element,this.wrapper),ke(this.wrapper)),this.unWireEvents())}this.primaryBtnObj.destroy(),this.secondaryBtnObj.destroy(),e.prototype.destroy.call(this),this.element.getAttribute("class")||this.element.removeAttribute("class")},t.prototype.wireEvents=function(){ye.add(this.element,"click",this.primaryBtnClickHandler,this),new Ut(this.element,{keyAction:this.btnKeyBoardHandler.bind(this),keyConfigs:{altdownarrow:"alt+downarrow"}})},t.prototype.unWireEvents=function(){ye.remove(this.element,"click",this.primaryBtnClickHandler),x(this.element,Ut).destroy()},t.prototype.primaryBtnClickHandler=function(){this.trigger("click",{element:this.element})},t.prototype.btnKeyBoardHandler=function(e){if("altdownarrow"===e.action)this.clickHandler(e)},t.prototype.onPropertyChanged=function(e,t){var i=["content","iconCss","iconPosition","cssClass","disabled","enableRtl"];this.primaryBtnObj.setProperties(Lf(e,i)),i=["beforeOpen","beforeItemRender","select","open","close","cssClass","disabled","enableRtl","createPopupOnClick"],Object.keys(e).indexOf("items")>-1&&(this.secondaryBtnObj.items=e.items,this.secondaryBtnObj.dataBind()),this.secondaryBtnObj.setProperties(Lf(e,i));for(var n=0,o=Object.keys(e);n<o.length;n++){switch(o[n]){case"cssClass":t.cssClass&&Se([this.wrapper],t.cssClass.split(" ")),be([this.wrapper],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?be([this.wrapper],Xf):Se([this.wrapper],Xf)}}},t.prototype.focusIn=function(){this.element.focus()},Zf([Ge("")],t.prototype,"content",void 0),Zf([Ge("")],t.prototype,"cssClass",void 0),Zf([Ge(!1)],t.prototype,"disabled",void 0),Zf([Ge("")],t.prototype,"iconCss",void 0),Zf([Ge("Left")],t.prototype,"iconPosition",void 0),Zf([Ge(!1)],t.prototype,"createPopupOnClick",void 0),Zf([Ke([],zf)],t.prototype,"items",void 0),Zf([Ge("")],t.prototype,"target",void 0),Zf([$e()],t.prototype,"beforeItemRender",void 0),Zf([$e()],t.prototype,"beforeOpen",void 0),Zf([$e()],t.prototype,"beforeClose",void 0),Zf([$e()],t.prototype,"click",void 0),Zf([$e()],t.prototype,"close",void 0),Zf([$e()],t.prototype,"open",void 0),Zf([$e()],t.prototype,"select",void 0),Zf([$e()],t.prototype,"created",void 0),t=Zf([et],t)}(Yf),Kf=function(){var e=this;this.promise=new Promise((function(t,i){e.resolve=t,e.reject=i})),this.catch=this.promise.catch.bind(this.promise),this.then=this.promise.then.bind(this.promise)},$f=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),em=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},tm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $f(t,e),em([Ge("None")],t.prototype,"placement",void 0),em([Ge(10)],t.prototype,"largeStep",void 0),em([Ge(1)],t.prototype,"smallStep",void 0),em([Ge(!1)],t.prototype,"showSmallTicks",void 0),em([Ge(null)],t.prototype,"format",void 0),t}(mt),im=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $f(t,e),em([Ge(null)],t.prototype,"color",void 0),em([Ge(null)],t.prototype,"start",void 0),em([Ge(null)],t.prototype,"end",void 0),t}(mt),nm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $f(t,e),em([Ge(!1)],t.prototype,"enabled",void 0),em([Ge(null)],t.prototype,"minStart",void 0),em([Ge(null)],t.prototype,"minEnd",void 0),em([Ge(null)],t.prototype,"maxStart",void 0),em([Ge(null)],t.prototype,"maxEnd",void 0),em([Ge(!1)],t.prototype,"startHandleFixed",void 0),em([Ge(!1)],t.prototype,"endHandleFixed",void 0),t}(mt),om=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $f(t,e),em([Ge("")],t.prototype,"cssClass",void 0),em([Ge("Before")],t.prototype,"placement",void 0),em([Ge("Focus")],t.prototype,"showOn",void 0),em([Ge(!1)],t.prototype,"isVisible",void 0),em([Ge(null)],t.prototype,"format",void 0),t}(mt),sm="e-slider",am="e-rtl",rm="e-slider-input",lm="e-control-wrapper",dm="e-handle",hm="e-range",pm="e-slider-button",cm="e-first-button",um="e-second-button",fm="e-scale",mm="e-tick",gm="e-large",ym="e-tick-value",vm="e-slider-tooltip",wm="e-slider-hover",bm="e-handle-first",Sm="e-handle-second",Cm="e-disabled",xm="e-slider-container",Mm="e-slider-horizontal-before",Im="e-slider-horizontal-after",Tm="e-slider-vertical-before",Am="e-slider-vertical-after",km="e-material-tooltip-open",Vm="e-tooltip-active",Em="e-material-slider",Dm="e-slider-track",Nm="e-slider-horizantal-color",Fm="e-slider-vertical-color",Lm="e-handle-focused",Pm="e-vertical",Om="e-horizontal",Bm="e-handle-start",zm="e-material-tooltip-start",jm="e-tab-handle",Rm="e-button-icon",_m="e-small-size",Hm="e-tick-pos",Wm="e-first-tick",Um="e-last-tick",qm="e-slider-btn",Ym="e-tab-track",Qm="e-tab-range",Zm="e-handle-active",Xm="e-material-handle",Gm="e-material-range",Jm="e-material-default",Km="e-material-tooltip-show",$m="e-material-tooltip-hide",eg="e-read-only",tg="e-limits",ig="e-limit-bar",ng="e-limit-first",og="e-limit-second",sg="e-drag-horizontal",ag="e-drag-vertical",rg=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.horDir="left",n.verDir="bottom",n.transition={handle:"left .4s cubic-bezier(.25, .8, .25, 1), right .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1) , bottom .4s cubic-bezier(.25, .8, .25, 1)",rangeBar:"all .4s cubic-bezier(.25, .8, .25, 1)"},n.transitionOnMaterialTooltip={handle:"left 1ms ease-out, right 1ms ease-out, bottom 1ms ease-out, top 1ms ease-out",rangeBar:"left 1ms ease-out, right 1ms ease-out, bottom 1ms ease-out, width 1ms ease-out, height 1ms ease-out"},n.scaleTransform="transform .4s cubic-bezier(.25, .8, .25, 1)",n.customAriaText=null,n.drag=!0,n.isDragComplete=!1,n.initialTooltip=!0,n}return $f(t,e),t.prototype.preRender=function(){this.l10n=new qt("slider",{incrementTitle:"Increase",decrementTitle:"Decrease"},this.locale),this.isElementFocused=!1,this.tickElementCollection=[],this.tooltipFormatInfo={},this.ticksFormatInfo={},this.initCultureInfo(),this.initCultureFunc(),this.formChecker()},t.prototype.formChecker=function(){var e=Fe(this.element,"form");e?(this.isForm=!0,m(this.formResetValue)||this.setProperties({value:this.formResetValue},!0),this.formResetValue=this.value,"Range"!==this.type||!m(this.formResetValue)&&"object"===typeof this.formResetValue?m(this.formResetValue)&&(this.formResetValue=parseFloat(b(this.min))):this.formResetValue=[parseFloat(b(this.min)),parseFloat(b(this.max))],this.formElement=e):this.isForm=!1},t.prototype.initCultureFunc=function(){this.internationalization=new ee(this.locale)},t.prototype.initCultureInfo=function(){this.tooltipFormatInfo.format=m(this.tooltip.format)?null:this.tooltip.format,this.ticksFormatInfo.format=m(this.ticks.format)?null:this.ticks.format},t.prototype.formatString=function(e,t){var i=null,n=null;if(e||0===e){i=this.formatNumber(e);var o=this.numberOfDecimals(e);n=this.internationalization.getNumberFormat(t)(this.makeRoundNumber(e,o))}return{elementVal:i,formatString:n}},t.prototype.formatNumber=function(e){var t=this.numberOfDecimals(e);return this.internationalization.getNumberFormat({maximumFractionDigits:t,minimumFractionDigits:t,useGrouping:!1})(e)},t.prototype.numberOfDecimals=function(e){var t=e.toString().split(".")[1];return t&&t.length?t.length:0},t.prototype.makeRoundNumber=function(e,t){var i=t||0;return Number(e.toFixed(i))},t.prototype.fractionalToInteger=function(e){e=0===this.numberOfDecimals(e)?Number(e).toFixed(this.noOfDecimals):e;for(var t=1,i=0;i<this.noOfDecimals;i++)t*=10;return e=Number((e*t).toFixed(0))},t.prototype.render=function(){var e=this;this.initialize(),this.initRender(),this.wireEvents(),this.setZindex(),this.renderComplete(),"EJS-SLIDER"===this.element.tagName&&"none"==this.getTheme(this.sliderContainer)&&setTimeout((function(){e.refresh()}),0)},t.prototype.initialize=function(){be([this.element],sm),this.setCSSClass()},t.prototype.setElementWidth=function(e){m(e)||("number"===typeof e?this.sliderContainer.style.width=b(e):"string"===typeof e&&(this.sliderContainer.style.width=e.match(/px|%|em/)?e:b(e)))},t.prototype.setCSSClass=function(e){e&&Se([this.element],e.split(" ")),this.cssClass&&be([this.element],this.cssClass.split(" "))},t.prototype.setEnabled=function(){this.enabled?(Se([this.sliderContainer],[Cm]),this.tooltip.isVisible&&this.tooltipElement&&"Always"===this.tooltip.showOn&&this.tooltipElement.classList.remove(Cm),this.wireEvents()):(be([this.sliderContainer],[Cm]),this.tooltip.isVisible&&this.tooltipElement&&"Always"===this.tooltip.showOn&&this.tooltipElement.classList.add(Cm),this.unwireEvents())},t.prototype.getTheme=function(e){return window.getComputedStyle(e,":after").getPropertyValue("content").replace(/['"]+/g,"")},t.prototype.initRender=function(){this.sliderContainer=this.createElement("div",{className:xm+" "+lm}),this.element.parentNode.insertBefore(this.sliderContainer,this.element),this.sliderContainer.appendChild(this.element),this.sliderTrack=this.createElement("div",{className:Dm}),this.element.appendChild(this.sliderTrack),this.setElementWidth(this.width),this.element.tabIndex=-1,this.getThemeInitialization(),this.setHandler(),this.createRangeBar(),this.limits.enabled&&this.createLimitBar(),this.setOrientClass(),this.hiddenInput=this.createElement("input",{attrs:{type:"hidden",value:m(this.value)?this.min.toString():this.value.toString(),name:this.element.getAttribute("name")||this.element.getAttribute("id")||"_"+(1e3*Math.random()).toFixed(0)+"slider",class:rm}}),this.hiddenInput.tabIndex=-1,this.sliderContainer.appendChild(this.hiddenInput),this.showButtons&&this.setButtons(),this.setEnableRTL(),"Range"===this.type?this.rangeValueUpdate():this.value=m(this.value)?parseFloat(b(this.min.toString())):this.value,this.previousVal="Range"!==this.type?this.checkHandleValue(parseFloat(b(this.value.toString()))):[this.checkHandleValue(parseFloat(b(this.value[0].toString()))),this.checkHandleValue(parseFloat(b(this.value[1].toString())))],this.previousChanged=this.previousVal,m(this.element.hasAttribute("name"))||this.element.removeAttribute("name"),this.setValue(),this.limits.enabled&&this.setLimitBar(),"None"!==this.ticks.placement&&this.renderScale(),this.tooltip.isVisible&&this.renderTooltip(),this.enabled?Se([this.sliderContainer],[Cm]):be([this.sliderContainer],[Cm]),this.readonly?be([this.sliderContainer],[eg]):Se([this.sliderContainer],[eg])},t.prototype.getThemeInitialization=function(){this.isMaterial="material"===this.getTheme(this.sliderContainer)||"material-dark"===this.getTheme(this.sliderContainer),this.isBootstrap="bootstrap"===this.getTheme(this.sliderContainer)||"bootstrap-dark"===this.getTheme(this.sliderContainer),this.isBootstrap4="bootstrap4"===this.getTheme(this.sliderContainer),this.isTailwind="tailwind"===this.getTheme(this.sliderContainer)||"tailwind-dark"===this.getTheme(this.sliderContainer),this.isBootstrap5="bootstrap5"===this.getTheme(this.sliderContainer),this.isFluent="FluentUI"===this.getTheme(this.sliderContainer),this.isMaterialTooltip=this.isMaterial&&"Range"!==this.type&&this.tooltip.isVisible},t.prototype.createRangeBar=function(){"Default"!==this.type&&(this.rangeBar=this.createElement("div",{attrs:{class:hm}}),this.element.appendChild(this.rangeBar),this.drag&&"Range"===this.type&&("Horizontal"===this.orientation?this.rangeBar.classList.add(sg):this.rangeBar.classList.add(ag)))},t.prototype.createLimitBar=function(){var e="Range"!==this.type?ig:ng;e+=" "+tg,this.limitBarFirst=this.createElement("div",{attrs:{class:e}}),this.element.appendChild(this.limitBarFirst),"Range"===this.type&&(this.limitBarSecond=this.createElement("div",{attrs:{class:og+" "+tg}}),this.element.appendChild(this.limitBarSecond))},t.prototype.setOrientClass=function(){"Vertical"!==this.orientation?(this.sliderContainer.classList.remove(Pm),this.sliderContainer.classList.add(Om),this.firstHandle.setAttribute("aria-orientation","horizontal"),"Range"===this.type&&this.secondHandle.setAttribute("aria-orientation","horizontal")):(this.sliderContainer.classList.remove(Om),this.sliderContainer.classList.add(Pm),this.firstHandle.setAttribute("aria-orientation","vertical"),"Range"===this.type&&this.secondHandle.setAttribute("aria-orientation","vertical"))},t.prototype.setAriaAttributes=function(e){var t=this,i=this.min,n=this.max;(!m(this.customValues)&&this.customValues.length>0&&(i=this.customValues[0],n=this.customValues[this.customValues.length-1]),"Range"!==this.type)?Ve(e,{"aria-valuemin":i.toString(),"aria-valuemax":n.toString()}):(!m(this.customValues)&&this.customValues.length>0?[[i.toString(),this.customValues[this.value[1]].toString()],[this.customValues[this.value[0]].toString(),n.toString()]]:[[i.toString(),this.value[1].toString()],[this.value[0].toString(),n.toString()]]).forEach((function(e,i){var n=0===i?t.firstHandle:t.secondHandle;n&&Ve(n,{"aria-valuemin":e[0],"aria-valuemax":e[1]})}))},t.prototype.createSecondHandle=function(){this.secondHandle=this.createElement("div",{attrs:{class:dm,role:"slider",tabIndex:"0","aria-label":"slider"}}),this.secondHandle.classList.add(Sm),this.element.appendChild(this.secondHandle)},t.prototype.createFirstHandle=function(){this.firstHandle=this.createElement("div",{attrs:{class:dm,role:"slider",tabIndex:"0","aria-label":"slider"}}),this.firstHandle.classList.add(bm),this.element.appendChild(this.firstHandle),this.isMaterialTooltip&&(this.materialHandle=this.createElement("div",{attrs:{class:dm+" "+Xm}}),this.element.appendChild(this.materialHandle))},t.prototype.wireFirstHandleEvt=function(e){e?(ye.remove(this.firstHandle,"mousedown touchstart",this.handleFocus),ye.remove(this.firstHandle,"transitionend",this.transitionEnd),ye.remove(this.firstHandle,"mouseenter touchenter",this.handleOver),ye.remove(this.firstHandle,"mouseleave touchend",this.handleLeave)):(ye.add(this.firstHandle,"mousedown touchstart",this.handleFocus,this),ye.add(this.firstHandle,"transitionend",this.transitionEnd,this),ye.add(this.firstHandle,"mouseenter touchenter",this.handleOver,this),ye.add(this.firstHandle,"mouseleave touchend",this.handleLeave,this))},t.prototype.wireSecondHandleEvt=function(e){e?(ye.remove(this.secondHandle,"mousedown touchstart",this.handleFocus),ye.remove(this.secondHandle,"transitionend",this.transitionEnd),ye.remove(this.secondHandle,"mouseenter touchenter",this.handleOver),ye.remove(this.secondHandle,"mouseleave touchend",this.handleLeave)):(ye.add(this.secondHandle,"mousedown touchstart",this.handleFocus,this),ye.add(this.secondHandle,"transitionend",this.transitionEnd,this),ye.add(this.secondHandle,"mouseenter touchenter",this.handleOver,this),ye.add(this.secondHandle,"mouseleave touchend",this.handleLeave,this))},t.prototype.handleStart=function(){"Range"!==this.type&&(this.firstHandle.classList[0===this.handlePos1?"add":"remove"](Bm),this.isMaterialTooltip&&(this.materialHandle.classList[0===this.handlePos1?"add":"remove"](Bm),this.tooltipElement&&this.tooltipElement.classList[0===this.handlePos1?"add":"remove"](zm)))},t.prototype.transitionEnd=function(e){"transform"!==e.propertyName&&(this.handleStart(),this.enableAnimation||(this.getHandle().style.transition="none"),"Default"!==this.type&&(this.rangeBar.style.transition="none"),this.isMaterial&&this.tooltip.isVisible&&"Default"===this.type&&(this.tooltipElement.style.transition=this.transition.handle),this.tooltipToggle(this.getHandle()),this.closeTooltip())},t.prototype.handleFocusOut=function(){this.firstHandle.classList.contains(Lm)&&this.firstHandle.classList.remove(Lm),"Range"===this.type&&this.secondHandle.classList.contains(Lm)&&this.secondHandle.classList.remove(Lm)},t.prototype.handleFocus=function(e){this.focusSliderElement(),this.sliderBarClick(e),e.currentTarget===this.firstHandle?(this.firstHandle.classList.add(Lm),this.firstHandle.classList.add(jm)):(this.secondHandle.classList.add(Lm),this.secondHandle.classList.add(jm)),ye.add(document,"mousemove touchmove",this.sliderBarMove,this),ye.add(document,"mouseup touchend",this.sliderBarUp,this)},t.prototype.handleOver=function(e){this.tooltip.isVisible&&"Hover"===this.tooltip.showOn&&this.tooltipToggle(e.currentTarget),"Default"===this.type&&this.tooltipToggle(this.getHandle())},t.prototype.handleLeave=function(e){!this.tooltip.isVisible||"Hover"!==this.tooltip.showOn||e.currentTarget.classList.contains(Lm)||e.currentTarget.classList.contains(jm)||this.closeTooltip()},t.prototype.setHandler=function(){this.min>this.max&&(this.min=this.max),this.createFirstHandle(),"Range"===this.type&&this.createSecondHandle()},t.prototype.setEnableRTL=function(){this.enableRtl&&"Vertical"!==this.orientation?be([this.sliderContainer],am):Se([this.sliderContainer],am);var e="Vertical"!==this.orientation?this.horDir:this.verDir;this.enableRtl?(this.horDir="right",this.verDir="bottom"):(this.horDir="left",this.verDir="bottom"),e!==("Vertical"!==this.orientation?this.horDir:this.verDir)&&"Horizontal"===this.orientation&&(Le(this.firstHandle,{right:"",left:"auto"}),"Range"===this.type&&Le(this.secondHandle,{top:"",left:"auto"})),this.setBarColor()},t.prototype.tooltipValue=function(){var e,t=this,i={value:this.value,text:""};this.initialTooltip&&(this.initialTooltip=!1,this.setTooltipContent(),i.text=e=this.tooltipObj.content,this.trigger("tooltipChange",i,(function(i){t.addTooltipClass(i.text),e!==i.text&&(t.customAriaText=i.text,t.tooltipObj.content=i.text,t.setAriaAttrValue(t.firstHandle),"Range"===t.type&&t.setAriaAttrValue(t.secondHandle))})),this.isMaterialTooltip&&this.setPreviousVal("change",this.value))},t.prototype.setTooltipContent=function(){var e;e=this.formatContent(this.tooltipFormatInfo,!1),this.tooltipObj.content=e},t.prototype.formatContent=function(e,t){var i="",n=this.handleVal1,o=this.handleVal2;return!m(this.customValues)&&this.customValues.length>0&&(n=this.customValues[this.handleVal1],o=this.customValues[this.handleVal2]),t?("Range"===this.type?i=this.enableRtl&&"Vertical"!==this.orientation?m(this.tooltip)||m(this.tooltip.format)?o.toString()+" - "+n.toString():this.formatString(o,e).elementVal+" - "+this.formatString(n,e).elementVal:m(this.tooltip)||m(this.tooltip.format)?n.toString()+" - "+o.toString():this.formatString(n,e).elementVal+" - "+this.formatString(o,e).elementVal:m(n)||(i=m(this.tooltip)||m(this.tooltip.format)?n.toString():this.formatString(n,e).elementVal),i):("Range"===this.type?i=this.enableRtl&&"Vertical"!==this.orientation?m(e.format)?o.toString()+" - "+n.toString():this.formatString(o,e).formatString+" - "+this.formatString(n,e).formatString:m(e.format)?n.toString()+" - "+o.toString():this.formatString(n,e).formatString+" - "+this.formatString(o,e).formatString:m(n)||(i=m(e.format)?n.toString():this.formatString(n,e).formatString),i)},t.prototype.addTooltipClass=function(e){if(this.isMaterialTooltip){var t=e.toString().length;if(this.tooltipElement){i=t>4?{oldCss:Jm,newCss:Gm}:{oldCss:Gm,newCss:Jm};this.tooltipElement.classList.remove(i.oldCss),this.tooltipElement.classList.contains(i.newCss)||(this.tooltipElement.classList.add(i.newCss),this.tooltipElement.style.transform=t>4?"scale(1)":this.getTooltipTransformProperties(this.previousTooltipClass).rotate)}else{var i=t>4?Gm:Jm;this.tooltipObj.cssClass=vm+" "+i}}},t.prototype.tooltipPlacement=function(){return"Horizontal"===this.orientation?"Before"===this.tooltip.placement?"TopCenter":"BottomCenter":"Before"===this.tooltip.placement?"LeftCenter":"RightCenter"},t.prototype.tooltipBeforeOpen=function(e){this.tooltipElement=e.element,this.tooltip.cssClass&&be([this.tooltipElement],this.tooltip.cssClass.split(" ").filter((function(e){return e}))),e.target.removeAttribute("aria-describedby"),this.isMaterialTooltip&&(this.tooltipElement.firstElementChild.classList.add($m),this.handleStart(),this.setTooltipTransform())},t.prototype.tooltipCollision=function(e){if(this.isBootstrap||this.isBootstrap4||this.isMaterial&&!this.isMaterialTooltip){var t=this.isBootstrap4?3:6;switch(e){case"TopCenter":this.tooltipObj.setProperties({offsetY:-t},!1);break;case"BottomCenter":this.tooltipObj.setProperties({offsetY:t},!1);break;case"LeftCenter":this.tooltipObj.setProperties({offsetX:-t},!1);break;case"RightCenter":this.tooltipObj.setProperties({offsetX:t},!1)}}},t.prototype.materialTooltipEventCallBack=function(e){this.sliderBarClick(e),ye.add(document,"mousemove touchmove",this.sliderBarMove,this),ye.add(document,"mouseup touchend",this.sliderBarUp,this)},t.prototype.wireMaterialTooltipEvent=function(e){this.isMaterialTooltip&&(e?ye.remove(this.tooltipElement,"mousedown touchstart",this.materialTooltipEventCallBack):ye.add(this.tooltipElement,"mousedown touchstart",this.materialTooltipEventCallBack,this))},t.prototype.tooltipPositionCalculation=function(e){var t;switch(e){case"TopCenter":t=Mm;break;case"BottomCenter":t=Im;break;case"LeftCenter":t=Tm;break;case"RightCenter":t=Am}return t},t.prototype.getTooltipTransformProperties=function(e){var t;if(this.tooltipElement){var i="Horizontal"===this.orientation?this.tooltipElement.clientHeight+14-this.tooltipElement.clientHeight/2:this.tooltipElement.clientWidth+14-this.tooltipElement.clientWidth/2;t="Horizontal"===this.orientation?e===Mm?{rotate:"rotate(45deg)",translate:"translateY("+i+"px)"}:{rotate:"rotate(225deg)",translate:"translateY("+-i+"px)"}:e===Tm?{rotate:"rotate(-45deg)",translate:"translateX("+i+"px)"}:{rotate:"rotate(-225deg)",translate:"translateX("+-i+"px)"}}return t},t.prototype.openMaterialTooltip=function(){var e=this;if(this.isMaterialTooltip){this.refreshTooltip(this.firstHandle);var t=this.tooltipElement.firstElementChild;t.classList.remove($m),t.classList.add(Km),this.firstHandle.style.cursor="default",this.tooltipElement.style.transition=this.scaleTransform,this.tooltipElement.classList.add(km),this.materialHandle.style.transform="scale(0)",t.innerText.length>4?this.tooltipElement.style.transform="scale(1)":this.tooltipElement.style.transform=this.getTooltipTransformProperties(this.previousTooltipClass).rotate,"Default"===this.type?setTimeout((function(){e.tooltipElement.style.transition=e.transition.handle}),2500):setTimeout((function(){e.tooltipElement.style.transition="none"}),2500)}},t.prototype.closeMaterialTooltip=function(){var e=this;if(this.isMaterialTooltip){var t=this.tooltipElement.firstElementChild;this.tooltipElement.style.transition=this.scaleTransform,t.classList.remove(Km),t.classList.add($m),this.firstHandle.style.cursor="-webkit-grab",this.firstHandle.style.cursor="grab",this.materialHandle&&(this.materialHandle.style.transform="scale(1)"),this.tooltipElement.classList.remove(km),this.setTooltipTransform(),this.tooltipTarget=void 0,setTimeout((function(){e.tooltipElement.style.transition="none"}),2500)}},t.prototype.checkTooltipPosition=function(e){var t=this.tooltipPositionCalculation(e.collidedPosition);void 0!==this.tooltipCollidedPosition&&this.tooltipCollidedPosition===e.collidedPosition&&e.element.classList.contains(t)||(this.isMaterialTooltip&&(void 0!==t&&(e.element.classList.remove(this.previousTooltipClass),e.element.classList.add(t),this.previousTooltipClass=t),e.element.style.transform&&e.element.classList.contains(km)&&e.element.firstElementChild.innerText.length<=4&&(e.element.style.transform=this.getTooltipTransformProperties(this.previousTooltipClass).rotate)),this.tooltipCollidedPosition=e.collidedPosition),this.isMaterialTooltip&&this.tooltipElement&&-1!==this.tooltipElement.style.transform.indexOf("translate")&&this.setTooltipTransform()},t.prototype.setTooltipTransform=function(){var e=this.getTooltipTransformProperties(this.previousTooltipClass);this.tooltipElement.firstElementChild.innerText.length>4?this.tooltipElement.style.transform=e.translate+" scale(0.01)":this.tooltipElement.style.transform=e.translate+" "+e.rotate+" scale(0.01)"},t.prototype.renderTooltip=function(){this.tooltipObj=new Xd({showTipPointer:this.isBootstrap||this.isMaterial||this.isBootstrap4||this.isTailwind||this.isBootstrap5||this.isFluent,cssClass:vm,height:this.isMaterial?30:"auto",animation:{open:{effect:"None"},close:{effect:"FadeOut",duration:500}},opensOn:"Custom",beforeOpen:this.tooltipBeforeOpen.bind(this),beforeCollision:this.checkTooltipPosition.bind(this),beforeClose:this.tooltipBeforeClose.bind(this),enableHtmlSanitizer:this.enableHtmlSanitizer}),this.tooltipObj.appendTo(this.firstHandle),this.initializeTooltipProps()},t.prototype.initializeTooltipProps=function(){var e="Auto"===this.tooltip.showOn?"Hover":this.tooltip.showOn;this.setProperties({tooltip:{showOn:e}},!0),this.tooltipObj.position=this.tooltipPlacement(),this.tooltipCollision(this.tooltipObj.position),[this.firstHandle,this.rangeBar,this.secondHandle].forEach((function(e){m(e)||(e.style.transition="none")})),this.isMaterialTooltip&&(this.sliderContainer.classList.add(Em),this.tooltipValue(),this.tooltipObj.animation.close.effect="None",this.tooltipObj.open(this.firstHandle))},t.prototype.tooltipBeforeClose=function(){this.tooltipElement=void 0,this.tooltipCollidedPosition=void 0},t.prototype.setButtons=function(){this.firstBtn=this.createElement("div",{className:pm+" "+cm}),this.firstBtn.appendChild(this.createElement("span",{className:Rm})),this.isTailwind&&this.firstBtn.querySelector("span").classList.add("e-icons"),this.firstBtn.tabIndex=-1,this.secondBtn=this.createElement("div",{className:pm+" "+um}),this.secondBtn.appendChild(this.createElement("span",{className:Rm})),this.isTailwind&&this.secondBtn.querySelector("span").classList.add("e-icons"),this.secondBtn.tabIndex=-1,this.sliderContainer.classList.add(qm),this.sliderContainer.appendChild(this.firstBtn),this.sliderContainer.appendChild(this.secondBtn),this.sliderContainer.appendChild(this.element),this.buttonTitle()},t.prototype.buttonTitle=function(){var e=this.enableRtl&&"Vertical"!==this.orientation;this.l10n.setLocale(this.locale);var t=this.l10n.getConstant("decrementTitle"),i=this.l10n.getConstant("incrementTitle");Ve(e?this.secondBtn:this.firstBtn,{"aria-label":t,title:t}),Ve(e?this.firstBtn:this.secondBtn,{"aria-label":i,title:i})},t.prototype.buttonFocusOut=function(){this.isMaterial&&this.getHandle().classList.remove("e-large-thumb-size")},t.prototype.repeatButton=function(e){var t,i=this.handleValueUpdate(),n=this.enableRtl&&"Vertical"!==this.orientation;e.target.parentElement.classList.contains(cm)||e.target.classList.contains(cm)?t=n?this.add(i,parseFloat(this.step.toString()),!0):this.add(i,parseFloat(this.step.toString()),!1):(e.target.parentElement.classList.contains(um)||e.target.classList.contains(um))&&(t=n?this.add(i,parseFloat(this.step.toString()),!1):this.add(i,parseFloat(this.step.toString()),!0)),this.limits.enabled&&(t=this.getLimitCorrectedValues(t)),t>=this.min&&t<=this.max&&(this.changeHandleValue(t),this.tooltipToggle(this.getHandle()))},t.prototype.repeatHandlerMouse=function(e){e.preventDefault(),"mousedown"!==e.type&&"touchstart"!==e.type||(this.buttonClick(e),this.repeatInterval=setInterval(this.repeatButton.bind(this),180,e))},t.prototype.materialChange=function(){this.getHandle().classList.contains("e-large-thumb-size")||this.getHandle().classList.add("e-large-thumb-size")},t.prototype.focusHandle=function(){this.getHandle().classList.contains(jm)||this.getHandle().classList.add(jm)},t.prototype.repeatHandlerUp=function(e){this.changeEvent("changed",e),this.closeTooltip(),clearInterval(this.repeatInterval),this.getHandle().focus()},t.prototype.customTickCounter=function(e){var t=4;return!m(this.customValues)&&this.customValues.length>0&&(e>4&&(t=3),e>7&&(t=2),e>14&&(t=1),e>28&&(t=0)),t},t.prototype.renderScale=function(){var e="Vertical"===this.orientation?"v":"h";this.noOfDecimals=this.numberOfDecimals(this.step),this.ul=this.createElement("ul",{className:fm+" e-"+e+"-scale "+mm+"-"+this.ticks.placement.toLowerCase(),attrs:{role:"presentation",tabIndex:"-1","aria-hidden":"true"}}),this.ul.style.zIndex="-1",ge.isAndroid&&"h"===e&&this.ul.classList.add(Hm);var t=this.ticks.smallStep;this.ticks.showSmallTicks?t<=0&&(t=parseFloat(b(this.step))):t=this.ticks.largeStep>0?this.ticks.largeStep:parseFloat(b(this.max))-parseFloat(b(this.min));var i,n=this.fractionalToInteger(this.min),o=this.fractionalToInteger(this.max),s=this.fractionalToInteger(t),a=!m(this.customValues)&&this.customValues.length>0&&this.customValues.length-1,r=this.customTickCounter(a),l=!m(this.customValues)&&this.customValues.length>0?a*r+a:Math.abs((o-n)/s);this.element.appendChild(this.ul);var d=parseFloat(this.min.toString());"v"===e&&(d=parseFloat(this.max.toString()));var h,p=0,c=100/l;c===1/0&&(c=5);for(var u=0,f=!m(this.customValues)&&this.customValues.length>0?this.customValues.length-1:0,g=0;u<=l;u++){if(i=this.createElement("li",{attrs:{class:mm,role:"presentation",tabIndex:"-1","aria-hidden":"true"}}),!m(this.customValues)&&this.customValues.length>0)(h=u%(r+1)===0)&&("h"===e?(d=this.customValues[g],g++):(d=this.customValues[f],f--),i.setAttribute("title",d.toString()));else if(i.setAttribute("title",d.toString()),0===this.numberOfDecimals(this.max)&&0===this.numberOfDecimals(this.min)&&0===this.numberOfDecimals(this.step))h="h"===e?(d-parseFloat(this.min.toString()))%this.ticks.largeStep===0:Math.abs(d-parseFloat(this.max.toString()))%this.ticks.largeStep===0;else{var y=this.fractionalToInteger(this.ticks.largeStep),v=this.fractionalToInteger(d);h="h"===e?(v-n)%y===0:Math.abs(v-parseFloat(o.toString()))%y===0}h&&i.classList.add(gm),"h"===e?i.style.width=c+"%":i.style.height=c+"%";var w=h?"Both"===this.ticks.placement?2:1:0;if(h)for(var S=0;S<w;S++)this.createTick(i,d,c);else m(this.customValues)&&this.formatTicksValue(i,d);this.ul.appendChild(i),this.tickElementCollection.push(i);var C=void 0;m(this.customValues)&&(C=this.numberOfDecimals(t)>this.numberOfDecimals(d)?this.numberOfDecimals(t):this.numberOfDecimals(d),d="h"===e?this.makeRoundNumber(d+t,C):this.makeRoundNumber(d-t,C),p=this.makeRoundNumber(p+t,C))}this.ticksAlignment(e,c)},t.prototype.ticksAlignment=function(e,t,i){void 0===i&&(i=!0),this.firstChild=this.ul.firstElementChild,this.lastChild=this.ul.lastElementChild,this.firstChild.classList.add(Wm),this.lastChild.classList.add(Um),this.sliderContainer.classList.add(fm+"-"+this.ticks.placement.toLowerCase()),"h"===e?(this.firstChild.style.width=t/2+"%",this.lastChild.style.width=t/2+"%"):(this.firstChild.style.height=t/2+"%",this.lastChild.style.height=t/2+"%");var n={ticksWrapper:this.ul,tickElements:this.tickElementCollection};i&&this.trigger("renderedTicks",n),this.scaleAlignment()},t.prototype.createTick=function(e,t,i){var n=this.createElement("span",{className:ym+" "+mm+"-"+this.ticks.placement.toLowerCase(),attrs:{role:"presentation",tabIndex:"-1","aria-hidden":"true"}});e.appendChild(n),m(this.customValues)?this.formatTicksValue(e,t,n,i):this.enableHtmlSanitizer?n.innerHTML=Vi.sanitize(t.toString()):n.innerHTML=t.toString()},t.prototype.formatTicksValue=function(e,t,i,n){var o=this,s=this.formatNumber(t),a={value:t,text:m(this.ticks)||m(this.ticks.format)?s:this.formatString(t,this.ticksFormatInfo).formatString,tickElement:e};this.trigger("renderingTicks",a,(function(t){e.setAttribute("title",t.text.toString()),i&&(o.enableHtmlSanitizer?i.innerHTML=Vi.sanitize(t.text.toString()):i.innerHTML=t.text.toString())}))},t.prototype.scaleAlignment=function(){this.tickValuePosition();this.orientation;"Vertical"===this.orientation?this.element.getBoundingClientRect().width<=15?this.sliderContainer.classList.add(_m):this.sliderContainer.classList.remove(_m):this.element.getBoundingClientRect().height<=15?this.sliderContainer.classList.add(_m):this.sliderContainer.classList.remove(_m)},t.prototype.tickValuePosition=function(){this.firstChild=this.element.querySelector("ul").children[0];var e,t,i=this.firstChild.getBoundingClientRect(),n=this.ticks.smallStep,o=Math.abs(parseFloat(b(this.max))-parseFloat(b(this.min)))/n;this.firstChild.children.length>0&&(e=this.firstChild.children[0].getBoundingClientRect());var s,a=[this.sliderContainer.querySelectorAll("."+mm+"."+gm+" ."+ym)];s="Both"===this.ticks.placement?[].slice.call(a[0],2):[].slice.call(a[0],1);for(var r="Vertical"===this.orientation?2*i.height:2*i.width,l=0;l<this.firstChild.children.length;l++)"Vertical"===this.orientation?this.firstChild.children[l].style.top=-e.height/2+"px":this.enableRtl?this.firstChild.children[l].style.left=(r-this.firstChild.children[l].getBoundingClientRect().width)/2+"px":this.firstChild.children[l].style.left=-e.width/2+"px";for(l=0;l<s.length;l++)t=s[l].getBoundingClientRect(),"Vertical"===this.orientation?Le(s[l],{top:(r-t.height)/2+"px"}):Le(s[l],{left:(r-t.width)/2+"px"});this.enableRtl&&this.lastChild.children.length&&0!==o&&(this.lastChild.children[0].style.left=-this.lastChild.getBoundingClientRect().width/2+"px","Both"===this.ticks.placement&&(this.lastChild.children[1].style.left=-this.lastChild.getBoundingClientRect().width/2+"px")),0===o&&("Horizontal"===this.orientation&&(this.enableRtl?(this.firstChild.classList.remove(Um),this.firstChild.style.right=this.firstHandle.style.right,this.firstChild.children[0].style.left=this.firstChild.getBoundingClientRect().width/2+2+"px","Both"===this.ticks.placement&&(this.firstChild.children[1].style.left=this.firstChild.getBoundingClientRect().width/2+2+"px")):(this.firstChild.classList.remove(Um),this.firstChild.style.left=this.firstHandle.style.left)),"Vertical"===this.orientation&&this.firstChild.classList.remove(Um))},t.prototype.setAriaAttrValue=function(e){var t,i=!m(this.ticks)&&!m(this.ticks.format),n=i?this.formatContent(this.tooltipFormatInfo,!1):this.formatContent(this.ticksFormatInfo,!1),o=i?this.formatContent(this.ticksFormatInfo,!0):this.formatContent(this.tooltipFormatInfo,!0);t=2===(n=this.customAriaText?this.customAriaText:n).split(" - ").length?n.split(" - "):[n,n],this.setAriaAttributes(e),"Range"!==this.type?Ve(e,{"aria-valuenow":o,"aria-valuetext":n}):this.enableRtl?e===this.firstHandle?Ve(e,{"aria-valuenow":o.split(" - ")[1],"aria-valuetext":t[1]}):Ve(e,{"aria-valuenow":o.split(" - ")[0],"aria-valuetext":t[0]}):e===this.firstHandle?Ve(e,{"aria-valuenow":o.split(" - ")[0],"aria-valuetext":t[0]}):Ve(e,{"aria-valuenow":o.split(" - ")[1],"aria-valuetext":t[1]})},t.prototype.handleValueUpdate=function(){return"Range"===this.type?1===this.activeHandle?this.handleVal1:this.handleVal2:this.handleVal1},t.prototype.getLimitCorrectedValues=function(e){return e="MinRange"===this.type||"Default"===this.type||1===this.activeHandle?this.getLimitValueAndPosition(e,this.limits.minStart,this.limits.minEnd)[0]:this.getLimitValueAndPosition(e,this.limits.maxStart,this.limits.maxEnd)[0]},t.prototype.focusSliderElement=function(){this.isElementFocused||(this.element.focus(),this.isElementFocused=!0)},t.prototype.buttonClick=function(e){var t;this.focusSliderElement();var i=this.enableRtl&&"Vertical"!==this.orientation,n=this.handleValueUpdate();40===e.keyCode||37===e.keyCode||e.currentTarget.classList.contains(cm)?t=i?this.add(n,parseFloat(this.step.toString()),!0):this.add(n,parseFloat(this.step.toString()),!1):38===e.keyCode||39===e.keyCode||e.currentTarget.classList.contains(um)?t=i?this.add(n,parseFloat(this.step.toString()),!1):this.add(n,parseFloat(this.step.toString()),!0):33===e.keyCode||e.currentTarget.classList.contains(cm)?t=i?this.add(n,parseFloat(this.ticks.largeStep.toString()),!1):this.add(n,parseFloat(this.ticks.largeStep.toString()),!0):34===e.keyCode||e.currentTarget.classList.contains(um)?t=i?this.add(n,parseFloat(this.ticks.largeStep.toString()),!0):this.add(n,parseFloat(this.ticks.largeStep.toString()),!1):36===e.keyCode?t=parseFloat(this.min.toString()):35===e.keyCode&&(t=parseFloat(this.max.toString())),this.limits.enabled&&(t=this.getLimitCorrectedValues(t)),this.changeHandleValue(t),!this.isMaterial||this.tooltip.isVisible||this.getHandle().classList.contains(jm)||this.materialChange(),this.tooltipToggle(this.getHandle()),this.getHandle().focus(),this.focusHandle(),e.currentTarget.classList.contains(cm)&&ye.add(this.firstBtn,"mouseup touchend",this.buttonUp,this),e.currentTarget.classList.contains(um)&&ye.add(this.secondBtn,"mouseup touchend",this.buttonUp,this)},t.prototype.tooltipToggle=function(e){this.isMaterialTooltip?this.tooltipElement.classList.contains(km)?this.refreshTooltip(this.firstHandle):this.openMaterialTooltip():this.tooltipElement?this.refreshTooltip(e):this.openTooltip(e)},t.prototype.buttonUp=function(e){e.currentTarget.classList.contains(cm)&&ye.remove(this.firstBtn,"mouseup touchend",this.buttonUp),e.currentTarget.classList.contains(um)&&ye.remove(this.secondBtn,"mouseup touchend",this.buttonUp)},t.prototype.setRangeBar=function(){"Horizontal"===this.orientation?"MinRange"===this.type?(this.enableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",Le(this.rangeBar,{width:m(this.handlePos1)?0:this.handlePos1+"px"})):(this.enableRtl?this.rangeBar.style.right=this.handlePos1+"px":this.rangeBar.style.left=this.handlePos1+"px",Le(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"})):"MinRange"===this.type?(this.rangeBar.style.bottom="0px",Le(this.rangeBar,{height:m(this.handlePos1)?0:this.handlePos1+"px"})):(this.rangeBar.style.bottom=this.handlePos1+"px",Le(this.rangeBar,{height:this.handlePos2-this.handlePos1+"px"}))},t.prototype.checkValidValueAndPos=function(e){return e=this.checkHandleValue(e),e=this.checkHandlePosition(e)},t.prototype.setLimitBarPositions=function(e,t,i,n){"Horizontal"===this.orientation?this.enableRtl?(this.limitBarFirst.style.right=e+"px",this.limitBarFirst.style.width=t-e+"px"):(this.limitBarFirst.style.left=e+"px",this.limitBarFirst.style.width=t-e+"px"):(this.limitBarFirst.style.bottom=e+"px",this.limitBarFirst.style.height=t-e+"px"),"Range"===this.type&&("Horizontal"===this.orientation?this.enableRtl?(this.limitBarSecond.style.right=i+"px",this.limitBarSecond.style.width=n-i+"px"):(this.limitBarSecond.style.left=i+"px",this.limitBarSecond.style.width=n-i+"px"):(this.limitBarSecond.style.bottom=i+"px",this.limitBarSecond.style.height=n-i+"px"))},t.prototype.setLimitBar=function(){if("Default"===this.type||"MinRange"===this.type){var e=this.getLimitValueAndPosition(this.limits.minStart,this.limits.minStart,this.limits.minEnd,!0)[0];e=this.checkValidValueAndPos(e);var t=this.getLimitValueAndPosition(this.limits.minEnd,this.limits.minStart,this.limits.minEnd,!0)[0];t=this.checkValidValueAndPos(t),this.setLimitBarPositions(e,t)}else if("Range"===this.type){var i=this.getLimitValueAndPosition(this.limits.minStart,this.limits.minStart,this.limits.minEnd,!0)[0];i=this.checkValidValueAndPos(i);var n=this.getLimitValueAndPosition(this.limits.minEnd,this.limits.minStart,this.limits.minEnd,!0)[0];n=this.checkValidValueAndPos(n);var o=this.getLimitValueAndPosition(this.limits.maxStart,this.limits.maxStart,this.limits.maxEnd,!0)[0];o=this.checkValidValueAndPos(o);var s=this.getLimitValueAndPosition(this.limits.maxEnd,this.limits.maxStart,this.limits.maxEnd,!0)[0];s=this.checkValidValueAndPos(s),this.setLimitBarPositions(i,n,o,s)}},t.prototype.getLimitValueAndPosition=function(e,t,i,n){return m(t)&&(t=this.min,m(e)&&n&&(e=t)),m(i)&&(i=this.max,m(e)&&n&&(e=i)),e<t&&(e=t),e>i&&(e=i),[e,this.checkHandlePosition(e)]},t.prototype.setValue=function(){if(!m(this.customValues)&&this.customValues.length>0&&(this.min=0,this.max=this.customValues.length-1,this.setBarColor()),this.setAriaAttributes(this.firstHandle),this.handleVal1=m(this.value)?this.checkHandleValue(parseFloat(this.min.toString())):this.checkHandleValue(parseFloat(this.value.toString())),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.preHandlePos1=this.handlePos1,m(this.activeHandle)?"Range"===this.type?this.activeHandle=2:this.activeHandle=1:this.activeHandle=this.activeHandle,"Default"===this.type||"MinRange"===this.type){if(this.limits.enabled){var e=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=e[0],this.handlePos1=e[1],this.preHandlePos1=this.handlePos1}this.setHandlePosition(null),this.handleStart(),this.value=this.handleVal1,this.setAriaAttrValue(this.firstHandle),this.changeEvent("changed",null)}else this.validateRangeValue();"Default"!==this.type&&this.setRangeBar(),this.limits.enabled&&this.setLimitBar()},t.prototype.rangeValueUpdate=function(){null!==this.value&&"object"===typeof this.value||(this.value=[parseFloat(b(this.min)),parseFloat(b(this.max))])},t.prototype.validateRangeValue=function(){this.rangeValueUpdate(),this.setRangeValue()},t.prototype.modifyZindex=function(){"Range"===this.type?1===this.activeHandle?(this.firstHandle.style.zIndex=this.zIndex+4+"",this.secondHandle.style.zIndex=this.zIndex+3+""):(this.firstHandle.style.zIndex=this.zIndex+3+"",this.secondHandle.style.zIndex=this.zIndex+4+""):this.isMaterialTooltip&&this.tooltipElement&&(this.tooltipElement.style.zIndex=On(this.element)+"")},t.prototype.setHandlePosition=function(e){var t,i=this,n=1===this.activeHandle?this.handlePos1:this.handlePos2;t=this.isMaterialTooltip?[this.firstHandle,this.materialHandle]:[this.getHandle()],this.handleStart(),t.forEach((function(e){"Horizontal"===i.orientation?i.enableRtl?e.style.right=n+"px":e.style.left=n+"px":e.style.bottom=n+"px"})),this.changeEvent("change",e)},t.prototype.getHandle=function(){return 1===this.activeHandle?this.firstHandle:this.secondHandle},t.prototype.setRangeValue=function(){this.updateRangeValue(),this.activeHandle=1,this.setHandlePosition(null),this.activeHandle=2,this.setHandlePosition(null),this.activeHandle=1},t.prototype.changeEvent=function(e,t){var i="change"===e?this.previousVal:this.previousChanged;if("Range"!==this.type)this.setProperties({value:this.handleVal1},!0),i===this.value||this.isMaterialTooltip&&this.initialTooltip||(this.trigger(e,this.changeEventArgs(e,t)),this.initialTooltip=!0,this.setPreviousVal(e,this.value)),this.setAriaAttrValue(this.firstHandle);else{var n=this.value=[this.handleVal1,this.handleVal2];this.setProperties({value:n},!0),(i.length===this.value.length&&this.value[0]!==i[0]||this.value[1]!==i[1])&&(this.initialTooltip=!1,this.trigger(e,this.changeEventArgs(e,t)),this.initialTooltip=!0,this.setPreviousVal(e,this.value)),this.setAriaAttrValue(this.getHandle())}this.hiddenInput.value=this.value.toString()},t.prototype.changeEventArgs=function(e,t){var i;return this.tooltip.isVisible&&this.tooltipObj&&this.initialTooltip?(this.tooltipValue(),i={value:this.value,previousValue:"change"===e?this.previousVal:this.previousChanged,action:e,text:this.tooltipObj.content,isInteracted:!m(t)}):i={value:this.value,previousValue:"change"===e?this.previousVal:this.previousChanged,action:e,text:m(this.ticksFormatInfo.format)?this.value.toString():"Range"!==this.type?this.formatString(this.value,this.ticksFormatInfo).formatString:this.formatString(this.value[0],this.ticksFormatInfo).formatString+" - "+this.formatString(this.value[1],this.ticksFormatInfo).formatString,isInteracted:!m(t)},i},t.prototype.setPreviousVal=function(e,t){"change"===e?this.previousVal=t:this.previousChanged=t},t.prototype.updateRangeValue=function(){var e=this.value.toString().split(",").map(Number);if(this.enableRtl&&"Vertical"!==this.orientation||this.rtl?this.value=[e[1],e[0]]:this.value=[e[0],e[1]],this.enableRtl&&"Vertical"!==this.orientation?(this.handleVal1=this.checkHandleValue(this.value[1]),this.handleVal2=this.checkHandleValue(this.value[0])):(this.handleVal1=this.checkHandleValue(this.value[0]),this.handleVal2=this.checkHandleValue(this.value[1])),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handlePos2=this.checkHandlePosition(this.handleVal2),this.handlePos1>this.handlePos2&&(this.handlePos1=this.handlePos2,this.handleVal1=this.handleVal2),this.preHandlePos1=this.handlePos1,this.preHandlePos2=this.handlePos2,this.limits.enabled){this.activeHandle=1;var t=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=t[0],this.handlePos1=t[1],this.preHandlePos1=this.handlePos1,this.activeHandle=2,t=this.getLimitValueAndPosition(this.handleVal2,this.limits.maxStart,this.limits.maxEnd),this.handleVal2=t[0],this.handlePos2=t[1],this.preHandlePos2=this.handlePos2}},t.prototype.checkHandlePosition=function(e){var t;return e=100*(e-parseFloat(b(this.min)))/(parseFloat(b(this.max))-parseFloat(b(this.min))),t="Horizontal"===this.orientation?this.element.getBoundingClientRect().width*(e/100):this.element.getBoundingClientRect().height*(e/100),parseFloat(b(this.max))===parseFloat(b(this.min))&&(t="Horizontal"===this.orientation?this.element.getBoundingClientRect().width:this.element.getBoundingClientRect().height),t},t.prototype.checkHandleValue=function(e){if(this.min>this.max&&(this.min=this.max),this.min===this.max)return parseFloat(b(this.max));var t=this.tempStartEnd();return e<t.start?e=t.start:e>t.end&&(e=t.end),e},t.prototype.reposition=function(){var e=this;this.firstHandle.style.transition="none","Default"!==this.type&&(this.rangeBar.style.transition="none"),"Range"===this.type&&(this.secondHandle.style.transition="none"),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handleVal2&&(this.handlePos2=this.checkHandlePosition(this.handleVal2)),"Horizontal"===this.orientation?(this.enableRtl?this.firstHandle.style.right=this.handlePos1+"px":this.firstHandle.style.left=this.handlePos1+"px",this.isMaterialTooltip&&(this.enableRtl?this.materialHandle.style.right=this.handlePos1+"px":this.materialHandle.style.left=this.handlePos1+"px"),"MinRange"===this.type?(this.enableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",Le(this.rangeBar,{width:m(this.handlePos1)?0:this.handlePos1+"px"})):"Range"===this.type&&(this.enableRtl?this.secondHandle.style.right=this.handlePos2+"px":this.secondHandle.style.left=this.handlePos2+"px",this.enableRtl?this.rangeBar.style.right=this.handlePos1+"px":this.rangeBar.style.left=this.handlePos1+"px",Le(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"}))):(this.firstHandle.style.bottom=this.handlePos1+"px",this.isMaterialTooltip&&(this.materialHandle.style.bottom=this.handlePos1+"px"),"MinRange"===this.type?(this.rangeBar.style.bottom="0px",Le(this.rangeBar,{height:m(this.handlePos1)?0:this.handlePos1+"px"})):"Range"===this.type&&(this.secondHandle.style.bottom=this.handlePos2+"px",this.rangeBar.style.bottom=this.handlePos1+"px",Le(this.rangeBar,{height:this.handlePos2-this.handlePos1+"px"}))),this.limits.enabled&&this.setLimitBar(),"None"!==this.ticks.placement&&this.ul&&(this.removeElement(this.ul),this.ul=void 0,this.renderScale()),this.handleStart(),this.tooltip.isVisible||setTimeout((function(){e.firstHandle.style.transition=e.scaleTransform,"Range"===e.type&&(e.secondHandle.style.transition=e.scaleTransform)})),this.refreshTooltip(this.tooltipTarget),this.setBarColor()},t.prototype.changeHandleValue=function(e){var t=null;1===this.activeHandle?(this.limits.enabled&&this.limits.startHandleFixed||(this.handleVal1=this.checkHandleValue(e),this.handlePos1=this.checkHandlePosition(this.handleVal1),"Range"===this.type&&this.handlePos1>this.handlePos2&&(this.handlePos1=this.handlePos2,this.handleVal1=this.handleVal2),this.handlePos1!==this.preHandlePos1&&(t=this.preHandlePos1=this.handlePos1)),this.modifyZindex()):(this.limits.enabled&&this.limits.endHandleFixed||(this.handleVal2=this.checkHandleValue(e),this.handlePos2=this.checkHandlePosition(this.handleVal2),"Range"===this.type&&this.handlePos2<this.handlePos1&&(this.handlePos2=this.handlePos1,this.handleVal2=this.handleVal1),this.handlePos2!==this.preHandlePos2&&(t=this.preHandlePos2=this.handlePos2)),this.modifyZindex()),null!==t&&("Default"!==this.type&&this.setRangeBar(),this.setHandlePosition(null))},t.prototype.tempStartEnd=function(){return this.min>this.max?{start:this.max,end:this.min}:{start:this.min,end:this.max}},t.prototype.xyToPosition=function(e){if(this.min===this.max)return 100;if("Horizontal"===this.orientation){var t=e.x-this.element.getBoundingClientRect().left,i=this.element.offsetWidth/100;this.val=t/i}else{var n=e.y-this.element.getBoundingClientRect().top;i=this.element.offsetHeight/100;this.val=100-n/i}var o=this.stepValueCalculation(this.val);return o<0?o=0:o>100&&(o=100),this.enableRtl&&"Vertical"!==this.orientation&&(o=100-o),"Horizontal"===this.orientation?this.element.getBoundingClientRect().width*(o/100):this.element.getBoundingClientRect().height*(o/100)},t.prototype.stepValueCalculation=function(e){0===this.step&&(this.step=1);var t=parseFloat(b(this.step))/((parseFloat(b(this.max))-parseFloat(b(this.min)))/100),i=e%Math.abs(t);return 0!==i&&(t/2>i?e-=i:e+=Math.abs(t)-i),e},t.prototype.add=function(e,t,i){var n=Math.pow(10,3);return i?(Math.round(e*n)+Math.round(t*n))/n:(Math.round(e*n)-Math.round(t*n))/n},t.prototype.positionToValue=function(e){var t,i=parseFloat(b(this.max))-parseFloat(b(this.min));return t="Horizontal"===this.orientation?e/this.element.getBoundingClientRect().width*i:e/this.element.getBoundingClientRect().height*i,this.add(t,parseFloat(this.min.toString()),!0)},t.prototype.sliderBarClick=function(e){var t;e.preventDefault(),"mousedown"===e.type||"mouseup"===e.type||"click"===e.type?t={x:e.clientX,y:e.clientY}:"touchend"!==e.type&&"touchstart"!==e.type||(t={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY});var i=this.xyToPosition(t),n=this.positionToValue(i);if("Range"===this.type&&this.handlePos2-i<i-this.handlePos1){if(this.activeHandle=2,!this.limits.enabled||!this.limits.endHandleFixed){if(this.limits.enabled)n=(o=this.getLimitValueAndPosition(n,this.limits.maxStart,this.limits.maxEnd))[0],i=o[1];this.secondHandle.classList.add(Zm),this.handlePos2=this.preHandlePos2=i,this.handleVal2=n}this.modifyZindex(),this.secondHandle.focus()}else{if(this.activeHandle=1,!this.limits.enabled||!this.limits.startHandleFixed){var o;if(this.limits.enabled)n=(o=this.getLimitValueAndPosition(n,this.limits.minStart,this.limits.minEnd))[0],i=o[1];this.firstHandle.classList.add(Zm),this.handlePos1=this.preHandlePos1=i,this.handleVal1=n}this.modifyZindex(),this.firstHandle.focus()}this.isMaterialTooltip&&this.tooltipElement.classList.add(Vm);var s=this.element.querySelector("."+jm);s&&this.getHandle()!==s&&s.classList.remove(jm);var a=1===this.activeHandle?this.firstHandle:this.secondHandle;if(e.target===a)return!this.isMaterial||this.tooltip.isVisible||this.getHandle().classList.contains(jm)||this.materialChange(),this.sliderBarUp(e),void this.tooltipToggle(this.getHandle());if(this.checkRepeatedValue(n)){var r=this.isMaterial&&this.tooltip.isVisible?this.transitionOnMaterialTooltip:this.transition;this.getHandle().style.transition=r.handle,"Default"!==this.type&&(this.rangeBar.style.transition=r.rangeBar),this.setHandlePosition(e),this.isMaterialTooltip&&(this.initialTooltip=!1),this.changeEvent("changed",e),"Default"!==this.type&&this.setRangeBar()}},t.prototype.handleValueAdjust=function(e,t,i){1===i?(this.handleVal1=t,this.handleVal2=this.handleVal1+this.minDiff):2===i&&(this.handleVal2=t,this.handleVal1=this.handleVal2-this.minDiff),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handlePos2=this.checkHandlePosition(this.handleVal2)},t.prototype.dragRangeBarMove=function(e){var t,i,n,o,s;if("touchmove"!==e.type&&e.preventDefault(),this.rangeBarDragged=!0,this.rangeBar.style.transition="none",this.firstHandle.style.transition="none",this.secondHandle.style.transition="none","mousemove"===e.type?(o=(t=[e.clientX,e.clientY])[0],s=t[1]):(o=(i=[e.changedTouches[0].clientX,e.changedTouches[0].clientY])[0],s=i[1]),(!this.limits.enabled||!this.limits.startHandleFixed)&&(!this.limits.enabled||!this.limits.endHandleFixed)){if(n=this.enableRtl?{x:o+this.secondPartRemain,y:s+this.secondPartRemain}:{x:o-this.firstPartRemain,y:s+this.secondPartRemain},this.handlePos1=this.xyToPosition(n),this.handleVal1=this.positionToValue(this.handlePos1),n=this.enableRtl?{x:o-this.firstPartRemain,y:s-this.firstPartRemain}:{x:o+this.secondPartRemain,y:s-this.firstPartRemain},this.handlePos2=this.xyToPosition(n),this.handleVal2=this.positionToValue(this.handlePos2),this.limits.enabled){var a=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=a[0],this.handlePos1=a[1],this.handleVal1===this.limits.minEnd&&this.handleValueAdjust(this.handleVal1,this.limits.minEnd,1),this.handleVal1===this.limits.minStart&&this.handleValueAdjust(this.handleVal1,this.limits.minStart,1),a=this.getLimitValueAndPosition(this.handleVal2,this.limits.maxStart,this.limits.maxEnd),this.handleVal2=a[0],this.handlePos2=a[1],this.handleVal2===this.limits.maxStart&&this.handleValueAdjust(this.handleVal2,this.limits.maxStart,2),this.handleVal2===this.limits.maxEnd&&this.handleValueAdjust(this.handleVal2,this.limits.maxEnd,2)}this.handleVal2===this.max&&this.handleValueAdjust(this.handleVal2,this.max,2),this.handleVal1===this.min&&this.handleValueAdjust(this.handleVal1,this.min,1)}this.activeHandle=1,this.setHandlePosition(e),this.activeHandle=2,this.setHandlePosition(e),this.tooltipToggle(this.rangeBar),this.setRangeBar()},t.prototype.sliderBarUp=function(e){this.changeEvent("changed",e),this.handleFocusOut(),this.firstHandle.classList.remove(Zm),"Range"===this.type&&(this.initialTooltip=!1,this.secondHandle.classList.remove(Zm)),this.closeTooltip(),this.isMaterial&&(this.getHandle().classList.remove("e-large-thumb-size"),this.isMaterialTooltip&&this.tooltipElement.classList.remove(Vm)),ye.remove(document,"mousemove touchmove",this.sliderBarMove),ye.remove(document,"mouseup touchend",this.sliderBarUp)},t.prototype.sliderBarMove=function(e){var t;"touchmove"!==e.type&&e.preventDefault(),t="mousemove"===e.type?{x:e.clientX,y:e.clientY}:{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY};var i=this.xyToPosition(t),n=this.positionToValue(i);if(i=Math.round(i),"Range"!==this.type&&1===this.activeHandle){if(!this.limits.enabled||!this.limits.startHandleFixed){if(this.limits.enabled){var o=this.getLimitValueAndPosition(n,this.limits.minStart,this.limits.minEnd);i=o[1],n=o[0]}this.handlePos1=i,this.handleVal1=n}this.firstHandle.classList.add(Zm)}if("Range"===this.type)if(1===this.activeHandle){if(this.firstHandle.classList.add(Zm),(!this.limits.enabled||!this.limits.startHandleFixed)&&(i>this.handlePos2&&(i=this.handlePos2,n=this.handleVal2),i!==this.preHandlePos1)){if(this.limits.enabled)n=(s=this.getLimitValueAndPosition(n,this.limits.minStart,this.limits.minEnd))[0],i=s[1];this.handlePos1=this.preHandlePos1=i,this.handleVal1=n,this.activeHandle=1}}else if(2===this.activeHandle&&(this.secondHandle.classList.add(Zm),(!this.limits.enabled||!this.limits.endHandleFixed)&&(i<this.handlePos1&&(i=this.handlePos1,n=this.handleVal1),i!==this.preHandlePos2))){var s;if(this.limits.enabled)n=(s=this.getLimitValueAndPosition(n,this.limits.maxStart,this.limits.maxEnd))[0],i=s[1];this.handlePos2=this.preHandlePos2=i,this.handleVal2=n,this.activeHandle=2}this.checkRepeatedValue(n)&&(this.getHandle().style.transition=this.scaleTransform,"Default"!==this.type&&(this.rangeBar.style.transition="none"),this.setHandlePosition(e),!this.isMaterial||this.tooltip.isVisible||this.getHandle().classList.contains(jm)||this.materialChange(),this.tooltipToggle(this.getHandle()),"Default"!==this.type&&this.setRangeBar())},t.prototype.dragRangeBarUp=function(e){this.rangeBarDragged?this.isDragComplete=!0:(this.focusSliderElement(),this.sliderBarClick(e)),this.changeEvent("changed",e),this.closeTooltip(),ye.remove(document,"mousemove touchmove",this.dragRangeBarMove),ye.remove(document,"mouseup touchend",this.dragRangeBarUp),this.rangeBarDragged=!1},t.prototype.checkRepeatedValue=function(e){if("Range"===this.type){if(e===(this.enableRtl&&"Vertical"!==this.orientation?1===this.activeHandle?this.previousVal[1]:this.previousVal[0]:1===this.activeHandle?this.previousVal[0]:this.previousVal[1]))return 0}else if(e===this.previousVal)return 0;return 1},t.prototype.refreshTooltip=function(e){this.tooltip.isVisible&&this.tooltipObj&&(this.tooltipValue(),e&&(this.tooltipObj.refresh(e),this.tooltipTarget=e))},t.prototype.openTooltip=function(e){this.tooltip.isVisible&&this.tooltipObj&&!this.isMaterialTooltip&&(this.tooltipValue(),this.tooltipObj.open(e),this.tooltipTarget=e)},t.prototype.closeTooltip=function(){this.tooltip.isVisible&&this.tooltipObj&&"Always"!==this.tooltip.showOn&&!this.isMaterialTooltip&&(this.tooltipValue(),this.tooltipObj.close(),this.tooltipTarget=void 0)},t.prototype.keyDown=function(e){switch(e.keyCode){case 37:case 38:case 39:case 40:case 33:case 34:case 36:case 35:e.preventDefault(),this.buttonClick(e)}},t.prototype.wireButtonEvt=function(e){e?(ye.remove(this.firstBtn,"mouseleave touchleave",this.buttonFocusOut),ye.remove(this.secondBtn,"mouseleave touchleave",this.buttonFocusOut),ye.remove(this.firstBtn,"mousedown touchstart",this.repeatHandlerMouse),ye.remove(this.firstBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp),ye.remove(this.secondBtn,"mousedown touchstart",this.repeatHandlerMouse),ye.remove(this.secondBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp),ye.remove(this.firstBtn,"focusout",this.sliderFocusOut),ye.remove(this.secondBtn,"focusout",this.sliderFocusOut)):(ye.add(this.firstBtn,"mouseleave touchleave",this.buttonFocusOut,this),ye.add(this.secondBtn,"mouseleave touchleave",this.buttonFocusOut,this),ye.add(this.firstBtn,"mousedown touchstart",this.repeatHandlerMouse,this),ye.add(this.firstBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp,this),ye.add(this.secondBtn,"mousedown touchstart",this.repeatHandlerMouse,this),ye.add(this.secondBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp,this),ye.add(this.firstBtn,"focusout",this.sliderFocusOut,this),ye.add(this.secondBtn,"focusout",this.sliderFocusOut,this))},t.prototype.rangeBarMousedown=function(e){var t,i;if(e.preventDefault(),this.focusSliderElement(),"Range"===this.type&&this.drag&&e.target===this.rangeBar){var n=void 0,o=void 0;"mousedown"===e.type?(n=(t=[e.clientX,e.clientY])[0],o=t[1]):"touchstart"===e.type&&(n=(i=[e.changedTouches[0].clientX,e.changedTouches[0].clientY])[0],o=i[1]),"Horizontal"===this.orientation?(this.firstPartRemain=n-this.rangeBar.getBoundingClientRect().left,this.secondPartRemain=this.rangeBar.getBoundingClientRect().right-n):(this.firstPartRemain=o-this.rangeBar.getBoundingClientRect().top,this.secondPartRemain=this.rangeBar.getBoundingClientRect().bottom-o),this.minDiff=this.handleVal2-this.handleVal1,this.tooltipToggle(this.rangeBar);var s=this.element.querySelector("."+jm);s&&s.classList.remove(jm),ye.add(document,"mousemove touchmove",this.dragRangeBarMove,this),ye.add(document,"mouseup touchend",this.dragRangeBarUp,this)}},t.prototype.elementClick=function(e){this.isDragComplete?this.isDragComplete=!1:(e.preventDefault(),this.focusSliderElement(),this.sliderBarClick(e),this.focusHandle())},t.prototype.wireEvents=function(){this.onresize=this.reposition.bind(this),window.addEventListener("resize",this.onresize),this.enabled&&!this.readonly&&(ye.add(this.element,"click",this.elementClick,this),"Range"===this.type&&this.drag&&ye.add(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown,this),ye.add(this.sliderContainer,"keydown",this.keyDown,this),ye.add(this.sliderContainer,"keyup",this.keyUp,this),ye.add(this.element,"focusout",this.sliderFocusOut,this),ye.add(this.sliderContainer,"mouseover mouseout touchstart touchend",this.hover,this),this.wireFirstHandleEvt(!1),"Range"===this.type&&this.wireSecondHandleEvt(!1),this.showButtons&&this.wireButtonEvt(!1),this.wireMaterialTooltipEvent(!1),this.isForm&&ye.add(this.formElement,"reset",this.formResetHandler,this))},t.prototype.unwireEvents=function(){ye.remove(this.element,"click",this.elementClick),"Range"===this.type&&this.drag&&ye.remove(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown),ye.remove(this.sliderContainer,"keydown",this.keyDown),ye.remove(this.sliderContainer,"keyup",this.keyUp),ye.remove(this.element,"focusout",this.sliderFocusOut),ye.remove(this.sliderContainer,"mouseover mouseout touchstart touchend",this.hover),this.wireFirstHandleEvt(!0),"Range"===this.type&&this.wireSecondHandleEvt(!0),this.showButtons&&this.wireButtonEvt(!0),this.wireMaterialTooltipEvent(!0),ye.remove(this.element,"reset",this.formResetHandler)},t.prototype.formResetHandler=function(){this.setProperties({value:this.formResetValue},!0),this.setValue()},t.prototype.keyUp=function(e){if(9===e.keyCode&&e.target.classList.contains(dm)&&(this.focusSliderElement(),!e.target.classList.contains(jm))){this.element.querySelector("."+jm)&&this.element.querySelector("."+jm).classList.remove(jm),e.target.classList.add(jm);var t=e.target.parentElement;t===this.element&&(t.querySelector("."+Dm).classList.add(Ym),"Range"!==this.type&&"MinRange"!==this.type||t.querySelector("."+hm).classList.add(Qm)),"Range"===this.type&&(e.target.previousSibling.classList.contains(dm)?this.activeHandle=2:this.activeHandle=1),this.getHandle().focus(),this.tooltipToggle(this.getHandle())}this.closeTooltip(),this.changeEvent("changed",e)},t.prototype.hover=function(e){if(!m(e))if("mouseover"===e.type||"touchmove"===e.type||"mousemove"===e.type||"pointermove"===e.type||"touchstart"===e.type)this.sliderContainer.classList.add(wm);else{this.sliderContainer.classList.remove(wm);var t=e.currentTarget;this.tooltip.isVisible&&"Always"!==this.tooltip.showOn&&this.tooltipObj&&this.isMaterialTooltip&&!t.classList.contains(Lm)&&!t.classList.contains(jm)&&this.closeMaterialTooltip()}},t.prototype.sliderFocusOut=function(e){e.relatedTarget!==this.secondHandle&&e.relatedTarget!==this.firstHandle&&e.relatedTarget!==this.element&&e.relatedTarget!==this.firstBtn&&e.relatedTarget!==this.secondBtn&&(this.closeMaterialTooltip(),this.closeTooltip(),this.element.querySelector("."+jm)&&this.element.querySelector("."+jm).classList.remove(jm),this.element.querySelector("."+Ym)&&(this.element.querySelector("."+Ym).classList.remove(Ym),"Range"!==this.type&&"MinRange"!==this.type||!this.element.querySelector("."+Qm)||this.element.querySelector("."+Qm).classList.remove(Qm)),this.hiddenInput.focus(),this.hiddenInput.blur(),this.isElementFocused=!1)},t.prototype.removeElement=function(e){e.parentNode&&e.parentNode.removeChild(e)},t.prototype.changeSliderType=function(e,t){this.isMaterialTooltip&&this.materialHandle&&(this.sliderContainer.classList.remove(Em),this.removeElement(this.materialHandle),this.materialHandle=void 0),this.removeElement(this.firstHandle),this.firstHandle=void 0,"Default"!==e&&("Range"===e&&(this.removeElement(this.secondHandle),this.secondHandle=void 0),this.removeElement(this.rangeBar),this.rangeBar=void 0),this.tooltip.isVisible&&!m(this.tooltipObj)&&(this.tooltipObj.destroy(),this.tooltipElement=void 0,this.tooltipCollidedPosition=void 0),this.limits.enabled&&("MinRange"===e||"Default"===e?m(this.limitBarFirst)||(this.removeElement(this.limitBarFirst),this.limitBarFirst=void 0):m(this.limitBarSecond)||(this.removeElement(this.limitBarSecond),this.limitBarSecond=void 0)),this.activeHandle=1,this.getThemeInitialization(),"Range"===this.type&&this.rangeValueUpdate(),this.createRangeBar(),this.limits.enabled&&this.createLimitBar(),this.setHandler(),this.setOrientClass(),this.wireFirstHandleEvt(!1),"Range"===this.type&&this.wireSecondHandleEvt(!1),this.setValue(),this.tooltip.isVisible&&(this.renderTooltip(),this.wireMaterialTooltipEvent(!1)),this.setBarColor(),"tooltip"!==t&&this.updateConfig()},t.prototype.changeRtl=function(){if(this.enableRtl||"Range"!==this.type||(this.value=[this.handleVal2,this.handleVal1]),this.updateConfig(),this.tooltip.isVisible&&this.tooltipObj.refresh(this.firstHandle),this.showButtons){var e=this.enableRtl&&"Vertical"!==this.orientation;Ve(e?this.secondBtn:this.firstBtn,{"aria-label":"Decrease",title:"Decrease"}),Ve(e?this.firstBtn:this.secondBtn,{"aria-label":"Increase",title:"Increase"})}},t.prototype.changeOrientation=function(){this.changeSliderType(this.type,"null")},t.prototype.updateConfig=function(){this.setEnableRTL(),this.setValue(),this.tooltip.isVisible&&this.refreshTooltip(this.tooltipTarget),"None"!==this.ticks.placement&&this.ul&&(this.removeElement(this.ul),this.ul=void 0,this.renderScale()),this.limitsPropertyChange()},t.prototype.limitsPropertyChange=function(){this.limits.enabled?(m(this.limitBarFirst)&&"Range"!==this.type&&this.createLimitBar(),m(this.limitBarFirst)&&m(this.limitBarSecond)&&"Range"===this.type&&this.createLimitBar(),this.setLimitBar(),this.setValue()):(m(this.limitBarFirst)||Ae(this.limitBarFirst),m(this.limitBarSecond)||Ae(this.limitBarSecond))},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.unwireEvents(),window.removeEventListener("resize",this.onresize),Se([this.sliderContainer],[Cm]),this.firstHandle.removeAttribute("aria-orientation"),"Range"===this.type&&this.secondHandle.removeAttribute("aria-orientation"),this.sliderContainer.parentNode.insertBefore(this.element,this.sliderContainer),Ae(this.sliderContainer),this.tooltip.isVisible&&this.tooltipObj.destroy(),this.element.innerHTML=""},t.prototype.onPropertyChanged=function(e,t){for(var i=this,n=0,o=Object.keys(e);n<o.length;n++){var s=o[n];switch(s){case"cssClass":this.setCSSClass(t.cssClass);break;case"value":if(e&&t){var a=m(e.value)?"Range"===this.type?[this.min,this.max]:this.min:e.value;this.setProperties({value:a},!0),m(t.value)||t.value.toString()===a.toString()||(this.setValue(),this.refreshTooltip(this.tooltipTarget),"Range"===this.type&&(m(e.value)||t.value[1]===a[1]?this.activeHandle=1:this.activeHandle=2))}break;case"min":case"step":case"max":this.setMinMaxValue();break;case"tooltip":m(e.tooltip)||m(t.tooltip)||this.setTooltip(s);break;case"type":m(t)||!Object.keys(t).length||m(t.type)||(this.changeSliderType(t.type,s),this.setZindex());break;case"enableRtl":t.enableRtl!==e.enableRtl&&"Vertical"!==this.orientation&&(this.rtl=t.enableRtl,this.changeRtl());break;case"limits":this.limitsPropertyChange();break;case"orientation":this.changeOrientation();break;case"ticks":m(this.sliderContainer.querySelector("."+fm))||(Ae(this.ul),Array.prototype.forEach.call(this.sliderContainer.classList,(function(e){e.match(/e-scale-/)&&i.sliderContainer.classList.remove(e)}))),"None"!==this.ticks.placement&&(this.renderScale(),this.setZindex());break;case"locale":this.showButtons&&this.buttonTitle();break;case"showButtons":e.showButtons?(this.setButtons(),this.reposition(),this.enabled&&!this.readonly&&this.wireButtonEvt(!1)):this.firstBtn&&this.secondBtn&&(this.sliderContainer.removeChild(this.firstBtn),this.sliderContainer.removeChild(this.secondBtn),this.sliderContainer.classList.remove(qm),this.firstBtn=void 0,this.secondBtn=void 0,this.reposition());break;case"enabled":this.setEnabled();break;case"readonly":this.setReadOnly();break;case"customValues":this.setValue(),this.reposition();break;case"colorRange":this.reposition();break;case"width":this.setElementWidth(e.width),this.setMinMaxValue(),this.limits&&this.limitsPropertyChange()}}},t.prototype.setReadOnly=function(){this.readonly?(this.unwireEvents(),this.sliderContainer.classList.add(eg)):(this.wireEvents(),this.sliderContainer.classList.remove(eg))},t.prototype.setMinMaxValue=function(){var e=this;this.setValue(),this.refreshTooltip(this.tooltipTarget),m(this.sliderContainer.querySelector("."+fm))||this.ul&&(Ae(this.ul),Array.prototype.forEach.call(this.sliderContainer.classList,(function(t){t.match(/e-scale-/)&&e.sliderContainer.classList.remove(t)}))),"None"!==this.ticks.placement&&(this.renderScale(),this.setZindex())},t.prototype.setZindex=function(){this.zIndex=6,m(this.ticks)||"None"===this.ticks.placement||(this.ul.style.zIndex=this.zIndex+-7+"",this.element.style.zIndex=this.zIndex+2+""),this.isMaterial||m(this.ticks)||"Both"!==this.ticks.placement||(this.element.style.zIndex=this.zIndex+2+""),this.firstHandle.style.zIndex=this.zIndex+3+"","Range"===this.type&&(this.secondHandle.style.zIndex=this.zIndex+4+"")},t.prototype.setTooltip=function(e){this.changeSliderType(this.type,e)},t.prototype.setBarColor=function(){for(var e,t,i=this.sliderTrack.lastElementChild;i;)this.sliderTrack.removeChild(i),i=this.sliderTrack.lastElementChild;for(var n=0;n<this.colorRange.length;n++)if(!m(this.colorRange[n].start)&&!m(this.colorRange[n].end)&&this.colorRange[n].end>this.colorRange[n].start){this.colorRange[n].start<this.min&&(this.colorRange[n].start=this.min),this.colorRange[n].end>this.max&&(this.colorRange[n].end=this.max);var o=this.checkHandlePosition(this.colorRange[n].start),s=this.checkHandlePosition(this.colorRange[n].end),a=this.createElement("div");a.style.backgroundColor=this.colorRange[n].color,a.style.border="1px solid "+this.colorRange[n].color,"Horizontal"===this.orientation?(t=Nm,e=this.enableRtl?m(this.customValues)?this.checkHandlePosition(this.max)-this.checkHandlePosition(this.colorRange[n].end):this.checkHandlePosition(this.customValues.length-this.colorRange[n].end-1):this.checkHandlePosition(this.colorRange[n].start),a.style.width=s-o+"px",a.style.left=e+"px"):(t=Fm,e=this.checkHandlePosition(this.colorRange[n].start),a.style.height=s-o+"px",a.style.bottom=e+"px"),a.classList.add(t),this.sliderTrack.appendChild(a)}},t.prototype.getModuleName=function(){return"slider"},em([Ge(null)],t.prototype,"value",void 0),em([Ge(null)],t.prototype,"customValues",void 0),em([Ge(1)],t.prototype,"step",void 0),em([Ge(null)],t.prototype,"width",void 0),em([Ge(0)],t.prototype,"min",void 0),em([Ge(100)],t.prototype,"max",void 0),em([Ge(!1)],t.prototype,"readonly",void 0),em([Ge("Default")],t.prototype,"type",void 0),em([Ke([{}],im)],t.prototype,"colorRange",void 0),em([Je({},tm)],t.prototype,"ticks",void 0),em([Je({},nm)],t.prototype,"limits",void 0),em([Ge(!0)],t.prototype,"enabled",void 0),em([Je({},om)],t.prototype,"tooltip",void 0),em([Ge(!1)],t.prototype,"showButtons",void 0),em([Ge(!0)],t.prototype,"enableAnimation",void 0),em([Ge("Horizontal")],t.prototype,"orientation",void 0),em([Ge("")],t.prototype,"cssClass",void 0),em([Ge(!1)],t.prototype,"enableHtmlSanitizer",void 0),em([$e()],t.prototype,"created",void 0),em([$e()],t.prototype,"change",void 0),em([$e()],t.prototype,"changed",void 0),em([$e()],t.prototype,"renderingTicks",void 0),em([$e()],t.prototype,"renderedTicks",void 0),em([$e()],t.prototype,"tooltipChange",void 0),t=em([et],t)}(Dt),lg=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),dg=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},hg="e-apply",pg="e-cancel",cg="e-current",ug="e-ctrl-btn",fg="e-switch-ctrl-btn",mg="e-disabled",gg="e-value-switch-btn",yg="e-handler",vg="e-hex",wg="e-hide-hex-value",bg="e-hide-opacity",Sg="e-hide-switchable-value",Cg="e-hide-value",xg="e-hide-valueswitcher",Mg="e-hsv-color",Ig="e-hsv-container",Tg="e-selected-value",Ag="e-mode-switch-btn",kg="e-nocolor-item",Vg="e-opacity-value",Eg="e-palette",Dg="e-color-palette",Ng="e-color-picker",Fg="e-preview-container",Lg="e-previous",Pg="e-show-value",Og="e-selected",Bg="e-split-preview",zg="e-tile",jg=["#000000","#f44336","#e91e63","#9c27b0","#673ab7","#2196f3","#03a9f4","#00bcd4","#009688","#ffeb3b","#ffffff","#ffebee","#fce4ec","#f3e5f5","#ede7f6","#e3f2fd","#e1f5fe","#e0f7fa","#e0f2f1","#fffde7","#f2f2f2","#ffcdd2","#f8bbd0","#e1bee7","#d1c4e9","#bbdefb","#b3e5fc","#b2ebf2","#b2dfdb","#fff9c4","#e6e6e6","#ef9a9a","#f48fb1","#ce93d8","#b39ddb","#90caf9","#81d4fa","#80deea","#80cbc4","#fff59d","#cccccc","#e57373","#f06292","#ba68c8","#9575cd","#64b5f6","#4fc3f7","#4dd0e1","#4db6ac","#fff176","#b3b3b3","#ef5350","#ec407a","#ab47bc","#7e57c2","#42a5f5","#29b6f6","#26c6da","#26a69a","#ffee58","#999999","#e53935","#d81b60","#8e24aa","#5e35b1","#1e88e5","#039be5","#00acc1","#00897b","#fdd835","#808080","#d32f2f","#c2185b","#7b1fa2","#512da8","#1976d2","#0288d1","#0097a7","#00796b","#fbc02d","#666666","#c62828","#ad1457","#6a1b9a","#4527a0","#1565c0","#0277bd","#00838f","#00695c","#f9a825","#4d4d4d","#b71c1c","#880e4f","#4a148c","#311b92","#0d47a1","#01579b","#006064","#004d40","#f57f17"],Rg=function(e){function t(t,i){return e.call(this,t,i)||this}return lg(t,e),t.prototype.preRender=function(){var e=this.element;this.formElement=Fe(this.element,"form"),this.formElement&&ye.add(this.formElement,"reset",this.formResetHandler,this);this.l10n=new qt("colorpicker",{Apply:"Apply",Cancel:"Cancel",ModeSwitcher:"Switch Mode"},this.locale),e.getAttribute("ejs-for")&&!e.getAttribute("name")&&e.setAttribute("name",e.id)},t.prototype.render=function(){this.initWrapper(),this.inline?this.createWidget():this.createSplitBtn(),this.enableOpacity||be([this.container.parentElement],bg),this.renderComplete()},t.prototype.initWrapper=function(){var e=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"});this.element.parentNode.insertBefore(e,this.element),e.appendChild(this.element),Ve(this.element,{tabindex:"-1",spellcheck:"false","aria-label":"colorpicker"}),this.container=this.createElement("div",{className:"e-container"}),this.getWrapper().appendChild(this.container);var t=this.value?this.roundValue(this.value).toLowerCase():"#008000ff";this.noColor&&"Palette"===this.mode&&""===this.value&&(t="");var i=t.slice(0,7);m(this.initialInputValue)&&(this.initialInputValue=i),this.element.value=i,this.enableOpacity?this.setProperties({value:t},!0):this.setProperties({value:i},!0),this.enableRtl&&e.classList.add("e-rtl"),this.cssClass&&be([e],this.cssClass.split(" ")),this.tileRipple=at(this.container,{selector:"."+zg}),this.ctrlBtnRipple=at(this.container,{selector:".e-btn"})},t.prototype.getWrapper=function(){return this.element.parentElement},t.prototype.createWidget=function(){"Palette"===this.mode?(this.createPalette(),this.inline||this.firstPaletteFocus()):(this.createPicker(),this.inline||this.getDragHandler().focus()),this.isRgb=!0,this.createInput(),this.createCtrlBtn(),this.disabled||this.wireEvents(),this.inline&&this.disabled&&this.toggleDisabled(!0),ge.isDevice&&this.refreshPopupPos()},t.prototype.createSplitBtn=function(){var e=this,t=this.createElement("button",{className:"e-split-colorpicker"});this.getWrapper().appendChild(t),this.splitBtn=new Jf({iconCss:"e-selected-color",target:this.container,disabled:this.disabled,enableRtl:this.enableRtl,createPopupOnClick:this.createPopupOnClick,open:this.onOpen.bind(this),click:function(){e.trigger("change",{currentValue:{hex:e.value.slice(0,7),rgba:e.convertToRgbString(e.hexToRgb(e.value))},previousValue:{hex:null,rgba:null},value:e.value})}}),this.splitBtn.createElement=this.createElement,this.splitBtn.appendTo(t);var i=this.createElement("span",{className:Bg});Ee(".e-selected-color",t).appendChild(i),i.style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value));var n=this.getPopupEle();if(be([n],"e-colorpicker-popup"),this.cssClass&&be([n],this.cssClass.split(" ")),ge.isDevice){var o=this.getPopupInst();o.relateTo=document.body,o.position={X:"center",Y:"center"},o.targetType="container",o.collision={X:"fit",Y:"fit"},o.offsetY=4,n.style.zIndex=On(this.splitBtn.element).toString()}this.bindCallBackEvent()},t.prototype.onOpen=function(){this.trigger("open",{element:this.container})},t.prototype.getPopupInst=function(){return x(this.getPopupEle(),Ln)},t.prototype.bindCallBackEvent=function(){var e=this;this.splitBtn.beforeOpen=function(t){var i=new Kf;return e.trigger("beforeOpen",t,(function(n){if(!n.cancel){var o=e.getPopupEle();o.style.top=b(0+pageYOffset),o.style.left=b(0+pageXOffset),o.style.display="block",e.createWidget(),o.style.display="",ge.isDevice&&(e.modal=e.createElement("div"),e.modal.className="e-"+e.getModuleName()+" e-modal",e.modal.style.display="none",document.body.insertBefore(e.modal,o),document.body.className+=" e-colorpicker-overflow",e.modal.style.display="block",e.modal.style.zIndex=(Number(o.style.zIndex)-1).toString())}t.cancel=n.cancel,i.resolve(n)})),i},this.splitBtn.beforeClose=function(t){var i=new Kf;if(m(t.event))i.resolve(t);else{var n={element:e.container,event:t.event,cancel:!1};e.trigger("beforeClose",n,(function(n){ge.isDevice&&t.event.target===e.modal&&(n.cancel=!0),n.cancel||e.onPopupClose(),t.cancel=n.cancel,i.resolve(n)}))}return i}},t.prototype.onPopupClose=function(){this.unWireEvents(),this.destroyOtherComp(),this.container.style.width="",Ee("."+Bg,this.splitBtn.element).style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value)),this.container.innerHTML="",Se([this.container],[Ng,Dg]),ge.isDevice&&this.modal&&(Se([document.body],"e-colorpicker-overflow"),this.modal.style.display="none",this.modal.outerHTML="",this.modal=null)},t.prototype.createPalette=function(){if(Pe(this.container,[Dg],[Ng]),this.presetColors){var e=this.createElement("div",{className:"e-custom-palette"});this.appendElement(e);var t=Object.keys(this.presetColors);if(1===t.length)this.appendPalette(this.presetColors[t[0]],t[0],e);else for(var i=0,n=t.length;i<n;i++)this.appendPalette(this.presetColors[t[i]],t[i],e);De(".e-row",e).length>10&&be([e],"e-palette-group")}else this.appendPalette(jg,"default");"Palette"===this.mode&&!this.modeSwitcher&&this.noColor&&this.setNoColor();var o=parseInt(getComputedStyle(this.container).borderBottomWidth,10);this.container.style.width=b(this.container.children[0].offsetWidth+o+o),this.rgb=this.hexToRgb(this.roundValue(this.value)),this.hsv=this.rgbToHsv.apply(this,this.rgb)},t.prototype.firstPaletteFocus=function(){Ee("."+Og,this.container.children[0])||De("."+Eg,this.container)[0].focus()},t.prototype.appendPalette=function(e,t,i){var n,o,s,a=this.createElement("div",{className:Eg,attrs:{tabindex:"0",role:"grid"}});i?i.appendChild(a):this.appendElement(a);for(var r=0,l=e.length;r<l;r++)0!==r&&r%this.columns!==0||(n=this.createElement("div",{className:"e-row",attrs:{role:"row"}}),a.appendChild(n)),s=this.roundValue(e[r]).toLowerCase(),o=this.createElement("span",{className:zg,attrs:{role:"gridcell","aria-label":s,"aria-selected":"false",tabindex:"0"}}),this.trigger("beforeTileRender",{element:o,presetName:t,value:e[r]}),n.appendChild(o),this.value===s&&(this.addTileSelection(o),a.focus()),o.style.backgroundColor=this.convertToRgbString(this.hexToRgb(s))},t.prototype.setNoColor=function(){var e=this.container.querySelector(".e-row").children[0];e.classList.add(kg),this.value||(e.classList.add(Og),Fe(e,"."+Eg).focus()),["aria-selected","aria-label"].forEach((function(t){e.removeAttribute(t)})),e.style.backgroundColor=""},t.prototype.appendElement=function(e,t){void 0===t&&(t=0);var i=this.container.children[t];i?this.container.insertBefore(e,i):this.container.appendChild(e)},t.prototype.addTileSelection=function(e){e.classList.add(Og),e.setAttribute("aria-selected","true")},t.prototype.createPicker=function(){Pe(this.container,[Ng],[Dg]);var e=this.createElement("div",{className:Ig});this.appendElement(e),e.appendChild(this.createElement("div",{className:Mg}));var t=this.createElement("span",{className:yg,attrs:{tabindex:"0"}});e.appendChild(t),null===this.value&&(this.value="#008000ff"),this.rgb=this.hexToRgb(this.value),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.setHsvContainerBg(),this.setHandlerPosition(),this.createSlider(),this.createDragTooltip()},t.prototype.setHsvContainerBg=function(e){void 0===e&&(e=this.hsv[0]),this.getHsvContainer().style.backgroundColor=this.convertToRgbString(this.hsvToRgb(e,100,100,1))},t.prototype.getHsvContainer=function(){return Ee("."+Ig,this.container)},t.prototype.setHandlerPosition=function(){var e=this.getDragHandler(),t=Ee("."+Mg,this.container);this.enableRtl?e.style.left=b(t.offsetWidth*Math.abs(100-this.hsv[1])/100):e.style.left=b(t.offsetWidth*this.hsv[1]/100),e.style.top=b(t.offsetHeight*(100-this.hsv[2])/100)},t.prototype.createSlider=function(){var e=this.createElement("div",{className:"e-slider-preview"});this.appendElement(e,1),this.createPreview(e);var t=this.createElement("div",{className:"e-colorpicker-slider"});e.insertBefore(t,e.children[0]);var i=this.createElement("div",{className:"e-hue-slider"});t.appendChild(i),this.hueSlider=new rg({value:this.hsv[0],min:0,max:359,enableRtl:this.enableRtl,enabled:!this.disabled,change:this.hueChange.bind(this)}),this.hueSlider.createElement=this.createElement,this.hueSlider.appendTo(i),this.enableOpacity&&(i=this.createElement("div",{className:"e-opacity-slider"}),t.appendChild(i),this.createOpacitySlider(i))},t.prototype.createOpacitySlider=function(e){this.opacitySlider=new rg({value:100*this.rgb[3],min:0,max:100,enableRtl:this.enableRtl,enabled:!this.disabled,change:this.opacityChange.bind(this)}),this.opacitySlider.createElement=this.createElement,this.opacitySlider.appendTo(e);var t=this.createElement("div",{className:"e-opacity-empty-track"});e.appendChild(t),this.updateOpacitySliderBg()},t.prototype.updateOpacitySliderBg=function(){var e=this.enableRtl?"to left":"to right",t=Ee(".e-opacity-empty-track",this.opacitySlider.element);t&&(t.style.background="linear-gradient("+e+", rgba("+this.rgb.slice(0,3)+", 0) 0%, "+this.convertToRgbString(this.rgb.slice(0,3))+" 100%)")},t.prototype.hueChange=function(e){this.hsv[0]=e.value,this.setHsvContainerBg(),this.convertToOtherFormat()},t.prototype.opacityChange=function(e){var t=e.value,i=this.rgbToHex(this.rgb);this.hsv[3]=t/100,this.rgb[3]=t/100;var n=this.rgbToHex(this.rgb);this.updateOpacityInput(t);var o=this.convertToRgbString(this.rgb);this.updatePreview(o),this.triggerEvent(n,i,o)},t.prototype.updateOpacityInput=function(e){if(this.enableOpacity&&!this.getWrapper().classList.contains(Cg)){var t=x(Ee("."+Vg,this.container),Eh);t.value=e,t.dataBind()}},t.prototype.createPreview=function(e){var t=this.createElement("div",{className:Fg});e.appendChild(t);var i=this.createElement("span",{className:"e-preview "+cg});t.appendChild(i);var n=this.convertToRgbString(this.rgb);i.style.backgroundColor=n,i=this.createElement("span",{className:"e-preview "+Lg}),t.appendChild(i),i.style.backgroundColor=n},t.prototype.isPicker=function(){return!this.container.classList.contains(Dg)},t.prototype.getPopupEle=function(){return this.container.parentElement},t.prototype.createNumericInput=function(e,t,i,n){var o=this,s=new Eh({value:t,placeholder:i,min:0,max:n,format:"###.##",showSpinButton:!1,floatLabelType:"Always",enableRtl:this.enableRtl,enabled:!this.disabled,readonly:!this.isPicker(),change:function(e){e.event&&o.inputHandler(e.event)}});s.createElement=this.createElement,s.appendTo(e)},t.prototype.createInput=function(){var e=this.isPicker(),t=this.getWrapper();if(e&&!t.classList.contains(Cg)||!e&&t.classList.contains(Pg)){var i=this.createElement("div",{className:Tg});e?this.appendElement(i,2):this.appendElement(i,1);var n=this.createElement("div",{className:"e-input-container"});if(i.appendChild(n),t.classList.contains(xg)||this.appendValueSwitchBtn(i),!t.classList.contains(wg)){var o=this.createElement("input",{className:vg,attrs:{maxlength:"7",spellcheck:"false","aria-label":"HEX"}});n.appendChild(o),rs.createInput({element:o,floatLabelType:"Always",properties:{placeholder:"HEX",enableRtl:this.enableRtl,enabled:!this.disabled,readonly:!this.isPicker()}},this.createElement),rs.setValue(this.value.slice(0,7),o),o.addEventListener("input",this.inputHandler.bind(this))}if(!t.classList.contains(Sg)){var s=void 0,a=void 0;this.isRgb?(s="RGB",a=this.rgb):(s="HSV",a=this.hsv);for(var r=["rh","gs","bv"],l=0;l<3;l++)this.createNumericInput(n.appendChild(this.createElement("input",{className:"e-"+r[l]+"-value"})),a[l],s[l],255);this.enableOpacity&&this.appendOpacityValue(n)}}},t.prototype.appendOpacityValue=function(e){this.createNumericInput(e.appendChild(this.createElement("input",{className:Vg})),100*this.rgb[3],"A",100)},t.prototype.appendValueSwitchBtn=function(e){var t=this.createElement("button",{className:"e-icons e-css e-btn e-flat e-icon-btn "+gg,attrs:{title:"Toggle format"}});e.appendChild(t),this.isPicker()&&!this.getWrapper().classList.contains(Sg)&&t.addEventListener("click",this.formatSwitchHandler.bind(this))},t.prototype.createCtrlBtn=function(){if(this.modeSwitcher||this.showButtons){this.l10n.setLocale(this.locale);var e=this.createElement("div",{className:fg});if(this.container.appendChild(e),this.showButtons){var t=this.createElement("div",{className:ug});e.appendChild(t);var i=this.l10n.getConstant("Apply");t.appendChild(this.createElement("button",{innerHTML:i,className:"e-btn e-css e-flat e-primary e-small "+hg,attrs:{title:i}}));var n=this.l10n.getConstant("Cancel");t.appendChild(this.createElement("button",{innerHTML:n,className:"e-btn e-css e-flat e-small "+pg,attrs:{title:n}}))}this.modeSwitcher&&this.appendModeSwitchBtn()}},t.prototype.appendModeSwitchBtn=function(){var e=this.createElement("button",{className:"e-icons e-btn e-flat e-icon-btn "+Ag,attrs:{title:this.l10n.getConstant("ModeSwitcher")}});Ee("."+fg,this.container).insertBefore(e,Ee("."+ug,this.container))},t.prototype.createDragTooltip=function(){var e=this,t=new Xd({opensOn:"Custom",showTipPointer:!1,cssClass:"e-color-picker-tooltip",beforeOpen:function(t){e.tooltipEle=t.element},animation:{open:{effect:"None"},close:{effect:"None"}}});t.createElement=this.createElement,t.appendTo(this.container),t.open(this.container),this.tooltipEle.style.zIndex=On(this.tooltipEle).toString(),Ee(".e-tip-content",this.tooltipEle).appendChild(this.createElement("div",{className:"e-tip-transparent"}))},t.prototype.getTooltipInst=function(){return x(this.container,Xd)},t.prototype.setTooltipOffset=function(e){this.getTooltipInst().offsetY=e},t.prototype.toggleDisabled=function(e){e?this.getWrapper().classList.add(mg):this.getWrapper().classList.remove(mg),this.showButtons&&[].slice.call(De(".e-btn",this.container)).forEach((function(t){e?Ve(t,{disabled:""}):t.removeAttribute("disabled")}))},t.prototype.convertToRgbString=function(e){return e.length?4===e.length?"rgba("+e.join()+")":"rgb("+e.join()+")":""},t.prototype.convertToHsvString=function(e){return 4===e.length?"hsva("+e.join()+")":"hsv("+e.join()+")"},t.prototype.updateHsv=function(){this.hsv[1]=this.hsv[1]>100?100:this.hsv[1],this.hsv[2]=this.hsv[2]>100?100:this.hsv[2],this.setHandlerPosition()},t.prototype.convertToOtherFormat=function(e){void 0===e&&(e=!1);var t=this.rgbToHex(this.rgb);this.rgb=this.hsvToRgb.apply(this,this.hsv);var i=this.rgbToHex(this.rgb),n=this.convertToRgbString(this.rgb);this.updatePreview(n),this.updateInput(i),this.triggerEvent(i,t,n,e)},t.prototype.updateInput=function(e){var t=this.getWrapper();t.classList.contains(Cg)||(t.classList.contains(wg)||rs.setValue(e.substr(0,7),Ee("."+vg,this.container)),t.classList.contains(Sg)||(this.isRgb?this.updateValue(this.rgb,!1):this.updateValue(this.hsv,!1)))},t.prototype.updatePreview=function(e){this.enableOpacity&&this.updateOpacitySliderBg(),Ee(".e-tip-transparent",this.tooltipEle).style.backgroundColor=e,Ee("."+Fg+" ."+cg,this.container).style.backgroundColor=e,Ee("."+Fg+" ."+Lg,this.container).style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value))},t.prototype.getDragHandler=function(){return Ee("."+yg,this.container)},t.prototype.removeTileSelection=function(){[].slice.call(De("."+Og,this.container.children[0])).forEach((function(e){e.classList.remove(Og),e.setAttribute("aria-selected","false")}))},t.prototype.convertRgbToNumberArray=function(e){return e.slice(e.indexOf("(")+1,e.indexOf(")")).split(",").map((function(e,t){return 3!==t?parseInt(e,10):parseFloat(e)}))},t.prototype.getValue=function(e,t){if(e||(e=this.value),t=t?t.toLowerCase():"hex","r"===e[0]){var i=this.convertRgbToNumberArray(e);if("hex"===t||"hexa"===t){var n=this.rgbToHex(i);return"hex"===t?n.slice(0,7):n}return"hsv"===t?this.convertToHsvString(this.rgbToHsv.apply(this,i.slice(0,3))):"hsva"===t?this.convertToHsvString(this.rgbToHsv.apply(this,i)):"null"}if("h"===e[0]){i=this.hsvToRgb.apply(this,this.convertRgbToNumberArray(e));if("rgba"===t)return this.convertToRgbString(i);if("hex"===t||"hexa"===t){n=this.rgbToHex(i);return"hex"===t?n.slice(0,7):n}return"rgb"===t?this.convertToRgbString(i.slice(0,3)):"null"}e=this.roundValue(e);var o=this.hexToRgb(e);return"rgb"!==t&&"hsv"!==t||(o=o.slice(0,3)),"rgba"===t||"rgb"===t?this.convertToRgbString(o):"hsva"===t||"hsv"===t?this.convertToHsvString(this.rgbToHsv.apply(this,o)):"hex"===t?e.slice(0,7):"a"===t?o[3].toString():"null"},t.prototype.toggle=function(){this.container.parentElement.classList.contains("e-popup-close")?this.splitBtn.toggle():this.closePopup(null)},t.prototype.getModuleName=function(){return"colorpicker"},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.wireEvents=function(){if(this.isPicker()){var e=this.getDragHandler();ye.add(e,"keydown",this.pickerKeyDown,this),ye.add(this.getHsvContainer(),"mousedown touchstart",this.handlerDown,this),(this.modeSwitcher||this.showButtons)&&this.addCtrlSwitchEvent(),ye.add(Ee("."+Lg,this.container),"click",this.previewHandler,this)}else ye.add(this.container,"click",this.paletteClickHandler,this),ye.add(this.container,"keydown",this.paletteKeyDown,this)},t.prototype.formResetHandler=function(){this.value=this.initialInputValue,Ve(this.element,{value:this.initialInputValue})},t.prototype.addCtrlSwitchEvent=function(){var e=Ee("."+fg,this.container);e&&ye.add(e,"click",this.btnClickHandler,this)},t.prototype.pickerKeyDown=function(e){switch(e.keyCode){case 39:this.handlerDragPosition(1,this.enableRtl?-1:1,e);break;case 37:this.handlerDragPosition(1,this.enableRtl?1:-1,e);break;case 38:this.handlerDragPosition(2,1,e);break;case 40:this.handlerDragPosition(2,-1,e);break;case 13:e.preventDefault();var t=this.rgbToHex(this.rgb);this.enterKeyHandler(t,e)}},t.prototype.enterKeyHandler=function(e,t){this.triggerChangeEvent(e),this.inline||(this.closePopup(t),this.splitBtn.element.focus())},t.prototype.closePopup=function(e){var t=this,i={element:this.container,event:e,cancel:!1};this.trigger("beforeClose",i,(function(e){e.cancel||(t.splitBtn.toggle(),t.onPopupClose())}))},t.prototype.triggerChangeEvent=function(e){var t=e.slice(0,7);this.trigger("change",{currentValue:{hex:t,rgba:this.convertToRgbString(this.rgb)},previousValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},value:this.enableOpacity?e:t}),this.enableOpacity?this.setProperties({value:e},!0):this.setProperties({value:t},!0),this.element.value=t||"#000000"},t.prototype.handlerDragPosition=function(e,t,i){i.preventDefault(),this.hsv[e]+=t*(i.ctrlKey?1:3),this.hsv[e]<0&&(this.hsv[e]=0),this.updateHsv(),this.convertToOtherFormat(!0)},t.prototype.handlerDown=function(e){e.preventDefault(),"mousedown"===e.type?(this.clientX=Math.abs(e.pageX-pageXOffset),this.clientY=Math.abs(e.pageY-pageYOffset),this.setTooltipOffset(8)):(this.clientX=Math.abs(e.changedTouches[0].pageX-pageXOffset),this.clientY=Math.abs(e.changedTouches[0].pageY-pageYOffset),this.setTooltipOffset(-8)),this.setHsv(this.clientX,this.clientY),this.getDragHandler().style.transition="left .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1)",this.updateHsv(),this.convertToOtherFormat(),this.getDragHandler().focus(),ye.add(document,"mousemove touchmove",this.handlerMove,this),ye.add(document,"mouseup touchend",this.handlerEnd,this)},t.prototype.handlerMove=function(e){var t,i;"touchmove"!==e.type&&e.preventDefault(),"mousemove"===e.type?(t=Math.abs(e.pageX-pageXOffset),i=Math.abs(e.pageY-pageYOffset)):(t=Math.abs(e.changedTouches[0].pageX-pageXOffset),i=Math.abs(e.changedTouches[0].pageY-pageYOffset)),this.setHsv(t,i);var n=this.getDragHandler();this.updateHsv(),this.convertToOtherFormat(),this.getTooltipInst().refresh(n),this.tooltipEle.style.transform||(Math.abs(this.clientX-t)>8||Math.abs(this.clientY-i)>8)&&(Ee("."+Mg,this.container).style.cursor="pointer",n.style.transition="none",this.inline||(this.tooltipEle.style.zIndex=(parseInt(this.getPopupEle().style.zIndex,10)+1).toString()),this.tooltipEle.style.transform="rotate(45deg)",n.classList.add("e-hide-handler"))},t.prototype.setHsv=function(e,t){var i=Ee("."+Mg,this.container),n=i.getBoundingClientRect();e=this.enableRtl?e>n.right?0:Math.abs(e-n.right):e>n.left?Math.abs(e-n.left):0,t=t>n.top?Math.abs(t-n.top):0,this.hsv[2]=Math.round(10*Number(100*(i.offsetHeight-Math.max(0,Math.min(i.offsetHeight,t-i.offsetTop)))/i.offsetHeight))/10,this.hsv[1]=Math.round(10*Number(100*Math.max(0,Math.min(i.offsetWidth,e-i.offsetLeft))/i.offsetWidth))/10},t.prototype.handlerEnd=function(e){"touchend"!==e.type&&e.preventDefault(),ye.remove(document,"mousemove touchmove",this.handlerMove),ye.remove(document,"mouseup touchend",this.handlerEnd);var t=this.getDragHandler();Ee("."+Mg,this.container).style.cursor="",this.tooltipEle.style.transform&&(this.tooltipEle.style.transform="",t.classList.remove("e-hide-handler")),this.inline||this.showButtons||this.closePopup(e)},t.prototype.btnClickHandler=function(e){var t=e.target;Fe(t,"."+Ag)?(e.stopPropagation(),this.switchToPalette()):(t.classList.contains(hg)||t.classList.contains(pg))&&this.ctrlBtnClick(t,e)},t.prototype.switchToPalette=function(){this.trigger("beforeModeSwitch",{element:this.container,mode:"Palette"}),this.unWireEvents(),this.destroyOtherComp(),Ae(Ee(".e-slider-preview",this.container)),this.getWrapper().classList.contains(Cg)||ke(Ee("."+Tg,this.container)),Ae(this.getHsvContainer()),this.createPalette(),this.firstPaletteFocus(),this.createInput(),this.refreshPopupPos(),this.wireEvents(),this.trigger("onModeSwitch",{element:this.container,mode:"Palette"})},t.prototype.refreshPopupPos=function(){if(!this.inline){var e=this.getPopupEle();e.style.left=b(0+pageXOffset),e.style.top=b(0+pageYOffset),this.getPopupInst().refreshPosition(this.splitBtn.element.parentElement)}},t.prototype.formatSwitchHandler=function(){this.isRgb?(this.updateValue(this.hsv,!0,3,[360,100,100]),this.isRgb=!1):(this.updateValue(this.rgb,!0,2),this.isRgb=!0)},t.prototype.updateValue=function(e,t,i,n){for(var o,s=["e-rh-value","e-gs-value","e-bv-value"],a=0,r=s.length;a<r;a++)(o=x(Ee("."+s[a],this.container),Eh)).value=Math.round(e[a]),t&&(o.placeholder=s[a].substr(i,1).toUpperCase(),o.max=n?n[a]:255),o.dataBind()},t.prototype.previewHandler=function(e){var t=e.target,i=this.rgbToHex(this.rgb);this.rgb=this.convertRgbToNumberArray(t.style.backgroundColor),this.rgb[3]||(this.rgb[3]=1);var n=this.rgbToHex(this.rgb),o=this.rgbToHsv.apply(this,this.rgb);o[0]!==this.hsv[0]&&(this.hueSlider.setProperties({value:o[0]},!0),this.hueSlider.refresh()),this.setHsvContainerBg(o[0]),this.enableOpacity&&o[3]!==this.hsv[3]&&(this.opacitySlider.setProperties({value:100*o[3]},!0),this.opacitySlider.refresh(),this.updateOpacitySliderBg()),this.hsv=o,this.setHandlerPosition(),this.updateInput(n),Ee("."+Fg+" ."+cg,this.container).style.backgroundColor=this.convertToRgbString(this.rgb),this.triggerEvent(n,i,this.convertToRgbString(this.rgb))},t.prototype.paletteClickHandler=function(e){e.preventDefault();var t=e.target;if(t.classList.contains(zg)){if(this.removeTileSelection(),this.addTileSelection(t),t.classList.contains(kg))this.noColorTile();else{var i=t.getAttribute("aria-label"),n=this.rgbToHex(this.rgb);this.rgb=this.hexToRgb(this.roundValue(i)),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.getWrapper().classList.contains(Pg)&&this.updateInput(i),this.triggerEvent(i,n,this.convertToRgbString(this.rgb))}this.inline||this.showButtons||this.closePopup(e)}else Fe(t,"."+Ag)?this.switchToPicker():t.classList.contains(hg)||t.classList.contains(pg)?this.ctrlBtnClick(t,e):this.getWrapper().classList.contains(Pg)&&Fe(t,"."+gg)&&this.formatSwitchHandler()},t.prototype.noColorTile=function(e){void 0===e&&(e=!1);var t=this.rgbToHex(this.rgb);this.rgb=[],this.hsv=[],this.triggerEvent("",t,"",e)},t.prototype.switchToPicker=function(){var e=this.getWrapper();this.trigger("beforeModeSwitch",{element:this.container,mode:"Picker"}),this.unWireEvents(),[].slice.call(De("."+Eg,this.container)).forEach((function(e){Ae(e)})),e.classList.contains(Pg)&&Ae(Ee("."+Tg,this.container)),this.container.style.width="";var t=Ee(".e-custom-palette",this.container);this.presetColors&&ke(t),this.createPicker(),this.getDragHandler().focus(),this.createInput(),this.refreshPopupPos(),this.wireEvents(),this.trigger("onModeSwitch",{element:this.container,mode:"Picker"})},t.prototype.ctrlBtnClick=function(e,t){if(e.classList.contains(hg)){var i=this.rgbToHex(this.rgb);this.triggerChangeEvent(i)}this.inline||(this.closePopup(t),this.splitBtn.element.focus())},t.prototype.paletteKeyDown=function(e){var t=e.target;if(t.classList.contains(Eg)){var i,n,o=[].slice.call(De("."+zg,t)),s=o.filter((function(e){return e.classList.contains("e-selected")})).pop();switch(!e.altKey&&e.keyCode){case 39:e.preventDefault(),i=s?o[this.tilePosition(o,s,this.enableRtl?-1:1)]:o[this.enableRtl?o.length-1:0],this.keySelectionChanges(i);break;case 37:e.preventDefault(),i=s?o[this.tilePosition(o,s,this.enableRtl?1:-1)]:o[this.enableRtl?0:o.length-1],this.keySelectionChanges(i);break;case 38:e.preventDefault(),i=o[n=s?this.tilePosition(o,s,-this.columns):0]?o[n]:o[n-this.columns],this.keySelectionChanges(i);break;case 40:e.preventDefault(),o[n=s?this.tilePosition(o,s,this.columns):o.length-1]?i=o[n]:(n%=o.length,i=o[n+=o[o.length-1].parentElement.childElementCount]),this.keySelectionChanges(i);break;case 13:if(e.preventDefault(),s){var a=s.getAttribute("aria-label");this.enterKeyHandler(a||"",e)}}}},t.prototype.keySelectionChanges=function(e){if(this.removeTileSelection(),this.addTileSelection(e),e.classList.contains(kg))this.noColorTile(!0);else{var t=e.getAttribute("aria-label"),i=this.rgbToHex(this.rgb);this.rgb=this.hexToRgb(t),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.getWrapper().classList.contains(Pg)&&this.updateInput(t),this.triggerEvent(t,i,this.convertToRgbString(this.rgb),!0)}},t.prototype.tilePosition=function(e,t,i){var n=(e=Array.prototype.slice.call(e)).length,o=this.columns-e[n-1].parentElement.childElementCount,s=e.indexOf(t);return(s+=i)<0?s+=n+o:s%=n+o,s},t.prototype.inputHandler=function(e){var t,i,n=e.target;if(n.value.length)switch(Ee(".e-float-text",n.parentElement).textContent){case"HEX":var o="";if(("#"===n.value[0]&&5!==n.value.length||"#"!==n.value[0]&&4!==n.value.length)&&(o=this.roundValue(n.value)),9!==o.length)return;i=this.rgbToHex(this.rgb),this.rgb=this.hexToRgb(o+o.substr(-2)),this.inputValueChange(this.rgbToHsv.apply(this,this.rgb),i,n.value);break;case"R":this.rgb[0]!==Number(n.value)&&(i=this.rgbToHex(this.rgb),this.rgb[0]=Number(n.value),t=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(t,i));break;case"G":this.rgb[1]!==Number(n.value)&&(i=this.rgbToHex(this.rgb),this.rgb[1]=Number(n.value),t=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(t,i));break;case"B":this.rgb[2]!==Number(n.value)&&(i=this.rgbToHex(this.rgb),this.rgb[2]=Number(n.value),t=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(t,i));break;case"H":this.hueSlider.value=Number(n.value);break;case"S":this.hsv[1]!==Number(n.value)&&(this.hsv[1]=Number(n.value),this.updateHsv(),this.convertToOtherFormat());break;case"V":this.hsv[2]!==Number(n.value)&&(this.hsv[2]=Number(n.value),this.updateHsv(),this.convertToOtherFormat());break;case"A":this.opacitySlider.value=Number(n.value)}},t.prototype.inputValueChange=function(e,t,i){e[0]!==this.hsv[0]&&(this.hueSlider.setProperties({value:e[0]},!0),this.hueSlider.refresh(),this.setHsvContainerBg(e[0])),this.hsv=e;var n=this.rgbToHex(this.rgb);this.setHandlerPosition(),this.updateInput(i||n);var o=this.convertToRgbString(this.rgb);this.updatePreview(o),this.triggerEvent(n,t,o)},t.prototype.triggerEvent=function(e,t,i,n){void 0===n&&(n=!1);var o=e.slice(0,7);this.showButtons||n?this.trigger("select",{currentValue:{hex:o,rgba:i},previousValue:{hex:t.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(t))}}):(this.trigger("change",{currentValue:{hex:o,rgba:i},previousValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},value:e}),this.enableOpacity?this.setProperties({value:e},!0):this.setProperties({value:o},!0),this.element.value=o||"#000000")},t.prototype.destroy=function(){var t=this,i=this.getWrapper();e.prototype.destroy.call(this),["tabindex","spellcheck"].forEach((function(e){t.element.removeAttribute(e)})),this.inline?(this.unWireEvents(),this.destroyOtherComp()):(this.isPopupOpen()&&(this.unWireEvents(),this.destroyOtherComp()),this.splitBtn.destroy(),this.splitBtn=null),this.tileRipple(),this.tileRipple=null,this.ctrlBtnRipple(),this.ctrlBtnRipple=null,this.element.nextElementSibling&&Ae(this.element.nextElementSibling),i&&(i.parentElement.insertBefore(this.element,i),Ae(i)),this.container=null,this.formElement&&ye.remove(this.formElement,"reset",this.formResetHandler)},t.prototype.destroyOtherComp=function(){if(this.isPicker()){this.hueSlider.destroy(),this.enableOpacity&&(this.opacitySlider.destroy(),this.opacitySlider=null),this.hueSlider=null;var e=this.getTooltipInst();e.close(),e.destroy(),this.tooltipEle=null}},t.prototype.isPopupOpen=function(){return this.getPopupEle().classList.contains("e-popup-open")},t.prototype.unWireEvents=function(){if(this.isPicker()){var e=this.getDragHandler();ye.remove(e,"keydown",this.pickerKeyDown),ye.remove(this.getHsvContainer(),"mousedown touchstart",this.handlerDown),(this.modeSwitcher||this.showButtons)&&ye.remove(Ee("."+fg,this.container),"click",this.btnClickHandler),ye.remove(Ee("."+Lg,this.container),"click",this.previewHandler)}else ye.remove(this.container,"click",this.paletteClickHandler),ye.remove(this.container,"keydown",this.paletteKeyDown)},t.prototype.roundValue=function(e){if(!e)return"";"#"!==e[0]&&(e="#"+e);var t=e.length;if(4===t&&(e+="f",t=5),5===t){for(var i="",n=1,o=e.length;n<o;n++)i+=e.charAt(n)+e.charAt(n);e="#"+i,t=9}return 7===t&&(e+="ff"),e},t.prototype.hexToRgb=function(e){if(!e)return[];9!==(e=e.trim()).length&&(e=this.roundValue(e));var t=Number((parseInt(e.slice(-2),16)/255).toFixed(2));e=e.slice(1,7);var i=parseInt(e,16),n=[];return n.push(i>>16&255),n.push(i>>8&255),n.push(255&i),n.push(t),n},t.prototype.rgbToHsv=function(e,t,i,n){if(this.rgb&&!this.rgb.length)return[];e/=255,t/=255,i/=255;var o,s=Math.max(e,t,i),a=Math.min(e,t,i),r=s,l=s-a,d=0===s?0:l/s;if(s===a)o=0;else{switch(s){case e:o=(t-i)/l+(t<i?6:0);break;case t:o=(i-e)/l+2;break;case i:o=(e-t)/l+4}o/=6}var h=[Math.round(360*o),Math.round(1e3*d)/10,Math.round(1e3*r)/10];return m(n)||h.push(n),h},t.prototype.hsvToRgb=function(e,t,i,n){var o,s,a;if(i/=100,0===(t/=100))return o=s=a=i,[Math.round(255*o),Math.round(255*s),Math.round(255*a),n];e/=60;var r=Math.floor(e),l=e-r,d=i*(1-t),h=i*(1-t*l),p=i*(1-t*(1-l));switch(r){case 0:o=i,s=p,a=d;break;case 1:o=h,s=i,a=d;break;case 2:o=d,s=i,a=p;break;case 3:o=d,s=h,a=i;break;case 4:o=p,s=d,a=i;break;default:o=i,s=d,a=h}var c=[Math.round(255*o),Math.round(255*s),Math.round(255*a)];return m(n)||c.push(n),c},t.prototype.rgbToHex=function(e){return e.length?"#"+this.hex(e[0])+this.hex(e[1])+this.hex(e[2])+(m(e[3])?"":0!==e[3]?(Math.round(255*e[3])+65536).toString(16).substr(-2):"00"):""},t.prototype.hex=function(e){return("0"+e.toString(16)).slice(-2)},t.prototype.changeModeSwitcherProp=function(e){var t=Ee("."+fg,this.container);e?t?this.appendModeSwitchBtn():(this.createCtrlBtn(),this.isPicker()&&!this.disabled&&this.addCtrlSwitchEvent()):t&&(this.showButtons?Ae(Ee("."+Ag,t)):ke(t))},t.prototype.changeShowBtnProps=function(e){var t=Ee("."+fg,this.container);e?(t&&ke(t),this.createCtrlBtn(),this.isPicker()&&!this.disabled&&this.addCtrlSwitchEvent()):this.modeSwitcher?Ae(Ee("."+ug,t)):ke(t)},t.prototype.changeValueProp=function(e){if(this.isPicker())this.rgb=this.hexToRgb(e),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.setHandlerPosition(),Ae(Fe(this.hueSlider.element,".e-slider-preview")),this.createSlider(),this.setHsvContainerBg(),this.updateInput(e),4===this.rgb.length&&this.updateOpacityInput(100*this.rgb[3]);else{this.removeTileSelection();var t=this.container.querySelector('span[aria-label="'+this.roundValue(e)+'"]');t&&this.addTileSelection(t)}},t.prototype.setInputEleProps=function(){ke(Ee("."+Tg,this.container)),this.createInput()},t.prototype.changeDisabledProp=function(e){this.isPicker()&&(this.hueSlider.enabled=!e,this.opacitySlider.enabled=!e,this.setInputEleProps()),e?(this.toggleDisabled(!0),this.unWireEvents()):(this.toggleDisabled(!1),this.wireEvents())},t.prototype.changeCssClassProps=function(e,t){var i=this.getWrapper(),n=this.getPopupEle();t&&Se([i,n],t.split(" ")),e&&be([i,n],e.split(" "))},t.prototype.changeRtlProps=function(e){e?be([this.getWrapper()],"e-rtl"):Se([this.getWrapper()],"e-rtl")},t.prototype.changePaletteProps=function(){Ae(this.container.children[0]),this.container.style.width="",this.createPalette()},t.prototype.changeOpacityProps=function(e){var t=this.getWrapper();e?(Se([this.container.parentElement],bg),this.createOpacitySlider(Ee(".e-colorpicker-slider",this.container).appendChild(this.createElement("div",{className:"e-opacity-slider"}))),t.classList.contains(Cg)||t.classList.contains(Sg)||this.appendOpacityValue(Ee(".e-input-container",this.container))):(be([this.container.parentElement],bg),this.opacitySlider.destroy(),ke(this.opacitySlider.element),this.opacitySlider=null,t.classList.contains(Cg)||t.classList.contains(Sg)||ke(Ee("."+Vg,this.container).parentElement))},t.prototype.onPropertyChanged=function(e,t){var i=this;if(!m(e.value)){var n=this.roundValue(e.value);if(9===n.length){this.element.value=this.roundValue(n).slice(0,7);var o=this.splitBtn&&Ee("."+Bg,this.splitBtn.element);o&&(o.style.backgroundColor=this.convertToRgbString(this.hexToRgb(e.value)))}else this.value=t.value}if(!this.inline&&m(e.inline)){if(this.splitBtn.setProperties(Lf(e,["disabled","enableRtl"])),!this.isPopupOpen())return this.changeCssClassProps(e.cssClass,t.cssClass),void this.changeRtlProps(e.enableRtl)}for(var s=function(n){switch(n){case"inline":e.inline?(a.getWrapper().appendChild(a.container),a.splitBtn.destroy(),Ae(a.element.nextElementSibling),a.container.children.length||a.createWidget()):(a.destroyOtherComp(),a.unWireEvents(),a.container.innerHTML="",a.createSplitBtn());break;case"cssClass":a.changeCssClassProps(e.cssClass,t.cssClass);var o=e.cssClass.split(" ").concat(t.cssClass.split(" "));o=o.reduce((function(e,t){return e.indexOf(t)<0&&e.push(t),e}),[]);var s=0;o.forEach((function(e){0!==s||e!==Cg&&e!==xg&&e!==Pg&&e!==wg&&e!==Sg||(Ee("."+Tg,i.container)&&ke(Ee("."+Tg,i.container)),i.createInput(),s++)}));break;case"enableRtl":a.isPicker()&&(a.hueSlider.enableRtl=e.enableRtl,a.enableOpacity&&(a.opacitySlider.enableRtl=e.enableRtl),a.setInputEleProps()),a.changeRtlProps(e.enableRtl);break;case"disabled":a.changeDisabledProp(e.disabled);break;case"value":a.value!==t.value&&a.changeValueProp(e.value);break;case"showButtons":a.changeShowBtnProps(e.showButtons);break;case"mode":"Picker"===e.mode?a.switchToPicker():a.switchToPalette();break;case"modeSwitcher":a.changeModeSwitcherProp(e.modeSwitcher);break;case"columns":case"presetColors":a.isPicker()||a.changePaletteProps();break;case"noColor":e.noColor?"Palette"!==a.mode||a.modeSwitcher||a.setNoColor():a.changePaletteProps();break;case"enableOpacity":a.changeOpacityProps(e.enableOpacity)}},a=this,r=0,l=Object.keys(e);r<l.length;r++){s(l[r])}},t.prototype.focusIn=function(){this.element.parentElement.focus()},dg([Ge("#008000ff")],t.prototype,"value",void 0),dg([Ge("")],t.prototype,"cssClass",void 0),dg([Ge(!1)],t.prototype,"disabled",void 0),dg([Ge("Picker")],t.prototype,"mode",void 0),dg([Ge(!0)],t.prototype,"modeSwitcher",void 0),dg([Ge(null)],t.prototype,"presetColors",void 0),dg([Ge(!0)],t.prototype,"showButtons",void 0),dg([Ge(10)],t.prototype,"columns",void 0),dg([Ge(!1)],t.prototype,"inline",void 0),dg([Ge(!1)],t.prototype,"noColor",void 0),dg([Ge(!1)],t.prototype,"enablePersistence",void 0),dg([Ge(!0)],t.prototype,"enableOpacity",void 0),dg([Ge(!1)],t.prototype,"createPopupOnClick",void 0),dg([$e()],t.prototype,"select",void 0),dg([$e()],t.prototype,"change",void 0),dg([$e()],t.prototype,"beforeTileRender",void 0),dg([$e()],t.prototype,"beforeOpen",void 0),dg([$e()],t.prototype,"open",void 0),dg([$e()],t.prototype,"beforeClose",void 0),dg([$e()],t.prototype,"beforeModeSwitch",void 0),dg([$e()],t.prototype,"onModeSwitch",void 0),dg([$e()],t.prototype,"created",void 0),t=dg([et],t)}(Dt),_g=function(){function e(e,t,i){var n=this;this.toolbarBorderHeight=1,this.isToolbarHidden=!1,this.isMobileAnnotEnabled=!1,this.isHighlightEnabled=!1,this.isUnderlineEnabled=!1,this.isStrikethroughEnabled=!1,this.isHighlightBtnVisible=!0,this.isCommentBtnVisible=!0,this.isUnderlineBtnVisible=!0,this.isStrikethroughBtnVisible=!0,this.isColorToolVisible=!0,this.isOpacityToolVisible=!0,this.isDeleteAnnotationToolVisible=!0,this.isCurrentAnnotationOpacitySet=!1,this.isStampBtnVisible=!1,this.isShapeBtnVisible=!1,this.isSignatureBtnVisible=!1,this.isInkBtnVisible=!1,this.isFontFamilyToolVisible=!1,this.isFontSizeToolVisible=!1,this.isFontAlignToolVisible=!1,this.isFontColorToolVisible=!1,this.isFontStylesToolVisible=!1,this.isCommentPanelBtnVisible=!1,this.isFreeTextBtnVisible=!1,this.isCalibrateBtnVisible=!1,this.isStrokeColorToolVisible=!1,this.isThicknessToolVisible=!1,this.stampMenu=[],this.stampParentID="",this.inkAnnotationSelected=!1,this.openSignaturePopup=!1,this.isSavedSignatureClicked=!1,this.saveSignatureCount=0,this.saveInitialCount=0,this.isToolbarCreated=!1,this.addStampImage=function(e){var t=n,i=e.target.files;if(null!==e.target.files[0]){var o=i[0];if(n.pdfViewer.annotationModule.stampAnnotationModule.customStampName=o.name.split(".")[0],"image"===o.type.split("/")[0]){var s=new FileReader;s.onload=function(e){var i=e.currentTarget.result;t.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0,t.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=!0,t.pdfViewerBase.stampAdded=!0,n.pdfViewer.annotationModule.stampAnnotationModule.createCustomStampAnnotation(i),t.pdfViewerBase.stampAdded=!1},s.readAsDataURL(o)}}e.target.value="",e.currentTarget.value=""},this.popupPosition=function(e,t){if(e&&e.element){var i=t.getBoundingClientRect(),n=e.element.getElementsByClassName("e-container e-color-palette")[0].getElementsByClassName("e-palette")[0].getBoundingClientRect(),o=this.pdfViewerBase.mainContainer.getBoundingClientRect();n.left+n.width>o.width&&(e.element.parentElement.style.left=n.left-n.width+i.width+"px")}},this.onShapeToolbarClicked=function(e){var t=n.pdfViewer.element.id,i=n.pdfViewer.annotation.shapeAnnotationModule;if(ge.isDevice){var o=e.originalEvent.target;n.pdfViewer.toolbarModule.selectItem(o.parentElement)}else n.deselectAllItems(),n.resetFreeTextAnnot();switch(e.originalEvent.target.id){case t+"_shape_line":case t+"_shape_lineIcon":i.setAnnotationType("Line"),n.onShapeDrawSelection(!0),n.updateColorInIcon(n.colorDropDownElement,i.lineFillColor),n.updateColorInIcon(n.strokeDropDownElement,i.lineStrokeColor),n.handleShapeTool(t+"_shape_line");break;case t+"_shape_arrow":case t+"_shape_arrowIcon":i.setAnnotationType("Arrow"),n.onShapeDrawSelection(!0),n.updateColorInIcon(n.colorDropDownElement,i.arrowFillColor),n.updateColorInIcon(n.strokeDropDownElement,i.arrowStrokeColor),n.handleShapeTool(t+"_shape_arrow");break;case t+"_shape_rectangle":case t+"_shape_rectangleIcon":i.setAnnotationType("Rectangle"),n.onShapeDrawSelection(!0),n.updateColorInIcon(n.colorDropDownElement,i.rectangleFillColor),n.updateColorInIcon(n.strokeDropDownElement,i.rectangleStrokeColor),n.handleShapeTool(t+"_shape_rectangle");break;case t+"_shape_circle":case t+"_shape_circleIcon":i.setAnnotationType("Circle"),n.onShapeDrawSelection(!0),n.updateColorInIcon(n.colorDropDownElement,i.circleFillColor),n.updateColorInIcon(n.strokeDropDownElement,i.circleStrokeColor),n.handleShapeTool(t+"_shape_circle");break;case t+"_shape_pentagon":case t+"_shape_pentagonIcon":i.setAnnotationType("Polygon"),n.onShapeDrawSelection(!0),n.updateColorInIcon(n.colorDropDownElement,i.polygonFillColor),n.updateColorInIcon(n.strokeDropDownElement,i.polygonStrokeColor),n.handleShapeTool(t+"_shape_pentagon")}},this.pdfViewer=e,this.pdfViewerBase=t,this.primaryToolbar=i}return e.prototype.initializeAnnotationToolbar=function(){var e=this;this.toolbarElement=we("div",{id:this.pdfViewer.element.id+"_annotation_toolbar",className:"e-pv-annotation-toolbar"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement),this.toolbar=new Dr({width:"",height:"",overflowMode:"Popup",cssClass:"e-pv-toolbar-scroll",items:this.createToolbarItems(),clicked:this.onToolbarClicked.bind(this),created:function(){e.createDropDowns()}}),this.toolbar.isStringTemplate=!0,this.pdfViewer.enableRtl&&(this.toolbar.enableRtl=!0),this.toolbar.appendTo(this.toolbarElement),this.afterToolbarCreation(),this.createStampContainer(),this.createSignContainer(),this.applyAnnotationToolbarSettings(),this.updateToolbarItems(),this.showAnnotationToolbar(null,!0),this.toolbarElement.setAttribute("aria-label","Annotation Toolbar")},e.prototype.createMobileAnnotationToolbar=function(e,t){var i=this;ge.isDevice&&!this.pdfViewer.enableDesktopMode?null==this.toolbarElement&&e?(this.isMobileAnnotEnabled=!0,this.toolbarElement=we("div",{id:this.pdfViewer.element.id+"_annotation_toolbar",className:"e-pv-annotation-toolbar"}),this.pdfViewerBase.viewerMainContainer.insertBefore(this.toolbarElement,this.pdfViewerBase.viewerContainer),this.toolbar=new Dr({width:"",height:"",overflowMode:"Popup",items:this.createMobileToolbarItems(t),clicked:this.onToolbarClicked.bind(this),created:function(){i.createDropDowns(t)}}),this.toolbar.isStringTemplate=!0,this.pdfViewer.enableRtl&&(this.toolbar.enableRtl=!0),this.pdfViewerBase.navigationPane.goBackToToolbar(),this.pdfViewer.toolbarModule.showToolbar(!1),this.toolbar.appendTo(this.toolbarElement),this.deleteItem=this.pdfViewerBase.getElement("_annotation_delete"),this.deleteItem.firstElementChild.id=this.pdfViewer.element.id+"_annotation_delete"):null!=this.toolbarElement&&(e?(this.isMobileAnnotEnabled=!0,this.pdfViewerBase.navigationPane.goBackToToolbar(),this.pdfViewer.toolbarModule.showToolbar(!1),this.toolbarElement.style.display="block"):e||(this.isMobileAnnotEnabled=!1,this.pdfViewer.toolbarModule.showToolbar(!0),this.hideMobileAnnotationToolbar())):this.isMobileAnnotEnabled=!0},e.prototype.hideMobileAnnotationToolbar=function(){if(null!=this.toolbarElement){if(this.pdfViewer.selectedItems.annotations.length>0||this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)this.propertyToolbar&&this.propertyToolbar.element.children.length>0&&(this.propertyToolbar.element.style.display="block",this.toolbarCreated=!0);else if(this.toolbar.element.children.length>0?this.toolbarCreated=!0:this.toolbarCreated=!1,this.propertyToolbar&&"none"!==this.propertyToolbar.element.style.display&&(this.propertyToolbar.element.style.display="none",!this.toolbarCreated)){var e=document.getElementById(this.pdfViewer.element.id+"_annotationIcon");e&&e.parentElement.classList.contains("e-pv-select")&&this.createAnnotationToolbarForMobile()}this.toolbarElement.children.length>0&&(this.toolbarElement.style.display="block"),this.adjustMobileViewer()}else this.toolbarCreated&&this.propertyToolbar&&this.propertyToolbar.element.children.length>0&&(this.propertyToolbar.element.style.display="none",this.adjustMobileViewer(),this.toolbarCreated=!1)},e.prototype.FreeTextForMobile=function(){var e=this;this.hideExistingTool(),this.freetextToolbarElement=we("div",{id:this.pdfViewer.element.id+"_freeTextToolbar",className:"e-pv-mobile-annotation-toolbar",styles:"bottom: 0px; position: absolute; width: 100%; float: left"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.freetextToolbarElement);var t,i=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate("span","_annotation_color","e-pv-annotation-color-container"),n=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate("span","_annotation_stroke","e-pv-annotation-stroke-container"),o=this.getTemplate("span","_annotation_thickness","e-pv-annotation-thickness-container"),s=this.getTemplate("span","_annotation_opacity","e-pv-annotation-opacity-container"),a=this.getTemplate("input","_annotation_fontname","e-pv-annotation-fontname-container"),r=this.getTemplate("input","_annotation_fontsize","e-pv-annotation-fontsize-container"),l=this.getTemplate("span","_annotation_textcolor","e-pv-annotation-textcolor-container"),d=this.getTemplate("span","_annotation_textalign","e-pv-annotation-textalign-container"),h=this.getTemplate("span","_annotation_textproperties","e-pv-annotation-textprop-container");t=[{prefixIcon:"e-pv-backward-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Go Back"),id:this.pdfViewer.element.id+"_backward",click:this.goBackToToolbar.bind(this)},{type:"Separator",align:"Left",cssClass:"e-pv-hightlight-separator-container"},{template:a},{template:r},{template:l},{template:d},{template:h},{template:i},{template:n},{template:o},{template:s}],this.toolbar=new Dr({items:t,width:"",height:"",overflowMode:"Scrollable",created:function(){e.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(e.pdfViewer.element.id+"_annotation_freeTextEdit")}}),this.toolbar.appendTo(this.freetextToolbarElement),this.showFreeTextPropertiesTool()},e.prototype.createPropertyTools=function(e){var t=this;if(""!==e){this.propertyToolbar&&this.propertyToolbar.destroy(),this.toolbar&&this.toolbar.destroy();var i,n=void 0;(n=document.getElementById(this.pdfViewer.element.id+"_propertyToolbar"))&&n.parentElement.removeChild(n),n=we("div",{id:this.pdfViewer.element.id+"_propertyToolbar",className:"e-pv-mobile-annotation-toolbar",styles:"bottom: 0px; position: absolute; width: 100%; float: left"}),this.pdfViewerBase.viewerMainContainer.appendChild(n);var o=new Dr({items:this.createPropertyToolbarForMobile(e),width:"",height:"",overflowMode:"Scrollable",created:function(){i=t.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?t.pdfViewer.element.id+"_underlineIcon":"FreeText"===t.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?t.pdfViewer.element.id+"_annotation_freeTextEdit":"Stamp"===t.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"StickyNotes"===t.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"Image"===t.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?t.pdfViewer.element.id+"_annotation_stamp":"HandWrittenSignature"===t.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureText"===t.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?t.pdfViewer.element.id+"_annotation_handwrittenSign":"SignatureImage"===t.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?t.pdfViewer.element.id+"_annotation_handwrittenImage":"Ink"===t.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"Path"===t.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?t.pdfViewer.element.id+"_annotation_inkIcon":"Highlight"===e||"Underline"===e||"Strikethrough"===e?t.pdfViewer.element.id+"_highlightIcon":t.pdfViewer.element.id+"_annotation_shapesIcon",t.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(i)}});if(o.isStringTemplate=!0,o.appendTo(n),!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation&&("Line"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&this.toolbar.enableItems(this.colorDropDownElement.parentElement,!1),"HandWrittenSignature"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType)){var s=document.getElementById(this.pdfViewer.element.id+"_annotation_commentPanel");this.toolbar.enableItems(s.parentElement,!1)}this.showPropertyTool(o,i)}},e.prototype.showPropertyTool=function(e,t){if(this.toolbar&&this.toolbar.destroy(),this.propertyToolbar=e,this.applyProperiesToolSettings(t),this.pdfViewer.selectedItems.annotations[0]){var i=this.pdfViewer.selectedItems.annotations[0];if("SignatureText"!==i.shapeAnnotationType&&"HandWrittenSignature"!==i.shapeAnnotationType&&"Stamp"!==i.shapeAnnotationType&&"Image"!==i.shapeAnnotationType&&"Ink"!==i.shapeAnnotationType&&"Path"!==i.shapeAnnotationType&&"StickyNotes"!==i.shapeAnnotationType){if(this.updateColorInIcon(this.colorDropDownElement,this.pdfViewer.selectedItems.annotations[0].fillColor),this.updateColorInIcon(this.strokeDropDownElement,this.pdfViewer.selectedItems.annotations[0].strokeColor),"FreeText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType)this.fontFamilyElement.ej2_instances[0].value=this.pdfViewer.selectedItems.annotations[0].fontFamily,this.fontColorElement.children[0].style.borderBottomColor=this.pdfViewer.selectedItems.annotations[0].fontColor,this.pdfViewer.annotation.modifyTextAlignment(this.pdfViewer.selectedItems.annotations[0].textAlign),this.updateTextAlignInIcon(this.pdfViewer.selectedItems.annotations[0].textAlign)}else this.strokeDropDownElement&&this.updateColorInIcon(this.strokeDropDownElement,this.pdfViewer.selectedItems.annotations[0].strokeColor)}this.toolbarCreated=!0,this.adjustMobileViewer()},e.prototype.stampToolMobileForMobile=function(e){var t=this;this.hideExistingTool(),this.stampToolbarElement&&this.stampToolbarElement.parentElement.removeChild(this.stampToolbarElement),this.stampToolbarElement=we("div",{id:this.pdfViewer.element.id+"_stampToolbar",className:"e-pv-mobile-annotation-toolbar",styles:"bottom: 0px; position: absolute; width: 100%; float: left"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.stampToolbarElement),this.toolbar=new Dr({items:this.createStampToolbarItemsForMobile(),width:"",height:"",overflowMode:"Scrollable",clicked:this.onShapeToolbarClicked.bind(this),created:function(){t.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(e)}}),this.toolbar.isStringTemplate=!0,this.toolbar.appendTo(this.stampToolbarElement),this.showStampPropertiesTool()},e.prototype.shapeToolMobile=function(e){var t=this;this.hideExistingTool(),this.shapeToolbarElement&&this.shapeToolbarElement.parentElement.removeChild(this.shapeToolbarElement),this.shapeToolbarElement=we("div",{id:this.pdfViewer.element.id+"_shapeToolbar",className:"e-pv-mobile-annotation-toolbar",styles:"bottom: 0px; position: absolute; width: 100%; float: left"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.shapeToolbarElement),this.toolbar=new Dr({items:this.createShapeToolbarItemsForMobile(),width:"",height:"",overflowMode:"Scrollable",clicked:this.onShapeToolbarClicked.bind(this),created:function(){t.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(e.originalEvent.target.id)}}),this.toolbar.isStringTemplate=!0,this.toolbar.appendTo(this.shapeToolbarElement),this.afterShapeToolbarCreationForMobile(),this.showShapeTool()},e.prototype.calibrateToolMobile=function(e){var t=this;this.hideExistingTool(),this.calibrateToolbarElement&&this.calibrateToolbarElement.parentElement.removeChild(this.calibrateToolbarElement),this.calibrateToolbarElement=we("div",{id:this.pdfViewer.element.id+"_calibrateToolbar",className:"e-pv-mobile-annotation-toolbar",styles:"bottom: 0px; position: absolute; width: 100%; float: left"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.calibrateToolbarElement),this.toolbar=new Dr({items:this.createCalibrateToolbarItemsForMobile(),width:"",height:"",overflowMode:"Scrollable",clicked:this.onCalibrateToolbarClicked.bind(this),created:function(){t.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(e.originalEvent.target.id)}}),this.toolbar.isStringTemplate=!0,this.toolbar.appendTo(this.calibrateToolbarElement),this.afterCalibrateToolbarCreationForMobile(),this.showShapeTool()},e.prototype.textMarkupForMobile=function(e){var t=this;this.hideExistingTool(),this.textMarkupToolbarElement&&this.textMarkupToolbarElement.parentElement.removeChild(this.textMarkupToolbarElement),this.textMarkupToolbarElement=we("div",{id:this.pdfViewer.element.id+"_mobileAnnotationToolbar",className:"e-pv-mobile-annotation-toolbar",styles:"bottom: 0px; position: absolute; width: 100%; float: left"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.textMarkupToolbarElement);var i,n=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate("span","_annotation_color","e-pv-annotation-color-container"),o=this.getTemplate("span","_annotation_opacity","e-pv-annotation-opacity-container");i=[{prefixIcon:"e-pv-backward-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Go Back"),id:this.pdfViewer.element.id+"_backward",click:this.goBackToToolbar.bind(this)},{type:"Separator",align:"Left",cssClass:"e-pv-hightlight-separator-container"},{template:n,align:"left"},{template:o,align:"left"}],this.propertyToolbar=new Dr({items:i,width:"",height:"",overflowMode:"Scrollable",created:function(){t.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(e.originalEvent.target.id)}}),this.propertyToolbar.isStringTemplate=!0,this.propertyToolbar.appendTo(this.textMarkupToolbarElement),this.showTextMarkupPropertiesTool()},e.prototype.showShapeTool=function(){var e=this.pdfViewer.toolbarSettings.annotationToolbarItems;e&&(-1!==e.indexOf("ColorEditTool")?this.showColorEditTool(!0,7,7):this.showColorEditTool(!1,7,7),-1!==e.indexOf("StrokeColorEditTool")?this.showStrokeColorEditTool(!0,8,8):this.showStrokeColorEditTool(!1,8,8),-1!==e.indexOf("ThicknessEditTool")?this.showThicknessEditTool(!0,9,9):this.showThicknessEditTool(!1,9,9),-1!==e.indexOf("OpacityEditTool")?this.showOpacityEditTool(!0,10,10):this.showOpacityEditTool(!1,10,10))},e.prototype.signatureInkForMobile=function(){var e=this;this.hideExistingTool(),this.signatureInkToolbarElement&&this.signatureInkToolbarElement.parentElement.removeChild(this.signatureInkToolbarElement),this.signatureInkToolbarElement=we("div",{id:this.pdfViewer.element.id+"_mobileAnnotationToolbar",className:"e-pv-mobile-annotation-toolbar",styles:"bottom: 0px; position: absolute; width: 100%; float: left"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.signatureInkToolbarElement);var t,i=this.getTemplate("span","_annotation_opacity","e-pv-annotation-opacity-container"),n=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate("span","_annotation_stroke","e-pv-annotation-stroke-container"),o=this.getTemplate("span","_annotation_thickness","e-pv-annotation-thickness-container");t=[{prefixIcon:"e-pv-backward-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Go Back"),id:this.pdfViewer.element.id+"_backward",click:this.goBackToToolbar.bind(this)},{template:i,align:"left"},{template:n,aign:"left"},{template:o,align:"left"}],this.toolbar=new Dr({items:t,width:"",height:"",overflowMode:"Scrollable",created:function(){e.pdfViewer.toolbarModule.annotationToolbarModule.mobileColorpicker(e.pdfViewer.element.id+"_annotation_inkIcon")}}),this.toolbar.isStringTemplate=!0,this.toolbar.appendTo(this.signatureInkToolbarElement)},e.prototype.hideExistingTool=function(){this.toolbar&&!this.pdfViewer.enableDesktopMode&&this.toolbar.destroy(),this.propertyToolbar&&!this.pdfViewer.enableDesktopMode&&this.propertyToolbar.destroy();var e=document.getElementById(this.pdfViewer.element.id+"_mobileAnnotationToolbar");e&&(e.style.display="none")},e.prototype.applyProperiesToolSettings=function(e){switch(e){case this.pdfViewer.element.id+"_underlineIcon":case this.pdfViewer.element.id+"_highlightIcon":this.showTextMarkupPropertiesTool();break;case this.pdfViewer.element.id+"_annotation_freeTextEdit":this.showFreeTextPropertiesTool();break;case this.pdfViewer.element.id+"_annotation_shapesIcon":this.shapePropertiesTool();break;case"stampTool":case this.pdfViewer.element.id+"_annotation_stamp":this.showStampPropertiesTool();break;case this.pdfViewer.element.id+"_annotation_handwrittenSign":case this.pdfViewer.element.id+"_annotation_inkIcon":this.showInkPropertiesTool();break;case this.pdfViewer.element.id+"_annotation_handwrittenImage":this.showImagePropertyTool()}},e.prototype.showImagePropertyTool=function(){var e=this.pdfViewer.toolbarSettings.annotationToolbarItems;e&&(-1!==e.indexOf("OpacityEditTool")?this.showOpacityEditTool(!0,0,0):this.showOpacityEditTool(!1,0,0),-1!==e.indexOf("CommentPanelTool")?this.showCommentPanelTool(!0,1,1):this.showCommentPanelTool(!1,1,1),-1!==e.indexOf("AnnotationDeleteTool")?this.showAnnotationDeleteTool(!0,2,2):this.showAnnotationDeleteTool(!1,2,2))},e.prototype.showFreeTextPropertiesTool=function(){var e=this.pdfViewer.toolbarSettings.annotationToolbarItems;e&&(-1!==e.indexOf("FontFamilyAnnotationTool")?this.showFontFamilyAnnotationTool(!0,2,2):this.showFontFamilyAnnotationTool(!1,2,2),-1!==e.indexOf("FontSizeAnnotationTool")?this.showFontSizeAnnotationTool(!0,3,3):this.showFontSizeAnnotationTool(!1,3,3),-1!==e.indexOf("FontColorAnnotationTool")?this.showFontColorAnnotationTool(!0,4,4):this.showFontColorAnnotationTool(!1,4,4),-1!==e.indexOf("FontAlignAnnotationTool")?this.showFontAlignAnnotationTool(!0,5,5):this.showFontAlignAnnotationTool(!1,5,5),-1!==e.indexOf("FontStylesAnnotationTool")?this.showFontStylesAnnotationTool(!0,6,6):this.showFontStylesAnnotationTool(!1,6,6),-1!==e.indexOf("ColorEditTool")?this.showColorEditTool(!0,7,7):this.showColorEditTool(!1,7,7),-1!==e.indexOf("StrokeColorEditTool")?this.showStrokeColorEditTool(!0,8,8):this.showStrokeColorEditTool(!1,8,8),-1!==e.indexOf("ThicknessEditTool")?this.showThicknessEditTool(!0,9,9):this.showThicknessEditTool(!1,9,9),-1!==e.indexOf("OpacityEditTool")?this.showOpacityEditTool(!0,10,10):this.showOpacityEditTool(!1,10,10),-1!==e.indexOf("CommentPanelTool")?this.showCommentPanelTool(!0,11,11):this.showCommentPanelTool(!1,11,11),-1!==e.indexOf("AnnotationDeleteTool")?this.showAnnotationDeleteTool(!0,12,12):this.showAnnotationDeleteTool(!1,12,12),-1!==e.indexOf("FreeTextAnnotationTool")?this.showFreeTextAnnotationTool(!0,0,0):(this.showFreeTextAnnotationTool(!1,0,0),this.applyHideToToolbar(!1,1,1)))},e.prototype.shapePropertiesTool=function(){var e=this.pdfViewer.toolbarSettings.annotationToolbarItems;e&&(-1!==e.indexOf("ColorEditTool")?this.showColorEditTool(!0,2,2):this.showColorEditTool(!1,2,2),-1!==e.indexOf("StrokeColorEditTool")?this.showStrokeColorEditTool(!0,3,3):this.showStrokeColorEditTool(!1,3,3),-1!==e.indexOf("ThicknessEditTool")?this.showThicknessEditTool(!0,4,4):this.showThicknessEditTool(!1,4,4),-1!==e.indexOf("OpacityEditTool")?this.showOpacityEditTool(!0,5,5):this.showOpacityEditTool(!1,5,5),-1!==e.indexOf("CommentPanelTool")?this.showCommentPanelTool(!0,6,6):this.showCommentPanelTool(!1,6,6),-1!==e.indexOf("AnnotationDeleteTool")?this.showAnnotationDeleteTool(!0,7,7):this.showAnnotationDeleteTool(!1,7,7),-1!==e.indexOf("ShapeTool")?this.showShapeAnnotationTool(!0,0,0):(this.showShapeAnnotationTool(!1,0,0),this.applyHideToToolbar(!1,1,1)))},e.prototype.showStampPropertiesTool=function(){var e=this.pdfViewer.toolbarSettings.annotationToolbarItems;e&&(-1!==e.indexOf("OpacityEditTool")?this.showOpacityEditTool(!0,2,2):this.showOpacityEditTool(!1,2,2),-1!==e.indexOf("CommentPanelTool")?this.showCommentPanelTool(!0,3,3):this.showCommentPanelTool(!1,3,3),-1!==e.indexOf("AnnotationDeleteTool")?this.showAnnotationDeleteTool(!0,4,4):this.showAnnotationDeleteTool(!1,4,4),-1!==e.indexOf("StampAnnotationTool")?this.showStampAnnotationTool(!0,0,0):(this.showStampAnnotationTool(!1,0,0),this.applyHideToToolbar(!1,1,1)))},e.prototype.showTextMarkupPropertiesTool=function(){var e=this.pdfViewer.toolbarSettings.annotationToolbarItems;e&&(-1!==e.indexOf("ColorEditTool")?this.showColorEditTool(!0,2,2):this.showColorEditTool(!1,2,2),-1!==e.indexOf("OpacityEditTool")?this.showOpacityEditTool(!0,3,3):this.showOpacityEditTool(!1,3,3),-1!==e.indexOf("CommentPanelTool")?this.showCommentPanelTool(!0,4,4):this.showCommentPanelTool(!1,4,4),-1!==e.indexOf("AnnotationDeleteTool")?this.showAnnotationDeleteTool(!0,5,5):this.showAnnotationDeleteTool(!1,5,5),e.includes("HighlightTool")||e.includes("UnderlineTool")||e.includes("StrikethroughTool")?this.applyHideToToolbar(!0,0,0):(this.applyHideToToolbar(!1,0,0),this.applyHideToToolbar(!1,1,1)))},e.prototype.showInkPropertiesTool=function(){var e=this.pdfViewer.toolbarSettings.annotationToolbarItems;e&&(-1!==e.indexOf("StrokeColorEditTool")?this.showStrokeColorEditTool(!0,2,2):this.showStrokeColorEditTool(!1,2,2),-1!==e.indexOf("ThicknessEditTool")?this.showThicknessEditTool(!0,3,3):this.showThicknessEditTool(!1,3,3),-1!==e.indexOf("OpacityEditTool")?this.showOpacityEditTool(!0,4,4):this.showOpacityEditTool(!1,4,4),-1!==e.indexOf("CommentPanelTool")?this.showCommentPanelTool(!0,5,5):this.showCommentPanelTool(!1,5,5),-1!==e.indexOf("AnnotationDeleteTool")?this.showAnnotationDeleteTool(!0,6,6):this.showAnnotationDeleteTool(!1,6,6),-1!==e.indexOf("HandWrittenSignatureTool")?this.showSignatureTool(!0,0,0):(this.showSignatureTool(!1,0,0),this.applyHideToToolbar(!1,1,1)))},e.prototype.createAnnotationToolbarForMobile=function(e){var t;if(e){var i=document.getElementById(e);i.parentElement.classList.contains("e-pv-select")?(t=!0,i.parentElement.classList.remove("e-pv-select")):(t=!1,this.pdfViewer.toolbarModule.selectItem(i.parentElement))}if(t){this.toolbarCreated=!1,this.adjustMobileViewer(),this.toolbar&&this.toolbar.destroy(),this.propertyToolbar&&this.propertyToolbar.destroy();var n=document.getElementById(this.pdfViewer.element.id+"_mobileAnnotationToolbar");return n&&(n.style.display="none"),[]}this.isToolbarCreated=!0,this.propertyToolbar&&this.propertyToolbar.destroy(),this.toolbarElement&&this.toolbarElement.parentElement.removeChild(this.toolbarElement),this.toolbarElement=we("div",{id:this.pdfViewer.element.id+"_mobileAnnotationToolbar",className:"e-pv-mobile-annotation-toolbar",styles:"bottom: 0px; position: absolute; width: 100%; float: left;"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement);var o,s=this.getTemplate("span","_annotation_stamp","e-pv-annotation-stamp-container"),a=this.getTemplate("span","_annotation_signature","e-pv-annotation-handwritten-container");return o=[{prefixIcon:"e-pv-comment-icon e-pv-icon",className:"e-pv-comment-container",id:this.pdfViewer.element.id+"_comment"},{type:"Separator",align:"Left"},{prefixIcon:"e-pv-highlight-icon e-pv-icon",className:"e-pv-highlight-container",id:this.pdfViewer.element.id+"_highlight"},{prefixIcon:"e-pv-underline-icon e-pv-icon",className:"e-pv-underline-container",id:this.pdfViewer.element.id+"_underline"},{prefixIcon:"e-pv-strikethrough-icon e-pv-icon",className:"e-pv-strikethrough-container",id:this.pdfViewer.element.id+"_strikethrough"},{type:"Separator",align:"Left"},{prefixIcon:"e-pv-annotation-shape-icon e-pv-icon",className:"e-pv-annotation-shapes-container",id:this.pdfViewer.element.id+"_annotation_shapes"},{type:"Separator",align:"Left"},{prefixIcon:"e-pv-annotation-calibrate-icon e-pv-icon",className:"e-pv-annotation-calibrate-container",id:this.pdfViewer.element.id+"_annotation_calibrate"},{type:"Separator",align:"Left"},{prefixIcon:"e-pv-freetext-icon e-pv-icon",className:"e-pv-annotation-freetextedit-container",id:this.pdfViewer.element.id+"_annotation_freeTextEdit"},{type:"Separator",align:"Left"},{template:s},{type:"Separator",align:"Left"},{template:a,align:"Left"},{type:"Separator",align:"Left"},{prefixIcon:"e-pv-inkannotation-icon e-pv-icon",className:"e-pv-annotation-ink-container",id:this.pdfViewer.element.id+"_annotation_ink",align:"Left"},{type:"Separator",align:"Left"},{prefixIcon:"e-pv-comment-panel-icon e-pv-icon",className:"e-pv-comment-panel-icon-container",id:this.pdfViewer.element.id+"_annotation_commentPanel",align:"Right"}],this.toolbarCreated&&this.toolbar?(this.toolbar.destroy(),this.toolbarCreated=!1,this.adjustMobileViewer()):(this.toolbar=new Dr({items:o,width:"",height:"",overflowMode:"Scrollable",clicked:this.onToolbarClicked.bind(this)}),this.pdfViewer.enableRtl&&(this.toolbar.enableRtl=!0),this.toolbar.isStringTemplate=!0,this.toolbar.appendTo(this.toolbarElement),this.afterMobileToolbarCreation(),this.createStampContainer(),this.createSignContainer(),this.applyMobileAnnotationToolbarSettings(),this.toolbarCreated=!0,this.adjustMobileViewer()),o},e.prototype.adjustMobileViewer=function(){var e;this.toolbarElement&&(e=this.toolbarElement.clientHeight);var t=!1;this.toolbarElement&&0===this.toolbarElement.children.length&&this.propertyToolbar&&this.propertyToolbar.element.children.length>0?(e=this.propertyToolbar.element.clientHeight,"none"===this.pdfViewer.toolbarModule.toolbarElement.style.display&&(this.pdfViewer.toolbarModule.toolbarElement.style.display="block")):this.freetextToolbarElement&&this.freetextToolbarElement.children.length>0?e=this.freetextToolbarElement.clientHeight:0===e&&this.pdfViewer.toolbarModule.toolbar?(e=this.pdfViewer.toolbarModule.toolbarElement.clientHeight,t=!0):!e&&this.propertyToolbar&&this.propertyToolbar.element.children.length>0&&(e=this.propertyToolbar.element.clientHeight),this.pdfViewer.enableToolbar&&this.toolbarCreated?this.pdfViewerBase.viewerContainer.style.height=this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),e+e)+"px":t||(this.pdfViewerBase.viewerContainer.style.height.split("%").length>1?this.pdfViewerBase.viewerContainer.style.height=this.resetViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),-e)+"px":this.pdfViewerBase.viewerContainer.style.height=this.resetViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),e)+"px")},e.prototype.showToolbar=function(e){var t=this.toolbarElement;e?(t.style.display="block",ge.isDevice&&this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule.hideMobileAnnotationToolbar()):t.style.display="none"},e.prototype.createMobileToolbarItems=function(e){var t=this.getTemplate("span","_annotation_color","e-pv-annotation-color-container"),i=this.getTemplate("span","_annotation_opacity","e-pv-annotation-opacity-container"),n=[];return n.push({prefixIcon:"e-pv-backward-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Go Back"),id:this.pdfViewer.element.id+"_backward",click:this.goBackToToolbar.bind(this)}),e||(n.push({template:t,align:"right"}),n.push({template:i,align:"right"}),n.push({type:"Separator",align:"right"})),n.push({prefixIcon:"e-pv-annotation-delete-icon e-pv-icon",className:"e-pv-annotation-delete-container",id:this.pdfViewer.element.id+"_annotation_delete",align:"right"}),n},e.prototype.goBackToToolbar=function(){this.isMobileAnnotEnabled=!1,this.toolbarElement.children.length>0?this.toolbarElement.style.display="block":(this.toolbarCreated=!1,this.toolbar.destroy(),this.createAnnotationToolbarForMobile());var e=this.pdfViewerBase.getSelectTextMarkupCurrentPage();e&&(this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage=null,this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearAnnotationSelection(e))},e.prototype.createToolbarItems=function(){var e=this.getTemplate("button","_annotation_color","e-pv-annotation-color-container"),t=this.getTemplate("button","_annotation_stroke","e-pv-annotation-stroke-container"),i=this.getTemplate("button","_annotation_thickness","e-pv-annotation-thickness-container"),n=this.getTemplate("button","_annotation_opacity","e-pv-annotation-opacity-container"),o=this.getTemplate("button","_annotation_shapes","e-pv-annotation-shapes-container"),s=this.getTemplate("button","_annotation_calibrate","e-pv-annotation-calibrate-container"),a=this.getTemplate("span","_annotation_stamp","e-pv-annotation-stamp-container"),r=this.getTemplate("button","_annotation_fontname","e-pv-annotation-fontname-container"),l=this.getTemplate("button","_annotation_fontsize","e-pv-annotation-fontsize-container"),d=this.getTemplate("button","_annotation_textcolor","e-pv-annotation-textcolor-container"),h=this.getTemplate("button","_annotation_textalign","e-pv-annotation-textalign-container"),p=this.getTemplate("button","_annotation_textproperties","e-pv-annotation-textprop-container"),c=this.getTemplate("button","_annotation_signature","e-pv-annotation-handwritten-container"),u=[];return u.push({prefixIcon:"e-pv-highlight-icon e-pv-icon",className:"e-pv-highlight-container",id:this.pdfViewer.element.id+"_highlight",align:"Left"}),u.push({prefixIcon:"e-pv-underline-icon e-pv-icon",className:"e-pv-underline-container",id:this.pdfViewer.element.id+"_underline",align:"Left"}),u.push({prefixIcon:"e-pv-strikethrough-icon e-pv-icon",className:"e-pv-strikethrough-container",id:this.pdfViewer.element.id+"_strikethrough",align:"Left"}),u.push({type:"Separator",align:"Left",cssClass:"e-pv-hightlight-separator-container"}),u.push({template:o,align:"Left",cssClass:"e-pv-shape-template-container"}),u.push({type:"Separator",align:"Left",cssClass:"e-pv-shape-separator-container"}),u.push({template:s,align:"Left",cssClass:"e-pv-calibrate-template-container"}),u.push({type:"Separator",align:"Left",cssClass:"e-pv-calibrate-separator-container"}),u.push({prefixIcon:"e-pv-freetext-icon e-pv-icon",className:"e-pv-annotation-freetextedit-container",id:this.pdfViewer.element.id+"_annotation_freeTextEdit",align:"Left"}),u.push({type:"Separator",align:"Left",cssClass:"e-pv-freetext-separator-container"}),u.push({template:a,align:"Left",cssClass:"e-pv-stamp-template-container"}),u.push({type:"Separator",align:"Left",cssClass:"e-pv-stamp-separator-container"}),u.push({template:c,align:"Left",cssClass:"e-pv-sign-template-container"}),u.push({type:"Separator",align:"Left",cssClass:"e-pv-sign-separator-container"}),u.push({prefixIcon:"e-pv-inkannotation-icon e-pv-icon",className:"e-pv-annotation-ink-container",id:this.pdfViewer.element.id+"_annotation_ink",align:"Left"}),u.push({type:"Separator",align:"Left",cssClass:"e-pv-ink-separator-container"}),u.push({template:r,align:"Left",cssClass:"e-pv-fontfamily-container"}),u.push({template:l,align:"Left",cssClass:"e-pv-fontsize-container"}),u.push({template:d,align:"Left",cssClass:"e-pv-text-color-container"}),u.push({template:h,align:"Left",cssClass:"e-pv-alignment-container"}),u.push({template:p,align:"Left",cssClass:"e-pv-text-properties-container"}),u.push({type:"Separator",align:"Left",cssClass:"e-pv-text-separator-container"}),u.push({template:e,align:"Left",cssClass:"e-pv-color-template-container"}),u.push({template:t,align:"Left",cssClass:"e-pv-stroke-template-container"}),u.push({template:i,align:"Left",cssClass:"e-pv-thickness-template-container"}),u.push({template:n,align:"Left",cssClass:"e-pv-opacity-template-container"}),u.push({type:"Separator",align:"Left",cssClass:"e-pv-opacity-separator-container"}),u.push({prefixIcon:"e-pv-annotation-delete-icon e-pv-icon",className:"e-pv-annotation-delete-container",id:this.pdfViewer.element.id+"_annotation_delete",align:"Left"}),u.push({prefixIcon:"e-pv-comment-panel-icon e-pv-icon",className:"e-pv-comment-panel-icon-container",id:this.pdfViewer.element.id+"_annotation_commentPanel",align:"Right"}),u.push({prefixIcon:"e-pv-annotation-tools-close-icon e-pv-icon",className:"e-pv-annotation-tools-close-container",id:this.pdfViewer.element.id+"_annotation_close",align:"Right"}),u},e.prototype.createSignContainer=function(){var e=this;this.handWrittenSignatureItem=this.pdfViewerBase.getElement("_annotation_signature"),this.primaryToolbar.createTooltip(this.pdfViewerBase.getElement("_annotation_signature"),this.pdfViewer.localeObj.getConstant("SignatureFieldDialogHeaderText"));var t=this,i=[];i=0===this.pdfViewer.handWrittenSignatureSettings.signatureItem.length||2==this.pdfViewer.handWrittenSignatureSettings.signatureItem.length?[{text:"ADD SIGNATURE"},{separator:!0},{text:"ADD INITIAL"}]:"Signature"===this.pdfViewer.handWrittenSignatureSettings.signatureItem[0]?[{text:"ADD SIGNATURE"}]:[{text:"ADD INITIAL"}];var n=new Yf({items:i,iconCss:"e-pv-handwritten-icon e-pv-icon",cssClass:"e-pv-handwritten-popup",open:function(e){t.openSignature()},beforeItemRender:function(t){if(e.pdfViewer.clearSelection(e.pdfViewerBase.currentPageNumber-1),t.element&&-1!==t.element.className.indexOf("e-separator")&&(t.element.style.margin="8px 0",t.element.setAttribute("role","menuitem"),t.element.setAttribute("aria-label","separator")),"ADD SIGNATURE"===t.item.text){t.element.innerHTML="",e.saveSignatureCount=0;for(var i=e.pdfViewerBase.signatureModule.signaturecollection.length;i>0;i--)if(e.saveSignatureCount<e.pdfViewerBase.signatureModule.getSaveLimit(e.pdfViewer.handWrittenSignatureSettings.saveSignatureLimit)){t.element.style.display="block";var n=(a=e.pdfViewerBase.signatureModule.signaturecollection[i-1]).image[0].imageData,o=a.image[0].id.split("_")[1];if(!a.isInitial&&""!==n){(r=we("div")).id="s"+o,r.style.display="block",r.style.paddingBottom="10px",(l=we("span")).id="sign_border_"+o,l.classList.add("e-pv-align-border");var s=void 0;"SignatureText"===a.image[0].signatureType?((s=we("div")).classList.add("e-pv-align-border-div"),s.innerText=n,s.style.fontFamily=a.image[0].fontFamily,s.style.fontSize="15px",s.style.display="inline-flex",s.style.alignItems="center",s.style.position="relative",s.id="sign_"+o,s.style.width="80px",s.style.height="53px",s.style.overflow="hidden",s.style.textOverflow="ellipsis",s.style.paddingLeft="11px"):((s=we("img")).id="sign_"+o,s.src=n,s.width=80,s.height=32,s.classList.add("e-pv-signatureimage"),s.style.paddingLeft="20px",s.style.paddingRight="18px",s.style.paddingTop="12px",s.style.paddingBottom="12px",s.style.boxSizing="content-box",s.setAttribute("alt","Saved Signature")),s.addEventListener("mouseover",e.hoverSignatureImage.bind(e)),s.addEventListener("mouseleave",e.leaveSignatureImage.bind(e)),(d=we("span")).id="delete_"+o,d.classList.add("e-pv-delete"),d.classList.add("e-pv-align"),l.append(s),l.append(d),r.append(l),t.element.appendChild(r),t.element.style.pointerEvents="auto",t.element.style.background="none",e.pdfViewerBase.getElement("_annotation_signature-popup").style.width="206px",e.saveSignatureCount++}}(h=we("button")).classList.add("e-control","e-btn","e-lib","e-outline","e-primary"),h.textContent=e.pdfViewer.localeObj.getConstant("HandwrittenSignatureDialogHeaderText"),"en-US"===e.pdfViewer.locale?h.style.width="130px":h.style.width="auto",h.style.height="36px",h.addEventListener("click",e.clickSignature.bind(e)),t.element.appendChild(h),t.element.addEventListener("mouseover",e.hoverInitialBtn.bind(e)),t.element.style.width="206px",t.element.style.display="flex",t.element.style.flexDirection="column",t.element.style.height="auto",t.element.style.alignItems="center",t.element.setAttribute("role","menuitem")}if("ADD INITIAL"===t.item.text){e.saveInitialCount=0,t.element.innerHTML="";for(i=e.pdfViewerBase.signatureModule.signaturecollection.length;i>0;i--)if(e.saveInitialCount<e.pdfViewerBase.signatureModule.getSaveLimit(e.pdfViewer.handWrittenSignatureSettings.saveInitialLimit)){var a;n=(a=e.pdfViewerBase.signatureModule.signaturecollection[i-1]).image[0].imageData,o=a.image[0].id.split("_")[1];if(a.isInitial&&""!==n){var r,l;(r=we("div")).id="s"+o,r.style.display="block",r.style.paddingBottom="10px",(l=we("span")).id="sign_border_"+o,l.classList.add("e-pv-align-border");var d;s=void 0;"SignatureText"===a.image[0].signatureType?((s=we("div")).classList.add("e-pv-align-border-div"),s.innerText=n,s.style.fontFamily=a.image[0].fontFamily,s.style.fontSize="15px",s.style.display="inline-flex",s.style.alignItems="center",s.style.position="relative",s.id="sign_"+o,s.style.width="80px",s.style.height="53px",s.style.overflow="hidden",s.style.textOverflow="ellipsis",s.style.paddingLeft="11px"):((s=we("img")).id="sign_"+o,s.src=n,s.width=80,s.height=32,s.classList.add("e-pv-signatureimage"),s.style.paddingLeft="20px",s.style.paddingRight="18px",s.style.paddingTop="12px",s.style.paddingBottom="12px",s.style.boxSizing="content-box",s.setAttribute("alt","Saved Initial")),s.addEventListener("mouseover",e.hoverSignatureImage.bind(e)),s.addEventListener("mouseleave",e.leaveSignatureImage.bind(e)),s.width=80,s.height=32,(d=we("span")).id="delete_"+o,d.classList.add("e-pv-delete"),d.classList.add("e-pv-align"),l.append(s),l.append(d),r.append(l),t.element.appendChild(r),t.element.style.pointerEvents="auto",t.element.style.background="none",e.pdfViewerBase.getElement("_annotation_signature-popup").style.width="206px",e.saveInitialCount++}}var h;e.isSignatureIteam=!1,(h=we("button")).classList.add("e-control","e-btn","e-lib","e-outline","e-primary"),h.textContent=e.pdfViewer.localeObj.getConstant("HandwrittenInitialDialogHeaderText"),"en-US"===e.pdfViewer.locale?h.style.width="130px":h.style.width="auto",h.style.height="36px",h.addEventListener("click",e.clickInitial.bind(e)),t.element.appendChild(h),t.element.addEventListener("mouseover",e.hoverInitialBtn.bind(e)),t.element.style.width="206px",t.element.style.display="flex",t.element.style.flexDirection="column",t.element.style.height="auto",t.element.style.alignItems="center",t.element.setAttribute("role","menuitem")}},select:function(t){e.pdfViewer.clearSelection(e.pdfViewerBase.currentPageNumber-1)}});this.pdfViewer.enableRtl&&(n.enableRtl=this.pdfViewer.enableRtl),n.appendTo(this.handWrittenSignatureItem)},e.prototype.updateSignatureCount=function(){this.openSignaturePopup=!1;for(var e=this.pdfViewerBase.signatureModule.signaturecollection,t=0;t<e.length;t++){""===e[t].image[0].imageData&&0}},e.prototype.openSignature=function(){this.saveInitialCount=0,this.saveSignatureCount=0;for(var e=this.pdfViewerBase.signatureModule.signaturecollection.length;e>0;e--){if(this.saveSignatureCount<this.pdfViewerBase.signatureModule.getSaveLimit(this.pdfViewer.handWrittenSignatureSettings.saveSignatureLimit))if(""!==(i=this.pdfViewerBase.signatureModule.signaturecollection[e-1]).image[0].imageData&&!i.isInitial){this.saveSignatureCount++;var t=document.getElementById("sign_border_"+i.image[0].id.split("_")[1]);(n=document.getElementById("delete_"+i.image[0].id.split("_")[1])).style.backgroundClip="content-box",t.addEventListener("click",this.renderAddedSignature.bind(this)),n.addEventListener("click",this.deleteSavedSign.bind(this)),n.addEventListener("mouseover",this.hoverSignatureDelete.bind(this)),n.addEventListener("mouseleave",this.leaveSignatureDelete.bind(this)),t.addEventListener("mouseover",this.hoverSignatureDelete.bind(this)),t.addEventListener("mouseleave",this.leaveSignatureDelete.bind(this))}}for(e=this.pdfViewerBase.signatureModule.signaturecollection.length;e>0;e--){var i;if(this.saveInitialCount<this.pdfViewerBase.signatureModule.getSaveLimit(this.pdfViewer.handWrittenSignatureSettings.saveInitialLimit))if(""!==(i=this.pdfViewerBase.signatureModule.signaturecollection[e-1]).image[0].imageData&&i.isInitial){this.saveInitialCount++;var n;t=document.getElementById("sign_border_"+i.image[0].id.split("_")[1]);(n=document.getElementById("delete_"+i.image[0].id.split("_")[1])).style.backgroundClip="content-box",t.addEventListener("click",this.renderAddedSignature.bind(this)),n.addEventListener("click",this.deleteSavedSign.bind(this)),n.addEventListener("mouseover",this.hoverSignatureDelete.bind(this)),n.addEventListener("mouseleave",this.leaveSignatureDelete.bind(this)),t.addEventListener("mouseover",this.hoverSignatureDelete.bind(this)),t.addEventListener("mouseleave",this.leaveSignatureDelete.bind(this))}}},e.prototype.hoverSignatureDelete=function(){var e=event.target;(e.id==="sign_"+e.id.split("_")[1]||e.classList.contains("e-pv-delete"))&&(e.classList.add("e-pv-signaturehover"),e.style.cursor="pointer")},e.prototype.hoverInitialBtn=function(e){var t=e.target,i="";if((i=-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.userAgent.indexOf("Trident")?t.id:m(e.path)?e.composedPath()[0].id:e.path[0].id)!=="sign_"+i.split("_")[1]&&i!=="delete_"+i.split("_")[1]){var n=document.getElementById(t.id);m(n)&&(n=document.getElementById(t.parentElement.id)),null==n||t.id==="sign_"+t.id.split("_")[1]&&t.id==="sign_border_"+t.id.split("_")[2]?null==n.parentElement||t.id==="sign_"+t.id.split("_")[1]&&t.id==="sign_border_"+t.id.split("_")[2]||(n.parentElement.style.background="transparent",n.parentElement.style.cursor="default"):(n.style.background="transparent",n.style.cursor="default")}},e.prototype.hoverSignatureImage=function(){var e=event.target;(e.id==="sign_"+e.id.split("_")[1]||e.classList.contains("e-pv-delete"))&&(e.classList.add("e-pv-signaturehover"),e.classList.remove("e-pv-signatureimage"),e.style.cursor="pointer")},e.prototype.leaveSignatureDelete=function(){var e=event.target;(e.id==="sign_"+e.id.split("_")[1]||e.classList.contains("e-pv-delete"))&&(e.classList.remove("e-pv-signaturehover"),e.children[0]&&"IMG"===e.children[0].tagName&&e.children[0].classList.remove("e-pv-signaturehover"),e.style.cursor="default")},e.prototype.clickSignature=function(){this.pdfViewerBase.isInitialField=!1,this.addSignature()},e.prototype.clickInitial=function(){this.pdfViewerBase.isInitialField=!0,this.addSignature()},e.prototype.leaveSignatureImage=function(){var e=event.target;(e.id==="sign_"+e.id.split("_")[1]||e.classList.contains("e-pv-delete"))&&(e.classList.remove("e-pv-signaturehover"),"IMG"===e.tagName&&e.classList.add("e-pv-signatureimage"),e.children[0]&&"IMG"===e.children[0].tagName&&(e.children[0].classList.remove("e-pv-signaturehover"),e.children[0].classList.add("e-pv-signatureimage")),e.style.cursor="default")},e.prototype.addSignature=function(){this.deselectAllItems(),this.showSignaturepanel()},e.prototype.renderAddedSignature=function(){this.pdfViewerBase.isAddedSignClicked=!0,this.isSavedSignatureClicked=!0,this.pdfViewerBase.signatureModule.RenderSavedSignature()},e.prototype.deleteSavedSign=function(e){e.stopPropagation();for(var t=this.pdfViewerBase.signatureModule.signaturecollection,i=t.length;i>0;i--)if(e.target.parentElement.children[0].id==="sign_"+t[i-1].image[0].id.split("_")[1]){t[i-1].image[0].imageData="",this.pdfViewerBase.signatureModule.signaturecollection.splice(i-1,1);break}e.target.parentElement.remove()},e.prototype.getTemplate=function(e,t,i){var n=we(e,{id:this.pdfViewer.element.id+t});return i&&(n.className=i),n.outerHTML},e.prototype.createStampContainer=function(){var e=this;this.stampElement=this.pdfViewerBase.getElement("_annotation_stamp"),this.primaryToolbar.createTooltip(this.pdfViewerBase.getElement("_annotation_stamp"),this.pdfViewer.localeObj.getConstant("Add Stamp"));var t=we("ul",{id:this.pdfViewer.element.id+"contextMenuElement"});this.pdfViewerBase.getElement("_annotation_stamp").appendChild(t);var i=[];if(this.pdfViewer.stampSettings.dynamicStamps&&this.pdfViewer.stampSettings.dynamicStamps.length>0){var n=[];i.push({text:this.pdfViewer.localeObj.getConstant("Dynamic"),label:"Dynamic",items:n}),this.pdfViewer.stampSettings.dynamicStamps.forEach((function(t,i){var o=ea[t];if("NotApproved"===o)o="Not Approved";n.push({text:e.pdfViewer.localeObj.getConstant(o),label:o})}))}if(this.pdfViewer.stampSettings.signStamps&&this.pdfViewer.stampSettings.signStamps.length>0){var o=[];i.push({text:this.pdfViewer.localeObj.getConstant("Sign Here"),label:"Sign Here",items:o}),this.pdfViewer.stampSettings.signStamps.forEach((function(t,i){var n=ta[t];switch(n){case"InitialHere":n="Initial Here";break;case"SignHere":n="Sign Here"}o.push({text:e.pdfViewer.localeObj.getConstant(n),label:n})}))}if(this.pdfViewer.stampSettings.standardBusinessStamps&&this.pdfViewer.stampSettings.standardBusinessStamps.length>0){var s=[];i.push({text:this.pdfViewer.localeObj.getConstant("Standard Business"),label:"Standard Business",items:s}),this.pdfViewer.stampSettings.standardBusinessStamps.forEach((function(t,i){var n=ia[t];switch(n){case"NotApproved":n="Not Approved";break;case"ForPublicRelease":n="For Public Release";break;case"NotForPublicRelease":n="Not For Public Release";break;case"ForComment":n="For Comment";break;case"PreliminaryResults":n="Preliminary Results";break;case"InformationOnly":n="Information Only"}s.push({text:e.pdfViewer.localeObj.getConstant(n),label:n})}))}this.pdfViewer.customStampSettings.enableCustomStamp&&!ge.isDevice&&(i.length>0&&i.push({separator:!0}),i.push({text:this.pdfViewer.localeObj.getConstant("Custom Stamp"),label:"Custom Stamp",items:[]})),this.stampMenu=[{iconCss:"e-pv-stamp-icon e-pv-icon",items:i}];var a={items:this.stampMenu,cssClass:"e-custom-scroll",showItemOnClick:!0,enableScrolling:!0,beforeOpen:function(t){if(e.resetFreeTextAnnot(),""===t.parentItem.text&&e.pdfViewer.customStampSettings.isAddToMenu&&t.items.length>0){for(var i=null,n=0;n<t.items.length;n++)if(t.items[n].text===e.pdfViewer.localeObj.getConstant("Custom Stamp")){t.items[n].items=[],i=t.items[n];break}var o=e.pdfViewerBase.customStampCollection,s=e.pdfViewer.customStampSettings.customStamps;if(0===o.length&&s&&s.length>0)for(var a=0;a<s.length;a++)o.push({customStampName:s[a].customStampName,customStampImageSource:s[a].customStampImageSource});for(var r=0;r<o.length;r++)if(null!=i){i.items.push({text:o[r].customStampName});for(n=0;n<t.items.length;n++)if(t.items[n].text===e.pdfViewer.localeObj.getConstant("Custom Stamp")){var l=t.element.children[n];if(l&&!l.childElementCount){var d=document.createElement("span");d.className="e-icons e-caret e-menu-caret-icon",l.appendChild(d),l.setAttribute("aria-haspopup","true"),l.setAttribute("aria-expanded","false")}}}}t.parentItem.text===e.pdfViewer.localeObj.getConstant("Custom Stamp")&&((s=e.pdfViewer.customStampSettings.customStamps)&&s.length>10&&(Fe(t.element,".e-menu-wrapper").style.height="350px"));e.stampParentID=t.parentItem.text,e.menuItems.showItemOnClick=!1},beforeClose:function(t){(t.parentItem&&t.parentItem.text!==e.pdfViewer.localeObj.getConstant("Custom Stamp")&&"Standard Business"!==t.parentItem.text&&"Dynamic"!==t.parentItem.text&&"Sign Here"!==t.parentItem.text||!t.parentItem)&&(e.menuItems.showItemOnClick=!0)},select:function(t){if(e.pdfViewerBase.isAlreadyAdded=!1,t.item.text===e.pdfViewer.localeObj.getConstant("Custom Stamp")){e.updateInteractionTools(),e.checkStampAnnotations(),e.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0;var i=document.getElementById(e.pdfViewer.element.id+"_stampElement");i&&i.click(),e.pdfViewer.annotation.triggerAnnotationUnselectEvent()}else if(e.stampParentID===e.pdfViewer.localeObj.getConstant("Custom Stamp")&&""!==t.item.text)for(var n=e.pdfViewerBase.customStampCollection,o=0;o<n.length;o++)n[o].customStampName===t.item.text&&(e.pdfViewer.annotationModule.stampAnnotationModule.customStampName=t.item.text,e.checkStampAnnotations(),e.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0,e.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=!0,e.pdfViewerBase.stampAdded=!0,e.pdfViewerBase.isAlreadyAdded=!0,e.pdfViewer.annotationModule.stampAnnotationModule.createCustomStampAnnotation(n[o].customStampImageSource),e.pdfViewerBase.stampAdded=!1);else t.item.text===e.pdfViewer.localeObj.getConstant("Dynamic")||""===t.item.text||"Standard Business"===t.item.text||"Sign Here"!==e.stampParentID&&"Sign Here"===t.item.text||(e.updateInteractionTools(),e.checkStampAnnotations(),e.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0,e.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=!0,e.pdfViewerBase.stampAdded=!0,e.pdfViewer.annotation.triggerAnnotationUnselectEvent(),e.stampParentID===e.pdfViewer.localeObj.getConstant("Dynamic")?(e.pdfViewerBase.isDynamicStamp=!0,e.pdfViewer.annotationModule.stampAnnotationModule.retrieveDynamicStampAnnotation(t.item.label)):(e.pdfViewerBase.isDynamicStamp=!1,e.pdfViewer.annotationModule.stampAnnotationModule.retrievestampAnnotation(t.item.label)),ge.isDevice&&e.stampToolMobileForMobile(e.pdfViewer.element.id+"_annotation_stamp"))}};return this.menuItems=new Df(a,"#"+this.pdfViewer.element.id+"contextMenuElement"),t.parentElement.classList.add("e-pv-stamp"),this.pdfViewer.enableRtl&&(this.menuItems.enableRtl=!0),t},e.prototype.createCustomStampElement=function(){var e=we("input",{id:this.pdfViewer.element.id+"_stampElement",attrs:{type:"file"}});e.setAttribute("accept",".jpg,.jpeg,.png"),e.style.position="absolute",e.style.left="0px",e.style.top="0px",e.style.visibility="hidden",document.body.appendChild(e),e.addEventListener("change",this.addStampImage)},e.prototype.checkStampAnnotations=function(){if(this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode&&this.pdfViewer.selectedItems&&this.pdfViewer.selectedItems.annotations)for(var e=0;e<this.pdfViewer.selectedItems.annotations.length;e++){var t=this.pdfViewer.selectedItems.annotations[e];!t||t.annotName||t.author||"Shape"===t.shapeAnnotationType&&"Image"===t.shapeAnnotationType||(this.pdfViewer.remove(t),this.pdfViewer.annotation.renderAnnotations(t.pageIndex,null,null,null),this.pdfViewer.clearSelection(t.pageIndex))}},e.prototype.createDropDowns=function(e){var t=this;if(!ge.isDevice||this.pdfViewer.enableDesktopMode){this.shapeElement=this.pdfViewerBase.getElement("_annotation_shapes");var i=this.createShapeOptions(this.shapeElement.id,!0);this.shapeDropDown=this.createDropDownButton(this.shapeElement,"e-pv-annotation-shape-icon",i.element,this.pdfViewer.localeObj.getConstant("Add Shapes")),this.calibrateElement=this.pdfViewerBase.getElement("_annotation_calibrate");var n=this.createShapeOptions(this.calibrateElement.id,!1);this.calibrateDropDown=this.createDropDownButton(this.calibrateElement,"e-pv-annotation-calibrate-icon",n.element,this.pdfViewer.localeObj.getConstant("Calibrate"))}if(e||(this.colorDropDownElement=this.pdfViewerBase.getElement("_annotation_color"),this.colorPalette=this.createColorPicker(this.colorDropDownElement.id),this.colorPalette.change=this.onColorPickerChange.bind(this),this.colorDropDown=this.createDropDownButton(this.colorDropDownElement,"e-pv-annotation-color-icon",this.colorPalette.element.parentElement,this.pdfViewer.localeObj.getConstant("Color edit")),this.colorDropDown.beforeOpen=this.colorDropDownBeforeOpen.bind(this),this.colorDropDown.open=this.colorDropDownOpen.bind(this),this.pdfViewerBase.getElement("_annotation_color-popup").addEventListener("click",this.onColorPickerCancelClick.bind(this))),!ge.isDevice||this.pdfViewer.enableDesktopMode){this.strokeDropDownElement=this.pdfViewerBase.getElement("_annotation_stroke"),this.strokeColorPicker=this.createColorPicker(this.strokeDropDownElement.id),this.strokeColorPicker.change=this.onStrokePickerChange.bind(this),this.strokeDropDown=this.createDropDownButton(this.strokeDropDownElement,"e-pv-annotation-stroke-icon",this.strokeColorPicker.element.parentElement,this.pdfViewer.localeObj.getConstant("Stroke edit")),this.strokeDropDown.beforeOpen=this.strokeDropDownBeforeOpen.bind(this),this.strokeDropDown.open=this.strokeDropDownOpen.bind(this),this.pdfViewerBase.getElement("_annotation_stroke-popup").addEventListener("click",this.onStrokePickerCancelClick.bind(this)),this.thicknessElement=this.pdfViewerBase.getElement("_annotation_thickness");var o=this.createThicknessSlider(this.thicknessElement.id);this.thicknessDropDown=this.createDropDownButton(this.thicknessElement,"e-pv-annotation-thickness-icon",o,this.pdfViewer.localeObj.getConstant("Change thickness")),this.thicknessDropDown.beforeOpen=this.thicknessDropDownBeforeOpen.bind(this),this.thicknessSlider.change=this.thicknessChange.bind(this),this.thicknessSlider.changed=this.thicknessChange.bind(this),this.thicknessDropDown.open=this.thicknessDropDownOpen.bind(this)}if(!e){this.opacityDropDownElement=this.pdfViewerBase.getElement("_annotation_opacity");var s=this.createSlider(this.opacityDropDownElement.id);this.opacityDropDown=this.createDropDownButton(this.opacityDropDownElement,"e-pv-annotation-opacity-icon",s,this.pdfViewer.localeObj.getConstant("Opacity edit")),this.opacityDropDown.beforeOpen=this.opacityDropDownBeforeOpen.bind(this),this.opacitySlider.change=this.opacityChange.bind(this),this.opacitySlider.changed=this.opacityChange.bind(this),this.opacityDropDown.open=this.opacityDropDownOpen.bind(this)}ge.isDevice&&!this.pdfViewer.enableDesktopMode||(this.fontFamilyElement=this.pdfViewerBase.getElement("_annotation_fontname"),this.createDropDownListForFamily(this.fontFamilyElement),this.fontFamilyElement.addEventListener("change",(function(){t.onFontFamilyChange.bind(t)})),this.fontSizeElement=this.pdfViewerBase.getElement("_annotation_fontsize"),this.createDropDownListForSize(this.fontSizeElement),this.fontColorElement=this.pdfViewerBase.getElement("_annotation_textcolor"),this.fontColorPalette=this.createColorPicker(this.fontColorElement.id),this.fontColorPalette.change=this.onFontColorChange.bind(this),this.fontColorDropDown=this.createDropDownButton(this.fontColorElement,"e-pv-annotation-textcolor-icon",this.fontColorPalette.element.parentElement,this.pdfViewer.localeObj.getConstant("Font color")),this.textAlignElement=this.pdfViewerBase.getElement("_annotation_textalign"),this.alignmentToolbar=this.createShapeOptions(this.textAlignElement.id,void 0,!0),this.textAlignDropDown=this.createDropDownButton(this.textAlignElement,"e-pv-annotation-textalign-icon",this.alignmentToolbar.element,this.pdfViewer.localeObj.getConstant("Text Align")),this.textAlignDropDown.beforeOpen=this.textAlignDropDownBeforeOpen.bind(this),this.textPropElement=this.pdfViewerBase.getElement("_annotation_textproperties"),this.propertiesToolbar=this.createShapeOptions(this.textPropElement.id,void 0,!1,!0),this.textPropertiesDropDown=this.createPropDropDownButton(this.textPropElement,"e-pv-annotation-textprop-icon",this.propertiesToolbar.element,this.pdfViewer.localeObj.getConstant("Text Properties")),this.textPropertiesDropDown.beforeOpen=this.textPropertiesDropDownBeforeOpen.bind(this))},e.prototype.mobileColorpicker=function(e){var t=this;this.opacityDropDownElement=this.pdfViewerBase.getElement("_annotation_opacity");var i=this.createSlider(this.opacityDropDownElement.id);if(this.opacityDropDown=this.createDropDownButton(this.opacityDropDownElement,"e-pv-annotation-opacity-icon",i,this.pdfViewer.localeObj.getConstant("Opacity edit")),this.opacityDropDown.beforeOpen=this.opacityDropDownBeforeOpen.bind(this),this.opacitySlider.change=this.opacityChange.bind(this),this.opacitySlider.changed=this.opacityChange.bind(this),this.opacityDropDown.open=this.opacityDropDownOpen.bind(this),e===this.pdfViewer.element.id+"_annotation_shapes"?e=this.pdfViewer.element.id+"_annotation_shapesIcon":e===this.pdfViewer.element.id+"_annotation_calibrate"?e=this.pdfViewer.element.id+"_annotation_calibrateIcon":e===this.pdfViewer.element.id+"_highlight"?e=this.pdfViewer.element.id+"_highlightIcon":e===this.pdfViewer.element.id+"_underline"?e=this.pdfViewer.element.id+"_underlineIcon":e===this.pdfViewer.element.id+"_strikethrough"&&(e=this.pdfViewer.element.id+"_strikethroughIcon"),(e===this.pdfViewer.element.id+"_annotation_shapesIcon"||e===this.pdfViewer.element.id+"_annotation_calibrateIcon"||e===this.pdfViewer.element.id+"_annotation_freeTextEdit"||e===this.pdfViewer.element.id+"_highlightIcon"||e===this.pdfViewer.element.id+"_underlineIcon"||e===this.pdfViewer.element.id+"_strikethroughIcon"||e===this.pdfViewer.element.id+"_annotation_inkIcon"||e===this.pdfViewer.element.id+"_annotation_handwrittenSign")&&(e!==this.pdfViewer.element.id+"_annotation_handwrittenSign"&&e!==this.pdfViewer.element.id+"_annotation_inkIcon"&&(this.colorDropDownElement=this.pdfViewerBase.getElement("_annotation_color"),this.colorPalette=this.createColorPicker(this.colorDropDownElement.id),this.colorPalette.change=this.onColorPickerChange.bind(this),this.colorDropDown=this.createDropDownButton(this.colorDropDownElement,"e-pv-annotation-color-icon",this.colorPalette.element.parentElement,this.pdfViewer.localeObj.getConstant("Color edit")),this.colorDropDown.beforeOpen=this.colorDropDownBeforeOpen.bind(this),this.colorDropDown.open=this.colorDropDownOpen.bind(this),this.pdfViewerBase.getElement("_annotation_color-popup").addEventListener("click",this.onColorPickerCancelClick.bind(this))),e===this.pdfViewer.element.id+"_annotation_freeTextEdit"&&(this.fontFamilyElement=this.pdfViewerBase.getElement("_annotation_fontname"),this.createDropDownListForFamily(this.fontFamilyElement),this.fontFamilyElement.style.textAlign="left",this.fontFamilyElement.addEventListener("change",(function(){t.onFontFamilyChange.bind(t)})),this.fontSizeElement=this.pdfViewerBase.getElement("_annotation_fontsize"),this.createDropDownListForSize(this.fontSizeElement),this.fontColorElement=this.pdfViewerBase.getElement("_annotation_textcolor"),this.fontColorPalette=this.createColorPicker(this.fontColorElement.id),this.fontColorPalette.change=this.onFontColorChange.bind(this),this.fontColorDropDown=this.createDropDownButton(this.fontColorElement,"e-pv-annotation-textcolor-icon",this.fontColorPalette.element.parentElement,this.pdfViewer.localeObj.getConstant("Font color")),this.textAlignElement=this.pdfViewerBase.getElement("_annotation_textalign"),this.alignmentToolbar=this.createShapeOptions(this.textAlignElement.id,void 0,!0),this.textAlignDropDown=this.createDropDownButton(this.textAlignElement,"e-pv-annotation-textalign-icon",this.alignmentToolbar.element,this.pdfViewer.localeObj.getConstant("Text Align")),this.textAlignDropDown.beforeOpen=this.textAlignDropDownBeforeOpen.bind(this),this.textPropElement=this.pdfViewerBase.getElement("_annotation_textproperties"),this.propertiesToolbar=this.createShapeOptions(this.textPropElement.id,void 0,!1,!0),this.textPropertiesDropDown=this.createPropDropDownButton(this.textPropElement,"e-pv-annotation-textprop-icon",this.propertiesToolbar.element,this.pdfViewer.localeObj.getConstant("Text Properties")),this.textPropertiesDropDown.beforeOpen=this.textPropertiesDropDownBeforeOpen.bind(this)),e===this.pdfViewer.element.id+"_annotation_shapesIcon"||e===this.pdfViewer.element.id+"_annotation_calibrateIcon"||e===this.pdfViewer.element.id+"_annotation_freeTextEdit"||e===this.pdfViewer.element.id+"_annotation_inkIcon"||e===this.pdfViewer.element.id+"_annotation_handwrittenSign")){this.thicknessElement=this.pdfViewerBase.getElement("_annotation_thickness");var n=this.createThicknessSlider(this.thicknessElement.id);this.thicknessDropDown=this.createDropDownButton(this.thicknessElement,"e-pv-annotation-thickness-icon",n,this.pdfViewer.localeObj.getConstant("Change thickness")),this.thicknessDropDown.beforeOpen=this.thicknessDropDownBeforeOpen.bind(this),this.thicknessSlider.change=this.thicknessChange.bind(this),this.thicknessSlider.changed=this.thicknessChange.bind(this),this.thicknessDropDown.open=this.thicknessDropDownOpen.bind(this),this.strokeDropDownElement=this.pdfViewerBase.getElement("_annotation_stroke"),this.strokeColorPicker=this.createColorPicker(this.strokeDropDownElement.id),this.strokeColorPicker.change=this.onStrokePickerChange.bind(this),this.strokeDropDown=this.createDropDownButton(this.strokeDropDownElement,"e-pv-annotation-stroke-icon",this.strokeColorPicker.element.parentElement,this.pdfViewer.localeObj.getConstant("Stroke edit")),this.strokeDropDown.beforeOpen=this.strokeDropDownBeforeOpen.bind(this),this.strokeDropDown.open=this.strokeDropDownOpen.bind(this),this.pdfViewerBase.getElement("_annotation_stroke-popup").addEventListener("click",this.onStrokePickerCancelClick.bind(this))}},e.prototype.opacityDropDownOpen=function(e){ge.isDevice&&!this.pdfViewer.enableDesktopMode?(e.element.parentElement.style.left="0px",e.element.parentElement.style.top=this.pdfViewerBase.viewerContainer.clientHeight+"px"):this.calculateToolbarPosition(e)},e.prototype.onColorPickerCancelClick=function(e){e.target.classList.contains("e-cancel")&&this.colorDropDown.toggle()},e.prototype.onStrokePickerCancelClick=function(e){e.target.classList.contains("e-cancel")&&this.strokeDropDown.toggle()},e.prototype.colorDropDownBeforeOpen=function(e){this.colorPalette.noColor=!1,this.pdfViewer.annotationModule.textMarkupAnnotationModule&&(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?this.colorPalette.value=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.color:this.setCurrentColorInPicker()),1===this.pdfViewer.selectedItems.annotations.length?(this.colorPalette.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill,this.colorPalette.noColor=!0):this.setCurrentColorInPicker(),this.colorPalette.refresh(),this.updateColorInIcon(this.colorDropDownElement,this.colorPalette.value)},e.prototype.setCurrentColorInPicker=function(){if(!S()){if(this.pdfViewer.annotationModule.textMarkupAnnotationModule)switch(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode){case"Highlight":this.setColorInPicker(this.colorPalette,this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor);break;case"Underline":this.setColorInPicker(this.colorPalette,this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor);break;case"Strikethrough":this.setColorInPicker(this.colorPalette,this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor)}if(this.pdfViewer.annotation.shapeAnnotationModule)switch(this.pdfViewer.annotationModule.shapeAnnotationModule.currentAnnotationMode){case"Line":this.setColorInPicker(this.colorPalette,this.pdfViewer.annotationModule.shapeAnnotationModule.lineFillColor);break;case"Arrow":this.setColorInPicker(this.colorPalette,this.pdfViewer.annotationModule.shapeAnnotationModule.arrowFillColor);break;case"Rectangle":this.setColorInPicker(this.colorPalette,this.pdfViewer.annotationModule.shapeAnnotationModule.rectangleFillColor);break;case"Circle":this.setColorInPicker(this.colorPalette,this.pdfViewer.annotationModule.shapeAnnotationModule.circleFillColor);break;case"Polygon":this.setColorInPicker(this.colorPalette,this.pdfViewer.annotationModule.shapeAnnotationModule.polygonFillColor)}this.colorDropDownElement&&this.updateColorInIcon(this.colorDropDownElement,this.colorPalette.value)}},e.prototype.colorDropDownOpen=function(e){ge.isDevice&&!this.pdfViewer.enableDesktopMode&&(e.element.parentElement.style.top=this.pdfViewerBase.viewerContainer.clientHeight/2+"px"),this.popupPosition(e,this.colorDropDownElement),this.colorPalette.refresh()},e.prototype.strokeDropDownBeforeOpen=function(e){1===this.pdfViewer.selectedItems.annotations.length?this.strokeColorPicker.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor:this.setCurrentStrokeColorInPicker(),this.strokeColorPicker.refresh(),this.updateColorInIcon(this.strokeDropDownElement,this.strokeColorPicker.value),this.updateInkannotationItems()},e.prototype.setCurrentStrokeColorInPicker=function(){if(!S()&&this.pdfViewer.annotation.shapeAnnotationModule)switch(this.pdfViewer.annotationModule.shapeAnnotationModule.currentAnnotationMode){case"Line":this.setColorInPicker(this.strokeColorPicker,this.pdfViewer.annotationModule.shapeAnnotationModule.lineStrokeColor);break;case"Arrow":this.setColorInPicker(this.strokeColorPicker,this.pdfViewer.annotationModule.shapeAnnotationModule.arrowStrokeColor);break;case"Rectangle":this.setColorInPicker(this.strokeColorPicker,this.pdfViewer.annotationModule.shapeAnnotationModule.rectangleStrokeColor);break;case"Circle":this.setColorInPicker(this.strokeColorPicker,this.pdfViewer.annotationModule.shapeAnnotationModule.circleStrokeColor);break;case"Polygon":this.setColorInPicker(this.strokeColorPicker,this.pdfViewer.annotationModule.shapeAnnotationModule.polygonStrokeColor)}},e.prototype.strokeDropDownOpen=function(e){ge.isDevice&&!this.pdfViewer.enableDesktopMode&&(e.element.parentElement.style.top=this.pdfViewerBase.viewerContainer.clientHeight/2+"px"),this.popupPosition(e,this.strokeDropDownElement),this.strokeColorPicker.refresh()},e.prototype.onFontColorChange=function(e){var t;t=S()?e[0]:""===e.currentValue.hex?"#ffffff00":e.currentValue.hex,1===this.pdfViewer.selectedItems.annotations.length?this.pdfViewer.annotation.modifyFontColor(t):(this.pdfViewer.freeTextSettings.fontColor=t,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()),S()?(this.fontColorElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-textcolor-container"),this.updateColorInIcon(this.fontColorElementInBlazor,t)):(this.updateColorInIcon(this.fontColorElement,t),this.fontColorDropDown.toggle())},e.prototype.onFontFamilyChange=function(e){var t;t=S()?e:e&&e.fontFamily&&e.fontFamily.value?e.fontFamily.value:"",1===this.pdfViewer.selectedItems.annotations.length&&t?this.pdfViewer.annotation.modifyFontFamily(t):(this.pdfViewer.freeTextSettings.fontFamily=t,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties())},e.prototype.onFontSizeChange=function(e,t){var i;i=S()?e:e&&e.fontSize&&e.fontSize.value?e.fontSize.value:"";var n=parseFloat(i);1===this.pdfViewer.selectedItems.annotations.length&&i?this.pdfViewer.annotation.modifyFontSize(n,t):(this.pdfViewer.freeTextSettings.fontSize=n,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties())},e.prototype.textAlignDropDownBeforeOpen=function(e){if(1===this.pdfViewer.selectedItems.annotations.length&&e.element.getElementsByTagName("button")&&e.element.getElementsByTagName("button").length>0)for(var t=e.element.getElementsByTagName("button"),i=this.pdfViewer.selectedItems.annotations[0],n=0;n<t.length;n++)t[n]&&(t[n].classList.remove("textprop-option-active"),t[n].id===this.pdfViewer.element.id+"_left_align"&&"Left"===i.textAlign&&t[n].classList.add("textprop-option-active"),t[n].id===this.pdfViewer.element.id+"_right_align"&&"Right"===i.textAlign&&t[n].classList.add("textprop-option-active"),t[n].id===this.pdfViewer.element.id+"_center_align"&&"Center"===i.textAlign&&t[n].classList.add("textprop-option-active"),t[n].id===this.pdfViewer.element.id+"_justify_align"&&"Justify"===i.textAlign&&t[n].classList.add("textprop-option-active"))},e.prototype.textPropertiesDropDownBeforeOpen=function(e){if(1===this.pdfViewer.selectedItems.annotations.length&&e.element.getElementsByTagName("button")&&e.element.getElementsByTagName("button").length>0)for(var t=e.element.getElementsByTagName("button"),i=this.pdfViewer.selectedItems.annotations[0],n=0;n<t.length;n++)t[n]&&(t[n].classList.remove("textprop-option-active"),t[n].id===this.pdfViewer.element.id+"_bold"&&i.font.isBold&&t[n].classList.add("textprop-option-active"),t[n].id===this.pdfViewer.element.id+"_italic"&&i.font.isItalic&&t[n].classList.add("textprop-option-active"),t[n].id===this.pdfViewer.element.id+"_strikeout"&&i.font.isStrikeout&&t[n].classList.add("textprop-option-active"),t[n].id===this.pdfViewer.element.id+"_underline_textinput"&&i.font.isUnderline&&t[n].classList.add("textprop-option-active"))},e.prototype.onClickTextAlignment=function(e){var t;t=S()?e[0]:e&&e.item&&e.item.value?e.item.value:"",1===this.pdfViewer.selectedItems.annotations.length&&t?this.pdfViewer.annotation.modifyTextAlignment(t):(this.pdfViewer.freeTextSettings.textAlignment=e.item.value,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()),this.updateTextAlignInIcon(t)},e.prototype.onClickTextProperties=function(e){var t;if(t=S()?e[0]:e&&e.item&&e.item.value?e.item.value:"",1===this.pdfViewer.selectedItems.annotations.length&&t){var i={isBold:void 0,isItalic:void 0,isStrikeout:void 0,isUnderline:void 0};"bold"===t?i.isBold=!this.pdfViewer.selectedItems.annotations[0].font.isBold:"italic"===t?i.isItalic=!this.pdfViewer.selectedItems.annotations[0].font.isItalic:"underline"===t?i.isUnderline=!this.pdfViewer.selectedItems.annotations[0].font.isUnderline:"strikeout"===t&&(i.isStrikeout=!this.pdfViewer.selectedItems.annotations[0].font.isStrikeout),this.pdfViewer.annotation.modifyTextProperties(i,t)}else"bold"===t?this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold?this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold=!1:(this.pdfViewer.freeTextSettings.fontStyle=1,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()):"italic"===t?this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic?this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic=!1:(this.pdfViewer.freeTextSettings.fontStyle=2,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()):"underline"===t?this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline?this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline=!1:(this.pdfViewer.freeTextSettings.fontStyle=4,this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough=!1,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()):"strikeout"===t&&(this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough?this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough=!1:(this.pdfViewer.freeTextSettings.fontStyle=8,this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline=!1,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()));this.updateTextPropertySelection(t)},e.prototype.opacityChange=function(e){var t=1;if(t=e&&1===e.length?e[0]:e.value,this.pdfViewer.annotationModule.textMarkupAnnotationModule)if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)S()?this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(null,t):this.isCurrentAnnotationOpacitySet&&"changed"===e.name?this.isCurrentAnnotationOpacitySet=!1:this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(e);else switch(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode){case"Highlight":this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightOpacity=t/100;break;case"Underline":this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineOpacity=t/100;break;case"Strikethrough":this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughOpacity=t/100}if(1===this.pdfViewer.selectedItems.annotations.length){var i=this.pdfViewer.selectedItems.annotations[0];if(null==i||"Stamp"!==i.shapeAnnotationType&&"Image"!==i.shapeAnnotationType)S()?this.pdfViewer.annotation.modifyOpacity(t,!0):"changed"===e.name&&e.value!==e.previousValue&&this.pdfViewer.annotation.modifyOpacity(e);else{var n=qs(i),o=qs(i);o.opacity=t/100,this.pdfViewer.nodePropertyChange(i,{opacity:t/100}),this.pdfViewer.annotation.triggerAnnotationPropChange(i,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(this.pdfViewer.selectedItems.annotations[0].pageIndex,null,this.pdfViewer.selectedItems.annotations[0],"stampOpacity","",n,o),this.pdfViewer.annotation.stampAnnotationModule.updateSessionStorage(this.pdfViewer.selectedItems.annotations[0],null,"opacity")}}else{if(this.pdfViewer.annotation.shapeAnnotationModule)switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case"Line":this.pdfViewer.annotation.shapeAnnotationModule.lineOpacity=t/100;break;case"Arrow":this.pdfViewer.annotation.shapeAnnotationModule.arrowOpacity=t/100;break;case"Rectangle":this.pdfViewer.annotation.shapeAnnotationModule.rectangleOpacity=t/100;break;case"Circle":this.pdfViewer.annotation.shapeAnnotationModule.circleOpacity=t/100;break;case"Polygon":this.pdfViewer.annotation.shapeAnnotationModule.polygonOpacity=t/100}var s=this.pdfViewer.annotation;s&&s.inkAnnotationModule&&(this.pdfViewer.inkAnnotationSettings.opacity=t/100),this.pdfViewer.drawingObject&&(this.pdfViewer.drawingObject.opacity=t/100,"FreeText"===this.pdfViewer.drawingObject.shapeAnnotationType&&(this.pdfViewer.freeTextSettings.opacity=t/100,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()))}S()||this.updateOpacityIndicator()},e.prototype.opacityDropDownBeforeOpen=function(e){if(this.pdfViewer.annotationModule.textMarkupAnnotationModule)if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)this.isCurrentAnnotationOpacitySet=!0,this.opacitySlider.value=100*this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.opacity;else switch(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode){case"Highlight":this.opacitySlider.value=100*this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightOpacity;break;case"Underline":this.opacitySlider.value=100*this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineOpacity;break;case"Strikethrough":this.opacitySlider.value=100*this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughOpacity}if(1===this.pdfViewer.selectedItems.annotations.length)this.opacitySlider.value=100*this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity;else if(this.pdfViewer.annotation.shapeAnnotationModule)switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case"Line":this.opacitySlider.value=100*this.pdfViewer.annotation.shapeAnnotationModule.lineOpacity;break;case"Arrow":this.opacitySlider.value=100*this.pdfViewer.annotation.shapeAnnotationModule.arrowOpacity;break;case"Rectangle":this.opacitySlider.value=100*this.pdfViewer.annotation.shapeAnnotationModule.rectangleOpacity;break;case"Circle":this.opacitySlider.value=100*this.pdfViewer.annotation.shapeAnnotationModule.circleOpacity;break;case"Polygon":this.opacitySlider.value=100*this.pdfViewer.annotation.shapeAnnotationModule.polygonOpacity}this.updateOpacityIndicator(),this.updateInkannotationItems()},e.prototype.thicknessDropDownBeforeOpen=function(){if(1===this.pdfViewer.selectedItems.annotations.length)this.thicknessSlider.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth;else if(this.pdfViewer.annotation.shapeAnnotationModule)switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case"Line":this.thicknessSlider.value=this.pdfViewer.annotation.shapeAnnotationModule.lineThickness;break;case"Arrow":this.thicknessSlider.value=this.pdfViewer.annotation.shapeAnnotationModule.arrowThickness;break;case"Rectangle":this.thicknessSlider.value=this.pdfViewer.annotation.shapeAnnotationModule.rectangleThickness;break;case"Circle":this.thicknessSlider.value=this.pdfViewer.annotation.shapeAnnotationModule.circleThickness;break;case"Polygon":this.thicknessSlider.value=this.pdfViewer.annotation.shapeAnnotationModule.polygonThickness}this.updateThicknessIndicator(),this.updateInkannotationItems()},e.prototype.thicknessDropDownOpen=function(e){ge.isDevice&&!this.pdfViewer.enableDesktopMode?(e.element.parentElement.style.left="0px",e.element.parentElement.style.top=this.pdfViewerBase.viewerContainer.clientHeight+"px"):this.calculateToolbarPosition(e)},e.prototype.calculateToolbarPosition=function(e){if(e.element&&e.element.parentElement){var t=parseFloat(e.element.parentElement.style.left),i=e.element.parentElement.offsetWidth;t+i<this.pdfViewer.element.offsetWidth+10&&(e.element.parentElement.style.left=t-i+"px")}},e.prototype.thicknessChangeInBlazor=function(e){1===this.pdfViewer.selectedItems.annotations.length?this.pdfViewer.annotation.modifyThickness(e[0]):this.ShapeThickness(e[0])},e.prototype.thicknessChange=function(e){if(1===this.pdfViewer.selectedItems.annotations.length){if("changed"===e.name){this.pdfViewer.annotation.modifyThickness(e.value),S()||this.updateThicknessIndicator();var t=this.pdfViewer.annotation,i=this.pdfViewer.selectedItems.annotations[0];t&&t.inkAnnotationModule&&i&&"Ink"===i.shapeAnnotationType&&(this.pdfViewer.inkAnnotationSettings.thickness=e.value)}}else this.ShapeThickness(e.value)},e.prototype.ShapeThickness=function(e){if(this.pdfViewer.annotation.shapeAnnotationModule){switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case"Line":this.pdfViewer.annotation.shapeAnnotationModule.lineThickness=e;break;case"Arrow":this.pdfViewer.annotation.shapeAnnotationModule.arrowThickness=e;break;case"Rectangle":this.pdfViewer.annotation.shapeAnnotationModule.rectangleThickness=e;break;case"Circle":this.pdfViewer.annotation.shapeAnnotationModule.circleThickness=e;break;case"Polygon":this.pdfViewer.annotation.shapeAnnotationModule.polygonThickness=e}var t=this.pdfViewer.annotation;t&&t.inkAnnotationModule&&(this.pdfViewer.inkAnnotationSettings.thickness=e.value),this.pdfViewer.drawingObject&&(this.pdfViewer.drawingObject.thickness=e.value),this.pdfViewer.drawingObject&&"FreeText"===this.pdfViewer.drawingObject.shapeAnnotationType&&(this.pdfViewer.freeTextSettings.borderWidth=e.value,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties())}var i=this.pdfViewer.annotation;i&&i.inkAnnotationModule&&(this.pdfViewer.inkAnnotationSettings.thickness=e),this.pdfViewer.drawingObject&&(this.pdfViewer.drawingObject.thickness=e),this.pdfViewer.drawingObject&&"FreeText"===this.pdfViewer.drawingObject.shapeAnnotationType&&(this.pdfViewer.freeTextSettings.borderWidth=e,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()),S()||this.updateThicknessIndicator()},e.prototype.createDropDownButton=function(e,t,i,n){var o=new Yf({iconCss:t+" e-pv-icon",target:i});return this.pdfViewer.enableRtl&&(o.enableRtl=!0),o.appendTo(e),this.primaryToolbar.createTooltip(e,n),o},e.prototype.createShapeOptions=function(e,t,i,n){var o,s=we("div",{id:e+"_target",className:"e-pv-shapes-toolbar"});return document.body.appendChild(s),i?((o=new Dr({items:this.textAlignmentToolbarItems(),overflowMode:"MultiRow"},s)).isStringTemplate=!0,this.afterAlignmentToolbarCreation()):n?((o=new Dr({items:this.textPropertiesToolbarItems(),overflowMode:"MultiRow"},s)).isStringTemplate=!0,this.afterPropertiesToolbarCreation()):t?!ge.isDevice||this.pdfViewer.enableDesktopMode?((o=new Dr({items:this.createShapeToolbarItems(),overflowMode:"MultiRow",clicked:this.onShapeToolbarClicked.bind(this)},s)).isStringTemplate=!0,this.afterShapeToolbarCreation()):(this.toolbarElement=we("div",{id:e+"_target",className:"e-pv-mobile-annotation-toolbar",styles:"bottom: 0px; position: absolute; width: 100%; float: left"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement),(o=new Dr({items:this.createShapeToolbarItemsForMobile(),overflowMode:"Scrollable",clicked:this.onShapeToolbarClicked.bind(this)},this.toolbarElement)).isStringTemplate=!0,this.afterShapeToolbarCreationForMobile()):((o=new Dr({items:this.createCalibrateToolbarItems(),overflowMode:"MultiRow",clicked:this.onCalibrateToolbarClicked.bind(this)},s)).isStringTemplate=!0,this.afterCalibrateToolbarCreation()),o},e.prototype.createPropertyToolbarForMobile=function(e){var t=this,i=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate("span","_annotation_color","e-pv-annotation-color-container"),n=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate("span","_annotation_stroke","e-pv-annotation-stroke-container"),o=this.getTemplate("span","_annotation_thickness","e-pv-annotation-thickness-container"),s=this.getTemplate("span","_annotation_opacity","e-pv-annotation-opacity-container"),a=this.getTemplate("input","_annotation_fontname","e-pv-annotation-fontname-container"),r=this.getTemplate("input","_annotation_fontsize","e-pv-annotation-fontsize-container"),l=this.getTemplate("span","_annotation_textcolor","e-pv-annotation-textcolor-container"),d=this.getTemplate("span","_annotation_textalign","e-pv-annotation-textalign-container"),h=this.getTemplate("span","_annotation_textproperties","e-pv-annotation-textprop-container"),p=[];return"Polygon"===e||"Rectangle"===e||"Ellipse"===e||"Line"===e||"LineWidthArrowHead"===e||"Distance"===e||"Perimeter"===e||"Radius"===e||"FreeText"===e?("FreeText"===e&&(p.push({prefixIcon:"e-pv-freetext-icon e-pv-icon",className:"e-pv-annotation-freetextedit-container"}),p.push({type:"Separator",align:"Left"}),p.push({template:a}),p.push({template:r}),p.push({template:l}),p.push({template:d}),p.push({template:h})),"Polygon"===e?"Area"===this.pdfViewer.selectedItems.annotations[0].measureType?(p.push({prefixIcon:"e-pv-calibrate-area-icon e-pv-icon"}),p.push({type:"Separator",align:"Left"})):"Volume"===this.pdfViewer.selectedItems.annotations[0].measureType?(p.push({prefixIcon:"e-pv-calibrate-volume-icon e-pv-icon"}),p.push({type:"Separator",align:"Left"})):(p.push({prefixIcon:"e-pv-shape-pentagon-icon e-pv-icon"}),p.push({type:"Separator",align:"Left"})):"Rectangle"===e?(p.push({prefixIcon:"e-pv-shape-rectangle-icon e-pv-icon"}),p.push({type:"Separator",align:"Left"})):"Ellipse"===e?(p.push({prefixIcon:"e-pv-shape-circle-icon e-pv-icon"}),p.push({type:"Separator",align:"Left"})):"Line"===e?"Perimeter"===this.pdfViewer.selectedItems.annotations[0].measureType?(p.push({prefixIcon:"e-pv-calibrate-perimeter-icon e-pv-icon"}),p.push({type:"Separator",align:"Left"})):(p.push({prefixIcon:"e-pv-shape-line-icon e-pv-icon"}),p.push({type:"Separator",align:"Left"})):"LineWidthArrowHead"===e?(p.push({prefixIcon:"e-pv-shape-arrow-icon e-pv-icon"}),p.push({type:"Separator",align:"Left"})):"Distance"===e?(p.push({prefixIcon:"e-pv-calibrate-distance-icon e-pv-icon"}),p.push({type:"Separator",align:"Left"})):"Perimeter"===e?(p.push({prefixIcon:"e-pv-calibrate-perimeter-icon e-pv-icon"}),p.push({type:"Separator",align:"Left"})):"Radius"===e&&(p.push({prefixIcon:"e-pv-calibrate-radius-icon e-pv-icon"}),p.push({type:"Separator",align:"Left"})),p.push({template:i}),p.push({template:n}),p.push({template:o})):"Path"===e||"Ink"===e||"HandWrittenSignature"===e||"SignatureText"===e?("Path"===e||"Ink"===e?(p.push({prefixIcon:"e-pv-inkannotation-icon e-pv-icon"}),p.push({type:"Separator",align:"Left"})):"HandWrittenSignature"!==e&&"SignatureText"!==e||(p.push({prefixIcon:"e-pv-handwritten-icon e-pv-icon"}),p.push({type:"Separator",align:"Left"})),p.push({template:n}),p.push({template:o})):"Underline"===e||"Highlight"===e||"Strikethrough"===e?("Highlight"===e?(p.push({prefixIcon:"e-pv-highlight-icon e-pv-icon"}),p.push({type:"Separator",align:"Left"})):"Underline"===e?(p.push({prefixIcon:"e-pv-underline-icon e-pv-icon"}),p.push({type:"Separator",align:"Left"})):"Strikethrough"===e&&(p.push({prefixIcon:"e-pv-strikethrough-icon e-pv-icon"}),p.push({type:"Separator",align:"Left"})),p.push({template:i})):"Stamp"===e||"Image"===e?(p.push({prefixIcon:"e-pv-stamp-icon e-pv-icon"}),p.push({type:"Separator",align:"Left"})):"StickyNotes"===e&&(p.push({prefixIcon:"e-pv-comment-icon e-pv-icon"}),p.push({type:"Separator",align:"Left"})),p.push({template:s}),p.push({prefixIcon:"e-pv-comment-panel-icon e-pv-icon",className:"e-pv-comment-panel-icon-container",id:this.pdfViewer.element.id+"_annotation_commentPanel",align:"Right",click:function(e){t.pdfViewer.annotationModule.showCommentsPanel()}}),p.push({prefixIcon:"e-pv-annotation-delete-icon e-pv-icon",className:"e-pv-annotation-delete-container",id:this.pdfViewer.element.id+"_annotation_delete",align:"Right",click:function(e){t.pdfViewer.annotationModule.deleteAnnotation(),t.propertyToolbar.destroy(),t.toolbarCreated=!1,t.createAnnotationToolbarForMobile(),t.adjustMobileViewer()}}),p},e.prototype.createStampToolbarItemsForMobile=function(){var e=this.getTemplate("span","_annotation_opacity","e-pv-annotation-opacity-container"),t=[];return t.push({prefixIcon:"e-pv-backward-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Go Back"),id:this.pdfViewer.element.id+"_backward",click:this.goBackToToolbar.bind(this)}),t.push({type:"Separator",align:"Left"}),t.push({template:e}),t},e.prototype.createShapeToolbarItemsForMobile=function(){var e=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate("span","_annotation_color","e-pv-annotation-color-container"),t=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate("span","_annotation_stroke","e-pv-annotation-stroke-container"),i=this.getTemplate("span","_annotation_thickness","e-pv-annotation-thickness-container"),n=this.getTemplate("span","_annotation_opacity","e-pv-annotation-opacity-container"),o=[];return o.push({prefixIcon:"e-pv-backward-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Go Back"),id:this.pdfViewer.element.id+"_backward",click:this.goBackToToolbar.bind(this)}),o.push({prefixIcon:"e-pv-shape-line-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_shape_line",text:this.pdfViewer.localeObj.getConstant("Line Shape"),align:"Left"}),o.push({prefixIcon:"e-pv-shape-arrow-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_shape_arrow",text:this.pdfViewer.localeObj.getConstant("Arrow Shape"),align:"Left"}),o.push({prefixIcon:"e-pv-shape-rectangle-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_shape_rectangle",text:this.pdfViewer.localeObj.getConstant("Rectangle Shape"),align:"Left"}),o.push({prefixIcon:"e-pv-shape-circle-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_shape_circle",text:this.pdfViewer.localeObj.getConstant("Circle Shape"),align:"Left"}),o.push({prefixIcon:"e-pv-shape-pentagon-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_shape_pentagon",text:this.pdfViewer.localeObj.getConstant("Pentagon Shape"),align:"Left"}),o.push({type:"Separator",align:"Left"}),o.push({template:e}),o.push({template:t}),o.push({template:i}),o.push({template:n}),o},e.prototype.createCalibrateToolbarItemsForMobile=function(){var e=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate("span","_annotation_color","e-pv-annotation-color-container"),t=this.pdfViewer.toolbarModule.annotationToolbarModule.getTemplate("span","_annotation_stroke","e-pv-annotation-stroke-container"),i=this.getTemplate("span","_annotation_thickness","e-pv-annotation-thickness-container"),n=this.getTemplate("span","_annotation_opacity","e-pv-annotation-opacity-container"),o=[];return o.push({prefixIcon:"e-pv-backward-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Go Back"),id:this.pdfViewer.element.id+"_backward",click:this.goBackToToolbar.bind(this)}),o.push({prefixIcon:"e-pv-calibrate-distance-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_calibrate_distance",text:this.pdfViewer.localeObj.getConstant(""),align:"Left"}),o.push({prefixIcon:"e-pv-calibrate-perimeter-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_calibrate_perimeter",text:this.pdfViewer.localeObj.getConstant(""),align:"Left"}),o.push({prefixIcon:"e-pv-calibrate-area-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_calibrate_area",text:this.pdfViewer.localeObj.getConstant(""),align:"Left"}),o.push({prefixIcon:"e-pv-calibrate-radius-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_calibrate_radius",text:this.pdfViewer.localeObj.getConstant(""),align:"Left"}),o.push({prefixIcon:"e-pv-calibrate-volume-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_calibrate_volume",text:this.pdfViewer.localeObj.getConstant(""),align:"Left"}),o.push({type:"Separator",align:"Left"}),o.push({template:e}),o.push({template:t}),o.push({template:i}),o.push({template:n}),o},e.prototype.handleShapeTool=function(e){if(!S()&&ge.isDevice)for(var t=document.querySelectorAll(".e-pv-select"),i=0;i<t.length;i++)t[i].id!==e&&t[i].id!==this.pdfViewer.element.id+"_annotation"&&t[i].classList.remove("e-pv-select")},e.prototype.createPropDropDownButton=function(e,t,i,n){var o=new Yf({iconCss:t+" e-pv-icon",target:i,cssClass:"e-caret-hide"});return this.pdfViewer.enableRtl&&(o.enableRtl=!0),o.appendTo(e),this.primaryToolbar.createTooltip(e,n),o},e.prototype.textAlignmentToolbarItems=function(){var e=[];return e.push({prefixIcon:"e-pv-left-align-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_left_align",align:"Left",value:"Left",click:this.onClickTextAlignment.bind(this)}),e.push({prefixIcon:"e-pv-center-align-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_center_align",align:"Left",value:"Center",click:this.onClickTextAlignment.bind(this)}),e.push({prefixIcon:"e-pv-right-align-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_right_align",align:"Left",value:"Right",click:this.onClickTextAlignment.bind(this)}),e.push({prefixIcon:"e-pv-justfiy-align-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_justify_align",align:"Left",value:"Justify",click:this.onClickTextAlignment.bind(this)}),e},e.prototype.afterAlignmentToolbarCreation=function(){this.alignLeftElement=this.primaryToolbar.addClassToolbarItem("_left_align","e-pv-left-align",this.pdfViewer.localeObj.getConstant("Align left")),this.alignRightElement=this.primaryToolbar.addClassToolbarItem("_right_align","e-pv-right-align",this.pdfViewer.localeObj.getConstant("Align right")),this.alignCenterElement=this.primaryToolbar.addClassToolbarItem("_center_align","e-pv-center-align",this.pdfViewer.localeObj.getConstant("Center")),this.alignJustifyElement=this.primaryToolbar.addClassToolbarItem("_justify_align","e-pv-justfiy-align",this.pdfViewer.localeObj.getConstant("Justify"))},e.prototype.afterPropertiesToolbarCreation=function(){this.boldElement=this.primaryToolbar.addClassToolbarItem("_bold","e-pv-bold",this.pdfViewer.localeObj.getConstant("Bold")),this.italicElement=this.primaryToolbar.addClassToolbarItem("_italic","e-pv-italic",this.pdfViewer.localeObj.getConstant("Italic")),this.fontStyleStrikethroughItem=this.primaryToolbar.addClassToolbarItem("_strikeout","e-pv-strikeout",this.pdfViewer.localeObj.getConstant("Strikethroughs")),this.fontStyleUnderlineItem=this.primaryToolbar.addClassToolbarItem("_underline_textinput","e-pv-underlinetext",this.pdfViewer.localeObj.getConstant("Underlines"))},e.prototype.createDropDownListForSize=function(e){var t=this,i=["8px","9px","10px","11px","12px","14px","16px","18px","20px","22px","24px","26px","28px","36px","48px","72px","96px"];this.pdfViewer.enableRtl?this.fontSize=new Tf({dataSource:i,cssClass:"e-pv-prop-dropdown-rtl",allowCustom:!0,showClearButton:!1,width:"80px",popupWidth:"100px",enableRtl:!0}):this.fontSize=new Tf({dataSource:i,cssClass:"e-pv-prop-dropdown",allowCustom:!0,showClearButton:!1,width:"80px",popupWidth:"100px"}),this.fontSize.value="16px",this.fontSize.appendTo(e),this.primaryToolbar.createTooltip(e,this.pdfViewer.localeObj.getConstant("Font size")),this.fontSize.addEventListener("change",(function(e){var i=e.isInteracted;t.onFontSizeChange(t,i)}))},e.prototype.createDropDownListForFamily=function(e){var t=this,i=[{FontName:"Helvetica"},{FontName:"Courier"},{FontName:"Symbol"},{FontName:"Times New Roman"}];this.pdfViewer.enableRtl?this.fontFamily=new Tf({dataSource:i,query:(new Bl).select(["FontName"]),fields:{text:"FontName",value:"FontName"},cssClass:"e-pv-prop-dropdown-rtl",itemTemplate:'<span style="font-family: ${FontName};">${FontName}</span>',allowCustom:!0,showClearButton:!1,width:"110px",popupWidth:"190px",enableRtl:!0}):this.fontFamily=new Tf({dataSource:i,query:(new Bl).select(["FontName"]),fields:{text:"FontName",value:"FontName"},cssClass:"e-pv-prop-dropdown",itemTemplate:'<span style="font-family: ${FontName};">${FontName}</span>',allowCustom:!0,showClearButton:!1,width:"110px",popupWidth:"190px"}),this.fontFamily.isStringTemplate=!0,this.fontFamily.value="Helvetica",this.fontFamily.appendTo(e),this.primaryToolbar.createTooltip(e,this.pdfViewer.localeObj.getConstant("Font family")),this.fontFamily.addEventListener("change",(function(){t.onFontFamilyChange(t)}))},e.prototype.textPropertiesToolbarItems=function(){var e=[];return e.push({prefixIcon:"e-pv-bold-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_bold",align:"Left",value:"bold",click:this.onClickTextProperties.bind(this)}),e.push({prefixIcon:"e-pv-italic-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_italic",align:"Left",value:"italic",click:this.onClickTextProperties.bind(this)}),e.push({prefixIcon:"e-pv-strikeout-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_strikeout",align:"Left",value:"strikeout",click:this.onClickTextProperties.bind(this)}),e.push({prefixIcon:"e-pv-underlinetext-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_underline_textinput",align:"Left",value:"underline",click:this.onClickTextProperties.bind(this)}),e},e.prototype.createShapeToolbarItems=function(){var e=[];return e.push({prefixIcon:"e-pv-shape-line-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_shape_line",text:this.pdfViewer.localeObj.getConstant("Line Shape"),align:"Left"}),e.push({prefixIcon:"e-pv-shape-arrow-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_shape_arrow",text:this.pdfViewer.localeObj.getConstant("Arrow Shape"),align:"Left"}),e.push({prefixIcon:"e-pv-shape-rectangle-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_shape_rectangle",text:this.pdfViewer.localeObj.getConstant("Rectangle Shape"),align:"Left"}),e.push({prefixIcon:"e-pv-shape-circle-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_shape_circle",text:this.pdfViewer.localeObj.getConstant("Circle Shape"),align:"Left"}),e.push({prefixIcon:"e-pv-shape-pentagon-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_shape_pentagon",text:this.pdfViewer.localeObj.getConstant("Pentagon Shape"),align:"Left"}),e},e.prototype.createCalibrateToolbarItems=function(){var e=[];return e.push({prefixIcon:"e-pv-calibrate-distance-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_calibrate_distance",text:this.pdfViewer.localeObj.getConstant(""),align:"Left"}),e.push({prefixIcon:"e-pv-calibrate-perimeter-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_calibrate_perimeter",text:this.pdfViewer.localeObj.getConstant(""),align:"Left"}),e.push({prefixIcon:"e-pv-calibrate-area-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_calibrate_area",text:this.pdfViewer.localeObj.getConstant(""),align:"Left"}),e.push({prefixIcon:"e-pv-calibrate-radius-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_calibrate_radius",text:this.pdfViewer.localeObj.getConstant(""),align:"Left"}),e.push({prefixIcon:"e-pv-calibrate-volume-icon e-pv-icon",cssClass:"",id:this.pdfViewer.element.id+"_calibrate_volume",text:this.pdfViewer.localeObj.getConstant(""),align:"Left"}),e},e.prototype.onCalibrateToolbarClicked=function(e){var t=this.pdfViewer.element.id,i=this.pdfViewer.annotation.measureAnnotationModule;if(this.deselectAllItems(),this.resetFreeTextAnnot(),ge.isDevice&&!S()){var n=e.originalEvent.target;this.pdfViewer.toolbarModule.selectItem(n.parentElement)}switch(e.originalEvent.target.id){case t+"_calibrate_distance":case t+"_calibrate_distanceIcon":i.setAnnotationType("Distance"),this.onShapeDrawSelection(!1),this.updateColorInIcon(this.colorDropDownElement,i.distanceFillColor),this.updateColorInIcon(this.strokeDropDownElement,i.distanceStrokeColor),this.handleShapeTool(t+"_calibrate_distance");break;case t+"_calibrate_perimeter":case t+"_calibrate_perimeterIcon":i.setAnnotationType("Perimeter"),this.onShapeDrawSelection(!1),this.updateColorInIcon(this.colorDropDownElement,i.perimeterFillColor),this.updateColorInIcon(this.strokeDropDownElement,i.perimeterStrokeColor),this.handleShapeTool(t+"_calibrate_perimeter");break;case t+"_calibrate_area":case t+"_calibrate_areaIcon":i.setAnnotationType("Area"),this.onShapeDrawSelection(!1),this.updateColorInIcon(this.colorDropDownElement,i.areaFillColor),this.updateColorInIcon(this.strokeDropDownElement,i.areaStrokeColor),this.handleShapeTool(t+"_calibrate_area");break;case t+"_calibrate_radius":case t+"_calibrate_radiusIcon":i.setAnnotationType("Radius"),this.onShapeDrawSelection(!1),this.updateColorInIcon(this.colorDropDownElement,i.radiusFillColor),this.updateColorInIcon(this.strokeDropDownElement,i.radiusStrokeColor),this.handleShapeTool(t+"_calibrate_radius");break;case t+"_calibrate_volume":case t+"_calibrate_volumeIcon":i.setAnnotationType("Volume"),this.onShapeDrawSelection(!1),this.updateColorInIcon(this.colorDropDownElement,i.volumeFillColor),this.updateColorInIcon(this.strokeDropDownElement,i.volumeStrokeColor),this.handleShapeTool(t+"_calibrate_volume")}},e.prototype.onShapeDrawSelection=function(e){this.pdfViewer.selectedItems.annotations[0];ge.isDevice||(this.updateInteractionTools(),this.enableAnnotationPropertiesTools(!0),e?this.shapeDropDown.toggle():this.calibrateDropDown.toggle()),this.pdfViewer.annotation.triggerAnnotationUnselectEvent()},e.prototype.afterCalibrateToolbarCreationForMobile=function(){this.primaryToolbar.addClassToolbarItem("_calibrate_distance","e-pv-calibrate-distance",this.pdfViewer.localeObj.getConstant("Calibrate Distance")),this.primaryToolbar.addClassToolbarItem("_calibrate_perimeter","e-pv-calibrate-perimeter",this.pdfViewer.localeObj.getConstant("Calibrate Perimeter")),this.primaryToolbar.addClassToolbarItem("_calibrate_area","e-pv-calibrate-area",this.pdfViewer.localeObj.getConstant("Calibrate Area")),this.primaryToolbar.addClassToolbarItem("_calibrate_radius","e-pv-calibrate-radius",this.pdfViewer.localeObj.getConstant("Calibrate Radius")),this.primaryToolbar.addClassToolbarItem("_calibrate_volume","e-pv-calibrate-volume",this.pdfViewer.localeObj.getConstant("Calibrate Volume"))},e.prototype.afterShapeToolbarCreationForMobile=function(){this.primaryToolbar.addClassToolbarItem("_annotation_color","e-pv-annotation-color-container",this.pdfViewer.localeObj.getConstant("Change Color")),this.primaryToolbar.addClassToolbarItem("_annotation_stroke","e-pv-annotation-stroke-container",this.pdfViewer.localeObj.getConstant("Change Stroke Color")),this.primaryToolbar.addClassToolbarItem("_annotation_thickness","e-pv-annotation-thickness-container",this.pdfViewer.localeObj.getConstant("Chnage Border Thickness")),this.primaryToolbar.addClassToolbarItem("_annotation_opacity","e-annotation-opacity-container",this.pdfViewer.localeObj.getConstant("Change Opacity")),this.primaryToolbar.addClassToolbarItem("_shape_line","e-pv-shape-line",this.pdfViewer.localeObj.getConstant("Add line")),this.primaryToolbar.addClassToolbarItem("_shape_arrow","e-pv-shape-arrow",this.pdfViewer.localeObj.getConstant("Add arrow")),this.primaryToolbar.addClassToolbarItem("_shape_rectangle","e-pv-shape-rectangle",this.pdfViewer.localeObj.getConstant("Add rectangle")),this.primaryToolbar.addClassToolbarItem("_shape_circle","e-pv-shape-circle",this.pdfViewer.localeObj.getConstant("Add circle")),this.primaryToolbar.addClassToolbarItem("_shape_pentagon","e-pv-shape-pentagon",this.pdfViewer.localeObj.getConstant("Add polygon"))},e.prototype.afterShapeToolbarCreation=function(){this.lineElement=this.primaryToolbar.addClassToolbarItem("_shape_line","e-pv-shape-line",this.pdfViewer.localeObj.getConstant("Add line")),this.arrowElement=this.primaryToolbar.addClassToolbarItem("_shape_arrow","e-pv-shape-arrow",this.pdfViewer.localeObj.getConstant("Add arrow")),this.rectangleElement=this.primaryToolbar.addClassToolbarItem("_shape_rectangle","e-pv-shape-rectangle",this.pdfViewer.localeObj.getConstant("Add rectangle")),this.circleElement=this.primaryToolbar.addClassToolbarItem("_shape_circle","e-pv-shape-circle",this.pdfViewer.localeObj.getConstant("Add circle")),this.polygonElement=this.primaryToolbar.addClassToolbarItem("_shape_pentagon","e-pv-shape-pentagon",this.pdfViewer.localeObj.getConstant("Add polygon"))},e.prototype.afterCalibrateToolbarCreation=function(){this.calibrateDistance=this.primaryToolbar.addClassToolbarItem("_calibrate_distance","e-pv-calibrate-distance",this.pdfViewer.localeObj.getConstant("Calibrate Distance")),this.calibratePerimeter=this.primaryToolbar.addClassToolbarItem("_calibrate_perimeter","e-pv-calibrate-perimeter",this.pdfViewer.localeObj.getConstant("Calibrate Perimeter")),this.calibrateArea=this.primaryToolbar.addClassToolbarItem("_calibrate_area","e-pv-calibrate-area",this.pdfViewer.localeObj.getConstant("Calibrate Area")),this.calibrateRadius=this.primaryToolbar.addClassToolbarItem("_calibrate_radius","e-pv-calibrate-radius",this.pdfViewer.localeObj.getConstant("Calibrate Radius")),this.calibrateVolume=this.primaryToolbar.addClassToolbarItem("_calibrate_volume","e-pv-calibrate-volume",this.pdfViewer.localeObj.getConstant("Calibrate Volume"))},e.prototype.afterMobileToolbarCreation=function(){this.highlightItem=this.primaryToolbar.addClassToolbarItem("_highlight","e-pv-highlight",this.pdfViewer.localeObj.getConstant("Highlight")),this.underlineItem=this.primaryToolbar.addClassToolbarItem("_underline","e-pv-underline",this.pdfViewer.localeObj.getConstant("Underline")),this.strikethroughItem=this.primaryToolbar.addClassToolbarItem("_strikethrough","e-pv-strikethrough",this.pdfViewer.localeObj.getConstant("Strikethrough")),this.shapesItem=this.primaryToolbar.addClassToolbarItem("_annotation_shapes","e-pv-annotation-shapes",this.pdfViewer.localeObj.getConstant("Add Shapes")),this.calibrateItem=this.primaryToolbar.addClassToolbarItem("_annotation_calibrate","e-pv-annotation-calibrate",this.pdfViewer.localeObj.getConstant("Calibrate")),this.freeTextEditItem=this.primaryToolbar.addClassToolbarItem("_annotation_freeTextEdit","e-pv-annotation-freeTextEdit",this.pdfViewer.localeObj.getConstant("Free Text")),this.commentItem=this.primaryToolbar.addClassToolbarItem("_comment","e-pv-comment",this.pdfViewer.localeObj.getConstant("Add Comments")),this.commentItem=this.primaryToolbar.addClassToolbarItem("_annotation_commentPanel","e-pv-annotation-comment-panel",this.pdfViewer.localeObj.getConstant("Comment Panel")),this.inkAnnotationItem=this.primaryToolbar.addClassToolbarItem("_annotation_ink","e-pv-annotation-ink",this.pdfViewer.localeObj.getConstant("Draw Ink")),this.selectAnnotationDeleteItem(!1),this.enableCommentPanelTool(this.pdfViewer.enableCommentPanel)},e.prototype.createColorPicker=function(e){var t,i=document.getElementById(e+"_target");t=i||we("input",{id:e+"_target"}),document.body.appendChild(t);var n=new Rg({inline:!0,mode:"Palette",cssClass:"e-show-value",enableOpacity:!1,value:"#000000",showButtons:!1,modeSwitcher:!1});return this.pdfViewer.enableRtl&&(n.enableRtl=!0),n.appendTo(t),n},e.prototype.onColorPickerChange=function(e){var t;if(t=S()?e[0]:""===e.currentValue.hex?"#ffffff00":e.currentValue.hex,this.pdfViewer.annotationModule.textMarkupAnnotationModule)if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyColorProperty(t);else switch(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode){case"Highlight":this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor=t;break;case"Underline":this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor=t;break;case"Strikethrough":this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor=t}if(1===this.pdfViewer.selectedItems.annotations.length)S()?e[0]!==e[1]&&this.pdfViewer.annotation.modifyFillColor(t):e.currentValue.hex!==e.previousValue.hex&&this.pdfViewer.annotation.modifyFillColor(t);else{if(this.pdfViewer.annotation.shapeAnnotationModule)switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case"Line":this.pdfViewer.annotation.shapeAnnotationModule.lineFillColor=t;break;case"Arrow":this.pdfViewer.annotation.shapeAnnotationModule.arrowFillColor=t;break;case"Rectangle":this.pdfViewer.annotation.shapeAnnotationModule.rectangleFillColor=t;break;case"Circle":this.pdfViewer.annotation.shapeAnnotationModule.circleFillColor=t;break;case"Polygon":this.pdfViewer.annotation.shapeAnnotationModule.polygonFillColor=t}this.pdfViewer.drawingObject&&(this.pdfViewer.drawingObject.fillColor=t,"FreeText"===this.pdfViewer.drawingObject.shapeAnnotationType&&(this.pdfViewer.freeTextSettings.fillColor=t,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()))}S()?(this.colorDropDownElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-color-container"),this.updateColorInIcon(this.colorDropDownElementInBlazor,t)):(this.updateColorInIcon(this.colorDropDownElement,t),this.colorDropDown.toggle())},e.prototype.onStrokePickerChange=function(e){var t;if(t=S()?e[0]:""===e.currentValue.hex?"#ffffff00":e.currentValue.hex,1===this.pdfViewer.selectedItems.annotations.length)S()?e[0]!==e[1]&&this.pdfViewer.annotation.modifyStrokeColor(t):e.currentValue.hex!==e.previousValue.hex&&this.pdfViewer.annotation.modifyStrokeColor(t);else{if(this.pdfViewer.annotation.shapeAnnotationModule)switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case"Line":this.pdfViewer.annotation.shapeAnnotationModule.lineStrokeColor=t;break;case"Arrow":this.pdfViewer.annotation.shapeAnnotationModule.arrowStrokeColor=t;break;case"Rectangle":this.pdfViewer.annotation.shapeAnnotationModule.rectangleStrokeColor=t;break;case"Circle":this.pdfViewer.annotation.shapeAnnotationModule.circleStrokeColor=t;break;case"Polygon":this.pdfViewer.annotation.shapeAnnotationModule.polygonStrokeColor=t}var i=this.pdfViewer.annotation;i&&i.inkAnnotationModule&&(this.pdfViewer.inkAnnotationSettings.strokeColor=t),this.pdfViewer.drawingObject&&(this.pdfViewer.drawingObject.strokeColor=t),this.pdfViewer.drawingObject&&"FreeText"===this.pdfViewer.drawingObject.shapeAnnotationType&&(this.pdfViewer.freeTextSettings.borderColor=t,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties())}S()?(this.strokeDropDownElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-stroke-container"),this.updateColorInIcon(this.strokeDropDownElementInBlazor,t)):(this.updateColorInIcon(this.strokeDropDownElement,t),this.strokeDropDown.toggle())},e.prototype.updateColorInIcon=function(e,t){S()?e&&(e.children[0].style.borderBottomColor=t):e&&(e.childNodes[0]?e.childNodes[0].style.borderBottomColor=t:e.childNodes[0])},e.prototype.updateTextPropertySelection=function(e){"bold"===e?document.getElementById(this.pdfViewer.element.id+"_bold").classList.toggle("textprop-option-active"):"italic"===e?document.getElementById(this.pdfViewer.element.id+"_italic").classList.toggle("textprop-option-active"):"underline"===e?(document.getElementById(this.pdfViewer.element.id+"_underline_textinput").classList.toggle("textprop-option-active"),document.getElementById(this.pdfViewer.element.id+"_strikeout").classList.remove("textprop-option-active")):"strikeout"===e&&(document.getElementById(this.pdfViewer.element.id+"_strikeout").classList.toggle("textprop-option-active"),document.getElementById(this.pdfViewer.element.id+"_underline_textinput").classList.remove("textprop-option-active"))},e.prototype.updateFontFamilyInIcon=function(e){this.fontFamily.value=e},e.prototype.updateTextAlignInIcon=function(e){var t="e-btn-icon e-pv-left-align-icon e-pv-icon",i=document.getElementById(this.pdfViewer.element.id+"_left_align"),n=document.getElementById(this.pdfViewer.element.id+"_right_align"),o=document.getElementById(this.pdfViewer.element.id+"_center_align"),s=document.getElementById(this.pdfViewer.element.id+"_justify_align");S()||(i.classList.remove("textprop-option-active"),n.classList.remove("textprop-option-active"),o.classList.remove("textprop-option-active"),s.classList.remove("textprop-option-active")),"Left"===e?i.classList.add("textprop-option-active"):"Right"===e?(t="e-btn-icon e-pv-right-align-icon e-pv-icon",n.classList.add("textprop-option-active")):"Center"===e?(t="e-btn-icon e-pv-center-align-icon e-pv-icon",o.classList.add("textprop-option-active")):"Justify"===e&&(t="e-btn-icon e-pv-justfiy-align-icon e-pv-icon",s.classList.add("textprop-option-active")),document.getElementById(this.pdfViewer.element.id+"_annotation_textalign").children[0].className=t},e.prototype.updateFontSizeInIcon=function(e){this.fontSize.value=e+"px"},e.prototype.updateOpacityIndicator=function(){this.opacityIndicator.textContent=parseInt(Math.round(this.opacitySlider.value).toString())+"%"},e.prototype.updateThicknessIndicator=function(){this.thicknessIndicator.textContent=this.thicknessSlider.value+" pt"},e.prototype.createSlider=function(e){var t=we("div",{className:"e-pv-annotation-opacity-popup-container"});document.body.appendChild(t);var i=we("span",{id:e+"_label",className:"e-pv-annotation-opacity-label"});i.textContent=this.pdfViewer.localeObj.getConstant("Opacity");var n=we("div",{id:e+"_slider"});return this.opacitySlider=new rg({type:"MinRange",cssClass:"e-pv-annotation-opacity-slider",max:100,min:0}),this.opacityIndicator=we("div",{id:e+"_opacity_indicator",className:"e-pv-annotation-opacity-indicator"}),this.opacityIndicator.textContent="100%",this.pdfViewer.enableRtl?(t.appendChild(this.opacityIndicator),t.appendChild(n),this.opacitySlider.enableRtl=!0,this.opacitySlider.appendTo(n),this.opacitySlider.element.parentElement.classList.add("e-pv-annotation-opacity-slider-container"),t.appendChild(i)):(t.appendChild(i),t.appendChild(n),this.opacitySlider.appendTo(n),this.opacitySlider.element.parentElement.classList.add("e-pv-annotation-opacity-slider-container"),t.appendChild(this.opacityIndicator)),t},e.prototype.createThicknessSlider=function(e){var t=we("div",{className:"e-pv-annotation-thickness-popup-container"});document.body.appendChild(t);var i=we("span",{id:e+"_label",className:"e-pv-annotation-thickness-label"});i.textContent=this.pdfViewer.localeObj.getConstant("Line Thickness");var n=we("div",{id:e+"_slider"});return this.thicknessSlider=new rg({type:"MinRange",cssClass:"e-pv-annotation-thickness-slider",max:12,min:0}),this.thicknessIndicator=we("div",{id:e+"_thickness_indicator",className:"e-pv-annotation-thickness-indicator"}),this.thicknessIndicator.textContent="0 pt",this.pdfViewer.enableRtl?(t.appendChild(this.thicknessIndicator),t.appendChild(n),this.thicknessSlider.enableRtl=!0,this.thicknessSlider.appendTo(n),t.appendChild(i)):(t.appendChild(i),t.appendChild(n),this.thicknessSlider.appendTo(n),t.appendChild(this.thicknessIndicator)),this.thicknessSlider.element.parentElement.classList.add("e-pv-annotation-thickness-slider-container"),t},e.prototype.afterToolbarCreation=function(){this.highlightItem=this.primaryToolbar.addClassToolbarItem("_highlight","e-pv-highlight",this.pdfViewer.localeObj.getConstant("Highlight")),this.underlineItem=this.primaryToolbar.addClassToolbarItem("_underline","e-pv-underline",this.pdfViewer.localeObj.getConstant("Underline")),this.strikethroughItem=this.primaryToolbar.addClassToolbarItem("_strikethrough","e-pv-strikethrough",this.pdfViewer.localeObj.getConstant("Strikethrough")),this.deleteItem=this.primaryToolbar.addClassToolbarItem("_annotation_delete","e-pv-annotation-delete",this.pdfViewer.localeObj.getConstant("Delete")),this.freeTextEditItem=this.primaryToolbar.addClassToolbarItem("_annotation_freeTextEdit","e-pv-annotation-freeTextEdit",this.pdfViewer.localeObj.getConstant("Free Text")),this.inkAnnotationItem=this.primaryToolbar.addClassToolbarItem("_annotation_ink","e-pv-annotation-ink",this.pdfViewer.localeObj.getConstant("Draw Ink")),this.commentItem=this.primaryToolbar.addClassToolbarItem("_annotation_commentPanel","e-pv-annotation-comment-panel",this.pdfViewer.localeObj.getConstant("Comment Panel")),this.closeItem=this.primaryToolbar.addClassToolbarItem("_annotation_close","e-pv-annotation-tools-close",null),this.selectAnnotationDeleteItem(!1),this.enableTextMarkupAnnotationPropertiesTools(!1),this.enableCommentPanelTool(this.pdfViewer.enableCommentPanel)},e.prototype.onToolbarClicked=function(e){var t=this.pdfViewer.selectedItems.annotations[0];switch(e.originalEvent.target.id&&this.pdfViewer.toolbarModule.updateStampItems(),this.pdfViewer.toolbarModule.deSelectCommentAnnotation(),e.originalEvent.target.id){case this.pdfViewer.element.id+"_highlight":case this.pdfViewer.element.id+"_highlightIcon":this.pdfViewer.tool="",ge.isDevice?(this.pdfViewer.annotationModule.setAnnotationMode("Highlight"),this.textMarkupForMobile(e)):(this.pdfViewer.tool="",this.resetFreeTextAnnot(),this.handleHighlight()),this.pdfViewer.annotation.triggerAnnotationUnselectEvent();break;case this.pdfViewer.element.id+"_underline":case this.pdfViewer.element.id+"_underlineIcon":this.pdfViewer.tool="",ge.isDevice?(this.pdfViewer.annotationModule.setAnnotationMode("Underline"),this.textMarkupForMobile(e)):(this.pdfViewer.tool="",this.resetFreeTextAnnot(),this.handleUnderline()),this.pdfViewer.annotation.triggerAnnotationUnselectEvent();break;case this.pdfViewer.element.id+"_strikethrough":case this.pdfViewer.element.id+"_strikethroughIcon":this.pdfViewer.tool="",ge.isDevice?(this.pdfViewer.annotationModule.setAnnotationMode("Strikethrough"),this.textMarkupForMobile(e)):(this.pdfViewer.tool="",this.resetFreeTextAnnot(),this.handleStrikethrough()),this.pdfViewer.annotation.triggerAnnotationUnselectEvent();break;case this.pdfViewer.element.id+"_annotation_delete":case this.pdfViewer.element.id+"_annotation_deleteIcon":this.pdfViewer.annotationModule.deleteAnnotation(),this.resetFreeTextAnnot();break;case this.pdfViewer.element.id+"_annotation_commentPanel":case this.pdfViewer.element.id+"_annotation_commentPanelIcon":this.inkAnnotationSelected=!1;var i=document.getElementById(this.pdfViewer.element.id+"_commantPanel");this.pdfViewer.annotation&&this.pdfViewer.annotation.textMarkupAnnotationModule&&this.pdfViewer.annotation.textMarkupAnnotationModule.showHideDropletDiv(!0),"block"===i.style.display?this.pdfViewerBase.navigationPane.closeCommentPanelContainer():this.pdfViewer.annotationModule.showCommentsPanel();break;case this.pdfViewer.element.id+"_annotation_close":case this.pdfViewer.element.id+"_annotation_closeIcon":this.inkAnnotationSelected=!1,"block"===document.getElementById(this.pdfViewer.element.id+"_commantPanel").style.display&&this.pdfViewerBase.navigationPane.closeCommentPanelContainer(),this.showAnnotationToolbar(this.primaryToolbar.annotationItem);break;case this.pdfViewer.element.id+"_annotation_freeTextEdit":case this.pdfViewer.element.id+"_annotation_freeTextEditIcon":ge.isDevice?(this.pdfViewer.annotationModule.setAnnotationMode("FreeText"),this.FreeTextForMobile()):(this.resetFreeTextAnnot(),this.handleFreeTextEditor());break;case this.pdfViewer.element.id+"_annotation_signature":case this.pdfViewer.element.id+"_annotation_signatureIcon":this.inkAnnotationSelected=!1,this.updateSignatureCount();break;case this.pdfViewer.element.id+"_annotation_ink":case this.pdfViewer.element.id+"_annotation_inkIcon":if(t&&this.pdfViewer.annotation.triggerAnnotationUnselectEvent(),this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber-1),this.pdfViewer.annotationModule.inkAnnotationModule){var n=this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;n&&""!==n&&(this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(n)),this.primaryToolbar.deSelectItem(this.inkAnnotationItem))}this.inkAnnotationSelected?this.inkAnnotationSelected=!1:(this.deselectAllItems(),this.drawInkAnnotation());break;case this.pdfViewer.element.id+"_annotation_shapesIcon":case this.pdfViewer.element.id+"_annotation_shapes":ge.isDevice&&this.shapeToolMobile(e);break;case this.pdfViewer.element.id+"_annotation_calibrateIcon":case this.pdfViewer.element.id+"_annotation_calibrate":ge.isDevice&&this.calibrateToolMobile(e);break;case this.pdfViewer.element.id+"_commentIcon":case this.pdfViewer.element.id+"_comment":this.pdfViewerBase.isAddComment=!0,this.pdfViewerBase.isCommentIconAdded=!0,document.getElementById(this.pdfViewer.element.id+"_comment").classList.add("e-pv-select"),this.pdfViewer.toolbarModule.addComments(e)}},e.prototype.addInkAnnotation=function(){if(this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber-1),this.pdfViewer.annotationModule.inkAnnotationModule){var e=this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;e&&""!==e&&(this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(e)),S()?(this.primaryToolbar.deSelectItem(this.InkAnnotationElement),this.pdfViewerBase.focusViewerContainer()):this.primaryToolbar.deSelectItem(this.inkAnnotationItem))}this.inkAnnotationSelected?this.inkAnnotationSelected=!1:(this.deselectAllItemsInBlazor(),this.drawInkAnnotation())},e.prototype.deselectInkAnnotation=function(){S()?(this.primaryToolbar.deSelectItem(this.InkAnnotationElement),this.pdfViewerBase.focusViewerContainer()):this.primaryToolbar.deSelectItem(this.inkAnnotationItem)},e.prototype.drawInkAnnotation=function(){this.inkAnnotationSelected=!0,S()?this.primaryToolbar.selectItem(this.InkAnnotationElement):this.primaryToolbar.selectItem(this.inkAnnotationItem),this.enableSignaturePropertiesTools(!0),this.pdfViewerBase.isToolbarInkClicked=!0,this.pdfViewer.annotationModule.inkAnnotationModule.drawInk()},e.prototype.resetFreeTextAnnot=function(){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule&&(this.pdfViewer.annotation.freeTextAnnotationModule.isNewFreeTextAnnot=!1,this.pdfViewer.annotation.freeTextAnnotationModule.isNewAddedAnnot=!1,ge.isDevice||(this.freeTextEditItem&&!S()?this.primaryToolbar.deSelectItem(this.freeTextEditItem):S()&&this.primaryToolbar.deSelectItem(this.FreeTextElement),this.enableFreeTextAnnotationPropertiesTools(!1))),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){var e=this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;e&&""!==e&&(this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(e)),S()?this.primaryToolbar.deSelectItem(this.InkAnnotationElement):this.primaryToolbar.deSelectItem(this.inkAnnotationItem))}this.inkAnnotationSelected=!1},e.prototype.updateInkannotationItems=function(){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule&&this.inkAnnotationSelected){var e=this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;e&&""!==e&&(this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(e)),this.pdfViewerBase.isToolbarInkClicked=!0,this.pdfViewer.tool="Ink",this.pdfViewer.clearSelection(e))}},e.prototype.showSignaturepanel=function(){this.pdfViewerBase.isToolbarSignClicked=!0,this.pdfViewerBase.signatureModule.showSignatureDialog(!0)},e.prototype.handleFreeTextEditor=function(){var e=this.pdfViewer.selectedItems.annotations[0];this.enableFreeTextAnnotationPropertiesTools(!0),e&&this.pdfViewer.fireAnnotationUnSelect(e.annotName,e.pageIndex,e),this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber-1),this.pdfViewer.annotationModule.textMarkupAnnotationModule&&(this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1),this.isStrikethroughEnabled=!1,this.isHighlightEnabled=!1,this.isUnderlineEnabled=!1;var t=this.pdfViewer.annotation.freeTextAnnotationModule;t.setAnnotationType("FreeText"),t.isNewFreeTextAnnot=!0,t.isNewAddedAnnot=!0,this.updateInteractionTools(),this.primaryToolbar.deSelectItem(this.highlightItem),this.primaryToolbar.deSelectItem(this.underlineItem),this.primaryToolbar.deSelectItem(this.strikethroughItem),this.primaryToolbar.selectItem(this.freeTextEditItem),this.updateColorInIcon(this.colorDropDownElement,this.pdfViewer.annotationModule.freeTextAnnotationModule.fillColor),this.updateColorInIcon(this.strokeDropDownElement,this.pdfViewer.annotationModule.freeTextAnnotationModule.borderColor),this.updateColorInIcon(this.fontColorElement,this.pdfViewer.annotationModule.freeTextAnnotationModule.fontColor),this.updateFontFamilyInIcon(this.pdfViewer.annotationModule.freeTextAnnotationModule.fontFamily),this.updateFontSizeInIcon(this.pdfViewer.annotationModule.freeTextAnnotationModule.fontSize),this.updateTextAlignInIcon(this.pdfViewer.annotationModule.freeTextAnnotationModule.textAlign),this.updateFontFamily()},e.prototype.updateFontFamily=function(){this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold?this.updateFontFamilyIcon("_bold",!0):this.updateFontFamilyIcon("_bold",!1),this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic?this.updateFontFamilyIcon("_italic",!0):this.updateFontFamilyIcon("_italic",!1),this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline?(this.updateFontFamilyIcon("_underline_textinput",!0),this.updateFontFamilyIcon("_strikeout",!1)):this.updateFontFamilyIcon("_underline_textinput",!1),this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough?(this.updateFontFamilyIcon("_strikeout",!0),this.updateFontFamilyIcon("_underline_textinput",!1)):this.updateFontFamilyIcon("_strikeout",!1)},e.prototype.updateFontFamilyIcon=function(e,t){var i=document.getElementById(this.pdfViewer.element.id+e);t?i.classList.add("textprop-option-active"):i.classList.remove("textprop-option-active")},e.prototype.showAnnotationToolbar=function(e,t){if(!ge.isDevice||this.pdfViewer.enableDesktopMode){if(this.isToolbarHidden){var i=void 0;this.toolbarElement&&(i=this.toolbarElement.style.display,this.toolbarElement.style.display="block"),t||(this.pdfViewer.isAnnotationToolbarVisible=!0),e?this.primaryToolbar.selectItem(e):this.pdfViewer.enableToolbar&&this.primaryToolbar.selectItem(this.primaryToolbar.annotationItem),"none"===i&&this.adjustViewer(!0)}else{var n=this.pdfViewer.annotationModule;e?this.primaryToolbar.deSelectItem(e):this.pdfViewer.enableToolbar&&this.primaryToolbar.deSelectItem(this.primaryToolbar.annotationItem),this.adjustViewer(!1),n&&n.textMarkupAnnotationModule&&n.textMarkupAnnotationModule.currentTextMarkupAnnotation?this.enablePropertiesTool(n):this.deselectAllItems(),this.toolbarElement.style.display="none",t||(this.pdfViewer.isAnnotationToolbarVisible=!1),this.pdfViewerBase.isPanMode?this.primaryToolbar.updateInteractionTools(!1):this.primaryToolbar.updateInteractionTools(!0)}this.pdfViewer.magnification&&"fitToPage"===this.pdfViewer.magnification.fitType&&this.pdfViewer.magnification.fitToPage(),this.enableAnnotationAddTools(!0),this.isToolbarHidden=!this.isToolbarHidden}},e.prototype.enablePropertiesTool=function(e){this.isHighlightEnabled=!1,this.isUnderlineEnabled=!1,this.isStrikethroughEnabled=!1,this.pdfViewerBase.isTextMarkupAnnotationModule()&&(e.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1),this.primaryToolbar.deSelectItem(this.highlightItem),this.primaryToolbar.deSelectItem(this.underlineItem),this.primaryToolbar.deSelectItem(this.strikethroughItem),this.enableTextMarkupAnnotationPropertiesTools(!0),this.updateColorInIcon(this.colorDropDownElement,e.textMarkupAnnotationModule.currentTextMarkupAnnotation.color),this.selectAnnotationDeleteItem(!0)},e.prototype.applyAnnotationToolbarSettings=function(){var e=this.pdfViewer.toolbarSettings.annotationToolbarItems;e&&(-1!==e.indexOf("HighlightTool")?this.showHighlightTool(!0,0,0):this.showHighlightTool(!1,0,0),-1!==e.indexOf("UnderlineTool")?this.showUnderlineTool(!0,1,1):this.showUnderlineTool(!1,1,1),-1!==e.indexOf("StrikethroughTool")?this.showStrikethroughTool(!0,2,2):this.showStrikethroughTool(!1,2,2),-1!==e.indexOf("ShapeTool")?this.showShapeAnnotationTool(!0,4,4):this.showShapeAnnotationTool(!1,4,4),-1!==e.indexOf("CalibrateTool")?this.showCalibrateAnnotationTool(!0,6,6):this.showCalibrateAnnotationTool(!1,6,6),-1!==e.indexOf("ColorEditTool")?this.showColorEditTool(!0,22,22):this.showColorEditTool(!1,22,22),-1!==e.indexOf("StrokeColorEditTool")?this.showStrokeColorEditTool(!0,23,23):this.showStrokeColorEditTool(!1,23,23),-1!==e.indexOf("ThicknessEditTool")?this.showThicknessEditTool(!0,24,24):this.showThicknessEditTool(!1,24,24),-1!==e.indexOf("OpacityEditTool")?this.showOpacityEditTool(!0,25,25):this.showOpacityEditTool(!1,25,25),-1!==e.indexOf("AnnotationDeleteTool")?this.showAnnotationDeleteTool(!0,27,27):this.showAnnotationDeleteTool(!1,27,27),-1!==e.indexOf("StampAnnotationTool")?this.showStampAnnotationTool(!0,10,10):this.showStampAnnotationTool(!1,10,10),-1!==e.indexOf("HandWrittenSignatureTool")?this.showSignatureTool(!0,12,12):this.showSignatureTool(!1,12,12),-1!==e.indexOf("FreeTextAnnotationTool")?this.showFreeTextAnnotationTool(!0,8,8):this.showFreeTextAnnotationTool(!1,8,8),-1!==e.indexOf("FontFamilyAnnotationTool")?this.showFontFamilyAnnotationTool(!0,16,16):this.showFontFamilyAnnotationTool(!1,16,16),-1!==e.indexOf("FontSizeAnnotationTool")?this.showFontSizeAnnotationTool(!0,17,17):this.showFontSizeAnnotationTool(!1,17,17),-1!==e.indexOf("FontStylesAnnotationTool")?this.showFontStylesAnnotationTool(!0,20,20):this.showFontStylesAnnotationTool(!1,20,20),-1!==e.indexOf("FontAlignAnnotationTool")?this.showFontAlignAnnotationTool(!0,18,18):this.showFontAlignAnnotationTool(!1,18,18),-1!==e.indexOf("FontColorAnnotationTool")?this.showFontColorAnnotationTool(!0,19,19):this.showFontColorAnnotationTool(!1,19,19),-1!==e.indexOf("CommentPanelTool")?this.showCommentPanelTool(!0,28,28):this.showCommentPanelTool(!1,28,28),this.showInkAnnotationTool(),this.showSeparator())},e.prototype.applyMobileAnnotationToolbarSettings=function(){var e=this.pdfViewer.toolbarSettings.annotationToolbarItems;if(e){-1!==e.indexOf("HighlightTool")?this.showHighlightTool(!0,2,2):this.showHighlightTool(!1,2,2),-1!==e.indexOf("UnderlineTool")?this.showUnderlineTool(!0,3,3):this.showUnderlineTool(!1,3,3),-1!==e.indexOf("StrikethroughTool")?this.showStrikethroughTool(!0,4,4):this.showStrikethroughTool(!1,4,4),-1!==e.indexOf("ShapeTool")?this.showShapeAnnotationTool(!0,6,6):this.showShapeAnnotationTool(!1,6,6),-1!==e.indexOf("CalibrateTool")?this.showCalibrateAnnotationTool(!0,8,8):this.showCalibrateAnnotationTool(!1,8,8);var t=this.pdfViewer.toolbarSettings.toolbarItems;t&&-1!==t.indexOf("CommentTool")?this.showStickyNoteToolInMobile(!0):this.showStickyNoteToolInMobile(!1),-1!==e.indexOf("StampAnnotationTool")?this.showStampAnnotationTool(!0,12,12):this.showStampAnnotationTool(!1,12,12),-1!==e.indexOf("HandWrittenSignatureTool")?this.showSignatureTool(!0,14,14):this.showSignatureTool(!1,14,14),-1!==e.indexOf("FreeTextAnnotationTool")?this.showFreeTextAnnotationTool(!0,10,10):this.showFreeTextAnnotationTool(!1,10,10),-1!==e.indexOf("CommentPanelTool")?this.showCommentPanelTool(!0,18,18):this.showCommentPanelTool(!1,18,18),-1!==e.indexOf("InkAnnotationTool")?this.showInkTool(!0,16,16):this.showInkTool(!1,16,16),this.showSeparatorInMobile()}},e.prototype.showStickyNoteToolInMobile=function(e){this.isCommentBtnVisible=e,this.applyHideToToolbar(e,0,0)},e.prototype.showSeparatorInMobile=function(){this.isCommentBtnVisible||this.applyHideToToolbar(!1,1,1),this.isHighlightBtnVisible||this.isUnderlineBtnVisible||this.isStrikethroughBtnVisible||this.applyHideToToolbar(!1,5,5),this.isShapeBtnVisible||this.applyHideToToolbar(!1,7,7),this.isCalibrateBtnVisible||this.applyHideToToolbar(!1,9,9),this.isFreeTextBtnVisible||this.applyHideToToolbar(!1,11,11),this.isStampBtnVisible||this.applyHideToToolbar(!1,13,13),this.isSignatureBtnVisible||this.applyHideToToolbar(!1,15,15),this.isInkBtnVisible||this.applyHideToToolbar(!1,17,17)},e.prototype.showInkAnnotationTool=function(){-1!==this.pdfViewer.toolbarSettings.annotationToolbarItems.indexOf("InkAnnotationTool")?this.showInkTool(!0,14,14):this.showInkTool(!1,14,14)},e.prototype.showSeparator=function(){this.isHighlightBtnVisible||this.isUnderlineBtnVisible||this.isStrikethroughBtnVisible||this.applyHideToToolbar(!1,3,3),this.isShapeBtnVisible||this.applyHideToToolbar(!1,5,5),this.isCalibrateBtnVisible||this.applyHideToToolbar(!1,7,7),this.isFreeTextBtnVisible||this.applyHideToToolbar(!1,9,9),this.isStampBtnVisible||this.applyHideToToolbar(!1,11,11),this.isSignatureBtnVisible||this.applyHideToToolbar(!1,13,13),this.isInkBtnVisible||this.applyHideToToolbar(!1,15,15),this.isFontFamilyToolVisible||this.isFontSizeToolVisible||this.isFontColorToolVisible||this.isFontAlignToolVisible||this.isFontStylesToolVisible||this.applyHideToToolbar(!1,21,21),(this.isColorToolVisible||this.isStrokeColorToolVisible||this.isThicknessToolVisible||this.isOpacityToolVisible)&&this.isDeleteAnnotationToolVisible||this.applyHideToToolbar(!1,26,26)},e.prototype.showHighlightTool=function(e,t,i){this.isHighlightBtnVisible=e,this.applyHideToToolbar(e,t,i)},e.prototype.showUnderlineTool=function(e,t,i){this.isUnderlineBtnVisible=e,this.applyHideToToolbar(e,t,i)},e.prototype.showStrikethroughTool=function(e,t,i){this.isStrikethroughBtnVisible=e,this.applyHideToToolbar(e,t,i)},e.prototype.showShapeAnnotationTool=function(e,t,i){this.isShapeBtnVisible=e,this.applyHideToToolbar(e,t,i)},e.prototype.showCalibrateAnnotationTool=function(e,t,i){this.isCalibrateBtnVisible=e,this.applyHideToToolbar(e,t,i)},e.prototype.showFreeTextAnnotationTool=function(e,t,i){this.isFreeTextBtnVisible=e,this.applyHideToToolbar(e,t,i)},e.prototype.showStampAnnotationTool=function(e,t,i){this.isStampBtnVisible=e,this.applyHideToToolbar(e,t,i)},e.prototype.showSignatureTool=function(e,t,i){this.isSignatureBtnVisible=e,this.applyHideToToolbar(e,t,i)},e.prototype.showInkTool=function(e,t,i){this.isInkBtnVisible=e,this.applyHideToToolbar(e,t,i)},e.prototype.showFontFamilyAnnotationTool=function(e,t,i){this.isFontFamilyToolVisible=e,this.applyHideToToolbar(e,t,i)},e.prototype.showFontSizeAnnotationTool=function(e,t,i){this.isFontSizeToolVisible=e,this.applyHideToToolbar(e,t,i)},e.prototype.showFontAlignAnnotationTool=function(e,t,i){this.isFontAlignToolVisible=e,this.applyHideToToolbar(e,t,i)},e.prototype.showFontColorAnnotationTool=function(e,t,i){this.isFontColorToolVisible=e,this.applyHideToToolbar(e,t,i)},e.prototype.showFontStylesAnnotationTool=function(e,t,i){this.isFontStylesToolVisible=e,this.applyHideToToolbar(e,t,i)},e.prototype.showColorEditTool=function(e,t,i){this.isColorToolVisible=e,this.applyHideToToolbar(e,t,i)},e.prototype.showStrokeColorEditTool=function(e,t,i){this.isStrokeColorToolVisible=e,this.applyHideToToolbar(e,t,i)},e.prototype.showThicknessEditTool=function(e,t,i){this.isThicknessToolVisible=e,this.applyHideToToolbar(e,t,i)},e.prototype.showOpacityEditTool=function(e,t,i){this.isOpacityToolVisible=e,this.applyHideToToolbar(e,t,i)},e.prototype.showAnnotationDeleteTool=function(e,t,i){this.isDeleteAnnotationToolVisible=e,this.applyHideToToolbar(e,t,i)},e.prototype.showCommentPanelTool=function(e,t,i){this.isCommentPanelBtnVisible=e,this.applyHideToToolbar(e,t,i)},e.prototype.applyHideToToolbar=function(e,t,i){for(var n=!e,o=t;o<=i;o++){var s=void 0,a=this.propertyToolbar&&this.propertyToolbar.element?this.propertyToolbar.element:null,r=this.toolbar&&this.toolbar.element?this.toolbar.element:null;if(r&&r.children&&r.children.length>0?s=this.toolbar:ge.isDevice&&a&&a.children&&a.children.length>0&&(s=this.propertyToolbar),s&&s.items[o]){var l=s.items[o].cssClass;if(l&&""!==l){var d=s.element.querySelector("."+l);d&&this.toolbar.hideItem(d,n)}else s.hideItem(o,n)}}},e.prototype.adjustViewer=function(e){var t,i,n;if(S()){t=this.pdfViewer.element.querySelector(".e-pv-sidebar-toolbar-splitter"),i=this.pdfViewer.element.querySelector(".e-pv-toolbar");var o=this.pdfViewer.element.querySelector(".e-pv-annotation-toolbar");n=this.getToolbarHeight(o)}else t=this.pdfViewerBase.getElement("_sideBarToolbarSplitter"),i=this.pdfViewerBase.getElement("_toolbarContainer"),n=this.getToolbarHeight(this.toolbarElement);var s=this.getToolbarHeight(i),a=this.pdfViewerBase.navigationPane.sideBarToolbar,r=this.pdfViewerBase.navigationPane.sideBarContentContainer,l=this.pdfViewerBase.navigationPane.commentPanelContainer,d=this.pdfViewerBase.navigationPane.commentPanelResizer,h="";e?(this.pdfViewer.enableToolbar?(a.style.top=s+n+"px",r.style.top=s+n+"px",t.style.top=s+n+"px",l.style.top=s+n+"px",d.style.top=s+n+"px"):(a.style.top=n+"px",r.style.top=n+"px",t.style.top=n+"px",l.style.top=n+"px",d.style.top=s+n+"px"),this.pdfViewer.enableToolbar||(s=0),this.pdfViewerBase.viewerContainer.style.height=this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),n+s)+"px",h=this.getNavigationToolbarHeight(n+s),a.style.height=h,t.style.height=h,d.style.height=h,r.style.height=h):(this.pdfViewer.enableToolbar?(a.style.top=s+"px",r.style.top=s+"px",t.style.top=s+"px",l.style.top=s+"px",d.style.top=s+"px"):(a.style.top="1px",a.style.height="100%",r.style.top="1px",r.style.height="100%",t.style.top="1px",t.style.height="100%",l.style.top="1px",l.style.height="100%",d.style.top="1px",d.style.height="100%"),this.pdfViewer.enableToolbar||(s=0),this.pdfViewerBase.viewerContainer.style.height=this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),n)+"px",h=this.getNavigationToolbarHeight(s),a.style.height=h,t.style.height=h,d.style.height=h,r.style.height=h,"0px"===this.pdfViewerBase.viewerContainer.style.height&&(this.pdfViewerBase.viewerContainer.style.height=parseInt(this.pdfViewer.element.style.height)-parseInt(a.style.top)+"px"))},e.prototype.updateContentContainerHeight=function(e,t){var i;if(t){var n=this.pdfViewer.element.querySelector(".e-pv-annotation-toolbar");i=this.getToolbarHeight(n)}else i=this.getToolbarHeight(this.toolbarElement);var o=this.pdfViewerBase.navigationPane.sideBarContentContainer.getBoundingClientRect();0!==o.height&&(this.pdfViewerBase.navigationPane.sideBarContentContainer.style.height=e?o.height-i+"px":o.height+i+"px")},e.prototype.getToolbarHeight=function(e){var t=e.getBoundingClientRect().height;return 0===t&&e===this.pdfViewerBase.getElement("_toolbarContainer")&&(t=parseFloat(window.getComputedStyle(e).height)+this.toolbarBorderHeight),t},e.prototype.getNavigationToolbarHeight=function(e){var t=this.pdfViewer.element.getBoundingClientRect().height;return 0!==t?t-e+"px":""},e.prototype.handleHighlight=function(){this.isHighlightEnabled?this.deselectAllItems():(this.updateInteractionTools(),this.clearShapeMode(),this.clearMeasureMode(),this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations("Highlight"),this.primaryToolbar.selectItem(this.highlightItem),this.primaryToolbar.deSelectItem(this.underlineItem),this.primaryToolbar.deSelectItem(this.strikethroughItem),this.primaryToolbar.deSelectItem(this.freeTextEditItem),this.primaryToolbar.deSelectItem(this.inkAnnotationItem),this.enableTextMarkupAnnotationPropertiesTools(!0),this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor=null,this.setCurrentColorInPicker(),this.updateColorInIcon(this.colorDropDownElement,this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor),this.isHighlightEnabled=!0,this.isUnderlineEnabled=!1,this.isStrikethroughEnabled=!1)},e.prototype.handleUnderline=function(){this.isUnderlineEnabled?this.deselectAllItems():(this.updateInteractionTools(),this.clearShapeMode(),this.clearMeasureMode(),this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations("Underline"),this.primaryToolbar.selectItem(this.underlineItem),this.primaryToolbar.deSelectItem(this.highlightItem),this.primaryToolbar.deSelectItem(this.strikethroughItem),this.primaryToolbar.deSelectItem(this.freeTextEditItem),this.primaryToolbar.deSelectItem(this.inkAnnotationItem),this.enableTextMarkupAnnotationPropertiesTools(!0),this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor=null,this.setCurrentColorInPicker(),this.updateColorInIcon(this.colorDropDownElement,this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor),this.isUnderlineEnabled=!0,this.isHighlightEnabled=!1,this.isStrikethroughEnabled=!1)},e.prototype.handleStrikethrough=function(){this.isStrikethroughEnabled?this.deselectAllItems():(this.updateInteractionTools(),this.clearShapeMode(),this.clearMeasureMode(),this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations("Strikethrough"),this.primaryToolbar.selectItem(this.strikethroughItem),this.primaryToolbar.deSelectItem(this.highlightItem),this.primaryToolbar.deSelectItem(this.underlineItem),this.primaryToolbar.deSelectItem(this.freeTextEditItem),this.primaryToolbar.deSelectItem(this.inkAnnotationItem),this.enableTextMarkupAnnotationPropertiesTools(!0),this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor=null,this.setCurrentColorInPicker(),this.updateColorInIcon(this.colorDropDownElement,this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor),this.isStrikethroughEnabled=!0,this.isHighlightEnabled=!1,this.isUnderlineEnabled=!1)},e.prototype.deselectAllItemsInBlazor=function(){this.pdfViewerBase.isTextMarkupAnnotationModule()&&(this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1,this.pdfViewer.annotationModule.textMarkupAnnotationModule.showHideDropletDiv(!0)),ge.isDevice&&!this.pdfViewer.enableDesktopMode||(this.primaryToolbar.deSelectItem(this.HighlightElement),this.primaryToolbar.deSelectItem(this.UnderlineElement),this.primaryToolbar.deSelectItem(this.StrikethroughElement),this.primaryToolbar.deSelectItem(this.FreeTextElement),this.primaryToolbar.deSelectItem(this.InkAnnotationElement),this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateTextMarkupButtons",!1,!1,!1)),this.resetFreeTextAnnot(),this.clearTextMarkupMode(),this.clearShapeMode(),this.clearMeasureMode(),this.pdfViewer.tool="",ge.isDevice&&!this.pdfViewer.enableDesktopMode||(this.enableTextMarkupAnnotationPropertiesTools(!1),this.enableFreeTextAnnotationPropertiesTools(!1),this.updateColorInIcon(this.colorDropDownElement,"#000000"),this.updateColorInIcon(this.strokeDropDownElement,"#000000"),this.updateColorInIcon(this.fontColorElement,"#000000"),this.selectAnnotationDeleteItem(!1)),this.pdfViewer.annotationModule&&(this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot=!1)},e.prototype.deselectAllItems=function(){var e=S();this.isHighlightEnabled=!1,this.isUnderlineEnabled=!1,this.isStrikethroughEnabled=!1,this.pdfViewerBase.isTextMarkupAnnotationModule()&&(this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1,this.pdfViewer.annotationModule.textMarkupAnnotationModule.showHideDropletDiv(!0)),ge.isDevice&&!this.pdfViewer.enableDesktopMode||(e?(this.primaryToolbar.deSelectItem(this.pdfViewer.toolbar.SelectToolElement),this.primaryToolbar.selectItem(this.pdfViewer.toolbar.PanElement),this.primaryToolbar.deSelectItem(this.HighlightElement),this.primaryToolbar.deSelectItem(this.UnderlineElement),this.primaryToolbar.deSelectItem(this.StrikethroughElement),this.primaryToolbar.deSelectItem(this.FreeTextElement),this.primaryToolbar.deSelectItem(this.InkAnnotationElement)):(this.primaryToolbar.deSelectItem(this.highlightItem),this.primaryToolbar.deSelectItem(this.underlineItem),this.primaryToolbar.deSelectItem(this.strikethroughItem),this.primaryToolbar.deSelectItem(this.freeTextEditItem),this.primaryToolbar.deSelectItem(this.inkAnnotationItem))),this.resetFreeTextAnnot(),this.clearTextMarkupMode(),this.clearShapeMode(),this.clearMeasureMode(),this.pdfViewer.tool="",ge.isDevice&&!this.pdfViewer.enableDesktopMode||(this.enableTextMarkupAnnotationPropertiesTools(!1),this.enableFreeTextAnnotationPropertiesTools(!1),this.updateColorInIcon(this.colorDropDownElement,"#000000"),this.updateColorInIcon(this.strokeDropDownElement,"#000000"),this.updateColorInIcon(this.fontColorElement,"#000000"),this.selectAnnotationDeleteItem(!1)),this.pdfViewer.annotationModule&&(this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot=!1)},e.prototype.updateInteractionTools=function(){this.pdfViewer.enableTextSelection?(this.pdfViewerBase.initiateTextSelectMode(),ge.isDevice||this.pdfViewer.toolbar.updateInteractionTools(!0)):ge.isDevice||this.pdfViewer.toolbar.updateInteractionTools(!1)},e.prototype.selectAnnotationDeleteItem=function(e,t){if(S()||ge.isDevice){if(!ge.isDevice||this.pdfViewer.enableDesktopMode){var i;if(e)(i=this.pdfViewer.annotationModule.findCurrentAnnotation())&&(i.annotationSettings&&i.annotationSettings.isLock?this.pdfViewer.annotationModule.checkAllowedInteractions("Delete",i)?this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(e):this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(!1):this.pdfViewerBase.blazorUIAdaptor&&this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(e));else this.pdfViewerBase.blazorUIAdaptor&&this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(e);t&&this.pdfViewerBase.focusViewerContainer()}}else this.toolbar&&(e?(i=this.pdfViewer.annotationModule.findCurrentAnnotation())&&(i.annotationSettings&&i.annotationSettings.isLock?this.pdfViewer.annotationModule.checkAllowedInteractions("Delete",i)?this.toolbar.enableItems(this.deleteItem.parentElement,e):this.toolbar.enableItems(this.deleteItem.parentElement,!1):this.toolbar.enableItems(this.deleteItem.parentElement,e)):this.toolbar.enableItems(this.deleteItem.parentElement,e))},e.prototype.enableTextMarkupAnnotationPropertiesTools=function(e){ge.isDevice||(S()?this.pdfViewerBase.blazorUIAdaptor.enableTextMarkupAnnotationPropertiesTools(e):(this.toolbar.enableItems(this.colorDropDownElement.parentElement,e),this.toolbar.enableItems(this.opacityDropDownElement.parentElement,e),ge.isDevice&&!this.pdfViewer.enableDesktopMode||(this.toolbar.enableItems(this.strokeDropDownElement.parentElement,!1),this.toolbar.enableItems(this.thicknessElement.parentElement,!1),this.toolbar.enableItems(this.fontFamilyElement.parentElement,!1),this.toolbar.enableItems(this.fontSizeElement.parentElement,!1),this.toolbar.enableItems(this.fontColorElement.parentElement,!1),this.toolbar.enableItems(this.textAlignElement.parentElement,!1),this.toolbar.enableItems(this.textPropElement.parentElement,!1))))},e.prototype.checkAnnotationPropertiesChange=function(){var e=this.pdfViewer.selectedItems.annotations[0];if(e&&e.annotationSettings&&e.annotationSettings.isLock)return!!this.pdfViewer.annotationModule.checkAllowedInteractions("PropertyChange",e);return!0},e.prototype.enableAnnotationPropertiesTools=function(e){if(!ge.isDevice){var t=this.checkAnnotationPropertiesChange();e||(t=!0),S()?this.pdfViewerBase.blazorUIAdaptor.enableAnnotationPropertiesTool(e,t):t&&(this.pdfViewer.selectedItems.annotations[0]&&"Line"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?this.toolbar.enableItems(this.colorDropDownElement.parentElement,!1):this.toolbar.enableItems(this.colorDropDownElement.parentElement,e),this.toolbar.enableItems(this.opacityDropDownElement.parentElement,e),this.toolbar.enableItems(this.strokeDropDownElement.parentElement,e),this.toolbar.enableItems(this.thicknessElement.parentElement,e),this.pdfViewer.enableShapeLabel&&(this.toolbar.enableItems(this.fontFamilyElement.parentElement,e),this.toolbar.enableItems(this.fontSizeElement.parentElement,e),this.toolbar.enableItems(this.fontColorElement.parentElement,e)),this.toolbar.enableItems(this.textAlignElement.parentElement,!1),this.toolbar.enableItems(this.textPropElement.parentElement,!1))}},e.prototype.enableSignaturePropertiesTools=function(e){if(!ge.isDevice){var t=this.checkAnnotationPropertiesChange();e||(t=!0),S()?this.pdfViewerBase.blazorUIAdaptor.enableSignaturePropertiesTools(e,t):t&&(this.toolbar.enableItems(this.colorDropDownElement.parentElement,!1),this.toolbar.enableItems(this.opacityDropDownElement.parentElement,e),this.toolbar.enableItems(this.strokeDropDownElement.parentElement,e),this.toolbar.enableItems(this.thicknessElement.parentElement,e),this.toolbar.enableItems(this.textAlignElement.parentElement,!1),this.toolbar.enableItems(this.textPropElement.parentElement,!1),this.toolbar.enableItems(this.fontFamilyElement.parentElement,!1),this.toolbar.enableItems(this.fontSizeElement.parentElement,!1),this.toolbar.enableItems(this.fontColorElement.parentElement,!1),this.toolbar.enableItems(this.textAlignElement.parentElement,!1))}},e.prototype.enableStampAnnotationPropertiesTools=function(e){var t=this.checkAnnotationPropertiesChange();e||(t=!0),S()?this.pdfViewerBase.blazorUIAdaptor.enableStampAnnotationPropertiesTools(e,t):t&&(this.toolbar.enableItems(this.opacityDropDownElement.parentElement,e),this.toolbar.enableItems(this.colorDropDownElement.parentElement,!1),this.toolbar.enableItems(this.strokeDropDownElement.parentElement,!1),this.toolbar.enableItems(this.thicknessElement.parentElement,!1),this.toolbar.enableItems(this.fontFamilyElement.parentElement,!1),this.toolbar.enableItems(this.fontSizeElement.parentElement,!1),this.toolbar.enableItems(this.fontColorElement.parentElement,!1),this.toolbar.enableItems(this.textAlignElement.parentElement,!1),this.toolbar.enableItems(this.textPropElement.parentElement,!1))},e.prototype.enableFreeTextAnnotationPropertiesTools=function(e){var t=this.checkAnnotationPropertiesChange();e||(t=!0),S()?this.pdfViewerBase.blazorUIAdaptor.enableFreeTextAnnotationPropertiesTools(e,t):t&&(this.toolbar.enableItems(this.opacityDropDownElement.parentElement,e),this.toolbar.enableItems(this.colorDropDownElement.parentElement,e),this.toolbar.enableItems(this.strokeDropDownElement.parentElement,e),this.toolbar.enableItems(this.thicknessElement.parentElement,e),this.toolbar.enableItems(this.fontFamilyElement.parentElement,e),this.toolbar.enableItems(this.fontSizeElement.parentElement,e),this.toolbar.enableItems(this.fontColorElement.parentElement,e),this.toolbar.enableItems(this.textAlignElement.parentElement,e),this.toolbar.enableItems(this.textPropElement.parentElement,e))},e.prototype.enableAnnotationAddTools=function(e){this.toolbar&&!ge.isDevice&&(this.pdfViewer.enableTextMarkupAnnotation&&(this.toolbar.enableItems(this.highlightItem.parentElement,e),this.toolbar.enableItems(this.underlineItem.parentElement,e),this.toolbar.enableItems(this.strikethroughItem.parentElement,e)),this.pdfViewer.enableShapeAnnotation&&this.toolbar.enableItems(this.shapeElement.parentElement,e),this.pdfViewer.enableStampAnnotations&&this.toolbar.enableItems(this.stampElement.parentElement,e),this.pdfViewer.enableMeasureAnnotation&&this.pdfViewerBase.isCalibrateAnnotationModule()&&this.toolbar.enableItems(this.calibrateElement.parentElement,e),this.pdfViewer.enableFreeText&&this.toolbar.enableItems(this.freeTextEditItem.parentElement,e),this.pdfViewer.enableHandwrittenSignature&&this.toolbar.enableItems(this.handWrittenSignatureItem.parentElement,e),this.pdfViewer.enableInkAnnotation&&this.toolbar.enableItems(this.inkAnnotationItem.parentElement,e),this.pdfViewer.enableCommentPanel&&this.enableCommentPanelTool(e))},e.prototype.isAnnotationButtonsEnabled=function(){var e=!1;return(this.isHighlightEnabled||this.isUnderlineEnabled||this.isStrikethroughEnabled)&&(e=!0),e},e.prototype.enableCommentPanelTool=function(e){this.toolbar&&this.toolbar.enableItems(this.commentItem.parentElement,e)},e.prototype.updateToolbarItems=function(){this.pdfViewer.enableTextMarkupAnnotation?this.enableTextMarkupAddTools(!0):this.enableTextMarkupAddTools(!1),this.toolbar.enableItems(this.shapeElement.parentElement,this.pdfViewer.enableShapeAnnotation),this.toolbar.enableItems(this.stampElement.parentElement,this.pdfViewer.enableStampAnnotations),this.toolbar.enableItems(this.calibrateElement.parentElement,this.pdfViewer.enableMeasureAnnotation),this.toolbar.enableItems(this.freeTextEditItem.parentElement,this.pdfViewer.enableFreeText),this.toolbar.enableItems(this.handWrittenSignatureItem.parentElement,this.pdfViewer.enableHandwrittenSignature),this.toolbar.enableItems(this.inkAnnotationItem.parentElement,this.pdfViewer.enableInkAnnotation)},e.prototype.enableTextMarkupAddTools=function(e){this.toolbar.enableItems(this.highlightItem.parentElement,e),this.toolbar.enableItems(this.underlineItem.parentElement,e),this.toolbar.enableItems(this.strikethroughItem.parentElement,e)},e.prototype.updateAnnnotationPropertyItems=function(){S()?(this.colorDropDownElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-color-container"),this.strokeDropDownElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-stroke-container"),this.fontColorElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-textcolor-container"),1===this.pdfViewer.selectedItems.annotations.length?(this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElementInBlazor,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill,"fillColor")),this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElementInBlazor,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor,"strokeColor")),"FreeText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElementInBlazor,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].fontColor,"fontColor")),this.pdfViewerBase.blazorUIAdaptor.updateFontFamilyInIcon(this.pdfViewer.selectedItems.annotations[0].fontFamily),this.pdfViewerBase.blazorUIAdaptor.updateFontSizeInIcon(this.pdfViewer.selectedItems.annotations[0].fontSize))):(this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElementInBlazor,"#000000"),this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElementInBlazor,"#000000"),this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElementInBlazor,"#000000"))):1===this.pdfViewer.selectedItems.annotations.length?(this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElement,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill,"fillColor")),this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElement,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor,"strokeColor")),"FreeText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElement,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].fontColor,"fontColor")),this.pdfViewer.toolbar.annotationToolbarModule.updateFontFamilyInIcon(this.pdfViewer.selectedItems.annotations[0].fontFamily),this.pdfViewer.toolbar.annotationToolbarModule.updateFontSizeInIcon(this.pdfViewer.selectedItems.annotations[0].fontSize),this.pdfViewer.toolbar.annotationToolbarModule.updateTextAlignInIcon(this.pdfViewer.selectedItems.annotations[0].textAlign))):(this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElement,"#000000"),this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElement,"#000000"),this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElement,"#000000"))},e.prototype.getColorHexValue=function(e,t){return"#ffffff00"===e&&(e="#ffffff"),"red"===e.toLowerCase()&&(e="#FF0000"),"transparent"!==e?S()?e:this.colorPalette.getValue(e,"hex"):"fontColor"===t||"strokeColor"===t?"#000000":"#ffffff"},e.prototype.setColorInPicker=function(e,t){e&&e.setProperties({value:t},!0)},e.prototype.resetToolbar=function(){this.adjustViewer(!1),this.updateToolbarItems(),(this.pdfViewer.isAnnotationToolbarOpen||this.pdfViewer.isAnnotationToolbarVisible)&&this.pdfViewer.enableAnnotationToolbar?(this.toolbarElement.style.display="",this.isToolbarHidden=!1,this.adjustViewer(!0),this.enableAnnotationAddTools(!1),this.pdfViewer.isAnnotationToolbarVisible=!0):(this.toolbarElement.style.display="none",this.isToolbarHidden=!0,this.pdfViewer.isAnnotationToolbarVisible=!1)},e.prototype.clearTextMarkupMode=function(){this.pdfViewerBase.isTextMarkupAnnotationModule()&&(S()&&(this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1),this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode="")},e.prototype.clearShapeMode=function(){this.pdfViewerBase.isShapeAnnotationModule()&&(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode="")},e.prototype.clearMeasureMode=function(){this.pdfViewerBase.isCalibrateAnnotationModule()&&(this.pdfViewer.annotation.measureAnnotationModule.currentAnnotationMode="")},e.prototype.clear=function(){this.deselectAllItems()},e.prototype.destroy=function(){this.destroyComponent(),this.shapeDropDown&&this.shapeDropDown.destroy(),this.calibrateDropDown&&this.calibrateDropDown.destroy(),this.fontColorDropDown&&this.fontColorDropDown.destroy(),this.textAlignDropDown&&this.textAlignDropDown.destroy(),this.colorDropDown&&this.colorDropDown.destroy(),this.strokeDropDown&&this.strokeDropDown.destroy(),this.thicknessDropDown&&this.thicknessDropDown.destroy(),this.opacityDropDown&&this.opacityDropDown.destroy(),this.textPropertiesDropDown&&this.textPropertiesDropDown.destroy(),this.toolbar&&this.toolbar.destroy();var e=document.getElementById(this.pdfViewer.element.id+"_stampElement");e&&e.parentElement.removeChild(e)},e.prototype.destroyComponent=function(){for(var e=[this.highlightItem,this.underlineItem,this.strikethroughItem,this.lineElement,this.arrowElement,this.rectangleElement,this.circleElement,this.polygonElement,this.calibrateDistance,this.calibrateArea,this.calibrateRadius,this.calibrateVolume,this.calibratePerimeter,this.freeTextEditItem,this.stampElement,this.handWrittenSignatureItem,this.inkAnnotationItem,this.fontFamilyElement,this.fontSizeElement,this.alignLeftElement,this.alignRightElement,this.alignCenterElement,this.alignJustifyElement,this.boldElement,this.italicElement,this.fontStyleStrikethroughItem,this.fontStyleUnderlineItem,this.deleteItem,this.commentItem,this.shapeDropDown?this.shapeDropDown.activeElem[0]:null,this.calibrateDropDown?this.calibrateDropDown.activeElem[0]:null,this.fontColorDropDown?this.fontColorDropDown.activeElem[0]:null,this.textAlignDropDown?this.textAlignDropDown.activeElem[0]:null,this.colorDropDown?this.colorDropDown.activeElem[0]:null,this.strokeDropDown?this.strokeDropDown.activeElem[0]:null,this.thicknessDropDown?this.thicknessDropDown.activeElem[0]:null,this.opacityDropDown?this.opacityDropDown.activeElem[0]:null,this.textPropertiesDropDown?this.textPropertiesDropDown.activeElem[0]:null],t=0;t<e.length;t++)e[t]&&this.destroyDependentComponent(e[t])},e.prototype.destroyDependentComponent=function(e){if(e.ej2_instances)for(var t=e.ej2_instances.length-1;t>=0;t--)e.ej2_instances[t].destroy()},e.prototype.getElementHeight=function(e){try{return e.getBoundingClientRect().height}catch(t){return 0}},e.prototype.updateViewerHeight=function(e,t){return this.getElementHeight(this.pdfViewer.element)-t},e.prototype.resetViewerHeight=function(e,t){return e+t},e.prototype.afterAnnotationToolbarCreationInBlazor=function(){this.HighlightElement=document.getElementById(this.pdfViewer.element.id+"_highLight").children[0],this.UnderlineElement=document.getElementById(this.pdfViewer.element.id+"_underline").children[0],this.StrikethroughElement=document.getElementById(this.pdfViewer.element.id+"_strikethrough").children[0],this.InkAnnotationElement=document.getElementById(this.pdfViewer.element.id+"_annotation_ink").children[0],this.InkAnnotationElement.classList.add("e-pv-tbar-btn"),this.FreeTextElement=document.getElementById(this.pdfViewer.element.id+"_annotation_freeTextEdit").children[0],this.HighlightElement=this.addClassToToolbarInBlazor(this.HighlightElement,"e-pv-highlight","_highLight"),this.UnderlineElement=this.addClassToToolbarInBlazor(this.UnderlineElement,"e-pv-underline","_underline"),this.StrikethroughElement=this.addClassToToolbarInBlazor(this.StrikethroughElement,"e-pv-strikethrough","_strikethrough")},e.prototype.addClassToToolbarInBlazor=function(e,t,i){if(e.classList.add(t),e.classList.add("e-pv-tbar-btn"),e.childNodes.length>0){var n=e.childNodes[0];n&&n.classList&&(n.id=this.pdfViewer.element.id+i+"Icon",n.classList.remove("e-icons"),n.classList.remove("e-btn-icon"),this.pdfViewer.enableRtl&&n.classList.add("e-right"))}return e},e.prototype.handleHighlightInBlazor=function(){this.HighlightElement.classList.contains("e-pv-select")?this.primaryToolbar.deSelectItem(this.HighlightElement):this.HighlightElement.classList.contains("e-pv-select")||this.primaryToolbar.selectItem(this.HighlightElement),this.StrikethroughElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.StrikethroughElement),this.UnderlineElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.UnderlineElement)},e.prototype.handleUnderlineInBlazor=function(){this.UnderlineElement.classList.contains("e-pv-select")?this.primaryToolbar.deSelectItem(this.UnderlineElement):this.UnderlineElement.classList.contains("e-pv-select")||this.primaryToolbar.selectItem(this.UnderlineElement),this.StrikethroughElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.StrikethroughElement),this.HighlightElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.HighlightElement)},e.prototype.handleStrikethroughInBlazor=function(){this.StrikethroughElement.classList.contains("e-pv-select")?this.primaryToolbar.deSelectItem(this.StrikethroughElement):this.StrikethroughElement.classList.contains("e-pv-select")||this.primaryToolbar.selectItem(this.StrikethroughElement),this.HighlightElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.HighlightElement),this.UnderlineElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.UnderlineElement)},e.prototype.AnnotationSliderOpened=function(){if(this.pdfViewer.selectedItems.annotations&&this.pdfViewer.selectedItems.annotations.length>0&&this.pdfViewer.selectedItems.annotations[0]&&this.pdfViewer.selectedItems.annotations[0].wrapper&&this.pdfViewer.selectedItems.annotations[0].wrapper.children[0]){var e=100*this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity,t=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth;this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateAnnotationSlider",e,t)}},e.prototype.DropDownOpened=function(e){if(e&&e[0].element){var t=e[0].element.getBoundingClientRect(),i=this.pdfViewerBase.navigationPane.sideBarToolbar,n=i?i.getBoundingClientRect().width:0;t.left>this.pdfViewerBase.viewerContainer.clientWidth+t.width+n&&(e[0].element.style.left=t.left-this.pdfViewerBase.viewerContainer.clientHeight/2+"px")}},e}(),Hg=function(){function e(e,t,i){this.isToolbarHidden=!1,this.isTextboxBtnVisible=!0,this.isPasswordBtnVisible=!0,this.isCheckboxBtnVisible=!0,this.isRadiobuttonBtnVisible=!0,this.isDropdownBtnVisible=!0,this.isListboxBtnVisible=!0,this.isSignatureBtnVisible=!0,this.isDeleteBtnVisible=!0,this.toolbarBorderHeight=1,this.pdfViewer=e,this.pdfViewerBase=t,this.primaryToolbar=i}return e.prototype.initializeFormDesignerToolbar=function(){var e=this;this.toolbarElement=we("div",{id:this.pdfViewer.element.id+"_formdesigner_toolbar",className:"e-pv-formdesigner-toolbar"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement),this.toolbar=new Dr({width:"",height:"",overflowMode:"Popup",items:this.createToolbarItems(),clicked:this.onToolbarClicked.bind(this),created:function(){e.createDropDowns()}}),this.pdfViewer.enableRtl&&(this.toolbar.enableRtl=!0),this.toolbar.appendTo(this.toolbarElement),this.afterToolbarCreation(),this.createSignContainer(),this.applyFormDesignerToolbarSettings(),this.showFormDesignerToolbar(null,!0)},e.prototype.resetFormDesignerToolbar=function(){this.adjustViewer(!1),this.pdfViewer.isFormDesignerToolbarVisible?(this.toolbarElement.style.display="",this.isToolbarHidden=!1,this.adjustViewer(!0),this.pdfViewer.isFormDesignerToolbarVisible=!0):(this.toolbarElement.style.display="none",this.isToolbarHidden=!0,this.pdfViewer.isFormDesignerToolbarVisible=!1)},e.prototype.showFormDesignerToolbar=function(e,t){if(this.isToolbarHidden){var i=this.toolbarElement.style.display;this.toolbarElement.style.display="block",this.pdfViewer.designerMode=!0,this.pdfViewer.formDesignerModule.setMode("designer"),t||(this.pdfViewer.isFormDesignerToolbarVisible=!0),e?this.primaryToolbar.selectItem(e):this.pdfViewer.enableToolbar&&this.primaryToolbar.selectItem(this.primaryToolbar.formDesignerItem),"none"===i&&this.adjustViewer(!0)}else{this.pdfViewer.formDesignerModule;e?this.primaryToolbar.deSelectItem(e):this.pdfViewer.enableToolbar&&this.primaryToolbar.deSelectItem(this.primaryToolbar.formDesignerItem),this.adjustViewer(!1),this.toolbarElement.style.display="none",this.pdfViewer.formDesignerModule.setMode("edit"),this.pdfViewer.designerMode=!1,t||(this.pdfViewer.isFormDesignerToolbarVisible=!1)}this.pdfViewer.magnification&&"fitToPage"===this.pdfViewer.magnification.fitType&&this.pdfViewer.magnification.fitToPage(),this.isToolbarHidden=!this.isToolbarHidden},e.prototype.adjustViewer=function(e){var t,i,n;if(S()){t=this.pdfViewer.element.querySelector(".e-pv-sidebar-toolbar-splitter"),i=this.pdfViewer.element.querySelector(".e-pv-toolbar");var o=this.pdfViewer.element.querySelector(".e-pv-formDesigner-toolbar");n=this.getToolbarHeight(o)}else t=this.pdfViewerBase.getElement("_sideBarToolbarSplitter"),i=this.pdfViewerBase.getElement("_toolbarContainer"),n=this.getToolbarHeight(this.toolbarElement);var s=this.getToolbarHeight(i),a=this.pdfViewerBase.navigationPane.sideBarToolbar,r=this.pdfViewerBase.navigationPane.sideBarContentContainer,l=this.pdfViewerBase.navigationPane.commentPanelContainer,d=this.pdfViewerBase.navigationPane.commentPanelResizer,h="";e?(this.pdfViewer.enableToolbar?(a.style.top=s+n+"px",r.style.top=s+n+"px",t.style.top=s+n+"px",l.style.top=s+n+"px",d.style.top=s+n+"px"):(a.style.top=n+"px",r.style.top=n+"px",t.style.top=n+"px",l.style.top=n+"px",d.style.top=s+n+"px"),this.pdfViewer.enableToolbar||(s=0),this.pdfViewerBase.viewerContainer.style.height=this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),n+s)+"px",h=this.getNavigationToolbarHeight(n+s),a.style.height=h,t.style.height=h,d.style.height=h,r.style.height=h):(this.pdfViewer.enableToolbar?(a.style.top=s+"px",r.style.top=s+"px",t.style.top=s+"px",l.style.top=s+"px",d.style.top=s+"px"):(a.style.top="1px",a.style.height="100%",r.style.top="1px",r.style.height="100%",t.style.top="1px",t.style.height="100%",l.style.top="1px",l.style.height="100%",d.style.top="1px",d.style.height="100%"),this.pdfViewer.enableToolbar||(s=0),this.pdfViewerBase.viewerContainer.style.height=this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),n)+"px",h=this.getNavigationToolbarHeight(s),a.style.height=h,t.style.height=h,d.style.height=h,r.style.height=h,"0px"===this.pdfViewerBase.viewerContainer.style.height&&(this.pdfViewerBase.viewerContainer.style.height=parseInt(this.pdfViewer.element.style.height)-parseInt(a.style.top)+"px"))},e.prototype.getElementHeight=function(e){try{return e.getBoundingClientRect().height}catch(t){return 0}},e.prototype.updateViewerHeight=function(e,t){return this.getElementHeight(this.pdfViewer.element)-t},e.prototype.resetViewerHeight=function(e,t){return e+t},e.prototype.getNavigationToolbarHeight=function(e){var t=this.pdfViewer.element.getBoundingClientRect().height;return 0!==t?t-e+"px":""},e.prototype.updateContentContainerHeight=function(e,t){var i;if(t){var n=this.pdfViewer.element.querySelector(".e-pv-formDesigner-toolbar");i=this.getToolbarHeight(n)}else i=this.getToolbarHeight(this.toolbarElement);var o=this.pdfViewerBase.navigationPane.sideBarContentContainer.getBoundingClientRect();0!==o.height&&(this.pdfViewerBase.navigationPane.sideBarContentContainer.style.height=e?o.height-i+"px":o.height+i+"px")},e.prototype.getToolbarHeight=function(e){var t=e.getBoundingClientRect().height;return 0===t&&e===this.pdfViewerBase.getElement("_toolbarContainer")&&(t=parseFloat(window.getComputedStyle(e).height)+this.toolbarBorderHeight),t},e.prototype.createToolbarItems=function(){var e=this.getTemplate("button","_formfield_signature","e-pv-annotation-handwritten-container"),t=[];return t.push({prefixIcon:"e-pv-textbox-icon e-pv-icon",className:"e-pv-annotation-shapes-container",id:this.pdfViewer.element.id+"_formdesigner_textbox",align:"Left"}),t.push({prefixIcon:"e-pv-password-icon e-pv-icon",className:"e-pv-annotation-shapes-container",id:this.pdfViewer.element.id+"_formdesigner_passwordfield",align:"Left"}),t.push({prefixIcon:"e-pv-checkbox-icon e-pv-icon",className:"e-pv-annotation-shapes-container",id:this.pdfViewer.element.id+"_formdesigner_checkbox",align:"Left"}),t.push({prefixIcon:"e-pv-radiobutton-icon e-pv-icon",className:"e-pv-annotation-shapes-container",id:this.pdfViewer.element.id+"_formdesigner_radiobutton",align:"Left"}),t.push({prefixIcon:"e-pv-dropdown-icon e-pv-icon",className:"e-pv-annotation-shapes-container",id:this.pdfViewer.element.id+"_formdesigner_dropdown",align:"Left"}),t.push({prefixIcon:"e-pv-listbox-icon e-pv-icon",className:"e-pv-annotation-shapes-container",id:this.pdfViewer.element.id+"_formdesigner_listbox",align:"Left"}),t.push({template:e,align:"Left"}),t.push({type:"Separator",align:"Left"}),t.push({prefixIcon:"e-pv-annotation-delete-icon e-pv-icon",className:"e-pv-annotation-delete-container",id:this.pdfViewer.element.id+"_formdesigner_delete",align:"Left"}),t.push({prefixIcon:"e-pv-annotation-tools-close-icon e-pv-icon",className:"e-pv-annotation-tools-close-container",id:this.pdfViewer.element.id+"_formdesigner_close",align:"Right"}),t},e.prototype.createSignContainer=function(){var e=this;this.handWrittenSignatureItem=this.pdfViewerBase.getElement("_formfield_signature"),this.primaryToolbar.createTooltip(this.pdfViewerBase.getElement("_formfield_signature"),this.pdfViewer.localeObj.getConstant("HandwrittenSignatureDialogHeaderText"));var t=new Yf({items:[{text:"ADD SIGNATURE"},{separator:!0},{text:"ADD INITIAL"}],iconCss:"e-pv-handwritten-icon e-pv-icon",cssClass:"e-pv-handwritten-popup",beforeItemRender:function(t){var i;(e.pdfViewer.clearSelection(e.pdfViewerBase.currentPageNumber-1),t.element&&-1!==t.element.className.indexOf("e-separator")&&(t.element.style.margin="8px 0",t.element.setAttribute("role","menuitem"),t.element.setAttribute("aria-label","separator")),"ADD SIGNATURE"===t.item.text)&&(t.element.innerHTML="",(i=we("button")).classList.add("e-control","e-btn","e-lib","e-outline","e-primary"),i.textContent=e.pdfViewer.localeObj.getConstant("SignatureFieldDialogHeaderText"),"en-US"===e.pdfViewer.locale?i.style.width="130px":i.style.width="auto",i.style.height="36px",i.addEventListener("click",e.clickSignature.bind(e)),t.element.appendChild(i),t.element.addEventListener("mouseover",e.hoverInitialBtn.bind(e)),t.element.style.width="206px",t.element.style.display="flex",t.element.style.flexDirection="column",t.element.style.height="auto",t.element.style.alignItems="center",t.element.setAttribute("role","menuitem"));"ADD INITIAL"===t.item.text&&(t.element.innerHTML="",(i=we("button")).classList.add("e-control","e-btn","e-lib","e-outline","e-primary"),i.textContent=e.pdfViewer.localeObj.getConstant("InitialFieldDialogHeaderText"),"en-US"===e.pdfViewer.locale?i.style.width="130px":i.style.width="auto",i.style.height="36px",i.addEventListener("click",e.clickInitial.bind(e)),t.element.appendChild(i),t.element.addEventListener("mouseover",e.hoverInitialBtn.bind(e)),t.element.style.width="206px",t.element.style.display="flex",t.element.style.flexDirection="column",t.element.style.height="auto",t.element.style.alignItems="center",t.element.setAttribute("role","menuitem"))}});this.pdfViewer.enableRtl&&(t.enableRtl=this.pdfViewer.enableRtl),t.appendTo(this.handWrittenSignatureItem)},e.prototype.hoverInitialBtn=function(e){var t=e.target,i=m(e.path)?e.composedPath()[0].id:e.path[0].id;if(i!=="sign_"+i.split("_")[1]&&i!=="delete_"+i.split("_")[1]){var n=document.getElementById(t.id);m(n)&&(n=document.getElementById(t.parentElement.id)),null==n||t.id==="sign_"+t.id.split("_")[1]&&t.id==="sign_border_"+t.id.split("_")[2]?null==n.parentElement||t.id==="sign_"+t.id.split("_")[1]&&t.id==="sign_border_"+t.id.split("_")[2]||(n.parentElement.style.background="transparent",n.parentElement.style.cursor="default"):(n.style.background="transparent",n.style.cursor="default")}},e.prototype.getTemplate=function(e,t,i){var n=we(e,{id:this.pdfViewer.element.id+t});return i&&(n.className=i),n.outerHTML},e.prototype.onToolbarClicked=function(e){e&&e.item&&(-1!==e.item.id.indexOf("textbox")?this.pdfViewer.formDesignerModule.setFormFieldMode("Textbox"):-1!==e.item.id.indexOf("passwordfield")?this.pdfViewer.formDesignerModule.setFormFieldMode("Password"):-1!==e.item.id.indexOf("checkbox")?this.pdfViewer.formDesignerModule.setFormFieldMode("CheckBox"):-1!==e.item.id.indexOf("radiobutton")?this.pdfViewer.formDesignerModule.setFormFieldMode("RadioButton"):-1!==e.item.id.indexOf("dropdown")?this.pdfViewer.formDesignerModule.setFormFieldMode("DropDown"):-1!==e.item.id.indexOf("listbox")?this.pdfViewer.formDesignerModule.setFormFieldMode("ListBox"):-1!==e.item.id.indexOf("signature")?this.pdfViewer.formDesignerModule.setFormFieldMode("SignatureField"):-1!==e.item.id.indexOf("close")?this.pdfViewer.toolbarModule.formDesignerToolbarModule.showFormDesignerToolbar(this.pdfViewer.toolbarModule.formDesignerItem):-1!==e.item.id.indexOf("delete")&&(this.pdfViewer.formDesignerModule.deleteFormField(this.pdfViewer.selectedItems.formFields[0]),this.showHideDeleteIcon(!1)),this.pdfViewer.selectedItems.formFields.length>0&&this.pdfViewer.clearSelection(this.pdfViewer.selectedItems.formFields[0].pageIndex))},e.prototype.clickSignature=function(e){this.pdfViewer.formDesignerModule.setFormFieldMode("SignatureField")},e.prototype.clickInitial=function(e){this.pdfViewer.isInitialFieldToolbarSelection=!0,this.pdfViewer.formDesignerModule.setFormFieldMode("InitialField"),this.pdfViewer.isInitialFieldToolbarSelection=!1},e.prototype.afterToolbarCreation=function(){this.textboxItem=this.primaryToolbar.addClassToolbarItem("_formdesigner_textbox","e-pv-formdesigner-textbox",this.pdfViewer.localeObj.getConstant("Textbox")),this.passwordItem=this.primaryToolbar.addClassToolbarItem("_formdesigner_passwordfield","e-pv-formdesigner-passwordfield",this.pdfViewer.localeObj.getConstant("Password")),this.checkboxItem=this.primaryToolbar.addClassToolbarItem("_formdesigner_checkbox","e-pv-formdesigner-checkbox",this.pdfViewer.localeObj.getConstant("Check Box")),this.radioButtonItem=this.primaryToolbar.addClassToolbarItem("_formdesigner_radiobutton","e-pv-formdesigner-radiobutton",this.pdfViewer.localeObj.getConstant("Radio Button")),this.dropdownItem=this.primaryToolbar.addClassToolbarItem("_formdesigner_dropdown","e-pv-formdesigner-dropdown",this.pdfViewer.localeObj.getConstant("Dropdown")),this.listboxItem=this.primaryToolbar.addClassToolbarItem("_formdesigner_listbox","e-pv-formdesigner-listbox",this.pdfViewer.localeObj.getConstant("List Box")),this.deleteItem=this.primaryToolbar.addClassToolbarItem("_formdesigner_delete","e-pv-formdesigner-delete",this.pdfViewer.localeObj.getConstant("Delete FormField")),this.closeItem=this.primaryToolbar.addClassToolbarItem("_formdesigner_close","e-pv-annotation-tools-close",null),this.showHideDeleteIcon(!1)},e.prototype.showHideDeleteIcon=function(e){this.toolbar&&this.toolbar.enableItems(this.deleteItem.parentElement,e)},e.prototype.applyFormDesignerToolbarSettings=function(){this.pdfViewer.toolbarSettings.formDesignerToolbarItems&&(-1!==this.pdfViewer.toolbarSettings.formDesignerToolbarItems.indexOf("TextboxTool")?this.showTextboxTool(!0):this.showTextboxTool(!1),-1!==this.pdfViewer.toolbarSettings.formDesignerToolbarItems.indexOf("PasswordTool")?this.showPasswordTool(!0):this.showPasswordTool(!1),-1!==this.pdfViewer.toolbarSettings.formDesignerToolbarItems.indexOf("CheckBoxTool")?this.showCheckboxTool(!0):this.showCheckboxTool(!1),-1!==this.pdfViewer.toolbarSettings.formDesignerToolbarItems.indexOf("RadioButtonTool")?this.showRadioButtonTool(!0):this.showRadioButtonTool(!1),-1!==this.pdfViewer.toolbarSettings.formDesignerToolbarItems.indexOf("DropdownTool")?this.showDropdownTool(!0):this.showDropdownTool(!1),-1!==this.pdfViewer.toolbarSettings.formDesignerToolbarItems.indexOf("ListboxTool")?this.showListboxTool(!0):this.showListboxTool(!1),-1!==this.pdfViewer.toolbarSettings.formDesignerToolbarItems.indexOf("DrawSignatureTool")?this.showDrawSignatureTool(!0):this.showDrawSignatureTool(!1),-1!==this.pdfViewer.toolbarSettings.formDesignerToolbarItems.indexOf("DeleteTool")?this.showDeleteTool(!0):this.showDeleteTool(!1),this.showSeparator())},e.prototype.showTextboxTool=function(e){this.isTextboxBtnVisible=e,this.applyHideToToolbar(e,0,0)},e.prototype.showPasswordTool=function(e){this.isPasswordBtnVisible=e,this.applyHideToToolbar(e,1,1)},e.prototype.showCheckboxTool=function(e){this.isCheckboxBtnVisible=e,this.applyHideToToolbar(e,2,2)},e.prototype.showRadioButtonTool=function(e){this.isRadiobuttonBtnVisible=e,this.applyHideToToolbar(e,3,3)},e.prototype.showDropdownTool=function(e){this.isDropdownBtnVisible=e,this.applyHideToToolbar(e,4,4)},e.prototype.showListboxTool=function(e){this.isListboxBtnVisible=e,this.applyHideToToolbar(e,5,5)},e.prototype.showDrawSignatureTool=function(e){this.isSignatureBtnVisible=e,this.applyHideToToolbar(e,6,6)},e.prototype.showDeleteTool=function(e){this.isDeleteBtnVisible=e,this.applyHideToToolbar(e,8,8)},e.prototype.showSeparator=function(){this.isSignatureBtnVisible||this.isDeleteBtnVisible||this.applyHideToToolbar(!1,7,7)},e.prototype.applyHideToToolbar=function(e,t,i){for(var n=!e,o=t;o<=i;o++)this.toolbar.hideItem(o,n)},e.prototype.createDropDowns=function(){},e.prototype.destroy=function(){for(var e=[this.textboxItem,this.passwordItem,this.checkboxItem,this.radioButtonItem,this.listboxItem,this.dropdownItem,this.handWrittenSignatureItem,this.deleteItem],t=0;t<e.length;t++)e[t]&&this.destroyDependentComponent(e[t])},e.prototype.destroyDependentComponent=function(e){if(e.ej2_instances)for(var t=e.ej2_instances.length-1;t>=0;t--)e.ej2_instances[t].destroy()},e}(),Wg=function(){function e(e,t){var i=this;this.isPageNavigationToolDisabled=!1,this.isMagnificationToolDisabled=!1,this.isSelectionToolDisabled=!1,this.isScrollingToolDisabled=!1,this.isOpenBtnVisible=!0,this.isNavigationToolVisible=!0,this.isMagnificationToolVisible=!0,this.isSelectionBtnVisible=!0,this.isScrollingBtnVisible=!0,this.isDownloadBtnVisible=!0,this.isPrintBtnVisible=!0,this.isSearchBtnVisible=!0,this.isTextSearchBoxDisplayed=!1,this.isUndoRedoBtnsVisible=!0,this.isAnnotationEditBtnVisible=!0,this.isFormDesignerEditBtnVisible=!0,this.isCommentBtnVisible=!0,this.isSubmitbtnvisible=!0,this.onToolbarKeydown=function(e){var t=e.target.id;t!==i.pdfViewer.element.id+"_currentPageInput"&&t!==i.pdfViewer.element.id+"_zoomDropDown"&&(e.preventDefault(),e.stopPropagation())},this.toolbarClickHandler=function(e){if(!ge.isDevice||i.pdfViewer.enableDesktopMode)if(e.originalEvent.target===i.zoomDropdownItem.parentElement.childNodes[1]||e.originalEvent.target===i.zoomDropdownItem.parentElement.childNodes[2])e.cancel=!0;else if(e.originalEvent.target.id===i.pdfViewer.element.id+"_openIcon"){var t=e.originalEvent.target.parentElement.dataset;if(t&&t.tooltipId){var n=document.getElementById(t.tooltipId);n&&(n.style.display="none")}}i.handleToolbarBtnClick(e);var o=e.originalEvent.target;!ge.isDevice||i.pdfViewer.enableDesktopMode?e.originalEvent.target!==i.zoomDropdownItem.parentElement.childNodes[1]&&e.originalEvent.target!==i.zoomDropdownItem.parentElement.childNodes[2]&&e.originalEvent.target!==i.currentPageBoxElement&&e.originalEvent.target!==i.textSearchItem.childNodes[0]&&o.parentElement.id!==i.pdfViewer.element.id+"_toolbarContainer_nav"&&o.id!==i.pdfViewer.element.id+"_toolbarContainer_nav"&&(e.originalEvent.target.blur(),i.pdfViewerBase.focusViewerContainer()):(e.originalEvent.target.blur(),i.pdfViewerBase.focusViewerContainer())},this.loadDocument=function(e){var t=e.target.files;if(null!==e.target.files[0]){var n=t[0];if(n){i.uploadedDocumentName=n.name;var o=new FileReader;o.readAsDataURL(n),o.onload=function(e){var t=e.currentTarget.result;S()?i.pdfViewer._dotnetInstance.invokeMethodAsync("LoadDocumentFromClient",t):i.pdfViewer.load(t,null)}}}},this.navigateToPage=function(e){if(13===e.which){var t=parseInt(i.currentPageBoxElement.value);null!==t&&t>0&&t<=i.pdfViewerBase.pageCount?i.pdfViewer.navigationModule&&i.pdfViewer.navigationModule.goToPage(t):i.updateCurrentPage(i.pdfViewerBase.currentPageNumber),i.currentPageBoxElement.blur(),i.pdfViewerBase.focusViewerContainer()}},this.textBoxFocusOut=function(){(null===i.currentPageBox.value||i.currentPageBox.value>=i.pdfViewerBase.pageCount||i.currentPageBox.value!==i.pdfViewerBase.currentPageNumber)&&i.updateCurrentPage(i.pdfViewerBase.currentPageNumber)},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.intializeToolbar=function(e){var t;return S()?ge.isDevice&&!this.pdfViewer.enableDesktopMode||(t=this.pdfViewer.element.querySelector(".e-pv-toolbar"),this.toolbarElement=t):t=this.createToolbar(e),!!document.documentMode&&(S()?this.pdfViewerBase.blazorUIAdaptor.totalPageElement.classList.add("e-pv-total-page-ms"):ge.isDevice||this.totalPageItem.classList.add("e-pv-total-page-ms")),this.createFileElement(t),this.wireEvent(),S()?(ge.isDevice&&!this.pdfViewer.enableDesktopMode||(this.initialEnableItems(),this.pdfViewerBase.navigationPane.adjustPane(),this.pdfViewer.enableToolbar&&this.bindOpenIconEvent()),this.PanElement=document.getElementById(this.pdfViewer.element.id+"_handTool").children[0],this.PanElement.classList.add("e-pv-tbar-btn"),this.SelectToolElement=document.getElementById(this.pdfViewer.element.id+"_selectTool").children[0],this.SelectToolElement.classList.add("e-pv-tbar-btn"),this.CommentElement=document.getElementById(this.pdfViewer.element.id+"_comment").children[0],this.CommentElement.classList.add("e-pv-tbar-btn"),this.annotationToolbarModule=new _g(this.pdfViewer,this.pdfViewerBase,this),(this.pdfViewer.enableToolbar&&this.pdfViewer.enableAnnotationToolbar||this.pdfViewer.enableDesktopMode&&ge.isDevice)&&this.annotationToolbarModule.afterAnnotationToolbarCreationInBlazor()):(this.updateToolbarItems(),!ge.isDevice||this.pdfViewer.enableDesktopMode?(this.applyToolbarSettings(),this.initialEnableItems(),this.pdfViewerBase.navigationPane.adjustPane()):this.initialEnableItems(),this.pdfViewer.annotationModule&&(this.annotationToolbarModule=new _g(this.pdfViewer,this.pdfViewerBase,this),ge.isDevice&&!this.pdfViewer.enableDesktopMode||this.annotationToolbarModule.initializeAnnotationToolbar()),this.pdfViewer.formDesignerModule&&(this.formDesignerToolbarModule=new Hg(this.pdfViewer,this.pdfViewerBase,this),ge.isDevice&&!this.pdfViewer.enableDesktopMode||this.formDesignerToolbarModule.initializeFormDesignerToolbar())),t},e.prototype.bindOpenIconEvent=function(){var e=document.getElementById(this.pdfViewer.element.id+"_open");e&&e.addEventListener("click",this.openFileDialogBox.bind(this))},e.prototype.InitializeMobileToolbarInBlazor=function(){var e;e=this.pdfViewer.element.querySelector(".e-pv-mobile-toolbar"),this.createFileElement(e),this.wireEvent()},e.prototype.showToolbar=function(e){var t=this.toolbarElement;e?(t.style.display="block",ge.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule.hideMobileAnnotationToolbar()):(this.pdfViewerBase.toolbarHeight=0,e&&(ge.isDevice&&this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar&&(this.annotationToolbarModule.toolbarCreated=!1,this.annotationToolbarModule.adjustMobileViewer(),this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar.element.style.display="none"),ge.isDevice&&this.annotationToolbarModule.propertyToolbar&&(this.annotationToolbarModule.propertyToolbar.element.style.display="none")),t.style.display="none")},e.prototype.showNavigationToolbar=function(e){if(!ge.isDevice||this.pdfViewer.enableDesktopMode){var t=this.pdfViewerBase.navigationPane.sideBarToolbar,i=this.pdfViewerBase.navigationPane.sideBarToolbarSplitter;e?(t.style.display="block",i.style.display="block",(this.pdfViewerBase.navigationPane.isBookmarkOpen||this.pdfViewerBase.navigationPane.isThumbnailOpen)&&this.pdfViewerBase.navigationPane.clear()):(t.style.display="none",i.style.display="none",(this.pdfViewerBase.navigationPane.isBookmarkOpen||this.pdfViewerBase.navigationPane.isThumbnailOpen)&&this.pdfViewerBase.navigationPane.updateViewerContainerOnClose())}},e.prototype.showAnnotationToolbar=function(e){e?(this.annotationToolbarModule.isToolbarHidden=!0,this.annotationToolbarModule.showAnnotationToolbar()):(this.annotationToolbarModule.isToolbarHidden=!1,this.annotationToolbarModule.showAnnotationToolbar())},e.prototype.showToolbarItem=function(e,t){for(var i=0;i<e.length;i++)switch(e[i]){case"OpenOption":this.showOpenOption(t);break;case"PageNavigationTool":this.showPageNavigationTool(t);break;case"MagnificationTool":this.showMagnificationTool(t);break;case"SelectionTool":this.showSelectionTool(t);break;case"PanTool":this.showScrollingTool(t);break;case"DownloadOption":this.showDownloadOption(t);break;case"PrintOption":this.showPrintOption(t);break;case"SearchOption":this.showSearchOption(t);break;case"UndoRedoTool":this.showUndoRedoTool(t);break;case"AnnotationEditTool":this.showAnnotationEditTool(t);break;case"FormDesignerEditTool":this.showFormDesignerEditTool(t);break;case"CommentTool":this.showCommentOption(t);break;case"SubmitForm":this.showSubmitForm(t)}this.applyHideToToolbar(!0,1,1),this.applyHideToToolbar(!0,8,8),this.applyHideToToolbar(!0,12,12),this.applyHideToToolbar(!0,15,15),this.showSeparator(e)},e.prototype.enableToolbarItem=function(e,t){for(var i=0;i<e.length;i++)switch(e[i]){case"OpenOption":this.enableOpenOption(t);break;case"PageNavigationTool":this.isPageNavigationToolDisabled=t,this.enablePageNavigationTool(t);break;case"MagnificationTool":this.isMagnificationToolDisabled=t,this.enableMagnificationTool(t);break;case"SelectionTool":this.isSelectionToolDisabled=t,this.enableSelectionTool(t);break;case"PanTool":this.isScrollingToolDisabled=t,this.enableScrollingTool(t);break;case"DownloadOption":this.enableDownloadOption(t);break;case"PrintOption":this.enablePrintOption(t);break;case"SearchOption":this.enableSearchOption(t);break;case"UndoRedoTool":this.enableUndoRedoTool(t);break;case"AnnotationEditTool":this.enableAnnotationEditTool(t);break;case"FormDesignerEditTool":this.enableFormDesignerEditTool(t);break;case"CommentTool":this.enableCommentsTool(t)}},e.prototype.DisableToolbarItems=function(e,t){switch(e){case"Print":this.enablePrintOption(t);break;case"CopyContent":this.isSelectionToolDisabled=t,this.enableSelectionTool(t),t?(this.pdfViewerBase.initiateTextSelectMode(),this.updateInteractionTools(t)):(this.pdfViewerBase.initiatePanning(),this.updateInteractionTools(t));break;case"EditAnnotations":this.enableAnnotationEditTool(t),this.annotationToolbarModule&&!this.annotationToolbarModule.isToolbarHidden&&this.annotationToolbarModule.showAnnotationToolbar()}},e.prototype.showOpenOption=function(e){this.isOpenBtnVisible=e,this.applyHideToToolbar(e,0,0)},e.prototype.showPageNavigationTool=function(e){this.isNavigationToolVisible=e,this.applyHideToToolbar(e,2,7)},e.prototype.showMagnificationTool=function(e){this.isMagnificationToolVisible=e,this.applyHideToToolbar(e,9,11)},e.prototype.showSelectionTool=function(e){this.isSelectionBtnVisible=e,this.applyHideToToolbar(e,13,13)},e.prototype.showScrollingTool=function(e){this.isScrollingBtnVisible=e,this.applyHideToToolbar(e,14,14)},e.prototype.showDownloadOption=function(e){this.isDownloadBtnVisible=e,!ge.isDevice||this.pdfViewer.enableDesktopMode?this.applyHideToToolbar(e,26,26):this.applyHideToToolbar(e,5,5)},e.prototype.showPrintOption=function(e){this.isPrintBtnVisible=e,this.applyHideToToolbar(e,25,25)},e.prototype.showSearchOption=function(e){this.isSearchBtnVisible=e,!ge.isDevice||this.pdfViewer.enableDesktopMode?this.applyHideToToolbar(e,22,22):this.applyHideToToolbar(e,5,5)},e.prototype.showUndoRedoTool=function(e){this.isUndoRedoBtnsVisible=e,!ge.isDevice||this.pdfViewer.enableDesktopMode?this.applyHideToToolbar(e,16,17):this.applyHideToToolbar(e,2,3)},e.prototype.showCommentOption=function(e){this.pdfViewer.enableStickyNotesAnnotation?(this.isCommentBtnVisible=e,this.applyHideToToolbar(e,18,19)):(this.isCommentBtnVisible=e,this.applyHideToToolbar(this.pdfViewer.enableStickyNotesAnnotation,18,19))},e.prototype.showAnnotationEditTool=function(e){this.isAnnotationEditBtnVisible=e,!ge.isDevice||this.pdfViewer.enableDesktopMode?this.applyHideToToolbar(e,23,23):this.applyHideToToolbar(e,4,4)},e.prototype.showFormDesignerEditTool=function(e){this.isFormDesignerEditBtnVisible=e,this.applyHideToToolbar(e,24,24)},e.prototype.showSubmitForm=function(e){this.isSubmitbtnvisible=e,this.applyHideToToolbar(e,20,21)},e.prototype.enableOpenOption=function(e){this.toolbar.enableItems(this.openDocumentItem.parentElement,e)},e.prototype.enablePageNavigationTool=function(e){this.toolbar.enableItems(this.firstPageItem.parentElement,e),this.toolbar.enableItems(this.previousPageItem.parentElement,e),this.toolbar.enableItems(this.nextPageItem.parentElement,e),this.toolbar.enableItems(this.lastPageItem.parentElement,e),this.currentPageBox.readonly=!e},e.prototype.enableMagnificationTool=function(e){this.toolbar.enableItems(this.zoomInItem.parentElement,e),this.toolbar.enableItems(this.zoomOutItem.parentElement,e),this.zoomDropDown.readonly=!e},e.prototype.enableSelectionTool=function(e){this.textSelectItem&&this.textSelectItem.parentElement&&this.toolbar.enableItems(this.textSelectItem.parentElement,e)},e.prototype.enableScrollingTool=function(e){this.toolbar.enableItems(this.panItem.parentElement,e)},e.prototype.enableDownloadOption=function(e){this.toolbar.enableItems(this.downloadItem.parentElement,e)},e.prototype.enablePrintOption=function(e){this.toolbar.enableItems(this.printItem.parentElement,e)},e.prototype.enableSearchOption=function(e){this.toolbar.enableItems(this.textSearchItem.parentElement,e)},e.prototype.enableUndoRedoTool=function(e){this.toolbar.enableItems(this.undoItem.parentElement,e),this.toolbar.enableItems(this.redoItem.parentElement,e)},e.prototype.enableAnnotationEditTool=function(e){this.toolbar.enableItems(this.annotationItem.parentElement,e)},e.prototype.enableFormDesignerEditTool=function(e){this.toolbar.enableItems(this.formDesignerItem.parentElement,e)},e.prototype.enableCommentsTool=function(e){this.pdfViewer.enableStickyNotesAnnotation&&this.toolbar.enableItems(this.annotationItem.parentElement,e)},e.prototype.resetToolbar=function(){if(!ge.isDevice||this.pdfViewer.enableDesktopMode)if(this.currentPageBox.min=0,this.currentPageBox.value=0,this.updateTotalPage(),this.updateToolbarItems(),this.annotationToolbarModule)this.annotationToolbarModule.clear();else if(this.annotationToolbarModule){this.annotationToolbarModule.propertyToolbar&&this.annotationToolbarModule.propertyToolbar.destroy();var e=document.getElementById(this.pdfViewer.element.id+"_commentscontentcontainer");e&&(e.innerHTML="")}},e.prototype.updateToolbarItems=function(){if(!ge.isDevice||this.pdfViewer.enableDesktopMode){if(this.toolbar){if(0===this.pdfViewerBase.pageCount)this.toolbar.enableItems(this.downloadItem.parentElement,!1),this.toolbar.enableItems(this.printItem.parentElement,!1),this.toolbar.enableItems(this.commentItem.parentElement,!1),this.updateUndoRedoButtons(),this.updateNavigationButtons(),this.toolbar.enableItems(this.zoomInItem.parentElement,!1),this.toolbar.enableItems(this.zoomOutItem.parentElement,!1),this.pdfViewer.magnificationModule&&(this.zoomDropDown.readonly=!0),this.toolbar.enableItems(this.submitItem.parentElement,!1),this.toolbar.enableItems(this.pdfViewerBase.getElement("_currentPageInputContainer"),!1),this.toolbar.enableItems(this.pdfViewerBase.getElement("_zoomDropDownContainer"),!1),this.toolbar.enableItems(this.textSelectItem.parentElement,!1),this.toolbar.enableItems(this.annotationItem.parentElement,!1),this.toolbar.enableItems(this.formDesignerItem.parentElement,!1),this.toolbar.enableItems(this.panItem.parentElement,!1),this.toolbar.enableItems(this.textSearchItem.parentElement,!1),this.deSelectItem(this.annotationItem),this.annotationToolbarModule&&this.annotationToolbarModule.resetToolbar(),this.deSelectItem(this.formDesignerItem),this.formDesignerToolbarModule&&this.formDesignerToolbarModule.resetFormDesignerToolbar();else if(this.pdfViewerBase.pageCount>0){this.pdfViewerBase.getElement("_currentPageInputContainer")&&(this.toolbar.enableItems(this.downloadItem.parentElement,!0),this.toolbar.enableItems(this.printItem.parentElement,!0),this.toolbar.enableItems(this.pdfViewerBase.getElement("_currentPageInputContainer"),!0),this.toolbar.enableItems(this.pdfViewerBase.getElement("_zoomDropDownContainer"),!0),this.updateUndoRedoButtons(),this.updateNavigationButtons(),this.updateZoomButtons(),this.pdfViewer.magnificationModule&&(this.zoomDropDown.readonly=!1),this.updateInteractionItems(),this.pdfViewer.annotationModule&&this.pdfViewer.enableAnnotation&&this.toolbar.enableItems(this.annotationItem.parentElement,!0),this.pdfViewer.formDesignerModule&&this.pdfViewer.enableFormDesigner&&this.toolbar.enableItems(this.formDesignerItem.parentElement,!0),this.pdfViewer.textSearchModule&&this.pdfViewer.enableTextSearch&&this.toolbar.enableItems(this.textSearchItem.parentElement,!0),this.pdfViewer.annotationModule&&this.pdfViewer.enableStickyNotesAnnotation&&this.toolbar.enableItems(this.commentItem.parentElement,!0))}this.pdfViewer.toolbarSettings.annotationToolbarItems&&(0!==this.pdfViewer.toolbarSettings.annotationToolbarItems.length&&this.pdfViewer.annotationModule&&this.pdfViewer.enableAnnotationToolbar||this.enableToolbarItem(["AnnotationEditTool"],!1)),this.pdfViewer.toolbarSettings.formDesignerToolbarItems&&(0!==this.pdfViewer.toolbarSettings.formDesignerToolbarItems.length&&this.pdfViewer.formDesignerModule&&this.pdfViewer.enableFormDesignerToolbar||this.enableToolbarItem(["FormDesignerEditTool"],!1)),this.pdfViewer.enableDownload||this.enableDownloadOption(!1),this.pdfViewer.enablePrint||this.enablePrintOption(!1)}}else 0===this.pdfViewerBase.pageCount?(this.toolbar.enableItems(this.textSearchItem.parentElement,!1),this.toolbar.enableItems(this.moreOptionItem.parentElement,!1),this.toolbar.enableItems(this.annotationItem.parentElement,!1)):this.pdfViewerBase.pageCount>0&&(this.toolbar.enableItems(this.textSearchItem.parentElement,!0),this.toolbar.enableItems(this.moreOptionItem.parentElement,!0),this.pdfViewer.annotationModule&&this.pdfViewer.enableAnnotation&&this.toolbar.enableItems(this.annotationItem.parentElement,!0),this.pdfViewer.annotationModule&&this.pdfViewer.enableAnnotationToolbar||this.enableToolbarItem(["AnnotationEditTool"],!1),this.updateUndoRedoButtons())},e.prototype.updateNavigationButtons=function(){this.pdfViewer.navigationModule&&!this.isPageNavigationToolDisabled?0===this.pdfViewerBase.pageCount||1===this.pdfViewerBase.currentPageNumber&&1===this.pdfViewerBase.pageCount?(this.toolbar.enableItems(this.firstPageItem.parentElement,!1),this.toolbar.enableItems(this.previousPageItem.parentElement,!1),this.toolbar.enableItems(this.nextPageItem.parentElement,!1),this.toolbar.enableItems(this.lastPageItem.parentElement,!1)):1===this.pdfViewerBase.currentPageNumber&&this.pdfViewerBase.pageCount>0?(this.toolbar.enableItems(this.firstPageItem.parentElement,!1),this.toolbar.enableItems(this.previousPageItem.parentElement,!1),this.toolbar.enableItems(this.nextPageItem.parentElement,!0),this.toolbar.enableItems(this.lastPageItem.parentElement,!0)):this.pdfViewerBase.currentPageNumber===this.pdfViewerBase.pageCount&&this.pdfViewerBase.pageCount>0?(this.toolbar.enableItems(this.firstPageItem.parentElement,!0),this.toolbar.enableItems(this.previousPageItem.parentElement,!0),this.toolbar.enableItems(this.nextPageItem.parentElement,!1),this.toolbar.enableItems(this.lastPageItem.parentElement,!1)):this.pdfViewerBase.currentPageNumber>1&&this.pdfViewerBase.currentPageNumber<this.pdfViewerBase.pageCount&&(this.toolbar.enableItems(this.firstPageItem.parentElement,!0),this.toolbar.enableItems(this.previousPageItem.parentElement,!0),this.toolbar.enableItems(this.nextPageItem.parentElement,!0),this.toolbar.enableItems(this.lastPageItem.parentElement,!0)):(this.toolbar.enableItems(this.firstPageItem.parentElement,!1),this.toolbar.enableItems(this.previousPageItem.parentElement,!1),this.toolbar.enableItems(this.nextPageItem.parentElement,!1),this.toolbar.enableItems(this.lastPageItem.parentElement,!1),this.currentPageBox.readonly=!0)},e.prototype.updateZoomButtons=function(){!this.pdfViewer.magnificationModule||this.isMagnificationToolDisabled||ge.isDevice&&!this.pdfViewer.enableDesktopMode||(this.pdfViewer.magnificationModule.zoomFactor<=.1?(this.toolbar.enableItems(this.zoomInItem.parentElement,!0),this.toolbar.enableItems(this.zoomOutItem.parentElement,!1)):this.pdfViewer.magnificationModule.zoomFactor>=4?(this.toolbar.enableItems(this.zoomInItem.parentElement,!1),this.toolbar.enableItems(this.zoomOutItem.parentElement,!0)):(this.toolbar.enableItems(this.zoomInItem.parentElement,!0),this.toolbar.enableItems(this.zoomOutItem.parentElement,!0)))},e.prototype.updateUndoRedoButtons=function(){this.pdfViewer.annotationModule&&this.pdfViewerBase.pageCount>0?S()?(this.enableCollectionAvailableInBlazor(this.pdfViewer.annotationModule.actionCollection,"undo"),this.enableCollectionAvailableInBlazor(this.pdfViewer.annotationModule.redoCollection,"redo")):(this.enableCollectionAvailable(this.pdfViewer.annotationModule.actionCollection,this.undoItem.parentElement),this.enableCollectionAvailable(this.pdfViewer.annotationModule.redoCollection,this.redoItem.parentElement)):S()?this.pdfViewerBase.blazorUIAdaptor.disableUndoRedoButton():this.disableUndoRedoButtons()},e.prototype.enableCollectionAvailable=function(e,t){e.length>0?this.toolbar.enableItems(t,!0):this.toolbar.enableItems(t,!1)},e.prototype.enableCollectionAvailableInBlazor=function(e,t){e.length>0?this.pdfViewerBase.blazorUIAdaptor.updateUndoRedoButton(t,!0):this.pdfViewerBase.blazorUIAdaptor.updateUndoRedoButton(t,!1)},e.prototype.disableUndoRedoButtons=function(){this.toolbar.enableItems(this.undoItem.parentElement,!1),this.toolbar.enableItems(this.redoItem.parentElement,!1)},e.prototype.destroy=function(){S()||(this.unWireEvent(),this.destroyComponent(),this.moreDropDown&&this.moreDropDown.destroy(),this.annotationToolbarModule&&this.annotationToolbarModule.destroy(),this.formDesignerToolbarModule&&this.formDesignerToolbarModule.destroy(),this.toolbar&&this.toolbar.destroy(),this.toolbarElement.parentElement.removeChild(this.toolbarElement))},e.prototype.destroyComponent=function(){for(var e=[this.openDocumentItem,this.firstPageItem,this.previousPageItem,this.nextPageItem,this.lastPageItem,this.currentPageBoxElement,this.zoomOutItem,this.zoomInItem,this.zoomDropdownItem,this.textSelectItem,this.panItem,this.submitItem,this.undoItem,this.redoItem,this.commentItem,this.textSearchItem,this.annotationItem,this.formDesignerItem,this.printItem,this.downloadItem],t=0;t<e.length;t++)e[t]&&this.destroyDependentComponent(e[t])},e.prototype.destroyDependentComponent=function(e){if(e.ej2_instances)for(var t=e.ej2_instances.length-1;t>=0;t--)e.ej2_instances[t].destroy()},e.prototype.updateCurrentPage=function(e){!ge.isDevice||this.pdfViewer.enableDesktopMode?(S()?this.pdfViewerBase.blazorUIAdaptor.pageChanged(e):m(this.currentPageBox)||(this.currentPageBox.value===e&&(this.currentPageBoxElement.value=e.toString()),this.currentPageBox.value=e),this.pdfViewerBase.currentPageNumber=e,this.pdfViewer.currentPageNumber=e):(this.pdfViewerBase.mobileSpanContainer.innerHTML=e.toString(),this.pdfViewerBase.mobilecurrentPageContainer.innerHTML=e.toString())},e.prototype.updateTotalPage=function(){ge.isDevice&&!this.pdfViewer.enableDesktopMode||(this.pdfViewerBase.pageCount>0&&(m(this.currentPageBox)||(this.currentPageBox.min=1)),m(this.totalPageItem)||(this.totalPageItem.textContent=this.pdfViewer.localeObj.getConstant("of")+this.pdfViewerBase.pageCount.toString()))},e.prototype.openFileDialogBox=function(e){e.preventDefault(),this.fileInputElement.click()},e.prototype.createToolbar=function(e){var t=this;return this.toolbarElement=we("div",{id:this.pdfViewer.element.id+"_toolbarContainer",className:"e-pv-toolbar"}),this.pdfViewerBase.viewerMainContainer.appendChild(this.toolbarElement),!ge.isDevice||this.pdfViewer.enableDesktopMode?(this.toolbar=new Dr({clicked:this.toolbarClickHandler,width:"",height:"",overflowMode:"Popup",cssClass:"e-pv-toolbar-scroll",items:this.createToolbarItems(),created:function(){t.createZoomDropdown(),t.createNumericTextBox(),t.toolbar.refreshOverflow()}}),this.toolbar.isStringTemplate=!0,this.pdfViewer.enableRtl&&(this.toolbar.enableRtl=!0),this.toolbar.appendTo(this.toolbarElement),this.applyToolbarSettings(),this.afterToolbarCreation(),this.updateTotalPage(),this.toolbarElement.addEventListener("keydown",this.onToolbarKeydown),this.toolbarElement.setAttribute("aria-label","Toolbar")):(this.createToolbarItemsForMobile(),this.afterToolbarCreationInMobile(),this.pdfViewer.enableRtl&&(this.toolbar.enableRtl=!0),this.applyToolbarSettingsForMobile(),this.disableUndoRedoButtons()),this.toolbarElement},e.prototype.createToolbarItems=function(){var e=this.createCurrentPageInputTemplate(),t=this.createTotalPageTemplate(),i=this.createZoomDropdownElement(),n=[],o='<button id="'+this.pdfViewer.element.id+'_submitForm" class="e-tbar-btn" style="font-size:15px"><span id="'+this.pdfViewer.element.id+'_submitFormSpan" class="e-tbar-btn-text e-pv-submitform-text">'+this.pdfViewer.localeObj.getConstant("SubmitForm")+"</span></button>";return n.push({prefixIcon:"e-pv-open-document-icon e-pv-icon",cssClass:"e-pv-open-document-container",id:this.pdfViewer.element.id+"_open",text:this.pdfViewer.localeObj.getConstant("Open text"),align:"Left"}),n.push({type:"Separator",align:"Left",cssClass:"e-pv-open-separator-container"}),this.pdfViewer.enableRtl?(n.push({prefixIcon:"e-pv-last-page-navigation-icon e-pv-icon",cssClass:"e-pv-last-page-navigation-container",id:this.pdfViewer.element.id+"_firstPage",text:this.pdfViewer.localeObj.getConstant("First text"),align:"Left"}),n.push({prefixIcon:"e-pv-next-page-navigation-icon e-pv-icon",cssClass:"e-pv-next-page-navigation-container",id:this.pdfViewer.element.id+"_previousPage",text:this.pdfViewer.localeObj.getConstant("Previous text"),align:"Left"}),n.push({prefixIcon:"e-pv-previous-page-navigation-icon e-pv-icon",cssClass:"e-pv-previous-page-navigation-container",id:this.pdfViewer.element.id+"_nextPage",text:this.pdfViewer.localeObj.getConstant("Next text"),align:"Left"}),n.push({prefixIcon:"e-pv-first-page-navigation-icon e-pv-icon",cssClass:"e-pv-first-page-navigation-container",id:this.pdfViewer.element.id+"_lastPage",text:this.pdfViewer.localeObj.getConstant("Last text"),align:"Left"}),n.push({template:t,align:"Left",cssClass:"e-pv-total-page-container"}),n.push({template:e,align:"Left",cssClass:"e-pv-current-page-container"})):(n.push({prefixIcon:"e-pv-first-page-navigation-icon e-pv-icon",cssClass:"e-pv-first-page-navigation-container",id:this.pdfViewer.element.id+"_firstPage",text:this.pdfViewer.localeObj.getConstant("First text"),align:"Left"}),n.push({prefixIcon:"e-pv-previous-page-navigation-icon e-pv-icon",cssClass:"e-pv-previous-page-navigation-container",id:this.pdfViewer.element.id+"_previousPage",text:this.pdfViewer.localeObj.getConstant("Previous text"),align:"Left"}),n.push({prefixIcon:"e-pv-next-page-navigation-icon e-pv-icon",cssClass:"e-pv-next-page-navigation-container",id:this.pdfViewer.element.id+"_nextPage",text:this.pdfViewer.localeObj.getConstant("Next text"),align:"Left"}),n.push({prefixIcon:"e-pv-last-page-navigation-icon e-pv-icon",cssClass:"e-pv-last-page-navigation-container",id:this.pdfViewer.element.id+"_lastPage",text:this.pdfViewer.localeObj.getConstant("Last text"),align:"Left"}),n.push({template:e,align:"Left",cssClass:"e-pv-current-page-container"}),n.push({template:t,align:"Left",cssClass:"e-pv-total-page-container"})),n.push({type:"Separator",align:"Left",cssClass:"e-pv-navigation-separator-container"}),n.push({prefixIcon:"e-pv-zoom-out-icon e-pv-icon",cssClass:"e-pv-zoom-out-container",id:this.pdfViewer.element.id+"_zoomOut",text:this.pdfViewer.localeObj.getConstant("Zoom out text"),align:"Left"}),n.push({prefixIcon:"e-pv-zoom-in-icon e-pv-icon",cssClass:"e-pv-zoom-in-container",id:this.pdfViewer.element.id+"_zoomIn",text:this.pdfViewer.localeObj.getConstant("Zoom in text"),align:"Left"}),n.push({template:i,cssClass:"e-pv-zoom-drop-down-container",align:"Left"}),n.push({type:"Separator",align:"Left",cssClass:"e-pv-magnification-separator-container"}),n.push({prefixIcon:"e-pv-text-select-tool-icon e-pv-icon",cssClass:"e-pv-text-select-tool-container",id:this.pdfViewer.element.id+"_selectTool",text:this.pdfViewer.localeObj.getConstant("Selection text")}),n.push({prefixIcon:"e-pv-pan-tool-icon e-pv-icon",cssClass:"e-pv-pan-tool-container",id:this.pdfViewer.element.id+"_handTool",text:this.pdfViewer.localeObj.getConstant("Pan text")}),n.push({type:"Separator",align:"Left",cssClass:"e-pv-pan-separator-container"}),n.push({prefixIcon:"e-pv-undo-icon e-pv-icon",cssClass:"e-pv-undo-container",id:this.pdfViewer.element.id+"_undo",text:this.pdfViewer.localeObj.getConstant("Undo"),align:"Left"}),n.push({prefixIcon:"e-pv-redo-icon e-pv-icon",cssClass:"e-pv-redo-container",id:this.pdfViewer.element.id+"_redo",text:this.pdfViewer.localeObj.getConstant("Redo"),align:"Left"}),n.push({type:"Separator",align:"Left",cssClass:"e-pv-undo-separator-container"}),n.push({prefixIcon:"e-pv-comment-icon e-pv-icon",cssClass:"e-pv-comment-container",id:this.pdfViewer.element.id+"_comment",text:this.pdfViewer.localeObj.getConstant("Add Comments"),align:"Left"}),n.push({type:"Separator",align:"Left",cssClass:"e-pv-comment-separator-container"}),n.push({template:o,cssClass:"e-pv-submit",align:"Left"}),n.push({prefixIcon:"e-pv-text-search-icon e-pv-icon",cssClass:"e-pv-text-search-container",id:this.pdfViewer.element.id+"_search",text:this.pdfViewer.localeObj.getConstant("Search text"),align:"Right"}),n.push({prefixIcon:"e-pv-annotation-icon e-pv-icon",cssClass:"e-pv-annotation-container",id:this.pdfViewer.element.id+"_annotation",text:this.pdfViewer.localeObj.getConstant("Annotation Edit text"),align:"Right"}),n.push({prefixIcon:"e-pv-formdesigner-icon e-pv-icon",cssClass:"e-pv-formdesigner-container",id:this.pdfViewer.element.id+"_formdesigner",text:this.pdfViewer.localeObj.getConstant("FormDesigner Edit text"),align:"Right"}),n.push({prefixIcon:"e-pv-print-document-icon e-pv-icon",cssClass:"e-pv-print-document-container",id:this.pdfViewer.element.id+"_print",text:this.pdfViewer.localeObj.getConstant("Print text"),align:"Right"}),n.push({prefixIcon:"e-pv-download-document-icon e-pv-icon",cssClass:"e-pv-download-document-container",id:this.pdfViewer.element.id+"_download",text:this.pdfViewer.localeObj.getConstant("Download"),align:"Right"}),n},e.prototype.afterToolbarCreationInMobile=function(){this.itemsContainer=this.toolbar.element.childNodes[0],this.itemsContainer.id=this.pdfViewer.element.id+"_toolbarItemsContainer",this.openDocumentItem=this.addClassToolbarItem("_open","e-pv-open-document",this.pdfViewer.localeObj.getConstant("Open")),this.undoItem=this.addClassToolbarItem("_undo","e-pv-undo",this.pdfViewer.localeObj.getConstant("Undo")),this.redoItem=this.addClassToolbarItem("_redo","e-pv-redo",this.pdfViewer.localeObj.getConstant("Redo")),this.annotationItem=this.addClassToolbarItem("_annotation","e-pv-annotation",this.pdfViewer.localeObj.getConstant("Annotation")),this.textSearchItem=this.addClassToolbarItem("_search","e-pv-text-search",this.pdfViewer.localeObj.getConstant("Text Search"))},e.prototype.afterToolbarCreation=function(){this.itemsContainer=this.toolbar.element.childNodes[0],this.itemsContainer.id=this.pdfViewer.element.id+"_toolbarItemsContainer",this.openDocumentItem=this.addClassToolbarItem("_open","e-pv-open-document",this.pdfViewer.localeObj.getConstant("Open")),this.undoItem=this.addClassToolbarItem("_undo","e-pv-undo",this.pdfViewer.localeObj.getConstant("Undo")),this.redoItem=this.addClassToolbarItem("_redo","e-pv-redo",this.pdfViewer.localeObj.getConstant("Redo")),this.pdfViewer.enableRtl?(this.firstPageItem=this.addClassToolbarItem("_firstPage","e-pv-last-page-navigation",this.pdfViewer.localeObj.getConstant("Go To First Page")),this.previousPageItem=this.addClassToolbarItem("_previousPage","e-pv-next-page-navigation",this.pdfViewer.localeObj.getConstant("Previous Page")),this.nextPageItem=this.addClassToolbarItem("_nextPage","e-pv-previous-page-navigation",this.pdfViewer.localeObj.getConstant("Next Page")),this.lastPageItem=this.addClassToolbarItem("_lastPage","e-pv-first-page-navigation",this.pdfViewer.localeObj.getConstant("Go To Last Page"))):(this.firstPageItem=this.addClassToolbarItem("_firstPage","e-pv-first-page-navigation",this.pdfViewer.localeObj.getConstant("Go To First Page")),this.previousPageItem=this.addClassToolbarItem("_previousPage","e-pv-previous-page-navigation",this.pdfViewer.localeObj.getConstant("Previous Page")),this.nextPageItem=this.addClassToolbarItem("_nextPage","e-pv-next-page-navigation",this.pdfViewer.localeObj.getConstant("Next Page")),this.lastPageItem=this.addClassToolbarItem("_lastPage","e-pv-last-page-navigation",this.pdfViewer.localeObj.getConstant("Go To Last Page"))),this.zoomOutItem=this.addClassToolbarItem("_zoomOut","e-pv-zoom-out",this.pdfViewer.localeObj.getConstant("Zoom Out")),this.zoomInItem=this.addClassToolbarItem("_zoomIn","e-pv-zoom-in",this.pdfViewer.localeObj.getConstant("Zoom In")),this.textSelectItem=this.addClassToolbarItem("_selectTool","e-pv-text-select-tool",this.pdfViewer.localeObj.getConstant("Text Selection")),this.panItem=this.addClassToolbarItem("_handTool","e-pv-pan-tool",this.pdfViewer.localeObj.getConstant("Panning")),this.commentItem=this.addClassToolbarItem("_comment","e-pv-comment",this.pdfViewer.localeObj.getConstant("Add Comments")),this.textSearchItem=this.addClassToolbarItem("_search","e-pv-text-search",this.pdfViewer.localeObj.getConstant("Text Search")),this.textSearchItem.setAttribute("aria-label",this.pdfViewer.localeObj.getConstant("Search text")),this.annotationItem=this.addClassToolbarItem("_annotation","e-pv-annotation",this.pdfViewer.localeObj.getConstant("Annotation")),this.annotationItem.setAttribute("aria-label",this.pdfViewer.localeObj.getConstant("Annotation Edit text")),this.formDesignerItem=this.addClassToolbarItem("_formdesigner","e-pv-formdesigner",this.pdfViewer.localeObj.getConstant("FormDesigner")),this.printItem=this.addClassToolbarItem("_print","e-pv-print-document",this.pdfViewer.localeObj.getConstant("Print")),this.downloadItem=this.addClassToolbarItem("_download","e-pv-download-document",this.pdfViewer.localeObj.getConstant("Download file")),this.zoomDropdownItem=this.pdfViewerBase.getElement("_zoomDropDown"),this.createTooltip(this.zoomDropdownItem,this.pdfViewer.localeObj.getConstant("Zoom")),this.zoomDropdownItem.setAttribute("aria-label",this.pdfViewer.localeObj.getConstant("Zoom")),this.addPropertiesToolItemContainer(this.zoomDropdownItem.parentElement.parentElement,null,"_zoomDropDownContainer"),this.pdfViewerBase.getElement("_zoomDropDownContainer").style.minWidth="",this.createTooltip(this.currentPageBoxElement,this.pdfViewer.localeObj.getConstant("Page Number")),this.currentPageBoxElement.setAttribute("aria-label",this.pdfViewer.localeObj.getConstant("Page Number")),this.submitItem=this.pdfViewerBase.getElement("_submitForm"),this.addPropertiesToolItemContainer(this.submitItem.parentElement,"e-pv-submit","_submitFormContainer"),this.createTooltip(this.submitItem,this.pdfViewer.localeObj.getConstant("SubmitForm")),this.addPropertiesToolItemContainer(this.currentPageBoxElement.parentElement.parentElement,"e-pv-current-page-container","_currentPageInputContainer"),this.pdfViewerBase.getElement("_currentPageInputContainer").style.minWidth="20px",this.totalPageItem=this.pdfViewerBase.getElement("_totalPage"),this.addPropertiesToolItemContainer(this.totalPageItem.parentElement,"e-pv-total-page-container","_totalPageContainer")},e.prototype.addClassToolbarItem=function(e,t,i){var n=this.pdfViewerBase.getElement(e);if(n.classList.add(t),n.classList.add("e-pv-tbar-btn"),n.setAttribute("aria-label",i),n.parentElement.classList.add(t+"-container"),n.parentElement.classList.add("e-popup-text"),n.parentElement.id=this.pdfViewer.element.id+e+"Container",n.childNodes.length>0){var o=n.childNodes[0];o.id=this.pdfViewer.element.id+e+"Icon",o.classList.remove("e-icons"),o.classList.remove("e-btn-icon"),this.pdfViewer.enableRtl&&o.classList.add("e-right");var s=n.childNodes[1];s&&s.classList.contains("e-tbar-btn-text")&&(s.id=this.pdfViewer.element.id+e+"Text")}return n.style.width="",this.createTooltip(n,i),n},e.prototype.addPropertiesToolItemContainer=function(e,t,i){null!==t&&e.classList.add(t),e.classList.add("e-popup-text"),e.id=this.pdfViewer.element.id+i},e.prototype.createZoomDropdownElement=function(){return this.createToolbarItem("input",this.pdfViewer.element.id+"_zoomDropDown",null).outerHTML},e.prototype.createZoomDropdown=function(){var e=[{percent:"10%",id:"0"},{percent:"25%",id:"1"},{percent:"50%",id:"2"},{percent:"75%",id:"3"},{percent:"100%",id:"4"},{percent:"125%",id:"5"},{percent:"150%",id:"6"},{percent:"200%",id:"7"},{percent:"400%",id:"8"},{percent:this.pdfViewer.localeObj.getConstant("Fit Page"),id:"9"},{percent:this.pdfViewer.localeObj.getConstant("Fit Width"),id:"10"},{percent:this.pdfViewer.localeObj.getConstant("Automatic"),id:"11"}];this.pdfViewer.enableRtl?this.zoomDropDown=new Tf({dataSource:e,text:"100%",enableRtl:!0,fields:{text:"percent",value:"id"},readonly:!0,cssClass:"e-pv-zoom-drop-down-rtl",popupHeight:"450px",showClearButton:!1,open:this.openZoomDropdown.bind(this),select:function(e){"keydown"==e.e.type&&e.itemData.text!==this.zoomDropDown.element.value&&(e.cancel=!0)}}):this.zoomDropDown=new Tf({dataSource:e,text:"100%",fields:{text:"percent",value:"id"},readonly:!0,cssClass:"e-pv-zoom-drop-down",popupHeight:"450px",showClearButton:!1,open:this.openZoomDropdown.bind(this),select:function(e){"keydown"==e.e.type&&e.itemData.text!==this.zoomDropDown.element.value&&(e.cancel=!0)}}),this.zoomDropDown.appendTo(this.pdfViewerBase.getElement("_zoomDropDown"))},e.prototype.createCurrentPageInputTemplate=function(){return this.createToolbarItem("input",this.pdfViewer.element.id+"_currentPageInput",null).outerHTML},e.prototype.createTotalPageTemplate=function(){return this.createToolbarItem("span",this.pdfViewer.element.id+"_totalPage","e-pv-total-page").outerHTML},e.prototype.createNumericTextBox=function(){this.currentPageBox=new Eh({value:0,format:"##",cssClass:"e-pv-current-page-box",showSpinButton:!1}),this.currentPageBoxElement=this.pdfViewerBase.getElement("_currentPageInput"),this.currentPageBox.appendTo(this.currentPageBoxElement)},e.prototype.createToolbarItemsForMobile=function(){this.toolbarElement.classList.add("e-pv-mobile-toolbar");var e='<button id="'+this.pdfViewer.element.id+'_more_option" class="e-tbar-btn"></button>';this.toolbar=new Dr({items:[{prefixIcon:"e-pv-open-document-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Open"),id:this.pdfViewer.element.id+"_open"},{type:"Separator",align:"Left"},{prefixIcon:"e-pv-undo-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Undo"),id:this.pdfViewer.element.id+"_undo"},{prefixIcon:"e-pv-redo-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Redo"),id:this.pdfViewer.element.id+"_redo"},{prefixIcon:"e-pv-annotation-icon e-pv-icon",cssClass:"e-pv-annotation-container",tooltipText:this.pdfViewer.localeObj.getConstant("Annotation"),id:this.pdfViewer.element.id+"_annotation",align:"Right"},{prefixIcon:"e-pv-text-search-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Text Search"),id:this.pdfViewer.element.id+"_search",align:"Right"},{template:e,align:"Right"}],clicked:this.toolbarClickHandler,width:"",height:"",overflowMode:"Popup"}),this.toolbar.isStringTemplate=!0,this.toolbar.appendTo(this.toolbarElement),this.openDocumentItem=this.pdfViewerBase.getElement("_open"),this.openDocumentItem.classList.add("e-pv-open-document"),this.openDocumentItem.firstElementChild.id=this.pdfViewer.element.id+"_openIcon",this.annotationItem=this.pdfViewerBase.getElement("_annotation"),this.annotationItem.classList.add("e-pv-annotation"),this.annotationItem.firstElementChild.id=this.pdfViewer.element.id+"_annotationIcon",this.textSearchItem=this.pdfViewerBase.getElement("_search"),this.textSearchItem.classList.add("e-pv-text-search"),this.textSearchItem.firstElementChild.id=this.pdfViewer.element.id+"_searchIcon",this.undoItem=this.pdfViewerBase.getElement("_undo"),this.undoItem.classList.add("e-pv-undo"),this.redoItem=this.pdfViewerBase.getElement("_redo"),this.redoItem.classList.add("e-pv-redo"),this.redoItem.firstElementChild.id=this.pdfViewer.element.id+"_redoIcon",this.undoItem.firstElementChild.id=this.pdfViewer.element.id+"_undoIcon",this.createMoreOption(this.pdfViewer.element.id+"_more_option")},e.prototype.createMoreOption=function(e){var t=this;this.moreOptionItem=document.getElementById(e);var i=[{text:this.pdfViewer.localeObj.getConstant("Download"),id:this.pdfViewer.element.id+"_menu_download",iconCss:"e-icons e-pv-download-document-icon e-pv-icon"},{text:this.pdfViewer.localeObj.getConstant("Bookmarks"),id:this.pdfViewer.element.id+"_menu_bookmarks",iconCss:"e-icons e-pv-bookmark-icon e-pv-icon"}];this.moreDropDown=new Yf({items:i,iconCss:"e-pv-more-icon e-pv-icon",cssClass:"e-caret-hide",open:function(e){var i=t.moreDropDown.element.getBoundingClientRect();t.pdfViewer.enableRtl||(e.element.parentElement.style.left=i.left+i.width-e.element.parentElement.offsetWidth+"px")},select:function(e){switch(e.item.id){case t.pdfViewer.element.id+"_menu_download":t.pdfViewerBase.download();break;case t.pdfViewer.element.id+"_menu_bookmarks":t.showToolbar(!1),t.pdfViewerBase.navigationPane.createNavigationPaneMobile("bookmarks")}},beforeItemRender:function(e){e.item.id===t.pdfViewer.element.id+"_menu_bookmarks"&&(t.pdfViewer.bookmarkViewModule&&t.pdfViewer.bookmarkViewModule.bookmarks?e.element.classList.remove("e-disabled"):e.element.classList.add("e-disabled"))},close:function(e){t.moreOptionItem.blur(),t.pdfViewerBase.focusViewerContainer()}}),this.moreDropDown.appendTo("#"+e)},e.prototype.createToolbarItem=function(e,t,i){var n=we(e,{id:t});return null!==i&&(n.className=i),"input"===e&&t!==this.pdfViewer.element.id+"_zoomDropDown"&&(n.type="text"),n},e.prototype.createTooltip=function(e,t){null!==t&&new Xd({content:t,opensOn:"Hover",beforeOpen:this.onTooltipBeforeOpen.bind(this)}).appendTo(e)},e.prototype.onTooltipBeforeOpen=function(e){!this.pdfViewer.toolbarSettings.showTooltip&&this.toolbarElement.contains(e.target)&&(e.cancel=!0),this.annotationToolbarModule&&!this.pdfViewer.toolbarSettings.showTooltip&&(this.annotationToolbarModule.toolbarElement&&this.annotationToolbarModule.toolbarElement.contains(e.target)||this.annotationToolbarModule.shapeToolbarElement&&this.annotationToolbarModule.shapeToolbarElement.contains(e.target))&&(e.cancel=!0),this.formDesignerToolbarModule&&!this.pdfViewer.toolbarSettings.showTooltip&&this.formDesignerToolbarModule.toolbarElement&&this.formDesignerToolbarModule.toolbarElement.contains(e.target)&&(e.cancel=!0)},e.prototype.createFileElement=function(e){e&&(S()?this.fileInputElement=this.pdfViewer.element.querySelector(".e-pv-fileupload-element"):(this.fileInputElement=we("input",{id:this.pdfViewer.element.id+"_fileUploadElement",styles:"position:fixed; left:-100em",attrs:{type:"file"}}),this.fileInputElement.setAttribute("accept",".pdf"),this.fileInputElement.setAttribute("aria-label","file upload element")),e&&e.appendChild(this.fileInputElement))},e.prototype.wireEvent=function(){this.fileInputElement&&this.fileInputElement.addEventListener("change",this.loadDocument),S()||ge.isDevice&&!this.pdfViewer.enableDesktopMode||(this.toolbarElement.addEventListener("mouseup",this.toolbarOnMouseup.bind(this)),this.currentPageBoxElement.addEventListener("focusout",this.textBoxFocusOut),this.currentPageBoxElement.addEventListener("keypress",this.navigateToPage),this.zoomDropDown.change=this.zoomPercentSelect.bind(this),this.zoomDropDown.element.addEventListener("keypress",this.onZoomDropDownInput.bind(this)),this.zoomDropDown.element.addEventListener("click",this.onZoomDropDownInputClick.bind(this)))},e.prototype.unWireEvent=function(){this.fileInputElement&&this.fileInputElement.removeEventListener("change",this.loadDocument),ge.isDevice&&!this.pdfViewer.enableDesktopMode||S()||(m(this.toolbarElement)||this.toolbarElement.removeEventListener("mouseup",this.toolbarOnMouseup.bind(this)),m(this.currentPageBoxElement)||(this.currentPageBoxElement.removeEventListener("focusout",this.textBoxFocusOut),this.currentPageBoxElement.removeEventListener("keypress",this.navigateToPage)),m(this.zoomDropDown)||(this.zoomDropDown.removeEventListener("change",this.zoomPercentSelect),this.zoomDropDown.element.removeEventListener("keypress",this.onZoomDropDownInput),this.zoomDropDown.element.removeEventListener("click",this.onZoomDropDownInputClick)))},e.prototype.onToolbarResize=function(e){ge.isDevice&&!this.pdfViewer.enableDesktopMode?this.pdfViewerBase.navigationPane.toolbarResize():m(this.toolbar)||this.toolbar.refreshOverflow()},e.prototype.toolbarOnMouseup=function(e){e.target!==this.itemsContainer&&e.target!==this.toolbarElement||this.pdfViewerBase.focusViewerContainer()},e.prototype.applyHideToToolbar=function(e,t,i){for(var n=!e,o=t;o<=i;o++)if(this.toolbar.items[o]){var s=this.toolbar.items[o].cssClass;if(s&&""!==s){var a=this.toolbar.element.querySelector("."+s);a&&this.toolbar.hideItem(a,n)}else this.toolbar.hideItem(o,n)}},e.prototype.handleOpenIconClick=function(e){this.fileInputElement.click(),ge.isDevice&&!this.pdfViewer.enableDesktopMode&&(S()||e.originalEvent.target.blur(),this.pdfViewerBase.focusViewerContainer())},e.prototype.handleToolbarBtnClick=function(e){switch(this.addInkAnnotation(),this.deSelectCommentAnnotation(),e.originalEvent.target.id){case this.pdfViewer.element.id+"_open":case this.pdfViewer.element.id+"_openIcon":case this.pdfViewer.element.id+"_openText":this.handleOpenIconClick(e);break;case this.pdfViewer.element.id+"_download":case this.pdfViewer.element.id+"_downloadIcon":case this.pdfViewer.element.id+"_downloadText":this.pdfViewerBase.download();break;case this.pdfViewer.element.id+"_print":case this.pdfViewer.element.id+"_printIcon":case this.pdfViewer.element.id+"_printText":this.pdfViewer.printModule&&this.pdfViewer.firePrintStart();break;case this.pdfViewer.element.id+"_undo":case this.pdfViewer.element.id+"_undoIcon":case this.pdfViewer.element.id+"_undoText":this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.undo();break;case this.pdfViewer.element.id+"_redo":case this.pdfViewer.element.id+"_redoIcon":case this.pdfViewer.element.id+"_redoText":this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.redo();break;case this.pdfViewer.element.id+"_firstPage":case this.pdfViewer.element.id+"_firstPageIcon":case this.pdfViewer.element.id+"_firstPageText":this.pdfViewer.navigationModule&&this.pdfViewer.navigationModule.goToFirstPage();break;case this.pdfViewer.element.id+"_previousPage":case this.pdfViewer.element.id+"_previousPageIcon":case this.pdfViewer.element.id+"_previousPageText":this.pdfViewer.navigationModule&&this.pdfViewer.navigationModule.goToPreviousPage();break;case this.pdfViewer.element.id+"_nextPage":case this.pdfViewer.element.id+"_nextPageIcon":case this.pdfViewer.element.id+"_nextPageText":this.pdfViewer.navigationModule&&this.pdfViewer.navigationModule.goToNextPage();break;case this.pdfViewer.element.id+"_lastPage":case this.pdfViewer.element.id+"_lastPageIcon":case this.pdfViewer.element.id+"_lastPageText":this.pdfViewer.navigationModule&&this.pdfViewer.navigationModule.goToLastPage();break;case this.pdfViewer.element.id+"_zoomIn":case this.pdfViewer.element.id+"_zoomInIcon":case this.pdfViewer.element.id+"_zoomInText":this.pdfViewer.magnificationModule.zoomIn();break;case this.pdfViewer.element.id+"_zoomOut":case this.pdfViewer.element.id+"_zoomOutIcon":case this.pdfViewer.element.id+"_zoomOutText":this.pdfViewer.magnificationModule.zoomOut();break;case this.pdfViewer.element.id+"_selectTool":case this.pdfViewer.element.id+"_selectToolIcon":case this.pdfViewer.element.id+"_selectToolText":this.isSelectionToolDisabled||(this.pdfViewerBase.initiateTextSelectMode(),this.updateInteractionTools(!0));break;case this.pdfViewer.element.id+"_handTool":case this.pdfViewer.element.id+"_handToolIcon":case this.pdfViewer.element.id+"_handToolText":this.isScrollingToolDisabled||this.getStampMode()||(this.pdfViewerBase.initiatePanning(),this.updateInteractionTools(!1));break;case this.pdfViewer.element.id+"_search":case this.pdfViewer.element.id+"_searchIcon":case this.pdfViewer.element.id+"_searchText":this.textSearchButtonHandler();break;case this.pdfViewer.element.id+"_annotation":case this.pdfViewer.element.id+"_annotationIcon":case this.pdfViewer.element.id+"_annotationText":this.initiateAnnotationMode(e.originalEvent.target.id);break;case this.pdfViewer.element.id+"_formdesigner":case this.pdfViewer.element.id+"_formdesignerIcon":case this.pdfViewer.element.id+"_formdesignerText":this.initiateFormDesignerMode(),this.formDesignerToolbarModule.showHideDeleteIcon(!1);break;case this.pdfViewer.element.id+"_comment":case this.pdfViewer.element.id+"_commentIcon":this.pdfViewerBase.isAddComment=!0,this.pdfViewerBase.isCommentIconAdded=!0,this.annotationToolbarModule.deselectAllItems(),this.pdfViewer.annotation.triggerAnnotationUnselectEvent(),this.addComments(e.originalEvent.target);break;case this.pdfViewer.element.id+"_submitForm":case this.pdfViewer.element.id+"_submitFormSpan":this.pdfViewerBase.exportFormFields(void 0,sa.Json)}},e.prototype.addInkAnnotation=function(){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){var e=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(e)}this.annotationToolbarModule&&(this.pdfViewer.toolbar.annotationToolbarModule.deselectInkAnnotation(),this.annotationToolbarModule.inkAnnotationSelected=!1)},e.prototype.deSelectCommentAnnotation=function(){S()?this.pdfViewer.toolbar.deSelectItem(this.CommentElement):this.pdfViewer.toolbar.deSelectItem(this.commentItem),this.pdfViewerBase.isCommentIconAdded=!1},e.prototype.addComments=function(e){S()?(this.pdfViewerBase.isCommentIconAdded=!0,this.pdfViewerBase.isAddComment=!0,this.annotationToolbarModule.deselectAllItemsInBlazor(),this.CommentElement.classList.add("e-pv-select")):e.id===this.pdfViewer.element.id+"_comment"||e.id===this.pdfViewer.element.id+"_commentIcon"?e.id===this.pdfViewer.element.id+"_commentIcon"&&e.parentElement?e.parentElement.classList.add("e-pv-select"):e.classList.add("e-pv-select"):this.pdfViewer.enableRtl?e.className="e-pv-comment-selection-icon e-pv-icon e-icon-left e-right":e.className="e-pv-comment-selection-icon e-pv-icon e-icon-left";this.updateStampItems(),document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+(this.pdfViewerBase.currentPageNumber-1)).addEventListener("mousedown",this.pdfViewer.annotationModule.stickyNotesAnnotationModule.drawIcons.bind(this))},e.prototype.openZoomDropdown=function(){var e=this;if(document.fullscreen)if(S()){var t=document.fullscreenElement;t&&"BODY"!==t.tagName&&"HTML"!==t.tagName&&setTimeout((function(){var t=document.getElementById(e.pdfViewer.element.id+"_zoomCombo_popup"),i=document.getElementById(e.toolbarElement.id);t&&i&&t.ej2_instances&&(i.appendChild(t),t.ej2_instances[0].refreshPosition())}),100)}else{var i=document.getElementById(this.pdfViewer.element.id+"_zoomDropDown_popup"),n=document.getElementById(this.toolbarElement.id);i&&n.appendChild(i)}},e.prototype.onZoomDropDownInput=function(e){if((e.which<48||e.which>57)&&8!==e.which&&13!==e.which)return e.preventDefault(),!1;if(13===e.which){e.preventDefault();var t=this.zoomDropDown.element.value;this.zoomDropDownChange(t)}return!0},e.prototype.onZoomDropDownInputClick=function(){this.zoomDropDown.element.select()},e.prototype.zoomPercentSelect=function(e){if(this.pdfViewerBase.pageCount>0)if(e.isInteracted){if(e.itemData){var t=e.itemData.percent;this.zoomDropDownChange(t)}}else this.updateZoomPercentage(this.pdfViewer.magnificationModule.zoomFactor)},e.prototype.zoomDropDownChange=function(e){e!==this.pdfViewer.localeObj.getConstant("Fit Width")&&e!==this.pdfViewer.localeObj.getConstant("Fit Page")&&e!==this.pdfViewer.localeObj.getConstant("Automatic")?(this.pdfViewer.magnificationModule.isAutoZoom=!1,this.pdfViewer.magnificationModule.zoomTo(parseFloat(e)),this.updateZoomPercentage(this.pdfViewer.magnificationModule.zoomFactor),this.zoomDropDown.focusOut()):e===this.pdfViewer.localeObj.getConstant("Fit Width")?(this.pdfViewer.magnificationModule.isAutoZoom=!1,this.pdfViewer.magnificationModule.fitToWidth(),this.zoomDropDown.focusOut()):e===this.pdfViewer.localeObj.getConstant("Fit Page")?(this.pdfViewer.magnificationModule.fitToPage(),this.zoomDropDown.focusOut()):e===this.pdfViewer.localeObj.getConstant("Automatic")&&(this.pdfViewer.magnificationModule.isAutoZoom=!0,this.pdfViewer.magnificationModule.fitToAuto(),this.zoomDropDown.focusOut())},e.prototype.updateZoomPercentage=function(e){if(!ge.isDevice||this.pdfViewer.enableDesktopMode){var t=parseInt((100*e).toString())+"%";if(S()){var i=this.pdfViewerBase.getElement("_zoomDropDown");i&&i.children.length>0&&(i.children[0].children[0].value=t)}else this.zoomDropDown.text===t&&(this.zoomDropDown.element.value=t),11===this.zoomDropDown.index&&(this.zoomDropDown.value=4),this.pdfViewerBase.isMinimumZoom=e<=.25,this.zoomDropDown.text=t}},e.prototype.updateInteractionItems=function(){this.pdfViewer.textSelectionModule&&this.pdfViewer.enableTextSelection?this.toolbar.enableItems(this.textSelectItem.parentElement,!0):this.toolbar.enableItems(this.textSelectItem.parentElement,!1),this.toolbar.enableItems(this.panItem.parentElement,!0),"TextSelection"===this.pdfViewer.interactionMode&&this.pdfViewer.enableTextSelection?(this.selectItem(this.textSelectItem),this.deSelectItem(this.panItem)):(this.selectItem(this.panItem),this.deSelectItem(this.textSelectItem),this.pdfViewerBase.initiatePanning())},e.prototype.textSearchButtonHandler=function(){if(!ge.isDevice||this.pdfViewer.enableDesktopMode){if(this.pdfViewer.textSearchModule&&this.pdfViewerBase.pageCount>0)if(this.isTextSearchBoxDisplayed=!this.isTextSearchBoxDisplayed,this.pdfViewer.textSearchModule.showSearchBox(this.isTextSearchBoxDisplayed),this.isTextSearchBoxDisplayed){S()||this.selectItem(this.textSearchItem);var e=document.getElementById(this.pdfViewer.element.id+"_search_input");e.select(),e.focus()}else{if(S())this.pdfViewerBase.getElement("_search").firstElementChild.blur();else this.deSelectItem(this.textSearchItem),this.textSearchItem.blur()}}else this.showToolbar(!1),this.pdfViewerBase.navigationPane.createNavigationPaneMobile("search")},e.prototype.initiateAnnotationMode=function(e){!ge.isDevice||this.pdfViewer.enableDesktopMode?this.annotationToolbarModule&&this.pdfViewer.enableAnnotationToolbar&&(this.annotationToolbarModule.showAnnotationToolbar(this.annotationItem),this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar.refreshOverflow(),this.pdfViewer.isAnnotationToolbarVisible&&this.pdfViewer.isFormDesignerToolbarVisible&&(document.getElementById(this.pdfViewer.element.id+"_formdesigner_toolbar").style.display="none",this.formDesignerToolbarModule.isToolbarHidden=!1,this.formDesignerToolbarModule.showFormDesignerToolbar(this.formDesignerItem),this.annotationToolbarModule.adjustViewer(!0))):S()||(e===this.pdfViewer.element.id+"_annotation"&&(e=this.pdfViewer.element.id+"_annotationIcon"),this.annotationToolbarModule.createAnnotationToolbarForMobile(e))},e.prototype.initiateFormDesignerMode=function(){this.formDesignerToolbarModule&&this.pdfViewer.enableFormDesignerToolbar&&(this.formDesignerToolbarModule.showFormDesignerToolbar(this.formDesignerItem),this.pdfViewer.isAnnotationToolbarVisible&&this.pdfViewer.isFormDesignerToolbarVisible&&(document.getElementById(this.pdfViewer.element.id+"_annotation_toolbar").style.display="none",this.annotationToolbarModule.isToolbarHidden=!1,this.annotationToolbarModule.showAnnotationToolbar(this.annotationItem),this.formDesignerToolbarModule.adjustViewer(!0)))},e.prototype.DisableInteractionTools=function(){this.deSelectItem(this.textSelectItem),this.deSelectItem(this.panItem)},e.prototype.selectItem=function(e){e&&e.classList.add("e-pv-select")},e.prototype.deSelectItem=function(e){e&&e.classList.remove("e-pv-select")},e.prototype.updateInteractionTools=function(e){var t=S();e?t?(this.selectItem(this.SelectToolElement),this.deSelectItem(this.PanElement)):(this.selectItem(this.textSelectItem),this.deSelectItem(this.panItem)):t?(this.selectItem(this.PanElement),this.deSelectItem(this.SelectToolElement)):(this.selectItem(this.panItem),this.deSelectItem(this.textSelectItem))},e.prototype.initialEnableItems=function(){this.pdfViewer.enableToolbar?this.showToolbar(!0):this.showToolbar(!1),this.pdfViewer.enableNavigationToolbar?this.showNavigationToolbar(!0):this.showNavigationToolbar(!1),S()||(this.isPrintBtnVisible?this.showPrintOption(!0):this.showPrintOption(!1),this.isDownloadBtnVisible?this.showDownloadOption(!0):this.showDownloadOption(!1),this.isSearchBtnVisible?this.showSearchOption(!0):this.showSearchOption(!1),this.isCommentBtnVisible?this.showCommentOption(!0):this.showCommentOption(!1))},e.prototype.showSeparator=function(e){this.isOpenBtnVisible&&(this.isNavigationToolVisible||this.isMagnificationToolVisible||this.isSelectionBtnVisible||this.isScrollingBtnVisible||this.isUndoRedoBtnsVisible)||this.applyHideToToolbar(!1,1,1),(this.isNavigationToolVisible||this.isMagnificationToolVisible||this.isOpenBtnVisible)&&(!this.isOpenBtnVisible||this.isNavigationToolVisible)&&(this.isOpenBtnVisible||this.isNavigationToolVisible)&&(this.isMagnificationToolVisible||this.isScrollingBtnVisible||this.isSelectionBtnVisible)||this.applyHideToToolbar(!1,8,8),(!this.isMagnificationToolVisible&&!this.isSelectionBtnVisible&&!this.isScrollingBtnVisible||this.isMagnificationToolVisible&&!this.isSelectionBtnVisible&&!this.isScrollingBtnVisible||!this.isMagnificationToolVisible&&(this.isSelectionBtnVisible||this.isScrollingBtnVisible))&&this.applyHideToToolbar(!1,12,12),(this.isMagnificationToolVisible||this.isNavigationToolVisible||this.isScrollingBtnVisible||this.isSelectionBtnVisible||!this.isUndoRedoBtnsVisible)&&this.isUndoRedoBtnsVisible||this.applyHideToToolbar(!1,15,15)},e.prototype.applyToolbarSettings=function(){var e=this.pdfViewer.toolbarSettings.toolbarItems;e&&(-1!==e.indexOf("OpenOption")?this.showOpenOption(!0):this.showOpenOption(!1),-1!==e.indexOf("PageNavigationTool")?this.showPageNavigationTool(!0):this.showPageNavigationTool(!1),-1!==e.indexOf("MagnificationTool")?this.showMagnificationTool(!0):this.showMagnificationTool(!1),-1!==e.indexOf("SelectionTool")?this.showSelectionTool(!0):this.showSelectionTool(!1),-1!==e.indexOf("PanTool")?this.showScrollingTool(!0):this.showScrollingTool(!1),-1!==e.indexOf("PrintOption")?this.showPrintOption(!0):this.showPrintOption(!1),-1!==e.indexOf("DownloadOption")?this.showDownloadOption(!0):this.showDownloadOption(!1),-1!==e.indexOf("SearchOption")?this.showSearchOption(!0):this.showSearchOption(!1),-1!==e.indexOf("UndoRedoTool")?this.showUndoRedoTool(!0):this.showUndoRedoTool(!1),-1!==e.indexOf("AnnotationEditTool")?this.showAnnotationEditTool(!0):this.showAnnotationEditTool(!1),-1!==e.indexOf("FormDesignerEditTool")?this.showFormDesignerEditTool(!0):this.showFormDesignerEditTool(!1),-1!==e.indexOf("CommentTool")?this.showCommentOption(!0):this.showCommentOption(!1),-1!==e.indexOf("SubmitForm")?this.showSubmitForm(!0):this.showSubmitForm(!1),this.showSeparator(e))},e.prototype.applyToolbarSettingsForMobile=function(){var e=this.pdfViewer.toolbarSettings.toolbarItems;e&&(-1!==e.indexOf("OpenOption")?this.showOpenOption(!0):this.showOpenOption(!1),-1!==e.indexOf("UndoRedoTool")?this.showUndoRedoTool(!0):this.showUndoRedoTool(!1),-1!==e.indexOf("AnnotationEditTool")?this.showAnnotationEditTool(!0):this.showAnnotationEditTool(!1),-1!==e.indexOf("SearchOption")?this.showSearchOption(!0):this.showSearchOption(!1))},e.prototype.getStampMode=function(){return!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.stampAnnotationModule)&&this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode},e.prototype.stampBeforeOpen=function(e){if(this.annotationToolbarModule.resetFreeTextAnnot(),""===e.ParentItem.Text&&this.pdfViewer.customStampSettings.isAddToMenu&&e.Items.length>0){for(var t=null,i=0;i<e.Items.length;i++)if("Custom Stamp"===e.Items[i].Text){e.Items[i].Items=[],t=e.Items[i];break}var n=this.pdfViewerBase.customStampCollection,o=this.pdfViewer.customStampSettings.customStamps;if(0===n.length&&o&&o.length>0)for(var s=0;s<o.length;s++)n.push({customStampName:o[s].customStampName,customStampImageSource:o[s].customStampImageSource});for(var a=0;a<n.length;a++)null!=t&&t.Items.push({text:n[a].customStampName})}},e.prototype.stampBeforeClose=function(e,t){(e.ParentItem&&"Custom Stamp"!==e.ParentItem.Text&&"Standard Business"!==e.ParentItem.Text&&"Dynamic"!==e.ParentItem.Text&&"Sign Here"!==e.ParentItem.Text||!e.ParentItem)&&!0},e.prototype.updateStampItems=function(){this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.stampAnnotationModule&&this.pdfViewer.annotationModule.stampAnnotationModule.isNewStampAnnot&&(this.pdfViewer.selectedItems.annotations[0]&&(this.pdfViewer.remove(this.pdfViewer.selectedItems.annotations[0]),this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber-1),this.pdfViewer.renderDrawing(),this.pdfViewerBase.tool=null),this.pdfViewerBase.isAlreadyAdded=!1,this.pdfViewer.annotationModule.stampAnnotationModule.isNewStampAnnot=!1)},e.prototype.stampSelect=function(e,t){if(this.pdfViewerBase.isAlreadyAdded=!1,this.updateStampItems(),"Custom Stamp"===e.Item.Text){this.annotationToolbarModule.checkStampAnnotations(),this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0;var i=we("input",{id:this.pdfViewer.element.id+"_stampElement",attrs:{type:"file"}});i.setAttribute("accept",".jpg,.jpeg,.png"),i.style.position="absolute",i.style.left="0px",i.style.top="0px",i.style.visibility="hidden",document.body.appendChild(i),i.click(),i.addEventListener("change",this.annotationToolbarModule.addStampImage),document.body.removeChild(i)}else if("Custom Stamp"===t&&""!==e.Item.Text)for(var n=this.pdfViewerBase.customStampCollection,o=0;o<n.length;o++)n[o].customStampName===e.Item.Text&&(this.pdfViewer.annotationModule.stampAnnotationModule.customStampName=e.Item.Text,this.annotationToolbarModule.checkStampAnnotations(),this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0,this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=!0,this.pdfViewerBase.stampAdded=!0,this.pdfViewerBase.isAlreadyAdded=!0,this.pdfViewer.annotationModule.stampAnnotationModule.createCustomStampAnnotation(n[o].customStampImageSource),this.pdfViewerBase.stampAdded=!1);else"Dynamic"===e.Item.Text||""===e.Item.Text||"Standard Business"===e.Item.Text||"Sign Here"!==t&&"Sign Here"===e.Item.Text||(this.annotationToolbarModule.checkStampAnnotations(),this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0,this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=!0,this.pdfViewerBase.stampAdded=!0,"Dynamic"===t?(this.pdfViewerBase.isDynamicStamp=!0,this.pdfViewer.annotationModule.stampAnnotationModule.retrieveDynamicStampAnnotation(e.Item.Text)):(this.pdfViewerBase.isDynamicStamp=!1,this.pdfViewer.annotationModule.stampAnnotationModule.retrievestampAnnotation(e.Item.Text)))},e.prototype.getModuleName=function(){return"Toolbar"},e}(),Ug=function(){function e(e,t){this.zoomFactor=1,this.previousZoomFactor=1,this.scrollWidth=25,this.zoomPercentages=[10,25,50,75,100,125,150,200,400],this.isNotPredefinedZoom=!1,this.pinchStep=0,this.reRenderPageNumber=0,this.magnifyPageRerenderTimer=null,this.rerenderOnScrollTimer=null,this.rerenderInterval=null,this.touchCenterX=0,this.touchCenterY=0,this.mouseCenterX=0,this.mouseCenterY=0,this.pageRerenderCount=0,this.imageObjects=[],this.topValue=0,this.isTapToFitZoom=!1,this.fitType=null,this.isPinchZoomed=!1,this.isPagePinchZoomed=!1,this.isRerenderCanvasCreated=!1,this.isMagnified=!1,this.isPagesZoomed=!1,this.isPinchScrolled=!1,this.isAutoZoom=!1,this.isDoubleTapZoom=!1,this.isFormFieldPageZoomed=!1,this.isWebkitMobile=!1,this.isFitToPageMode=!0,this.pdfViewer=e,this.pdfViewerBase=t,this.zoomLevel=2,this.isWebkitMobile=/Chrome/.test(navigator.userAgent)||/Google Inc/.test(navigator.vendor)||-1!==navigator.userAgent.indexOf("Safari")}return e.prototype.zoomTo=function(e){e<10?e=10:e>400&&(e=400),this.fitType=null,this.isNotPredefinedZoom=!1,this.isAutoZoom&&this.isInitialLoading?this.pdfViewerBase.onWindowResize():(this.isAutoZoom=!1,this.onZoomChanged(e)),this.isInitialLoading=!1},e.prototype.zoomIn=function(){(this.fitType||this.isNotPredefinedZoom)&&(this.zoomLevel=this.lowerZoomLevel,this.fitType=null),this.isNotPredefinedZoom=!1,this.zoomLevel>=8?this.zoomLevel=8:this.zoomLevel++,this.isAutoZoom=!1,this.onZoomChanged(this.zoomPercentages[this.zoomLevel])},e.prototype.zoomOut=function(){(this.fitType||this.isNotPredefinedZoom)&&(this.zoomLevel=this.higherZoomLevel,this.fitType=null),this.isNotPredefinedZoom=!1,this.zoomLevel<=0?this.zoomLevel=0:this.zoomLevel--,this.isAutoZoom=!1,this.onZoomChanged(this.zoomPercentages[this.zoomLevel])},e.prototype.fitToWidth=function(){this.isAutoZoom=!1;var e=this.calculateFitZoomFactor("fitToWidth");this.onZoomChanged(e)},e.prototype.fitToAuto=function(){this.isAutoZoom=!0;var e=this.calculateFitZoomFactor("fitToWidth");this.onZoomChanged(e)},e.prototype.fitToPage=function(){var e=this.calculateFitZoomFactor("fitToPage");null!==e&&(this.isAutoZoom=!1,this.onZoomChanged(e),ge.isDevice&&!this.pdfViewer.enableDesktopMode?this.isWebkitMobile?this.pdfViewerBase.viewerContainer.style.overflowY="auto":this.pdfViewerBase.viewerContainer.style.overflowY="hidden":this.pdfViewerBase.viewerContainer.style.overflowY="auto",this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1]&&(this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top*this.zoomFactor))},e.prototype.calculateFitZoomFactor=function(e){var t=this.pdfViewerBase.viewerContainer.getBoundingClientRect().width,i=this.pdfViewerBase.viewerContainer.getBoundingClientRect().height;if(0===t&&0===i&&(t=parseFloat(this.pdfViewer.width.toString()),i=parseFloat(this.pdfViewer.height.toString())),isNaN(i)||isNaN(t))return null;if(this.fitType=e,"fitToWidth"===this.fitType){var n=(t-this.scrollWidth)/this.pdfViewerBase.highestWidth;return this.isAutoZoom&&(this.fitType=null,1===(n=Math.min(1,n))&&(this.zoomLevel=2)),parseInt((100*n).toString())}this.isFitToPageMode=!0;n=(t-this.scrollWidth-10)/this.pdfViewerBase.highestWidth;var o=i/this.pdfViewerBase.highestHeight;return o>n&&(o=n,this.isFitToPageMode=!1),parseInt((100*o).toString())},e.prototype.initiateMouseZoom=function(e,t,i){var n=this.positionInViewer(e,t);this.mouseCenterX=n.x,this.mouseCenterY=n.y,this.zoomTo(i)},e.prototype.pinchIn=function(){this.fitType=null;var e=this.zoomFactor-this.pinchStep;if(e<4&&e>2&&(e=this.zoomFactor-this.pinchStep),e<=1.5&&(e=this.zoomFactor-this.pinchStep/1.5),e<.25&&(e=.25),this.isPinchZoomed=!0,this.onZoomChanged(100*e),this.isTapToFitZoom=!0,ge.isDevice&&!this.pdfViewer.enableDesktopMode&&100*this.zoomFactor===50){var t=this.calculateFitZoomFactor("fitToWidth");this.fitType=null,t<=50&&this.fitToWidth()}},e.prototype.pinchOut=function(){this.fitType=null;var e=this.zoomFactor+this.pinchStep;ge.isDevice&&!this.pdfViewer.enableDesktopMode||e>2&&(e+=this.pinchStep),e>4&&(e=4),this.isTapToFitZoom=!0,this.isPinchZoomed=!0,this.onZoomChanged(100*e)},e.prototype.getZoomLevel=function(e){for(var t=0,i=this.zoomPercentages.length-1;t<=i&&(0!==t||0!==i);){var n=Math.round((t+i)/2);this.zoomPercentages[n]<=e?t=n+1:this.zoomPercentages[n]>=e&&(i=n-1)}return this.higherZoomLevel=t,this.lowerZoomLevel=i,i},e.prototype.checkZoomFactor=function(){return this.zoomPercentages.indexOf(100*this.zoomFactor)>-1},e.prototype.onZoomChanged=function(e){if(e&&(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.closePopupMenu(),this.previousZoomFactor=this.zoomFactor,this.zoomLevel=this.getZoomLevel(e),this.zoomFactor=this.getZoomFactor(e),this.zoomFactor<=.25?this.pdfViewerBase.isMinimumZoom=!0:this.pdfViewerBase.isMinimumZoom=!1,ge.isDevice&&!this.pdfViewer.enableDesktopMode?this.isWebkitMobile?this.pdfViewerBase.viewerContainer.style.overflowY="auto":this.pdfViewerBase.viewerContainer.style.overflowY="hidden":this.pdfViewerBase.viewerContainer.style.overflowY="auto",this.pdfViewerBase.pageCount>0&&(this.previousZoomFactor!==this.zoomFactor&&(this.isPinchZoomed?(ge.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.pdfViewerBase.mobilePageNoContainer.style.left=this.pdfViewer.element.clientWidth/2-parseFloat(this.pdfViewerBase.mobilePageNoContainer.style.width)/2+"px"),this.responsivePages()):this.magnifyPages()),S()||this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.updateZoomButtons(),this.isInitialLoading||this.previousZoomFactor!==this.zoomFactor&&(this.pdfViewer.zoomValue=parseInt((100*this.zoomFactor).toString()),this.pdfViewer.fireZoomChange())),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.updateZoomPercentage(this.zoomFactor),this.isInitialLoading||this.previousZoomFactor!==this.zoomFactor&&(this.pdfViewer.zoomValue=parseInt((100*this.zoomFactor).toString()),this.pdfViewer.fireZoomChange()),ge.isDevice&&!this.pdfViewer.enableDesktopMode&&this.isPinchZoomed)){var t=parseInt((100*this.zoomFactor).toString())+"%";this.pdfViewerBase.navigationPane.createTooltipMobile(t)}},e.prototype.setTouchPoints=function(e,t){var i=this.positionInViewer(e,t);this.touchCenterX=i.x,this.touchCenterY=i.y},e.prototype.initiatePinchMove=function(e,t,i,n){this.isPinchScrolled=!1,this.isMagnified=!1,this.reRenderPageNumber=this.pdfViewerBase.currentPageNumber;var o=this.positionInViewer((e+i)/2,(t+n)/2);this.touchCenterX=o.x,this.touchCenterY=o.y,this.zoomOverPages(e,t,i,n)},e.prototype.magnifyPages=function(){this.clearRerenderTimer(),this.isPagesZoomed||(this.reRenderPageNumber=this.pdfViewerBase.currentPageNumber),this.pdfViewerBase.documentLoaded||this.pdfViewerBase.isInitialPageMode||(this.isPagesZoomed=!0);var e=this.pdfViewerBase.viewerContainer.scrollTop;this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(!1,!0),!this.pdfViewer.formDesignerModule||this.pdfViewerBase.documentLoaded||this.pdfViewerBase.isDocumentLoaded||(this.isFormFieldPageZoomed=!0),this.isInitialLoading||(this.isMagnified=!0),this.updatePageLocation(),this.resizeCanvas(this.reRenderPageNumber),this.calculateScrollValuesOnMouse(e),this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.resizeTouchElements();var t=this.pdfViewer.annotationModule;if(t&&t.textMarkupAnnotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.updateCurrentResizerPosition(),this.pdfViewerBase.pageSize.length>0){this.pdfViewerBase.pageContainer.style.height=this.topValue+this.pdfViewerBase.getPageHeight(this.pdfViewerBase.pageSize.length-1)+"px";var i=this;this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[],this.pdfViewerBase.documentLoaded||(this.magnifyPageRerenderTimer=setTimeout((function(){i.rerenderMagnifiedPages()}),800))}},e.prototype.updatePageLocation=function(){this.topValue=0;for(var e=1;e<this.pdfViewerBase.pageSize.length;e++)this.topValue+=(this.pdfViewerBase.pageSize[e].height+this.pdfViewerBase.pageGap)*this.zoomFactor;var t=this.pdfViewerBase.pageCount<10?this.pdfViewerBase.pageCount:10;for(e=0;e<t;e++)this.updatePageContainer(e,this.pdfViewerBase.getPageWidth(e),this.pdfViewerBase.getPageHeight(e),this.pdfViewerBase.getPageTop(e),!0)},e.prototype.updatePageContainer=function(e,t,i,n,o){var s=this.pdfViewerBase.getElement("_pageDiv_"+e);if(s){s.style.width=t+"px",s.style.height=i+"px";var a=this.pdfViewerBase.getElement("_textLayer_"+e);a&&(a.style.width=t+"px",a.style.height=i+"px"),s.style.width=t+"px",s.style.height=i+"px",this.pdfViewer.enableRtl?s.style.right=this.pdfViewerBase.updateLeftPosition(e)+"px":s.style.left=this.pdfViewerBase.updateLeftPosition(e)+"px",s.style.top=n+"px",this.pdfViewerBase.pageContainer.style.width=this.pdfViewerBase.viewerContainer.clientWidth+"px",this.pdfViewerBase.renderPageCanvas(s,t,i,e,"block")}},e.prototype.clearRerenderTimer=function(){clearTimeout(this.rerenderOnScrollTimer),clearTimeout(this.magnifyPageRerenderTimer),this.clearIntervalTimer(),this.isPinchScrolled=!1},e.prototype.clearIntervalTimer=function(){clearInterval(this.rerenderInterval),this.rerenderInterval=null,this.clearRendering();for(var e=document.querySelectorAll('canvas[id*="'+this.pdfViewer.element.id+'_oldCanvas_"]'),t=0;t<e.length;t++){var i=parseInt(e[t].id.split("_oldCanvas_")[1]),n=this.pdfViewerBase.getElement("_pageCanvas_"+i);n?(e[t].id=n.id,n.parentElement.removeChild(n)):e[t].id=this.pdfViewer.element.id+"_pageCanvas_"+i,this.pdfViewerBase.isTextMarkupAnnotationModule()&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotationsPinch(t)}this.isRerenderCanvasCreated=!1},e.prototype.pushImageObjects=function(e){m(this.imageObjects)||this.imageObjects&&this.imageObjects.push(e)},e.prototype.clearRendering=function(){if(this.imageObjects){for(var e=0;e<this.imageObjects.length;e++)this.imageObjects[e]&&(this.imageObjects[e].onload=null);this.imageObjects=[]}},e.prototype.rerenderMagnifiedPages=function(){!this.pdfViewerBase.isInitialLoaded&&!this.pdfViewerBase.isDocumentLoaded||this.pdfViewerBase.isInitialPageMode?this.pdfViewerBase.isInitialPageMode&&(this.pageRerenderCount=0,this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[],this.isMagnified=!1,this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber),this.pdfViewerBase.isInitialPageMode=!1):(this.renderInSeparateThread(this.reRenderPageNumber),this.isPagesZoomed=!1)},e.prototype.renderInSeparateThread=function(e){var t=this;this.designNewCanvas(e),this.pageRerenderCount=0,this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[],this.isMagnified=!1,this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);var i=this;this.rerenderInterval=setInterval((function(){t.initiateRerender(i)}),1)},e.prototype.responsivePages=function(){this.isPagesZoomed=!0,this.clearRerenderTimer(),this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.clearTextSelection(),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.clearAllOccurrences();var e=this.pdfViewerBase.viewerContainer.scrollTop;if(this.isAutoZoom=!1,this.updatePageLocation(),this.pdfViewerBase.pageContainer.style.height=this.topValue+this.pdfViewerBase.pageSize[this.pdfViewerBase.pageSize.length-1].height*this.zoomFactor+"px",this.resizeCanvas(this.pdfViewerBase.currentPageNumber),this.pdfViewerBase.textLayer&&this.pdfViewer.formDesignerModule&&this.pdfViewerBase.textLayer.clearTextLayers(!0),this.isPinchZoomed&&this.calculateScrollValues(e),this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[],this.pdfViewer.formFieldsModule&&!this.pdfViewer.formDesignerModule){var t=this;this.pdfViewerBase.documentLoaded||(this.magnifyPageRerenderTimer=setTimeout((function(){t.rerenderMagnifiedPages()}),800))}},e.prototype.calculateScrollValues=function(e){var t=this.pdfViewerBase.currentPageNumber-1,i=this.pdfViewerBase.getElement("_pageDiv_"+t);if(i){var n=void 0,o=i.getBoundingClientRect(),s=(n=this.pdfViewer.enableRtl&&!this.isDoubleTapZoom?this.positionInViewer(o.right,o.top):this.positionInViewer(o.left,o.top)).x,a=n.y,r=a*this.previousZoomFactor,l=e+this.touchCenterY,d=a*this.zoomFactor+(l-r<0?l-r:(l-r)*(this.zoomFactor/this.previousZoomFactor)),h=this.zoomFactor-this.previousZoomFactor>0?-this.pdfViewerBase.pageGap*(this.zoomFactor/this.previousZoomFactor):this.pdfViewerBase.pageGap*(this.previousZoomFactor/this.zoomFactor);this.pdfViewerBase.viewerContainer.scrollTop=d-this.touchCenterY+h/this.pdfViewerBase.zoomInterval;var p=o.width*this.previousZoomFactor/o.width,c=this.zoomFactor/p-1,u=this.touchCenterX-s;this.pdfViewerBase.viewerContainer.scrollLeft+=u*c}},e.prototype.calculateScrollValuesOnMouse=function(e){var t=this.pdfViewerBase.currentPageNumber-1,i=this.pdfViewerBase.getElement("_pageDiv_"+t);if(i){var n=void 0,o=i.getBoundingClientRect(),s=(n=this.pdfViewer.enableRtl?this.positionInViewer(o.right,o.top):this.positionInViewer(o.left,o.top)).x,a=n.y,r=a*this.previousZoomFactor,l=e+this.mouseCenterY,d=a*this.zoomFactor+(l-r<0?l-r:(l-r)*(this.zoomFactor/this.previousZoomFactor)),h=this.zoomFactor-this.previousZoomFactor>0?-this.pdfViewerBase.pageGap*(this.zoomFactor/this.previousZoomFactor):this.pdfViewerBase.pageGap*(this.previousZoomFactor/this.zoomFactor);this.pdfViewerBase.isTouchPad&&!this.pdfViewerBase.isMacSafari&&(h/=this.pdfViewerBase.zoomInterval),this.pdfViewerBase.viewerContainer.scrollTop=d-this.mouseCenterY+h;var p=o.width*this.previousZoomFactor/o.width,c=this.zoomFactor/p-1,u=this.mouseCenterX-s;this.pdfViewerBase.viewerContainer.scrollLeft+=u*c}},e.prototype.rerenderOnScroll=function(){var e=this;if(this.isPinchZoomed=!1,this.isPinchScrolled){this.rerenderOnScrollTimer=null,this.isPinchScrolled=!1,this.reRenderPageNumber=this.pdfViewerBase.currentPageNumber,this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[];for(var t=document.querySelectorAll('img[id*="'+this.pdfViewer.element.id+'_pageCanvas_"]'),i=0;i<t.length;i++){var n=parseInt(t[i].id.split("_pageCanvas_")[1]),o=this.pdfViewerBase.pageSize[n].width;816<o&&this.pdfViewer.tileRenderingSettings.enableTileRendering&&(this.pdfViewer.restrictZoomRequest,t[i].style.width=o*this.pdfViewerBase.getZoomFactor()+"px",t[i].style.height=this.pdfViewerBase.pageSize[n].height*this.pdfViewerBase.getZoomFactor()+"px")}if(this.pdfViewerBase.textLayer){var s=document.querySelectorAll('div[id*="'+this.pdfViewer.element.id+'_textLayer_"]');for(i=0;i<s.length;i++)s[i].style.display="block"}if(this.pdfViewerBase.isTextMarkupAnnotationModule())for(var a=document.querySelectorAll('canvas[id*="'+this.pdfViewer.element.id+'_annotationCanvas_"]'),r=0;r<a.length;r++){n=a[r].id.split("_annotationCanvas_")[1];this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotationsPinch(parseInt(n))}this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber),this.isPagePinchZoomed=!1,this.rerenderOnScrollTimer=setTimeout((function(){e.pdfViewerBase.pageViewScrollChanged(e.reRenderPageNumber)}),300)}},e.prototype.pinchMoveScroll=function(){var e=this;this.isRerenderCanvasCreated&&this.clearIntervalTimer(),(this.isPagesZoomed||!this.isRerenderCanvasCreated&&this.isPagePinchZoomed)&&(this.clearRendering(),this.isPagesZoomed=!1,clearTimeout(this.magnifyPageRerenderTimer),this.isPinchScrolled=!0,this.isFormFieldPageZoomed=!0,this.rerenderOnScrollTimer=setTimeout((function(){e.rerenderOnScroll()}),100))},e.prototype.initiateRerender=function(e){var t=!1;(this.previousZoomFactor<.4||this.pdfViewerBase.isMinimumZoom)&&(t=!0),e.pageRerenderCount!==e.pdfViewerBase.reRenderedCount&&!t||0===e.pageRerenderCount||0===e.pdfViewerBase.reRenderedCount||(e.reRenderAfterPinch(this.reRenderPageNumber),e.isFormFieldPageZoomed=!1)},e.prototype.reRenderAfterPinch=function(e){this.pageRerenderCount=0;var t=e-3,i=e+1;this.pdfViewerBase.isMinimumZoom&&(t=e-4,i=e+4),t=t>0?t:0,i=i<this.pdfViewerBase.pageCount?i:this.pdfViewerBase.pageCount-1;for(var n=t;n<=i;n++){var o=this.pdfViewerBase.getElement("_pageDiv_"+n),s=(this.pdfViewerBase.getElement("_pageCanvas_"+n),this.pdfViewerBase.getElement("_oldCanvas_"+n));s&&s.parentNode.removeChild(s),this.pdfViewerBase.isTextMarkupAnnotationModule()?this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(n):this.pdfViewer.formDesignerModule&&(this.rerenderAnnotations(n),this.pdfViewer.renderDrawing(void 0,e)),o&&(o.style.visibility="visible")}this.isRerenderCanvasCreated=!1,this.isPagePinchZoomed=!1,0!==this.pdfViewerBase.reRenderedCount&&(this.pdfViewerBase.reRenderedCount=0,this.pageRerenderCount=0,clearInterval(this.rerenderInterval),this.rerenderInterval=null),this.imageObjects=[]},e.prototype.rerenderAnnotations=function(e){for(var t=document.querySelectorAll("#"+this.pdfViewer.element.id+"_old_annotationCanvas_"+e),i=0;i<t.length;i++)t[i]&&t[i].parentElement.removeChild(t[i]);var n=this.pdfViewerBase.getElement("_annotationCanvas_"+e);n&&(n.style.display="block")},e.prototype.designNewCanvas=function(e){this.pdfViewerBase.textLayer&&this.pdfViewerBase.textLayer.clearTextLayers();var t=e-3,i=e+1;this.pdfViewerBase.isMinimumZoom&&(t=e-4,i=e+4),t=t>0?t:0,i=i<this.pdfViewerBase.pageCount?i:this.pdfViewerBase.pageCount-1;for(var n=t;n<=i;n++){var o=this.pdfViewerBase.getElement("_pageCanvas_"+n),s=this.pdfViewerBase.pageSize[n].width*this.zoomFactor,a=this.pdfViewerBase.pageSize[n].height*this.zoomFactor;o&&!this.pdfViewer.restrictZoomRequest?this.pdfViewerBase.renderPageCanvas(this.pdfViewerBase.getElement("_pageDiv_"+n),s,a,n,"none"):this.pdfViewer.restrictZoomRequest||this.pdfViewerBase.renderPageCanvas(this.pdfViewerBase.getElement("_pageDiv_"+n),s,a,n,"none")}this.isRerenderCanvasCreated=!0},e.prototype.pageRerenderOnMouseWheel=function(){var e=this;this.isRerenderCanvasCreated&&(this.clearIntervalTimer(),clearTimeout(this.magnifyPageRerenderTimer),this.isPinchScrolled||(this.isPinchScrolled=!0,this.rerenderOnScrollTimer=setTimeout((function(){e.rerenderOnScroll()}),100)))},e.prototype.renderCountIncrement=function(){this.isRerenderCanvasCreated&&this.pageRerenderCount++},e.prototype.rerenderCountIncrement=function(){this.pageRerenderCount>0&&this.pdfViewerBase.reRenderedCount++},e.prototype.resizeCanvas=function(e){var t=this.pdfViewer.annotationModule;if(t&&t.inkAnnotationModule){var i=parseInt(t.inkAnnotationModule.currentPageNumber);t.inkAnnotationModule.drawInkAnnotation(i)}if(t&&t.freeTextAnnotationModule){var n={x:t.freeTextAnnotationModule.currentPosition[0],y:t.freeTextAnnotationModule.currentPosition[1],width:t.freeTextAnnotationModule.currentPosition[2],height:t.freeTextAnnotationModule.currentPosition[3]};t.freeTextAnnotationModule.addInputInZoom(n)}var o=e-3,s=e+3;this.pdfViewerBase.isMinimumZoom&&(o=e-4,s=e+4),o=o>0?o:0,s=s<this.pdfViewerBase.pageCount?s:this.pdfViewerBase.pageCount-1;for(var a=o;a<=s;a++){var r=this.pdfViewerBase.getElement("_pageDiv_"+a),l=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+a);if(r&&o<=a&&a<=s){var d=!1;if(this.pdfViewer.textSelectionModule&&(d=this.pdfViewer.textSelectionModule.isSelectionAvailableOnScroll(a)),null!=this.pdfViewerBase.pageSize[a]){var h=this.pdfViewerBase.pageSize[a].width*this.zoomFactor,p=this.pdfViewerBase.pageSize[a].height*this.zoomFactor;r.style.width=h+"px",r.style.height=p+"px",r.style.top=this.pdfViewerBase.pageSize[a].top*this.zoomFactor+"px",this.pdfViewer.enableRtl?r.style.right=this.pdfViewerBase.updateLeftPosition(a)+"px":r.style.left=this.pdfViewerBase.updateLeftPosition(a)+"px";var c=this.pdfViewerBase.getElement("_pageCanvas_"+a);c&&(c.style.width=h+"px",c.style.height=p+"px",this.pdfViewer.annotation?this.pdfViewer.annotationModule.resizeAnnotations(h,p,a):this.pdfViewer.formDesignerModule&&this.pdfViewer.formDesignerModule.resizeAnnotations(h,p,a));var u=this.pdfViewerBase.retrieveCurrentZoomFactor(),f=void 0,g=void 0;f=g=this.pdfViewerBase.getTileCount(this.pdfViewerBase.pageSize[a].width);var y=this.pdfViewer.tileRenderingSettings;if(y.enableTileRendering&&y.x>0&&y.y>0&&(1200<this.pdfViewerBase.pageSize[a].width||this.pdfViewerBase.getZoomFactor()>2)&&(f=y.x,g=y.y),1===f*g){var v=this.pdfViewerBase.getWindowSessionStorage(a,u)?this.pdfViewerBase.getWindowSessionStorage(a,u):this.pdfViewerBase.getPinchZoomPage(a);if(v){if(D=(v=JSON.parse(v)).image){c.src=D,c.style.display="block";for(var w=document.querySelectorAll('img[id*="'+this.pdfViewer.element.id+"_tileimg_"+a+'_"]'),b=this.pdfViewerBase.getElement("_pageDiv_"+a),S=0;S<w.length;S++){var C=w[S].id.split("_");parseFloat(C[C.length-3])!=this.pdfViewerBase.getZoomFactor()&&b.removeChild(w[S])}for(var x=document.querySelectorAll('img[id*="'+this.pdfViewer.element.id+'_oldCanvas"]'),M=0;M<x.length;M++)r.removeChild(x[M])}this.pdfViewerBase.isReRenderRequired=!1}else this.pdfViewerBase.isReRenderRequired=!0}else{w=document.querySelectorAll('img[id*="'+this.pdfViewer.element.id+"_tileimg_"+a+'_"]');for(var I=0;I<w.length;I++){C=w[I].id.split("_");var T=parseFloat(C[C.length-2]),A=parseFloat(C[C.length-1]),k=JSON.parse(this.pdfViewerBase.getWindowSessionStorageTile(a,T,A,u));if(k&&k.zoomFactor&&(u=k.zoomFactor),parseFloat(C[C.length-4])===a){c.style.display="none";var V=w[I];if(V.nodeType==Node.ELEMENT_NODE){var E=1.5;m(k)||(E=m(k.scaleFactor)?1.5:k.scaleFactor);var D,N=this.pdfViewerBase.pageSize[a].width*u*E/f,F=this.pdfViewerBase.pageSize[a].height*u*E/g,L=N,P=parseFloat(C[C.length-2])*N,O=parseFloat(C[C.length-1])*F;if(V.width=L*this.pdfViewerBase.getZoomFactor()/u/E,V.style.width=L*this.pdfViewerBase.getZoomFactor()/u/E+"px",V.style.left=P*this.pdfViewerBase.getZoomFactor()/u/E+"px",V.style.top=O*this.pdfViewerBase.getZoomFactor()/u/E+"px",V.id=this.pdfViewer.element.id+"_tileimg_"+a+"_"+this.pdfViewerBase.getZoomFactor()+"_"+T+"_"+A,k)(D=k.image)&&(V.src=D),this.pdfViewerBase.isReRenderRequired=!1;else this.pdfViewerBase.isReRenderRequired=!0}}}0===w.length&&(this.pdfViewerBase.isReRenderRequired=!0)}var B=r.getElementsByTagName("a");if(0!==B.length)for(var z=B.length-1;z>=0;z--)B[z].parentNode.removeChild(B[z]);if(l){if(l.style.width=h+"px",l.style.height=p+"px",this.pdfViewer.textSelectionModule)if(this.isPinchZoomed)l.style.display="none";else if(this.isMagnified){var j=e-2===0?0:e-2,R=e===this.pdfViewerBase.pageCount?this.pdfViewerBase.pageCount-1:e+1;j<=a&&a<=R&&(this.pdfViewer.textSelectionModule.isTextSelection&&d||this.pdfViewerBase.textLayer.getTextSearchStatus()||this.pdfViewerBase.isInitialPageMode)?(this.pdfViewerBase.textLayer.resizeTextContentsOnZoom(a),this.pdfViewer.textSelectionModule.isTextSelection&&d&&this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(a)):l.style.display="none"}else l.style.display="block";this.pdfViewerBase.applyElementStyles(l,a)}var _=Rh(this.pdfViewer.element.id+"_textLayer_"+a);if(_){var H=Rh(this.pdfViewer.element.id+a+"_diagramAdorner_svg");H&&(H.style.width=h+"px",H.style.height=p+"px");var W=Rh(this.pdfViewer.element.id+a+"_diagramAdornerLayer");W&&(W.style.width=h+"px",W.style.height=p+"px"),_.style.width=h+"px",_.style.height=p+"px",this.pdfViewer.renderSelector(a,this.pdfViewer.annotationSelectorSettings),this.pdfViewerBase.applyElementStyles(W,a)}}}}},e.prototype.zoomOverPages=function(e,t,i,n){var o=Math.sqrt(Math.pow(e-i,2)+Math.pow(t-n,2));this.previousTouchDifference>-1&&(o>this.previousTouchDifference?(this.pinchStep=this.getPinchStep(o,this.previousTouchDifference),this.pinchOut()):o<this.previousTouchDifference&&(this.pinchStep=this.getPinchStep(this.previousTouchDifference,o),this.pinchIn())),this.previousTouchDifference=o},e.prototype.pinchMoveEnd=function(){this.touchCenterX=0,this.touchCenterY=0,this.previousTouchDifference=-1,this.isPinchZoomed&&(this.isPinchScrolled=!1,this.isPagePinchZoomed=!0,this.pinchMoveScroll())},e.prototype.fitPageScrollMouseWheel=function(e){"fitToPage"===this.fitType&&(this.isMagnified=!1,e.preventDefault(),e.deltaY>0?this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1):this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1))},e.prototype.magnifyBehaviorKeyDown=function(e){var t=!!!!navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)&&e.metaKey;switch(e.keyCode){case 38:case 37:case 33:"fitToPage"!==this.fitType||(e.ctrlKey||t)&&e.shiftKey||(e.preventDefault(),this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1));break;case 40:case 39:case 34:"fitToPage"!==this.fitType||(e.ctrlKey||t)&&e.shiftKey||(e.preventDefault(),this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1));break;case 187:(e.ctrlKey||t)&&(e.preventDefault(),this.zoomIn());break;case 189:(e.ctrlKey||t)&&(e.preventDefault(),this.zoomOut());break;case 48:!e.ctrlKey&&!t||e.shiftKey||(e.preventDefault(),this.fitToPage());break;case 49:!e.ctrlKey&&!t||e.shiftKey||(e.preventDefault(),this.zoomTo(100))}},e.prototype.upwardScrollFitPage=function(e){e>0&&(this.pdfViewerBase.getElement("_pageDiv_"+(e-1)).style.visibility="visible",this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.pageSize[e-1].top*this.zoomFactor,this.isFitToPageMode&&(this.pdfViewerBase.getElement("_pageDiv_"+e).style.visibility="hidden"))},e.prototype.updatePagesForFitPage=function(e){"fitToPage"===this.fitType&&this.isFitToPageMode&&(e>0&&this.pdfViewerBase.getElement("_pageDiv_"+(e-1))&&(this.pdfViewerBase.getElement("_pageDiv_"+(e-1)).style.visibility="hidden"),e<this.pdfViewerBase.pageCount-1&&this.pdfViewerBase.getElement("_pageDiv_"+(e+1))&&(this.pdfViewerBase.getElement("_pageDiv_"+(e+1)).style.visibility="hidden"))},e.prototype.onDoubleTapMagnification=function(){this.pdfViewer.toolbarModule&&S()&&this.pdfViewer.toolbarModule.showToolbar(!0);var e=this.pdfViewerBase.viewerContainer.scrollTop;if(this.pdfViewer.selectedItems.annotations[0]){if(S()&&this.pdfViewer.selectedItems.annotations[0]&&"FreeText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType){var t={};t.x=this.pdfViewer.selectedItems.annotations[0].bounds.x,t.y=this.pdfViewer.selectedItems.annotations[0].bounds.y,this.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(t,this.pdfViewer.selectedItems.annotations[0])}}else this.isDoubleTapZoom=!0,this.isTapToFitZoom?this.fitToWidth():this.zoomFactor<2?this.zoomTo(200):this.fitToWidth(),this.calculateScrollValues(e),this.isTapToFitZoom=!this.isTapToFitZoom,this.isDoubleTapZoom=!1},e.prototype.downwardScrollFitPage=function(e){e!==this.pdfViewerBase.pageCount-1&&(this.pdfViewerBase.getElement("_pageDiv_"+(e+1)).style.visibility="visible",this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.pageSize[e+1].top*this.zoomFactor,this.isFitToPageMode&&(e+1===this.pdfViewerBase.pageCount-1?this.pdfViewerBase.getElement("_pageDiv_"+e).style.visibility="hidden":this.pdfViewerBase.getElement("_pageDiv_"+(e+2)).style.visibility="hidden"))},e.prototype.getMagnifiedValue=function(e){return e/this.previousZoomFactor*this.zoomFactor},e.prototype.destroy=function(){this.imageObjects=void 0},e.prototype.getZoomFactor=function(e){return e/100},e.prototype.getModuleName=function(){return"Magnification"},e.prototype.getPinchStep=function(e,t){var i=(e-t)/100;return i<.02?i=.02:i>1&&(i=.1),i},e.prototype.zoomToRect=function(e){var t,i=this.pdfViewerBase,n=i.viewerContainer,o=this.pdfViewer;if(e.width>0&&e.height>0){var s={x:e.x,y:e.y},a=o.getPageNumberFromClientPoint(s);if(a>0){var r=n.getBoundingClientRect().width/e.width,l=n.getBoundingClientRect().height/e.height;t=r<l?r:l;var d;d=100*i.getZoomFactor()*t;var h=n.scrollTop,p=n.scrollLeft;this.zoomTo(d),n.scrollTop=h,n.scrollLeft=p;var c=i.getZoomFactor(),u={x:e.x,y:e.y};u=o.convertClientPointToPagePoint(u,a),i.updateScrollTop(a-1),n.scrollLeft=(u.x-p)*c,n.scrollTop=(u.y+i.pageSize[a-1].top-h)*c}}},e.prototype.positionInViewer=function(e,t){var i=this.pdfViewerBase.mainContainer.getBoundingClientRect();return{x:e-i.left,y:t-i.top}},e}(),qg=function(){function e(e,t){this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.goToNextPage=function(){this.pageNumber=this.pdfViewerBase.currentPageNumber,this.pageNumber++,this.pageNumber<=this.pdfViewerBase.pageCount&&this.pdfViewerBase.updateScrollTop(this.pageNumber-1)},e.prototype.goToPreviousPage=function(){this.pageNumber=this.pdfViewerBase.currentPageNumber,this.pageNumber--,this.pageNumber>0&&this.pdfViewerBase.updateScrollTop(this.pageNumber-1)},e.prototype.goToPage=function(e){e>0&&e<=this.pdfViewerBase.pageCount&&this.pdfViewerBase.currentPageNumber!==e&&this.pdfViewerBase.updateScrollTop(e-1),this.pdfViewer.magnificationModule.resizeCanvas(e);var t=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(e-1));t&&(t.style.display="block")},e.prototype.goToFirstPage=function(){this.pageNumber=0,this.pdfViewerBase.updateScrollTop(this.pageNumber)},e.prototype.goToLastPage=function(){this.pageNumber=this.pdfViewerBase.pageCount-1,this.pdfViewerBase.updateScrollTop(this.pageNumber)},e.prototype.destroy=function(){this.pageNumber=0},e.prototype.getModuleName=function(){return"Navigation"},e}(),Yg=function(){function e(e,t){var i=this;this.currentTextMarkupAddMode="",this.selectTextMarkupCurrentPage=null,this.currentTextMarkupAnnotation=null,this.isAddAnnotationProgramatically=!1,this.currentAnnotationIndex=null,this.isAnnotationSelect=!1,this.isDropletClicked=!1,this.isRightDropletClicked=!1,this.isLeftDropletClicked=!1,this.isSelectionMaintained=!1,this.isExtended=!1,this.isNewAnnotation=!1,this.selectedTextMarkup=null,this.multiPageCollection=[],this.triggerAddEvent=!1,this.isSelectedAnnotation=!1,this.dropletHeight=20,this.annotationClickPosition={},this.maintainSelection=function(e){i.isDropletClicked=!0,i.pdfViewer.textSelectionModule.initiateSelectionByTouch(),i.isExtended=!0,i.pdfViewer.textSelectionModule.selectionRangeArray=[]},this.selectionEnd=function(e){i.isDropletClicked&&(i.isDropletClicked=!1)},this.annotationLeftMove=function(e){i.isDropletClicked&&(i.isLeftDropletClicked=!0)},this.annotationRightMove=function(e){i.isDropletClicked&&(i.isRightDropletClicked=!0)},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.createAnnotationSelectElement=function(){this.dropDivAnnotationLeft=we("div",{id:this.pdfViewer.element.id+"_droplet_left",className:"e-pv-drop"}),this.dropDivAnnotationLeft.style.borderRight="2px solid",this.dropDivAnnotationRight=we("div",{id:this.pdfViewer.element.id+"_droplet_right",className:"e-pv-drop"}),this.dropDivAnnotationRight.style.borderLeft="2px solid",this.dropElementLeft=we("div",{className:"e-pv-droplet",id:this.pdfViewer.element.id+"_dropletspan_left"}),this.dropElementLeft.style.transform="rotate(0deg)",this.dropDivAnnotationLeft.appendChild(this.dropElementLeft),this.dropElementRight=we("div",{className:"e-pv-droplet",id:this.pdfViewer.element.id+"_dropletspan_right"}),this.dropElementRight.style.transform="rotate(-90deg)",this.dropDivAnnotationRight.appendChild(this.dropElementRight),this.pdfViewerBase.pageContainer.appendChild(this.dropDivAnnotationLeft),this.pdfViewerBase.pageContainer.appendChild(this.dropDivAnnotationRight),this.dropElementLeft.style.top="20px",this.dropElementRight.style.top="20px",this.dropElementRight.style.left="-8px",this.dropElementLeft.style.left="-8px",this.dropDivAnnotationLeft.style.display="none",this.dropDivAnnotationRight.style.display="none",this.dropDivAnnotationLeft.addEventListener("mousedown",this.maintainSelection),this.dropDivAnnotationLeft.addEventListener("mousemove",this.annotationLeftMove),this.dropDivAnnotationLeft.addEventListener("mouseup",this.selectionEnd),this.dropDivAnnotationRight.addEventListener("mousedown",this.maintainSelection),this.dropDivAnnotationRight.addEventListener("mousemove",this.annotationRightMove),this.dropDivAnnotationRight.addEventListener("mouseup",this.selectionEnd)},e.prototype.textSelect=function(e,t,i){if(this.isLeftDropletClicked){var n=this.dropDivAnnotationRight.getBoundingClientRect(),o=this.dropDivAnnotationLeft.getBoundingClientRect(),s=t,a=i;e.classList.contains("e-pv-text")&&(o.top-25>n.top?this.pdfViewer.textSelectionModule.textSelectionOnDrag(e,s,a,!0):this.pdfViewer.textSelectionModule.textSelectionOnDrag(e,s,a,!1),this.updateLeftposition(s,a))}else if(this.isRightDropletClicked){n=this.dropDivAnnotationLeft.getBoundingClientRect(),s=t,a=i;e.classList.contains("e-pv-text")&&(a>=n.top?this.pdfViewer.textSelectionModule.textSelectionOnDrag(e,s,a,!0):this.pdfViewer.textSelectionModule.textSelectionOnDrag(e,s,a,!1),this.updatePosition(s,a))}},e.prototype.showHideDropletDiv=function(e){var t=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode;this.isEnableTextMarkupResizer(t)&&this.dropDivAnnotationLeft&&this.dropDivAnnotationRight&&(e?(this.dropDivAnnotationLeft.style.display="none",this.dropDivAnnotationRight.style.display="none"):(this.dropDivAnnotationLeft.style.display="",this.dropDivAnnotationRight.style.display="",this.updateDropletStyles(t)))},e.prototype.isEnableTextMarkupResizer=function(e){var t=!1;return e?("Highlight"===e&&this.pdfViewer.highlightSettings.enableTextMarkupResizer||"Underline"===e&&this.pdfViewer.underlineSettings.enableTextMarkupResizer||"Strikethrough"===e&&this.pdfViewer.strikethroughSettings.enableTextMarkupResizer||this.pdfViewer.enableTextMarkupResizer)&&(t=!0):(this.pdfViewer.enableTextMarkupResizer||this.pdfViewer.highlightSettings.enableTextMarkupResizer||this.pdfViewer.underlineSettings.enableTextMarkupResizer||this.pdfViewer.strikethroughSettings.enableTextMarkupResizer)&&(t=!0),t},e.prototype.updateDropletStyles=function(e){this.isEnableTextMarkupResizer(e)&&this.dropDivAnnotationLeft&&this.dropDivAnnotationLeft.offsetWidth>0&&(this.dropDivAnnotationLeft.style.width=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropDivAnnotationRight.style.width=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropElementLeft.style.width=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropElementRight.style.width=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropDivAnnotationLeft.style.height=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropDivAnnotationRight.style.height=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropElementLeft.style.height=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropElementRight.style.height=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropElementLeft.style.top=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropElementRight.style.top=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px")},e.prototype.updateAnnotationBounds=function(){this.isSelectionMaintained=!1;var e=this.currentTextMarkupAnnotation;e&&e.isMultiSelect?(this.showHideDropletDiv(!0),this.updateMultiAnnotBounds(e)):e&&e.bounds&&(this.retreieveSelection(e,null),this.pdfViewer.textSelectionModule.maintainSelection(this.selectTextMarkupCurrentPage,!1),this.isSelectionMaintained=!0,window.getSelection().removeAllRanges())},e.prototype.updateMultiAnnotBounds=function(e){if(!e.annotpageNumbers&&(r=this.getAnnotations(e.pageNumber,null)))for(var t=0;t<r.length;t++)if(r[t].annotName===e.annotName){e=r[t];break}for(var i=e.annotpageNumbers[0],n=e.annotpageNumbers[0],o=0;o<e.annotpageNumbers.length;o++){var s=e.annotpageNumbers[o];s>=n&&(n=s),s<=i&&(i=s)}for(var a=i;a<=n;a++){var r;if(r=this.getAnnotations(a,null))for(var l=0;l<e.annotNameCollection.length;l++){var d=e.annotNameCollection[l];for(t=0;t<r.length;t++)if(r[t].annotName===d){var h=r[t];this.retreieveSelection(h,null),this.pdfViewer.textSelectionModule.maintainSelection(h.pageNumber,!1)}}}this.isSelectionMaintained=!0,window.getSelection().removeAllRanges()},e.prototype.retreieveSelection=function(e,t){for(var i=0;i<e.bounds.length;i++){var n=e.bounds[i],o=(n.left?n.left:n.Left)*this.pdfViewerBase.getZoomFactor(),s=(n.top?n.top:n.Top)*this.pdfViewerBase.getZoomFactor(),a=(n.width?n.width:n.Width)*this.pdfViewerBase.getZoomFactor(),r=(n.height?n.height:n.Height,this.pdfViewerBase.getElement("_textLayer_"+e.pageNumber));if(r){for(var l=r.childNodes,d=0;d<l.length;d++)if(l[d]){var h=l[d].getBoundingClientRect(),p=this.getClientValueTop(h.top,e.pageNumber),c=h.left-this.pdfViewerBase.getElement("_pageDiv_"+e.pageNumber).getBoundingClientRect().left,u=c+h.width,f=parseInt(l[d].style.left),m=parseInt(l[d].style.top),g=this.pdfViewer.textSelectionModule.checkLeftBounds(c,f,u,o),y=this.pdfViewer.textSelectionModule.checkTopBounds(p,m,s);if(g&&y){t=l[d];break}}if(null!=t){var v=this.pdfViewerBase.getElement("_textLayer_"+e.pageNumber).getBoundingClientRect();this.pdfViewer.textSelectionModule.textSelectionOnMouseMove(t,o+v.left,s+v.top,!1),e.bounds.length-1===i&&this.pdfViewer.textSelectionModule.textSelectionOnMouseMove(t,o+v.left+a,s+v.top,!1)}}}},e.prototype.updatePosition=function(e,t,i){this.showHideDropletDiv(!1);var n=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top,o=this.getClientValueTop(t,this.pdfViewerBase.currentPageNumber-1),s=document.getElementById(this.pdfViewer.element.id+"_droplet_right");s.style.top=i?o*this.pdfViewerBase.getZoomFactor()+n*this.pdfViewerBase.getZoomFactor()+"px":o+n*this.pdfViewerBase.getZoomFactor()+"px",s.style.left=e+this.pdfViewerBase.viewerContainer.scrollLeft-this.pdfViewerBase.viewerContainer.getBoundingClientRect().left+"px"},e.prototype.updateLeftposition=function(e,t,i){this.showHideDropletDiv(!1);var n=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top,o=this.getClientValueTop(t,this.pdfViewerBase.currentPageNumber-1),s=document.getElementById(this.pdfViewer.element.id+"_droplet_left");s.style.display="",s.style.top=i?o*this.pdfViewerBase.getZoomFactor()+n*this.pdfViewerBase.getZoomFactor()+"px":o+n*this.pdfViewerBase.getZoomFactor()+"px",s.style.left=e+this.pdfViewerBase.viewerContainer.scrollLeft-this.pdfViewerBase.viewerContainer.getBoundingClientRect().left-this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px"},e.prototype.getClientValueTop=function(e,t){return this.pdfViewerBase.getElement("_pageDiv_"+t)?e-this.pdfViewerBase.getElement("_pageDiv_"+t).getBoundingClientRect().top:e},e.prototype.renderTextMarkupAnnotationsInPage=function(e,t,i){var n=this.pdfViewerBase.getElement("_annotationCanvas_"+t);i?(this.renderTextMarkupAnnotations(null,t,n,this.pdfViewerBase.getZoomFactor()),this.renderTextMarkupAnnotations(e,t,n,this.pdfViewerBase.getZoomFactor(),!0)):this.renderTextMarkupAnnotations(e,t,n,this.pdfViewerBase.getZoomFactor())},e.prototype.renderTextMarkupAnnotations=function(e,t,i,n,o){if(i){var s=i.getContext("2d");s.setTransform(1,0,0,1,0,0),s.setLineDash([]);var a=void 0;if(a=o?e:this.getAnnotations(t,e))for(var r=0;r<a.length;r++){var l=a[r],d=null,h=void 0;if(l.TextMarkupAnnotationType){if(o&&this.pdfViewerBase.isJsonImported){for(var p=[],c=0;c<l.Bounds.length;c++)l.Bounds[c]=this.pdfViewerBase.importJsonForRotatedDocuments(l.Rotate,t,l.Bounds[c],l.AnnotationRotation),l.Bounds[c].left=l.Bounds[c].X,l.Bounds[c].top=l.Bounds[c].Y,p.push(l.Bounds[c]);l.Bounds=p,h=this.pdfViewerBase.isPageRotated}if(l.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(l,t,l.AnnotType),l.Author||(l.Author=this.pdfViewer.annotationModule.updateAnnotationAuthor("textMarkup",l.TextMarkupAnnotationType)),l.Subject||(l.Subject=l.TextMarkupAnnotationType),l.AnnotationSettings&&l.AnnotationSettings.isLock?l.AnnotationSettings={isLock:l.AnnotationSettings.isLock}:l.AnnotationSettings=this.getAnnotationSettings(l.TextMarkupAnnotationType),l.allowedInteractions=l.AllowedInteractions?l.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(l),d={textMarkupAnnotationType:l.TextMarkupAnnotationType,color:l.Color,allowedInteractions:l.allowedInteractions,opacity:l.Opacity,bounds:l.Bounds,author:l.Author,subject:l.Subject,modifiedDate:l.ModifiedDate,note:l.Note,rect:l.Rect,annotName:l.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(l.Comments,l,l.Author),review:{state:l.State,stateModel:l.StateModel,modifiedDate:l.ModifiedDate,author:l.Author},shapeAnnotationType:"textMarkup",pageNumber:t,textMarkupContent:l.TextMarkupContent,textMarkupStartIndex:0,textMarkupEndIndex:0,annotationSelectorSettings:this.getSettings(l),customData:this.pdfViewer.annotation.getCustomData(l),annotationAddMode:l.annotationAddMode,annotationSettings:l.AnnotationSettings,isPrint:l.IsPrint,isCommentLock:l.IsCommentLock,isAnnotationRotated:h,annotationRotation:l.AnnotationRotation},l.IsMultiSelect&&(d.annotNameCollection=l.AnnotNameCollection,d.annotpageNumbers=l.AnnotpageNumbers,d.isMultiSelect=l.IsMultiSelect),l.textMarkupContent&&""!==l.textMarkupContent&&(d.textMarkupContent=l.textMarkupContent,d.textMarkupStartIndex=l.textMarkupStartIndex,d.textMarkupEndIndex=l.textMarkupEndIndex),m(l.TextMarkupContent)&&m(l.textMarkupContent)){var u=l.Bounds[0],f=this.pdfViewerBase.getStoredData(t,!0);if(m(f))this.pdfViewerBase.requestForTextExtraction(t,d);else{var g=f.pageText.split(""),y=this.pdfViewerBase.textLayer.characterBound[t],v=this.pdfViewerBase.textMarkUpContent(u,g,y);d.textMarkupContent=v}}if(this.pdfViewer.annotationModule.storeAnnotations(t,d,"_annotations_textMarkup"),this.isAddAnnotationProgramatically){var w={opacity:d.opacity,author:l.author,subject:l.subject,modifiedDate:l.modifiedDate,width:d.bounds.width,height:d.bounds.height};this.pdfViewer.fireAnnotationAdd(d.pageNumber,d.annotName,l.TextMarkupAnnotationType,d.bounds,w)}}var b=l.TextMarkupAnnotationType?l.TextMarkupAnnotationType:l.textMarkupAnnotationType,S=l.Bounds?l.Bounds:l.bounds,C=l.Opacity?l.Opacity:l.opacity,x=l.Color?l.Color:l.color,M=l.AnnotationRotation?l.AnnotationRotation:l.annotationRotation,I=!0;switch(l.TextMarkupAnnotationType&&(I=l.IsPrint),l.textMarkupAnnotationType&&(I=l.isPrint),b){case"Highlight":this.renderHighlightAnnotation(S,C,x,s,n,I,t);break;case"Strikethrough":this.renderStrikeoutAnnotation(S,C,x,s,n,t,I,M);break;case"Underline":this.renderUnderlineAnnotation(S,C,x,s,n,t,I,M)}}var T=!1;if(this.currentTextMarkupAnnotation&&this.currentTextMarkupAnnotation.annotpageNumbers)for(var A=0;A<this.currentTextMarkupAnnotation.annotpageNumbers.length;A++)if(t===this.currentTextMarkupAnnotation.annotpageNumbers[A]){T=!0,this.isAnnotationSelect=!1;break}(t===this.selectTextMarkupCurrentPage||T)&&(this.isAnnotationSelect?this.isAnnotationSelect=!1:this.maintainAnnotationSelection())}},e.prototype.getSettings=function(e){return e.AnnotationSelectorSettings?e.AnnotationSelectorSettings:this.getSelector(e.TextMarkupAnnotationType)},e.prototype.drawTextMarkupAnnotations=function(e){this.isTextMarkupAnnotationMode=!0,this.pdfViewer.annotationModule.isFormFieldShape=!1,this.currentTextMarkupAddMode=e;var t=!0;this.multiPageCollection=[];var i=this.pdfViewer.textSelectionModule?this.pdfViewer.textSelectionModule.selectionRangeArray:[];i.length>0&&!this.isSelectionMaintained&&this.convertSelectionToTextMarkup(e,i,this.pdfViewerBase.getZoomFactor());var n,o=window.getSelection();if(o&&o.anchorNode&&(n=o.anchorNode.parentElement),this.isEnableTextMarkupResizer(e)&&this.isExtended&&window.getSelection().toString()){if((l=this.getDrawnBounds())[0]&&l[0].bounds)for(var s=this.currentTextMarkupAnnotation,a=0;a<l.length;a++)if(s&&s.pageNumber===l[a].pageIndex)this.currentTextMarkupAnnotation=s,this.selectTextMarkupCurrentPage=l[a].pageIndex,this.updateTextMarkupAnnotationBounds(l,a);else if(s&&""===e&&(e=s.textMarkupAnnotationType),s.isMultiSelect)s.isMultiSelect&&s.annotNameCollection&&this.modifyCurrentAnnotation(s,l,a);else{var r=!1;this.isMultiAnnotation(e)&&(this.multiPageCollection.push(s),r=!0),this.drawTextMarkups(e,l[a].bounds,l[a].pageIndex,l[a].rect,this.pdfViewerBase.getZoomFactor(),l[a].textContent,l[a].startIndex,l[a].endIndex,r,n)}}else if(window.getSelection().toString()){var l=this.getDrawnBounds();r=this.isMultiPageAnnotations(l,e);if(l.length>0)for(var d=0;d<l.length;d++)""===e&&(t=!1),this.drawTextMarkups(e,l[d].bounds,l[d].pageIndex,l[d].rect,this.pdfViewerBase.getZoomFactor(),l[d].textContent,l[d].startIndex,l[d].endIndex,r,n)}if(this.multiPageCollection)for(var h=0;h<this.multiPageCollection.length;h++)this.updateAnnotationNames(this.multiPageCollection[h],this.multiPageCollection[h].pageNumber);this.isExtended=!1,this.isSelectionMaintained=!1,t&&this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.clearTextSelection(),this.isEnableTextMarkupResizer(e)&&this.updateAnnotationBounds()},e.prototype.isMultiPageAnnotations=function(e,t){for(var i=!1,n=0;n<e.length;n++)if(e[n].pageIndex!==e[0].pageIndex&&this.isMultiAnnotation(t)){i=!0;break}return i},e.prototype.isMultiAnnotation=function(e){var t=!1;return("Highlight"===e&&this.pdfViewer.highlightSettings.enableMultiPageAnnotation||"Underline"===e&&this.pdfViewer.underlineSettings.enableMultiPageAnnotation||"Strikethrough"===e&&this.pdfViewer.strikethroughSettings.enableMultiPageAnnotation||this.pdfViewer.enableMultiPageAnnotation)&&(t=!0),t},e.prototype.modifyCurrentAnnotation=function(e,t,i){for(var n=0;n<e.annotNameCollection.length;n++){var o=e.annotNameCollection[n],s=this.getAnnotations(t[i].pageIndex,null);if(s)for(var a=0;a<s.length;a++)if(s[a].annotName===o){this.currentTextMarkupAnnotation=s[a],this.selectTextMarkupCurrentPage=t[i].pageIndex,this.updateTextMarkupAnnotationBounds(t,i);break}}},e.prototype.drawAnnotationSelector=function(e,t,i){for(var n=[],o=0,s=0,a=0,r=0,l=0,d=0,h=0;h<e.bounds.length;h++)if(l=e.bounds[h].top?e.bounds[h].top:e.bounds[h].Top,d=m(e.bounds[h+1])?0:e.bounds[h+1].top?e.bounds[h+1].top:e.bounds[h+1].Top,e.bounds.length>1&&h<e.bounds.length-1&&l===d)n.push(e.bounds[h]);else if((h===e.bounds.length-1||e.bounds.length>=1)&&n.push(e.bounds[h]),n.length>=1){o=n[0].left?n[0].left:n[0].Left,s=n[0].top?n[0].top:n[0].Top,r=n[0].height?n[0].height:n[0].Height;for(var p=0;p<n.length;p++)(!isNaN(n[p].width)&&n[p].width>0||!isNaN(n[p].Width)&&n[p].Width>0)&&(a+=n[p].width?n[p].width:n[p].Width);i||(i=this.pdfViewerBase.getElement("_annotationCanvas_"+e.pageNumber)),this.drawAnnotationSelectRect(i,this.getMagnifiedValue(o-.5,this.pdfViewerBase.getZoomFactor()),this.getMagnifiedValue(s-.5,this.pdfViewerBase.getZoomFactor()),this.getMagnifiedValue(a+.5,this.pdfViewerBase.getZoomFactor()),this.getMagnifiedValue(r+.5,this.pdfViewerBase.getZoomFactor()),t),n=[],a=0}},e.prototype.selectMultiPageAnnotations=function(e){for(var t=0;t<e.annotNameCollection.length;t++){var i=e.annotNameCollection[t];if(i!==e.annotName)for(var n=0;n<e.annotpageNumbers.length;n++){var o=e.annotpageNumbers[n],s=this.getAnnotations(o,null);if(s)for(var a=0;a<s.length;a++)if(s[a].annotName===i){var r=s[a];this.drawAnnotationSelector(r,e)}}}},e.prototype.deletMultiPageAnnotation=function(e){for(var t=0;t<e.annotNameCollection.length;t++){var i=e.annotNameCollection[t];if(i!==e.annotName)for(var n=0;n<e.annotpageNumbers.length;n++){var o=e.annotpageNumbers[n],s=this.getAnnotations(o,null);if(s)for(var a=0;a<s.length;a++)if(s[a].annotName===i){var r,l=s[a];r=s.splice(a,1)[0],this.pdfViewer.annotationModule.addAction(o,a,r,"Text Markup Deleted",null),this.currentAnnotationIndex=a,this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(r,"textMarkup");var d=document.getElementById(r.annotName);d&&(1===d.parentElement.childElementCount?this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAccordionContainer(d):d.remove()),this.pdfViewer.annotationModule.updateAnnotationCollection(l),this.manageAnnotations(s,o),this.pdfViewer.annotationModule.updateImportAnnotationCollection(l,l.pageNumber,"textMarkupAnnotation");l.annotName,l.bounds;this.pdfViewer.annotationModule.renderAnnotations(o,null,null,null)}}}},e.prototype.modifyMultiPageAnnotations=function(e,t,i){for(var n=0;n<e.annotNameCollection.length;n++){var o=e.annotNameCollection[n];if(o!==e.annotName)for(var s=0;s<e.annotpageNumbers.length;s++){var a=e.annotpageNumbers[s],r=this.getAnnotations(a,null);if(r)for(var l=0;l<r.length;l++)r[l].annotName===o&&("Color"===t?r[l].color=i:r[l].opacity=i,r[l].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.currentAnnotationIndex=l,null!==status&&"changed"!==status||this.pdfViewer.annotationModule.addAction(r[l].pageNumber,l,r[l],"Text Markup Property modified",t),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(r[l]),this.manageAnnotations(r,a),this.pdfViewer.annotationModule.renderAnnotations(a,null,null,null))}}},e.prototype.convertSelectionToTextMarkup=function(e,t,i){var n=!1;this.triggerAddEvent=!1,this.multiPageCollection=[];for(var o=0;o<t.length;o++){var s=t[o].textContent,a=void 0;if(t[o].startNode===t[o].endNode){var r=document.getElementById(t[o].startNode).textContent;a=this.getIndexNumbers(t[o].pageNumber,s,r)}else a=this.getIndexNumbers(t[o].pageNumber,s);if(!n)for(var l=1;l<t.length;l++)if(t[l].pageNumber!==t[0].pageNumber&&this.isMultiAnnotation(e)){n=!0;break}this.isMultiAnnotation(e)&&t.length-1===o&&(this.triggerAddEvent=!0),this.drawTextMarkups(e,t[o].rectangleBounds,t[o].pageNumber,t[o].bound,i,s,a.startIndex,a.endIndex,n,document.getElementById(t[o].startNode))}},e.prototype.updateTextMarkupAnnotationBounds=function(e,t){if(this.currentTextMarkupAnnotation){var i=this.getAnnotations(e[t].pageIndex,null),n=null;if(i){for(var o=0;o<i.length;o++)JSON.stringify(this.currentTextMarkupAnnotation)===JSON.stringify(i[o])&&(i[o].bounds=e[t].bounds,i[o].textMarkupContent=e[t].textContent,i[o].textMarkupStartIndex=e[t].startIndex,i[o].textMarkupEndIndex=e[t].endIndex,i[o].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),n=i[o]);if(this.manageAnnotations(i,e[t].pageIndex),this.currentTextMarkupAnnotation=null,this.pdfViewer.annotationModule.renderAnnotations(e[t].pageIndex,null,null,null),this.pdfViewerBase.updateDocumentEditedProperty(!0),n){var s={opacity:n.opacity,color:n.color,author:n.author,subject:n.subject,modifiedDate:n.modifiedDate},a=this.multiPageCollectionList(n);a.length>0?e.length-1===t&&this.pdfViewer.fireAnnotationResize(e[t].pageIndex,n.annotName,n.textMarkupAnnotationType,n.bounds,s,n.textMarkupContent,n.textMarkupStartIndex,n.textMarkupEndIndex,null,a):this.pdfViewer.fireAnnotationResize(e[t].pageIndex,n.annotName,n.textMarkupAnnotationType,n.bounds,s,n.textMarkupContent,n.textMarkupStartIndex,n.textMarkupEndIndex,null)}this.currentAnnotationIndex=null,this.selectTextMarkupCurrentPage=null}}},e.prototype.multiPageCollectionList=function(e){var t=[];if(e.isMultiSelect&&e.annotNameCollection){t.push(e);for(var i=0;i<e.annotNameCollection.length;i++){var n=e.annotNameCollection[i];if(n!==e.annotName)for(var o=0;o<e.annotpageNumbers.length;o++){var s=e.annotpageNumbers[o],a=this.getAnnotations(s,null);if(a)for(var r=0;r<a.length;r++)a[r].annotName===n&&t.push(a[r])}}}return t},e.prototype.updateAnnotationNames=function(e,t){if(e){var i=this.getAnnotations(t,null);if(i){for(var n=0;n<i.length;n++)if(e.annotName===i[n].annotName){for(var o=[],s=[],a=0;a<this.multiPageCollection.length;a++)o.push(this.multiPageCollection[a].annotName),s.push(this.multiPageCollection[a].pageNumber);i[n].isMultiSelect=!0,i[n].annotNameCollection=o,i[n].annotpageNumbers=s,i[n]}this.manageAnnotations(i,t)}}},e.prototype.updateAnnotationContent=function(e,t){if(e){var i=this.getAnnotations(this.selectTextMarkupCurrentPage,null);if(i){for(var n=0;n<i.length;n++)JSON.stringify(this.currentTextMarkupAnnotation)===JSON.stringify(i[n])&&(i[n].textMarkupContent=t.textContent,i[n].textMarkupStartIndex=t.startIndex,i[n].textMarkupEndIndex=t.endIndex,i[n]),this.pdfViewer.annotationModule.storeAnnotationCollections(i[n],this.selectTextMarkupCurrentPage);this.manageAnnotations(i,this.selectTextMarkupCurrentPage)}}},e.prototype.drawTextMarkups=function(e,t,i,n,o,s,a,r,l,d){var h=null;this.isNewAnnotation=!1;var p,c,u="Guest",f=this.getPageContext(i),g=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.highlightColor=this.highlightColor?this.highlightColor:this.pdfViewer.highlightSettings.color,this.underlineColor=this.underlineColor?this.underlineColor:this.pdfViewer.underlineSettings.color,this.strikethroughColor=this.strikethroughColor?this.strikethroughColor:this.pdfViewer.strikethroughSettings.color,this.highlightOpacity=this.pdfViewer.highlightSettings.opacity,this.underlineOpacity=this.pdfViewer.underlineSettings.opacity,this.strikethroughOpacity=this.pdfViewer.strikethroughSettings.opacity,this.annotationAddMode="UI Drawn Annotation";var y=this.pdfViewerBase.pageSize[i],v=0,w=this.getAngle(y.rotation);if(f){switch(f.setLineDash([]),e){case"Highlight":this.isNewAnnotation=!0,p="Highlight",u="Guest"!==this.pdfViewer.highlightSettings.author&&this.pdfViewer.highlightSettings.author?this.pdfViewer.highlightSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest",c=this.pdfViewer.highlightSettings.allowedInteractions?this.pdfViewer.highlightSettings.allowedInteractions:["None"],m(this.highlightOpacity)&&(this.highlightOpacity=1),(h=this.getAddedAnnotation(e,this.highlightColor,this.highlightOpacity,t,u,p,g,"",!1,n,i,s,a,r,l,c,v))&&this.renderHighlightAnnotation(h.bounds,h.opacity,h.color,f,o,h.isPrint,i);break;case"Strikethrough":this.isNewAnnotation=!0,p="Strikethrough",u="Guest"!==this.pdfViewer.strikethroughSettings.author&&this.pdfViewer.strikethroughSettings.author?this.pdfViewer.strikethroughSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest",c=this.pdfViewer.strikethroughSettings.allowedInteractions?this.pdfViewer.strikethroughSettings.allowedInteractions:["None"],d&&""!==d.style.transform&&(v=d.style.transform.startsWith("rotate(90deg)")?Math.abs(w-90):d.style.transform.startsWith("rotate(180deg)")?Math.abs(w-180):d.style.transform.startsWith("rotate(-90deg)")?Math.abs(w-270):w),m(this.strikethroughOpacity)&&(this.strikethroughOpacity=1),(h=this.getAddedAnnotation(e,this.strikethroughColor,this.strikethroughOpacity,t,u,p,g,"",!1,n,i,s,a,r,l,c,v))&&this.renderStrikeoutAnnotation(h.bounds,h.opacity,h.color,f,o,i,h.isPrint,h.annotationRotation);break;case"Underline":this.isNewAnnotation=!0,p="Underline",u="Guest"!==this.pdfViewer.underlineSettings.author&&this.pdfViewer.underlineSettings.author?this.pdfViewer.underlineSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest",c=this.pdfViewer.underlineSettings.allowedInteractions?this.pdfViewer.underlineSettings.allowedInteractions:["None"],d&&""!==d.style.transform&&(v=d.style.transform.startsWith("rotate(90deg)")?Math.abs(w-90):d.style.transform.startsWith("rotate(180deg)")?Math.abs(w-180):d.style.transform.startsWith("rotate(-90deg)")?Math.abs(w-270):w),m(this.underlineOpacity)&&(this.underlineOpacity=1),(h=this.getAddedAnnotation(e,this.underlineColor,this.underlineOpacity,t,u,p,g,"",!1,n,i,s,a,r,l,c,v))&&this.renderUnderlineAnnotation(h.bounds,h.opacity,h.color,f,o,i,h.isPrint,h.annotationRotation)}if(this.isNewAnnotation=!1,h){this.pdfViewerBase.updateDocumentEditedProperty(!0);var b={opacity:h.opacity,color:h.color,author:h.author,subject:h.subject,modifiedDate:h.modifiedDate};this.pdfViewer.annotationModule.actionCollection[this.pdfViewer.annotationModule.actionCollection.length-1].index;this.isMultiAnnotation(e)?this.triggerAddEvent&&this.pdfViewer.fireAnnotationAdd(i,h.annotName,e,h.bounds,b,s,a,r,null,this.multiPageCollection):this.pdfViewer.fireAnnotationAdd(i,h.annotName,e,h.bounds,b,s,a,r)}ge.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.enableToolbar&&this.pdfViewer.enableAnnotationToolbar&&this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools(e)}},e.prototype.getAngle=function(e){var t=0;if(e)switch(e){case 0:t=0;break;case 1:t=90;break;case 2:t=180;break;case 3:t=270}return t},e.prototype.retreiveTextIndex=function(e){if(""===e.textMarkupContent){this.retreieveSelection(e,null);var t=this.getDrawnBounds();window.getSelection().removeAllRanges(),t[0]&&t[0].bounds&&(this.updateAnnotationContent(e,t[0]),e.textMarkupContent=t[0].textContent,e.textMarkupStartIndex=t[0].startIndex,e.textMarkupEndIndex=t[0].endIndex)}return e},e.prototype.renderHighlightAnnotation=function(e,t,i,n,o,s,a){for(var r=this.pdfViewerBase.getZoomRatio(o),l=0;l<e.length;l++){var d=e[l];n.beginPath();var h=d.X?d.X:d.left,p=d.Y?d.Y:d.top,c=d.Width?d.Width:d.width,u=d.Height?d.Height:d.height;h=h||d.x,p=p||d.y,u-=1,n.canvas.id===this.pdfViewer.element.id+"_print_annotation_layer_"+a?s&&(n.rect(h*r,p*r,c*r,u*r),n.globalAlpha=.5*t,n.closePath(),n.fillStyle=i,n.msFillRule="nonzero",n.fill()):(n.rect(h*r,p*r,c*r,u*r),n.globalAlpha=.5*t,n.closePath(),n.fillStyle=i,n.msFillRule="nonzero",n.fill())}n.save()},e.prototype.renderStrikeoutAnnotation=function(e,t,i,n,o,s,a,r){for(var l=0;l<e.length;l++){var d=this.getProperBounds(e[l]),h=this.pdfViewerBase.pageSize[s],p=this.pdfViewerBase.getZoomRatio(o),c=h.rotation;if(r){var u=this.getAngle(c);c=Math.abs(r-u)/90}n.canvas.id===this.pdfViewer.element.id+"_print_annotation_layer_"+s?a&&(1===c?this.drawLine(t,d.x+d.width/2,d.y,d.width,d.height,i,p,n,s,r):2===c?this.drawLine(t,d.x,d.y+d.height/2,d.width,d.height,i,p,n,s,r):3===c?this.drawLine(t,d.x,d.y,d.width/2,d.height,i,p,n,s,r):this.drawLine(t,d.x,d.y,d.width,d.height/2,i,p,n,s,r)):1===c?this.drawLine(t,d.x+d.width/2,d.y,d.width,d.height,i,p,n,s,r):2===c?this.drawLine(t,d.x,d.y+d.height/2,d.width,d.height,i,p,n,s,r):3===c?this.drawLine(t,d.x,d.y,d.width/2,d.height,i,p,n,s,r):this.drawLine(t,d.x,d.y,d.width,d.height/2,i,p,n,s,r)}},e.prototype.renderUnderlineAnnotation=function(e,t,i,n,o,s,a,r){for(var l=0;l<e.length;l++){var d=this.getProperBounds(e[l]),h=this.pdfViewerBase.getZoomRatio(o);n.canvas.id===this.pdfViewer.element.id+"_print_annotation_layer_"+s?a&&this.drawLine(t,d.x,d.y,d.width,d.height,i,h,n,s,r):this.drawLine(t,d.x,d.y,d.width,d.height,i,h,n,s,r)}},e.prototype.getProperBounds=function(e){var t=e.X?e.X:e.left,i=e.Y?e.Y:e.top,n=e.Width?e.Width:e.width,o=e.Height?e.Height:e.height;return{x:t=t||e.x,y:i=i||e.y,width:n,height:o}},e.prototype.drawLine=function(e,t,i,n,o,s,a,r,l,d){r.globalAlpha=e,S()&&(i-=1),o-=1,r.beginPath();var h=this.pdfViewerBase.pageSize[l].rotation;if(d){var p=this.getAngle(h);h=Math.abs(d-p)/90}1===h?(r.moveTo(t*a,i*a),r.lineTo(t*a,(i+o)*a)):2===h?(r.moveTo(t*a,i*a),r.lineTo((n+t)*a,i*a)):3===h?(r.moveTo((n+t)*a,i*a),r.lineTo((n+t)*a,(i+o)*a)):(r.moveTo(t*a,(i+o)*a),r.lineTo((n+t)*a,(i+o)*a)),r.lineWidth=1,r.strokeStyle=s,r.closePath(),r.msFillRule="nonzero",r.stroke()},e.prototype.printTextMarkupAnnotations=function(e,t,i,n,o,s){var a=we("canvas",{id:this.pdfViewer.element.id+"_print_annotation_layer_"+t});a.style.width="816px",a.style.height="1056px";var r=this.pdfViewerBase.pageSize[t].width,l=this.pdfViewerBase.pageSize[t].height,d=this.pdfViewerBase.getZoomFactor(),h=this.pdfViewerBase.getZoomRatio(d);a.height=l*h,a.width=r*h;var p=this.getAnnotations(t,null,"_annotations_textMarkup"),c=this.getAnnotations(t,null,"_annotations_shape"),u=this.getAnnotations(t,null,"_annotations_shape_measure"),f=this.getAnnotations(t,null,"_annotations_stamp"),m=this.getAnnotations(t,null,"_annotations_sticky");f||c||m||u?this.pdfViewer.renderDrawing(a,t):(this.pdfViewer.annotation.renderAnnotations(t,n,o,null,a),this.pdfViewer.annotation.stampAnnotationModule.renderStampAnnotations(i,t,a),this.pdfViewer.annotation.stickyNotesAnnotationModule.renderStickyNotesAnnotations(s,t,a));var g=this.pdfViewerBase.getZoomFactor();return p?this.renderTextMarkupAnnotations(null,t,a,g):this.renderTextMarkupAnnotations(e,t,a,g),a.toDataURL()},e.prototype.saveTextMarkupAnnotations=function(){var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_textMarkup");this.pdfViewerBase.isStorageExceed&&(e=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_textMarkup"]);for(var t=new Array,i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e&&!this.pdfViewer.annotationSettings.skipDownload)for(var n=JSON.parse(e),o=0;o<n.length;o++){var s=[],a=n[o];if(a){for(var r=0;a.annotations.length>r;r++){if(this.pdfViewer.annotationModule.updateModifiedDate(a.annotations[r]),this.pdfViewerBase.isJsonExported)if(a.annotations[r].isAnnotationRotated)a.annotations[r].bounds=this.getBoundsForSave(a.annotations[r].bounds,o);else{var l=this.pdfViewerBase.pageSize[a.pageIndex];l&&(a.annotations[r].annotationRotation=l.rotation)}a.annotations[r].bounds=JSON.stringify(this.getBoundsForSave(a.annotations[r].bounds,o));var d=a.annotations[r].color;a.annotations[r].color=JSON.stringify(this.getRgbCode(d)),a.annotations[r].rect=JSON.stringify(a.annotations[r].rect)}s=a.annotations}t[a.pageIndex]=s}return JSON.stringify(t)},e.prototype.deleteTextMarkupAnnotation=function(){if(this.currentTextMarkupAnnotation){var e=!1;if(this.currentTextMarkupAnnotation.annotationSettings&&(e=this.currentTextMarkupAnnotation.annotationSettings.isLock,this.pdfViewer.annotationModule.checkAllowedInteractions("Delete",this.currentTextMarkupAnnotation)&&(e=!1)),!e){var t=null;this.showHideDropletDiv(!0);var i=this.currentTextMarkupAnnotation;this.currentTextMarkupAnnotation.isMultiSelect&&i.annotNameCollection&&this.deletMultiPageAnnotation(i);var n=this.getAnnotations(this.selectTextMarkupCurrentPage,null);if(n){for(var o=0;o<n.length;o++)if(this.currentTextMarkupAnnotation.annotName===n[o].annotName){t=n.splice(o,1)[0],this.pdfViewer.annotationModule.addAction(this.selectTextMarkupCurrentPage,o,t,"Text Markup Deleted",null),this.currentAnnotationIndex=o,this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(t,"textMarkup");var s=document.getElementById(t.annotName);s&&(1===s.parentElement.childElementCount?this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAccordionContainer(s):s.remove())}this.pdfViewer.annotationModule.updateAnnotationCollection(this.currentTextMarkupAnnotation),this.manageAnnotations(n,this.selectTextMarkupCurrentPage),this.pdfViewer.annotationModule.updateImportAnnotationCollection(this.currentTextMarkupAnnotation,this.currentTextMarkupAnnotation.pageNumber,"textMarkupAnnotation");var a=this.currentTextMarkupAnnotation.annotName,r=this.currentTextMarkupAnnotation.bounds;this.currentTextMarkupAnnotation=null,this.pdfViewer.annotationModule.renderAnnotations(this.selectTextMarkupCurrentPage,null,null,null),this.pdfViewerBase.updateDocumentEditedProperty(!0);var l=this.multiPageCollectionList(i);l.length>0?(l.push(t),this.pdfViewer.fireAnnotationRemove(this.selectTextMarkupCurrentPage,a,t.textMarkupAnnotationType,r,t.textMarkupContent,t.textMarkupStartIndex,t.textMarkupEndIndex,l)):this.pdfViewer.fireAnnotationRemove(this.selectTextMarkupCurrentPage,a,t.textMarkupAnnotationType,r,t.textMarkupContent,t.textMarkupStartIndex,t.textMarkupEndIndex),this.currentAnnotationIndex=null,this.selectTextMarkupCurrentPage=null,ge.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.pdfViewer.toolbarModule.annotationToolbarModule.hideMobileAnnotationToolbar(),this.pdfViewer.toolbarModule.showToolbar(!0))}}}},e.prototype.modifyColorProperty=function(e){if(this.currentTextMarkupAnnotation){var t=this.modifyAnnotationProperty("Color",e,null);this.manageAnnotations(t,this.selectTextMarkupCurrentPage),this.pdfViewer.annotationModule.renderAnnotations(this.selectTextMarkupCurrentPage,null,null,null),this.pdfViewerBase.updateDocumentEditedProperty(!0);var i=this.currentTextMarkupAnnotation,n=this.multiPageCollectionList(i);n.length>0?(this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage,i.annotName,i.textMarkupAnnotationType,!0,!1,!1,!1,i.textMarkupContent,i.textMarkupStartIndex,i.textMarkupEndIndex,n),this.currentAnnotationIndex=null):(this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage,i.annotName,i.textMarkupAnnotationType,!0,!1,!1,!1,i.textMarkupContent,i.textMarkupStartIndex,i.textMarkupEndIndex),this.currentAnnotationIndex=null)}},e.prototype.modifyOpacityProperty=function(e,t){if(this.currentTextMarkupAnnotation){var i=void 0;if((i=t?this.modifyAnnotationProperty("Opacity",t,"changed"):this.modifyAnnotationProperty("Opacity",e.value/100,e.name))&&(this.manageAnnotations(i,this.selectTextMarkupCurrentPage),this.pdfViewer.annotationModule.renderAnnotations(this.selectTextMarkupCurrentPage,null,null,null),t||"changed"===e.name)){this.pdfViewerBase.updateDocumentEditedProperty(!0);var n=this.currentTextMarkupAnnotation,o=this.multiPageCollectionList(n);o.length>0?(this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage,n.annotName,n.textMarkupAnnotationType,!1,!0,!1,!1,n.textMarkupContent,n.textMarkupStartIndex,n.textMarkupEndIndex,o),this.currentAnnotationIndex=null):(this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage,n.annotName,n.textMarkupAnnotationType,!1,!0,!1,!1,n.textMarkupContent,n.textMarkupStartIndex,n.textMarkupEndIndex),this.currentAnnotationIndex=null)}}},e.prototype.modifyAnnotationProperty=function(e,t,i,n){var o=this.currentTextMarkupAnnotation;this.pdfViewer.annotationModule.isFormFieldShape=!1,o.isMultiSelect&&o.annotNameCollection&&this.modifyMultiPageAnnotations(o,e,t);var s=this.getAnnotations(this.selectTextMarkupCurrentPage,null);if(s)for(var a=0;a<s.length;a++)JSON.stringify(this.currentTextMarkupAnnotation)===JSON.stringify(s[a])&&("Color"===e?s[a].color=t:"Opacity"===e?s[a].opacity=t:"AnnotationSettings"===e&&(s[a].annotationSettings={isLock:t}),s[a].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.currentAnnotationIndex=a,null!==i&&"changed"!==i||this.pdfViewer.annotationModule.addAction(this.selectTextMarkupCurrentPage,a,this.currentTextMarkupAnnotation,"Text Markup Property modified",e),this.currentTextMarkupAnnotation=s[a],this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(s[a]),this.pdfViewer.annotationModule.storeAnnotationCollections(s[a],this.selectTextMarkupCurrentPage));return s},e.prototype.undoTextMarkupAction=function(e,t,i,n){var o=this.getAnnotations(t,null);if(o)if("Text Markup Added"===n){this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(o[i],"textMarkup");var s=document.getElementById(o[i].annotName);s&&(1===s.parentElement.childElementCount?this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAccordionContainer(s):s.parentElement.removeChild(s)),o.splice(i,1)}else"Text Markup Deleted"===n&&(this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(t,e.shapeAnnotationType),o.splice(i,0,e));this.clearCurrentAnnotation(),this.pdfViewerBase.updateDocumentEditedProperty(!0),this.manageAnnotations(o,t),this.pdfViewer.annotationModule.renderAnnotations(t,null,null,null)},e.prototype.undoRedoPropertyChange=function(e,t,i,n,o){var s=this.getAnnotations(t,null);if(s){if("Color"===n){var a=s[i].color;s[i].color=e.color,e.color=a}else{var r=s[i].opacity;s[i].opacity=e.opacity,e.opacity=r}this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e,null,!0),o&&(e.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime())}return this.clearCurrentAnnotation(),this.pdfViewerBase.updateDocumentEditedProperty(!0),this.manageAnnotations(s,t),this.pdfViewer.annotationModule.renderAnnotations(t,null,null,null),e},e.prototype.redoTextMarkupAction=function(e,t,i,n){var o=this.getAnnotations(t,null);if(o)if("Text Markup Added"===n)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(t,e.shapeAnnotationType),o.push(e);else if("Text Markup Deleted"===n){this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(o[i],"textMarkup");var s=document.getElementById(o[i].annotName);s&&(1===s.parentElement.childElementCount?this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAccordionContainer(s):s.remove()),o.splice(i,1)}this.clearCurrentAnnotation(),this.pdfViewerBase.updateDocumentEditedProperty(!0),this.manageAnnotations(o,t),this.pdfViewer.annotationModule.renderAnnotations(t,null,null,null)},e.prototype.saveNoteContent=function(e,t){var i=this.getAnnotations(e,null);if(i)for(var n=0;n<i.length;n++)JSON.stringify(this.currentTextMarkupAnnotation)===JSON.stringify(i[n])&&(i[n].note=t);this.manageAnnotations(i,e),this.pdfViewerBase.updateDocumentEditedProperty(!0)},e.prototype.clearCurrentAnnotation=function(){if(!this.isExtended){this.pdfViewer.isMaintainSelection&&!this.pdfViewer.textSelectionModule.isTextSelection?(this.selectTextMarkupCurrentPage=this.selectTextMarkupCurrentPage,this.currentTextMarkupAnnotation=this.currentTextMarkupAnnotation):(this.selectTextMarkupCurrentPage=null,this.currentTextMarkupAnnotation=null);var e=!1;this.pdfViewer.annotation.freeTextAnnotationModule&&this.pdfViewer.annotation.freeTextAnnotationModule.isInuptBoxInFocus&&(e=!0),e||this.enableAnnotationPropertiesTool(!1)}},e.prototype.clearCurrentAnnotationSelection=function(e,t){this.isAnnotationSelect=!!t;for(var i=e-2>=0?e-2:0,n=e+2<this.pdfViewerBase.pageCount?e+2:this.pdfViewerBase.pageCount-1,o=i;o<=n;o++)this.clearAnnotationSelection(o)},e.prototype.getBoundsForSave=function(e,t){for(var i=[],n=0;n<e.length;n++){var o=this.getAnnotationBounds(e[n],t);i.push(o)}return i},e.prototype.getAnnotationBounds=function(e,t){var i=e.left?e.left:e.Left,n=e.top?e.top:e.Top,o=e.height?e.height:e.Height,s=e.width?e.width:e.Width,a=this.pdfViewerBase.pageSize[t];return i=i||e.x,n=n||e.y,a?1===a.rotation?{left:n,top:a.width-(i+s),width:o,height:s}:2===a.rotation?{left:a.width-i-s,top:a.height-n-o,width:s,height:o}:3===a.rotation?{left:a.height-n-o,top:i,width:o,height:s}:{left:i,top:n,width:s,height:o}:{left:i,top:n,width:s,height:o}},e.prototype.getRgbCode=function(e){e.match(/#([a-z0-9]+)/gi)||e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)||(e=this.pdfViewer.annotationModule.nameToHash(e));var t=e.split(",");m(t[1])&&(t=(e=this.pdfViewer.annotationModule.getValue(e,"rgba")).split(","));var i=parseInt(t[0].split("(")[1]),n=parseInt(t[1]),o=parseInt(t[2]);return{a:parseInt(t[3]),r:i,g:n,b:o}},e.prototype.getDrawnBounds=function(){var e=[],t=window.getSelection();if(null!==t.anchorNode){var i=document.createRange(),n=this.pdfViewerBase.textLayer.isBackWardSelection(t);if(t.anchorNode===t.focusNode){var o=this.pdfViewerBase.textLayer.getPageIndex(t.anchorNode);if(!isNaN(o)){var s=this.pdfViewerBase.getElement("_pageDiv_"+o).getBoundingClientRect();this.pdfViewerBase.isMixedSizeDocument&&(s=this.pdfViewerBase.getElement("_textLayer_"+o).getBoundingClientRect()),n?(i.setStart(t.focusNode,t.focusOffset),i.setEnd(t.anchorNode,t.anchorOffset)):t.anchorOffset<t.focusOffset?(t.anchorOffset,t.focusOffset,i.setStart(t.anchorNode,t.anchorOffset),i.setEnd(t.focusNode,t.focusOffset)):(t.focusOffset,t.anchorOffset,i.setStart(t.focusNode,t.focusOffset),i.setEnd(t.anchorNode,t.anchorOffset));var a=i.getBoundingClientRect(),r=this.getIndexNumbers(o,i.toString(),i.commonAncestorContainer.textContent.toString()),l={left:this.getDefaultValue(a.left-s.left),top:this.getDefaultValue(a.top-s.top),width:this.getDefaultValue(a.width),height:this.getDefaultValue(a.height),right:this.getDefaultValue(a.right-s.left),bottom:this.getDefaultValue(a.bottom-s.top)},d=[];d.push(l);var h={left:l.left,top:l.top,right:l.right,bottom:l.bottom};e.push({pageIndex:o,bounds:d,rect:h,startIndex:r.startIndex,endIndex:r.endIndex,textContent:i.toString()})}}else{var p=void 0,c=void 0,u=void 0,f=void 0;n?(p=t.focusNode,u=t.focusOffset,c=t.anchorNode,f=t.anchorOffset):(p=t.anchorNode,u=t.anchorOffset,c=t.focusNode,f=t.focusOffset);for(var m=this.pdfViewerBase.textLayer.getPageIndex(p),g=this.pdfViewerBase.textLayer.getTextIndex(p,m),y=this.pdfViewerBase.textLayer.getPageIndex(c),v=this.pdfViewerBase.textLayer.getTextIndex(c,y),w=0,b=0,S=0,C=m;C<=y;C++){var x=[],M=void 0,I=void 0,T=void 0,A=void 0,k=this.pdfViewerBase.getElement("_textLayer_"+C).childNodes;s=this.pdfViewerBase.getElement("_pageDiv_"+C).getBoundingClientRect();this.pdfViewerBase.isMixedSizeDocument&&(s=this.pdfViewerBase.getElement("_textLayer_"+C).getBoundingClientRect());for(var V=S=C===m?g:0;V<k.length;V++){var E=k[V];V===S?(M=S,T=C===m?u:0):(I=V,A=C===y?f:E.textContent.length),w=V===g&&C===m?u:0,b=V===v&&C===y?f:E.textContent.length;for(var D=0;D<E.childNodes.length;D++){var N=E.childNodes[D];i.setStart(N,w),i.setEnd(N,b)}a=i.getBoundingClientRect(),l={left:this.getDefaultValue(a.left-s.left),top:this.getDefaultValue(a.top-s.top),width:this.getDefaultValue(a.width),height:this.getDefaultValue(a.height),right:this.getDefaultValue(a.right-s.left),bottom:this.getDefaultValue(a.bottom-s.top)};if(x.push(l),i.detach(),C===y&&V===v)break}I||(I=M),A||(A=b);var F=this.pdfViewerBase.getElement("_text_"+C+"_"+M).childNodes[0],L=this.pdfViewerBase.getElement("_text_"+C+"_"+I).childNodes[0],P=document.createRange();P.setStart(F,T),P.setEnd(L,A);var O=P.getBoundingClientRect(),B=P.toString(),z=(r=this.getIndexNumbers(C,B),{left:this.getDefaultValue(O.left-s.left),top:this.getDefaultValue(O.top-s.top),width:this.getDefaultValue(O.width),height:this.getDefaultValue(O.height),right:this.getDefaultValue(O.right-s.left),bottom:this.getDefaultValue(O.bottom-s.top)});h={left:z.left,top:z.top,right:z.right,bottom:z.bottom};e.push({pageIndex:C,bounds:x,rect:h,startIndex:r.startIndex,endIndex:r.endIndex,textContent:B})}}}return t.removeAllRanges(),e},e.prototype.getIndexNumbers=function(e,t,i){var n,o,s=this.pdfViewerBase.getStoredData(e);if(s){for(var a=0,r=s.pageText,l=0;l<e;l++)if(this.pdfViewer.isExtractText){var d=this.pdfViewer.textSearchModule.documentTextCollection[l][l],h=d.pageText?d.pageText:d.PageText;if(this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.documentTextCollection&&this.pdfViewer.textSearchModule.isTextRetrieved)this.pdfViewer.textSearchModule.documentTextCollection[l]&&(a+=h.length);else if(this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.documentTextCollection){if(!(e<=this.pdfViewer.textSearchModule.documentTextCollection.length)){a=0;break}this.pdfViewer.textSearchModule.documentTextCollection[l]&&(a+=h.length)}}if(m(i))n=r.indexOf(t)+a;else n=r.indexOf(i)+i.indexOf(t)+a;o=n+(t.length-1)}return{startIndex:n,endIndex:o}},e.prototype.rerenderAnnotationsPinch=function(e){var t=this.pdfViewerBase.getElement("_annotationCanvas_"+e);if(t){var i=this.pdfViewerBase.getElement("_old_annotationCanvas_"+e);i&&(t?(i.id=t.id,t.parentElement.removeChild(t)):i.id=this.pdfViewer.element.id+"_annotationCanvas_"+e,t=i),t.style.width="",t.style.height="",this.pdfViewer.restrictZoomRequest?(t.style.width=this.pdfViewerBase.pageSize[e].width*this.pdfViewerBase.getZoomFactor()+"px",t.style.height=this.pdfViewerBase.pageSize[e].height*this.pdfViewerBase.getZoomFactor()+"px"):(t.width=this.pdfViewerBase.pageSize[e].width*this.pdfViewerBase.getZoomFactor(),t.height=this.pdfViewerBase.pageSize[e].height*this.pdfViewerBase.getZoomFactor()),this.renderTextMarkupAnnotations(null,e,t,this.pdfViewerBase.getZoomFactor())}},e.prototype.rerenderAnnotations=function(e){for(var t=document.querySelectorAll("#"+this.pdfViewer.element.id+"_old_annotationCanvas_"+e),i=0;i<t.length;i++)t[i]&&t[i].parentElement.removeChild(t[i]);var n=this.pdfViewerBase.getElement("_annotationCanvas_"+e);n&&(n.style.display="block")},e.prototype.onTextMarkupAnnotationMouseUp=function(e){var t=this.pdfViewer.annotationModule.getEventPageNumber(e);if(m(t)||isNaN(t))this.pdfViewerBase.isClickedOnScrollBar(e,!0)||(this.clearCurrentAnnotation(),this.clearCurrentAnnotationSelection(t));else{var i=this.pdfViewerBase.getElement("_annotationCanvas_"+t);this.currentTextMarkupAnnotation?this.selectedTextMarkup=this.currentTextMarkupAnnotation:this.selectedTextMarkup=null,this.clearCurrentSelectedAnnotation();var n=this.getCurrentMarkupAnnotation(e.clientX,e.clientY,t,i);if(n&&!window.getSelection().toString()){var o=!1,s=!1;if(n.annotationSettings&&n.annotationSettings.isLock&&(o=n.annotationSettings.isLock)&&this.pdfViewer.annotationModule.checkAllowedInteractions("Select",n)&&(o=!1,s=!this.pdfViewer.annotationModule.checkAllowedInteractions("PropertyChange",n)),!o){var a=i.parentElement.getBoundingClientRect(),r=e.clientX-a.left,l=e.clientY-a.top;this.annotationClickPosition={x:r,y:l},this.selectAnnotation(n,i,t,e),ge.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.enableToolbar&&this.pdfViewer.enableAnnotationToolbar&&this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools(this.currentTextMarkupAnnotation.textMarkupAnnotationType),this.currentTextMarkupAnnotation=n,this.selectTextMarkupCurrentPage=t,s||this.enableAnnotationPropertiesTool(!0);var d=document.getElementById(this.pdfViewer.element.id+"_commantPanel");if(d&&"block"===d.style.display){var h=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+(t+1));h&&h.ej2_instances[0].expandItem(!0);var p=document.getElementById(n.annotName);p&&p.firstChild.click()}S()||this.pdfViewer.toolbarModule&&this.pdfViewer.enableAnnotationToolbar&&(this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=!0,this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem))}}else this.clearCurrentAnnotation();this.pdfViewer.isMaintainSelection&&!this.pdfViewer.textSelectionModule.isTextSelection?n&&this.clearCurrentAnnotationSelection(t):this.clearCurrentAnnotationSelection(t)}},e.prototype.onTextMarkupAnnotationTouchEnd=function(e){var t=this.pdfViewer.annotationModule.getEventPageNumber(e);if(m(t)||isNaN(t))if(null!=this.selectTextMarkupCurrentPage&&ge.isDevice&&!this.pdfViewer.enableDesktopMode){var i=this.selectTextMarkupCurrentPage;this.selectTextMarkupCurrentPage=null,this.clearAnnotationSelection(i)}else this.clearCurrentAnnotation(),this.clearCurrentAnnotationSelection(t);else{this.currentTextMarkupAnnotation?this.selectedTextMarkup=this.currentTextMarkupAnnotation:this.selectedTextMarkup=null,this.clearCurrentAnnotationSelection(t);var n=this.pdfViewerBase.getElement("_annotationCanvas_"+t);this.clearCurrentSelectedAnnotation();var o=this.getCurrentMarkupAnnotation(e.touches[0].clientX,e.touches[0].clientY,t,n);if(o){var s=!1;if(o.annotationSettings&&o.annotationSettings.isLock&&(s=o.annotationSettings.isLock),!s){var a=n.parentElement.getBoundingClientRect(),r=e.touches[0].clientX-a.left,l=e.touches[0].clientY-a.top;this.annotationClickPosition={x:r,y:l},this.selectAnnotation(o,n,t,e),ge.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.enableToolbar&&this.pdfViewer.enableAnnotationToolbar&&this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools(this.currentTextMarkupAnnotation.textMarkupAnnotationType),this.currentTextMarkupAnnotation=o,this.selectTextMarkupCurrentPage=t,this.enableAnnotationPropertiesTool(!0);var d=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+(t+1));d&&d.ej2_instances[0].expandItem(!0);var h=document.getElementById(o.annotName);h&&(ge.isDevice||h.firstChild.click())}}else this.clearCurrentAnnotation();this.clearCurrentAnnotationSelection(t)}},e.prototype.clearCurrentSelectedAnnotation=function(){if(this.currentTextMarkupAnnotation){this.clearAnnotationSelection(this.selectTextMarkupCurrentPage);var e=this.currentTextMarkupAnnotation;this.pdfViewer.fireAnnotationUnSelect(e.annotName,e.pageNumber,e),this.clearCurrentAnnotation()}},e.prototype.onTextMarkupAnnotationMouseMove=function(e){var t=e.target,i=parseInt(t.id.split("_text_")[1])||parseInt(t.id.split("_textLayer_")[1])||parseInt(t.id.split("_annotationCanvas_")[1]);if(e.target&&(t.id.indexOf("_text")>-1||t.id.indexOf("_annotationCanvas")>-1||t.classList.contains("e-pv-hyperlink"))&&this.pdfViewer.annotation){i=this.pdfViewer.annotation.getEventPageNumber(e);var n=this.pdfViewerBase.getElement("_annotationCanvas_"+i),o=this.getCurrentMarkupAnnotation(e.clientX,e.clientY,i,n);if(o){t.style.cursor="pointer";var s=this.pdfViewerBase.getMousePosition(e),a=this.pdfViewerBase.relativePosition(e),r={left:a.x,top:a.y},l={left:s.x,top:s.y},d={opacity:o.opacity,color:o.color,author:o.author,subject:o.subject,modifiedDate:o.modifiedDate};this.pdfViewerBase.isMousedOver=!0,this.pdfViewer.fireAnnotationMouseover(o.annotName,o.pageNumber,o.textMarkupAnnotationType,o.bounds,d,l,r)}else this.pdfViewer.annotationModule.hidePopupNote(),this.pdfViewerBase.isPanMode&&!this.pdfViewerBase.getAnnotationToolStatus()&&(t.style.cursor="grab"),this.pdfViewerBase.isMousedOver&&!this.pdfViewerBase.isFormFieldMousedOver&&(this.pdfViewer.fireAnnotationMouseLeave(i),this.pdfViewerBase.isMousedOver=!1)}},e.prototype.showPopupNote=function(e,t){t.note&&this.pdfViewer.annotationModule.showPopupNote(e,t.color,t.author,t.note,t.textMarkupAnnotationType)},e.prototype.getCurrentMarkupAnnotation=function(e,t,i,n){var o=[];if(n){var s=n.parentElement.getBoundingClientRect();n.clientWidth!==n.parentElement.clientWidth&&(s=n.getBoundingClientRect());var a=e-s.left,r=t-s.top,l=this.getAnnotations(i,null),d=!1;if(l)for(var h=0;h<l.length;h++)for(var p=l[h],c=0;c<p.bounds.length;c++){var u=p.bounds[c],f=u.left?u.left:u.Left,m=u.top?u.top:u.Top,g=u.width?u.width:u.Width,y=u.height?u.height:u.Height;if(a>=this.getMagnifiedValue(f,this.pdfViewerBase.getZoomFactor())&&a<=this.getMagnifiedValue(f+g,this.pdfViewerBase.getZoomFactor())&&r>=this.getMagnifiedValue(m,this.pdfViewerBase.getZoomFactor())&&r<=this.getMagnifiedValue(m+y,this.pdfViewerBase.getZoomFactor()))o.push(p),d=!0;else if(d){d=!1;break}}var v=null;return o.length>1?v=this.compareCurrentAnnotations(o):1===o.length&&(v=o[0]),v}return null},e.prototype.compareCurrentAnnotations=function(e){for(var t,i=null,n=0;n<e.length&&n!==e.length-1;n++){var o=e[n].bounds,s=o[0].left?o[0].left:o[0].Left,a=o[0].top?o[0].top:o[0].Top,r=e[n+1].bounds,l=r[0].left?r[0].left:r[0].Left,d=r[0].top?r[0].top:r[0].Top;s<l||a<d?(t=l,i=e[n+1]):(t=s,i=e[n]),t&&n===e.length-2&&t===s&&t===l&&(t=l,i=e[n+1])}return i},e.prototype.clearAnnotationSelection=function(e){var t=this.pdfViewerBase.getElement("_annotationCanvas_"+e);t&&(t.getContext("2d").setLineDash([]),this.pdfViewer.annotationModule.renderAnnotations(e,null,null,null))},e.prototype.selectAnnotation=function(e,t,i,n,o){this.pdfViewer.selectedItems.annotations[0]&&(this.pdfViewer.clearSelection(this.pdfViewer.selectedItems.annotations[0].pageIndex),this.pdfViewer.clearSelection(this.selectTextMarkupCurrentPage));var s=!1;if(e.annotationSettings&&e.annotationSettings.isLock&&(s=e.annotationSettings.isLock)&&this.pdfViewer.annotationModule.checkAllowedInteractions("Select",e)&&(s=!1),!s){var a=!1;this.currentTextMarkupAnnotation||(a=!0),this.selectedTextMarkup&&e&&!o&&(a=this.selectedTextMarkup.annotName!==e.annotName),isNaN(i)||(this.selectTextMarkupCurrentPage=i,this.currentTextMarkupAnnotation=e,e=this.retreiveTextIndex(e),this.currentTextMarkupAnnotation=e),this.isSelectedAnnotation&&this.pdfViewer.textSelectionModule&&(this.pdfViewerBase.isSelection=!0,this.updateAnnotationBounds());var r=n;if(this.isEnableTextMarkupResizer(e.textMarkupAnnotationType)&&e&&r&&!r.touches&&this.updateCurrentResizerPosition(e),this.drawAnnotationSelector(e,this.currentTextMarkupAnnotation,t),e.isMultiSelect&&e.annotNameCollection&&this.selectMultiPageAnnotations(e),""!==e.annotName&&!this.isNewAnnotation&&a){var l=!1;r||(l=!0),this.pdfViewer.annotationModule.annotationSelect(e.annotName,this.selectTextMarkupCurrentPage,e,null,!1,l),this.selectedTextMarkup=null}e&&this.isEnableTextMarkupResizer(e.textMarkupAnnotationType)&&(this.isTextMarkupAnnotationMode=!0)}},e.prototype.updateCurrentResizerPosition=function(e){if(e||(e=this.currentTextMarkupAnnotation),e&&this.isEnableTextMarkupResizer(e.textMarkupAnnotationType)&&e){var t=this.pdfViewerBase.getElement("_textLayer_"+this.selectTextMarkupCurrentPage);if(t){var i=t.getBoundingClientRect(),n=e.bounds[0].left?e.bounds[0].left:e.bounds[0].Left,o=e.bounds[0].top?e.bounds[0].top:e.bounds[0].Top;this.updateLeftposition(n*this.pdfViewerBase.getZoomFactor()+i.left,i.top+o,!0);var s=e.bounds[e.bounds.length-1],a=s.left?s.left:s.Left,r=s.top?s.top:s.Top,l=s.width?s.width:s.Width;this.updatePosition((a+l)*this.pdfViewerBase.getZoomFactor()+i.left,r+i.top,!0)}}},e.prototype.drawAnnotationSelectRect=function(e,t,i,n,o,s){var a=this.pdfViewerBase.getZoomRatio();if(e){var r=e.getContext("2d");if(r.setTransform(1,0,0,1,0,0),r.beginPath(),"string"===typeof s.annotationSelectorSettings){(d=0===JSON.parse(s.annotationSelectorSettings).selectorLineDashArray.length?[4]:JSON.parse(s.annotationSelectorSettings).selectorLineDashArray).length>2&&(d=[d[0],d[1]]),r.setLineDash(d),r.globalAlpha=1,r.rect(t*a,i*a,n*a,o*a),r.closePath();var l=""===JSON.parse(s.annotationSelectorSettings).selectionBorderColor?"#0000ff":JSON.parse(s.annotationSelectorSettings).selectionBorderColor;r.strokeStyle=l,r.lineWidth=1===JSON.parse(s.annotationSelectorSettings).selectionBorderThickness?1:s.annotationSelectorSettings.selectionBorderThickness,r.stroke(),r.save()}else{var d;(d=0===s.annotationSelectorSettings.selectorLineDashArray.length?[4]:s.annotationSelectorSettings.selectorLineDashArray).length>2&&(d=[d[0],d[1]]),r.setLineDash(d),r.globalAlpha=1,r.rect(t*a,i*a,n*a,o*a),r.closePath();l=""===s.annotationSelectorSettings.selectionBorderColor?"#0000ff":s.annotationSelectorSettings.selectionBorderColor;r.strokeStyle=l,r.lineWidth=s.annotationSelectorSettings.selectionBorderThickness?1:s.annotationSelectorSettings.selectionBorderThickness,r.stroke(),r.save()}}},e.prototype.enableAnnotationPropertiesTool=function(e){if(this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-color-container")),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&(ge.isDevice||this.pdfViewer.toolbarModule.annotationToolbarModule.createMobileAnnotationToolbar(e)),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule.isMobileAnnotEnabled&&0===this.pdfViewer.selectedItems.annotations.length&&this.pdfViewer.toolbarModule.annotationToolbarModule){this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(e);var t=e;this.isTextMarkupAnnotationMode&&(t=!0),this.pdfViewer.toolbarModule.annotationToolbarModule.enableTextMarkupAnnotationPropertiesTools(t),this.currentTextMarkupAnnotation?S()?this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElementInBlazor,this.currentTextMarkupAnnotation.color):this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElement,this.currentTextMarkupAnnotation.color):m(this.isTextMarkupAnnotationMode)||this.isTextMarkupAnnotationMode?this.pdfViewer.toolbarModule.annotationToolbarModule.setCurrentColorInPicker():S()?this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElementInBlazor,"#000000"):this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElement,"#000000")}},e.prototype.maintainAnnotationSelection=function(){if(this.currentTextMarkupAnnotation){var e=this.pdfViewerBase.getElement("_annotationCanvas_"+this.selectTextMarkupCurrentPage);e&&this.selectAnnotation(this.currentTextMarkupAnnotation,e,this.selectTextMarkupCurrentPage)}},e.prototype.manageAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_textMarkup");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_textMarkup"]),i){var n=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_textMarkup");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[o]&&(n[o].annotations=e);var s=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_textMarkup"]=s:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_textMarkup",s)}},e.prototype.getAnnotations=function(e,t,i){var n;null!=i&&void 0!=i||(i="_annotations_textMarkup");var o=window.sessionStorage.getItem(this.pdfViewerBase.documentId+i);if(this.pdfViewerBase.isStorageExceed&&(o=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+i]),o){var s=JSON.parse(o),a=this.pdfViewer.annotationModule.getPageCollection(s,e);n=s[a]?s[a].annotations:t}else n=t;return n},e.prototype.getAddedAnnotation=function(e,t,i,n,o,s,a,r,l,d,h,p,c,u,f,m,g){var y=a||this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),v=this.pdfViewer.annotation.createGUID(),w=this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("textMarkup",h+1,e);w&&(document.getElementById(w).id=v);var b=this.getAnnotationSettings(e),S=this.getIsPrintValue(e),C={textMarkupAnnotationType:e,color:t,opacity:i,bounds:n,author:o,allowedInteractions:m,subject:s,modifiedDate:y,note:r,rect:d,annotName:v,comments:[],review:{state:"",stateModel:"",author:o,modifiedDate:y},shapeAnnotationType:"textMarkup",pageNumber:h,textMarkupContent:p,textMarkupStartIndex:c,textMarkupEndIndex:u,isMultiSelect:f,annotationSelectorSettings:this.getSelector(e),customData:this.pdfViewer.annotation.getTextMarkupData(s),annotationAddMode:this.annotationAddMode,annotationSettings:b,isPrint:S,isCommentLock:l,isAnnotationRotated:!1,annotationRotation:g};f&&this.multiPageCollection.push(C);var x=!1;f&&this.isExtended&&(x=!0),document.getElementById(v)&&!x&&document.getElementById(v).addEventListener("mouseup",this.annotationDivSelect(C,h));var M=this.pdfViewer.annotationModule.storeAnnotations(h,C,"_annotations_textMarkup");return this.pdfViewer.annotationModule.addAction(h,M,C,"Text Markup Added",null),C},e.prototype.getSelector=function(e){var t=this.pdfViewer.annotationSelectorSettings;return"Highlight"===e&&this.pdfViewer.highlightSettings.annotationSelectorSettings?t=this.pdfViewer.highlightSettings.annotationSelectorSettings:"Underline"===e&&this.pdfViewer.underlineSettings.annotationSelectorSettings?t=this.pdfViewer.underlineSettings.annotationSelectorSettings:"Strikethrough"===e&&this.pdfViewer.strikethroughSettings.annotationSelectorSettings&&(t=this.pdfViewer.strikethroughSettings.annotationSelectorSettings),t},e.prototype.getAnnotationSettings=function(e){var t={isLock:!1};return("Highlight"===e&&this.pdfViewer.highlightSettings.isLock||"Underline"===e&&this.pdfViewer.underlineSettings.isLock||"Strikethrough"===e&&this.pdfViewer.strikethroughSettings.isLock||this.pdfViewer.annotationSettings.isLock)&&(t={isLock:!0}),t},e.prototype.getIsPrintValue=function(e){var t=!0;return"Highlight"===e&&(t=this.pdfViewer.highlightSettings.isPrint),"Underline"===e&&(t=this.pdfViewer.underlineSettings.isPrint),"Strikethrough"===e&&(t=this.pdfViewer.strikethroughSettings.isPrint),m(t)&&(t=!0),t},e.prototype.annotationDivSelect=function(e,t){var i=this.pdfViewerBase.getElement("_annotationCanvas_"+t);if(this.selectAnnotation(e,i,t),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.enableAnnotationToolbar){this.pdfViewer.toolbarModule.annotationToolbarModule.clearShapeMode(),this.pdfViewer.toolbarModule.annotationToolbarModule.clearMeasureMode();var n=!1;e.annotationSettings&&e.annotationSettings.isLock&&(n=e.annotationSettings.isLock),n?(this.pdfViewer.annotationModule.checkAllowedInteractions("PropertyChange",e)&&(this.pdfViewer.toolbarModule.annotationToolbarModule.enableTextMarkupAnnotationPropertiesTools(!0),this.pdfViewer.toolbarModule.annotationToolbarModule.setCurrentColorInPicker()),this.pdfViewer.annotationModule.checkAllowedInteractions("Delete",e)&&this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(!0)):(this.pdfViewer.toolbarModule.annotationToolbarModule.enableTextMarkupAnnotationPropertiesTools(!0),this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(!0),this.pdfViewer.toolbarModule.annotationToolbarModule.setCurrentColorInPicker()),this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=!0,S()||this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem)}},e.prototype.getPageContext=function(e){var t=this.pdfViewerBase.getElement("_annotationCanvas_"+e),i=null;return t&&(i=t.getContext("2d")),i},e.prototype.getDefaultValue=function(e){return e/this.pdfViewerBase.getZoomFactor()},e.prototype.getMagnifiedValue=function(e,t){return e*t},e.prototype.saveImportedTextMarkupAnnotations=function(e,t){var i;e.Author=this.pdfViewer.annotationModule.updateAnnotationAuthor("textMarkup",e.Subject),e.AnnotationSettings&&e.AnnotationSettings.isLock?e.AnnotationSettings={isLock:e.AnnotationSettings.isLock}:e.AnnotationSettings=this.getAnnotationSettings(e.TextMarkupAnnotationType),e.allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),i={textMarkupAnnotationType:e.TextMarkupAnnotationType,color:e.Color,opacity:e.Opacity,allowedInteractions:e.allowedInteractions,bounds:e.Bounds,author:e.Author,subject:e.Subject,modifiedDate:e.ModifiedDate,note:e.Note,rect:e.Rect,annotName:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},shapeAnnotationType:"textMarkup",pageNumber:t,textMarkupContent:"",textMarkupStartIndex:0,textMarkupEndIndex:0,annotationSelectorSettings:this.getSettings(e),customData:this.pdfViewer.annotation.getCustomData(e),isMultiSelect:e.IsMultiSelect,annotNameCollection:e.AnnotNameCollection,annotpageNumbers:e.AnnotpageNumbers,annotationAddMode:this.annotationAddMode,annotationSettings:e.AnnotationSettings,isPrint:e.IsPrint,isCommentLock:e.IsCommentLock,isAnnotationRotated:!1},this.pdfViewer.annotationModule.storeAnnotations(t,i,"_annotations_textMarkup")},e.prototype.updateTextMarkupAnnotationCollections=function(e,t){return e.allowedInteractions=e.AllowedInteractions?e.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),{textMarkupAnnotationType:e.TextMarkupAnnotationType,allowedInteractions:e.allowedInteractions,color:e.Color,opacity:e.Opacity,bounds:e.Bounds,author:e.Author,subject:e.Subject,modifiedDate:e.ModifiedDate,note:e.Note,rect:e.Rect,annotationId:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},shapeAnnotationType:"textMarkup",pageNumber:t,isMultiSelect:e.IsMultiSelect,annotNameCollection:e.AnnotNameCollection,annotpageNumbers:e.AnnotpageNumbers,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.IsPrint,isCommentLock:e.IsCommentLock}},e.prototype.updateTextMarkupSettings=function(e){"highlightSettings"===e&&(this.highlightColor=this.pdfViewer.highlightSettings.color?this.pdfViewer.highlightSettings.color:this.highlightColor,this.highlightOpacity=this.pdfViewer.highlightSettings.opacity?this.pdfViewer.highlightSettings.opacity:this.highlightOpacity),"underlineSettings"===e&&(this.underlineColor=this.pdfViewer.underlineSettings.color?this.pdfViewer.underlineSettings.color:this.underlineColor,this.underlineOpacity=this.pdfViewer.underlineSettings.opacity?this.pdfViewer.underlineSettings.opacity:this.underlineOpacity),"strikethroughSettings"===e&&(this.strikethroughColor=this.pdfViewer.strikethroughSettings.color?this.pdfViewer.strikethroughSettings.color:this.strikethroughColor,this.strikethroughOpacity=this.pdfViewer.strikethroughSettings.opacity?this.pdfViewer.strikethroughSettings.opacity:this.strikethroughOpacity)},e.prototype.clear=function(){this.selectTextMarkupCurrentPage=null,this.currentTextMarkupAnnotation=null,this.annotationClickPosition=null,window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_textMarkup")},e.prototype.getOffsetPoints=function(e){for(var t=[],i=0;i<e.length;i++)t[i]={X:e[i].x,Y:e[i].y,Width:e[i].width,Height:e[i].height,Left:e[i].x,Top:e[i].y};return t},e.prototype.updateAddAnnotationDetails=function(e,t){t||(t={pageNumber:0});var i=null,n=null,o="",s=null,a="",r=[],l=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),d=this.pdfViewer.annotation.createGUID();"Highlight"==e?(i=this.pdfViewer.highlightSettings.annotationSelectorSettings?this.pdfViewer.highlightSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,s=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.highlightSettings),n=this.pdfViewer.highlightSettings.allowedInteractions?this.pdfViewer.highlightSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,o="Highlight",a=t.color?t.color:"#ffff00"):"Underline"==e?(i=this.pdfViewer.underlineSettings.annotationSelectorSettings?this.pdfViewer.underlineSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,s=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.underlineSettings),n=this.pdfViewer.underlineSettings.allowedInteractions?this.pdfViewer.underlineSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,o="Underline",a=t.color?t.color:"#00ff00"):"Strikethrough"==e&&(i=this.pdfViewer.strikethroughSettings.annotationSelectorSettings?this.pdfViewer.strikethroughSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,s=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.strikethroughSettings),n=this.pdfViewer.strikethroughSettings.allowedInteractions?this.pdfViewer.strikethroughSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,o="Strikethrough",a=t.color?t.color:"#ff0000"),s.isLock=!!t.isLock&&t.isLock,r=t.bounds?this.getOffsetPoints(t.bounds):[{X:1,Y:1,Width:100,Height:14,Left:1,Top:1,Location:{X:1,Y:1},Size:{Height:14,IsEmpty:!1,Width:100}}];var h=[],p={AllowedInteractions:t.allowedInteractions?t.allowedInteractions:n,AnnotName:d,AnnotNameCollection:null,AnnotType:"textMarkup",AnnotationSelectorSettings:t.annotationSelectorSettings?t.annotationSelectorSettings:i,AnnotationSettings:s,Author:t.author?t.author:"Guest",Bounds:r,Color:t.color?t.color:a,Comments:null,CreatedDate:l,CustomData:t.customData?t.customData:null,ExistingCustomData:null,EnableMultiPageAnnotation:!!t.enableMultiPageAnnotation&&t.enableMultiPageAnnotation,EnableTextMarkupResizer:!!t.enableTextMarkupResizer&&t.enableTextMarkupResizer,IsCommentLock:!1,IsMultiSelect:!1,IsLock:!!t.isLock&&t.isLock,IsPrint:!t.isPrint||t.isPrint,ModifiedDate:l,Note:"",Opacity:t.opacity?t.opacity:1,Rect:{},State:"",StateModel:"",Subject:o,TextMarkupAnnotationType:o};return h[0]=p,{textMarkupAnnotation:h}},e}(),Qg=function(){function e(e,t){this.shapeCount=0,this.isAddAnnotationProgramatically=!1,this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.renderShapeAnnotations=function(e,t,i){if(e)if(e.length>=1){if(!this.pdfViewer.annotation.getStoredAnnotations(t,e,"_annotations_shape")||i)for(var n=0;n<e.length;n++){var o=e[n];o.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(o,t,o.AnnotType);var s=null;this.shapeCount=this.shapeCount+1;var a=void 0;if(o.ShapeAnnotationType){i&&this.pdfViewerBase.isJsonImported&&(o.Bounds=this.pdfViewerBase.importJsonForRotatedDocuments(o.Rotate,t,o.Bounds,o.AnnotationRotation),a=this.pdfViewerBase.isPageRotated);var r=null;if(o.VertexPoints)if(r=[],i&&this.pdfViewerBase.isJsonImported)r=this.pdfViewerBase.calculateVertexPoints(o.Rotate,t,o.VertexPoints,o.AnnotationRotation);else for(var l=0;l<o.VertexPoints.length;l++){var d={x:o.VertexPoints[l].X?o.VertexPoints[l].X:o.VertexPoints[l].x,y:o.VertexPoints[l].Y?o.VertexPoints[l].Y:o.VertexPoints[l].y};r.push(d)}o.Bounds&&!0===o.EnableShapeLabel&&(o.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(o.Bounds),o.LabelBorderColor=o.LabelBorderColor?o.LabelBorderColor:o.StrokeColor,o.FontColor=o.FontColor?o.FontColor:o.StrokeColor,o.LabelFillColor=o.LabelFillColor?o.LabelFillColor:o.FillColor,o.FontSize=o.FontSize?o.FontSize:16,o.LabelSettings=o.LabelSettings?o.LabelSettings:this.pdfViewer.shapeLabelSettings),o.AnnotationSelectorSettings=o.AnnotationSelectorSettings?o.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,o.AnnotationSettings=o.AnnotationSettings?o.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(o),o.allowedInteractions=o.AllowedInteractions?o.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(o);var h=!0;h="Imported Annotation"===o.annotationAddMode?o.IsPrint:o.AnnotationSettings.isPrint;var p,c=o.Bounds.X?o.Bounds.X:o.Bounds.x,u=o.Bounds.Y?o.Bounds.Y:o.Bounds.y,f=o.Bounds.Width?o.Bounds.Width:o.Bounds.width,g=o.Bounds.Height?o.Bounds.Height:o.Bounds.height,y=(s={id:"shape"+this.shapeCount,shapeAnnotationType:o.ShapeAnnotationType,author:o.Author,allowedInteractions:o.allowedInteractions,modifiedDate:o.ModifiedDate,subject:o.Subject,pageNumber:t,note:o.Note,strokeColor:o.StrokeColor,fillColor:o.FillColor,opacity:o.Opacity,thickness:o.Thickness,rectangleDifference:o.RectangleDifference,borderStyle:o.BorderStyle,borderDashArray:o.BorderDashArray,rotateAngle:o.RotateAngle,isCloudShape:o.IsCloudShape,cloudIntensity:o.CloudIntensity,vertexPoints:r,lineHeadStart:o.LineHeadStart,lineHeadEnd:o.LineHeadEnd,isLocked:o.IsLocked,comments:this.pdfViewer.annotationModule.getAnnotationComments(o.Comments,o,o.Author),review:{state:o.State,stateModel:o.StateModel,modifiedDate:o.ModifiedDate,author:o.Author},annotName:o.AnnotName,bounds:{left:c,top:u,width:f,height:g,right:o.Bounds.Right,bottom:o.Bounds.Bottom},labelContent:o.LabelContent,enableShapeLabel:o.EnableShapeLabel,labelFillColor:o.LabelFillColor,fontColor:o.FontColor,labelBorderColor:o.LabelBorderColor,fontSize:o.FontSize,labelBounds:o.LabelBounds,annotationSelectorSettings:this.getSettings(o),labelSettings:o.LabelSettings,annotationSettings:o.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(o),isPrint:h,isCommentLock:o.IsCommentLock,isAnnotationRotated:a}).vertexPoints;null==r&&(y=[]),o.AnnotationSelectorSettings=o.AnnotationSelectorSettings?o.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,p={id:"shape"+this.shapeCount,shapeAnnotationType:this.getShapeType(s),author:s.author,allowedInteractions:s.allowedInteractions,modifiedDate:s.modifiedDate,annotName:s.annotName,subject:s.subject,notes:s.note,fillColor:s.fillColor,strokeColor:s.strokeColor,opacity:s.opacity,thickness:s.thickness,borderStyle:s.borderStyle,borderDashArray:s.borderDashArray?s.borderDashArray.toString():"0",rotateAngle:parseFloat(s.rotateAngle.split("Angle")[1]),comments:s.comments,review:s.review,isCloudShape:s.isCloudShape,cloudIntensity:s.cloudIntensity,taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(s.lineHeadEnd),sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(s.lineHeadStart),vertexPoints:y,bounds:{x:s.bounds.left,y:s.bounds.top,width:s.bounds.width,height:s.bounds.height},pageIndex:s.pageNumber,labelContent:o.LabelContent,enableShapeLabel:o.EnableShapeLabel,labelFillColor:o.LabelFillColor,fontColor:o.FontColor,labelBorderColor:o.LabelBorderColor,fontSize:o.FontSize,labelBounds:o.LabelBounds,annotationSelectorSettings:o.AnnotationSelectorSettings,annotationSettings:s.annotationSettings,annotationAddMode:o.annotationAddMode,isPrint:h,isCommentLock:s.isCommentLock};this.pdfViewer.add(p);if(this.pdfViewer.annotationModule.storeAnnotations(t,s,"_annotations_shape"),this.isAddAnnotationProgramatically){var v={opacity:p.opacity,strokeColor:p.strokeColor,thickness:p.thickness,modifiedDate:p.modifiedDate,width:p.bounds.width,height:p.bounds.height};this.pdfViewer.fireAnnotationAdd(p.pageIndex,p.annotName,o.ShapeAnnotationType,p.bounds,v)}}}}else if(e.shapeAnnotationType){s=this.createAnnotationObject(e);m(e.formFieldAnnotationType)||""===e.formFieldAnnotationType?this.pdfViewer.annotationModule.isFormFieldShape=!1:this.pdfViewer.annotationModule.isFormFieldShape=!0,this.pdfViewer.annotationModule.storeAnnotations(t,s,"_annotations_shape"),this.pdfViewer.annotationModule.triggerAnnotationAdd(e)}},e.prototype.getSettings=function(e){this.pdfViewer.annotationSelectorSettings;return e.AnnotationSelectorSettings?e.AnnotationSelectorSettings:this.getSelector(e.ShapeAnnotationType,e.Subject)},e.prototype.setAnnotationType=function(e){this.updateShapeProperties(),this.pdfViewerBase.disableTextSelectionMode();var t="Guest";switch(e){case"Line":this.currentAnnotationMode="Line";var i=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.lineSettings.author?this.pdfViewer.lineSettings.author:"Guest",this.pdfViewer.drawingObject={shapeAnnotationType:this.setShapeType("Line"),fillColor:this.lineFillColor,notes:"",strokeColor:this.lineStrokeColor,opacity:this.lineOpacity,thickness:this.lineThickness,modifiedDate:i,borderDashArray:this.lineDashArray.toString(),sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.lineStartHead.toString()),taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.lineEndHead.toString()),author:t,subject:"Line",lineHeadStart:this.lineStartHead,lineHeadEnd:this.lineEndHead,isCommentLock:!1},this.pdfViewer.tool="Line";break;case"Arrow":this.currentAnnotationMode="Arrow";var n=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.arrowSettings.author?this.pdfViewer.arrowSettings.author:"Guest",this.pdfViewer.drawingObject={shapeAnnotationType:this.setShapeType("Arrow"),opacity:this.arrowOpacity,sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.arrowStartHead.toString()),taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.arrowEndHead.toString()),fillColor:this.arrowFillColor,strokeColor:this.arrowStrokeColor,notes:"",thickness:this.arrowThickness,borderDashArray:this.arrowDashArray.toString(),author:t,subject:"Arrow",modifiedDate:n,lineHeadStart:this.arrowStartHead,lineHeadEnd:this.arrowEndHead,isCommentLock:!1},this.pdfViewer.tool="Line";break;case"Rectangle":this.currentAnnotationMode="Rectangle";var o=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.rectangleSettings.author?this.pdfViewer.rectangleSettings.author:"Guest",this.pdfViewer.drawingObject={shapeAnnotationType:this.setShapeType("Rectangle"),strokeColor:this.rectangleStrokeColor,fillColor:this.rectangleFillColor,opacity:this.rectangleOpacity,notes:"",thickness:this.rectangleThickness,borderDashArray:"0",modifiedDate:o,author:t,subject:"Rectangle",isCommentLock:!1},this.pdfViewer.tool="DrawTool";break;case"Circle":this.currentAnnotationMode="Circle";var s=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.circleSettings.author?this.pdfViewer.circleSettings.author:"Guest",this.pdfViewer.drawingObject={shapeAnnotationType:this.setShapeType("Circle"),strokeColor:this.circleStrokeColor,fillColor:this.circleFillColor,opacity:this.circleOpacity,notes:"",thickness:this.circleThickness,borderDashArray:"0",modifiedDate:s,author:t,subject:"Circle",isCommentLock:!1},this.pdfViewer.tool="DrawTool";break;case"Polygon":this.currentAnnotationMode="Polygon";var a=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.polygonSettings.author?this.pdfViewer.polygonSettings.author:"Guest",this.pdfViewer.drawingObject={strokeColor:this.polygonStrokeColor,fillColor:this.polygonFillColor,opacity:this.polygonOpacity,thickness:this.polygonThickness,borderDashArray:"0",notes:"",author:t,subject:"Polygon",modifiedDate:a,borderStyle:"",isCommentLock:!1},this.pdfViewer.tool="Polygon"}},e.prototype.updateShapeProperties=function(){this.lineFillColor=this.pdfViewer.lineSettings.fillColor?this.pdfViewer.lineSettings.fillColor:"#ffffff00",this.lineStrokeColor=this.pdfViewer.lineSettings.strokeColor?this.pdfViewer.lineSettings.strokeColor:"#ff0000",this.lineThickness=this.pdfViewer.lineSettings.thickness?this.pdfViewer.lineSettings.thickness:1,this.lineOpacity=this.pdfViewer.lineSettings.opacity?this.pdfViewer.lineSettings.opacity:1,this.lineDashArray=this.pdfViewer.lineSettings.borderDashArray?this.pdfViewer.lineSettings.borderDashArray:0,this.lineStartHead=this.pdfViewer.lineSettings.lineHeadStartStyle?this.pdfViewer.lineSettings.lineHeadStartStyle:"None",this.lineEndHead=this.pdfViewer.lineSettings.lineHeadEndStyle?this.pdfViewer.lineSettings.lineHeadEndStyle:"None",this.arrowFillColor=this.pdfViewer.arrowSettings.fillColor?this.pdfViewer.arrowSettings.fillColor:"#ffffff00",this.arrowStrokeColor=this.pdfViewer.arrowSettings.strokeColor?this.pdfViewer.arrowSettings.strokeColor:"#ff0000",this.arrowThickness=this.pdfViewer.arrowSettings.thickness?this.pdfViewer.arrowSettings.thickness:1,this.arrowOpacity=this.pdfViewer.arrowSettings.opacity?this.pdfViewer.arrowSettings.opacity:1,this.arrowDashArray=this.pdfViewer.arrowSettings.borderDashArray?this.pdfViewer.arrowSettings.borderDashArray:0,this.arrowStartHead=this.pdfViewer.arrowSettings.lineHeadStartStyle?this.pdfViewer.arrowSettings.lineHeadStartStyle:"Closed",this.arrowEndHead=this.pdfViewer.arrowSettings.lineHeadEndStyle?this.pdfViewer.arrowSettings.lineHeadEndStyle:"Closed",this.rectangleFillColor=this.pdfViewer.rectangleSettings.fillColor?this.pdfViewer.rectangleSettings.fillColor:"#ffffff00",this.rectangleStrokeColor=this.pdfViewer.rectangleSettings.strokeColor?this.pdfViewer.rectangleSettings.strokeColor:"#ff0000",this.rectangleThickness=this.pdfViewer.rectangleSettings.thickness?this.pdfViewer.rectangleSettings.thickness:1,this.rectangleOpacity=this.pdfViewer.rectangleSettings.opacity?this.pdfViewer.rectangleSettings.opacity:1,this.circleFillColor=this.pdfViewer.circleSettings.fillColor?this.pdfViewer.circleSettings.fillColor:"#ffffff00",this.circleStrokeColor=this.pdfViewer.circleSettings.strokeColor?this.pdfViewer.circleSettings.strokeColor:"#ff0000",this.circleThickness=this.pdfViewer.circleSettings.thickness?this.pdfViewer.circleSettings.thickness:1,this.circleOpacity=this.pdfViewer.circleSettings.opacity?this.pdfViewer.circleSettings.opacity:1,this.polygonFillColor=this.pdfViewer.polygonSettings.fillColor?this.pdfViewer.polygonSettings.fillColor:"#ffffff00",this.polygonStrokeColor=this.pdfViewer.polygonSettings.strokeColor?this.pdfViewer.polygonSettings.strokeColor:"#ff0000",this.polygonThickness=this.pdfViewer.polygonSettings.thickness?this.pdfViewer.polygonSettings.thickness:1,this.polygonOpacity=this.pdfViewer.polygonSettings.opacity?this.pdfViewer.polygonSettings.opacity:1},e.prototype.setShapeType=function(e){var t;switch(e){case"Line":case"Polyline":t="Line";break;case"Circle":t="Ellipse";break;case"Square":t="Rectangle";break;case"Arrow":t="LineWidthArrowHead"}return t},e.prototype.getShapeType=function(e){var t;switch(e.shapeAnnotationType){case"Line":case"Polyline":t="Line";break;case"Circle":t="Ellipse";break;case"Square":t="Rectangle";break;case"Polygon":t="Polygon"}return"Line"!==e.shapeAnnotationType&&"Polyline"!==e.shapeAnnotationType||"None"===e.lineHeadStart&&"None"===e.lineHeadEnd||(t="LineWidthArrowHead"),t},e.prototype.getShapeAnnotType=function(e){var t;switch(e){case"Line":case"LineWidthArrowHead":t="Line";break;case"Rectangle":t="Square";break;case"Ellipse":t="Circle";break;case"Polygon":t="Polygon"}return t},e.prototype.modifyInCollection=function(e,t,i){m(i.formFieldAnnotationType)||""===i.formFieldAnnotationType?this.pdfViewer.annotationModule.isFormFieldShape=!1:this.pdfViewer.annotationModule.isFormFieldShape=!0,this.pdfViewerBase.updateDocumentEditedProperty(!0);var n=null;i&&"bounds"===e&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(i,!0);var o=this.getAnnotations(t,null);if(null!=o&&i){for(var s=0;s<o.length;s++)if(i.id===o[s].id){if("bounds"===e){if("Line"===o[s].shapeAnnotationType||"Polygon"===o[s].shapeAnnotationType?(o[s].vertexPoints=i.vertexPoints,o[s].bounds={left:i.bounds.x,top:i.bounds.y,width:i.bounds.width,height:i.bounds.height,right:i.bounds.right,bottom:i.bounds.bottom}):o[s].bounds={left:i.bounds.x,top:i.bounds.y,width:i.bounds.width,height:i.bounds.height,right:i.bounds.right,bottom:i.bounds.bottom},!0===o[s].enableShapeLabel&&i.wrapper){var a=0,r=0,l=0;i.wrapper.bounds.width&&(l=(l=i.wrapper.bounds.width/2)>0&&l<151?l:151),i.wrapper.bounds.left&&(r=i.wrapper.bounds.left+i.wrapper.bounds.width/2-l/2),i.wrapper.bounds.top&&(a=i.wrapper.bounds.top+i.wrapper.bounds.height/2-12.3),o[s].labelBounds={left:r,top:a,width:l,height:24.6,right:0,bottom:0}}}else if("fill"===e)o[s].fillColor=i.wrapper.children[0].style.fill;else if("stroke"===e)o[s].strokeColor=i.wrapper.children[0].style.strokeColor;else if("opacity"===e)o[s].opacity=i.wrapper.children[0].style.opacity;else if("thickness"===e)o[s].thickness=i.wrapper.children[0].style.strokeWidth;else if("dashArray"===e)o[s].borderDashArray=i.wrapper.children[0].style.strokeDashArray,o[s].borderStyle=i.borderStyle;else if("startArrow"===e)o[s].lineHeadStart=this.pdfViewer.annotation.getArrowTypeForCollection(i.sourceDecoraterShapes);else if("endArrow"===e)o[s].lineHeadEnd=this.pdfViewer.annotation.getArrowTypeForCollection(i.taregetDecoraterShapes);else if("notes"===e)o[s].note=i.notes;else{if("delete"===e){n=o.splice(s,1)[0];break}if("labelContent"===e){o[s].note=i.labelContent,o[s].labelContent=i.labelContent;break}"fontColor"===e?o[s].fontColor=i.fontColor:"fontSize"===e&&(o[s].fontSize=i.fontSize)}o[s].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.pdfViewer.annotationModule.storeAnnotationCollections(o[s],t)}this.manageAnnotations(o,t)}return n},e.prototype.addInCollection=function(e,t){var i=this.getAnnotations(e,null);i&&i.push(t),this.manageAnnotations(i,e)},e.prototype.saveShapeAnnotations=function(){var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape");this.pdfViewerBase.isStorageExceed&&(e=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape"]);for(var t=new Array,i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e&&!this.pdfViewer.annotationSettings.skipDownload)for(var n=JSON.parse(e),o=0;o<n.length;o++){var s=[],a=n[o];if(a){for(var r=0;a.annotations.length>r;r++)if(this.pdfViewerBase.checkFormFieldCollection(a.annotations[r].id))a.annotations[r]="";else{if(this.pdfViewer.annotationModule.updateModifiedDate(a.annotations[r]),this.pdfViewerBase.isJsonExported)if(a.annotations[r].isAnnotationRotated)a.annotations[r].bounds=this.pdfViewer.annotation.getBounds(a.annotations[r].bounds,a.pageIndex),a.annotations[r].vertexPoints=this.pdfViewer.annotation.getVertexPoints(a.annotations[r].vertexPoints,a.pageIndex);else{var l=this.pdfViewerBase.pageSize[a.pageIndex];l&&(a.annotations[r].annotationRotation=l.rotation)}a.annotations[r].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(a.annotations[r].bounds,a.pageIndex));var d=a.annotations[r].strokeColor;a.annotations[r].strokeColor=JSON.stringify(this.getRgbCode(d));var h=a.annotations[r].fillColor;if(a.annotations[r].fillColor=JSON.stringify(this.getRgbCode(h)),a.annotations[r].vertexPoints=JSON.stringify(this.pdfViewer.annotation.getVertexPoints(a.annotations[r].vertexPoints,a.pageIndex)),null!==a.annotations[r].rectangleDifference&&(a.annotations[r].rectangleDifference=JSON.stringify(a.annotations[r].rectangleDifference)),!0===a.annotations[r].enableShapeLabel){a.annotations[r].labelBounds=JSON.stringify(this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(JSON.parse(a.annotations[r].bounds)));var p=a.annotations[r].labelFillColor;a.annotations[r].labelFillColor=JSON.stringify(this.getRgbCode(p));var c=a.annotations[r].labelBorderColor;a.annotations[r].labelBorderColor=JSON.stringify(this.getRgbCode(c)),a.annotations[r].labelSettings.fillColor=p;var u=a.annotations[r].labelSettings.fontColor;a.annotations[r].fontColor=JSON.stringify(this.getRgbCode(u))}}a.annotations=a.annotations.filter((function(e){return e})),s=a.annotations}t[a.pageIndex]=s}return JSON.stringify(t)},e.prototype.manageAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape"]),i){var n=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_shape");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[o]&&(n[o].annotations=e);var s=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape"]=s:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_shape",s)}},e.prototype.createAnnotationObject=function(e){var t,i,n=this.pdfViewer.annotation.createGUID();if(!e.formFieldAnnotationType){var o=this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("shape",e.pageIndex+1,e.shapeAnnotationType);o&&(document.getElementById(o).id=n)}e.annotName=n,e.wrapper.bounds?(t={left:e.wrapper.bounds.x,top:e.wrapper.bounds.y,height:e.wrapper.bounds.height,width:e.wrapper.bounds.width,right:e.wrapper.bounds.right,bottom:e.wrapper.bounds.bottom},i=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(e.wrapper.bounds)):(t={left:0,top:0,height:0,width:0,right:0,bottom:0},i={left:0,top:0,height:0,width:0,right:0,bottom:0}),"Line"===e.subject&&"Polygon"===e.shapeAnnotationType?e.author=this.pdfViewer.annotationModule.updateAnnotationAuthor("shape","Polygon"):e.author=this.pdfViewer.annotationModule.updateAnnotationAuthor("shape",e.subject),this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(n,e.notes);var s=parseInt(e.borderDashArray);s=isNaN(s)?0:s;var a=this.pdfViewer.annotationModule.findAnnotationSettings(e,!0);e.isPrint=a.isPrint;var r=this.pdfViewer.shapeLabelSettings,l={borderColor:e.strokeColor,fillColor:e.fillColor,fontColor:e.fontColor,fontSize:e.fontSize,labelContent:e.labelContent,labelHeight:r.labelHeight,labelWidth:r.labelMaxWidth,opacity:e.opacity};return{id:e.id,shapeAnnotationType:this.getShapeAnnotType(e.shapeAnnotationType),author:e.author,allowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),subject:e.subject,note:e.notes,strokeColor:e.strokeColor,annotName:n,comments:[],review:{state:"",stateModel:"",modifiedDate:this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),author:e.author},fillColor:e.fillColor,opacity:e.opacity,thickness:e.thickness,pageNumber:e.pageIndex,borderStyle:e.borderStyle,borderDashArray:s,bounds:t,modifiedDate:this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),rotateAngle:"RotateAngle"+e.rotateAngle,isCloudShape:e.isCloudShape,cloudIntensity:e.cloudIntensity,vertexPoints:e.vertexPoints,lineHeadStart:this.pdfViewer.annotation.getArrowTypeForCollection(e.sourceDecoraterShapes),lineHeadEnd:this.pdfViewer.annotation.getArrowTypeForCollection(e.taregetDecoraterShapes),rectangleDifference:[],isLocked:a.isLock,labelContent:e.labelContent,enableShapeLabel:e.enableShapeLabel,labelFillColor:e.labelFillColor,fontColor:e.fontColor,labelBorderColor:e.labelBorderColor,fontSize:e.fontSize,labelBounds:i,annotationSelectorSettings:this.getSelector(e.shapeAnnotationType,e.subject),labelSettings:l,annotationSettings:a,customData:this.pdfViewer.annotation.getShapeData(e.shapeAnnotationType,e.subject),isPrint:e.isPrint,isCommentLock:e.isCommentLock,isAnnotationRotated:!1}},e.prototype.getSelector=function(e,t){var i=this.pdfViewer.annotationSelectorSettings;return"Line"===e&&"Arrow"!==t&&this.pdfViewer.lineSettings.annotationSelectorSettings?i=this.pdfViewer.lineSettings.annotationSelectorSettings:"LineWidthArrowHead"!==e&&"Arrow"!==t||!this.pdfViewer.lineSettings.annotationSelectorSettings?"Rectangle"!==e&&"Square"!==e||!this.pdfViewer.rectangleSettings.annotationSelectorSettings?"Ellipse"!==e&&"Circle"!==e||!this.pdfViewer.circleSettings.annotationSelectorSettings?"Polygon"===e&&this.pdfViewer.polygonSettings.annotationSelectorSettings&&(i=this.pdfViewer.polygonSettings.annotationSelectorSettings):i=this.pdfViewer.circleSettings.annotationSelectorSettings:i=this.pdfViewer.rectangleSettings.annotationSelectorSettings:i=this.pdfViewer.arrowSettings.annotationSelectorSettings,i},e.prototype.getAnnotations=function(e,t){var i,n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape");if(this.pdfViewerBase.isStorageExceed&&(n=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape"]),n){var o=JSON.parse(n),s=this.pdfViewer.annotationModule.getPageCollection(o,e);i=o[s]?o[s].annotations:t}else i=t;return i},e.prototype.getRgbCode=function(e){e.match(/#([a-z0-9]+)/gi)||e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)||(e=this.pdfViewer.annotationModule.nameToHash(e));var t=e.split(",");return m(t[1])&&(t=(e=this.pdfViewer.annotationModule.getValue(e,"rgba")).split(",")),{r:parseInt(t[0].split("(")[1]),g:parseInt(t[1]),b:parseInt(t[2]),a:parseFloat(t[3])}},e.prototype.saveImportedShapeAnnotations=function(e,t){var i,n=null;if(e.Author=this.pdfViewer.annotationModule.updateAnnotationAuthor("shape",e.Subject),e.VertexPoints){n=[];for(var o=0;o<e.VertexPoints.length;o++){var s={x:e.VertexPoints[o].X,y:e.VertexPoints[o].Y};n.push(s)}}e.Bounds&&!0===e.EnableShapeLabel&&(e.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(e.Bounds),e.LabelBorderColor=e.LabelBorderColor?e.LabelBorderColor:e.StrokeColor,e.FontColor=e.FontColor?e.FontColor:e.StrokeColor,e.LabelFillColor=e.LabelFillColor?e.LabelFillColor:e.FillColor,e.FontSize=e.FontSize?e.FontSize:16,e.LabelSettings=e.LabelSettings?e.LabelSettings:this.pdfViewer.shapeLabelSettings),e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(e),e.allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),i={id:"shape",shapeAnnotationType:e.ShapeAnnotationType,author:e.Author,allowedInteractions:e.allowedInteractions,modifiedDate:e.ModifiedDate,subject:e.Subject,pageNumber:t,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,thickness:e.Thickness,rectangleDifference:e.RectangleDifference,borderStyle:e.BorderStyle,borderDashArray:e.BorderDashArray,rotateAngle:e.RotateAngle,isCloudShape:e.IsCloudShape,cloudIntensity:e.CloudIntensity,vertexPoints:n,lineHeadStart:e.LineHeadStart,lineHeadEnd:e.LineHeadEnd,isLocked:e.IsLocked,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},annotName:e.AnnotName,bounds:{left:e.Bounds.X,top:e.Bounds.Y,width:e.Bounds.Width,height:e.Bounds.Height,right:e.Bounds.Right,bottom:e.Bounds.Bottom},labelContent:e.LabelContent,enableShapeLabel:e.EnableShapeLabel,labelFillColor:e.LabelFillColor,labelBorderColor:e.LabelBorderColor,fontColor:e.FontColor,fontSize:e.FontSize,labelBounds:e.LabelBounds,annotationSelectorSettings:this.getSettings(e),labelSettings:e.LabelSettings,annotationSettings:e.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.IsPrint,isCommentLock:e.IsCommentLock,isAnnotationRotated:!1},this.pdfViewer.annotationModule.storeAnnotations(t,i,"_annotations_shape")},e.prototype.updateShapeAnnotationCollections=function(e,t){var i=null;if(e.VertexPoints){i=[];for(var n=0;n<e.VertexPoints.length;n++){var o={x:e.VertexPoints[n].X,y:e.VertexPoints[n].Y};i.push(o)}}if(e.Bounds&&!0===e.EnableShapeLabel){e.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(e.Bounds),e.LabelBorderColor=e.LabelBorderColor?e.LabelBorderColor:e.StrokeColor,e.FontColor=e.FontColor?e.FontColor:e.StrokeColor,e.LabelFillColor=e.LabelFillColor?e.LabelFillColor:e.FillColor,e.FontSize=e.FontSize?e.FontSize:16;var s=this.pdfViewer.shapeLabelSettings,a={borderColor:e.StrokeColor,fillColor:e.FillColor,fontColor:e.FontColor,fontSize:e.FontSize,labelContent:e.LabelContent,labelHeight:s.labelHeight,labelWidth:s.labelWidth,opacity:e.Opacity};e.LabelSettings=e.LabelSettings?e.LabelSettings:a}return e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(e),e.IsLocked&&(e.AnnotationSettings.isLock=e.IsLocked),e.allowedInteractions=e.AllowedInteractions?e.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),{id:"shape",shapeAnnotationType:e.ShapeAnnotationType,author:e.Author,allowedInteractions:e.allowedInteractions,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,thickness:e.Thickness,rectangleDifference:e.RectangleDifference,borderStyle:e.BorderStyle,borderDashArray:e.BorderDashArray,rotateAngle:e.RotateAngle,isCloudShape:e.IsCloudShape,cloudIntensity:e.CloudIntensity,vertexPoints:i,lineHeadStart:e.LineHeadStart,lineHeadEnd:e.LineHeadEnd,isLocked:e.IsLocked,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},annotationId:e.AnnotName,bounds:{left:e.Bounds.X,top:e.Bounds.Y,width:e.Bounds.Width,height:e.Bounds.Height,right:e.Bounds.Right,bottom:e.Bounds.Bottom},labelContent:e.LabelContent,enableShapeLabel:e.EnableShapeLabel,labelFillColor:e.LabelFillColor,labelBorderColor:e.LabelBorderColor,fontColor:e.FontColor,fontSize:e.FontSize,labelBounds:e.LabelBounds,pageNumber:t,labelSettings:e.LabelSettings,annotationSettings:e.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.IsPrint}},e.prototype.updateAddAnnotationDetails=function(e,t,i){i=t?t.offset?t.offset:{x:10,y:10}:(t={offset:{x:10,y:10},pageNumber:0,width:void 0,height:void 0}).offset;var n=null,o=null,s=null,a="",r=!1,l=null,d=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),h=this.pdfViewer.annotation.createGUID();"Line"==e?(n=this.pdfViewer.lineSettings.annotationSelectorSettings?this.pdfViewer.lineSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,s=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.lineSettings),o=this.pdfViewer.lineSettings.allowedInteractions?this.pdfViewer.lineSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,a="Line",l=t.vertexPoints?t.vertexPoints:[{x:i.x,y:i.y},{x:i.x+100,y:i.y}],t.width=t.width?t.width:1,t.height=t.height?t.height:1):"Arrow"==e?(n=this.pdfViewer.arrowSettings.annotationSelectorSettings?this.pdfViewer.arrowSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,s=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.arrowSettings),o=this.pdfViewer.arrowSettings.allowedInteractions?this.pdfViewer.arrowSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,a="Line",r=!0,l=t.vertexPoints?t.vertexPoints:[{x:i.x,y:i.y},{x:i.x+100,y:i.y}],t.width=t.width?t.width:1,t.height=t.height?t.height:1):"Rectangle"==e?(n=this.pdfViewer.rectangleSettings.annotationSelectorSettings?this.pdfViewer.rectangleSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,s=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.rectangleSettings),o=this.pdfViewer.rectangleSettings.allowedInteractions?this.pdfViewer.rectangleSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,a="Square",t.width=t.width?t.width:150,t.height=t.height?t.height:75):"Circle"==e?(n=this.pdfViewer.circleSettings.annotationSelectorSettings?this.pdfViewer.circleSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,s=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.circleSettings),o=this.pdfViewer.circleSettings.allowedInteractions?this.pdfViewer.circleSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,a="Circle",t.width=t.width?t.width:100,t.height=t.height?t.height:90):"Polygon"==e&&(n=this.pdfViewer.polygonSettings.annotationSelectorSettings?this.pdfViewer.polygonSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,s=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.polygonSettings),o=this.pdfViewer.polygonSettings.allowedInteractions?this.pdfViewer.polygonSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,a="Polygon",l=t.vertexPoints?t.vertexPoints:[{x:i.x,y:i.y},{x:i.x+42,y:i.y-29},{x:i.x+89,y:i.y-1},{x:i.x+78,y:i.y+42},{x:i.x+11,y:i.y+42},{x:i.x,y:i.y}],t.width=t.width?t.width:1,t.height=t.height?t.height:1),s.isLock=!!t.isLock&&t.isLock,s.minHeight=t.minHeight?t.minHeight:0,s.minWidth=t.minWidth?t.minWidth:0,s.maxWidth=t.maxWidth?t.maxWidth:0,s.maxHeight=t.maxHeight?t.maxHeight:0,l&&(l=this.pdfViewer.annotation.getVertexPointsXY(l));var p=[],c={AllowedInteractions:t.allowedInteractions?t.allowedInteractions:o,AnnotName:h,AnnotType:"shape",AnnotationSelectorSettings:t.annotationSelectorSettings?t.annotationSelectorSettings:n,AnnotationSettings:s,Author:t.author?t.author:"Guest",BorderDashArray:t.borderDashArray?t.borderDashArray:0,BorderStyle:"Solid",Bounds:{X:i.x,Y:i.y,Width:t.width,Height:t.height,Left:i.x,Top:i.y,Location:{X:i.x,Y:i.y},Size:{Height:t.height,IsEmpty:!1,Width:t.width}},CloudIntensity:0,Comments:null,CustomData:t.customData?t.customData:null,CreatedDate:d,EnableShapeLabel:!1,ExistingCustomData:null,FillColor:t.fillColor?t.fillColor:"#ffffff00",FontColor:null,FontSize:0,IsCloudShape:!1,IsCommentLock:!1,IsLocked:!!t.isLock&&t.isLock,IsPrint:!t.isPrint||t.isPrint,LabelBorderColor:null,LabelBounds:{X:0,Y:0,Width:0,Height:0},LabelContent:null,LabelFillColor:null,LabelSettings:null,LineHeadEnd:t.lineHeadStartStyle?t.lineHeadStartStyle:r?"ClosedArrow":"None",LineHeadStart:t.lineHeadEndStyle?t.lineHeadEndStyle:r?"ClosedArrow":"None",ModifiedDate:"",Note:"",Opacity:t.opacity?t.opacity:1,RectangleDifference:null,RotateAngle:"RotateAngle0",ShapeAnnotationType:a,State:"",StateModel:"",StrokeColor:t.strokeColor?t.strokeColor:"#ff0000",Subject:e.toString(),Thickness:t.thickness?t.thickness:1,VertexPoints:l};return p[0]=c,{shapeAnnotation:p}},e}(),Zg=function(){function e(e,t){this.measureShapeCount=0,this.isAddAnnotationProgramatically=!1,this.pdfViewer=e,this.pdfViewerBase=t}return Object.defineProperty(e.prototype,"pixelToPointFactor",{get:function(){return.75},enumerable:!0,configurable:!0}),e.prototype.renderMeasureShapeAnnotations=function(e,t,i){if(e)if(e.length>=1){if(!this.pdfViewer.annotation.getStoredAnnotations(t,e,"_annotations_shape_measure")||i)for(var n=0;n<e.length;n++){var o=e[n],s=null;this.measureShapeCount=this.measureShapeCount+1,o.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(o,t,o.AnnotType);var a=void 0;if(o.ShapeAnnotationType){i&&this.pdfViewerBase.isJsonImported&&(o.Bounds=this.pdfViewerBase.importJsonForRotatedDocuments(o.Rotate,t,o.Bounds,o.AnnotationRotation),a=this.pdfViewerBase.isPageRotated);var r=null;if(o.VertexPoints)if(r=[],i&&this.pdfViewerBase.isJsonImported)r=this.pdfViewerBase.calculateVertexPoints(o.Rotate,t,o.VertexPoints,o.AnnotationRotation);else for(var l=0;l<o.VertexPoints.length;l++){var d={x:o.VertexPoints[l].X?o.VertexPoints[l].X:o.VertexPoints[l].x,y:o.VertexPoints[l].Y?o.VertexPoints[l].Y:o.VertexPoints[l].y};r.push(d)}o.Bounds&&!0===o.EnableShapeLabel&&(o.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(o.Bounds),o.LabelBorderColor=o.LabelBorderColor?o.LabelBorderColor:o.StrokeColor,o.FontColor=o.FontColor?o.FontColor:o.StrokeColor,o.LabelFillColor=o.LabelFillColor?o.LabelFillColor:o.FillColor,o.FontSize=o.FontSize?o.FontSize:16,o.LabelSettings=o.LabelSettings?o.LabelSettings:this.pdfViewer.shapeLabelSettings),o.AnnotationSettings=o.AnnotationSettings?o.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(o),o.allowedInteractions=o.AllowedInteractions?o.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(o);var h=o.AnnotationSettings.isPrint,p={ratio:o.Calibrate.Ratio,x:this.getNumberFormatArray(o.Calibrate.X),distance:this.getNumberFormatArray(o.Calibrate.Distance),area:this.getNumberFormatArray(o.Calibrate.Area),angle:this.getNumberFormatArray(o.Calibrate.Angle),volume:this.getNumberFormatArray(o.Calibrate.Volume),targetUnitConversion:o.Calibrate.TargetUnitConversion};o.Calibrate.Depth&&(p.depth=o.Calibrate.Depth);var c,u=o.Bounds.X?o.Bounds.X:o.Bounds.x,f=o.Bounds.Y?o.Bounds.Y:o.Bounds.y,m=o.Bounds.Width?o.Bounds.Width:o.Bounds.width,g=o.Bounds.Height?o.Bounds.Height:o.Bounds.height,y=(s={id:"measure"+this.measureShapeCount,shapeAnnotationType:o.ShapeAnnotationType,author:o.Author,allowedInteractions:o.allowedInteractions,modifiedDate:o.ModifiedDate,subject:o.Subject,note:o.Note,strokeColor:o.StrokeColor,fillColor:o.FillColor,opacity:o.Opacity,thickness:o.Thickness,rectangleDifference:o.RectangleDifference,borderStyle:o.BorderStyle,borderDashArray:o.BorderDashArray,rotateAngle:o.RotateAngle,isCloudShape:o.IsCloudShape,cloudIntensity:o.CloudIntensity,vertexPoints:r,lineHeadStart:o.LineHeadStart,lineHeadEnd:o.LineHeadEnd,isLocked:o.IsLocked,bounds:{left:u,top:f,width:m,height:g,right:o.Bounds.Right,bottom:o.Bounds.Bottom},caption:o.Caption,captionPosition:o.CaptionPosition,calibrate:p,leaderLength:o.LeaderLength,leaderLineExtension:o.LeaderLineExtension,leaderLineOffset:o.LeaderLineOffset,indent:o.Indent,annotName:o.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(o.Comments,o,o.Author),review:{state:o.State,stateModel:o.StateModel,modifiedDate:o.ModifiedDate,author:o.Author},labelContent:o.LabelContent,enableShapeLabel:o.EnableShapeLabel,labelFillColor:o.LabelFillColor,fontColor:o.FontColor,labelBorderColor:o.LabelBorderColor,fontSize:o.FontSize,labelBounds:o.LabelBounds,annotationSelectorSettings:this.getSettings(o),labelSettings:o.LabelSettings,annotationSettings:o.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(o),isPrint:h,isCommentLock:o.IsCommentLock,isAnnotationRotated:a}).vertexPoints;if(null==r&&(y=[]),o.AnnotationSelectorSettings=o.AnnotationSelectorSettings?o.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,o.allowedInteractions=o.AllowedInteractions?o.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(o),c={id:"measure"+this.measureShapeCount,shapeAnnotationType:this.getShapeType(s),author:s.author,allowedInteractions:o.allowedInteractions,modifiedDate:s.modifiedDate,subject:s.subject,notes:s.note,fillColor:s.fillColor,strokeColor:s.strokeColor,opacity:s.opacity,thickness:s.thickness,borderStyle:s.borderStyle,borderDashArray:s.borderDashArray.toString(),rotateAngle:parseFloat(s.rotateAngle.split("Angle")[1]),isCloudShape:s.isCloudShape,cloudIntensity:s.cloudIntensity,taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(s.lineHeadEnd),sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(s.lineHeadStart),vertexPoints:y,bounds:{x:s.bounds.left,y:s.bounds.top,width:s.bounds.width,height:s.bounds.height},leaderHeight:s.leaderLength,pageIndex:t,annotName:s.annotName,comments:s.comments,review:s.review,measureType:this.getMeasureType(s),labelContent:o.LabelContent,enableShapeLabel:o.EnableShapeLabel,labelFillColor:o.LabelFillColor,fontColor:o.FontColor,labelBorderColor:o.LabelBorderColor,fontSize:o.FontSize,labelBounds:o.LabelBounds,annotationSelectorSettings:o.AnnotationSelectorSettings,annotationSettings:s.annotationSettings,annotationAddMode:o.annotationAddMode,isPrint:h,isCommentLock:s.isCommentLock},this.pdfViewer.annotation.storeAnnotations(t,s,"_annotations_shape_measure"),this.isAddAnnotationProgramatically){var v={opacity:c.opacity,strokeColor:c.strokeColor,thickness:c.thickness,modifiedDate:c.modifiedDate,width:c.bounds.width,height:c.bounds.height};this.pdfViewer.fireAnnotationAdd(c.pageIndex,c.annotName,o.ShapeAnnotationType,c.bounds,v)}this.pdfViewer.add(c)}}}else if(e.shapeAnnotationType){s=this.createAnnotationObject(e);this.pdfViewer.annotationModule.isFormFieldShape=!1,this.pdfViewer.annotationModule.storeAnnotations(t,s,"_annotations_shape_measure"),this.pdfViewer.annotationModule.triggerAnnotationAdd(e)}},e.prototype.getSettings=function(e){this.pdfViewer.annotationSelectorSettings;return e.AnnotationSelectorSettings?e.AnnotationSelectorSettings:this.getSelector(e.Subject)},e.prototype.setAnnotationType=function(e){var t="Guest";switch(this.updateMeasureproperties(),this.pdfViewerBase.disableTextSelectionMode(),e){case"Distance":this.currentAnnotationMode="Distance";this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.distanceSettings.author?this.pdfViewer.distanceSettings.author:"Guest",this.pdfViewer.drawingObject={sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.distanceStartHead),taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.distanceEndHead),measureType:"Distance",fillColor:this.distanceFillColor,notes:"",strokeColor:this.distanceStrokeColor,leaderHeight:this.leaderLength,opacity:this.distanceOpacity,thickness:this.distanceThickness,borderDashArray:this.distanceDashArray.toString(),shapeAnnotationType:"Distance",author:t,subject:"Distance calculation",isCommentLock:!1},this.pdfViewer.tool="Distance";break;case"Perimeter":this.currentAnnotationMode="Perimeter";this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.perimeterSettings.author?this.pdfViewer.perimeterSettings.author:"Guest",this.pdfViewer.drawingObject={shapeAnnotationType:"LineWidthArrowHead",fillColor:this.perimeterFillColor,notes:"",strokeColor:this.perimeterStrokeColor,opacity:this.perimeterOpacity,thickness:this.perimeterThickness,sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.perimeterStartHead),taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.perimeterEndHead),measureType:"Perimeter",borderDashArray:this.perimeterDashArray.toString(),author:t,subject:"Perimeter calculation",isCommentLock:!1},this.pdfViewer.tool="Perimeter";break;case"Area":this.currentAnnotationMode="Area";var i=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.areaSettings.author?this.pdfViewer.areaSettings.author:"Guest",this.pdfViewer.drawingObject={shapeAnnotationType:"Polygon",fillColor:this.areaFillColor,notes:"",strokeColor:this.areaStrokeColor,thickness:this.areaThickness,opacity:this.areaOpacity,measureType:"Area",modifiedDate:i,borderStyle:"",borderDashArray:"0",author:t,subject:"Area calculation",isCommentLock:!1},this.pdfViewer.tool="Polygon";break;case"Radius":this.currentAnnotationMode="Radius";var n=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.radiusSettings.author?this.pdfViewer.radiusSettings.author:"Guest",this.pdfViewer.drawingObject={shapeAnnotationType:"Radius",fillColor:this.radiusFillColor,notes:"",strokeColor:this.radiusStrokeColor,opacity:this.radiusOpacity,thickness:this.radiusThickness,measureType:"Radius",modifiedDate:n,borderStyle:"",borderDashArray:"0",author:t,subject:"Radius calculation",isCommentLock:!1},this.pdfViewer.tool="DrawTool";break;case"Volume":this.currentAnnotationMode="Volume";var o=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.volumeSettings.author?this.pdfViewer.volumeSettings.author:"Guest",this.pdfViewer.drawingObject={shapeAnnotationType:"Polygon",notes:"",fillColor:this.volumeFillColor,strokeColor:this.volumeStrokeColor,opacity:this.volumeOpacity,thickness:this.volumeThickness,measureType:"Volume",modifiedDate:o,borderStyle:"",borderDashArray:"0",author:t,subject:"Volume calculation",isCommentLock:!1},this.pdfViewer.tool="Polygon"}},e.prototype.updateMeasureproperties=function(){this.distanceFillColor=this.pdfViewer.distanceSettings.fillColor?this.pdfViewer.distanceSettings.fillColor:"#ff0000",this.distanceStrokeColor=this.pdfViewer.distanceSettings.strokeColor?this.pdfViewer.distanceSettings.strokeColor:"#ff0000",this.distanceOpacity=this.pdfViewer.distanceSettings.opacity?this.pdfViewer.distanceSettings.opacity:1,this.distanceThickness=this.pdfViewer.distanceSettings.thickness?this.pdfViewer.distanceSettings.thickness:1,this.distanceDashArray=this.pdfViewer.distanceSettings.borderDashArray?this.pdfViewer.distanceSettings.borderDashArray:0,this.leaderLength=null!=this.pdfViewer.distanceSettings.leaderLength?this.pdfViewer.distanceSettings.leaderLength:40,this.distanceStartHead=this.pdfViewer.distanceSettings.lineHeadStartStyle?this.pdfViewer.distanceSettings.lineHeadStartStyle:"Closed",this.distanceEndHead=this.pdfViewer.distanceSettings.lineHeadEndStyle?this.pdfViewer.distanceSettings.lineHeadEndStyle:"Closed",this.perimeterFillColor=this.pdfViewer.perimeterSettings.fillColor?this.pdfViewer.perimeterSettings.fillColor:"#ffffff00",this.perimeterStrokeColor=this.pdfViewer.perimeterSettings.strokeColor?this.pdfViewer.perimeterSettings.strokeColor:"#ff0000",this.perimeterOpacity=this.pdfViewer.perimeterSettings.opacity?this.pdfViewer.perimeterSettings.opacity:1,this.perimeterThickness=this.pdfViewer.perimeterSettings.thickness?this.pdfViewer.perimeterSettings.thickness:1,this.perimeterDashArray=this.pdfViewer.perimeterSettings.borderDashArray?this.pdfViewer.perimeterSettings.borderDashArray:0,this.perimeterStartHead=this.pdfViewer.perimeterSettings.lineHeadStartStyle?this.pdfViewer.perimeterSettings.lineHeadStartStyle:"Open",this.perimeterEndHead=this.pdfViewer.perimeterSettings.lineHeadEndStyle?this.pdfViewer.perimeterSettings.lineHeadEndStyle:"Open",this.areaFillColor=this.pdfViewer.areaSettings.fillColor?this.pdfViewer.areaSettings.fillColor:"#ffffff00",this.areaStrokeColor=this.pdfViewer.areaSettings.strokeColor?this.pdfViewer.areaSettings.strokeColor:"#ff0000",this.areaOpacity=this.pdfViewer.areaSettings.opacity?this.pdfViewer.areaSettings.opacity:1,this.areaThickness=this.pdfViewer.areaSettings.thickness?this.pdfViewer.areaSettings.thickness:1,this.radiusFillColor=this.pdfViewer.radiusSettings.fillColor?this.pdfViewer.radiusSettings.fillColor:"#ffffff00",this.radiusStrokeColor=this.pdfViewer.radiusSettings.strokeColor?this.pdfViewer.radiusSettings.strokeColor:"#ff0000",this.radiusOpacity=this.pdfViewer.radiusSettings.opacity?this.pdfViewer.radiusSettings.opacity:1,this.radiusThickness=this.pdfViewer.radiusSettings.thickness?this.pdfViewer.radiusSettings.thickness:1,this.volumeFillColor=this.pdfViewer.volumeSettings.fillColor?this.pdfViewer.volumeSettings.fillColor:"#ffffff00",this.volumeStrokeColor=this.pdfViewer.volumeSettings.strokeColor?this.pdfViewer.volumeSettings.strokeColor:"#ff0000",this.volumeOpacity=this.pdfViewer.volumeSettings.opacity?this.pdfViewer.volumeSettings.opacity:1,this.volumeThickness=this.pdfViewer.volumeSettings.thickness?this.pdfViewer.volumeSettings.thickness:1,this.unit=this.pdfViewer.measurementSettings.conversionUnit.toLowerCase(),this.displayUnit=this.pdfViewer.measurementSettings.displayUnit.toLowerCase(),this.ratio=this.pdfViewer.measurementSettings.scaleRatio,this.volumeDepth=this.pdfViewer.measurementSettings.depth,this.scaleRatioString="1 "+this.unit+" = "+this.ratio.toString()+" "+this.displayUnit},e.prototype.createAnnotationObject=function(e){var t,i,n=this.pdfViewer.annotation.createGUID(),o=this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("shape_measure",e.pageIndex+1,e.measureType);o&&(document.getElementById(o).id=n),e.annotName=n,e.author=this.pdfViewer.annotationModule.updateAnnotationAuthor("measure",e.subject),this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(n,e.notes),e.wrapper.bounds?(t={left:e.wrapper.bounds.x,top:e.wrapper.bounds.y,height:e.wrapper.bounds.height,width:e.wrapper.bounds.width,right:e.wrapper.bounds.right,bottom:e.wrapper.bounds.bottom},i=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(e.wrapper.bounds)):(t={left:0,top:0,height:0,width:0,right:0,bottom:0},i={left:0,top:0,height:0,width:0,right:0,bottom:0});var s=parseInt(e.borderDashArray);s=isNaN(s)?0:s;var a={ratio:this.scaleRatioString,x:[this.createNumberFormat("x")],distance:[this.createNumberFormat("d")],area:[this.createNumberFormat("a")]};"Volume"===e.measureType&&(a.depth=this.volumeDepth);var r=this.pdfViewer.annotationModule.findAnnotationSettings(e,!0),l=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e);e.isPrint=r.isPrint;var d=this.pdfViewer.shapeLabelSettings,h={borderColor:e.strokeColor,fillColor:e.fillColor,fontColor:e.fontColor,fontSize:e.fontSize,labelContent:e.labelContent,labelHeight:d.labelHeight,labelWidth:d.labelMaxWidth,opacity:e.opacity};return{id:e.id,shapeAnnotationType:this.getShapeAnnotType(e.measureType),author:e.author,allowedInteractions:l,subject:e.subject,note:e.notes,strokeColor:e.strokeColor,fillColor:e.fillColor,opacity:e.opacity,thickness:e.thickness,borderStyle:e.borderStyle,borderDashArray:s,bounds:t,modifiedDate:this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),rotateAngle:"RotateAngle"+e.rotateAngle,isCloudShape:e.isCloudShape,cloudIntensity:e.cloudIntensity,vertexPoints:e.vertexPoints,lineHeadStart:this.pdfViewer.annotation.getArrowTypeForCollection(e.sourceDecoraterShapes),lineHeadEnd:this.pdfViewer.annotation.getArrowTypeForCollection(e.taregetDecoraterShapes),rectangleDifference:[],isLocked:r.isLock,leaderLength:e.leaderHeight,leaderLineExtension:2,leaderLineOffset:0,calibrate:a,caption:!0,captionPosition:"Top",indent:this.getIndent(e.measureType),annotName:n,comments:[],review:{state:"",stateModel:"",modifiedDate:this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),author:e.author},labelContent:e.labelContent,enableShapeLabel:e.enableShapeLabel,labelFillColor:e.labelFillColor,labelBorderColor:e.labelBorderColor,fontColor:e.fontColor,fontSize:e.fontSize,labelBounds:i,annotationSelectorSettings:this.getSelector(e.subject),labelSettings:h,annotationSettings:r,customData:this.pdfViewer.annotation.getMeasureData(e.subject),isPrint:e.isPrint,isCommentLock:e.isCommentLock,isAnnotationRotated:!1}},e.prototype.getSelector=function(e){var t=this.pdfViewer.annotationSelectorSettings;return"Distance calculation"===e&&this.pdfViewer.distanceSettings.annotationSelectorSettings?t=this.pdfViewer.distanceSettings.annotationSelectorSettings:"Perimeter calculation"===e&&this.pdfViewer.perimeterSettings.annotationSelectorSettings?t=this.pdfViewer.perimeterSettings.annotationSelectorSettings:"Area calculation"===e&&this.pdfViewer.areaSettings.annotationSelectorSettings?t=this.pdfViewer.areaSettings.annotationSelectorSettings:"Radius calculation"===e&&this.pdfViewer.radiusSettings.annotationSelectorSettings?t=this.pdfViewer.radiusSettings.annotationSelectorSettings:"Volume calculation"===e&&this.pdfViewer.volumeSettings.annotationSelectorSettings&&(t=this.pdfViewer.volumeSettings.annotationSelectorSettings),t},e.prototype.getShapeAnnotType=function(e){var t;switch(e){case"Distance":t="Line";break;case"Perimeter":t="Polyline";break;case"Area":case"Volume":t="Polygon";break;case"Radius":t="Circle"}return t},e.prototype.getShapeType=function(e){var t;return"Line"===e.shapeAnnotationType?t="Distance":"Polyline"===e.shapeAnnotationType?t="LineWidthArrowHead":"Polygon"===e.shapeAnnotationType&&"PolygonDimension"===e.indent?t="Polygon":"Polygon"===e.shapeAnnotationType&&"PolygonRadius"===e.indent||"Circle"===e.shapeAnnotationType?t="Radius":"Polygon"===e.shapeAnnotationType&&"PolygonVolume"===e.indent&&(t="Polygon"),t},e.prototype.getMeasureType=function(e){var t;return"Line"===e.shapeAnnotationType?t="Distance":"Polyline"===e.shapeAnnotationType?t="Perimeter":"Polygon"===e.shapeAnnotationType&&"PolygonDimension"===e.indent?t="Area":"Polygon"===e.shapeAnnotationType&&"PolygonRadius"===e.indent||"Circle"===e.shapeAnnotationType?t="Radius":"Polygon"===e.shapeAnnotationType&&"PolygonVolume"===e.indent&&(t="Volume"),t},e.prototype.getIndent=function(e){var t;switch(e){case"Distance":t="LineDimension";break;case"Perimeter":t="PolyLineDimension";break;case"Area":t="PolygonDimension";break;case"Radius":t="PolygonRadius";break;case"Volume":t="PolygonVolume"}return t},e.prototype.getNumberFormatArray=function(e){var t=new Array;if(e)for(var i=0;i<e.length;i++)t[i]={unit:e[i].Unit,fractionalType:e[i].FractionalType,conversionFactor:e[i].ConversionFactor,denominator:e[i].Denominator,formatDenominator:e[i].FormatDenominator};return t},e.prototype.createNumberFormat=function(e){var t=1,i=this.displayUnit;return"x"===e&&(t=this.getFactor(this.unit)),"a"===e&&(i="sq "+this.displayUnit),{unit:i,fractionalType:"D",conversionFactor:t,denominator:100,formatDenominator:!1}},e.prototype.saveMeasureShapeAnnotations=function(){var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape_measure");this.pdfViewerBase.isStorageExceed&&(e=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape_measure"]);for(var t=new Array,i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e&&!this.pdfViewer.annotationSettings.skipDownload)for(var n=JSON.parse(e),o=0;o<n.length;o++){var s=[],a=n[o];if(a){for(var r=0;a.annotations.length>r;r++){if(this.pdfViewer.annotationModule.updateModifiedDate(a.annotations[r]),this.pdfViewerBase.isJsonExported)if(a.annotations[r].isAnnotationRotated)a.annotations[r].bounds=this.pdfViewer.annotation.getBounds(a.annotations[r].bounds,a.pageIndex),a.annotations[r].vertexPoints=this.pdfViewer.annotation.getVertexPoints(a.annotations[r].vertexPoints,a.pageIndex);else{var l=this.pdfViewerBase.pageSize[a.pageIndex];l&&(a.annotations[r].annotationRotation=l.rotation)}a.annotations[r].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(a.annotations[r].bounds,a.pageIndex));var d=a.annotations[r].strokeColor;a.annotations[r].strokeColor=JSON.stringify(this.getRgbCode(d));var h=a.annotations[r].fillColor;if(a.annotations[r].fillColor=JSON.stringify(this.getRgbCode(h)),a.annotations[r].vertexPoints=JSON.stringify(this.pdfViewer.annotation.getVertexPoints(a.annotations[r].vertexPoints,a.pageIndex)),null!==a.annotations[r].rectangleDifference&&(a.annotations[r].rectangleDifference=JSON.stringify(a.annotations[r].rectangleDifference)),a.annotations[r].calibrate=this.getStringifiedMeasure(a.annotations[r].calibrate),!0===a.annotations[r].enableShapeLabel){a.annotations[r].labelBounds=JSON.stringify(this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(JSON.parse(a.annotations[r].bounds),a.pageIndex));var p=a.annotations[r].labelFillColor;a.annotations[r].labelFillColor=JSON.stringify(this.getRgbCode(p));var c=a.annotations[r].labelBorderColor;a.annotations[r].labelBorderColor=JSON.stringify(this.getRgbCode(c)),a.annotations[r].labelSettings.fillColor=p;var u=a.annotations[r].labelSettings.fontColor;a.annotations[r].fontColor=JSON.stringify(this.getRgbCode(u))}}s=a.annotations}t[a.pageIndex]=s}return JSON.stringify(t)},e.prototype.createScaleRatioWindow=function(){var e=this;if(S())this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenScaleRatioDialog");else{var t=we("div",{id:this.pdfViewer.element.id+"_scale_ratio_window",className:"e-pv-scale-ratio-window"});this.pdfViewerBase.pageContainer.appendChild(t);var i=this.createRatioUI();this.scaleRatioDialog=new Ko({showCloseIcon:!0,closeOnEscape:!1,isModal:!0,header:this.pdfViewer.localeObj.getConstant("Scale Ratio"),target:this.pdfViewer.element,content:i,close:function(){e.sourceTextBox.destroy(),e.convertUnit.destroy(),e.destTextBox.destroy(),e.dispUnit.destroy(),e.scaleRatioDialog.destroy();var t=e.pdfViewerBase.getElement("_scale_ratio_window");t.parentElement.removeChild(t)}}),!ge.isDevice||this.pdfViewer.enableDesktopMode?this.scaleRatioDialog.buttons=[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.onOkClicked.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.onCancelClicked.bind(this)}]:this.scaleRatioDialog.buttons=[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.onCancelClicked.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.onOkClicked.bind(this)}],this.pdfViewer.enableRtl&&(this.scaleRatioDialog.enableRtl=!0),this.scaleRatioDialog.appendTo(t),this.convertUnit.content=this.createContent(this.pdfViewer.localeObj.getConstant(this.unit)).outerHTML,this.dispUnit.content=this.createContent(this.pdfViewer.localeObj.getConstant(this.displayUnit)).outerHTML,this.depthUnit.content=this.createContent(this.pdfViewer.localeObj.getConstant(this.displayUnit)).outerHTML}},e.prototype.createRatioUI=function(){var e=we("div"),t=this.pdfViewer.element.id,i=[{text:this.pdfViewer.localeObj.getConstant("pt"),label:"pt"},{text:this.pdfViewer.localeObj.getConstant("in"),label:"in"},{text:this.pdfViewer.localeObj.getConstant("mm"),label:"mm"},{text:this.pdfViewer.localeObj.getConstant("cm"),label:"cm"},{text:this.pdfViewer.localeObj.getConstant("p"),label:"p"},{text:this.pdfViewer.localeObj.getConstant("ft"),label:"ft"},{text:this.pdfViewer.localeObj.getConstant("ft_in"),label:"ft_in"},{text:this.pdfViewer.localeObj.getConstant("m"),label:"m"}],n=we("div",{id:t+"_scale_ratio_label",className:"e-pv-scale-ratio-text"});n.textContent=this.pdfViewer.localeObj.getConstant("Scale Ratio"),e.appendChild(n);var o=we("div",{id:t+"_scale_src_container"});e.appendChild(o);var s=this.createInputElement("input","e-pv-scale-ratio-src-input",t+"_src_input",o);this.sourceTextBox=new Eh({value:1,format:"##",cssClass:"e-pv-scale-ratio-src-input",min:1,max:100},s);var a=this.createInputElement("button","e-pv-scale-ratio-src-unit",t+"_src_unit",o);this.convertUnit=new Yf({items:i,cssClass:"e-pv-scale-ratio-src-unit"},a),this.convertUnit.select=this.convertUnitSelect.bind(this);var r=we("div",{id:t+"_scale_dest_container"}),l=this.createInputElement("input","e-pv-scale-ratio-dest-input",t+"_dest_input",r);this.destTextBox=new Eh({value:1,format:"##",cssClass:"e-pv-scale-ratio-dest-input",min:1,max:100},l);var d=this.createInputElement("button","e-pv-scale-ratio-dest-unit",t+"_dest_unit",r);this.dispUnit=new Yf({items:i,cssClass:"e-pv-scale-ratio-dest-unit"},d),this.dispUnit.select=this.dispUnitSelect.bind(this),e.appendChild(r);var h=we("div",{id:t+"_depth_label",className:"e-pv-depth-text"});h.textContent=this.pdfViewer.localeObj.getConstant("Depth"),e.appendChild(h);var p=we("div",{id:t+"_depth_container"});e.appendChild(p);var c=this.createInputElement("input","e-pv-depth-input",t+"_depth_input",p);this.depthTextBox=new Eh({value:this.volumeDepth,format:"##",cssClass:"e-pv-depth-input",min:1},c);var u=this.createInputElement("button","e-pv-depth-unit",t+"_depth_unit",p);return this.depthUnit=new Yf({items:i,cssClass:"e-pv-depth-unit"},u),this.depthUnit.select=this.depthUnitSelect.bind(this),e},e.prototype.convertUnitSelect=function(e){this.convertUnit.content=this.createContent(e.item.text).outerHTML},e.prototype.dispUnitSelect=function(e){this.dispUnit.content=this.createContent(e.item.text).outerHTML,this.depthUnit.content=this.createContent(e.item.text).outerHTML},e.prototype.depthUnitSelect=function(e){this.depthUnit.content=this.createContent(e.item.text).outerHTML},e.prototype.createContent=function(e){var t=we("div",{className:"e-pv-scale-unit-content"});return t.textContent=e,t},e.prototype.createInputElement=function(e,t,i,n){var o=we("div",{id:i+"_container",className:t+"-container"}),s=we(e,{id:i});return"input"===e&&(s.type="text"),o.appendChild(s),n.appendChild(o),s},e.prototype.onOkClicked=function(){if(S()){var e=document.querySelector("#"+this.pdfViewer.element.id+"_src_unit"),t=document.querySelector("#"+this.pdfViewer.element.id+"_dest_unit"),i=document.querySelector("#"+this.pdfViewer.element.id+"_ratio_input"),n=document.querySelector("#"+this.pdfViewer.element.id+"_dest_input"),o=document.querySelector("#"+this.pdfViewer.element.id+"_depth_input");e&&t&&i&&n&&o&&(this.unit=e.value,this.displayUnit=t.value,this.ratio=parseInt(n.value)/parseInt(i.value),this.volumeDepth=parseInt(o.value)),this.scaleRatioString=parseInt(i.value)+" "+this.unit+" = "+parseInt(n.value)+" "+this.displayUnit,this.updateMeasureValues(this.scaleRatioString,this.displayUnit,this.unit,this.volumeDepth)}else{this.unit=this.getContent(this.convertUnit.content),this.displayUnit=this.getContent(this.dispUnit.content),this.ratio=this.destTextBox.value/this.sourceTextBox.value,this.volumeDepth=this.depthTextBox.value,this.scaleRatioString=this.sourceTextBox.value+" "+this.unit+" = "+this.destTextBox.value+" "+this.displayUnit,this.scaleRatioDialog.hide();var s,a;s=this.restoreUnit(this.convertUnit),a=this.restoreUnit(this.dispUnit),this.updateMeasureValues(this.scaleRatioString,a,s,this.volumeDepth)}},e.prototype.restoreUnit=function(e){for(var t,i=0;i<e.items.length;i++){var n=e.items[i];this.unit===n.text&&(t=n.label)}return t},e.prototype.updateMeasureValues=function(e,t,i,n){this.scaleRatioString=e,this.displayUnit=t,this.unit=i,this.volumeDepth=n;for(var o=0;o<this.pdfViewerBase.pageCount;o++){var s=this.getAnnotations(o,null);if(s)for(var a=0;a<s.length;a++){var r=(s=this.getAnnotations(o,null))[a];r.annotationSettings.isLock||(r.calibrate.ratio=e,r.calibrate.x[0].unit=t,r.calibrate.distance[0].unit=t,r.calibrate.area[0].unit=t,r.calibrate.x[0].conversionFactor=this.getFactor(i),"PolygonVolume"===r.indent&&(r.calibrate.depth=n),s[a]=r,this.manageAnnotations(s,o),this.pdfViewer.annotation.updateCalibrateValues(this.getAnnotationBaseModel(r.id)))}this.pdfViewer.annotation.renderAnnotations(o,null,null,null,null,!1)}},e.prototype.getAnnotationBaseModel=function(e){for(var t=null,i=0;i<this.pdfViewer.annotations.length;i++)if(e===this.pdfViewer.annotations[i].id){t=this.pdfViewer.annotations[i];break}return t},e.prototype.getContent=function(e){return e.split("</div>")[0].split('">')[1]},e.prototype.setConversion=function(e,t){var i;if(t){var n=t.pageIndex;"diagram_helper"===t.id&&(n=t.pageIndex?t.pageIndex:this.pdfViewerBase.activeElements.activePageID,t=this.getCurrentObject(n,null,t.annotName)),i=t?this.getCurrentValues(t.id,n):this.getCurrentValues()}else i=this.getCurrentValues();var o=e*i.ratio;return this.convertPointToUnits(i.factor,o,i.unit)},e.prototype.onCancelClicked=function(){this.scaleRatioDialog.hide()},e.prototype.modifyInCollection=function(e,t,i,n){m(i.formFieldAnnotationType)||""===i.formFieldAnnotationType?this.pdfViewer.annotationModule.isFormFieldShape=!1:this.pdfViewer.annotationModule.isFormFieldShape=!0,n||this.pdfViewerBase.updateDocumentEditedProperty(!0);var o=null,s=this.getAnnotations(t,null);if(null!=s&&i){for(var a=0;a<s.length;a++)if(i.id===s[a].id){if("bounds"===e)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(i,!0),"Line"===s[a].shapeAnnotationType||"Polyline"===s[a].shapeAnnotationType||"Polygon"===s[a].shapeAnnotationType?(s[a].vertexPoints=i.vertexPoints,s[a].bounds={left:i.bounds.x,top:i.bounds.y,width:i.bounds.width,height:i.bounds.height,right:i.bounds.right,bottom:i.bounds.bottom}):s[a].bounds={left:i.bounds.x,top:i.bounds.y,width:i.bounds.width,height:i.bounds.height,right:i.bounds.right,bottom:i.bounds.bottom},!0===s[a].enableShapeLabel&&i.wrapper&&(s[a].labelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(i.wrapper.bounds));else if("fill"===e)s[a].fillColor=i.wrapper.children[0].style.fill,this.pdfViewer.enableShapeLabel&&(s[a].labelFillColor=i.wrapper.children[0].style.fill);else if("stroke"===e)s[a].strokeColor=i.wrapper.children[0].style.strokeColor;else if("opacity"===e)s[a].opacity=i.wrapper.children[0].style.opacity;else if("thickness"===e)s[a].thickness=i.wrapper.children[0].style.strokeWidth;else if("dashArray"===e)s[a].borderDashArray=i.wrapper.children[0].style.strokeDashArray,s[a].borderStyle=i.borderStyle;else if("startArrow"===e)s[a].lineHeadStart=this.pdfViewer.annotation.getArrowTypeForCollection(i.sourceDecoraterShapes);else if("endArrow"===e)s[a].lineHeadEnd=this.pdfViewer.annotation.getArrowTypeForCollection(i.taregetDecoraterShapes);else if("leaderLength"===e)s[a].leaderLength=i.leaderHeight;else if("notes"===e)s[a].note=i.notes,!0===s[a].enableShapeLabel&&(s[a].labelContent=i.notes);else{if("delete"===e){o=s.splice(a,1)[0];break}if("labelContent"===e){s[a].note=i.labelContent,s[a].labelContent=i.labelContent;break}"fontColor"===e?s[a].fontColor=i.fontColor:"fontSize"===e&&(s[a].fontSize=i.fontSize)}s[a].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.pdfViewer.annotationModule.storeAnnotationCollections(s[a],t)}this.manageAnnotations(s,t)}return o},e.prototype.addInCollection=function(e,t){var i=this.getAnnotations(e,null);i&&i.push(t),this.manageAnnotations(i,e)},e.prototype.manageAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape_measure");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape_measure"]),i){var n=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_shape_measure");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[o]&&(n[o].annotations=e);var s=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape_measure"]=s:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_shape_measure",s)}},e.prototype.getAnnotations=function(e,t){var i,n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape_measure");if(this.pdfViewerBase.isStorageExceed&&(n=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape_measure"]),n){var o=JSON.parse(n),s=this.pdfViewer.annotationModule.getPageCollection(o,e);i=o[s]?o[s].annotations:t}else i=t;return i},e.prototype.getCurrentObject=function(e,t,i){var n=null,o=this.getAnnotations(e,null);if(null!=o)for(var s=0;s<o.length;s++)if(t){if(t===o[s].id){n=o[s];break}}else if(i&&i===o[s].annotName){n=o[s];break}return n},e.prototype.getCurrentValues=function(e,t){var i,n,o,s;if(e&&!isNaN(t)){var a=this.getCurrentObject(t,e);a?(i=this.getCurrentRatio(a.calibrate.ratio),n=a.calibrate.x[0].unit,o=a.calibrate.x[0].conversionFactor,s=a.calibrate.depth):(i=this.ratio,n=this.displayUnit,o=this.getFactor(this.unit),s=this.volumeDepth)}else i=this.ratio,n=this.displayUnit,o=this.getFactor(this.unit),s=this.volumeDepth;return{ratio:i,unit:n,factor:o,depth:s}},e.prototype.getCurrentRatio=function(e){var t=e.split(" ");return"="===t[3]?parseFloat(t[4])/parseFloat(t[0]):parseFloat(t[3])/parseFloat(t[0])},e.prototype.calculateArea=function(e,t,i){var n=this.getCurrentValues(t,i),o=this.getArea(e,n.factor,n.unit)*n.ratio;if("ft_in"===n.unit){var s=Math.round(100*o)/100;if(s>=12){if((s=(s=(Math.round(s/12*100)/100).toString()).split("."))[1]){var a=0;return s[1].charAt(1)?(a=parseInt(s[1].charAt(0))+"."+parseInt(s[1].charAt(1)),a=Math.round(a)):a=s[1],a?s[0]+" "+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant("ft")+" "+a+" "+this.pdfViewer.localeObj.getConstant("in"):s[0]+" "+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant("ft")}return s[0]+" "+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant("ft")}return Math.round(100*o)/100+" "+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant("in")}return"m"===n.unit?100*o/100+" "+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant(n.unit):Math.round(100*o)/100+" "+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant(n.unit)},e.prototype.getArea=function(e,t,i){for(var n=0,o=e.length-1,s=0;s<e.length;s++)n+=(e[o].x*this.pixelToPointFactor*t+e[s].x*this.pixelToPointFactor*t)*(e[o].y*this.pixelToPointFactor*t-e[s].y*this.pixelToPointFactor*t),o=s;return"ft_in"===i?Math.abs(2*n):Math.abs(n/2)},e.prototype.calculateVolume=function(e,t,i){var n=this.getCurrentValues(t,i),o=n.depth?n.depth:this.volumeDepth,s=this.getArea(e,n.factor,n.unit)*(o*this.convertUnitToPoint(n.unit)*n.factor)*n.ratio;if("ft_in"===n.unit){var a=Math.round(100*s)/100;if(a>=12){if((a=(a=(Math.round(a/12*100)/100).toString()).split("."))[1]){var r=0;return a[1].charAt(1)?(r=parseInt(a[1].charAt(0))+"."+parseInt(a[1].charAt(1)),r=Math.round(r)):r=a[1],r?a[0]+" "+this.pdfViewer.localeObj.getConstant("cu")+" "+this.pdfViewer.localeObj.getConstant("ft")+" "+r+" "+this.pdfViewer.localeObj.getConstant("in"):a[0]+" "+this.pdfViewer.localeObj.getConstant("cu")+" "+this.pdfViewer.localeObj.getConstant("ft")}return a[0]+" "+this.pdfViewer.localeObj.getConstant("cu")+" "+this.pdfViewer.localeObj.getConstant("ft")}return Math.round(100*s)/100+" "+this.pdfViewer.localeObj.getConstant("cu")+" "+this.pdfViewer.localeObj.getConstant("in")}return Math.round(100*s)/100+" "+this.pdfViewer.localeObj.getConstant("cu")+" "+this.pdfViewer.localeObj.getConstant(n.unit)},e.prototype.calculatePerimeter=function(e){var t=Ns.getLengthFromListOfPoints(e.vertexPoints);return this.setConversion(t*this.pixelToPointFactor,e)},e.prototype.getFactor=function(e){var t;switch(e){case"in":case"ft_in":t=1/72;break;case"cm":t=1/28.346;break;case"mm":t=1/2.835;break;case"pt":t=1;break;case"p":t=1/12;break;case"ft":t=1/864;break;case"m":t=1/2834.64567}return t},e.prototype.convertPointToUnits=function(e,t,i){var n;if("ft_in"===i){var o=Math.round(t*e*100)/100;if(o>=12)if((o=(o=(Math.round(o/12*100)/100).toString()).split("."))[1]){var s=0;o[1].charAt(1)?(s=parseInt(o[1].charAt(0))+"."+parseInt(o[1].charAt(1)),s=Math.round(s)):s=o[1],n=s?o[0]+" "+this.pdfViewer.localeObj.getConstant("ft")+" "+s+" "+this.pdfViewer.localeObj.getConstant("in"):o[0]+" "+this.pdfViewer.localeObj.getConstant("ft")}else n=o[0]+" "+this.pdfViewer.localeObj.getConstant("ft");else n=Math.round(t*e*100)/100+" "+this.pdfViewer.localeObj.getConstant("in")}else n=Math.round(t*e*100)/100+" "+this.pdfViewer.localeObj.getConstant(i);return n},e.prototype.convertUnitToPoint=function(e){var t;switch(e){case"in":case"ft_in":t=72;break;case"cm":t=28.346;break;case"mm":t=2.835;break;case"pt":t=1;break;case"p":t=12;break;case"ft":t=864;break;case"m":t=2834.64567}return t},e.prototype.getStringifiedMeasure=function(e){return m(e)||(e.angle=JSON.stringify(e.angle),e.area=JSON.stringify(e.area),e.distance=JSON.stringify(e.distance),e.volume=JSON.stringify(e.volume)),JSON.stringify(e)},e.prototype.getRgbCode=function(e){e.match(/#([a-z0-9]+)/gi)||e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)||(e=this.pdfViewer.annotationModule.nameToHash(e));var t=e.split(",");return m(t[1])&&(t=(e=this.pdfViewer.annotationModule.getValue(e,"rgba")).split(",")),{r:parseInt(t[0].split("(")[1]),g:parseInt(t[1]),b:parseInt(t[2]),a:parseInt(t[3])}},e.prototype.saveImportedMeasureAnnotations=function(e,t){var i,n=null;if(e.VertexPoints){n=[];for(var o=0;o<e.VertexPoints.length;o++){var s={x:e.VertexPoints[o].X,y:e.VertexPoints[o].Y};n.push(s)}}var a={ratio:e.Calibrate.Ratio,x:this.getNumberFormatArray(e.Calibrate.X),distance:this.getNumberFormatArray(e.Calibrate.Distance),area:this.getNumberFormatArray(e.Calibrate.Area),angle:this.getNumberFormatArray(e.Calibrate.Angle),volume:this.getNumberFormatArray(e.Calibrate.Volume),targetUnitConversion:e.Calibrate.TargetUnitConversion};e.Calibrate.Depth&&(a.depth=e.Calibrate.Depth),e.Bounds&&!0===e.EnableShapeLabel&&(e.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(e.Bounds),e.LabelBorderColor=e.LabelBorderColor?e.LabelBorderColor:e.StrokeColor,e.FontColor=e.FontColor?e.FontColor:e.StrokeColor,e.LabelFillColor=e.LabelFillColor?e.LabelFillColor:e.FillColor,e.FontSize=e.FontSize?e.FontSize:16,e.LabelSettings=e.LabelSettings?e.LabelSettings:this.pdfViewer.shapeLabelSettings),e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(e),e.Author=this.pdfViewer.annotationModule.updateAnnotationAuthor("measure",e.Subject),i={id:"measure",shapeAnnotationType:e.ShapeAnnotationType,author:e.Author,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,thickness:e.Thickness,rectangleDifference:e.RectangleDifference,borderStyle:e.BorderStyle,borderDashArray:e.BorderDashArray,rotateAngle:e.RotateAngle,isCloudShape:e.IsCloudShape,cloudIntensity:e.CloudIntensity,vertexPoints:n,lineHeadStart:e.LineHeadStart,lineHeadEnd:e.LineHeadEnd,isLocked:e.IsLocked,bounds:{left:e.Bounds.X,top:e.Bounds.Y,width:e.Bounds.Width,height:e.Bounds.Height,right:e.Bounds.Right,bottom:e.Bounds.Bottom},caption:e.Caption,captionPosition:e.CaptionPosition,calibrate:a,leaderLength:e.LeaderLength,leaderLineExtension:e.LeaderLineExtension,leaderLineOffset:e.LeaderLineOffset,indent:e.Indent,annotName:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},labelContent:e.LabelContent,enableShapeLabel:e.EnableShapeLabel,labelFillColor:e.LabelFillColor,labelBorderColor:e.LabelBorderColor,fontColor:e.FontColor,fontSize:e.FontSize,labelBounds:e.LabelBounds,annotationSelectorSettings:this.getSettings(e),labelSettings:e.LabelSettings,annotationSettings:e.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.IsPrint,isCommentLock:e.IsCommentLock,isAnnotationRotated:!1},this.pdfViewer.annotationModule.storeAnnotations(t,i,"_annotations_shape_measure")},e.prototype.updateMeasureAnnotationCollections=function(e,t){var i=null;if(e.VertexPoints){i=[];for(var n=0;n<e.VertexPoints.length;n++){var o={x:e.VertexPoints[n].X,y:e.VertexPoints[n].Y};i.push(o)}}var s={ratio:e.Calibrate.Ratio,x:this.getNumberFormatArray(e.Calibrate.X),distance:this.getNumberFormatArray(e.Calibrate.Distance),area:this.getNumberFormatArray(e.Calibrate.Area),angle:this.getNumberFormatArray(e.Calibrate.Angle),volume:this.getNumberFormatArray(e.Calibrate.Volume),targetUnitConversion:e.Calibrate.TargetUnitConversion};if(e.Calibrate.Depth&&(s.depth=e.Calibrate.Depth),e.Bounds&&!0===e.EnableShapeLabel){e.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(e.Bounds),e.LabelBorderColor=e.LabelBorderColor?e.LabelBorderColor:e.StrokeColor,e.FontColor=e.FontColor?e.FontColor:e.StrokeColor,e.LabelFillColor=e.LabelFillColor?e.LabelFillColor:e.FillColor,e.FontSize=e.FontSize?e.FontSize:16;var a=this.pdfViewer.shapeLabelSettings,r={borderColor:e.StrokeColor,fillColor:e.FillColor,fontColor:e.FontColor,fontSize:e.FontSize,labelContent:e.LabelContent,labelHeight:a.labelHeight,labelWidth:a.labelWidth,opacity:e.Opacity};e.LabelSettings=e.LabelSettings?e.LabelSettings:r}return e.AnnotationSelectorSettings=e.AnnotationSelectorSettings?e.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(e),e.IsLocked&&(e.AnnotationSettings.isLock=e.IsLocked),{id:"measure",shapeAnnotationType:e.ShapeAnnotationType,author:e.Author,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,thickness:e.Thickness,rectangleDifference:e.RectangleDifference,borderStyle:e.BorderStyle,borderDashArray:e.BorderDashArray,rotateAngle:e.RotateAngle,isCloudShape:e.IsCloudShape,cloudIntensity:e.CloudIntensity,vertexPoints:i,lineHeadStart:e.LineHeadStart,lineHeadEnd:e.LineHeadEnd,isLocked:e.IsLocked,bounds:{left:e.Bounds.X,top:e.Bounds.Y,width:e.Bounds.Width,height:e.Bounds.Height,right:e.Bounds.Right,bottom:e.Bounds.Bottom},caption:e.Caption,captionPosition:e.CaptionPosition,calibrate:s,leaderLength:e.LeaderLength,leaderLineExtension:e.LeaderLineExtension,leaderLineOffset:e.LeaderLineOffset,indent:e.Indent,annotationId:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},labelContent:e.LabelContent,enableShapeLabel:e.EnableShapeLabel,labelFillColor:e.LabelFillColor,labelBorderColor:e.LabelBorderColor,fontColor:e.FontColor,fontSize:e.FontSize,labelBounds:e.LabelBounds,pageNumber:t,annotationSelectorSettings:e.AnnotationSelectorSettings,labelSettings:e.labelSettings,annotationSettings:e.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.IsPrint}},e.prototype.updateAddAnnotationDetails=function(e,t,i){i=t?t.offset?t.offset:{x:10,y:10}:(t={offset:{x:10,y:10},pageNumber:0,width:void 0,height:void 0}).offset;var n=null,o=null,s=null,a="",r="",l="",d=!1,h=[],p=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),c=this.pdfViewer.annotation.createGUID();"Distance"==e?(n=this.pdfViewer.lineSettings.annotationSelectorSettings?this.pdfViewer.lineSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,s=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.lineSettings),o=this.pdfViewer.lineSettings.allowedInteractions?this.pdfViewer.lineSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,a="LineDimension",r="Line",l="Distance calculation",d=!0,h=t.vertexPoints?t.vertexPoints:[{x:i.x,y:i.y},{x:i.x+100,y:i.y}],t.width=t.width?t.width:1,t.height=t.height?t.height:1):"Perimeter"==e?(n=this.pdfViewer.arrowSettings.annotationSelectorSettings?this.pdfViewer.arrowSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,s=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.arrowSettings),o=this.pdfViewer.arrowSettings.allowedInteractions?this.pdfViewer.arrowSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,a="PolyLineDimension",r="Polyline",l="Perimeter calculation",d=!0,h=t.vertexPoints?t.vertexPoints:[{x:i.x,y:i.y},{x:i.x+85,y:i.y},{x:i.x+86,y:i.y+62}],t.width=t.width?t.width:1,t.height=t.height?t.height:1):"Area"==e?(n=this.pdfViewer.rectangleSettings.annotationSelectorSettings?this.pdfViewer.rectangleSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,s=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.rectangleSettings),o=this.pdfViewer.rectangleSettings.allowedInteractions?this.pdfViewer.rectangleSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,a="PolygonDimension",r="Polygon",l="Area calculation",h=t.vertexPoints?t.vertexPoints:[{x:i.x,y:i.y},{x:i.x+88,y:i.y-1},{x:i.x+89,y:i.y+53},{x:i.x,y:i.y}],t.width=t.width?t.width:1,t.height=t.height?t.height:1):"Radius"==e?(n=this.pdfViewer.circleSettings.annotationSelectorSettings?this.pdfViewer.circleSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,s=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.circleSettings),o=this.pdfViewer.circleSettings.allowedInteractions?this.pdfViewer.circleSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,a="PolygonRadius",r="Circle",l="Radius calculation",t.width=t.width?t.width:100,t.height=t.height?t.height:100,h=null):"Volume"==e&&(n=this.pdfViewer.polygonSettings.annotationSelectorSettings?this.pdfViewer.polygonSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,s=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.polygonSettings),o=this.pdfViewer.polygonSettings.allowedInteractions?this.pdfViewer.polygonSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,a="PolygonVolume",r="Polygon",l="Volume calculation",h=t.vertexPoints?t.vertexPoints:[{x:i.x,y:i.y},{x:i.x,y:i.y+109},{x:i.x+120,y:i.y+109},{x:i.x+120,y:i.y-1},{x:i.x,y:i.y}],t.width=t.width?t.width:1,t.height=t.height?t.height:1),s.isLock=!!t.isLock&&t.isLock,s.minHeight=t.minHeight?t.minHeight:0,s.minWidth=t.minWidth?t.minWidth:0,s.maxWidth=t.maxWidth?t.maxWidth:0,s.maxHeight=t.maxHeight?t.maxHeight:0;var u=96,f=.013888888888888888,m=1,g="in",y="";if(h||"Radius"==e||"Volume"==e)if("Distance"==e||"Perimeter"==e||"Radius"==e){var v=0;if("Radius"==e)v=t.width/2*this.pixelToPointFactor;else{for(var w=0;w<h.length-1;w++)v+=Math.sqrt(Math.pow(h[w].x-h[w+1].x,2)+Math.pow(h[w].y-h[w+1].y,2));v*=this.pixelToPointFactor}var b=v*m;y=this.convertPointToUnits(f,b,g)}else if("Area"==e||"Volume"==e){for(var S=0,C=h.length-1,x=0;x<h.length;x++)S+=(h[C].x*this.pixelToPointFactor*f+h[x].x*this.pixelToPointFactor*f)*(h[C].y*this.pixelToPointFactor*f-h[x].y*this.pixelToPointFactor*f),C=x;S=Math.abs(S/2),"Volume"==e?(S=S*(u*this.convertUnitToPoint(g)*f)*m,y=Math.round(100*S)/100+this.pdfViewer.localeObj.getConstant("cu")+" "+this.pdfViewer.localeObj.getConstant(g)):y=Math.round(100*S)/100+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant(g)}h&&(h=this.pdfViewer.annotation.getVertexPointsXY(h));var M=[],I={AllowedInteractions:t.allowedInteractions?t.allowedInteractions:o,AnnotName:c,AnnotType:"shape_measure",AnnotationSelectorSettings:t.annotationSelectorSettings?t.annotationSelectorSettings:n,AnnotationSettings:s,Author:t.author?t.author:"Guest",BorderDashArray:t.borderDashArray?t.borderDashArray:0,BorderStyle:"Solid",Bounds:{X:i.x,Y:i.y,Width:t.width,Height:t.height,Left:i.x,Top:i.y,Location:{X:i.x,Y:i.y},Size:{Height:t.height,IsEmpty:!1,Width:t.width}},Calibrate:{Area:[{ConversionFactor:1,Denominator:100,FormatDenominator:!1,FractionalType:"D",Unit:"sq in"}],Depth:t.depth?t.depth:0,Distance:[{ConversionFactor:1,Denominator:100,FormatDenominator:!1,FractionalType:"D",Unit:"in"}],Ratio:"1 in = 1 in",TargetUnitConversion:0,Volume:null,X:[{ConversionFactor:.013888889,Denominator:100,FormatDenominator:!1,FractionalType:"D",Unit:"in"}]},Caption:!0,CaptionPosition:"Top",CloudIntensity:0,Comments:null,CustomData:t.customData?t.customData:null,CreatedDate:p,EnableShapeLabel:!1,ExistingCustomData:null,FillColor:t.fillColor?t.fillColor:"#ffffff00",FontColor:null,FontSize:0,Indent:a,IsCloudShape:!1,IsCommentLock:!1,IsLocked:!!t.isLock&&t.isLock,IsPrint:!t.isPrint||t.isPrint,LabelBorderColor:null,LabelBounds:{X:0,Y:0,Width:0,Height:0},LabelContent:null,LabelFillColor:null,LabelSettings:null,LeaderLength:0,LeaderLineExtension:0,LeaderLineOffset:0,LineHeadEnd:t.lineHeadStartStyle?t.lineHeadStartStyle:d?"ClosedArrow":"None",LineHeadStart:t.lineHeadEndStyle?t.lineHeadEndStyle:d?"ClosedArrow":"None",ModifiedDate:"",Note:y,Opacity:t.opacity?t.opacity:1,RectangleDifference:null,RotateAngle:"RotateAngle0",ShapeAnnotationType:r,State:"",StateModel:"",StrokeColor:t.strokeColor?t.strokeColor:"#ff0000",Subject:l,Thickness:t.thickness?t.thickness:1,VertexPoints:h};return M[0]=I,{measureShapeAnnotation:M}},e}(),Xg=function(){function e(e,t){this.isStampAddMode=!1,this.stampPageNumber=[],this.isAddAnnotationProgramatically=!1,this.customStampName=null,this.dynamicText="",this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.renderStampAnnotations=function(e,t,i,n){for(var o=!1,s=0;s<this.stampPageNumber.length;s++)if(this.stampPageNumber[s]===t){o=!0;break}if(n&&(o=!1),e&&!o){this.stampPageNumber.push(t);for(var a=function(o){var s=e[o];s.annotationAddMode=r.pdfViewer.annotationModule.findAnnotationMode(s,t,s.AnnotType);var a=s.Apperarance,l=s.Rect,d=s.Opacity,h=(s.AnnotationSelectorSettings,parseFloat(e[o].pageNumber));isNaN(h)&&(h=e[o].PageNumber);var p=s.IsDynamic;document.getElementById(r.pdfViewer.element.id+"_pageDiv_"+h);s.AnnotationSettings=s.AnnotationSettings?s.AnnotationSettings:r.pdfViewer.annotationModule.updateSettings(r.pdfViewer.stampSettings);var c=r.stampImageData(s);if(p&&s.Subject&&"Draft"!==s.Subject&&!c){r.retrieveDynamicStampAnnotation(s.Subject),r.isExistingStamp=!0;for(var u=r.calculateImagePosition(l,!0),f=s.RotateAngle,m=0;m<a.length;m++){var g=a[m];if("string"===g.type&&void 0!==g.text){var y=void 0;2===(y=n?g.text:g.text.split("(")[1].split(")")[0]).split("(").length?y.split("(")[1].split(")")[0].toLowerCase()!==s.Subject.toLowerCase()&&(r.dynamicText+=y.split("(")[1].split(")")[0]):y.toLowerCase()!==s.Subject.toLowerCase()&&(r.dynamicText+=y)}}r.renderStamp(u.left,u.top,u.width,u.height,h,d,f,i,s,!0)}else if(s.Subject&&!c){r.retrievestampAnnotation(s.Subject),r.isExistingStamp=!0;u=r.calculateImagePosition(l,!0),f=s.RotateAngle;r.renderStamp(u.left,u.top,u.width,u.height,h,d,f,i,s),r.isExistingStamp=!1}else if(a)for(var v=function(e){var t=a[e],n=t.imagedata,o=(t.matrix,t.CreationDate),p=t.ModifiedDate,c=t.RotateAngle;if(n){var u=new Image,f=r;u.onload=function(){var e=f.calculateImagePosition(l,!0);s.AnnotationSettings=s.AnnotationSettings?s.AnnotationSettings:f.pdfViewer.customStampSettings.annotationSettings,f.renderCustomImage(e,h,u,o,p,c,d,i,!0,s)},u.src=n}},w=0;w<a.length;w++)v(w)},r=this,l=0;l<e.length;l++)a(l)}},e.prototype.moveStampElement=function(e,t,i){var n=this.pdfViewerBase.getZoomFactor();e/=n,t/=n;var o,s="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:"Guest";if(this.pdfViewerBase.isDynamicStamp)if(this.pdfViewer.dateTimeFormat){var a=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.dynamicText="By "+s+" at "+a+" "}else{var r=(new Date).toString().split(" ").splice(1,3).join(" "),l=(new Date).toLocaleTimeString();this.dynamicText="By "+s+" at "+l+" , "+r+"   "}var d=this.currentStampAnnotation;return d&&"Image"===d.shapeAnnotationType?o={id:"stamp"+this.pdfViewerBase.customStampCount,bounds:{x:e,y:t,width:d.bounds.width,height:d.bounds.height},pageIndex:i,data:d.data,modifiedDate:d.modifiedDate,shapeAnnotationType:"Image",opacity:d.opacity,rotateAngle:d.RotationAngle,annotName:d.annotationName,comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:d.author}}:d&&(o={id:"stamp"+this.pdfViewerBase.customStampCount,bounds:{x:e,y:t,width:d.width,height:d.height},pageIndex:i,data:d.pathdata,shapeAnnotationType:"Stamp",strokeColor:d.strokeColor,fillColor:d.fillColor,opacity:.5,stampFillColor:d.stampFillColor,stampStrokeColor:d.stampStrokeColor,rotateAngle:d.RotateAngle,isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,subject:d.iconName,annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings}),this.pdfViewerBase.currentSignatureAnnot&&(o="SignatureText"===(d=this.pdfViewerBase.currentSignatureAnnot).shapeAnnotationType?{id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:e,y:t,width:d.bounds.width,height:d.bounds.height},pageIndex:i,data:d.data,modifiedDate:"",shapeAnnotationType:"SignatureText",thickness:d.thickness,strokeColor:d.strokeColor,opacity:d.opacity,signatureName:d.signatureName,fontFamily:d.fontFamily,fontSize:Math.floor(d.bounds.height/2)}:"SignatureImage"===d.shapeAnnotationType?{id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:e,y:t,width:d.bounds.width,height:d.bounds.height},pageIndex:i,data:d.data,modifiedDate:"",shapeAnnotationType:"SignatureImage",thickness:d.thickness,strokeColor:d.strokeColor,opacity:d.opacity,signatureName:d.signatureName}:{id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:e,y:t,width:d.bounds.width,height:d.bounds.height},pageIndex:i,data:d.data,shapeAnnotationType:"HandWrittenSignature",thickness:d.thickness,strokeColor:d.strokeColor,opacity:d.opacity,signatureName:d.signatureName}),o},e.prototype.ConvertPointToPixel=function(e){return e*(96/72)},e.prototype.calculateImagePosition=function(e,t){var i={width:0,height:0,left:0,top:0},n=parseFloat(e.x?e.x:e.X),o=parseFloat(e.y?e.y:e.Y),s=parseFloat(e.width?e.width:e.Width),a=parseFloat(e.height?e.height:e.Height);t?i={width:this.ConvertPointToPixel(s),height:this.ConvertPointToPixel(a),left:this.ConvertPointToPixel(n),top:this.ConvertPointToPixel(o)}:i={width:s,height:a,left:n,top:o};return i},e.prototype.createCustomStampAnnotation=function(e,t){var i=this,n=this.pdfViewerBase.currentPageNumber-1,o=(document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+n),new Image),s=this;o.onload=function(){i.pdfViewerBase.getZoomFactor();var e=i.pdfViewer.customStampSettings,a=e.width>0?e.width:0,r=e.height>0?e.height:0,l=100;a>0||r>0||(o.naturalHeight>=o.naturalWidth?(r=o.naturalHeight/o.naturalHeight*l,a=o.naturalWidth/o.naturalHeight*l):(r=o.naturalHeight/o.naturalWidth*l,a=o.naturalWidth/o.naturalWidth*l));var d={width:a,height:r,left:i.pdfViewer.customStampSettings.left,top:i.pdfViewer.customStampSettings.top},h=(new Date).toLocaleDateString(),p=i.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();s.renderCustomImage(d,n,o,h,p,0,1,null,null,null,t)},o.src=e},e.prototype.renderStamp=function(e,t,i,n,o,s,a,r,l,d){ge.isDevice&&(this.pdfViewerBase.customStampCount+=1);var h,p="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:"Guest";if(this.pdfViewerBase.isDynamicStamp){var c=(new Date).toString().split(" ").splice(1,3).join(" "),u=(new Date).toLocaleTimeString();this.dynamicText="By "+p+" at "+u+" , "+c+" "}d&&(this.dynamicText+=" ",this.pdfViewerBase.isDynamicStamp=!0);var f=null,m=(l&&l.annotationAddMode,this.currentStampAnnotation);if(m){if(null!==i&&null!==n){m.width=i,m.height=n,m.Opacity=s,m.RotateAngle=a;var g=l.AnnotName;m.AnnotName=g;var y=l.State;m.State=y;var v=l.AnnotationSettings;m.AnnotationSettings=v||this.pdfViewer.annotationModule.updateAnnotationSettings(m);var w=l.AnnotationSelectorSettings;m.AnnotationSelectorSettings=w||this.pdfViewer.annotationSelectorSettings;var b=l.ModifiedDate;m.ModifiedDate=b;var S=l.StateNodel;m.StateModel=S;var C=l.IsCommentLock;m.IsCommentLock=C;var x=l.Note;m.Note=x;var M=l.Author;m.Author=M;var I=l.Subject;m.Subject=I;var T=this.pdfViewer.annotation.getCustomData(l);m.allowedInteractions=l.AllowedInteractions?l.AllowedInteractions:l.allowedInteractions?l.allowedInteractions:["None"],m.CustomData=T;var A=!0;A="Imported Annotation"===m.annotationAddMode?l.IsPrint:l.AnnotationSettings.isPrint,m.isPrint=A,null===m.Author&&(m.Author="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:"Guest");var k=l.Comments;m.Comments=this.pdfViewer.annotationModule.getAnnotationComments(k,l,M)}else{g=this.pdfViewer.annotation.createGUID();var V=this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("stamp",o+1);V&&(document.getElementById(V).id=g),m.AnnotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),m.AnnotName=g,m.Comments=[],m.State="",m.StateModel="",m.Note="",m.Opacity=1,m.RotateAngle=0,m.ModifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),m.Author="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:"Guest"}var E=os(es(m.pathdata)),D=l?l.annotationAddMode:"UI Drawn Annotation";m.AnnotationSelectorSettings=m.AnnotationSelectorSettings?m.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,h={id:"stamp"+this.pdfViewerBase.customStampCount,bounds:{x:e,y:t,width:m.width,height:m.height},pageIndex:o,data:m.pathdata,modifiedDate:m.ModifiedDate,shapeAnnotationType:"Stamp",strokeColor:m.strokeColor,fillColor:m.fillColor,opacity:m.Opacity,stampFillColor:m.stampFillColor,stampStrokeColor:m.stampStrokeColor,rotateAngle:m.RotateAngle,isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,annotName:m.AnnotName,notes:m.Note,comments:m.Comments,review:{state:m.State,stateModel:m.StateModel,modifiedDate:m.ModifiedDate,author:m.Author},subject:m.iconName,annotationSelectorSettings:m.AnnotationSelectorSettings,annotationSettings:m.AnnotationSettings,allowedInteractions:m.allowedInteractions,annotationAddMode:D,isPrint:m.isPrint,isCommentLock:m.IsCommentLock},f={stampAnnotationType:"path",author:m.Author,modifiedDate:m.ModifiedDate,subject:m.Subject,note:m.Note,strokeColor:m.strokeColor,fillColor:m.fillColor,opacity:m.Opacity,stampFillcolor:m.stampFillColor,rotateAngle:m.RotateAngle,creationDate:m.creationDate,pageNumber:o,icon:m.iconName,stampAnnotationPath:E,randomId:"stamp"+this.pdfViewerBase.customStampCount,isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,bounds:{left:e,top:t,width:m.width,height:m.height},annotName:m.AnnotName,comments:m.Comments,review:{state:m.State,stateModel:m.StateModel,author:m.Author,modifiedDate:m.ModifiedDate},shapeAnnotationType:"stamp",annotationSelectorSettings:this.getSettings(m),annotationSettings:m.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(m),allowedInteractions:m.allowedInteractions,isPrint:m.isPrint,isCommentLock:m.IsCommentLock,isMaskedImage:m.IsMaskedImage,customStampName:""},this.storeStampInSession(o,f),this.isAddAnnotationProgramatically&&this.triggerAnnotationAdd(h,m),this.pdfViewer.add(h),void 0!=r&&null!=r||(r=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+o)),this.pdfViewer.renderDrawing(r,o),this.pdfViewerBase.stampAdded&&(this.triggerAnnotationAdd(h,m),this.pdfViewerBase.isNewStamp=!0,this.pdfViewer.annotation.addAction(o,null,h,"Addition","",h,h)),this.pdfViewerBase.stampAdded=!1,this.isExistingStamp||(m.creationDate=(new Date).toLocaleDateString(),m.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime())}this.resetAnnotation()},e.prototype.getSettings=function(e){var t=this.pdfViewer.annotationSelectorSettings;return e.AnnotationSelectorSettings?t=e.AnnotationSelectorSettings:this.pdfViewer.stampSettings.annotationSelectorSettings&&(t=this.pdfViewer.stampSettings.annotationSelectorSettings),t},e.prototype.resetAnnotation=function(){this.pdfViewerBase.isDynamicStamp=!1,this.dynamicText="",this.currentStampAnnotation=null,ge.isDevice||(this.pdfViewerBase.customStampCount+=1)},e.prototype.updateDeleteItems=function(e,t,i){this.pdfViewerBase.updateDocumentEditedProperty(!0);var n=null,o=!1;if(t.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),t.author="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:"Guest",i){var s=this.pdfViewer.annotation.createGUID(),a=this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("stamp",e+1);a&&(document.getElementById(a).id=s),t.annotName=s,t.Comments=[],t.State="",t.StateModel="",t.Note="",t.Opacity=1,t.RotateAngle=0}"Stamp"===t.shapeAnnotationType&&(t.isPrint=this.pdfViewer.stampSettings.isPrint);var r=this.pdfViewer.stampSettings.annotationSelectorSettings?this.pdfViewer.stampSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,l=this.pdfViewer.stampSettings.allowedInteractions?this.pdfViewer.stampSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;if("Image"===t.shapeAnnotationType?(t.Author="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.customStampSettings.author?this.pdfViewer.customStampSettings.author:"Guest",t.isPrint=this.pdfViewer.customStampSettings.isPrint,this.customStampName=this.customStampName?this.customStampName:this.currentStampAnnotation.signatureName?this.currentStampAnnotation.signatureName:t.id,n={stampAnnotationType:"image",author:t.author,modifiedDate:t.modifiedDate,subject:"",note:"",strokeColor:"",fillColor:"",opacity:i,rotateAngle:"0",creationDate:t.currentDate,pageNumber:e,icon:"",stampAnnotationPath:t.data,randomId:"stamp"+this.pdfViewerBase.customStampCount,bounds:{left:t.bounds.x,top:t.bounds.y,width:t.bounds.width,height:t.bounds.height},stampFillcolor:"",isDynamicStamp:!1,annotName:t.annotName,comments:[],review:{state:"",stateModel:"",author:t.author,modifiedDate:t.modifiedDate},shapeAnnotationType:"stamp",annotationSelectorSettings:r,annotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings),customData:this.pdfViewer.annotationModule.getData("image"),isPrint:t.isPrint,allowedInteractions:l,isCommentLock:!1,isMaskedImage:t.isMaskedImage,customStampName:this.customStampName}):n=t.stampAnnotationType?{stampAnnotationType:t.stampAnnotationType,author:t.author,modifiedDate:t.modifiedDate,subject:t.Subject,note:t.Note,strokeColor:t.strokeColor,fillColor:t.fillColor,opacity:t.opacity,stampFillcolor:t.stampFillcolor,rotateAngle:t.rotateAngle,creationDate:t.creationDate,pageNumber:t.pageNumber,icon:t.icon,stampAnnotationPath:t.stampAnnotationPath,randomId:t.randomId,isDynamicStamp:t.isDynamicStamp,dynamicText:t.dynamicText,bounds:{left:t.bounds.left,top:t.bounds.top,width:t.bounds.width,height:t.bounds.height},annotName:t.annotName,comments:t.Comments,review:{state:t.State,stateModel:t.StateModel,author:t.author,modifiedDate:t.ModifiedDate},shapeAnnotationType:"stamp",annotationSelectorSettings:r,annotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),customData:this.pdfViewer.annotationModule.getData(t.stampAnnotationType),isPrint:t.isPrint,allowedInteractions:l,isCommentLock:t.isCommentLock,isMaskedImage:t.isMaskedImage,customStampName:""}:{stampAnnotationType:t.shapeAnnotationType,author:t.author,modifiedDate:t.modifiedDate,subject:t.subject,note:t.notes,strokeColor:t.strokeColor,fillColor:t.fillColor,opacity:t.opacity,stampFillcolor:t.stampFillColor,rotateAngle:t.rotateAngle,creationDate:t.creationDate,pageNumber:t.pageIndex,icon:t.subject,stampAnnotationPath:t.data,randomId:t.id,isDynamicStamp:t.isDynamicStamp,dynamicText:t.dynamicText,shapeAnnotationType:"stamp",bounds:{left:t.bounds.x,top:t.bounds.y,width:t.bounds.width,height:t.bounds.height},annotName:t.annotName,comments:t.Comments,review:{state:t.State,stateModel:t.StateModel,author:t.author,modifiedDate:t.ModifiedDate},annotationSelectorSettings:r,annotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),customData:this.pdfViewer.annotationModule.getData(t.shapeAnnotationType),isPrint:t.isPrint,allowedInteractions:l,isCommentLock:t.isCommentLock,isMaskedImage:t.isMaskedImage,customStampName:""},i){if("Image"!==t.shapeAnnotationType){var d=os(es(t.data));n.stampAnnotationPath=d}if(t.creationDate=(new Date).toLocaleDateString(),!ge.isDevice&&t.wrapper&&(n.bounds.width=t.wrapper.actualSize.width,n.bounds.height=t.wrapper.actualSize.height,n.bounds.left=t.wrapper.bounds.x,n.bounds.top=t.wrapper.bounds.y),n.opacity=i,this.pdfViewerBase.stampAdded){this.storeStampInSession(e,n),o=!0;var h={left:n.bounds.left,top:n.bounds.top,width:n.bounds.width,height:n.bounds.height};this.pdfViewerBase.updateDocumentEditedProperty(!0);var p={opacity:n.opacity,author:n.author,modifiedDate:n.modifiedDate};"Image"===t.shapeAnnotationType?(this.pdfViewerBase.stampAdded=!1,this.pdfViewer.fireAnnotationAdd(n.pageNumber,n.annotName,"Image",h,p,null,null,null,null,null,this.customStampName),this.customStampName=null):this.pdfViewer.fireAnnotationAdd(n.pageNumber,n.annotName,"Stamp",h,p),this.pdfViewer.annotation.addAction(e,null,t,"Addition","",t,n)}}o||this.storeStampInSession(e,n)},e.prototype.renderCustomImage=function(e,t,i,n,o,s,a,r,l,d,h){var p,c,u,f,m=null,g=this.pdfViewer.customStampSettings.left>0&&this.pdfViewer.customStampSettings.top>0,y=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings),v=this.pdfViewer.stampSettings.allowedInteractions?this.pdfViewer.stampSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;ge.isDevice&&(this.pdfViewerBase.customStampCount+=1),l?(c=d.AnnotName,u=d.Author,f=d.IsCommentLock,y=d.AnnotationSettings?d.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings),v=d.AllowedInteractions?d.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(d),null===u&&(u="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.customStampSettings.author?this.pdfViewer.customStampSettings.author:"Guest")):(c=this.pdfViewer.annotation.createGUID(),u="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.customStampSettings.author?this.pdfViewer.customStampSettings.author:"Guest",f=!1),o||(o=d.ModifiedDate?d.ModifiedDate:(new Date).toLocaleString());var w=d?d.annotationAddMode:"UI Drawn Annotation ",b=!0;b=l?"Imported Annotation"===d.annotationAddMode?d.IsPrint:d.AnnotationSettings.isPrint:this.pdfViewer.customStampSettings.isPrint,p={id:"stamp"+this.pdfViewerBase.customStampCount,allowedInteractions:v,bounds:{x:e.left,y:e.top,width:e.width,height:e.height},pageIndex:t,data:i.src,modifiedDate:o,shapeAnnotationType:"Image",opacity:a,rotateAngle:s,annotName:c,comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:u},annotationSettings:y,annotationAddMode:w,signatureName:h,isPrint:b,isCommentLock:f},this.currentStampAnnotation=p;var S=this.pdfViewer.stampSettings.annotationSelectorSettings?this.pdfViewer.stampSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;if(l||g){if(!d){this.isStampAnnotSelected=!1,(d=p).Note="",d.State="",d.StateModel="";var C=this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("stamp",t+1);C&&(document.getElementById(C).id=c)}if(m={stampAnnotationType:"image",author:u,allowedInteractions:v,modifiedDate:o,subject:"",note:d.Note,strokeColor:"",fillColor:"",opacity:a,rotateAngle:"0",creationDate:n,pageNumber:t,icon:"",stampAnnotationPath:i.src,randomId:"stamp"+this.pdfViewerBase.customStampCount,bounds:{left:e.left,top:e.top,width:e.width,height:e.height},stampFillcolor:"",isDynamicStamp:!1,annotName:c,comments:this.pdfViewer.annotationModule.getAnnotationComments(d.Comments,d,d.Author),review:{state:d.State,stateModel:d.StateModel,author:u,modifiedDate:o},shapeAnnotationType:"stamp",annotationSelectorSettings:S,annotationSettings:y,customData:this.pdfViewer.annotation.getCustomData(d),isPrint:b,isCommentLock:f,isMaskedImage:d.IsMaskedImage,customStampName:d.CustomStampName},this.storeStampInSession(t,m),p.comments=this.pdfViewer.annotationModule.getAnnotationComments(d.Comments,d,d.Author),p.review={state:d.State,stateModel:d.StateModel,author:u,modifiedDate:o},this.isAddAnnotationProgramatically){var x={opacity:p.opacity,borderColor:p.strokeColor,borderWidth:p.thickness,author:d.author,subject:d.subject,modifiedDate:d.modifiedDate,fillColor:p.fillColor,fontSize:p.fontSize,width:p.bounds.width,height:p.bounds.height,fontColor:p.fontColor,fontFamily:p.fontFamily,defaultText:p.dynamicText,fontStyle:p.font,textAlignment:p.textAlign};this.customStampName=this.customStampName?this.customStampName:this.currentStampAnnotation.signatureName?this.currentStampAnnotation.signatureName:d.id,this.pdfViewer.fireAnnotationAdd(p.pageIndex,p.annotName,"Image",p.bounds,x,null,null,null,null,null,this.customStampName),this.customStampName=null}this.pdfViewer.add(p),void 0!=r&&null!=r||(r=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+t)),this.pdfViewer.renderDrawing(r,t),this.pdfViewerBase.stampAdded&&this.pdfViewer.annotation.addAction(t,null,p,"Addition","",p,p)}ge.isDevice||(this.pdfViewerBase.customStampCount+=1)},e.prototype.retrieveDynamicStampAnnotation=function(e){var t;if(e){switch(e.trim()){case"Revised":t={iconName:"Revised",pathdata:"M19.68,21.22a3.94,3.94,0,0,1-1.1-1.9L16,11.87l-.21-.64a20.77,20.77,0,0,0,2.11-.58,7.24,7.24,0,0,0,2-1.09,5.65,5.65,0,0,0,1.72-2.12,5.4,5.4,0,0,0,.52-2.2A4.15,4.15,0,0,0,19.1,1.05a14.58,14.58,0,0,0-4.72-.6H5.31v.86a7,7,0,0,1,2,.33c.3.14.45.48.45,1a6.1,6.1,0,0,1-.14,1.08l-.21.8L3.31,19.32a3.35,3.35,0,0,1-.94,1.78,3.58,3.58,0,0,1-1.74.57v.86h9.83v-.86a6.22,6.22,0,0,1-2-.35c-.29-.15-.43-.52-.43-1.11,0-.1,0-.21,0-.31a2.36,2.36,0,0,1,0-.28l.28-1.14,1.95-6.86h.93l3.56,10.91h6.25v-.88A3.05,3.05,0,0,1,19.68,21.22ZM13.29,10.31a14,14,0,0,1-2.63.23l2-7.56a2.67,2.67,0,0,1,.52-1.17,1.4,1.4,0,0,1,1-.3,2.74,2.74,0,0,1,2.33.91,3.72,3.72,0,0,1,.69,2.3,6.4,6.4,0,0,1-.49,2.52,6.72,6.72,0,0,1-1.06,1.82A4.11,4.11,0,0,1,13.29,10.31ZM26,.45H43.74l-1.4,6.27-.88-.15a6,6,0,0,0-.78-3.4c-.84-1.12-2.54-1.69-5.11-1.69a2.9,2.9,0,0,0-1.68.32A2.34,2.34,0,0,0,33.26,3l-1.95,7.33a13.55,13.55,0,0,0,4.48-.56c.68-.32,1.44-1.3,2.27-2.92l.91.11-2.44,9-.91-.16a7.27,7.27,0,0,0,.09-.82q0-.35,0-.57a2.69,2.69,0,0,0-1-2.4A7.57,7.57,0,0,0,31,11.38l-2.17,8c0,.2-.09.38-.12.57a2.62,2.62,0,0,0,0,.43.92.92,0,0,0,.35.74,2.54,2.54,0,0,0,1.49.29,13.84,13.84,0,0,0,5.11-.84A9.85,9.85,0,0,0,40.73,16l.81.14-1.95,6.42h-18v-.9a3.43,3.43,0,0,0,1.42-.53A3.42,3.42,0,0,0,24,19.32L28,4.51c.1-.37.18-.72.25-1a4.23,4.23,0,0,0,.09-.78c0-.56-.15-.91-.44-1.06a6.85,6.85,0,0,0-2-.34ZM63.4,3.37,51,23.15H49.9L47.39,6.34a17.25,17.25,0,0,0-.93-4.24c-.25-.43-.93-.7-2.05-.79V.45h9.86v.86a5.47,5.47,0,0,0-1.72.19,1.14,1.14,0,0,0-.81,1.16,3,3,0,0,0,0,.31l0,.32L53.5,16.43l6.24-9.85c.49-.79.94-1.57,1.33-2.36a4.45,4.45,0,0,0,.6-1.85.88.88,0,0,0-.61-.9,6.11,6.11,0,0,0-1.52-.16V.45h6.34v.86a3.88,3.88,0,0,0-1.16.5A5.73,5.73,0,0,0,63.4,3.37ZM70.08,20c0,.11,0,.22,0,.31,0,.56.15.91.45,1.06a6.39,6.39,0,0,0,1.95.35v.86H62.63v-.86a3.58,3.58,0,0,0,1.74-.57,3.35,3.35,0,0,0,.94-1.78l4-14.81q.18-.63.27-1a3.78,3.78,0,0,0,.09-.75c0-.56-.16-.91-.47-1.06a7,7,0,0,0-2-.34V.45h9.83v.86a3.61,3.61,0,0,0-1.75.58,3.37,3.37,0,0,0-.91,1.78L70.4,18.48l-.26,1.14Zm19.26-7.23a6.37,6.37,0,0,1,1.07,3.62,6.58,6.58,0,0,1-2.06,4.71,7.54,7.54,0,0,1-5.65,2.1A10.15,10.15,0,0,1,80.89,23a11.42,11.42,0,0,1-1.8-.49l-.83-.3-.58-.2a2,2,0,0,0-.38,0,1,1,0,0,0-.78.26,3.89,3.89,0,0,0-.52.92H75l1.19-7.4,1,.07a14.63,14.63,0,0,0,.28,2.3,5.27,5.27,0,0,0,2.79,3.44,4.73,4.73,0,0,0,2.06.44,3.85,3.85,0,0,0,3.07-1.26,4.39,4.39,0,0,0,1.09-2.94q0-2.09-4.05-5.25c-2.7-2.22-4-4.26-4-6.14a6.31,6.31,0,0,1,1.78-4.53,6.51,6.51,0,0,1,5-1.87,9.67,9.67,0,0,1,1.82.18A6.54,6.54,0,0,1,88,.45l.84.28.56.13a2.59,2.59,0,0,0,.52.06,1.4,1.4,0,0,0,.88-.24,2.2,2.2,0,0,0,.53-.6h1L91,6.69l-.85-.12L90,5.49a6,6,0,0,0-1-2.62,3.82,3.82,0,0,0-3.38-1.73A3,3,0,0,0,82.9,2.53a3.6,3.6,0,0,0-.58,2,3.44,3.44,0,0,0,.59,2,6,6,0,0,0,1,1l2.85,2.33A12.75,12.75,0,0,1,89.34,12.72ZM110.27,16l.81.14-2,6.42H90.85v-.86a3.66,3.66,0,0,0,1.74-.57,3.42,3.42,0,0,0,.93-1.78l4-14.81c.1-.37.18-.72.25-1a4.23,4.23,0,0,0,.09-.78c0-.56-.14-.91-.44-1.06a6.85,6.85,0,0,0-2-.34V.45h17.77l-1.4,6.27L111,6.57a6,6,0,0,0-.78-3.4c-.84-1.12-2.54-1.69-5.1-1.69a2.92,2.92,0,0,0-1.69.32A2.34,2.34,0,0,0,102.8,3l-2,7.33a13.55,13.55,0,0,0,4.48-.56c.69-.32,1.44-1.3,2.27-2.92l.92.11-2.45,9-.91-.16a7.27,7.27,0,0,0,.09-.82q0-.35,0-.57a2.69,2.69,0,0,0-1-2.4,7.57,7.57,0,0,0-3.79-.64l-2.17,8c0,.2-.09.38-.12.57a2.62,2.62,0,0,0,0,.43.92.92,0,0,0,.35.74,2.54,2.54,0,0,0,1.49.29,13.84,13.84,0,0,0,5.11-.84A9.81,9.81,0,0,0,110.27,16Zm22.65-13Q130.39.45,125.52.45h-9.58v.86a7,7,0,0,1,2,.34c.31.15.47.5.47,1.06a3.61,3.61,0,0,1-.09.74c-.06.29-.15.64-.26,1.06L114,19.31a3.18,3.18,0,0,1-1.15,1.91,3.57,3.57,0,0,1-1.53.45v.86h9.47a14.87,14.87,0,0,0,10.95-4.14,12,12,0,0,0,3.75-8.77A8.94,8.94,0,0,0,132.92,2.94ZM129,15.36q-2.62,6.06-8.52,6.05a2.46,2.46,0,0,1-1.42-.29,1.05,1.05,0,0,1-.4-.93,2.24,2.24,0,0,1,0-.34,2.65,2.65,0,0,1,.08-.43l4.55-16.67a2,2,0,0,1,.54-.92,2.2,2.2,0,0,1,1.44-.35,4.74,4.74,0,0,1,4.47,2.22,7.9,7.9,0,0,1,.83,3.9A19.32,19.32,0,0,1,129,15.36Z",opacity:1,strokeColor:"",fillColor:"#192760",width:127.47,height:55.84601,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Reviewed":t={iconName:"Reviewed",pathdata:"M17.37,18.25a3.47,3.47,0,0,1-1-1.67L14.17,10c0-.07-.1-.26-.19-.56A14.71,14.71,0,0,0,15.83,9a6.08,6.08,0,0,0,1.76-1A4.92,4.92,0,0,0,19.1,6.14a4.71,4.71,0,0,0,.46-1.93A3.65,3.65,0,0,0,16.86.52,12.83,12.83,0,0,0,12.72,0h-8V.75a6.62,6.62,0,0,1,1.72.3c.26.12.39.41.39.88a4.56,4.56,0,0,1-.13.94c0,.2-.1.44-.17.7L3,16.58a2.87,2.87,0,0,1-.82,1.56,3.15,3.15,0,0,1-1.53.51v.75H9.27v-.75a5.88,5.88,0,0,1-1.74-.31c-.25-.13-.37-.46-.37-1a2.53,2.53,0,0,1,0-.28,1.44,1.44,0,0,1,0-.24l.24-1,1.71-6H10l3.13,9.59h5.49v-.77A2.71,2.71,0,0,1,17.37,18.25ZM11.75,8.67a12.06,12.06,0,0,1-2.3.19L11.2,2.22a2.2,2.2,0,0,1,.46-1,1.19,1.19,0,0,1,.87-.27,2.41,2.41,0,0,1,2.05.8,3.29,3.29,0,0,1,.6,2A5.63,5.63,0,0,1,14.75,6a6.06,6.06,0,0,1-.93,1.59A3.65,3.65,0,0,1,11.75,8.67ZM22.9,0H38.52L37.29,5.51l-.78-.13a5.34,5.34,0,0,0-.68-3c-.74-1-2.24-1.48-4.49-1.48a2.68,2.68,0,0,0-1.49.27,2.09,2.09,0,0,0-.54,1L27.59,8.67a12.08,12.08,0,0,0,3.94-.5,5.69,5.69,0,0,0,2-2.56l.81.1-2.16,7.93-.79-.15c0-.27.06-.51.08-.71s0-.37,0-.5a2.34,2.34,0,0,0-.85-2.11A6.61,6.61,0,0,0,27.3,9.6l-1.91,7.08a4.91,4.91,0,0,0-.1.5,2,2,0,0,0,0,.38.83.83,0,0,0,.31.65,2.29,2.29,0,0,0,1.31.25,12.21,12.21,0,0,0,4.49-.73,8.69,8.69,0,0,0,4.51-4.09l.71.12L34.86,19.4H19.05v-.79a2.88,2.88,0,0,0,1.28-.47,2.94,2.94,0,0,0,.82-1.56l3.56-13q.13-.49.21-.9A3.26,3.26,0,0,0,25,2q0-.73-.39-.93A6.44,6.44,0,0,0,22.9.75ZM55.79,2.57,44.86,20h-.93L41.72,5.17a16.05,16.05,0,0,0-.81-3.73c-.22-.37-.82-.6-1.81-.69V0h8.67V.75a5,5,0,0,0-1.52.17,1,1,0,0,0-.7,1,2.53,2.53,0,0,0,0,.28l0,.27L47.09,14l5.48-8.66C53,4.69,53.4,4,53.75,3.32a4,4,0,0,0,.52-1.63.78.78,0,0,0-.54-.8A5.88,5.88,0,0,0,52.4.75V0H58V.75a3.55,3.55,0,0,0-1,.44A5.18,5.18,0,0,0,55.79,2.57ZM62,18.34a6,6,0,0,0,1.71.31v.75H55.12v-.75a3.15,3.15,0,0,0,1.53-.51,2.94,2.94,0,0,0,.82-1.56L61,3.57c.1-.37.18-.68.23-.93A2.81,2.81,0,0,0,61.34,2c0-.49-.13-.8-.41-.93a6.61,6.61,0,0,0-1.71-.3V0h8.63V.75a3.17,3.17,0,0,0-1.53.51,3,3,0,0,0-.8,1.57l-3.58,13-.22,1a2.74,2.74,0,0,0,0,.28,1.41,1.41,0,0,0,0,.28C61.64,17.9,61.78,18.21,62,18.34ZM69.13,0H84.75L83.52,5.51l-.78-.13a5.34,5.34,0,0,0-.68-3c-.74-1-2.24-1.48-4.49-1.48a2.68,2.68,0,0,0-1.49.27,2.09,2.09,0,0,0-.54,1L73.82,8.67a12.08,12.08,0,0,0,3.94-.5,5.69,5.69,0,0,0,2-2.56l.81.1L78.4,13.64l-.79-.15c0-.27.07-.51.08-.71s0-.37,0-.5a2.34,2.34,0,0,0-.85-2.11,6.61,6.61,0,0,0-3.33-.57l-1.91,7.08a4.91,4.91,0,0,0-.1.5,2,2,0,0,0,0,.38.83.83,0,0,0,.31.65,2.29,2.29,0,0,0,1.31.25,12.21,12.21,0,0,0,4.49-.73,8.69,8.69,0,0,0,4.51-4.09l.71.12L81.1,19.4H65v-.75a3.15,3.15,0,0,0,1.53-.51,2.94,2.94,0,0,0,.82-1.56l3.56-13q.14-.49.21-.9A3.26,3.26,0,0,0,71.24,2q0-.73-.39-.93a6.44,6.44,0,0,0-1.72-.3Zm39.15,2.83L100,20h-.84L97.41,5.85,90.67,20h-.84L87.58,3.13A3.83,3.83,0,0,0,87,1.23,2.84,2.84,0,0,0,85.33.71V0h8.06V.75A2.55,2.55,0,0,0,92.27,1a1.33,1.33,0,0,0-.66,1.31c0,.06,0,.13,0,.19s0,.15,0,.26l1.15,10.16,4.32-9a1,1,0,0,0,0-.27,3.33,3.33,0,0,0-.64-2.38A2.5,2.5,0,0,0,95.06.71V0h7.78V.71a2.9,2.9,0,0,0-1.4.34c-.27.19-.41.6-.41,1.24,0,.13,0,.32,0,.55,0,.4.08.88.14,1.47l1,8.47,4.51-9.42a7.12,7.12,0,0,0,.29-.74,2.48,2.48,0,0,0,.14-.79.9.9,0,0,0-.48-.93,3.25,3.25,0,0,0-1.34-.19V0h5.41V.71a2.34,2.34,0,0,0-1.1.35A4.56,4.56,0,0,0,108.28,2.83Zm16.45,10.81.71.12-1.71,5.64H107.66v-.75a3.15,3.15,0,0,0,1.53-.51,2.87,2.87,0,0,0,.82-1.56l3.57-13q.12-.49.21-.9a3.17,3.17,0,0,0,.08-.69q0-.73-.39-.93a6.44,6.44,0,0,0-1.72-.3V0h15.62l-1.23,5.51-.78-.13a5.26,5.26,0,0,0-.68-3C124,1.4,122.46.91,120.2.91a2.64,2.64,0,0,0-1.48.27,2.09,2.09,0,0,0-.55,1l-1.72,6.45a12,12,0,0,0,3.94-.5,5.62,5.62,0,0,0,2-2.56l.81.1L121,13.64l-.79-.15c0-.27.06-.51.07-.71s0-.37,0-.5a2.34,2.34,0,0,0-.86-2.11,6.57,6.57,0,0,0-3.32-.57l-1.91,7.08a5,5,0,0,0-.11.5,3.14,3.14,0,0,0,0,.38.8.8,0,0,0,.31.65,2.25,2.25,0,0,0,1.3.25,12.26,12.26,0,0,0,4.5-.73A8.67,8.67,0,0,0,124.73,13.64ZM144.64,2.19Q142.41,0,138.14,0h-8.42V.75a6.61,6.61,0,0,1,1.71.3c.28.13.41.44.41.93a2.81,2.81,0,0,1-.08.66c0,.25-.12.56-.23.93l-3.56,13a2.78,2.78,0,0,1-1,1.68,3.44,3.44,0,0,1-1.35.4v.75h8.32a13.06,13.06,0,0,0,9.63-3.64,10.49,10.49,0,0,0,3.3-7.7A7.87,7.87,0,0,0,144.64,2.19ZM141.2,13.1q-2.31,5.32-7.48,5.32a2.27,2.27,0,0,1-1.26-.25,1,1,0,0,1-.34-.82,1.62,1.62,0,0,1,0-.3,2.16,2.16,0,0,1,.08-.38l4-14.65a1.63,1.63,0,0,1,.47-.81A2,2,0,0,1,138,.91a4.16,4.16,0,0,1,3.93,1.95,7,7,0,0,1,.72,3.42A16.82,16.82,0,0,1,141.2,13.1Z",opacity:1,strokeColor:"",fillColor:"#192760",width:127.70402,height:55.84601,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Received":t={iconName:"Received",pathdata:"M18.17,8.76a5,5,0,0,0,1.57-1.93,5,5,0,0,0,.47-2A3.76,3.76,0,0,0,17.42,1,13,13,0,0,0,13.13.48H4.89v.78a6.49,6.49,0,0,1,1.77.31c.27.12.41.43.41.91a5.87,5.87,0,0,1-.13,1c-.05.2-.12.44-.19.72L3.06,17.64a3,3,0,0,1-.84,1.61,3.36,3.36,0,0,1-1.59.53v.77H9.57v-.77a6.17,6.17,0,0,1-1.8-.32c-.26-.14-.39-.48-.39-1a2.46,2.46,0,0,1,0-.28,1.78,1.78,0,0,1,0-.26l.25-1,1.78-6.25h.84l3.24,9.92h5.66v-.8A2.76,2.76,0,0,1,18,19.36a3.57,3.57,0,0,1-1-1.72l-2.31-6.78c0-.07-.09-.27-.19-.58.87-.2,1.51-.38,1.92-.52A6.56,6.56,0,0,0,18.17,8.76Zm-2.93-2.1a6.19,6.19,0,0,1-1,1.65,3.85,3.85,0,0,1-2.14,1.14,12.92,12.92,0,0,1-2.39.2l1.81-6.87A2.5,2.5,0,0,1,12,1.72a1.27,1.27,0,0,1,.9-.27,2.5,2.5,0,0,1,2.12.83,3.35,3.35,0,0,1,.62,2.09A5.81,5.81,0,0,1,15.24,6.66ZM30.3,2.78,28.52,9.45a12.53,12.53,0,0,0,4.08-.51,5.91,5.91,0,0,0,2-2.66l.84.11-2.23,8.2-.82-.15c0-.28.07-.53.08-.74a5.17,5.17,0,0,0,0-.52A2.43,2.43,0,0,0,31.66,11a6.87,6.87,0,0,0-3.44-.58l-2,7.32a3.61,3.61,0,0,0-.11.51,2.31,2.31,0,0,0,0,.4.83.83,0,0,0,.32.67,2.32,2.32,0,0,0,1.35.26,12.58,12.58,0,0,0,4.65-.76,9,9,0,0,0,4.67-4.23l.73.13-1.77,5.83H19.8v-.83A2.83,2.83,0,0,0,21,19.25a3.09,3.09,0,0,0,.85-1.61L25.54,4.17c.09-.34.16-.65.22-.93a3.35,3.35,0,0,0,.09-.71c0-.5-.13-.82-.4-1a6.34,6.34,0,0,0-1.78-.31V.48H39.82l-1.27,5.7-.81-.13A5.44,5.44,0,0,0,37,3Q35.9,1.42,32.4,1.42a2.69,2.69,0,0,0-1.54.29A2.08,2.08,0,0,0,30.3,2.78ZM56.56,6.1c0-.07,0-.18,0-.33a4.89,4.89,0,0,0-1.12-3.53,3.75,3.75,0,0,0-2.82-1.16c-2.33,0-4.35,1.55-6.07,4.63a17.09,17.09,0,0,0-2.31,8.43c0,2.08.47,3.5,1.43,4.27a4.89,4.89,0,0,0,3.11,1.15,6.84,6.84,0,0,0,4.14-1.45A11.51,11.51,0,0,0,55,16l.91.66A10.08,10.08,0,0,1,52.26,20a9.33,9.33,0,0,1-4.34,1.11A8.56,8.56,0,0,1,42,19a7.25,7.25,0,0,1-2.35-5.67A13.53,13.53,0,0,1,43.22,4a11.19,11.19,0,0,1,8.56-4A12.34,12.34,0,0,1,55,.44,13.17,13.17,0,0,0,56.9.88a1,1,0,0,0,.71-.24A2.94,2.94,0,0,0,58.06,0H59L57.45,7l-.94-.18C56.54,6.42,56.55,6.17,56.56,6.1Zm18,8.49.74.13-1.78,5.83H56.87v-.77a3.31,3.31,0,0,0,1.58-.53,3.09,3.09,0,0,0,.85-1.61L63,4.17c.09-.34.16-.65.22-.93a3.35,3.35,0,0,0,.09-.71c0-.5-.14-.82-.4-1a6.34,6.34,0,0,0-1.78-.31V.48H77.26L76,6.18l-.81-.13A5.44,5.44,0,0,0,74.48,3q-1.14-1.54-4.64-1.54a2.69,2.69,0,0,0-1.54.29,2.08,2.08,0,0,0-.56,1.07L66,9.45A12.53,12.53,0,0,0,70,8.94a5.91,5.91,0,0,0,2-2.66l.84.11-2.23,8.2-.82-.15c0-.28.07-.53.08-.74a5.17,5.17,0,0,0,0-.52A2.43,2.43,0,0,0,69.1,11a6.87,6.87,0,0,0-3.44-.58l-2,7.32a3.61,3.61,0,0,0-.11.51,2.31,2.31,0,0,0,0,.4.83.83,0,0,0,.32.67,2.32,2.32,0,0,0,1.35.26,12.58,12.58,0,0,0,4.65-.76A8.91,8.91,0,0,0,74.52,14.59Zm31-11.45-11.31,18h-1L91,5.83A16.56,16.56,0,0,0,90.12,2c-.2-.34-.71-.56-1.51-.67a3,3,0,0,0-1.31.48,3.08,3.08,0,0,0-.82,1.62l-3.7,13.47-.24,1c0,.1,0,.2-.05.3s0,.2,0,.28c0,.51.14.83.41,1a6.21,6.21,0,0,0,1.77.32v.77H75.72v-.77a3.31,3.31,0,0,0,1.58-.53,3.09,3.09,0,0,0,.85-1.61L81.83,4.17c.11-.38.19-.7.25-.95a3.75,3.75,0,0,0,.08-.69c0-.5-.15-.82-.43-1A6.49,6.49,0,0,0,80,1.26V.48H97.22v.78a4.92,4.92,0,0,0-1.57.18,1,1,0,0,0-.73,1.05,2.81,2.81,0,0,0,0,.29l0,.28,1.56,12,5.67-9a24.21,24.21,0,0,0,1.21-2.14,4.07,4.07,0,0,0,.54-1.68.79.79,0,0,0-.55-.82A5.69,5.69,0,0,0,102,1.26V.48h5.76v.78a3.5,3.5,0,0,0-1,.46A5.16,5.16,0,0,0,105.52,3.14Zm16.83,11.45.73.13-1.77,5.83H104.69v-.77a3.31,3.31,0,0,0,1.58-.53,3,3,0,0,0,.85-1.61l3.69-13.47c.08-.34.16-.65.22-.93a4,4,0,0,0,.08-.71c0-.5-.13-.82-.4-1a6.34,6.34,0,0,0-1.78-.31V.48h16.16l-1.28,5.7-.8-.13A5.43,5.43,0,0,0,122.3,3q-1.14-1.54-4.64-1.54a2.67,2.67,0,0,0-1.53.29,2.16,2.16,0,0,0-.57,1.07l-1.78,6.67a12.53,12.53,0,0,0,4.08-.51,5.91,5.91,0,0,0,2.06-2.66l.83.11-2.22,8.2-.82-.15c0-.28.06-.53.08-.74s0-.38,0-.52a2.45,2.45,0,0,0-.88-2.18,6.9,6.9,0,0,0-3.44-.58l-2,7.32c-.05.18-.08.35-.11.51a3.58,3.58,0,0,0,0,.4.81.81,0,0,0,.32.67,2.28,2.28,0,0,0,1.35.26,12.62,12.62,0,0,0,4.65-.76A9,9,0,0,0,122.35,14.59ZM142.94,2.75Q140.63.48,136.21.48h-8.7v.78a6.66,6.66,0,0,1,1.77.31q.42.21.42,1a2.91,2.91,0,0,1-.08.68q-.08.39-.24,1L125.7,17.62a2.93,2.93,0,0,1-1,1.75,3.54,3.54,0,0,1-1.39.41v.77h8.61a13.5,13.5,0,0,0,10-3.76,10.84,10.84,0,0,0,3.41-8A8.14,8.14,0,0,0,142.94,2.75ZM139.38,14q-2.38,5.51-7.74,5.5a2.35,2.35,0,0,1-1.29-.26,1,1,0,0,1-.36-.85,1.78,1.78,0,0,1,0-.31,2.08,2.08,0,0,1,.08-.39l4.13-15.15a1.76,1.76,0,0,1,.49-.84A2,2,0,0,1,136,1.42a4.32,4.32,0,0,1,4.07,2A7.17,7.17,0,0,1,140.83,7,17.49,17.49,0,0,1,139.38,14Z",opacity:1,strokeColor:"",fillColor:"#192760",width:127.70402,height:55.84601,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Approved":t={iconName:"Approved",pathdata:"M19,20.22H10.55v-.71a4.26,4.26,0,0,0,1.79-.41,1.37,1.37,0,0,0,.53-1.29c0-.22,0-.75-.16-1.58,0-.17-.11-.89-.29-2.15H6.06l-1.72,3a4,4,0,0,0-.31.66,2,2,0,0,0-.14.69c0,.41.12.67.37.78a5.42,5.42,0,0,0,1.53.3v.71H0v-.71A4,4,0,0,0,1.21,19a5.68,5.68,0,0,0,1.28-1.56L13.45.07h.76L17,17a4.35,4.35,0,0,0,.7,2.08,2.4,2.4,0,0,0,1.31.44Zm-6.83-7.31L11.13,5.73,6.76,12.91Zm7.18,6.52a3,3,0,0,0,1.33-.49,3,3,0,0,0,.84-1.59L25.19,4.11c.07-.3.14-.6.2-.9a3.14,3.14,0,0,0,.1-.72,1,1,0,0,0-.58-1,5.68,5.68,0,0,0-1.57-.23V.48h8.47a9.68,9.68,0,0,1,3.57.57,4,4,0,0,1,2.71,4,4.93,4.93,0,0,1-2.2,4.22,9.53,9.53,0,0,1-5.69,1.58l-.85,0-1.71-.11L26,16.6l-.25,1a1,1,0,0,0-.05.3,2.83,2.83,0,0,0,0,.29c0,.5.14.81.4.94a6.31,6.31,0,0,0,1.76.31v.76H19.39Zm8.52-9.66.54.06h.48a5.81,5.81,0,0,0,2.3-.36,3.47,3.47,0,0,0,1.4-1.18,6.24,6.24,0,0,0,.86-2,8.94,8.94,0,0,0,.3-2,3.29,3.29,0,0,0-.58-2,2.3,2.3,0,0,0-2-.79,1.23,1.23,0,0,0-.93.28,2.71,2.71,0,0,0-.46,1Zm8,9.69a3.19,3.19,0,0,0,1.55-.52,3,3,0,0,0,.84-1.59L42,4.11c.07-.3.14-.6.2-.9a3.14,3.14,0,0,0,.1-.72,1,1,0,0,0-.58-1,5.68,5.68,0,0,0-1.57-.23V.48h8.47a9.68,9.68,0,0,1,3.57.57,4,4,0,0,1,2.71,4,4.93,4.93,0,0,1-2.2,4.22A9.53,9.53,0,0,1,47,10.87l-.85,0-1.71-.11L42.79,16.6l-.25,1a1.45,1.45,0,0,0,0,.3,2.83,2.83,0,0,0,0,.29c0,.5.14.81.4.94a6.31,6.31,0,0,0,1.76.31v.76h-8.7Zm8.74-9.69.54.06h.48A5.81,5.81,0,0,0,48,9.48a3.41,3.41,0,0,0,1.4-1.18,6.24,6.24,0,0,0,.86-2,9,9,0,0,0,.31-2,3.29,3.29,0,0,0-.59-2,2.3,2.3,0,0,0-2-.79,1.23,1.23,0,0,0-.93.28,2.88,2.88,0,0,0-.46,1Zm7.95,9.69a3.27,3.27,0,0,0,1.56-.52A3.06,3.06,0,0,0,55,17.35L58.64,4.11l.18-.71a4.72,4.72,0,0,0,.13-1c0-.47-.13-.77-.4-.9a6.74,6.74,0,0,0-1.74-.3V.48h8.11A13,13,0,0,1,69.14,1a3.7,3.7,0,0,1,2.74,3.75,4.8,4.8,0,0,1-.46,2,5,5,0,0,1-1.54,1.9,6.55,6.55,0,0,1-1.79,1,19.35,19.35,0,0,1-1.89.52c.1.3.16.49.2.57l2.27,6.66a3.49,3.49,0,0,0,1,1.7,3.08,3.08,0,0,0,1.6.41v.76H65.33l-3.19-9.76h-.83L59.57,16.6l-.25,1a1.87,1.87,0,0,0,0,.25,2.64,2.64,0,0,0,0,.28q0,.8.39,1a5.88,5.88,0,0,0,1.76.32v.76H52.62ZM63.94,9.3a3.79,3.79,0,0,0,2.11-1.13A6,6,0,0,0,67,6.55a5.84,5.84,0,0,0,.44-2.26,3.31,3.31,0,0,0-.61-2,2.47,2.47,0,0,0-2.09-.81,1.25,1.25,0,0,0-.88.26,2.34,2.34,0,0,0-.47,1.05L61.59,9.5A13.42,13.42,0,0,0,63.94,9.3ZM76.39,4.53Q80.26,0,85,0a7.34,7.34,0,0,1,5.23,1.92,6.76,6.76,0,0,1,2,5.19,13.9,13.9,0,0,1-3.62,9.07q-3.86,4.61-8.88,4.6a7.06,7.06,0,0,1-5.13-1.92,6.86,6.86,0,0,1-2-5.14A14,14,0,0,1,76.39,4.53ZM77.3,18a2.56,2.56,0,0,0,2.57,1.78A4.62,4.62,0,0,0,83,18.47,14.42,14.42,0,0,0,86,13.54a27.18,27.18,0,0,0,1.52-4.83,20.67,20.67,0,0,0,.54-4.11,4.38,4.38,0,0,0-.73-2.55A2.62,2.62,0,0,0,85,1q-3.68,0-6.19,6.54a24.29,24.29,0,0,0-1.9,8.26A5.91,5.91,0,0,0,77.3,18ZM102.23.48v.76a5.19,5.19,0,0,0-1.55.17,1,1,0,0,0-.72,1,2.46,2.46,0,0,0,0,.28L100,3l1.52,11.76L107.11,6c.44-.71.84-1.41,1.2-2.11a4.06,4.06,0,0,0,.53-1.66.79.79,0,0,0-.55-.81,6.11,6.11,0,0,0-1.35-.14V.48h5.67v.76a3.31,3.31,0,0,0-1,.45,5.33,5.33,0,0,0-1.18,1.4L99.26,20.78h-.94l-2.25-15A15.49,15.49,0,0,0,95.24,2c-.22-.39-.84-.62-1.83-.71V.48Zm7.35,19a3.19,3.19,0,0,0,1.55-.52,3,3,0,0,0,.84-1.59l3.62-13.24c.09-.34.16-.64.22-.92a3.27,3.27,0,0,0,.09-.7c0-.5-.14-.81-.4-.94a6.13,6.13,0,0,0-1.75-.31V.48h15.89l-1.25,5.6L127.6,6a5.32,5.32,0,0,0-.7-3q-1.12-1.52-4.56-1.51a2.61,2.61,0,0,0-1.51.28,2.12,2.12,0,0,0-.56,1.06L118.52,9.3a12.1,12.1,0,0,0,4-.51,5.8,5.8,0,0,0,2-2.61l.82.1-2.19,8.07-.81-.14c0-.28.07-.52.08-.73s0-.37,0-.51a2.4,2.4,0,0,0-.87-2.15,6.76,6.76,0,0,0-3.38-.57l-1.94,7.2a3.34,3.34,0,0,0-.11.51,3.67,3.67,0,0,0,0,.39.81.81,0,0,0,.32.66,2.3,2.3,0,0,0,1.33.26,12.39,12.39,0,0,0,4.57-.75A8.84,8.84,0,0,0,127,14.35l.72.13-1.74,5.74H109.58Zm18.27,0a3.27,3.27,0,0,0,1.37-.41,2.85,2.85,0,0,0,1-1.71l3.63-13.23c.1-.38.18-.69.23-1a3,3,0,0,0,.09-.67c0-.5-.15-.81-.42-.94A6.38,6.38,0,0,0,132,1.24V.48h8.57c2.9,0,5.1.74,6.62,2.22a8,8,0,0,1,2.26,6,10.72,10.72,0,0,1-3.35,7.84,13.3,13.3,0,0,1-9.8,3.7h-8.47ZM144.4,3.39a4.23,4.23,0,0,0-4-2,2,2,0,0,0-1.29.31,1.74,1.74,0,0,0-.48.83l-4.07,14.9a3.24,3.24,0,0,0-.07.39,1.69,1.69,0,0,0,0,.3,1,1,0,0,0,.36.84,2.27,2.27,0,0,0,1.27.26q5.26,0,7.62-5.42a17.25,17.25,0,0,0,1.43-6.94A7,7,0,0,0,144.4,3.39Z",opacity:1,strokeColor:"",fillColor:"#516c30",width:127.70402,height:55.84601,stampFillColor:"#e6eddf",stampStrokeColor:""};break;case"Confidential":t={iconName:"Confidential",pathdata:"M13.71,0,12.63,6.9,12,6.73c0-.41,0-.66,0-.73s0-.18,0-.32a6.16,6.16,0,0,0-.79-3.47,2.37,2.37,0,0,0-2-1.14c-1.64,0-3.07,1.51-4.29,4.55a22,22,0,0,0-1.64,8.29c0,2,.34,3.44,1,4.2A3,3,0,0,0,6.5,19.24a4.08,4.08,0,0,0,2.93-1.43,10.47,10.47,0,0,0,1.5-2.09l.64.65A8.84,8.84,0,0,1,9,19.72a5.24,5.24,0,0,1-3.08,1.09,5.16,5.16,0,0,1-4.21-2.08A8.68,8.68,0,0,1,0,13.16,16.5,16.5,0,0,1,2.55,3.92Q5.1,0,8.61,0a6.35,6.35,0,0,1,2.25.43,6.62,6.62,0,0,0,1.38.43.55.55,0,0,0,.5-.23A2.61,2.61,0,0,0,13.06,0ZM27.49,7.11a17.19,17.19,0,0,1-2.61,9.07q-2.77,4.61-6.39,4.6a4.42,4.42,0,0,1-3.7-1.92,8.47,8.47,0,0,1-1.43-5.14A17.31,17.31,0,0,1,16,4.53C17.88,1.51,20,0,22.25,0A4.53,4.53,0,0,1,26,1.92,8.27,8.27,0,0,1,27.49,7.11ZM24.42,4.6a5.71,5.71,0,0,0-.53-2.55A1.76,1.76,0,0,0,22.24,1q-2.65,0-4.45,6.54a31.93,31.93,0,0,0-1.37,8.26A8.15,8.15,0,0,0,16.67,18c.34,1.19,1,1.78,1.85,1.78a2.9,2.9,0,0,0,2.28-1.29,15.85,15.85,0,0,0,2.13-4.93A34.08,34.08,0,0,0,24,8.71,28.5,28.5,0,0,0,24.42,4.6ZM42.75,1.3l.3-.06V.48H38.69v.76a2.55,2.55,0,0,1,1.16.33,1.8,1.8,0,0,1,.51,1.48,10.11,10.11,0,0,1-.13,1.34c-.06.41-.14.87-.24,1.39l-1.65,8.34L33.73.48H29.45v.76a2.66,2.66,0,0,1,1,.24,1.88,1.88,0,0,1,.65,1.06l.09.3L28.81,15a20.72,20.72,0,0,1-1,3.61,1.61,1.61,0,0,1-1.19.9v.76h4.42v-.76a2.55,2.55,0,0,1-1.13-.32,1.67,1.67,0,0,1-.56-1.44,7.13,7.13,0,0,1,.05-.79c.06-.43.17-1.09.34-2L31.89,4.38l5.52,16.33h.52l3-15a22.58,22.58,0,0,1,.87-3.42A1.42,1.42,0,0,1,42.75,1.3ZM55.53.48H44.23v.76a3.63,3.63,0,0,1,1.26.3c.19.13.29.42.29.9a7.08,7.08,0,0,1-.09,1c0,.2-.08.44-.13.71L43,17.34a3.47,3.47,0,0,1-.59,1.58,1.91,1.91,0,0,1-1.13.54v.76h6.29v-.76a2.13,2.13,0,0,1-1-.19A1.23,1.23,0,0,1,46,18.1c0-.1,0-.21,0-.31s0-.23.05-.35l1.4-7.21a3.15,3.15,0,0,1,2.37.64A3.21,3.21,0,0,1,50.38,13c0,.11,0,.28,0,.49s0,.46-.06.75l.58.14,1.58-8.07-.59-.1a5.79,5.79,0,0,1-1.43,2.59,6.17,6.17,0,0,1-2.77.52l1.26-6.54a2.06,2.06,0,0,1,.42-1.08,1.39,1.39,0,0,1,1-.26c1.62,0,2.7.51,3.24,1.54a7.11,7.11,0,0,1,.49,3l.57.13Zm3.69,17.71c0-.08,0-.17,0-.27s0-.2,0-.3l.17-1L62.06,3.36a3.44,3.44,0,0,1,.59-1.6,2,2,0,0,1,1.12-.52V.48H57.44v.76a3.47,3.47,0,0,1,1.26.31c.2.13.3.44.3.94a4.25,4.25,0,0,1-.06.67c0,.26-.09.57-.17,1L56.16,17.35a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.12.52v.76h6.33v-.76a3.3,3.3,0,0,1-1.26-.32C59.32,19,59.22,18.69,59.22,18.19Zm18-9.51a13,13,0,0,1-2.42,7.84,8.31,8.31,0,0,1-7,3.7H61.6v-.76a2,2,0,0,0,1-.41,3.14,3.14,0,0,0,.73-1.71L65.93,4.11c.08-.38.13-.69.17-1a4.36,4.36,0,0,0,.06-.67c0-.5-.1-.81-.3-.94a3.47,3.47,0,0,0-1.26-.31V.48h6.17A5.52,5.52,0,0,1,75.53,2.7,9.91,9.91,0,0,1,77.17,8.68ZM74,6.87a9.22,9.22,0,0,0-.53-3.48,2.91,2.91,0,0,0-2.87-2,1.12,1.12,0,0,0-.93.31,1.81,1.81,0,0,0-.35.83l-2.93,14.9a3,3,0,0,0-.05.39c0,.11,0,.21,0,.3a1.17,1.17,0,0,0,.25.84,1.3,1.3,0,0,0,.92.26q3.8,0,5.49-5.42A23.26,23.26,0,0,0,74,6.87Zm11.3,11.65a6.72,6.72,0,0,1-3.29.75,1.3,1.3,0,0,1-1-.26,1,1,0,0,1-.23-.66,3.28,3.28,0,0,1,0-.39,4.88,4.88,0,0,1,.08-.51l1.4-7.2a3.73,3.73,0,0,1,2.43.57A2.87,2.87,0,0,1,85.43,13c0,.14,0,.31,0,.51s0,.45-.06.73l.59.14,1.57-8.07-.59-.1a5.79,5.79,0,0,1-1.46,2.61,6.5,6.5,0,0,1-2.89.51l1.26-6.56a2.41,2.41,0,0,1,.41-1.06c.16-.19.52-.28,1.08-.28,1.65,0,2.75.5,3.29,1.51a7,7,0,0,1,.5,3l.57.13.9-5.6H79.14v.76a3.35,3.35,0,0,1,1.26.31c.19.13.29.44.29.94a5,5,0,0,1-.07.7c0,.28-.09.58-.15.92L77.86,17.35a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.13.52v.76H87.91l1.25-5.74-.52-.13A7.69,7.69,0,0,1,85.34,18.52ZM105.8,1.24V.48h-4.37v.76a2.55,2.55,0,0,1,1.16.33,1.77,1.77,0,0,1,.52,1.48A10.58,10.58,0,0,1,103,4.39c-.06.41-.13.87-.23,1.39l-1.66,8.34L96.47.48H92.19v.76a2.61,2.61,0,0,1,1,.24,1.83,1.83,0,0,1,.65,1.06l.1.3L91.55,15a19,19,0,0,1-1,3.61,1.61,1.61,0,0,1-1.19.9v.76h4.42v-.76a2.59,2.59,0,0,1-1.13-.32,1.67,1.67,0,0,1-.56-1.44,7.13,7.13,0,0,1,0-.79c.06-.43.17-1.09.35-2L94.63,4.38l5.52,16.33h.53l2.95-15a22.93,22.93,0,0,1,.86-3.42,1.42,1.42,0,0,1,1-1Zm11.4,4.9L118,.48H106.28l-.82,5,.55.2a8,8,0,0,1,1.87-3.16,3.7,3.7,0,0,1,2.7-1.06l-3.12,15.85a2.94,2.94,0,0,1-.87,1.85,2.48,2.48,0,0,1-1.34.26v.76h7v-.76a4.24,4.24,0,0,1-1.43-.3c-.23-.13-.34-.45-.34-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.18-1,3-15.1a2.73,2.73,0,0,1,1.79.63c.75.7,1.13,2,1.17,3.94Zm3.57,12.05c0-.08,0-.17,0-.27s0-.2,0-.3l.17-1,2.62-13.24a3.44,3.44,0,0,1,.59-1.6,2,2,0,0,1,1.12-.52V.48H119v.76a3.47,3.47,0,0,1,1.26.31c.2.13.3.44.3.94a4.25,4.25,0,0,1-.06.67c0,.26-.09.57-.17,1l-2.61,13.24a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.12.52v.76h6.33v-.76a3.36,3.36,0,0,1-1.26-.32C120.87,19,120.77,18.69,120.77,18.19Zm28.86-3.71-1.24,5.74H130.3v-.71a2.48,2.48,0,0,0,1.3-.41,1.64,1.64,0,0,0,.37-1.29c0-.22,0-.75-.11-1.58,0-.17-.08-.89-.21-2.15h-4.58l-1.24,3a5.1,5.1,0,0,0-.22.66,2.45,2.45,0,0,0-.1.69c0,.41.09.67.26.78a3.05,3.05,0,0,0,1.11.3v.71h-4.17v-.71a2.66,2.66,0,0,0,.87-.53,5.79,5.79,0,0,0,.92-1.56L132.39.07h.55L135,17a5.53,5.53,0,0,0,.5,2.08,1.67,1.67,0,0,0,1.14.46v0a1.93,1.93,0,0,0,1.12-.52,3.52,3.52,0,0,0,.6-1.6l2.61-13.23c.08-.38.13-.69.17-1a4.36,4.36,0,0,0,.06-.67c0-.5-.1-.81-.3-.94a3.47,3.47,0,0,0-1.26-.31V.48h6.73v.76a3.23,3.23,0,0,0-1.49.48,3.06,3.06,0,0,0-.64,1.64l-2.77,14.08c0,.16-.05.3-.07.44s0,.29,0,.47a.79.79,0,0,0,.31.71,1.55,1.55,0,0,0,.87.21,6.83,6.83,0,0,0,3.79-1,8.42,8.42,0,0,0,2.81-3.88ZM131.5,12.91l-.78-7.18-3.14,7.18Z",opacity:1,strokeColor:"",fillColor:"#192760",width:127.70402,height:55.84601,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"NotApproved":case"Not Approved":t={iconName:"Not Approved",pathdata:"M0,19.46a1.56,1.56,0,0,0,1.16-.9A19.84,19.84,0,0,0,2.1,15L4.42,2.84l-.09-.3a1.82,1.82,0,0,0-.64-1.06,2.41,2.41,0,0,0-1-.24V.48H6.88l4.49,13.64L13,5.78c.09-.52.17-1,.22-1.39a10.11,10.11,0,0,0,.13-1.34,1.83,1.83,0,0,0-.49-1.48,2.49,2.49,0,0,0-1.13-.33V.48H16v.76l-.29.06a1.42,1.42,0,0,0-1,1,23.7,23.7,0,0,0-.84,3.42L11,20.71h-.51L5.1,4.38,3,15c-.17.87-.28,1.53-.33,2a5.32,5.32,0,0,0,0,.79,1.69,1.69,0,0,0,.54,1.44,2.48,2.48,0,0,0,1.1.32v.76H0ZM17.73,4.53C19.54,1.51,21.55,0,23.79,0a4.4,4.4,0,0,1,3.66,1.92,8.52,8.52,0,0,1,1.43,5.19,17.56,17.56,0,0,1-2.53,9.07q-2.7,4.61-6.21,4.6a4.24,4.24,0,0,1-3.6-1.92,8.6,8.6,0,0,1-1.39-5.14A17.68,17.68,0,0,1,17.73,4.53ZM18.37,18c.33,1.19.93,1.78,1.8,1.78a2.83,2.83,0,0,0,2.22-1.29,16.41,16.41,0,0,0,2.06-4.93,35.53,35.53,0,0,0,1.06-4.83A28.26,28.26,0,0,0,25.9,4.6a5.86,5.86,0,0,0-.52-2.55A1.7,1.7,0,0,0,23.78,1Q21.2,1,19.45,7.53a33,33,0,0,0-1.33,8.26A8.15,8.15,0,0,0,18.37,18Zm11.08,1.48a2.34,2.34,0,0,0,1.3-.26,3,3,0,0,0,.85-1.85l3-15.85A3.54,3.54,0,0,0,32,2.56a8,8,0,0,0-1.82,3.16l-.53-.2.8-5H41.81l-.74,5.66-.54-.07c0-1.92-.41-3.24-1.13-3.94a2.6,2.6,0,0,0-1.74-.63L34.79,16.6l-.17,1a2.43,2.43,0,0,0,0,.33,2.26,2.26,0,0,0,0,.26c0,.5.11.82.33.95a3.94,3.94,0,0,0,1.39.3v.76H29.45Zm26.65.76H50.18v-.71a2.28,2.28,0,0,0,1.25-.41,1.64,1.64,0,0,0,.37-1.29c0-.22,0-.75-.11-1.58,0-.17-.08-.89-.2-2.15H47l-1.2,3c-.08.2-.15.42-.22.66a2.84,2.84,0,0,0-.09.69c0,.41.08.67.25.78a2.91,2.91,0,0,0,1.08.3v.71H42.79v-.71a2.44,2.44,0,0,0,.85-.53,5.59,5.59,0,0,0,.9-1.56L52.21.07h.53l2,16.88A5.46,5.46,0,0,0,55.2,19a1.36,1.36,0,0,0,.9.43Zm-4.76-7.31-.76-7.18-3,7.18Zm4.95,6.53a1.82,1.82,0,0,0,1-.5,3.56,3.56,0,0,0,.58-1.59L60.42,4.11c.06-.3.1-.6.15-.9a5.46,5.46,0,0,0,.06-.72c0-.52-.13-.86-.4-1a2.88,2.88,0,0,0-1.1-.23V.48h5.93a5,5,0,0,1,2.5.57c1.26.73,1.9,2.07,1.9,4a5.81,5.81,0,0,1-1.54,4.22,5.32,5.32,0,0,1-4,1.58l-.59,0-1.2-.11L61,16.6l-.17,1a2.72,2.72,0,0,0,0,.3,2.81,2.81,0,0,0,0,.29c0,.5.09.81.28.94a3.26,3.26,0,0,0,1.23.31v.76h-6Zm6-9.67.38.06H63a3,3,0,0,0,1.62-.36,2.87,2.87,0,0,0,1-1.18,7.28,7.28,0,0,0,.6-2,11.67,11.67,0,0,0,.22-2,4.4,4.4,0,0,0-.41-2,1.44,1.44,0,0,0-1.39-.79.71.71,0,0,0-.65.28,3.7,3.7,0,0,0-.32,1Zm5.61,9.69A1.86,1.86,0,0,0,69,18.94a3.54,3.54,0,0,0,.59-1.59L72.15,4.11q.09-.45.15-.9a5.73,5.73,0,0,0,.07-.72,1.1,1.1,0,0,0-.41-1,2.88,2.88,0,0,0-1.1-.23V.48h5.93a5,5,0,0,1,2.5.57c1.27.73,1.9,2.07,1.9,4a5.77,5.77,0,0,1-1.54,4.22,5.31,5.31,0,0,1-4,1.58l-.6,0-1.2-.11L72.74,16.6l-.17,1a2.72,2.72,0,0,0,0,.3c0,.1,0,.19,0,.29,0,.5.1.81.29.94a3.15,3.15,0,0,0,1.23.31v.76h-6.1Zm6.12-9.69.38.06h.33a3,3,0,0,0,1.62-.36,3,3,0,0,0,1-1.18,7.67,7.67,0,0,0,.59-2,11.67,11.67,0,0,0,.22-2,4.4,4.4,0,0,0-.41-2,1.43,1.43,0,0,0-1.38-.79.73.73,0,0,0-.66.28,3.7,3.7,0,0,0-.32,1Zm5.57,9.69a1.9,1.9,0,0,0,1.09-.52,3.56,3.56,0,0,0,.58-1.59L83.84,4.11c0-.27.09-.51.13-.71a7.08,7.08,0,0,0,.09-1c0-.47-.1-.77-.28-.9a3.53,3.53,0,0,0-1.22-.3V.48h5.68a6.57,6.57,0,0,1,3,.53q1.92,1,1.92,3.75a6.79,6.79,0,0,1-.32,2,5.23,5.23,0,0,1-1.08,1.9,4.56,4.56,0,0,1-1.25,1,11.62,11.62,0,0,1-1.33.52c.07.3.12.49.14.57l1.59,6.66a4.07,4.07,0,0,0,.69,1.7,1.72,1.72,0,0,0,1.13.41v.76H88.52l-2.23-9.76h-.58L84.49,16.6l-.17,1a1,1,0,0,0,0,.25,2.62,2.62,0,0,0,0,.28c0,.53.09.86.26,1a3.11,3.11,0,0,0,1.24.32v.76H79.63ZM87.55,9.3A2.59,2.59,0,0,0,89,8.17a7.24,7.24,0,0,0,.66-1.62A8.18,8.18,0,0,0,90,4.29a4.32,4.32,0,0,0-.43-2,1.5,1.5,0,0,0-1.45-.81.71.71,0,0,0-.62.26,2.78,2.78,0,0,0-.33,1.05L85.91,9.5A6.63,6.63,0,0,0,87.55,9.3Zm8.72-4.77Q99,0,102.32,0A4.37,4.37,0,0,1,106,1.92a8.46,8.46,0,0,1,1.44,5.19,17.58,17.58,0,0,1-2.54,9.07q-2.7,4.61-6.21,4.6a4.27,4.27,0,0,1-3.6-1.92,8.67,8.67,0,0,1-1.38-5.14A17.68,17.68,0,0,1,96.27,4.53ZM96.9,18c.33,1.19.93,1.78,1.8,1.78a2.83,2.83,0,0,0,2.22-1.29A16.63,16.63,0,0,0,103,13.54a37.1,37.1,0,0,0,1.06-4.83,29.49,29.49,0,0,0,.38-4.11,5.86,5.86,0,0,0-.51-2.55A1.71,1.71,0,0,0,102.31,1C100.6,1,99.15,3.17,98,7.53a33.42,33.42,0,0,0-1.33,8.26A8.57,8.57,0,0,0,96.9,18ZM114.35.48v.76a2.57,2.57,0,0,0-1.08.17,1.07,1.07,0,0,0-.5,1,2.53,2.53,0,0,0,0,.28,2.64,2.64,0,0,0,0,.28l1.07,11.76L117.77,6c.31-.71.59-1.41.84-2.11A5.25,5.25,0,0,0,119,2.19a.85.85,0,0,0-.38-.81,3.09,3.09,0,0,0-.95-.14V.48h4v.76a2.08,2.08,0,0,0-.73.45,5.35,5.35,0,0,0-.82,1.4l-7.79,17.69h-.66L110,5.74A22,22,0,0,0,109.46,2c-.16-.39-.58-.62-1.28-.71V.48Zm5.15,19a1.83,1.83,0,0,0,1.08-.52,3.42,3.42,0,0,0,.59-1.59l2.54-13.24c.06-.34.11-.64.15-.92a4.83,4.83,0,0,0,.06-.7c0-.5-.09-.81-.28-.94a3.14,3.14,0,0,0-1.22-.31V.48h11.12l-.87,5.6L132.11,6a7,7,0,0,0-.49-3c-.52-1-1.59-1.51-3.19-1.51-.55,0-.9.09-1.06.28A2.44,2.44,0,0,0,127,2.74L125.76,9.3a6.21,6.21,0,0,0,2.81-.51A6,6,0,0,0,130,6.18l.58.1L129,14.35l-.56-.14c0-.28,0-.52,0-.73s0-.37,0-.51a2.92,2.92,0,0,0-.61-2.15,3.55,3.55,0,0,0-2.37-.57l-1.36,7.2a4.79,4.79,0,0,0-.07.51,3.28,3.28,0,0,0,0,.39,1,1,0,0,0,.22.66,1.24,1.24,0,0,0,.93.26,6.43,6.43,0,0,0,3.21-.75,7.67,7.67,0,0,0,3.21-4.17l.5.13-1.22,5.74H119.5Zm12.79,0a1.87,1.87,0,0,0,1-.41,3.23,3.23,0,0,0,.71-1.71L136.5,4.11c.07-.38.13-.69.17-1a5.89,5.89,0,0,0,.05-.67c0-.5-.1-.81-.29-.94a3.32,3.32,0,0,0-1.22-.31V.48h6a5.35,5.35,0,0,1,4.63,2.22,10.11,10.11,0,0,1,1.58,6,13.3,13.3,0,0,1-2.34,7.84,8,8,0,0,1-6.86,3.7h-5.93ZM143.87,3.39a2.84,2.84,0,0,0-2.79-2,1.08,1.08,0,0,0-.91.31,1.93,1.93,0,0,0-.34.83L137,17.44a3.1,3.1,0,0,0-.06.39c0,.11,0,.21,0,.3a1.22,1.22,0,0,0,.24.84,1.26,1.26,0,0,0,.9.26q3.67,0,5.33-5.42a23.91,23.91,0,0,0,1-6.94A9.45,9.45,0,0,0,143.87,3.39Z",opacity:1,strokeColor:"",fillColor:"#8a251a",width:127.70402,height:55.84601,stampFillColor:"#f6dedd",stampStrokeColor:""}}if(t)return t.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.currentStampAnnotation=t,t}},e.prototype.retrievestampAnnotation=function(e){if(e){var t=void 0;switch(e.trim()){case"Approved":t={iconName:"Approved",pathdata:"M19,20.22H10.55v-.71a4.26,4.26,0,0,0,1.79-.41,1.37,1.37,0,0,0,.53-1.29c0-.22,0-.75-.16-1.58,0-.17-.11-.89-.29-2.15H6.06l-1.72,3a4,4,0,0,0-.31.66,2,2,0,0,0-.14.69c0,.41.12.67.37.78a5.42,5.42,0,0,0,1.53.3v.71H0v-.71A4,4,0,0,0,1.21,19a5.68,5.68,0,0,0,1.28-1.56L13.45.07h.76L17,17a4.35,4.35,0,0,0,.7,2.08,2.4,2.4,0,0,0,1.31.44Zm-6.83-7.31L11.13,5.73,6.76,12.91Zm7.18,6.52a3,3,0,0,0,1.33-.49,3,3,0,0,0,.84-1.59L25.19,4.11c.07-.3.14-.6.2-.9a3.14,3.14,0,0,0,.1-.72,1,1,0,0,0-.58-1,5.68,5.68,0,0,0-1.57-.23V.48h8.47a9.68,9.68,0,0,1,3.57.57,4,4,0,0,1,2.71,4,4.93,4.93,0,0,1-2.2,4.22,9.53,9.53,0,0,1-5.69,1.58l-.85,0-1.71-.11L26,16.6l-.25,1a1,1,0,0,0-.05.3,2.83,2.83,0,0,0,0,.29c0,.5.14.81.4.94a6.31,6.31,0,0,0,1.76.31v.76H19.39Zm8.52-9.66.54.06h.48a5.81,5.81,0,0,0,2.3-.36,3.47,3.47,0,0,0,1.4-1.18,6.24,6.24,0,0,0,.86-2,8.94,8.94,0,0,0,.3-2,3.29,3.29,0,0,0-.58-2,2.3,2.3,0,0,0-2-.79,1.23,1.23,0,0,0-.93.28,2.71,2.71,0,0,0-.46,1Zm8,9.69a3.19,3.19,0,0,0,1.55-.52,3,3,0,0,0,.84-1.59L42,4.11c.07-.3.14-.6.2-.9a3.14,3.14,0,0,0,.1-.72,1,1,0,0,0-.58-1,5.68,5.68,0,0,0-1.57-.23V.48h8.47a9.68,9.68,0,0,1,3.57.57,4,4,0,0,1,2.71,4,4.93,4.93,0,0,1-2.2,4.22A9.53,9.53,0,0,1,47,10.87l-.85,0-1.71-.11L42.79,16.6l-.25,1a1.45,1.45,0,0,0,0,.3,2.83,2.83,0,0,0,0,.29c0,.5.14.81.4.94a6.31,6.31,0,0,0,1.76.31v.76h-8.7Zm8.74-9.69.54.06h.48A5.81,5.81,0,0,0,48,9.48a3.41,3.41,0,0,0,1.4-1.18,6.24,6.24,0,0,0,.86-2,9,9,0,0,0,.31-2,3.29,3.29,0,0,0-.59-2,2.3,2.3,0,0,0-2-.79,1.23,1.23,0,0,0-.93.28,2.88,2.88,0,0,0-.46,1Zm7.95,9.69a3.27,3.27,0,0,0,1.56-.52A3.06,3.06,0,0,0,55,17.35L58.64,4.11l.18-.71a4.72,4.72,0,0,0,.13-1c0-.47-.13-.77-.4-.9a6.74,6.74,0,0,0-1.74-.3V.48h8.11A13,13,0,0,1,69.14,1a3.7,3.7,0,0,1,2.74,3.75,4.8,4.8,0,0,1-.46,2,5,5,0,0,1-1.54,1.9,6.55,6.55,0,0,1-1.79,1,19.35,19.35,0,0,1-1.89.52c.1.3.16.49.2.57l2.27,6.66a3.49,3.49,0,0,0,1,1.7,3.08,3.08,0,0,0,1.6.41v.76H65.33l-3.19-9.76h-.83L59.57,16.6l-.25,1a1.87,1.87,0,0,0,0,.25,2.64,2.64,0,0,0,0,.28q0,.8.39,1a5.88,5.88,0,0,0,1.76.32v.76H52.62ZM63.94,9.3a3.79,3.79,0,0,0,2.11-1.13A6,6,0,0,0,67,6.55a5.84,5.84,0,0,0,.44-2.26,3.31,3.31,0,0,0-.61-2,2.47,2.47,0,0,0-2.09-.81,1.25,1.25,0,0,0-.88.26,2.34,2.34,0,0,0-.47,1.05L61.59,9.5A13.42,13.42,0,0,0,63.94,9.3ZM76.39,4.53Q80.26,0,85,0a7.34,7.34,0,0,1,5.23,1.92,6.76,6.76,0,0,1,2,5.19,13.9,13.9,0,0,1-3.62,9.07q-3.86,4.61-8.88,4.6a7.06,7.06,0,0,1-5.13-1.92,6.86,6.86,0,0,1-2-5.14A14,14,0,0,1,76.39,4.53ZM77.3,18a2.56,2.56,0,0,0,2.57,1.78A4.62,4.62,0,0,0,83,18.47,14.42,14.42,0,0,0,86,13.54a27.18,27.18,0,0,0,1.52-4.83,20.67,20.67,0,0,0,.54-4.11,4.38,4.38,0,0,0-.73-2.55A2.62,2.62,0,0,0,85,1q-3.68,0-6.19,6.54a24.29,24.29,0,0,0-1.9,8.26A5.91,5.91,0,0,0,77.3,18ZM102.23.48v.76a5.19,5.19,0,0,0-1.55.17,1,1,0,0,0-.72,1,2.46,2.46,0,0,0,0,.28L100,3l1.52,11.76L107.11,6c.44-.71.84-1.41,1.2-2.11a4.06,4.06,0,0,0,.53-1.66.79.79,0,0,0-.55-.81,6.11,6.11,0,0,0-1.35-.14V.48h5.67v.76a3.31,3.31,0,0,0-1,.45,5.33,5.33,0,0,0-1.18,1.4L99.26,20.78h-.94l-2.25-15A15.49,15.49,0,0,0,95.24,2c-.22-.39-.84-.62-1.83-.71V.48Zm7.35,19a3.19,3.19,0,0,0,1.55-.52,3,3,0,0,0,.84-1.59l3.62-13.24c.09-.34.16-.64.22-.92a3.27,3.27,0,0,0,.09-.7c0-.5-.14-.81-.4-.94a6.13,6.13,0,0,0-1.75-.31V.48h15.89l-1.25,5.6L127.6,6a5.32,5.32,0,0,0-.7-3q-1.12-1.52-4.56-1.51a2.61,2.61,0,0,0-1.51.28,2.12,2.12,0,0,0-.56,1.06L118.52,9.3a12.1,12.1,0,0,0,4-.51,5.8,5.8,0,0,0,2-2.61l.82.1-2.19,8.07-.81-.14c0-.28.07-.52.08-.73s0-.37,0-.51a2.4,2.4,0,0,0-.87-2.15,6.76,6.76,0,0,0-3.38-.57l-1.94,7.2a3.34,3.34,0,0,0-.11.51,3.67,3.67,0,0,0,0,.39.81.81,0,0,0,.32.66,2.3,2.3,0,0,0,1.33.26,12.39,12.39,0,0,0,4.57-.75A8.84,8.84,0,0,0,127,14.35l.72.13-1.74,5.74H109.58Zm18.27,0a3.27,3.27,0,0,0,1.37-.41,2.85,2.85,0,0,0,1-1.71l3.63-13.23c.1-.38.18-.69.23-1a3,3,0,0,0,.09-.67c0-.5-.15-.81-.42-.94A6.38,6.38,0,0,0,132,1.24V.48h8.57c2.9,0,5.1.74,6.62,2.22a8,8,0,0,1,2.26,6,10.72,10.72,0,0,1-3.35,7.84,13.3,13.3,0,0,1-9.8,3.7h-8.47ZM144.4,3.39a4.23,4.23,0,0,0-4-2,2,2,0,0,0-1.29.31,1.74,1.74,0,0,0-.48.83l-4.07,14.9a3.24,3.24,0,0,0-.07.39,1.69,1.69,0,0,0,0,.3,1,1,0,0,0,.36.84,2.27,2.27,0,0,0,1.27.26q5.26,0,7.62-5.42a17.25,17.25,0,0,0,1.43-6.94A7,7,0,0,0,144.4,3.39Z",opacity:1,strokeColor:"",fillColor:"#516c30",width:149.474,height:20.783,stampFillColor:"#e6eddf",stampStrokeColor:""};break;case"Confidential":t={iconName:"Confidential",pathdata:"M13.71,0,12.63,6.9,12,6.73c0-.41,0-.66,0-.73s0-.18,0-.32a6.16,6.16,0,0,0-.79-3.47,2.37,2.37,0,0,0-2-1.14c-1.64,0-3.07,1.51-4.29,4.55a22,22,0,0,0-1.64,8.29c0,2,.34,3.44,1,4.2A3,3,0,0,0,6.5,19.24a4.08,4.08,0,0,0,2.93-1.43,10.47,10.47,0,0,0,1.5-2.09l.64.65A8.84,8.84,0,0,1,9,19.72a5.24,5.24,0,0,1-3.08,1.09,5.16,5.16,0,0,1-4.21-2.08A8.68,8.68,0,0,1,0,13.16,16.5,16.5,0,0,1,2.55,3.92Q5.1,0,8.61,0a6.35,6.35,0,0,1,2.25.43,6.62,6.62,0,0,0,1.38.43.55.55,0,0,0,.5-.23A2.61,2.61,0,0,0,13.06,0ZM27.49,7.11a17.19,17.19,0,0,1-2.61,9.07q-2.77,4.61-6.39,4.6a4.42,4.42,0,0,1-3.7-1.92,8.47,8.47,0,0,1-1.43-5.14A17.31,17.31,0,0,1,16,4.53C17.88,1.51,20,0,22.25,0A4.53,4.53,0,0,1,26,1.92,8.27,8.27,0,0,1,27.49,7.11ZM24.42,4.6a5.71,5.71,0,0,0-.53-2.55A1.76,1.76,0,0,0,22.24,1q-2.65,0-4.45,6.54a31.93,31.93,0,0,0-1.37,8.26A8.15,8.15,0,0,0,16.67,18c.34,1.19,1,1.78,1.85,1.78a2.9,2.9,0,0,0,2.28-1.29,15.85,15.85,0,0,0,2.13-4.93A34.08,34.08,0,0,0,24,8.71,28.5,28.5,0,0,0,24.42,4.6ZM42.75,1.3l.3-.06V.48H38.69v.76a2.55,2.55,0,0,1,1.16.33,1.8,1.8,0,0,1,.51,1.48,10.11,10.11,0,0,1-.13,1.34c-.06.41-.14.87-.24,1.39l-1.65,8.34L33.73.48H29.45v.76a2.66,2.66,0,0,1,1,.24,1.88,1.88,0,0,1,.65,1.06l.09.3L28.81,15a20.72,20.72,0,0,1-1,3.61,1.61,1.61,0,0,1-1.19.9v.76h4.42v-.76a2.55,2.55,0,0,1-1.13-.32,1.67,1.67,0,0,1-.56-1.44,7.13,7.13,0,0,1,.05-.79c.06-.43.17-1.09.34-2L31.89,4.38l5.52,16.33h.52l3-15a22.58,22.58,0,0,1,.87-3.42A1.42,1.42,0,0,1,42.75,1.3ZM55.53.48H44.23v.76a3.63,3.63,0,0,1,1.26.3c.19.13.29.42.29.9a7.08,7.08,0,0,1-.09,1c0,.2-.08.44-.13.71L43,17.34a3.47,3.47,0,0,1-.59,1.58,1.91,1.91,0,0,1-1.13.54v.76h6.29v-.76a2.13,2.13,0,0,1-1-.19A1.23,1.23,0,0,1,46,18.1c0-.1,0-.21,0-.31s0-.23.05-.35l1.4-7.21a3.15,3.15,0,0,1,2.37.64A3.21,3.21,0,0,1,50.38,13c0,.11,0,.28,0,.49s0,.46-.06.75l.58.14,1.58-8.07-.59-.1a5.79,5.79,0,0,1-1.43,2.59,6.17,6.17,0,0,1-2.77.52l1.26-6.54a2.06,2.06,0,0,1,.42-1.08,1.39,1.39,0,0,1,1-.26c1.62,0,2.7.51,3.24,1.54a7.11,7.11,0,0,1,.49,3l.57.13Zm3.69,17.71c0-.08,0-.17,0-.27s0-.2,0-.3l.17-1L62.06,3.36a3.44,3.44,0,0,1,.59-1.6,2,2,0,0,1,1.12-.52V.48H57.44v.76a3.47,3.47,0,0,1,1.26.31c.2.13.3.44.3.94a4.25,4.25,0,0,1-.06.67c0,.26-.09.57-.17,1L56.16,17.35a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.12.52v.76h6.33v-.76a3.3,3.3,0,0,1-1.26-.32C59.32,19,59.22,18.69,59.22,18.19Zm18-9.51a13,13,0,0,1-2.42,7.84,8.31,8.31,0,0,1-7,3.7H61.6v-.76a2,2,0,0,0,1-.41,3.14,3.14,0,0,0,.73-1.71L65.93,4.11c.08-.38.13-.69.17-1a4.36,4.36,0,0,0,.06-.67c0-.5-.1-.81-.3-.94a3.47,3.47,0,0,0-1.26-.31V.48h6.17A5.52,5.52,0,0,1,75.53,2.7,9.91,9.91,0,0,1,77.17,8.68ZM74,6.87a9.22,9.22,0,0,0-.53-3.48,2.91,2.91,0,0,0-2.87-2,1.12,1.12,0,0,0-.93.31,1.81,1.81,0,0,0-.35.83l-2.93,14.9a3,3,0,0,0-.05.39c0,.11,0,.21,0,.3a1.17,1.17,0,0,0,.25.84,1.3,1.3,0,0,0,.92.26q3.8,0,5.49-5.42A23.26,23.26,0,0,0,74,6.87Zm11.3,11.65a6.72,6.72,0,0,1-3.29.75,1.3,1.3,0,0,1-1-.26,1,1,0,0,1-.23-.66,3.28,3.28,0,0,1,0-.39,4.88,4.88,0,0,1,.08-.51l1.4-7.2a3.73,3.73,0,0,1,2.43.57A2.87,2.87,0,0,1,85.43,13c0,.14,0,.31,0,.51s0,.45-.06.73l.59.14,1.57-8.07-.59-.1a5.79,5.79,0,0,1-1.46,2.61,6.5,6.5,0,0,1-2.89.51l1.26-6.56a2.41,2.41,0,0,1,.41-1.06c.16-.19.52-.28,1.08-.28,1.65,0,2.75.5,3.29,1.51a7,7,0,0,1,.5,3l.57.13.9-5.6H79.14v.76a3.35,3.35,0,0,1,1.26.31c.19.13.29.44.29.94a5,5,0,0,1-.07.7c0,.28-.09.58-.15.92L77.86,17.35a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.13.52v.76H87.91l1.25-5.74-.52-.13A7.69,7.69,0,0,1,85.34,18.52ZM105.8,1.24V.48h-4.37v.76a2.55,2.55,0,0,1,1.16.33,1.77,1.77,0,0,1,.52,1.48A10.58,10.58,0,0,1,103,4.39c-.06.41-.13.87-.23,1.39l-1.66,8.34L96.47.48H92.19v.76a2.61,2.61,0,0,1,1,.24,1.83,1.83,0,0,1,.65,1.06l.1.3L91.55,15a19,19,0,0,1-1,3.61,1.61,1.61,0,0,1-1.19.9v.76h4.42v-.76a2.59,2.59,0,0,1-1.13-.32,1.67,1.67,0,0,1-.56-1.44,7.13,7.13,0,0,1,0-.79c.06-.43.17-1.09.35-2L94.63,4.38l5.52,16.33h.53l2.95-15a22.93,22.93,0,0,1,.86-3.42,1.42,1.42,0,0,1,1-1Zm11.4,4.9L118,.48H106.28l-.82,5,.55.2a8,8,0,0,1,1.87-3.16,3.7,3.7,0,0,1,2.7-1.06l-3.12,15.85a2.94,2.94,0,0,1-.87,1.85,2.48,2.48,0,0,1-1.34.26v.76h7v-.76a4.24,4.24,0,0,1-1.43-.3c-.23-.13-.34-.45-.34-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.18-1,3-15.1a2.73,2.73,0,0,1,1.79.63c.75.7,1.13,2,1.17,3.94Zm3.57,12.05c0-.08,0-.17,0-.27s0-.2,0-.3l.17-1,2.62-13.24a3.44,3.44,0,0,1,.59-1.6,2,2,0,0,1,1.12-.52V.48H119v.76a3.47,3.47,0,0,1,1.26.31c.2.13.3.44.3.94a4.25,4.25,0,0,1-.06.67c0,.26-.09.57-.17,1l-2.61,13.24a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.12.52v.76h6.33v-.76a3.36,3.36,0,0,1-1.26-.32C120.87,19,120.77,18.69,120.77,18.19Zm28.86-3.71-1.24,5.74H130.3v-.71a2.48,2.48,0,0,0,1.3-.41,1.64,1.64,0,0,0,.37-1.29c0-.22,0-.75-.11-1.58,0-.17-.08-.89-.21-2.15h-4.58l-1.24,3a5.1,5.1,0,0,0-.22.66,2.45,2.45,0,0,0-.1.69c0,.41.09.67.26.78a3.05,3.05,0,0,0,1.11.3v.71h-4.17v-.71a2.66,2.66,0,0,0,.87-.53,5.79,5.79,0,0,0,.92-1.56L132.39.07h.55L135,17a5.53,5.53,0,0,0,.5,2.08,1.67,1.67,0,0,0,1.14.46v0a1.93,1.93,0,0,0,1.12-.52,3.52,3.52,0,0,0,.6-1.6l2.61-13.23c.08-.38.13-.69.17-1a4.36,4.36,0,0,0,.06-.67c0-.5-.1-.81-.3-.94a3.47,3.47,0,0,0-1.26-.31V.48h6.73v.76a3.23,3.23,0,0,0-1.49.48,3.06,3.06,0,0,0-.64,1.64l-2.77,14.08c0,.16-.05.3-.07.44s0,.29,0,.47a.79.79,0,0,0,.31.71,1.55,1.55,0,0,0,.87.21,6.83,6.83,0,0,0,3.79-1,8.42,8.42,0,0,0,2.81-3.88ZM131.5,12.91l-.78-7.18-3.14,7.18Z",opacity:1,strokeColor:"",fillColor:"#192760",width:149.633,height:20.811,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Witness":t={iconName:"Witness",pathdata:"M19.63,2.67,12.77,16.84h-.69L10.63,5.17,5.05,16.84H4.36L2.5,2.92A3.13,3.13,0,0,0,2,1.35,2.38,2.38,0,0,0,.63.91V.33H7.3V1a2.27,2.27,0,0,0-.92.17A1.11,1.11,0,0,0,5.84,2.2v.16c0,.05,0,.13,0,.22L6.81,11l3.57-7.48a.79.79,0,0,0,0-.23,2.78,2.78,0,0,0-.53-2A2.23,2.23,0,0,0,8.68.91V.33h6.45V.91A2.42,2.42,0,0,0,14,1.2c-.23.16-.34.5-.34,1,0,.11,0,.26,0,.46s.07.73.12,1.21l.8,7L18.3,3.11c.09-.19.17-.4.25-.62a2.11,2.11,0,0,0,.11-.65.73.73,0,0,0-.4-.76,2.73,2.73,0,0,0-1.1-.17V.33h4.47V.91a1.92,1.92,0,0,0-.91.3A3.66,3.66,0,0,0,19.63,2.67ZM29.76.33H22.62V1A5.07,5.07,0,0,1,24,1.2c.23.11.34.36.34.77a2.86,2.86,0,0,1-.06.54c0,.21-.11.47-.19.77L21.17,14.05a2.47,2.47,0,0,1-.68,1.29,2.62,2.62,0,0,1-1.27.42v.62h7.15v-.62A5.09,5.09,0,0,1,25,15.51c-.22-.11-.33-.37-.33-.77a2,2,0,0,1,0-.23c0-.08,0-.16,0-.24l.19-.83,3-10.77a2.5,2.5,0,0,1,.66-1.3A2.76,2.76,0,0,1,29.76,1ZM41.9,4.88l.63,0,.86-4.6H30.2l-.93,4.1.62.16A6.6,6.6,0,0,1,32,2a5.22,5.22,0,0,1,3.06-.86L31.53,14.05a2.24,2.24,0,0,1-1,1.5,3.67,3.67,0,0,1-1.51.21v.62H37v-.62a6,6,0,0,1-1.62-.24c-.26-.1-.39-.36-.39-.77,0-.07,0-.14,0-.21s0-.16.05-.27l.2-.83L38.57,1.16a3.76,3.76,0,0,1,2,.52A3.69,3.69,0,0,1,41.9,4.88ZM59.24,1,59.58,1V.33H54.65V1A3.78,3.78,0,0,1,56,1.22a1.25,1.25,0,0,1,.58,1.2,6.26,6.26,0,0,1-.15,1.09c-.07.33-.16.71-.27,1.13l-1.87,6.79L49.05.33H44.21V1a3.51,3.51,0,0,1,1.13.2,1.51,1.51,0,0,1,.74.85l.1.25L43.49,12.1A13.5,13.5,0,0,1,42.4,15a1.87,1.87,0,0,1-1.35.72v.62h5v-.62a3.62,3.62,0,0,1-1.28-.26,1.19,1.19,0,0,1-.64-1.17,3.55,3.55,0,0,1,.06-.64q.11-.53.39-1.59L47,3.5,53.2,16.78h.59L57.13,4.6a15.29,15.29,0,0,1,1-2.78A1.51,1.51,0,0,1,59.24,1Zm7.26.31a2.11,2.11,0,0,1,1.23-.23c1.87,0,3.1.41,3.71,1.23A4.39,4.39,0,0,1,72,4.78l.64.11,1-4.56H60.75V1a5,5,0,0,1,1.42.25c.22.11.32.36.32.77a2.73,2.73,0,0,1-.07.57c0,.22-.1.47-.17.74l-3,10.77a2.47,2.47,0,0,1-.68,1.29,2.62,2.62,0,0,1-1.27.42v.62h13.3l1.42-4.66-.59-.11A7.1,7.1,0,0,1,67.75,15a10,10,0,0,1-3.72.61A1.86,1.86,0,0,1,63,15.4a.67.67,0,0,1-.26-.54,2.36,2.36,0,0,1,0-.32,3.38,3.38,0,0,1,.09-.41l1.58-5.86a5.48,5.48,0,0,1,2.75.47,2,2,0,0,1,.71,1.75c0,.11,0,.25,0,.41s0,.37-.06.6l.65.11L70.2,5.05,69.54,5a4.69,4.69,0,0,1-1.65,2.12,10.06,10.06,0,0,1-3.26.41l1.42-5.33A1.75,1.75,0,0,1,66.5,1.31ZM80.88.83a2.77,2.77,0,0,1,2.46,1.26A4.36,4.36,0,0,1,84,4l.08.78.62.08,1-4.8H85a1.77,1.77,0,0,1-.38.43A1,1,0,0,1,84,.67a2.76,2.76,0,0,1-.37,0l-.41-.1-.61-.2a4.78,4.78,0,0,0-.79-.2A6.71,6.71,0,0,0,80.46,0a4.76,4.76,0,0,0-3.62,1.36,4.61,4.61,0,0,0-1.29,3.29q0,2.05,2.94,4.47t2.94,3.82a3.19,3.19,0,0,1-.79,2.14,2.8,2.8,0,0,1-2.23.92,3.43,3.43,0,0,1-1.5-.33,3.82,3.82,0,0,1-2-2.5,10.33,10.33,0,0,1-.2-1.67L74,11.45l-.87,5.38h.73a2.85,2.85,0,0,1,.38-.67A.75.75,0,0,1,74.8,16a1.12,1.12,0,0,1,.27,0l.42.15.61.22a8.62,8.62,0,0,0,1.3.35,7.53,7.53,0,0,0,1.32.12,5.48,5.48,0,0,0,4.11-1.53,4.77,4.77,0,0,0,1.49-3.43,4.59,4.59,0,0,0-.77-2.63,9.31,9.31,0,0,0-1.87-2L79.61,5.5a4.31,4.31,0,0,1-.74-.77,2.55,2.55,0,0,1-.43-1.45,2.68,2.68,0,0,1,.42-1.44A2.23,2.23,0,0,1,80.88.83Zm12.31,0a2.8,2.8,0,0,1,2.47,1.26A4.49,4.49,0,0,1,96.35,4l.08.78.62.08,1-4.8h-.71a1.62,1.62,0,0,1-.39.43,1,1,0,0,1-.64.18,2.9,2.9,0,0,1-.38,0l-.41-.1-.61-.2a4.65,4.65,0,0,0-.78-.2A6.88,6.88,0,0,0,92.77,0a4.73,4.73,0,0,0-3.61,1.36,4.57,4.57,0,0,0-1.3,3.29q0,2.05,2.94,4.47c2,1.54,3,2.81,3,3.82a3.2,3.2,0,0,1-.8,2.14,2.78,2.78,0,0,1-2.23.92,3.36,3.36,0,0,1-1.49-.33A3.68,3.68,0,0,1,88,14.73a3.76,3.76,0,0,1-.81-1.56A10.6,10.6,0,0,1,87,11.5l-.7-.05-.86,5.38h.72a2.85,2.85,0,0,1,.38-.67.78.78,0,0,1,.57-.19,1.12,1.12,0,0,1,.27,0l.42.15.61.22a8.74,8.74,0,0,0,1.31.35,7.37,7.37,0,0,0,1.32.12,5.49,5.49,0,0,0,4.11-1.53,4.81,4.81,0,0,0,1.49-3.43,4.67,4.67,0,0,0-.77-2.63A9.57,9.57,0,0,0,94,7.2L91.93,5.5a4,4,0,0,1-.74-.77,2.48,2.48,0,0,1-.43-1.45,2.68,2.68,0,0,1,.42-1.44A2.2,2.2,0,0,1,93.19.83Z",opacity:1,strokeColor:"",fillColor:"#192760",width:97.39,height:16.84,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"InitialHere":case"Initial Here":t={iconName:"Initial Here",pathdata:"M6.36,15.51a5.09,5.09,0,0,0,1.42.25v.62H.63v-.62a2.62,2.62,0,0,0,1.27-.42,2.47,2.47,0,0,0,.68-1.29l3-10.77c.08-.3.15-.56.19-.77A2.86,2.86,0,0,0,5.78,2c0-.41-.11-.66-.34-.77A5.07,5.07,0,0,0,4,1V.33h7.14V1a2.76,2.76,0,0,0-1.27.42,2.5,2.5,0,0,0-.66,1.3l-3,10.77-.19.83c0,.08,0,.16,0,.24a2,2,0,0,0,0,.23C6,15.14,6.14,15.4,6.36,15.51ZM27,1,27.36,1V.33H22.43V1a3.78,3.78,0,0,1,1.31.27,1.25,1.25,0,0,1,.58,1.2,6.26,6.26,0,0,1-.15,1.09c-.07.33-.16.71-.27,1.13L22,11.43,16.83.33H12V1a3.49,3.49,0,0,1,1.12.2,1.51,1.51,0,0,1,.74.85l.11.25-2.7,9.85A13,13,0,0,1,10.18,15a1.85,1.85,0,0,1-1.35.72v.62h5v-.62a3.62,3.62,0,0,1-1.28-.26,1.19,1.19,0,0,1-.63-1.17,4.72,4.72,0,0,1,.05-.64q.1-.53.39-1.59l2.39-8.6L21,16.78h.6L24.91,4.6a15.29,15.29,0,0,1,1-2.78A1.51,1.51,0,0,1,27,1ZM35.78.33H28.64V1a5.16,5.16,0,0,1,1.41.25c.23.11.34.36.34.77a2.86,2.86,0,0,1-.06.54c0,.21-.11.47-.19.77L27.19,14.05a2.47,2.47,0,0,1-.68,1.29,2.66,2.66,0,0,1-1.27.42v.62h7.15v-.62A5.09,5.09,0,0,1,31,15.51c-.22-.11-.33-.37-.33-.77a2,2,0,0,1,0-.23,2,2,0,0,1,0-.24l.19-.83,3-10.77a2.5,2.5,0,0,1,.66-1.3A2.76,2.76,0,0,1,35.78,1Zm12.76,4.6.87-4.6H36.22l-.93,4.1.62.16A6.52,6.52,0,0,1,38,2a5.21,5.21,0,0,1,3-.86L37.55,14.05a2.24,2.24,0,0,1-1,1.5,3.7,3.7,0,0,1-1.51.21v.62H43v-.62a5.79,5.79,0,0,1-1.61-.24c-.26-.1-.39-.36-.39-.77a1.48,1.48,0,0,1,0-.21,2,2,0,0,1,0-.27l.2-.83L44.58,1.16a3.77,3.77,0,0,1,2,.52,3.74,3.74,0,0,1,1.31,3.2Zm4,9.81a.93.93,0,0,1,0-.23,2,2,0,0,1,0-.24l.18-.83,3-10.77a2.42,2.42,0,0,1,.67-1.3A2.72,2.72,0,0,1,57.72,1V.33H50.57V1A5.26,5.26,0,0,1,52,1.2c.23.11.34.36.34.77a2.28,2.28,0,0,1-.07.54,7.71,7.71,0,0,1-.19.77l-3,10.77a2.4,2.4,0,0,1-.68,1.29,2.58,2.58,0,0,1-1.26.42v.62h7.14v-.62a5.07,5.07,0,0,1-1.41-.25C52.69,15.4,52.58,15.14,52.58,14.74Zm32-3.13.57.11-1.4,4.66H63.34v-.57a3.65,3.65,0,0,0,1.46-.34c.29-.16.43-.51.43-1,0-.18,0-.61-.13-1.29,0-.14-.09-.73-.23-1.75H59.69l-1.4,2.44a3.38,3.38,0,0,0-.25.54,1.64,1.64,0,0,0-.11.56q0,.5.3.63a4.41,4.41,0,0,0,1.25.25v.57H54.76v-.57a3.36,3.36,0,0,0,1-.43,4.58,4.58,0,0,0,1-1.27L65.7,0h.62l2.3,13.72a3.49,3.49,0,0,0,.56,1.7,2.34,2.34,0,0,0,1.29.37v0a2.58,2.58,0,0,0,1.26-.42,2.46,2.46,0,0,0,.68-1.3L75.35,3.28c.09-.3.16-.56.2-.77A2.86,2.86,0,0,0,75.61,2c0-.41-.11-.66-.34-.77A5.17,5.17,0,0,0,73.85,1V.33h7.61V1a4.77,4.77,0,0,0-1.69.39A2.27,2.27,0,0,0,79,2.67L75.92,14.12c0,.13,0,.25-.07.36a2.21,2.21,0,0,0,0,.39.59.59,0,0,0,.35.57,2.33,2.33,0,0,0,1,.17,10.06,10.06,0,0,0,4.28-.84A7.67,7.67,0,0,0,84.6,11.61ZM64.7,10.44,63.81,4.6l-3.55,5.84Zm38,4.32a.71.71,0,0,1,0-.16s0-.16.07-.34l.2-.83L106,2.67a2.43,2.43,0,0,1,.79-1.39A2.78,2.78,0,0,1,107.9,1V.33h-7.15V1a4.45,4.45,0,0,1,1.27.19.81.81,0,0,1,.47.83,2.73,2.73,0,0,1-.07.57c0,.22-.1.47-.17.74l-1.14,4.16h-5.7L96.7,2.67a2.27,2.27,0,0,1,.73-1.33A4.77,4.77,0,0,1,99.12,1V.33H91.51V1a5.09,5.09,0,0,1,1.42.25c.22.11.33.36.33.77a2.93,2.93,0,0,1-.08.58c-.05.24-.1.48-.17.73L90.07,14a2.73,2.73,0,0,1-.65,1.29,2.47,2.47,0,0,1-1.3.43v.62h7.15v-.62a5.13,5.13,0,0,1-1.42-.24c-.21-.1-.31-.34-.31-.72a3.11,3.11,0,0,1,0-.57c0-.16.1-.43.19-.8L95.12,8.5h5.7L99.31,14a2.21,2.21,0,0,1-.74,1.33,4.36,4.36,0,0,1-1.69.39v.62h7.63v-.62a4.72,4.72,0,0,1-1.25-.17A.8.8,0,0,1,102.73,14.76Zm13.38.24a10.07,10.07,0,0,1-3.72.61,1.86,1.86,0,0,1-1.08-.21.67.67,0,0,1-.26-.54,2.36,2.36,0,0,1,0-.32,3.38,3.38,0,0,1,.09-.41l1.58-5.86a5.51,5.51,0,0,1,2.75.47,2,2,0,0,1,.7,1.75c0,.11,0,.25,0,.41s0,.37-.07.6l.66.11,1.78-6.56L117.89,5a4.63,4.63,0,0,1-1.65,2.12A10,10,0,0,1,113,7.5l1.43-5.33a1.6,1.6,0,0,1,.45-.86,2.07,2.07,0,0,1,1.23-.23c1.86,0,3.1.41,3.71,1.23a4.32,4.32,0,0,1,.56,2.47l.65.11,1-4.56H109.1V1a5.1,5.1,0,0,1,1.43.25c.21.11.32.36.32.77a3.63,3.63,0,0,1-.07.57c0,.22-.11.47-.18.74l-2.95,10.77a2.4,2.4,0,0,1-.68,1.29,2.58,2.58,0,0,1-1.26.42v.62H119l1.42-4.66-.58-.11A7.17,7.17,0,0,1,116.11,15ZM144.36,2.17,142.93,7.5a10.13,10.13,0,0,0,3.27-.41A4.69,4.69,0,0,0,147.84,5l.67.08-1.78,6.56-.66-.11c0-.23.06-.43.07-.6s0-.3,0-.41a2,2,0,0,0-.7-1.75,5.51,5.51,0,0,0-2.75-.47l-1.58,5.86a3.38,3.38,0,0,0-.09.41,2.36,2.36,0,0,0,0,.32.67.67,0,0,0,.26.54,1.86,1.86,0,0,0,1.08.21,10.07,10.07,0,0,0,3.72-.61,7.14,7.14,0,0,0,3.73-3.39l.58.11L149,16.38H131l-2.59-7.93h-.68l-1.42,5-.2.83,0,.2a1.77,1.77,0,0,0,0,.23c0,.43.1.7.31.81a4.87,4.87,0,0,0,1.43.25v.62h-7.14v-.62a2.58,2.58,0,0,0,1.26-.42,2.4,2.4,0,0,0,.68-1.29l3-10.77.15-.57a4.09,4.09,0,0,0,.1-.79c0-.38-.11-.62-.32-.72A4.8,4.8,0,0,0,124,1V.33h6.6a10.58,10.58,0,0,1,3.42.43,3,3,0,0,1,2.24,3.05,4,4,0,0,1-.38,1.6A4,4,0,0,1,134.66,7a5.47,5.47,0,0,1-1.45.8c-.33.11-.85.25-1.54.42a4.73,4.73,0,0,0,.16.46l1.85,5.42a2.81,2.81,0,0,0,.8,1.38,2.42,2.42,0,0,0,1.23.32,2.53,2.53,0,0,0,1.22-.41,2.47,2.47,0,0,0,.68-1.29l2.94-10.77c.07-.27.13-.52.18-.74A2.73,2.73,0,0,0,140.8,2c0-.41-.11-.66-.32-.77A5.1,5.1,0,0,0,139.05,1V.33H152l-1,4.56-.65-.11a4.32,4.32,0,0,0-.56-2.47c-.61-.82-1.85-1.23-3.71-1.23a2.07,2.07,0,0,0-1.23.23A1.67,1.67,0,0,0,144.36,2.17ZM131.54,6.59a5,5,0,0,0,.77-1.32,4.68,4.68,0,0,0,.36-1.84,2.74,2.74,0,0,0-.5-1.67,2,2,0,0,0-1.7-.66,1,1,0,0,0-.72.22,2,2,0,0,0-.38.85l-1.45,5.49a10.33,10.33,0,0,0,1.91-.16A3.07,3.07,0,0,0,131.54,6.59Z",opacity:1,strokeColor:"",fillColor:"#192760",width:151.345,height:16.781,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"SignHere":case"Sign Here":t={iconName:"Sign Here",pathdata:"M6.38,1.9A2.56,2.56,0,0,0,6,3.34a2.49,2.49,0,0,0,.44,1.45,3.9,3.9,0,0,0,.73.76l2.07,1.7a9.34,9.34,0,0,1,1.87,2.06,4.6,4.6,0,0,1,.78,2.63,4.78,4.78,0,0,1-1.5,3.43A5.46,5.46,0,0,1,6.23,16.9a7.34,7.34,0,0,1-1.31-.12,7.48,7.48,0,0,1-1.31-.36L3,16.2l-.42-.14a1.12,1.12,0,0,0-.27,0,.71.71,0,0,0-.57.19,2.85,2.85,0,0,0-.38.67H.63l.87-5.38.69,0a10.34,10.34,0,0,0,.2,1.68,3.82,3.82,0,0,0,2,2.5,3.42,3.42,0,0,0,1.5.32,2.76,2.76,0,0,0,2.23-.92A3.14,3.14,0,0,0,8.94,13c0-1-1-2.29-2.94-3.82S3.06,6.08,3.06,4.71A4.59,4.59,0,0,1,4.35,1.42,4.76,4.76,0,0,1,8,.06,6.71,6.71,0,0,1,9.29.19a4.78,4.78,0,0,1,.79.2l.61.2.41.1a2.76,2.76,0,0,0,.37,0,1,1,0,0,0,.65-.18A1.75,1.75,0,0,0,12.5.12h.72l-1,4.8-.62-.08-.09-.79a4.45,4.45,0,0,0-.69-1.91A2.78,2.78,0,0,0,8.39.89,2.2,2.2,0,0,0,6.38,1.9ZM22.8.39H15.66V1a4.71,4.71,0,0,1,1.41.25c.23.11.34.36.34.77a2.86,2.86,0,0,1-.06.54c0,.21-.11.47-.19.77L14.21,14.11a2.47,2.47,0,0,1-.68,1.29,2.62,2.62,0,0,1-1.27.42v.62h7.15v-.62A4.63,4.63,0,0,1,18,15.56c-.22-.1-.33-.36-.33-.77a1.8,1.8,0,0,1,0-.22c0-.08,0-.16,0-.24l.19-.83,3-10.77a2.5,2.5,0,0,1,.66-1.3A2.76,2.76,0,0,1,22.8,1ZM38.09,9.14V8.52H31.18v.62a5.05,5.05,0,0,1,1.44.28c.22.1.32.35.32.75a13.35,13.35,0,0,1-.54,2.54,19.13,19.13,0,0,1-.54,1.87A1.85,1.85,0,0,1,31,15.66a3.77,3.77,0,0,1-1.78.35A3.71,3.71,0,0,1,27,15.38c-1.09-.77-1.64-2.13-1.64-4.08a13.74,13.74,0,0,1,1.78-6.69q2.05-3.72,5-3.72a2.93,2.93,0,0,1,3,1.86,6.09,6.09,0,0,1,.4,2.48l.69.08L37.44,0h-.71a2.44,2.44,0,0,1-.41.53.82.82,0,0,1-.58.2A9.14,9.14,0,0,1,34.33.36,9.23,9.23,0,0,0,31.73,0a9.4,9.4,0,0,0-7.46,3.42,10.46,10.46,0,0,0-2.65,7,5.88,5.88,0,0,0,2.2,4.83,7.77,7.77,0,0,0,5,1.64A13.06,13.06,0,0,0,32,16.52a14.26,14.26,0,0,0,2.33-.75l.67-.3,1.2-4.36a4.15,4.15,0,0,1,.62-1.59A2.28,2.28,0,0,1,38.09,9.14ZM50.36,1a3.36,3.36,0,0,1,1.31.27,1.25,1.25,0,0,1,.58,1.2,6.26,6.26,0,0,1-.15,1.09c-.07.33-.16.7-.27,1.13L50,11.48,44.76.39H39.93V1a3.49,3.49,0,0,1,1.12.2,1.51,1.51,0,0,1,.74.85l.1.25L39.2,12.16a12.62,12.62,0,0,1-1.09,2.93,1.86,1.86,0,0,1-1.35.73v.62h5v-.62a3.62,3.62,0,0,1-1.28-.26,1.21,1.21,0,0,1-.63-1.17,4.72,4.72,0,0,1,0-.64q.1-.52.39-1.59l2.39-8.6,6.23,13.28h.6L52.84,4.66a15.29,15.29,0,0,1,1-2.78A1.52,1.52,0,0,1,55,1.05l.34,0V.39H50.36Zm22.33,13.8a.66.66,0,0,1,0-.15c0-.05,0-.16.07-.34l.2-.83L75.91,2.73a2.43,2.43,0,0,1,.79-1.39A2.78,2.78,0,0,1,77.86,1V.39H70.71V1A4.45,4.45,0,0,1,72,1.2a.81.81,0,0,1,.47.83,2.73,2.73,0,0,1-.07.57c0,.22-.1.47-.17.74L71.07,7.5h-5.7l1.29-4.77a2.27,2.27,0,0,1,.73-1.33A4.36,4.36,0,0,1,69.08,1V.39H61.47V1a4.73,4.73,0,0,1,1.42.25c.22.11.33.36.33.77a2.93,2.93,0,0,1-.08.58c0,.24-.1.48-.17.73L60,14.1a2.73,2.73,0,0,1-.65,1.29,2.47,2.47,0,0,1-1.3.43v.62h7.15v-.62a5.13,5.13,0,0,1-1.42-.24c-.21-.1-.31-.34-.31-.72a3,3,0,0,1,0-.57c0-.16.1-.43.19-.8l1.35-4.94h5.7L69.27,14.1a2.21,2.21,0,0,1-.74,1.33,4.77,4.77,0,0,1-1.69.39v.62h7.63v-.62a4.72,4.72,0,0,1-1.25-.17A.82.82,0,0,1,72.69,14.81Zm13.38.25a10.28,10.28,0,0,1-3.72.61,1.86,1.86,0,0,1-1.08-.21.67.67,0,0,1-.26-.54,2.23,2.23,0,0,1,0-.32,3.38,3.38,0,0,1,.09-.41l1.58-5.86a5.51,5.51,0,0,1,2.75.47,2,2,0,0,1,.7,1.75c0,.11,0,.24,0,.41s0,.37-.07.59l.66.12,1.78-6.56L87.85,5a4.75,4.75,0,0,1-1.64,2.12,10.13,10.13,0,0,1-3.27.41l1.43-5.33a1.56,1.56,0,0,1,.45-.86,2.07,2.07,0,0,1,1.23-.23c1.86,0,3.1.41,3.71,1.23a4.32,4.32,0,0,1,.56,2.47L91,5,92,.39H79.06V1a4.75,4.75,0,0,1,1.43.25c.21.11.32.36.32.77a2.73,2.73,0,0,1-.07.57c0,.22-.11.47-.18.74l-3,10.77a2.4,2.4,0,0,1-.68,1.29,2.58,2.58,0,0,1-1.26.42v.62H89l1.41-4.66-.58-.11A7.22,7.22,0,0,1,86.07,15.06ZM114.32,2.23l-1.43,5.33a10.13,10.13,0,0,0,3.27-.41A4.75,4.75,0,0,0,117.8,5l.67.08-1.78,6.56-.66-.12c0-.22.06-.42.07-.59s0-.3,0-.41a2,2,0,0,0-.71-1.75,5.51,5.51,0,0,0-2.75-.47l-1.58,5.86a3.38,3.38,0,0,0-.09.41,2.23,2.23,0,0,0,0,.32.67.67,0,0,0,.26.54,1.86,1.86,0,0,0,1.08.21,10.28,10.28,0,0,0,3.72-.61,7.22,7.22,0,0,0,3.73-3.39l.58.11-1.41,4.66h-18L98.33,8.51h-.68l-1.42,5-.2.83,0,.2a1.77,1.77,0,0,0,0,.23c0,.43.1.7.31.8a4.51,4.51,0,0,0,1.43.26v.62H90.59v-.62a2.58,2.58,0,0,0,1.26-.42,2.4,2.4,0,0,0,.68-1.29l3-10.77.15-.57a4.09,4.09,0,0,0,.1-.79c0-.38-.11-.62-.32-.73A5.3,5.3,0,0,0,94,1V.39h6.6A10.58,10.58,0,0,1,104,.82a3,3,0,0,1,2.24,3.05,4,4,0,0,1-.38,1.6A4.06,4.06,0,0,1,104.62,7a5.32,5.32,0,0,1-1.45.8c-.33.11-.84.25-1.54.42.08.24.13.4.16.46l1.85,5.42a2.81,2.81,0,0,0,.8,1.38,2.42,2.42,0,0,0,1.23.32,2.64,2.64,0,0,0,1.22-.41,2.47,2.47,0,0,0,.68-1.29l2.94-10.77c.07-.27.13-.52.18-.74a2.73,2.73,0,0,0,.07-.57c0-.41-.11-.66-.32-.77A4.75,4.75,0,0,0,109,1V.39h12.93l-1,4.56-.64-.11a4.39,4.39,0,0,0-.57-2.47c-.61-.82-1.85-1.23-3.71-1.23a2.07,2.07,0,0,0-1.23.23A1.7,1.7,0,0,0,114.32,2.23ZM101.5,6.64a4.76,4.76,0,0,0,.77-1.31,4.68,4.68,0,0,0,.36-1.84,2.72,2.72,0,0,0-.5-1.67,2,2,0,0,0-1.7-.66.94.94,0,0,0-.71.22,1.81,1.81,0,0,0-.39.85L97.88,7.72a10.33,10.33,0,0,0,1.91-.16A3,3,0,0,0,101.5,6.64Z",opacity:1,strokeColor:"",fillColor:"#192760",width:121.306,height:16.899,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Accepted":t={iconName:"Accepted",pathdata:"M22.409294,0.00021190348 C22.64747,0.0056831966 22.875833,0.11701412 23.023336,0.32638185 23.631345,1.1873664 25.36437,2.8183636 27.4584,4.1123583 28.000408,4.4483535 28.015407,5.227338 27.477398,5.5713293 23.803344,7.9272954 12.881201,15.464245 9.4751583,23.800168 9.2091556,24.452168 8.3321453,24.542164 7.9521352,23.95016 6.0691143,21.014182 1.8990528,14.526234 0.095028103,11.832258 -0.13796928,11.485277 0.081027784,11.023275 0.49603404,10.97927 1.9670546,10.824272 4.8490969,10.421291,6.5811144,9.5293013 6.9811216,9.3233086 7.4691268,9.5782811 7.5601316,10.019287 7.847138,11.400286 8.4021459,13.83224 8.952148,14.781236 8.952148,14.781236 16.385246,3.2303471 21.985326,0.10638282 22.119951,0.031756414 22.266389,-0.003070501 22.409294,0.00021190348 z",opacity:1,strokeColor:"",fillColor:"#516c30",width:27.873,height:24.346,stampFillColor:"#e6eddf",stampStrokeColor:""};break;case"Rejected":t={iconName:"Rejected",pathdata:"M3.8779989,0 L11.294,7.4140023 18.710001,0 22.588001,3.8779911 15.172998,11.293032 22.588001,18.707033 18.710001,22.586 11.294,15.169985 3.8779989,22.586 0,18.707033 7.4150017,11.293032 0,3.8779911 z",opacity:1,strokeColor:"",fillColor:"#8a251a",width:22.588,height:22.586,stampFillColor:"#f6dedd",stampStrokeColor:""};break;case"Rejected_with_border":t={iconName:"Rejected_with_border",pathdata:"M3.8779989,0 L11.294,7.4140023 18.710001,0 22.588001,3.8779911 15.172998,11.293032 22.588001,18.707033 18.710001,22.586 11.294,15.169985 3.8779989,22.586 0,18.707033 7.4150017,11.293032 0,3.8779911 z",opacity:1,strokeColor:"",fillColor:"#192760",width:22.588,height:24.346,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"NotApproved":case"Not Approved":t={iconName:"Not Approved",pathdata:"M0,19.46a1.56,1.56,0,0,0,1.16-.9A19.84,19.84,0,0,0,2.1,15L4.42,2.84l-.09-.3a1.82,1.82,0,0,0-.64-1.06,2.41,2.41,0,0,0-1-.24V.48H6.88l4.49,13.64L13,5.78c.09-.52.17-1,.22-1.39a10.11,10.11,0,0,0,.13-1.34,1.83,1.83,0,0,0-.49-1.48,2.49,2.49,0,0,0-1.13-.33V.48H16v.76l-.29.06a1.42,1.42,0,0,0-1,1,23.7,23.7,0,0,0-.84,3.42L11,20.71h-.51L5.1,4.38,3,15c-.17.87-.28,1.53-.33,2a5.32,5.32,0,0,0,0,.79,1.69,1.69,0,0,0,.54,1.44,2.48,2.48,0,0,0,1.1.32v.76H0ZM17.73,4.53C19.54,1.51,21.55,0,23.79,0a4.4,4.4,0,0,1,3.66,1.92,8.52,8.52,0,0,1,1.43,5.19,17.56,17.56,0,0,1-2.53,9.07q-2.7,4.61-6.21,4.6a4.24,4.24,0,0,1-3.6-1.92,8.6,8.6,0,0,1-1.39-5.14A17.68,17.68,0,0,1,17.73,4.53ZM18.37,18c.33,1.19.93,1.78,1.8,1.78a2.83,2.83,0,0,0,2.22-1.29,16.41,16.41,0,0,0,2.06-4.93,35.53,35.53,0,0,0,1.06-4.83A28.26,28.26,0,0,0,25.9,4.6a5.86,5.86,0,0,0-.52-2.55A1.7,1.7,0,0,0,23.78,1Q21.2,1,19.45,7.53a33,33,0,0,0-1.33,8.26A8.15,8.15,0,0,0,18.37,18Zm11.08,1.48a2.34,2.34,0,0,0,1.3-.26,3,3,0,0,0,.85-1.85l3-15.85A3.54,3.54,0,0,0,32,2.56a8,8,0,0,0-1.82,3.16l-.53-.2.8-5H41.81l-.74,5.66-.54-.07c0-1.92-.41-3.24-1.13-3.94a2.6,2.6,0,0,0-1.74-.63L34.79,16.6l-.17,1a2.43,2.43,0,0,0,0,.33,2.26,2.26,0,0,0,0,.26c0,.5.11.82.33.95a3.94,3.94,0,0,0,1.39.3v.76H29.45Zm26.65.76H50.18v-.71a2.28,2.28,0,0,0,1.25-.41,1.64,1.64,0,0,0,.37-1.29c0-.22,0-.75-.11-1.58,0-.17-.08-.89-.2-2.15H47l-1.2,3c-.08.2-.15.42-.22.66a2.84,2.84,0,0,0-.09.69c0,.41.08.67.25.78a2.91,2.91,0,0,0,1.08.3v.71H42.79v-.71a2.44,2.44,0,0,0,.85-.53,5.59,5.59,0,0,0,.9-1.56L52.21.07h.53l2,16.88A5.46,5.46,0,0,0,55.2,19a1.36,1.36,0,0,0,.9.43Zm-4.76-7.31-.76-7.18-3,7.18Zm4.95,6.53a1.82,1.82,0,0,0,1-.5,3.56,3.56,0,0,0,.58-1.59L60.42,4.11c.06-.3.1-.6.15-.9a5.46,5.46,0,0,0,.06-.72c0-.52-.13-.86-.4-1a2.88,2.88,0,0,0-1.1-.23V.48h5.93a5,5,0,0,1,2.5.57c1.26.73,1.9,2.07,1.9,4a5.81,5.81,0,0,1-1.54,4.22,5.32,5.32,0,0,1-4,1.58l-.59,0-1.2-.11L61,16.6l-.17,1a2.72,2.72,0,0,0,0,.3,2.81,2.81,0,0,0,0,.29c0,.5.09.81.28.94a3.26,3.26,0,0,0,1.23.31v.76h-6Zm6-9.67.38.06H63a3,3,0,0,0,1.62-.36,2.87,2.87,0,0,0,1-1.18,7.28,7.28,0,0,0,.6-2,11.67,11.67,0,0,0,.22-2,4.4,4.4,0,0,0-.41-2,1.44,1.44,0,0,0-1.39-.79.71.71,0,0,0-.65.28,3.7,3.7,0,0,0-.32,1Zm5.61,9.69A1.86,1.86,0,0,0,69,18.94a3.54,3.54,0,0,0,.59-1.59L72.15,4.11q.09-.45.15-.9a5.73,5.73,0,0,0,.07-.72,1.1,1.1,0,0,0-.41-1,2.88,2.88,0,0,0-1.1-.23V.48h5.93a5,5,0,0,1,2.5.57c1.27.73,1.9,2.07,1.9,4a5.77,5.77,0,0,1-1.54,4.22,5.31,5.31,0,0,1-4,1.58l-.6,0-1.2-.11L72.74,16.6l-.17,1a2.72,2.72,0,0,0,0,.3c0,.1,0,.19,0,.29,0,.5.1.81.29.94a3.15,3.15,0,0,0,1.23.31v.76h-6.1Zm6.12-9.69.38.06h.33a3,3,0,0,0,1.62-.36,3,3,0,0,0,1-1.18,7.67,7.67,0,0,0,.59-2,11.67,11.67,0,0,0,.22-2,4.4,4.4,0,0,0-.41-2,1.43,1.43,0,0,0-1.38-.79.73.73,0,0,0-.66.28,3.7,3.7,0,0,0-.32,1Zm5.57,9.69a1.9,1.9,0,0,0,1.09-.52,3.56,3.56,0,0,0,.58-1.59L83.84,4.11c0-.27.09-.51.13-.71a7.08,7.08,0,0,0,.09-1c0-.47-.1-.77-.28-.9a3.53,3.53,0,0,0-1.22-.3V.48h5.68a6.57,6.57,0,0,1,3,.53q1.92,1,1.92,3.75a6.79,6.79,0,0,1-.32,2,5.23,5.23,0,0,1-1.08,1.9,4.56,4.56,0,0,1-1.25,1,11.62,11.62,0,0,1-1.33.52c.07.3.12.49.14.57l1.59,6.66a4.07,4.07,0,0,0,.69,1.7,1.72,1.72,0,0,0,1.13.41v.76H88.52l-2.23-9.76h-.58L84.49,16.6l-.17,1a1,1,0,0,0,0,.25,2.62,2.62,0,0,0,0,.28c0,.53.09.86.26,1a3.11,3.11,0,0,0,1.24.32v.76H79.63ZM87.55,9.3A2.59,2.59,0,0,0,89,8.17a7.24,7.24,0,0,0,.66-1.62A8.18,8.18,0,0,0,90,4.29a4.32,4.32,0,0,0-.43-2,1.5,1.5,0,0,0-1.45-.81.71.71,0,0,0-.62.26,2.78,2.78,0,0,0-.33,1.05L85.91,9.5A6.63,6.63,0,0,0,87.55,9.3Zm8.72-4.77Q99,0,102.32,0A4.37,4.37,0,0,1,106,1.92a8.46,8.46,0,0,1,1.44,5.19,17.58,17.58,0,0,1-2.54,9.07q-2.7,4.61-6.21,4.6a4.27,4.27,0,0,1-3.6-1.92,8.67,8.67,0,0,1-1.38-5.14A17.68,17.68,0,0,1,96.27,4.53ZM96.9,18c.33,1.19.93,1.78,1.8,1.78a2.83,2.83,0,0,0,2.22-1.29A16.63,16.63,0,0,0,103,13.54a37.1,37.1,0,0,0,1.06-4.83,29.49,29.49,0,0,0,.38-4.11,5.86,5.86,0,0,0-.51-2.55A1.71,1.71,0,0,0,102.31,1C100.6,1,99.15,3.17,98,7.53a33.42,33.42,0,0,0-1.33,8.26A8.57,8.57,0,0,0,96.9,18ZM114.35.48v.76a2.57,2.57,0,0,0-1.08.17,1.07,1.07,0,0,0-.5,1,2.53,2.53,0,0,0,0,.28,2.64,2.64,0,0,0,0,.28l1.07,11.76L117.77,6c.31-.71.59-1.41.84-2.11A5.25,5.25,0,0,0,119,2.19a.85.85,0,0,0-.38-.81,3.09,3.09,0,0,0-.95-.14V.48h4v.76a2.08,2.08,0,0,0-.73.45,5.35,5.35,0,0,0-.82,1.4l-7.79,17.69h-.66L110,5.74A22,22,0,0,0,109.46,2c-.16-.39-.58-.62-1.28-.71V.48Zm5.15,19a1.83,1.83,0,0,0,1.08-.52,3.42,3.42,0,0,0,.59-1.59l2.54-13.24c.06-.34.11-.64.15-.92a4.83,4.83,0,0,0,.06-.7c0-.5-.09-.81-.28-.94a3.14,3.14,0,0,0-1.22-.31V.48h11.12l-.87,5.6L132.11,6a7,7,0,0,0-.49-3c-.52-1-1.59-1.51-3.19-1.51-.55,0-.9.09-1.06.28A2.44,2.44,0,0,0,127,2.74L125.76,9.3a6.21,6.21,0,0,0,2.81-.51A6,6,0,0,0,130,6.18l.58.1L129,14.35l-.56-.14c0-.28,0-.52,0-.73s0-.37,0-.51a2.92,2.92,0,0,0-.61-2.15,3.55,3.55,0,0,0-2.37-.57l-1.36,7.2a4.79,4.79,0,0,0-.07.51,3.28,3.28,0,0,0,0,.39,1,1,0,0,0,.22.66,1.24,1.24,0,0,0,.93.26,6.43,6.43,0,0,0,3.21-.75,7.67,7.67,0,0,0,3.21-4.17l.5.13-1.22,5.74H119.5Zm12.79,0a1.87,1.87,0,0,0,1-.41,3.23,3.23,0,0,0,.71-1.71L136.5,4.11c.07-.38.13-.69.17-1a5.89,5.89,0,0,0,.05-.67c0-.5-.1-.81-.29-.94a3.32,3.32,0,0,0-1.22-.31V.48h6a5.35,5.35,0,0,1,4.63,2.22,10.11,10.11,0,0,1,1.58,6,13.3,13.3,0,0,1-2.34,7.84,8,8,0,0,1-6.86,3.7h-5.93ZM143.87,3.39a2.84,2.84,0,0,0-2.79-2,1.08,1.08,0,0,0-.91.31,1.93,1.93,0,0,0-.34.83L137,17.44a3.1,3.1,0,0,0-.06.39c0,.11,0,.21,0,.3a1.22,1.22,0,0,0,.24.84,1.26,1.26,0,0,0,.9.26q3.67,0,5.33-5.42a23.91,23.91,0,0,0,1-6.94A9.45,9.45,0,0,0,143.87,3.39Z",opacity:1,strokeColor:"",fillColor:"#8a251a",width:147.425,height:20.783,stampFillColor:"#f6dedd",stampStrokeColor:""};break;case"Draft":t={iconName:"Draft",pathdata:"M24.92,3Q22,.46,16.4.46h-11v.87a9.38,9.38,0,0,1,2.24.35q.54.23.54,1.08a3.24,3.24,0,0,1-.1.76c-.07.29-.17.65-.31,1.08L3.08,19.69a3.26,3.26,0,0,1-1.32,1.95A4.67,4.67,0,0,1,0,22.1V23H10.91q7.8,0,12.61-4.22a11.56,11.56,0,0,0,4.32-8.94A8.58,8.58,0,0,0,24.92,3ZM20.41,15.66a10.18,10.18,0,0,1-9.8,6.18A3.18,3.18,0,0,1,9,21.54a1,1,0,0,1-.46-.95,2.47,2.47,0,0,1,0-.35,3,3,0,0,1,.1-.44l5.24-17a1.91,1.91,0,0,1,.62-.95,2.81,2.81,0,0,1,1.66-.35c2.44,0,4.15.76,5.15,2.27a7.29,7.29,0,0,1,.94,4A17.63,17.63,0,0,1,20.41,15.66ZM49.75,9.74a5.84,5.84,0,0,0,2-2.16,5.1,5.1,0,0,0,.59-2.24c0-2.1-1.18-3.53-3.54-4.27A18.67,18.67,0,0,0,43.36.46H32.92v.87a8.79,8.79,0,0,1,2.24.35c.35.14.52.48.52,1a5.36,5.36,0,0,1-.17,1.11c-.06.23-.14.5-.23.8L30.61,19.7a3.26,3.26,0,0,1-1.08,1.81,4.44,4.44,0,0,1-2,.59V23H38.85V22.1a8.54,8.54,0,0,1-2.28-.36c-.32-.15-.49-.53-.49-1.13,0-.11,0-.21,0-.32a1.15,1.15,0,0,1,.06-.28l.31-1.16,2.25-7h1.07L43.89,23h7.64V22.1a4.27,4.27,0,0,1-2.07-.47,3.91,3.91,0,0,1-1.27-1.93l-2.92-7.6a4.67,4.67,0,0,1-.25-.65c1.1-.23,1.91-.42,2.43-.59A8.49,8.49,0,0,0,49.75,9.74ZM46,7.39a6.73,6.73,0,0,1-1.21,1.84,5,5,0,0,1-2.72,1.29,19.56,19.56,0,0,1-3,.23L41.38,3A2.54,2.54,0,0,1,42,1.85a1.76,1.76,0,0,1,1.14-.31,3.38,3.38,0,0,1,2.69.93,3.52,3.52,0,0,1,.79,2.34A5.94,5.94,0,0,1,46,7.39Zm27.9,11.85L70.29,0h-1L55.21,19.78a6.61,6.61,0,0,1-1.66,1.78,5.3,5.3,0,0,1-1.55.6V23h7.45v-.81a8,8,0,0,1-2-.34.85.85,0,0,1-.47-.89,2,2,0,0,1,.17-.79,5.32,5.32,0,0,1,.4-.75L59.8,16H68c.22,1.44.35,2.25.37,2.45a16,16,0,0,1,.2,1.81,1.51,1.51,0,0,1-.67,1.47,6.38,6.38,0,0,1-2.31.46V23H77.1v-.81a4.28,4.28,0,0,1-2.28-.55A4.47,4.47,0,0,1,73.93,19.24ZM60.7,14.64l5.62-8.19,1.4,8.19ZM84,.46h20.2l-1.61,6.39-1-.15a5.61,5.61,0,0,0-.88-3.43Q99.2,1.52,94.86,1.51a3.56,3.56,0,0,0-1.76.3A2.05,2.05,0,0,0,92.34,3L90.1,10.5A16.53,16.53,0,0,0,95,9.91c.77-.33,1.62-1.32,2.56-3l1.06.12-2.82,9.2-1-.17c0-.33.08-.61.1-.85s0-.43,0-.56a2.76,2.76,0,0,0-1-2.38c-.66-.49-2.07-.73-4.23-.73l-2.5,8.22a3.56,3.56,0,0,0-.09.39,1.55,1.55,0,0,0,0,.37,1.32,1.32,0,0,0,1,1.33,5.52,5.52,0,0,0,1.78.21V23H78.58V22.1a4.35,4.35,0,0,0,2-.61,3.33,3.33,0,0,0,1.06-1.8L86.32,4.6c.09-.31.16-.58.23-.81a5.05,5.05,0,0,0,.16-1.1c0-.53-.17-.87-.52-1A8.7,8.7,0,0,0,84,1.33Zm24.1,0h20.89l-1.37,6.46-1-.08c-.07-2.2-.76-3.69-2.09-4.49a6.61,6.61,0,0,0-3.2-.72L116,18.84,115.7,20a2.63,2.63,0,0,0-.07.38,1.51,1.51,0,0,0,0,.3c0,.57.2.94.61,1.08a11.19,11.19,0,0,0,2.56.34V23H106.2V22.1a6.49,6.49,0,0,0,2.4-.3,3.19,3.19,0,0,0,1.56-2.1l5.58-18.07a9.07,9.07,0,0,0-4.83,1.2,9.52,9.52,0,0,0-3.34,3.61l-1-.23Z",opacity:1,strokeColor:"",fillColor:"#192760",width:128.941,height:22.97,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Final":t={iconName:"Final",pathdata:"M24.94,6l-1.06-.13a4.37,4.37,0,0,0-.91-3q-1.51-1.54-6-1.54a4.28,4.28,0,0,0-1.83.26,1.8,1.8,0,0,0-.78,1.08L12,9.21a20.26,20.26,0,0,0,5.15-.52A6.49,6.49,0,0,0,19.8,6.1l1.1.1L18,14.27l-1.09-.15a6.34,6.34,0,0,0,.11-.74c0-.22,0-.38,0-.5a2.26,2.26,0,0,0-1-2.09c-.68-.42-2.15-.63-4.39-.63L9,17.37a3.09,3.09,0,0,0-.1.34,1.22,1.22,0,0,0,0,.32,1.18,1.18,0,0,0,1,1.17,7,7,0,0,0,1.86.18v.77H0v-.77a5.14,5.14,0,0,0,2.11-.53,3,3,0,0,0,1.1-1.58L8.06,4c.09-.27.17-.5.23-.7a3.74,3.74,0,0,0,.18-1,.83.83,0,0,0-.55-.89,10.94,10.94,0,0,0-2.33-.3V.4h21Zm8.54,12.11a1.49,1.49,0,0,1,0-.28,2.46,2.46,0,0,1,.07-.29l.3-1L38.76,3.29a2.93,2.93,0,0,1,1.09-1.6A5.42,5.42,0,0,1,42,1.17V.4H30.17v.77a10.52,10.52,0,0,1,2.34.31.88.88,0,0,1,.56.94,2.58,2.58,0,0,1-.11.67c-.07.26-.18.57-.32,1L27.79,17.28a2.94,2.94,0,0,1-1.12,1.59,5.28,5.28,0,0,1-2.09.51v.77H36.36v-.77A10.22,10.22,0,0,1,34,19.07.89.89,0,0,1,33.48,18.12ZM66.19,2.24a2.53,2.53,0,0,1,1.87-1l.56-.06V.4H60.5v.77a8,8,0,0,1,2.16.33,1.47,1.47,0,0,1,1,1.48,5.61,5.61,0,0,1-.25,1.34c-.11.4-.25.87-.43,1.38l-3.08,8.35L51.26.4h-8v.77a8.44,8.44,0,0,1,1.86.24,2.26,2.26,0,0,1,1.22,1.05l.17.31L42.11,14.88a13.74,13.74,0,0,1-1.8,3.61,3.36,3.36,0,0,1-2.22.89v.77h8.23v-.77a7.75,7.75,0,0,1-2.1-.31,1.45,1.45,0,0,1-1-1.44,3.56,3.56,0,0,1,.1-.79,16.15,16.15,0,0,1,.64-2L47.85,4.31,58.11,20.64h1l5.5-15A15.48,15.48,0,0,1,66.19,2.24Zm23,17.13v.78H78.08v-.71A7.47,7.47,0,0,0,80.49,19a1.25,1.25,0,0,0,.7-1.29A13.26,13.26,0,0,0,81,16.16c0-.18-.16-.89-.39-2.15H72.06l-2.3,3a3.7,3.7,0,0,0-.42.66,1.54,1.54,0,0,0-.18.69.74.74,0,0,0,.49.78,10.28,10.28,0,0,0,2.06.3v.71H63.94v-.71a6.43,6.43,0,0,0,1.63-.53,6.63,6.63,0,0,0,1.72-1.56L82,0h1l3.78,16.88A3.69,3.69,0,0,0,87.7,19,3.53,3.53,0,0,0,89.24,19.37Zm-8.93-6.53L78.86,5.65,73,12.84Zm32.8,1.44a11.51,11.51,0,0,1-5.23,3.88,21.36,21.36,0,0,1-7,1A4.88,4.88,0,0,1,99.22,19a.74.74,0,0,1-.58-.71,2.33,2.33,0,0,1,0-.48c0-.13.08-.28.13-.43L104,3.29a2.72,2.72,0,0,1,1.19-1.64,9.4,9.4,0,0,1,2.79-.48V.4H95.4v.77a10.42,10.42,0,0,1,2.34.31.88.88,0,0,1,.56.94,2.58,2.58,0,0,1-.11.67c-.07.25-.17.57-.31.94L93,17.27a2.92,2.92,0,0,1-1.12,1.6,4.59,4.59,0,0,1-1.71.47v.81h21.55l2.32-5.74Z",opacity:1,strokeColor:"",fillColor:"#516c30",width:114.058,height:20.639,stampFillColor:"#e6eddf",stampStrokeColor:""};break;case"Completed":t={iconName:"Completed",pathdata:"M16.37,0,15.08,6.9l-.79-.17c0-.41,0-.66,0-.73a2.73,2.73,0,0,0,0-.32,5.33,5.33,0,0,0-.94-3.47A3,3,0,0,0,11,1.07c-2,0-3.68,1.51-5.13,4.55a18.84,18.84,0,0,0-2,8.29q0,3.06,1.2,4.2a3.82,3.82,0,0,0,2.64,1.13,5.3,5.3,0,0,0,3.51-1.43,10.75,10.75,0,0,0,1.78-2.09l.77.65a9.32,9.32,0,0,1-3.12,3.35A7,7,0,0,1,7,20.81a6.66,6.66,0,0,1-5-2.08,7.72,7.72,0,0,1-2-5.57A14.57,14.57,0,0,1,3.05,3.92Q6.1,0,10.29,0A8.92,8.92,0,0,1,13,.43a9.09,9.09,0,0,0,1.65.43.72.72,0,0,0,.6-.23A2.55,2.55,0,0,0,15.6,0ZM32.83,7.11a15.24,15.24,0,0,1-3.11,9.07q-3.31,4.61-7.63,4.6a5.63,5.63,0,0,1-4.42-1.92A7.47,7.47,0,0,1,16,13.72a15.27,15.27,0,0,1,3.18-9.19Q22.46,0,26.57,0a5.82,5.82,0,0,1,4.5,1.92A7.35,7.35,0,0,1,32.83,7.11ZM29.16,4.6a4.92,4.92,0,0,0-.63-2.55,2.14,2.14,0,0,0-2-1.06Q23.4,1,21.24,7.53a27.45,27.45,0,0,0-1.63,8.26A6.68,6.68,0,0,0,19.92,18a2.24,2.24,0,0,0,2.2,1.78,3.71,3.71,0,0,0,2.73-1.29,15,15,0,0,0,2.54-4.93,30.56,30.56,0,0,0,1.3-4.83A23,23,0,0,0,29.16,4.6Zm21.2,13.62a3.83,3.83,0,0,1,.08-.75,8.6,8.6,0,0,1,.19-.88L53.75,3.31a3,3,0,0,1,.85-1.67,2.72,2.72,0,0,1,1.21-.4V.48H50.42L42.66,14.39,41.21.48h-5.8v.76a4.65,4.65,0,0,1,1.45.21c.26.11.38.37.38.78a4.57,4.57,0,0,1-.08.75c-.06.28-.13.61-.23,1L34.34,15a16.85,16.85,0,0,1-1.16,3.65,1.9,1.9,0,0,1-1.42.86v.76h5.3v-.76a3.22,3.22,0,0,1-1.32-.29A1.48,1.48,0,0,1,35,17.74a8.32,8.32,0,0,1,.17-1.42c.07-.37.17-.82.3-1.37L38.06,4.23l1.71,16.38h.71L50,3.76l-3.2,13.58A2.84,2.84,0,0,1,46,19a4.06,4.06,0,0,1-1.76.49v.76h7.93v-.76a4.79,4.79,0,0,1-1.49-.31Q50.36,19,50.36,18.22ZM67.69,9.29a7.39,7.39,0,0,1-4.89,1.58l-.73,0-1.48-.11L59.21,16.6l-.21,1a1,1,0,0,0,0,.3,2.83,2.83,0,0,0,0,.29c0,.5.12.81.35.94a4.74,4.74,0,0,0,1.51.31v.76H53.31v-.76a2.52,2.52,0,0,0,1.33-.52,3.18,3.18,0,0,0,.72-1.59L58.48,4.11q.1-.45.18-.9a4.48,4.48,0,0,0,.08-.72,1,1,0,0,0-.49-1,4.36,4.36,0,0,0-1.36-.23V.48h7.29a7.29,7.29,0,0,1,3.07.57,4,4,0,0,1,2.33,4A5.22,5.22,0,0,1,67.69,9.29Zm-1.8-5a3.65,3.65,0,0,0-.51-2,1.85,1.85,0,0,0-1.7-.79,1,1,0,0,0-.8.28,3.27,3.27,0,0,0-.4,1l-1.66,7,.47.06h.41a4.37,4.37,0,0,0,2-.36,3.14,3.14,0,0,0,1.2-1.18,6.51,6.51,0,0,0,.74-2A9.87,9.87,0,0,0,65.89,4.25Zm16.9,10.1a8.71,8.71,0,0,1-3.35,3.88,9.36,9.36,0,0,1-4.53,1,2.15,2.15,0,0,1-1-.21.75.75,0,0,1-.37-.71,3.18,3.18,0,0,1,0-.47c0-.14,0-.28.08-.44l3.3-14.08a2.94,2.94,0,0,1,.77-1.64,4.47,4.47,0,0,1,1.79-.48V.48h-8v.76a4.8,4.8,0,0,1,1.5.31c.23.13.35.44.35.94a4.36,4.36,0,0,1-.06.67c0,.26-.12.57-.21,1L69.9,17.34a3.18,3.18,0,0,1-.72,1.6,2.53,2.53,0,0,1-1.34.52v.76H81.91l1.49-5.74ZM85.73,1.24a4.59,4.59,0,0,1,1.5.31c.23.13.34.44.34.94a3.84,3.84,0,0,1-.07.7c0,.28-.11.58-.19.92L84.2,17.35a3.18,3.18,0,0,1-.72,1.59,2.27,2.27,0,0,1-1.06.47h-.07v.8H96.2l1.5-5.74-.62-.13a8.14,8.14,0,0,1-3.94,4.17,9.39,9.39,0,0,1-3.94.75A1.75,1.75,0,0,1,88.06,19a.87.87,0,0,1-.27-.66,3.28,3.28,0,0,1,0-.39,5,5,0,0,1,.09-.51l1.67-7.2a5.16,5.16,0,0,1,2.91.57A2.58,2.58,0,0,1,93.24,13c0,.14,0,.31,0,.51s0,.45-.07.73l.7.14,1.88-8.07L95,6.18a5.62,5.62,0,0,1-1.74,2.61,9.05,9.05,0,0,1-3.45.51l1.51-6.56a2.23,2.23,0,0,1,.47-1.06,2,2,0,0,1,1.3-.28c2,0,3.29.5,3.93,1.51a6.13,6.13,0,0,1,.6,3l.68.13L99.4.48H85.73ZM114,6.14l.92-5.66h-14l-1,5,.66.2a7.81,7.81,0,0,1,2.23-3.16,4.91,4.91,0,0,1,3.23-1.06l-3.73,15.85a2.84,2.84,0,0,1-1,1.85,3.48,3.48,0,0,1-1.6.26v.76h8.4v-.76a5.82,5.82,0,0,1-1.71-.3c-.27-.13-.41-.45-.41-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.21-1,3.53-15.1a3.65,3.65,0,0,1,2.14.63c.89.7,1.35,2,1.39,3.94Zm9.44,12.38a9.39,9.39,0,0,1-3.94.75,1.77,1.77,0,0,1-1.14-.26.87.87,0,0,1-.27-.66,3.28,3.28,0,0,1,0-.39,5,5,0,0,1,.09-.51l1.67-7.2a5.12,5.12,0,0,1,2.91.57,2.58,2.58,0,0,1,.75,2.15c0,.14,0,.31,0,.51s0,.45-.07.73l.7.14L126,6.28l-.7-.1a5.78,5.78,0,0,1-1.74,2.61,9.16,9.16,0,0,1-3.46.51l1.51-6.56a2.14,2.14,0,0,1,.48-1.06,2,2,0,0,1,1.3-.28c2,0,3.28.5,3.92,1.51a6,6,0,0,1,.6,3l.68.13,1.08-5.6H116v.76a4.67,4.67,0,0,1,1.51.31c.22.13.34.44.34.94a4,4,0,0,1-.08.7c0,.28-.11.58-.18.92l-3.12,13.24a3.18,3.18,0,0,1-.72,1.59,2.56,2.56,0,0,1-1.34.52v.76h14.06l1.5-5.74-.62-.13A8.14,8.14,0,0,1,123.39,18.52Zm23.32-9.84a11.62,11.62,0,0,1-2.89,7.84,10.6,10.6,0,0,1-8.42,3.7h-7.29v-.76a2.58,2.58,0,0,0,1.18-.41,2.94,2.94,0,0,0,.88-1.71l3.11-13.23c.09-.38.16-.69.21-1a4.49,4.49,0,0,0,.07-.67c0-.5-.12-.81-.36-.94a4.8,4.8,0,0,0-1.5-.31V.48h7.36a7.16,7.16,0,0,1,5.69,2.22A8.72,8.72,0,0,1,146.71,8.68ZM143,6.87a8,8,0,0,0-.64-3.48,3.52,3.52,0,0,0-3.44-2,1.52,1.52,0,0,0-1.11.31,1.75,1.75,0,0,0-.41.83l-3.5,14.9c0,.14,0,.27-.07.39s0,.21,0,.3a1.06,1.06,0,0,0,.3.84,1.75,1.75,0,0,0,1.1.26q4.53,0,6.55-5.42A19.84,19.84,0,0,0,143,6.87Z",opacity:1,strokeColor:"",fillColor:"#516c30",width:146.706,height:20.811,stampFillColor:"#e6eddf",stampStrokeColor:""};break;case"ForPublicRelease":case"For Public Release":t={iconName:"For Public Release",pathdata:"M10.33.48l-.65,5.6L9.27,6a9.74,9.74,0,0,0-.36-3A2.27,2.27,0,0,0,6.57,1.4a.85.85,0,0,0-.71.26,2.67,2.67,0,0,0-.3,1.08L4.65,9.28a3.45,3.45,0,0,0,2-.52,6.65,6.65,0,0,0,1-2.59l.43.1L7,14.34l-.42-.14c0-.29,0-.54,0-.75s0-.38,0-.49a4.17,4.17,0,0,0-.39-2.09,1.91,1.91,0,0,0-1.71-.64l-1,7.21c0,.13,0,.24,0,.35s0,.21,0,.31a1.45,1.45,0,0,0,.38,1.17,1.17,1.17,0,0,0,.72.19v.76H0v-.76a1.31,1.31,0,0,0,.82-.54,4.39,4.39,0,0,0,.42-1.58L3.13,4.11c0-.27.06-.51.09-.71,0-.41.07-.73.07-1a1.34,1.34,0,0,0-.21-.9,2.13,2.13,0,0,0-.91-.3V.48ZM20.5,7.11a22.43,22.43,0,0,1-1.88,9.07q-2,4.61-4.62,4.6a3,3,0,0,1-2.67-1.92,10.91,10.91,0,0,1-1-5.14,22.46,22.46,0,0,1,1.92-9.19Q14.23,0,16.71,0a3.11,3.11,0,0,1,2.72,1.92A10.72,10.72,0,0,1,20.5,7.11ZM18.28,4.6a7.7,7.7,0,0,0-.38-2.55c-.26-.7-.65-1-1.19-1-1.28,0-2.35,2.17-3.22,6.53a43.69,43.69,0,0,0-1,8.26,10.72,10.72,0,0,0,.19,2.2c.24,1.18.69,1.77,1.33,1.77s1.16-.43,1.65-1.29a19.35,19.35,0,0,0,1.54-4.93A48.7,48.7,0,0,0,18,8.71,38.21,38.21,0,0,0,18.28,4.6Zm11.59.16a8.73,8.73,0,0,1-.24,2,5.64,5.64,0,0,1-.8,1.9,3.49,3.49,0,0,1-.93,1,7.31,7.31,0,0,1-1,.52c0,.3.08.49.1.57l1.18,6.66a4.54,4.54,0,0,0,.52,1.7,1.1,1.1,0,0,0,.83.41v.76H26.46l-1.65-9.76h-.43l-.91,6.14-.13,1a2,2,0,0,0,0,.25,2.62,2.62,0,0,0,0,.28,1.57,1.57,0,0,0,.2,1,1.77,1.77,0,0,0,.92.32v.76H19.86v-.76a1.33,1.33,0,0,0,.81-.52,4.35,4.35,0,0,0,.43-1.59L23,4.11c0-.27.07-.51.09-.71a8.23,8.23,0,0,0,.07-1,1.3,1.3,0,0,0-.21-.9,2.08,2.08,0,0,0-.91-.3V.48h4.22A3.79,3.79,0,0,1,28.44,1C29.4,1.66,29.87,2.91,29.87,4.76Zm-2.31-.47a5.77,5.77,0,0,0-.32-2,1.12,1.12,0,0,0-1.09-.81.5.5,0,0,0-.46.26,3.87,3.87,0,0,0-.24,1.05L24.52,9.5a3.73,3.73,0,0,0,1.22-.2,2.1,2.1,0,0,0,1.1-1.13,8.41,8.41,0,0,0,.49-1.62A10.75,10.75,0,0,0,27.56,4.29Zm14.92.78a7.06,7.06,0,0,1-1.14,4.22,3.5,3.5,0,0,1-3,1.58l-.44,0-.89-.11-.84,5.86-.12,1a1.45,1.45,0,0,0,0,.3,2.81,2.81,0,0,0,0,.29,1.38,1.38,0,0,0,.21.94,1.93,1.93,0,0,0,.91.31v.76H32.65v-.76a1.28,1.28,0,0,0,.8-.52,4.3,4.3,0,0,0,.44-1.59L35.77,4.11c0-.3.08-.6.11-.9a5.21,5.21,0,0,0,0-.72,1.29,1.29,0,0,0-.3-1,1.82,1.82,0,0,0-.81-.23V.48h4.4a3,3,0,0,1,1.86.57C42,1.78,42.48,3.12,42.48,5.07Zm-2.23-.82a5.74,5.74,0,0,0-.3-2,1.07,1.07,0,0,0-1-.79.5.5,0,0,0-.49.28,5.11,5.11,0,0,0-.24,1l-1,7,.28.06h.25a1.79,1.79,0,0,0,1.2-.36,2.88,2.88,0,0,0,.73-1.18,10.56,10.56,0,0,0,.44-2A15.74,15.74,0,0,0,40.25,4.25Zm12.91-3V.48H50v.76a1.46,1.46,0,0,1,.82.32A2,2,0,0,1,51.24,3a15,15,0,0,1-.14,1.57q0-.17-.15,1.17l-.89,6.16a29.63,29.63,0,0,1-1,4.77c-.55,1.63-1.31,2.44-2.28,2.44a1.59,1.59,0,0,1-1.38-.77,4.16,4.16,0,0,1-.5-2.23q0-.63.15-2c.06-.5.15-1.14.27-1.93l1.26-8.84a4.13,4.13,0,0,1,.46-1.66,1.66,1.66,0,0,1,1-.46V.48H43.34v.76a2,2,0,0,1,.9.3,1.3,1.3,0,0,1,.21.9,7.27,7.27,0,0,1,0,.75c0,.29-.07.59-.11.92l-1,7.24c-.16,1.14-.27,1.93-.32,2.38a19.16,19.16,0,0,0-.12,2,6.13,6.13,0,0,0,1,3.71,2.93,2.93,0,0,0,2.43,1.33c1.39,0,2.45-.9,3.17-2.69a29.58,29.58,0,0,0,1.23-5.61l1-6.74A24.45,24.45,0,0,1,52.3,2.1,1.22,1.22,0,0,1,53.16,1.24Zm7.14,9.82a5.87,5.87,0,0,1,.68,3,8.55,8.55,0,0,1-1,4.27,3.68,3.68,0,0,1-3.48,1.84H51.82v-.76a1.3,1.3,0,0,0,.72-.4,3.94,3.94,0,0,0,.52-1.71L55,4.1c0-.39.09-.72.12-1s0-.46,0-.6c0-.53-.07-.86-.23-1A1.64,1.64,0,0,0,54,1.24V.48h4.17a3.4,3.4,0,0,1,2.67,1,4.91,4.91,0,0,1,1,3.38,5.33,5.33,0,0,1-1.17,3.61,4.8,4.8,0,0,1-1.68,1.22A4.84,4.84,0,0,1,60.3,11.06Zm-1.66,2.45a3.81,3.81,0,0,0-.73-2.74,2.63,2.63,0,0,0-1.58-.52l-1,7.2a4,4,0,0,0-.05.4c0,.15,0,.32,0,.51a.9.9,0,0,0,.33.82,1.13,1.13,0,0,0,.59.12c1,0,1.67-.87,2.1-2.59A13.54,13.54,0,0,0,58.64,13.51Zm.12-5.29A5.92,5.92,0,0,0,59.4,6.1a12.74,12.74,0,0,0,.13-1.74,6.54,6.54,0,0,0-.29-2.11,1.11,1.11,0,0,0-1.13-.81.49.49,0,0,0-.49.32,3.52,3.52,0,0,0-.23,1l-.94,6.62A7.45,7.45,0,0,0,58,9,1.8,1.8,0,0,0,58.76,8.22Zm11.71,6.14a8.78,8.78,0,0,1-2,3.87,4,4,0,0,1-2.74,1,.89.89,0,0,1-.63-.21.93.93,0,0,1-.22-.7,3.4,3.4,0,0,1,0-.48c0-.14,0-.28,0-.44l2-14.08a3.8,3.8,0,0,1,.47-1.64,1.94,1.94,0,0,1,1.08-.48V.48H63.6v.76a2,2,0,0,1,.91.31,1.36,1.36,0,0,1,.22.94c0,.2,0,.42,0,.67s-.07.57-.13,1L62.68,17.34a4.31,4.31,0,0,1-.44,1.6,1.28,1.28,0,0,1-.8.52v.76h8.5l.9-5.74ZM76.89.48H72.32v.76a1.92,1.92,0,0,1,.9.31c.15.13.22.44.22.94a5.56,5.56,0,0,1,0,.67c0,.26-.07.57-.12,1L71.39,17.35A4.35,4.35,0,0,1,71,18.94a1.33,1.33,0,0,1-.81.52v.76h4.57v-.76a1.81,1.81,0,0,1-.91-.32,1.39,1.39,0,0,1-.21-.94c0-.09,0-.18,0-.28l0-.3.12-1L75.65,3.36a4.43,4.43,0,0,1,.43-1.6,1.3,1.3,0,0,1,.81-.52Zm8.46.15A.38.38,0,0,1,85,.87a4.12,4.12,0,0,1-1-.44A3.51,3.51,0,0,0,82.37,0Q79.84,0,78,3.92a21.42,21.42,0,0,0-1.84,9.24,11.15,11.15,0,0,0,1.2,5.57,3.51,3.51,0,0,0,3.05,2.08,3.15,3.15,0,0,0,2.21-1.09,8.92,8.92,0,0,0,1.89-3.35L84,15.72A11.08,11.08,0,0,1,83,17.81a2.71,2.71,0,0,1-2.12,1.43,2,2,0,0,1-1.59-1.13,8.33,8.33,0,0,1-.74-4.2A29.46,29.46,0,0,1,79.7,5.62Q81,1.08,82.8,1.07c.59,0,1.07.38,1.45,1.14a8,8,0,0,1,.57,3.47,2.73,2.73,0,0,1,0,.32c0,.08,0,.32,0,.73l.48.17L86.05,0h-.47A2.93,2.93,0,0,1,85.35.63Zm21.41,13.73.37.12-.9,5.74H94.72l-1.66-9.76h-.43l-.91,6.14-.13,1c0,.08,0,.16,0,.25s0,.19,0,.28a1.57,1.57,0,0,0,.2,1,1.81,1.81,0,0,0,.92.32v.76H88.11v-.76a1.3,1.3,0,0,0,.81-.52,4.35,4.35,0,0,0,.43-1.59L91.24,4.11c0-.27.07-.51.09-.71a8.23,8.23,0,0,0,.07-1,1.3,1.3,0,0,0-.21-.9,2.08,2.08,0,0,0-.91-.3V.48h4.23A3.81,3.81,0,0,1,96.7,1c1,.65,1.43,1.9,1.43,3.75a8.73,8.73,0,0,1-.24,2,5.66,5.66,0,0,1-.81,1.9,3.49,3.49,0,0,1-.93,1,6.73,6.73,0,0,1-1,.52c0,.3.09.49.1.57l1.18,6.66a4.74,4.74,0,0,0,.52,1.7,1,1,0,0,0,.78.39,1.23,1.23,0,0,0,.78-.5A4.3,4.3,0,0,0,99,17.35l1.88-13.24c.05-.34.09-.64.12-.92a6.28,6.28,0,0,0,0-.7,1.45,1.45,0,0,0-.2-.94,2,2,0,0,0-.91-.31V.48h8.26l-.65,5.6L107.1,6a9.57,9.57,0,0,0-.36-3,2.3,2.3,0,0,0-2.38-1.51c-.41,0-.67.09-.78.28a2.87,2.87,0,0,0-.29,1.06l-.91,6.56a3.57,3.57,0,0,0,2.08-.51,6.59,6.59,0,0,0,1.06-2.61l.42.1-1.14,8.08-.42-.15c0-.28,0-.52.05-.73s0-.37,0-.51a3.6,3.6,0,0,0-.46-2.15,2.14,2.14,0,0,0-1.75-.57l-1,7.2a4.7,4.7,0,0,0-.06.51c0,.16,0,.29,0,.39a1.12,1.12,0,0,0,.17.66.77.77,0,0,0,.69.26,3.77,3.77,0,0,0,2.37-.75A7.71,7.71,0,0,0,106.76,14.36ZM95.09,8.17a7.75,7.75,0,0,0,.49-1.62,10.75,10.75,0,0,0,.23-2.26,5.77,5.77,0,0,0-.32-2,1.11,1.11,0,0,0-1.08-.81.48.48,0,0,0-.46.26,3.44,3.44,0,0,0-.25,1.05L92.78,9.5A3.78,3.78,0,0,0,94,9.3,2.08,2.08,0,0,0,95.09,8.17Zm21.32,6.19a8.67,8.67,0,0,1-2,3.87,4,4,0,0,1-2.73,1,.89.89,0,0,1-.63-.21.93.93,0,0,1-.23-.7c0-.19,0-.35,0-.48s0-.28,0-.44l2-14.08a3.84,3.84,0,0,1,.46-1.64,2,2,0,0,1,1.08-.48V.48h-4.86v.76a2,2,0,0,1,.91.31,1.38,1.38,0,0,1,.21.94,5.56,5.56,0,0,1,0,.67c0,.26-.07.57-.12,1l-1.89,13.23a4.16,4.16,0,0,1-.43,1.6,1.27,1.27,0,0,1-.81.52v.76h8.51l.9-5.74Zm8.64,0a7.71,7.71,0,0,1-2.38,4.16,3.82,3.82,0,0,1-2.38.75.77.77,0,0,1-.69-.26,1.2,1.2,0,0,1-.17-.66c0-.1,0-.23,0-.39a4.7,4.7,0,0,1,.06-.51l1-7.2a2.17,2.17,0,0,1,1.76.57,3.69,3.69,0,0,1,.45,2.15c0,.14,0,.31,0,.51s0,.45,0,.73l.42.15,1.13-8.08-.42-.1a6.79,6.79,0,0,1-1,2.61,3.63,3.63,0,0,1-2.09.51l.91-6.56a2.87,2.87,0,0,1,.29-1.06c.12-.19.38-.28.78-.28A2.3,2.3,0,0,1,125,2.91a9.57,9.57,0,0,1,.36,3l.41.13.65-5.6h-8.26v.76a1.93,1.93,0,0,1,.91.31,1.45,1.45,0,0,1,.2.94,6.28,6.28,0,0,1,0,.7c0,.28-.07.58-.11.92l-1.89,13.24a4.35,4.35,0,0,1-.43,1.59,1.33,1.33,0,0,1-.81.52v.76h8.5l.91-5.74Zm10.29,5.15v.71h-4.65v-.71a1.44,1.44,0,0,0,.93-.41,2.08,2.08,0,0,0,.27-1.29c0-.22,0-.75-.08-1.58,0-.17-.06-.89-.15-2.15h-3.31l-.89,3a5.32,5.32,0,0,0-.16.66,3.4,3.4,0,0,0-.08.69,1.06,1.06,0,0,0,.2.78,1.68,1.68,0,0,0,.79.3v.71h-3v-.71a1.8,1.8,0,0,0,.63-.53,6.45,6.45,0,0,0,.67-1.56L132.19.07h.4L134.06,17a7.15,7.15,0,0,0,.36,2.08A1.13,1.13,0,0,0,135.34,19.51Zm-3.79-6.6L131,5.73l-2.27,7.18Zm9.6-4-1.32-2.09a4.57,4.57,0,0,1-.47-.94,5.12,5.12,0,0,1-.28-1.78,5.57,5.57,0,0,1,.27-1.77c.27-.83.7-1.24,1.29-1.24s1.21.51,1.57,1.54A8.78,8.78,0,0,1,142.65,5l.06,1,.39.1.63-5.91h-.46a2.09,2.09,0,0,1-.25.54.46.46,0,0,1-.41.21.57.57,0,0,1-.24-.05,1.23,1.23,0,0,1-.26-.12l-.39-.24a2.34,2.34,0,0,0-.5-.25,2.41,2.41,0,0,0-.85-.16,2.55,2.55,0,0,0-2.31,1.67,9.11,9.11,0,0,0-.83,4.05,10.47,10.47,0,0,0,1.88,5.5A9.21,9.21,0,0,1,141,16a6.49,6.49,0,0,1-.5,2.63,1.59,1.59,0,0,1-1.43,1.14,1.42,1.42,0,0,1-1-.4,3.55,3.55,0,0,1-.78-1.16,7.09,7.09,0,0,1-.52-1.92c-.05-.43-.1-1.12-.13-2.06l-.44-.06-.55,6.62h.46a4.11,4.11,0,0,1,.25-.82.36.36,0,0,1,.36-.23.47.47,0,0,1,.17,0,2.38,2.38,0,0,1,.27.18l.39.27a3.52,3.52,0,0,0,.84.43,2.48,2.48,0,0,0,.84.15,2.91,2.91,0,0,0,2.63-1.88,9.24,9.24,0,0,0,1-4.21,9.85,9.85,0,0,0-.49-3.24A12.1,12.1,0,0,0,141.15,8.92Zm7.75-7.24c.12-.19.38-.28.78-.28a2.3,2.3,0,0,1,2.38,1.51,9.57,9.57,0,0,1,.36,3l.41.13.65-5.6h-8.26v.76a1.93,1.93,0,0,1,.91.31c.14.13.2.44.2.94a6.28,6.28,0,0,1,0,.7c0,.28-.07.58-.11.92l-1.89,13.24a4.35,4.35,0,0,1-.43,1.59,1.33,1.33,0,0,1-.81.52v.76h8.5l.91-5.74-.38-.12a7.71,7.71,0,0,1-2.38,4.16,3.82,3.82,0,0,1-2.38.75.77.77,0,0,1-.69-.26,1.2,1.2,0,0,1-.17-.66c0-.1,0-.23,0-.39a4.7,4.7,0,0,1,.06-.51l1-7.2a2.17,2.17,0,0,1,1.76.57,3.69,3.69,0,0,1,.45,2.15c0,.14,0,.31,0,.51s0,.45,0,.73l.42.15,1.14-8.08-.43-.1a6.79,6.79,0,0,1-1.05,2.61,3.63,3.63,0,0,1-2.09.51l.91-6.56A2.87,2.87,0,0,1,148.9,1.68Z",opacity:1,strokeColor:"",fillColor:"#192760",width:153.485,height:20.812,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"NotForPublicRelease":case"Not For Public Release":t={iconName:"Not For Public Release",pathdata:"M9,2.35q-.21.9-.51,3.48L6.69,21.05H6.38L3.11,4.45,1.85,15.19c-.1.89-.17,1.56-.2,2s0,.55,0,.81A2.39,2.39,0,0,0,2,19.45a1.09,1.09,0,0,0,.67.33v.77H0v-.77a1.22,1.22,0,0,0,.71-.91,33.91,33.91,0,0,0,.57-3.68L2.7,2.88l-.06-.3a2.09,2.09,0,0,0-.39-1.07,1,1,0,0,0-.59-.25V.48H4.2L6.93,14.36l1-8.49c.06-.53.11-1,.14-1.4.06-.63.08-1.08.08-1.37a2.67,2.67,0,0,0-.3-1.5,1.07,1.07,0,0,0-.69-.34V.48H9.73v.78l-.18.06C9.29,1.41,9.09,1.75,9,2.35ZM16.74,2a13.19,13.19,0,0,1,.87,5.28,27.45,27.45,0,0,1-1.54,9.22q-1.65,4.66-3.79,4.67-1.35,0-2.19-1.95a13.31,13.31,0,0,1-.85-5.23A27.59,27.59,0,0,1,10.82,4.6C11.91,1.53,13.15,0,14.51,0,15.41,0,16.16.65,16.74,2Zm-.95,2.73a9.33,9.33,0,0,0-.31-2.59c-.21-.72-.54-1.08-1-1.08-1.05,0-1.92,2.21-2.64,6.64a54.69,54.69,0,0,0-.81,8.4,14.21,14.21,0,0,0,.15,2.23c.2,1.2.57,1.8,1.1,1.8s.95-.43,1.35-1.31a22.84,22.84,0,0,0,1.26-5c.28-1.55.49-3.19.65-4.91S15.79,5.74,15.79,4.68Zm2.3.93.32.21A10.7,10.7,0,0,1,19.52,2.6a1.87,1.87,0,0,1,1.6-1.08L19.27,17.63a4,4,0,0,1-.52,1.88,1,1,0,0,1-.79.27v.77h4.17v-.77a1.72,1.72,0,0,1-.85-.3,1.56,1.56,0,0,1-.2-1,2.44,2.44,0,0,1,0-.27c0-.08,0-.2,0-.33l.11-1L23,1.52A1.31,1.31,0,0,1,24,2.17a8.49,8.49,0,0,1,.69,4l.33.07L25.5.48H18.57ZM28.75.48v.78a1.39,1.39,0,0,1,.74.31,1.44,1.44,0,0,1,.18.9q0,.36-.06,1c0,.2-.05.44-.07.71L28,17.62a5.34,5.34,0,0,1-.35,1.61,1.05,1.05,0,0,1-.67.55v.77H30.7v-.77a.82.82,0,0,1-.6-.2,1.69,1.69,0,0,1-.31-1.18c0-.11,0-.22,0-.32l0-.35.83-7.33a1.42,1.42,0,0,1,1.4.64,5,5,0,0,1,.33,2.13c0,.12,0,.28,0,.5s0,.47,0,.76l.34.15.94-8.21-.35-.1a8.12,8.12,0,0,1-.85,2.64,2.42,2.42,0,0,1-1.64.52l.74-6.65a3.34,3.34,0,0,1,.25-1.1.64.64,0,0,1,.59-.26A1.91,1.91,0,0,1,34.28,3a11.32,11.32,0,0,1,.29,3.06l.34.13.54-5.7Zm15,6.75a27.46,27.46,0,0,1-1.55,9.22q-1.65,4.66-3.79,4.67-1.35,0-2.19-1.95a13.49,13.49,0,0,1-.85-5.23A27.59,27.59,0,0,1,37,4.6Q38.65,0,40.69,0c.91,0,1.65.65,2.23,2A13.17,13.17,0,0,1,43.8,7.23ZM42,4.68a9.3,9.3,0,0,0-.32-2.59c-.21-.72-.53-1.08-1-1.08Q39.12,1,38,7.65a54.69,54.69,0,0,0-.81,8.4,13,13,0,0,0,.16,2.23c.2,1.2.56,1.8,1.09,1.8s1-.43,1.35-1.31a23.28,23.28,0,0,0,1.27-5c.27-1.55.49-3.19.64-4.91S42,5.74,42,4.68ZM50.32,1c.78.66,1.17,1.93,1.17,3.8a11,11,0,0,1-.19,2,7.2,7.2,0,0,1-.66,1.93,3.45,3.45,0,0,1-.77,1,5.58,5.58,0,0,1-.8.52c0,.31.07.51.08.58l1,6.78a5.63,5.63,0,0,0,.42,1.72.85.85,0,0,0,.69.42v.77H48.69l-1.36-9.92H47l-.75,6.25-.1,1c0,.08,0,.16,0,.26v.28a1.94,1.94,0,0,0,.16,1,1.39,1.39,0,0,0,.75.32v.77H43.27v-.77a1.07,1.07,0,0,0,.66-.53,4.83,4.83,0,0,0,.36-1.61L45.84,4.18c0-.28.06-.52.08-.72,0-.42,0-.75,0-1a1.48,1.48,0,0,0-.17-.91,1.39,1.39,0,0,0-.74-.31V.48h3.46A2.67,2.67,0,0,1,50.32,1Zm-.73,3.34a7.2,7.2,0,0,0-.26-2.09c-.18-.55-.47-.83-.89-.83a.4.4,0,0,0-.38.27,4.46,4.46,0,0,0-.2,1.06L47.1,9.65a2.39,2.39,0,0,0,1-.2A2,2,0,0,0,49,8.31a10,10,0,0,0,.4-1.65A12.71,12.71,0,0,0,49.59,4.37Zm11.1-3.3c.77.74,1.16,2.1,1.16,4.09a8.51,8.51,0,0,1-.94,4.28A2.78,2.78,0,0,1,58.48,11h-.36l-.73-.12-.69,6-.11,1c0,.1,0,.2,0,.3s0,.2,0,.3a1.7,1.7,0,0,0,.17.95,1.47,1.47,0,0,0,.75.32v.77H53.77v-.77a1.07,1.07,0,0,0,.66-.53,4.83,4.83,0,0,0,.36-1.61L56.34,4.17l.09-.9c0-.31,0-.55,0-.74a1.58,1.58,0,0,0-.25-1,1.33,1.33,0,0,0-.67-.23V.48h3.62A2.11,2.11,0,0,1,60.69,1.07ZM60,4.32a7,7,0,0,0-.25-2.06c-.17-.53-.45-.8-.84-.8a.4.4,0,0,0-.4.29,6.14,6.14,0,0,0-.2,1L57.5,9.93l.23.06h.21a1.3,1.3,0,0,0,1-.36,3.17,3.17,0,0,0,.6-1.2,12.69,12.69,0,0,0,.36-2A19.64,19.64,0,0,0,60,4.32Zm10.6-3.06V.48H68v.78a1.17,1.17,0,0,1,.68.32A2.43,2.43,0,0,1,69,3.05c0,.32,0,.85-.11,1.6,0-.12,0,.27-.12,1.18l-.73,6.26a36.28,36.28,0,0,1-.8,4.86c-.45,1.65-1.07,2.47-1.87,2.47a1.27,1.27,0,0,1-1.13-.78,5.05,5.05,0,0,1-.41-2.27c0-.43,0-1.1.13-2,.05-.51.12-1.17.21-2l1-9a4.69,4.69,0,0,1,.38-1.69,1.24,1.24,0,0,1,.8-.47V.48H62.55v.78a1.39,1.39,0,0,1,.74.31,1.56,1.56,0,0,1,.17.91c0,.21,0,.47,0,.76s-.06.6-.1.94l-.85,7.36c-.14,1.15-.23,2-.27,2.42-.06.76-.1,1.44-.1,2a7.4,7.4,0,0,0,.81,3.78,2.35,2.35,0,0,0,2,1.35c1.14,0,2-.91,2.6-2.74a35.69,35.69,0,0,0,1-5.7l.79-6.85a30.83,30.83,0,0,1,.58-3.7A1.15,1.15,0,0,1,70.61,1.26Zm5.86,10a7.16,7.16,0,0,1,.56,3.1,10.31,10.31,0,0,1-.86,4.34,2.93,2.93,0,0,1-2.86,1.87h-3.8v-.77a1.07,1.07,0,0,0,.59-.41,4.64,4.64,0,0,0,.43-1.73L72.08,4.17c0-.4.08-.73.1-1s0-.46,0-.61a1.83,1.83,0,0,0-.19-1,1.22,1.22,0,0,0-.73-.28V.48h3.43a2.58,2.58,0,0,1,2.19,1.06A5.92,5.92,0,0,1,77.69,5a6.3,6.3,0,0,1-1,3.67,4.18,4.18,0,0,1-1.39,1.24A4.36,4.36,0,0,1,76.47,11.24Zm-1.36,2.49a4.59,4.59,0,0,0-.6-2.79,2,2,0,0,0-1.3-.52l-.84,7.32c0,.12,0,.25,0,.4s0,.33,0,.52a1.06,1.06,0,0,0,.27.84.77.77,0,0,0,.48.11c.8,0,1.38-.87,1.73-2.63A17.3,17.3,0,0,0,75.11,13.73Zm.1-5.38a7.33,7.33,0,0,0,.52-2.15,15,15,0,0,0,.11-1.77,7.89,7.89,0,0,0-.24-2.14c-.16-.55-.46-.83-.93-.83a.42.42,0,0,0-.4.33,4.42,4.42,0,0,0-.19,1l-.77,6.73a5.23,5.23,0,0,0,1.27-.36A1.77,1.77,0,0,0,75.21,8.35Zm9.61,6.24a9.73,9.73,0,0,1-1.66,3.94,2.93,2.93,0,0,1-2.25,1,.64.64,0,0,1-.51-.21,1,1,0,0,1-.19-.71c0-.19,0-.35,0-.49s0-.29,0-.44L81.91,3.41a4.53,4.53,0,0,1,.38-1.66,1.47,1.47,0,0,1,.88-.49V.48h-4v.78a1.39,1.39,0,0,1,.75.32,1.59,1.59,0,0,1,.18.95c0,.2,0,.43,0,.68s0,.58-.1,1L78.42,17.62a5.28,5.28,0,0,1-.35,1.63,1.12,1.12,0,0,1-.67.53v.77h7l.73-5.83ZM90.09,1.26V.48H86.34v.78a1.38,1.38,0,0,1,.74.32,1.59,1.59,0,0,1,.18.95q0,.3,0,.69c0,.25-.06.57-.11.95L85.58,17.64a5.41,5.41,0,0,1-.36,1.61,1.07,1.07,0,0,1-.66.53v.77h3.75v-.77a1.47,1.47,0,0,1-.75-.32,1.78,1.78,0,0,1-.17-1c0-.08,0-.18,0-.28s0-.2,0-.3l.1-1L89.07,3.41a5.68,5.68,0,0,1,.35-1.62A1.1,1.1,0,0,1,90.09,1.26Zm7-.62a.33.33,0,0,1-.3.24,3.1,3.1,0,0,1-.82-.44A2.5,2.5,0,0,0,94.59,0Q92.51,0,91,4a26.57,26.57,0,0,0-1.51,9.39,13.57,13.57,0,0,0,1,5.67c.66,1.41,1.49,2.11,2.5,2.11A2.46,2.46,0,0,0,94.79,20a9.66,9.66,0,0,0,1.55-3.4L96,16a12.68,12.68,0,0,1-.89,2.13c-.54,1-1.12,1.45-1.74,1.45-.47,0-.91-.39-1.31-1.15a10.33,10.33,0,0,1-.6-4.27,36.59,36.59,0,0,1,1-8.43c.72-3.08,1.57-4.63,2.54-4.63.48,0,.88.39,1.19,1.16a10,10,0,0,1,.47,3.53V6.1c0,.07,0,.32,0,.74L97,7l.64-7h-.38A4.28,4.28,0,0,1,97,.64Zm17.57,14,.31.13-.75,5.83h-9.45l-1.35-9.92H103l-.74,6.25-.11,1c0,.08,0,.16,0,.26v.28a1.94,1.94,0,0,0,.16,1,1.39,1.39,0,0,0,.75.32v.77H99.3v-.77a1.12,1.12,0,0,0,.67-.53,5.18,5.18,0,0,0,.35-1.61l1.55-13.46c0-.28.06-.52.08-.72,0-.42,0-.75,0-1a1.48,1.48,0,0,0-.17-.91,1.39,1.39,0,0,0-.74-.31V.48h3.46a2.64,2.64,0,0,1,1.8.55c.78.66,1.17,1.93,1.17,3.8a11,11,0,0,1-.19,2,6.57,6.57,0,0,1-.66,1.93,3.61,3.61,0,0,1-.76,1,6.48,6.48,0,0,1-.81.52c0,.31.07.51.08.58l1,6.78a5.63,5.63,0,0,0,.42,1.72.84.84,0,0,0,.65.4,1.06,1.06,0,0,0,.64-.51,5.41,5.41,0,0,0,.36-1.61l1.54-13.47c0-.34.07-.65.1-.92s0-.52,0-.72a1.61,1.61,0,0,0-.17-.95,1.31,1.31,0,0,0-.74-.32V.48h6.78l-.53,5.7-.34-.13a11.8,11.8,0,0,0-.3-3.09,1.92,1.92,0,0,0-2-1.54c-.33,0-.55.1-.64.29a3.46,3.46,0,0,0-.24,1.07L111,9.45a2.6,2.6,0,0,0,1.72-.51,7.79,7.79,0,0,0,.86-2.66l.35.11-.93,8.2-.35-.15c0-.28,0-.53,0-.74v-.52a4.42,4.42,0,0,0-.37-2.18,1.56,1.56,0,0,0-1.44-.58l-.83,7.32c0,.18,0,.35,0,.51s0,.3,0,.4a1.45,1.45,0,0,0,.13.67c.09.18.28.26.57.26a2.72,2.72,0,0,0,2-.76A8.33,8.33,0,0,0,114.61,14.59ZM105,8.31a9.81,9.81,0,0,0,.41-1.65,13.72,13.72,0,0,0,.18-2.29,6.87,6.87,0,0,0-.26-2.09c-.17-.55-.47-.83-.89-.83a.4.4,0,0,0-.38.27,5.05,5.05,0,0,0-.2,1.06l-.76,6.87a2.39,2.39,0,0,0,1-.2A2,2,0,0,0,105,8.31Zm17.51,6.28a9.86,9.86,0,0,1-1.67,3.94,2.93,2.93,0,0,1-2.25,1,.64.64,0,0,1-.51-.21,1.1,1.1,0,0,1-.19-.71c0-.19,0-.35,0-.49s0-.29,0-.44l1.64-14.32A4.53,4.53,0,0,1,120,1.75a1.47,1.47,0,0,1,.89-.49V.48h-4v.78a1.39,1.39,0,0,1,.75.32,1.59,1.59,0,0,1,.18.95c0,.2,0,.43,0,.68s0,.58-.1,1l-1.55,13.45a5.28,5.28,0,0,1-.35,1.63,1.1,1.1,0,0,1-.66.53v.77h7l.74-5.83Zm7.09,0a8.33,8.33,0,0,1-2,4.23,2.73,2.73,0,0,1-2,.76c-.29,0-.48-.08-.57-.26a1.45,1.45,0,0,1-.13-.67c0-.1,0-.23,0-.4s0-.33,0-.51l.83-7.32a1.58,1.58,0,0,1,1.44.58,4.42,4.42,0,0,1,.37,2.18c0,.14,0,.31,0,.52s0,.46,0,.74l.34.15.94-8.2-.35-.11a7.71,7.71,0,0,1-.87,2.66,2.56,2.56,0,0,1-1.71.51l.75-6.67A3.46,3.46,0,0,1,127,1.71c.09-.19.31-.29.64-.29a1.92,1.92,0,0,1,2,1.54,11.8,11.8,0,0,1,.3,3.09l.33.13.54-5.7H124v.78a1.31,1.31,0,0,1,.75.32,1.7,1.7,0,0,1,.17.95,6.75,6.75,0,0,1,0,.72c0,.27-.05.58-.09.92l-1.55,13.47a5.18,5.18,0,0,1-.35,1.61,1.12,1.12,0,0,1-.67.53v.77h7l.75-5.83Zm8.45,5.24v.72h-3.83v-.72a1.11,1.11,0,0,0,.77-.41,2.52,2.52,0,0,0,.23-1.31c0-.23,0-.77-.07-1.62,0-.17-.05-.9-.13-2.18h-2.71l-.74,3c0,.2-.09.43-.13.67a4.44,4.44,0,0,0-.06.71,1.27,1.27,0,0,0,.16.79,1.35,1.35,0,0,0,.65.3v.72h-2.47v-.72a1.66,1.66,0,0,0,.52-.54,7.25,7.25,0,0,0,.55-1.58L135.49.07h.33L137,17.23a8.87,8.87,0,0,0,.3,2.11A.9.9,0,0,0,138.08,19.83ZM135,13.12l-.47-7.3-1.86,7.3Zm7.88-4-1.09-2.13a6.38,6.38,0,0,1-.39-1,6.65,6.65,0,0,1-.23-1.82,6.93,6.93,0,0,1,.23-1.8q.33-1.26,1-1.26c.57,0,1,.53,1.3,1.57a10.87,10.87,0,0,1,.36,2.39l0,1,.33.1.51-6h-.38a2.26,2.26,0,0,1-.2.54.38.38,0,0,1-.34.22.54.54,0,0,1-.19-.05l-.22-.13-.32-.25a2.36,2.36,0,0,0-.41-.25,1.82,1.82,0,0,0-.7-.16c-.81,0-1.44.57-1.9,1.7a11.21,11.21,0,0,0-.68,4.12,12.36,12.36,0,0,0,1.55,5.58,10.74,10.74,0,0,1,1.54,4.78,7.8,7.8,0,0,1-.41,2.67c-.28.76-.67,1.15-1.17,1.15a1.07,1.07,0,0,1-.79-.4,3.78,3.78,0,0,1-.64-1.18,7.79,7.79,0,0,1-.42-1.95c-.05-.44-.08-1.14-.11-2.1l-.36-.06-.46,6.73h.38a6.32,6.32,0,0,1,.2-.83.31.31,0,0,1,.3-.24.21.21,0,0,1,.14,0,1.06,1.06,0,0,1,.22.18l.32.27a3,3,0,0,0,.69.44,1.72,1.72,0,0,0,.69.15c.92,0,1.64-.63,2.16-1.91a11.22,11.22,0,0,0,.78-4.28,12.2,12.2,0,0,0-.4-3.29A14.21,14.21,0,0,0,142.85,9.07Zm6.36-7.36c.09-.19.31-.29.64-.29a1.92,1.92,0,0,1,2,1.54,11.8,11.8,0,0,1,.3,3.09l.33.13L153,.48h-6.79v.78a1.31,1.31,0,0,1,.75.32,1.7,1.7,0,0,1,.17.95,6.75,6.75,0,0,1,0,.72c0,.27-.05.58-.09.92l-1.55,13.47a5.18,5.18,0,0,1-.35,1.61,1.12,1.12,0,0,1-.67.53v.77h7l.75-5.83-.31-.13a8.33,8.33,0,0,1-2,4.23,2.73,2.73,0,0,1-2,.76c-.29,0-.48-.08-.57-.26a1.45,1.45,0,0,1-.13-.67c0-.1,0-.23,0-.4s0-.33.05-.51l.83-7.32a1.58,1.58,0,0,1,1.44.58,4.42,4.42,0,0,1,.37,2.18c0,.14,0,.31,0,.52s0,.46,0,.74l.34.15.94-8.2-.35-.11a7.71,7.71,0,0,1-.87,2.66,2.56,2.56,0,0,1-1.71.51L149,2.78A3.46,3.46,0,0,1,149.21,1.71Z",opacity:1,strokeColor:"",fillColor:"#192760",width:152.969,height:21.152,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"ForComment":case"For Comment":t={iconName:"For Comment",pathdata:"M14.1.48l-.89,5.6L12.65,6a7.14,7.14,0,0,0-.48-3c-.54-1-1.6-1.54-3.19-1.54a1.37,1.37,0,0,0-1,.26,2.06,2.06,0,0,0-.42,1.08L6.35,9.28a6,6,0,0,0,2.73-.52,5.92,5.92,0,0,0,1.41-2.59l.58.1L9.52,14.34,9,14.2c0-.29,0-.54.05-.75s0-.38,0-.49a3.15,3.15,0,0,0-.55-2.09,3.07,3.07,0,0,0-2.32-.64L4.77,17.44c0,.13,0,.24-.06.35s0,.21,0,.31a1.23,1.23,0,0,0,.53,1.17,2,2,0,0,0,1,.19v.76H0v-.76a1.91,1.91,0,0,0,1.12-.54,3.56,3.56,0,0,0,.58-1.58L4.27,4.11c.05-.27.09-.51.12-.71a7.42,7.42,0,0,0,.1-1c0-.48-.1-.77-.29-.9A3.54,3.54,0,0,0,3,1.24V.48ZM28,7.11a17.42,17.42,0,0,1-2.57,9.07q-2.75,4.61-6.3,4.6a4.33,4.33,0,0,1-3.65-1.92,8.53,8.53,0,0,1-1.41-5.14,17.56,17.56,0,0,1,2.62-9.19Q19.43,0,22.82,0a4.48,4.48,0,0,1,3.72,1.92A8.46,8.46,0,0,1,28,7.11ZM25,4.6a5.72,5.72,0,0,0-.52-2.55,1.72,1.72,0,0,0-1.63-1c-1.74,0-3.2,2.17-4.39,6.53a32.66,32.66,0,0,0-1.35,8.26,8.24,8.24,0,0,0,.26,2.2c.33,1.18.94,1.77,1.82,1.77a2.88,2.88,0,0,0,2.25-1.29,16.48,16.48,0,0,0,2.1-4.93,37.09,37.09,0,0,0,1.07-4.83A28.26,28.26,0,0,0,25,4.6Zm15.83.16a6.49,6.49,0,0,1-.33,2,5.12,5.12,0,0,1-1.09,1.9,4.65,4.65,0,0,1-1.27,1,11.5,11.5,0,0,1-1.35.52c.07.3.12.49.14.57l1.62,6.66a3.79,3.79,0,0,0,.7,1.7,1.75,1.75,0,0,0,1.14.41v.76H36.13l-2.26-9.76h-.59L32,16.6l-.17,1,0,.25a2.62,2.62,0,0,0,0,.28q0,.8.27,1a3,3,0,0,0,1.25.32v.76H27.11v-.76a1.93,1.93,0,0,0,1.11-.52,3.54,3.54,0,0,0,.59-1.59L31.38,4.11c.06-.27.1-.51.13-.71a6,6,0,0,0,.1-1c0-.47-.1-.77-.29-.9a3.54,3.54,0,0,0-1.24-.3V.48h5.76a6.77,6.77,0,0,1,3,.53Q40.79,2,40.79,4.76Zm-3.16-.47a4.35,4.35,0,0,0-.44-2,1.54,1.54,0,0,0-1.48-.81.75.75,0,0,0-.63.26,2.78,2.78,0,0,0-.33,1.05L33.48,9.5a6.85,6.85,0,0,0,1.67-.2,2.55,2.55,0,0,0,1.49-1.13,6.37,6.37,0,0,0,.67-1.62A7.81,7.81,0,0,0,37.63,4.29ZM58.49,0a2.61,2.61,0,0,1-.32.63.55.55,0,0,1-.49.24A7,7,0,0,1,56.31.43,6.15,6.15,0,0,0,54.1,0q-3.47,0-6,3.92a16.73,16.73,0,0,0-2.51,9.24,8.73,8.73,0,0,0,1.64,5.57,5,5,0,0,0,7.19,1A8.89,8.89,0,0,0,57,16.37l-.64-.65a10.47,10.47,0,0,1-1.47,2.09A4,4,0,0,1,52,19.24a2.89,2.89,0,0,1-2.17-1.13c-.67-.75-1-2.15-1-4.2a22.2,22.2,0,0,1,1.62-8.29q1.8-4.54,4.23-4.55a2.33,2.33,0,0,1,2,1.14,6.16,6.16,0,0,1,.78,3.47c0,.14,0,.25,0,.32s0,.32,0,.73l.66.17L59.12,0ZM72.71,7.11a17.33,17.33,0,0,1-2.57,9.07c-1.82,3.07-3.93,4.6-6.3,4.6a4.34,4.34,0,0,1-3.65-1.92,8.53,8.53,0,0,1-1.4-5.14A17.55,17.55,0,0,1,61.4,4.53Q64.15,0,67.54,0a4.48,4.48,0,0,1,3.72,1.92A8.39,8.39,0,0,1,72.71,7.11Zm-3-2.51a5.72,5.72,0,0,0-.52-2.55,1.72,1.72,0,0,0-1.63-1c-1.74,0-3.2,2.17-4.39,6.53a32.66,32.66,0,0,0-1.35,8.26,8.24,8.24,0,0,0,.26,2.2c.33,1.18.94,1.77,1.82,1.77a2.85,2.85,0,0,0,2.25-1.29,16,16,0,0,0,2.1-4.93,34.08,34.08,0,0,0,1.07-4.83A28.26,28.26,0,0,0,69.68,4.6Zm17.5,13.62a4.63,4.63,0,0,1,.07-.75c0-.3.09-.59.15-.88L90,3.31a3.32,3.32,0,0,1,.7-1.67,2,2,0,0,1,1-.4V.48H87.23l-6.4,13.91L79.63.48H74.84v.76a3.29,3.29,0,0,1,1.2.21c.21.11.31.37.31.78a4.35,4.35,0,0,1-.07.75c0,.28-.11.61-.18,1L74,15a19.63,19.63,0,0,1-1,3.65,1.54,1.54,0,0,1-1.17.86v.76H76.2v-.76a2.31,2.31,0,0,1-1.09-.29,1.6,1.6,0,0,1-.58-1.43,8.8,8.8,0,0,1,.14-1.42c0-.37.14-.82.24-1.37L77,4.24l1.41,16.37H79L86.89,3.76,84.25,17.34A2.94,2.94,0,0,1,83.61,19a2.87,2.87,0,0,1-1.44.49v.76h6.54v-.76a3.39,3.39,0,0,1-1.23-.31Q87.18,19,87.18,18.22Zm17.73,0a4.63,4.63,0,0,1,.07-.75c0-.3.1-.59.16-.88l2.58-13.28a3.24,3.24,0,0,1,.69-1.67,2,2,0,0,1,1-.4V.48H105l-6.4,13.91L97.36.48H92.57v.76a3.29,3.29,0,0,1,1.2.21c.21.11.32.37.32.78A5.65,5.65,0,0,1,94,3c0,.28-.11.61-.19,1L91.69,15a19.63,19.63,0,0,1-1,3.65,1.54,1.54,0,0,1-1.17.86v.76h4.38v-.76a2.33,2.33,0,0,1-1.1-.29,1.6,1.6,0,0,1-.58-1.43,10.12,10.12,0,0,1,.14-1.42c.06-.37.14-.82.25-1.37L94.76,4.24l1.41,16.37h.59l7.86-16.85L102,17.34a3.1,3.1,0,0,1-.64,1.63,3,3,0,0,1-1.45.49v.76h6.55v-.76a3.46,3.46,0,0,1-1.24-.31Q104.91,19,104.91,18.22Zm11.52.3a6.56,6.56,0,0,1-3.25.75,1.27,1.27,0,0,1-.94-.26,1,1,0,0,1-.22-.66,3,3,0,0,1,0-.39,4.88,4.88,0,0,1,.08-.51l1.38-7.2a3.65,3.65,0,0,1,2.4.57,2.92,2.92,0,0,1,.62,2.15c0,.14,0,.31,0,.51s0,.45-.06.73l.58.15,1.55-8.08-.58-.1a5.92,5.92,0,0,1-1.44,2.61,6.32,6.32,0,0,1-2.85.51L115,2.74a2.44,2.44,0,0,1,.39-1.06,1.43,1.43,0,0,1,1.07-.28c1.63,0,2.71.5,3.25,1.51a7.37,7.37,0,0,1,.49,3l.56.13.89-5.6H110.31v.76a3.28,3.28,0,0,1,1.25.31c.19.13.28.44.28.94a4.83,4.83,0,0,1-.06.7c0,.28-.09.58-.16.92l-2.57,13.24a3.54,3.54,0,0,1-.59,1.59,1.93,1.93,0,0,1-1.11.52v.76H119l1.24-5.74-.51-.12A7.7,7.7,0,0,1,116.43,18.52ZM136.6,1.24V.48h-4.3v.76a2.5,2.5,0,0,1,1.14.33A1.8,1.8,0,0,1,134,3.05a10.58,10.58,0,0,1-.14,1.34c-.05.41-.13.87-.22,1.39L132,14.12,127.41.48h-4.22v.76a2.53,2.53,0,0,1,1,.24,1.82,1.82,0,0,1,.64,1.06l.1.3L122.55,15a19.54,19.54,0,0,1-1,3.61,1.59,1.59,0,0,1-1.18.9v.76h4.37v-.76a2.5,2.5,0,0,1-1.12-.32,1.67,1.67,0,0,1-.55-1.44,5.32,5.32,0,0,1,0-.79c0-.43.17-1.09.34-2l2.08-10.57L131,20.71h.52l2.91-15a24.72,24.72,0,0,1,.85-3.42,1.42,1.42,0,0,1,1-1Zm.48-.76-.81,5,.54.2a8.1,8.1,0,0,1,1.85-3.16,3.63,3.63,0,0,1,2.66-1.06l-3.08,15.85a3,3,0,0,1-.86,1.85,2.42,2.42,0,0,1-1.32.26v.76H143v-.76a4,4,0,0,1-1.41-.3c-.23-.13-.34-.45-.34-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.17-1,2.92-15.1a2.64,2.64,0,0,1,1.76.63c.74.7,1.12,2,1.15,3.94l.55.07L148.6.48Z",opacity:1,strokeColor:"",fillColor:"#192760",width:148.603,height:20.812,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Void":t={iconName:"Void",pathdata:"M27.88,1.72a6.53,6.53,0,0,0-1.81,1.42L9,21.12H7.54L4.09,5.83A11.83,11.83,0,0,0,2.82,2Q2.3,1.4,0,1.26V.48H13.54v.78a11,11,0,0,0-2.37.18q-1.11.27-1.11,1.05a1.43,1.43,0,0,0,0,.29c0,.09,0,.19,0,.28l2.35,12,8.56-9a25.11,25.11,0,0,0,1.83-2.14,3.15,3.15,0,0,0,.82-1.68c0-.41-.28-.69-.84-.82a12.57,12.57,0,0,0-2.08-.15V.48h8.7v.78A7.11,7.11,0,0,0,27.88,1.72ZM57.37,7.23q0,4.85-5.56,9.22a21.41,21.41,0,0,1-13.62,4.67,14.41,14.41,0,0,1-7.89-1.95,6,6,0,0,1-3-5.23q0-4.92,5.66-9.34A21.12,21.12,0,0,1,46.2,0a15,15,0,0,1,8,2A6,6,0,0,1,57.37,7.23ZM50.82,4.68a3.46,3.46,0,0,0-1.13-2.59A4.93,4.93,0,0,0,46.17,1q-5.64,0-9.49,6.64c-1.94,3.36-2.92,6.16-2.92,8.4a4.27,4.27,0,0,0,.56,2.23q1.08,1.8,3.93,1.8a9.24,9.24,0,0,0,4.87-1.31,15.24,15.24,0,0,0,4.54-5A21.81,21.81,0,0,0,50,8.85,14.23,14.23,0,0,0,50.82,4.68ZM66,18.49a1.49,1.49,0,0,1,0-.28c0-.1,0-.2.08-.3l.35-1L72,3.41a2.94,2.94,0,0,1,1.25-1.62,6.79,6.79,0,0,1,2.4-.53V.48H62.19v.78a13.27,13.27,0,0,1,2.67.32.88.88,0,0,1,.64.95,2.38,2.38,0,0,1-.12.69c-.08.25-.2.57-.36.95L59.45,17.64a3,3,0,0,1-1.28,1.61,6.84,6.84,0,0,1-2.39.53v.77H69.27v-.77a13.72,13.72,0,0,1-2.67-.32A.9.9,0,0,1,66,18.49Zm38.25-9.67q0,4.59-5.15,8-5.73,3.77-15,3.76h-13v-.77a7.4,7.4,0,0,0,2.1-.41,3.08,3.08,0,0,0,1.57-1.75L80.28,4.17c.16-.38.28-.7.37-1a2.27,2.27,0,0,0,.12-.68.89.89,0,0,0-.64-.95,13.41,13.41,0,0,0-2.68-.32V.48H90.6q6.68,0,10.15,2.27A6.92,6.92,0,0,1,104.23,8.82ZM97.58,7a5.28,5.28,0,0,0-1.13-3.54q-1.77-2-6.14-2a4.24,4.24,0,0,0-2,.32,1.77,1.77,0,0,0-.74.84L81.35,17.73a1.72,1.72,0,0,0-.12.39,1.89,1.89,0,0,0,0,.31.89.89,0,0,0,.54.85,5.1,5.1,0,0,0,2,.26q8.07,0,11.68-5.5A12.61,12.61,0,0,0,97.58,7Z",opacity:1,strokeColor:"",fillColor:"#8a251a",width:104.233,height:21.123,stampFillColor:"#f6dedd",stampStrokeColor:""};break;case"PreliminaryResults":case"Preliminary Results":t={iconName:"Preliminary Results",pathdata:"M9.23,5.08q0-3-1.32-4.08A2.6,2.6,0,0,0,6.17.41H2v.78a1.5,1.5,0,0,1,.76.23,1.39,1.39,0,0,1,.28,1c0,.19,0,.43,0,.73s-.07.61-.1.91L1.17,17.56a4.76,4.76,0,0,1-.41,1.62A1.18,1.18,0,0,1,0,19.7v.78H4.25V19.7a1.77,1.77,0,0,1-.86-.31,1.5,1.5,0,0,1-.2-1c0-.09,0-.19,0-.3a1.36,1.36,0,0,1,0-.29l.12-1,.78-6L5,11h.41a3.21,3.21,0,0,0,2.78-1.6A7.57,7.57,0,0,0,9.23,5.08ZM7,6.32a10,10,0,0,1-.42,2,3,3,0,0,1-.68,1.21,1.63,1.63,0,0,1-1.13.36H4.53l-.27-.06,1-7.15a4.75,4.75,0,0,1,.22-1,.45.45,0,0,1,.46-.29,1,1,0,0,1,1,.8,6.22,6.22,0,0,1,.29,2.06A18,18,0,0,1,7,6.32ZM23.4,18.75a3.35,3.35,0,0,1-2.23.76.68.68,0,0,1-.64-.26,1.27,1.27,0,0,1-.16-.68c0-.09,0-.23,0-.39s0-.34.05-.51l.95-7.33a1.92,1.92,0,0,1,1.65.59,4,4,0,0,1,.42,2.18c0,.14,0,.31,0,.52s0,.46,0,.74l.4.15,1.07-8.21-.4-.1a7,7,0,0,1-1,2.65,3.15,3.15,0,0,1-2,.52l.85-6.67a3,3,0,0,1,.28-1.08c.11-.19.35-.28.73-.28a2.16,2.16,0,0,1,2.23,1.54A10.27,10.27,0,0,1,26,6l.39.13L27,.41H19.2v.78a1.67,1.67,0,0,1,.86.31,1.52,1.52,0,0,1,.19,1,6.58,6.58,0,0,1,0,.71c0,.28-.07.59-.11.93L18.33,17.56a4.59,4.59,0,0,1-.4,1.62,1.22,1.22,0,0,1-.74.51,1,1,0,0,1-.73-.4A5.08,5.08,0,0,1,16,17.56l-1.1-6.77c0-.08,0-.27-.1-.58a5.14,5.14,0,0,0,.92-.53,3.23,3.23,0,0,0,.87-1,6,6,0,0,0,.76-1.93,9.63,9.63,0,0,0,.22-2c0-1.87-.44-3.14-1.34-3.81a3.4,3.4,0,0,0-2-.54h-4v.78a1.78,1.78,0,0,1,.85.3,1.4,1.4,0,0,1,.19.91c0,.24,0,.56-.06,1,0,.21-.05.45-.09.73L9.31,17.56a4.53,4.53,0,0,1-.41,1.62,1.15,1.15,0,0,1-.75.52v.78h4.28V19.7a1.62,1.62,0,0,1-.86-.32,1.72,1.72,0,0,1-.18-1v-.29c0-.09,0-.18,0-.25l.12-1,.86-6.24h.4l1.55,9.92h10.8L26,14.65l-.35-.13A7.9,7.9,0,0,1,23.4,18.75ZM13.67,9.38a3.35,3.35,0,0,1-1.15.2l.87-6.87a4,4,0,0,1,.23-1.06.45.45,0,0,1,.43-.27,1.05,1.05,0,0,1,1,.83,6.14,6.14,0,0,1,.3,2.08,11.74,11.74,0,0,1-.21,2.29,9,9,0,0,1-.47,1.65A2,2,0,0,1,13.67,9.38ZM35,14.65l-.84,5.83h-8V19.7a1.24,1.24,0,0,0,.76-.52,4.73,4.73,0,0,0,.4-1.63L29.15,4.1q.08-.57.12-1c0-.26,0-.48,0-.68a1.42,1.42,0,0,0-.21-1,1.67,1.67,0,0,0-.85-.31V.41h4.56v.78a1.67,1.67,0,0,0-1,.49,4.17,4.17,0,0,0-.44,1.66L29.49,17.65c0,.16,0,.31,0,.45a3.47,3.47,0,0,0,0,.48,1,1,0,0,0,.21.72.8.8,0,0,0,.59.21,3.54,3.54,0,0,0,2.56-1.05,9.24,9.24,0,0,0,1.91-3.94Zm2.79,4.73a1.61,1.61,0,0,0,.85.32v.78H34.39V19.7a1.18,1.18,0,0,0,.76-.52,4.76,4.76,0,0,0,.41-1.62L37.33,4.1c.05-.38.09-.7.11-1a5.83,5.83,0,0,0,0-.68,1.5,1.5,0,0,0-.2-1,1.71,1.71,0,0,0-.85-.31V.41h4.29v.78a1.22,1.22,0,0,0-.77.52,4.9,4.9,0,0,0-.39,1.63L37.78,16.8l-.11,1,0,.29c0,.11,0,.2,0,.29A1.52,1.52,0,0,0,37.83,19.38Zm12.2,0a1.81,1.81,0,0,0,.85.31v.78h-4.5V19.7a1.64,1.64,0,0,0,1-.49,4,4,0,0,0,.44-1.66l1.81-13.8-5.4,17.12h-.4l-1-16.64L41.39,15.12c-.07.56-.13,1-.17,1.39-.06.61-.09,1.09-.09,1.45a2,2,0,0,0,.4,1.45,1.19,1.19,0,0,0,.75.29v.78h-3V19.7a1.21,1.21,0,0,0,.81-.87,29.47,29.47,0,0,0,.66-3.71L42.21,4c0-.38.09-.71.12-1a5.41,5.41,0,0,0,.05-.75c0-.42-.07-.69-.21-.8a1.69,1.69,0,0,0-.83-.21V.41h3.29l.83,14.14L49.85.41h3.07v.78a1.12,1.12,0,0,0-.69.41,4.08,4.08,0,0,0-.48,1.69L50,16.79c0,.29-.08.59-.11.89s0,.56,0,.76A1.41,1.41,0,0,0,50,19.39Zm5,0a1.61,1.61,0,0,0,.85.32v.78H51.56V19.7a1.18,1.18,0,0,0,.76-.52,4.76,4.76,0,0,0,.41-1.62L54.5,4.1c0-.38.09-.7.11-1a5.83,5.83,0,0,0,0-.68,1.5,1.5,0,0,0-.2-1,1.71,1.71,0,0,0-.85-.31V.41h4.29v.78a1.22,1.22,0,0,0-.77.52,4.9,4.9,0,0,0-.39,1.63L55,16.8l-.11,1,0,.29c0,.11,0,.2,0,.29A1.52,1.52,0,0,0,55,19.38ZM66.13,5.75,64.13,21h-.36L60,4.38,58.6,15.12c-.12.89-.2,1.55-.23,2a7.32,7.32,0,0,0,0,.81,2.17,2.17,0,0,0,.38,1.46,1.32,1.32,0,0,0,.77.32v.78h-3V19.7a1.26,1.26,0,0,0,.81-.91,29,29,0,0,0,.65-3.67L59.56,2.81,59.5,2.5a2,2,0,0,0-.45-1.06,1.21,1.21,0,0,0-.67-.25V.41h2.9L64.4,14.28,65.52,5.8c.07-.53.12-1,.16-1.41.06-.62.09-1.08.09-1.36a2.45,2.45,0,0,0-.34-1.51,1.39,1.39,0,0,0-.79-.33V.41h3v.78l-.21.06c-.29.08-.52.43-.68,1A34.22,34.22,0,0,0,66.13,5.75ZM83.27,1A3.41,3.41,0,0,0,81.21.41h-4v.78a1.74,1.74,0,0,1,.85.3c.14.13.2.43.2.91,0,.24,0,.56-.06,1,0,.21-.06.45-.09.73L76.38,17.56A4.53,4.53,0,0,1,76,19.18a1.18,1.18,0,0,1-.76.52v0a1,1,0,0,1-.67-.45,8.11,8.11,0,0,1-.34-2.12L72.83,0h-.38L67.11,17.64a6.42,6.42,0,0,1-.63,1.58,1.84,1.84,0,0,1-.59.54v.72h2.83v-.72a1.68,1.68,0,0,1-.75-.31,1.16,1.16,0,0,1-.18-.79,3.46,3.46,0,0,1,.07-.7,5.16,5.16,0,0,1,.15-.67l.84-3H72c.08,1.28.13,2,.13,2.18.06.85.08,1.39.08,1.61a2.26,2.26,0,0,1-.25,1.31,1.43,1.43,0,0,1-.88.42v.72H79.5V19.7a1.58,1.58,0,0,1-.86-.32,1.7,1.7,0,0,1-.19-1c0-.1,0-.2,0-.29a1.81,1.81,0,0,1,0-.25l.12-1,.85-6.24h.41l1.55,9.92h2.9V19.7a1,1,0,0,1-.79-.41A5.15,5.15,0,0,1,83,17.56l-1.11-6.77c0-.08,0-.27-.09-.58a5.53,5.53,0,0,0,.92-.53,3.52,3.52,0,0,0,.87-1,6.16,6.16,0,0,0,.75-1.93,9.67,9.67,0,0,0,.23-2C84.61,2.89,84.16,1.62,83.27,1ZM69.19,13.05l2.13-7.3.53,7.3Zm13-6.47a8.39,8.39,0,0,1-.46,1.65,2,2,0,0,1-1,1.15,3.29,3.29,0,0,1-1.14.2l.87-6.87a3.61,3.61,0,0,1,.23-1.06.45.45,0,0,1,.43-.27,1.05,1.05,0,0,1,1,.83,6.14,6.14,0,0,1,.3,2.08A11,11,0,0,1,82.22,6.58ZM90.48.41h3v.78a1.07,1.07,0,0,0-.55.41,6.13,6.13,0,0,0-.77,1.62l-2.72,8-.72,5.55c0,.22-.07.51-.1.86a7.29,7.29,0,0,0-.06.73,1.46,1.46,0,0,0,.29,1.07,1.61,1.61,0,0,0,.83.25v.78H85V19.7a1.56,1.56,0,0,0,.93-.39,3.7,3.7,0,0,0,.53-1.76l.85-6.45-1.26-8a6.07,6.07,0,0,0-.36-1.47.81.81,0,0,0-.7-.4V.41h4v.78a1.32,1.32,0,0,0-.76.23c-.15.12-.23.4-.23.84a4.46,4.46,0,0,0,0,.48c0,.19,0,.39.07.6l1,6.54,1.88-5.55c.1-.29.18-.55.24-.79a4.68,4.68,0,0,0,.14-1.11,1.35,1.35,0,0,0-.31-1,1.14,1.14,0,0,0-.66-.2Zm18.61,1.22c.1-.19.35-.28.73-.28a2.16,2.16,0,0,1,2.23,1.54A10.27,10.27,0,0,1,112.39,6l.38.13.62-5.7h-7.76v.78a1.67,1.67,0,0,1,.86.31,1.59,1.59,0,0,1,.19,1,6.58,6.58,0,0,1,0,.71c0,.28-.07.59-.11.93l-1.77,13.46a4.53,4.53,0,0,1-.41,1.62,1.17,1.17,0,0,1-.73.51,1,1,0,0,1-.73-.4,5.08,5.08,0,0,1-.49-1.73l-1.1-6.77c0-.08,0-.27-.1-.58a5.14,5.14,0,0,0,.92-.53,3.4,3.4,0,0,0,.88-1,6.16,6.16,0,0,0,.75-1.93,9.63,9.63,0,0,0,.22-2c0-1.87-.44-3.14-1.34-3.81a3.38,3.38,0,0,0-2-.54h-4v.78a1.78,1.78,0,0,1,.85.3,1.4,1.4,0,0,1,.19.91c0,.24,0,.56-.06,1,0,.21,0,.45-.09.73L95.74,17.56a4.53,4.53,0,0,1-.41,1.62,1.15,1.15,0,0,1-.75.52v.78h4.28V19.7a1.62,1.62,0,0,1-.86-.32,1.72,1.72,0,0,1-.18-1v-.29c0-.09,0-.18,0-.25l.12-1,.86-6.24h.4l1.55,9.92h10.8l.85-5.83-.35-.13a7.9,7.9,0,0,1-2.24,4.23,3.35,3.35,0,0,1-2.23.76.71.71,0,0,1-.65-.26,1.37,1.37,0,0,1-.15-.68c0-.09,0-.23,0-.39s0-.34.05-.51l.95-7.33a1.92,1.92,0,0,1,1.65.59,4,4,0,0,1,.42,2.18c0,.14,0,.31,0,.52s0,.46,0,.74l.4.15,1.07-8.21-.41-.1a7,7,0,0,1-1,2.65,3.15,3.15,0,0,1-2,.52l.85-6.67A3,3,0,0,1,109.09,1.63Zm-9,7.75a3.35,3.35,0,0,1-1.15.2l.87-6.87a4,4,0,0,1,.23-1.06.45.45,0,0,1,.43-.27,1.05,1.05,0,0,1,1,.83,6.14,6.14,0,0,1,.3,2.08,11.74,11.74,0,0,1-.21,2.29,9,9,0,0,1-.47,1.65A2,2,0,0,1,100.1,9.38ZM120.18.07h.43l-.59,6-.37-.1-.05-1a10.11,10.11,0,0,0-.41-2.39c-.34-1-.83-1.57-1.48-1.57s-.95.42-1.21,1.26a6.17,6.17,0,0,0-.25,1.8,5.92,5.92,0,0,0,.26,1.82,5.23,5.23,0,0,0,.44,1L118.19,9a12.6,12.6,0,0,1,1.12,2.57,10.75,10.75,0,0,1,.47,3.29,10,10,0,0,1-.9,4.29,2.76,2.76,0,0,1-2.46,1.91,2.17,2.17,0,0,1-.79-.15,3.28,3.28,0,0,1-.79-.44l-.36-.28-.26-.18a.38.38,0,0,0-.16,0,.34.34,0,0,0-.34.23,5.5,5.5,0,0,0-.23.84h-.43l.52-6.73.41.06c0,1,.07,1.66.12,2.09a7.13,7.13,0,0,0,.49,1.95,3.52,3.52,0,0,0,.73,1.18,1.25,1.25,0,0,0,.9.41c.57,0,1-.39,1.34-1.15a7.13,7.13,0,0,0,.47-2.68,9.86,9.86,0,0,0-1.76-4.77,11.23,11.23,0,0,1-1.77-5.58,9.8,9.8,0,0,1,.78-4.12A2.41,2.41,0,0,1,117.46,0a2.06,2.06,0,0,1,.79.16,1.9,1.9,0,0,1,.47.25l.37.25a1.15,1.15,0,0,0,.25.12.47.47,0,0,0,.22,0A.44.44,0,0,0,120,.62,2.6,2.6,0,0,0,120.18.07Zm10,2a26.67,26.67,0,0,0-.66,3.7l-.9,6.85a32.12,32.12,0,0,1-1.16,5.7c-.68,1.83-1.67,2.74-3,2.74a2.7,2.7,0,0,1-2.28-1.36,6.67,6.67,0,0,1-.92-3.77,19.46,19.46,0,0,1,.11-2c0-.46.15-1.26.3-2.42l1-7.36c0-.33.08-.64.11-.93s0-.55,0-.77a1.38,1.38,0,0,0-.2-.91,1.74,1.74,0,0,0-.85-.3V.41h4.43v.78a1.39,1.39,0,0,0-.91.47,4.25,4.25,0,0,0-.44,1.68l-1.18,9c-.11.8-.19,1.46-.25,2q-.15,1.37-.15,2a4.41,4.41,0,0,0,.48,2.27,1.44,1.44,0,0,0,1.29.78c.91,0,1.62-.82,2.13-2.48a30.62,30.62,0,0,0,.91-4.85L129,5.76c.1-.91.14-1.3.13-1.19a14.64,14.64,0,0,0,.13-1.6,2.12,2.12,0,0,0-.38-1.46,1.35,1.35,0,0,0-.77-.32V.41H131v.78A1.18,1.18,0,0,0,130.23,2.06Zm8.41,12.59-.84,5.83h-8V19.7a1.24,1.24,0,0,0,.76-.52,4.73,4.73,0,0,0,.4-1.63L132.75,4.1q.08-.57.12-1c0-.26,0-.48,0-.68,0-.51-.06-.83-.2-1a1.67,1.67,0,0,0-.85-.31V.41h4.56v.78a1.67,1.67,0,0,0-1,.49A4.17,4.17,0,0,0,135,3.34l-1.87,14.31c0,.16,0,.31-.05.45s0,.3,0,.48a1,1,0,0,0,.21.72.8.8,0,0,0,.59.21,3.54,3.54,0,0,0,2.56-1.05,9.24,9.24,0,0,0,1.91-3.94Zm7.72-8.56a7.63,7.63,0,0,0-.79-4,1.53,1.53,0,0,0-1.21-.64l-2,15.35-.12,1a2.47,2.47,0,0,0,0,.34,2.35,2.35,0,0,0,0,.26c0,.52.08.84.23,1a2,2,0,0,0,1,.3v.78h-4.76V19.7a1.18,1.18,0,0,0,.9-.26,3.75,3.75,0,0,0,.6-1.88l2.11-16.11a2.17,2.17,0,0,0-1.83,1.08,9.57,9.57,0,0,0-1.27,3.21l-.37-.2.56-5.13h7.91l-.52,5.76Zm3.41-3.79a6.17,6.17,0,0,0-.25,1.8,5.63,5.63,0,0,0,.26,1.82,5.23,5.23,0,0,0,.44,1L151.46,9a13.19,13.19,0,0,1,1.13,2.57,11.08,11.08,0,0,1,.46,3.29,10,10,0,0,1-.9,4.29,2.76,2.76,0,0,1-2.46,1.91,2.21,2.21,0,0,1-.79-.15,3.28,3.28,0,0,1-.79-.44l-.36-.28-.26-.18a.38.38,0,0,0-.16,0,.34.34,0,0,0-.34.23,5.5,5.5,0,0,0-.23.84h-.43l.52-6.73.41.06c0,1,.07,1.66.12,2.09a7.13,7.13,0,0,0,.49,1.95,3.52,3.52,0,0,0,.73,1.18,1.25,1.25,0,0,0,.9.41c.57,0,1-.39,1.34-1.15a7.13,7.13,0,0,0,.47-2.68,9.86,9.86,0,0,0-1.76-4.77,11.23,11.23,0,0,1-1.77-5.58,9.8,9.8,0,0,1,.78-4.12A2.41,2.41,0,0,1,150.73,0a2.06,2.06,0,0,1,.79.16,1.9,1.9,0,0,1,.47.25l.37.25a1.34,1.34,0,0,0,.24.12.56.56,0,0,0,.23,0,.44.44,0,0,0,.39-.21,2.6,2.6,0,0,0,.23-.55h.43l-.59,6-.37-.1,0-1a10.11,10.11,0,0,0-.41-2.39c-.34-1-.83-1.57-1.48-1.57S150,1.46,149.77,2.3Z",opacity:1,strokeColor:"",fillColor:"#192760",width:153.879,height:21.051,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"InformationOnly":case"Information Only":t={iconName:"Information Only",pathdata:"M4,19.14a2,2,0,0,0,1,.32v.76H0v-.76a1.42,1.42,0,0,0,.87-.52,4,4,0,0,0,.47-1.59l2-13.24c.06-.38.1-.69.13-1a5.73,5.73,0,0,0,0-.67c0-.5-.08-.81-.24-.94a2.2,2.2,0,0,0-1-.31V.48H7.26v.76a1.48,1.48,0,0,0-.88.52,4.14,4.14,0,0,0-.45,1.6l-2,13.24-.13,1c0,.1,0,.19,0,.3a2.72,2.72,0,0,0,0,.28A1.32,1.32,0,0,0,4,19.14ZM18.17,1.3l.24-.06V.48H15v.76a1.66,1.66,0,0,1,.9.33,2.08,2.08,0,0,1,.4,1.48,12.85,12.85,0,0,1-.1,1.34c-.05.41-.11.87-.18,1.39l-1.29,8.34L11.15.48H7.83v.76a1.69,1.69,0,0,1,.77.24,1.9,1.9,0,0,1,.51,1.06l.07.3L7.33,15a24.86,24.86,0,0,1-.76,3.61,1.32,1.32,0,0,1-.92.9v.76H9.09v-.76a1.67,1.67,0,0,1-.88-.32,1.92,1.92,0,0,1-.44-1.44,7.09,7.09,0,0,1,0-.79c0-.43.13-1.09.27-2L9.72,4.38,14,20.71h.41l2.3-15a28.78,28.78,0,0,1,.67-3.42C17.57,1.72,17.83,1.38,18.17,1.3ZM19.33.48v.76a2.32,2.32,0,0,1,1,.3c.15.13.23.42.23.9,0,.23,0,.55-.07,1,0,.2-.06.44-.1.71l-2,13.23a4,4,0,0,1-.46,1.58,1.39,1.39,0,0,1-.88.54v.76h4.89v-.76a1.36,1.36,0,0,1-.78-.19,1.39,1.39,0,0,1-.41-1.17c0-.1,0-.21,0-.31s0-.22,0-.35l1.09-7.21a2.09,2.09,0,0,1,1.83.64A3.81,3.81,0,0,1,24.1,13c0,.11,0,.28,0,.49s0,.46,0,.75l.45.14,1.22-8.07-.46-.1a6.19,6.19,0,0,1-1.11,2.59A3.89,3.89,0,0,1,22,9.28l1-6.54a2.43,2.43,0,0,1,.33-1.08.93.93,0,0,1,.76-.26,2.45,2.45,0,0,1,2.52,1.54A9,9,0,0,1,27,6l.44.13.7-5.6ZM39.06,7.11a21,21,0,0,1-2,9.07q-2.16,4.61-5,4.6a3.28,3.28,0,0,1-2.88-1.92,10.29,10.29,0,0,1-1.11-5.14,21.08,21.08,0,0,1,2.07-9.19Q32.31,0,35,0a3.37,3.37,0,0,1,2.93,1.92A10.14,10.14,0,0,1,39.06,7.11ZM36.68,4.6a7,7,0,0,0-.42-2.55A1.37,1.37,0,0,0,35,1c-1.37,0-2.52,2.17-3.46,6.53a40.81,40.81,0,0,0-1.07,8.26,10,10,0,0,0,.21,2.2c.26,1.18.74,1.77,1.43,1.77s1.24-.43,1.78-1.29a18.75,18.75,0,0,0,1.65-4.93,43.28,43.28,0,0,0,.85-4.83A36.93,36.93,0,0,0,36.68,4.6ZM61,19.15a2.25,2.25,0,0,0,1,.31v.76H56.84v-.76A2,2,0,0,0,58,19a3.6,3.6,0,0,0,.5-1.63L60.56,3.76l-6.2,16.85H53.9L52.78,4.24,51.12,15c-.09.55-.15,1-.2,1.37a13,13,0,0,0-.11,1.42,1.8,1.8,0,0,0,.46,1.43,1.54,1.54,0,0,0,.86.29v.76H45.49l-1.78-9.76h-.47l-1,6.14-.13,1,0,.25c0,.09,0,.19,0,.28a1.47,1.47,0,0,0,.22,1,2,2,0,0,0,1,.32v.76H38.37v-.76a1.42,1.42,0,0,0,.88-.52,4.21,4.21,0,0,0,.46-1.59l2-13.24c0-.27.08-.51.11-.71a8.23,8.23,0,0,0,.07-1,1.23,1.23,0,0,0-.23-.9,2.32,2.32,0,0,0-1-.3V.48h4.54A4.34,4.34,0,0,1,47.62,1c1,.65,1.54,1.9,1.54,3.75a7.78,7.78,0,0,1-.26,2A5.56,5.56,0,0,1,48,8.62a3.87,3.87,0,0,1-1,1,8.06,8.06,0,0,1-1.06.52c.05.3.09.49.11.57l1.27,6.66a4.58,4.58,0,0,0,.55,1.7,1.23,1.23,0,0,0,.83.39,1.31,1.31,0,0,0,.86-.84A23,23,0,0,0,50.36,15L52.05,4c.06-.37.11-.7.15-1a7.42,7.42,0,0,0,0-.75c0-.41-.08-.67-.25-.78a2.09,2.09,0,0,0-.94-.21V.48h3.77l1,13.91,5-13.91h3.51v.76a1.46,1.46,0,0,0-.79.4A3.71,3.71,0,0,0,63,3.31L61,16.59c0,.29-.09.58-.13.88s-.05.55-.05.75Q60.79,19,61,19.15Zm-15.14-11a7.46,7.46,0,0,0,.53-1.62,9.54,9.54,0,0,0,.25-2.26,5.31,5.31,0,0,0-.35-2,1.18,1.18,0,0,0-1.16-.81.54.54,0,0,0-.5.26,3.37,3.37,0,0,0-.26,1.05l-1,6.76a4.28,4.28,0,0,0,1.31-.2A2.17,2.17,0,0,0,45.89,8.17ZM73.21,19.51v.71h-5v-.71a1.61,1.61,0,0,0,1-.41,1.92,1.92,0,0,0,.3-1.29c0-.22,0-.75-.09-1.58,0-.17-.06-.89-.16-2.15H65.68l-1,3c-.06.2-.12.42-.17.66a3.4,3.4,0,0,0-.08.69q0,.62.21.78a1.9,1.9,0,0,0,.86.3v.71H62.29v-.71A2,2,0,0,0,63,19a6.47,6.47,0,0,0,.72-1.56L69.82.07h.43L71.83,17A6.77,6.77,0,0,0,72.22,19,1.23,1.23,0,0,0,73.21,19.51Zm-4.08-6.6-.61-7.18-2.44,7.18ZM82.52,6.14l.6-5.66H74l-.63,5,.42.2a8.71,8.71,0,0,1,1.46-3.16,2.57,2.57,0,0,1,2.1-1.06L75,17.35a3.36,3.36,0,0,1-.68,1.85,1.57,1.57,0,0,1-1,.26v.76H78.7v-.76a2.69,2.69,0,0,1-1.11-.3c-.18-.13-.27-.45-.27-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.14-1L79.8,1.5a1.87,1.87,0,0,1,1.39.63c.58.7.88,2,.91,3.94ZM88.84.48H83.92v.76a2.31,2.31,0,0,1,1,.31c.15.13.23.44.23.94a5.56,5.56,0,0,1,0,.67c0,.26-.08.57-.14,1l-2,13.24a4,4,0,0,1-.47,1.59,1.36,1.36,0,0,1-.87.52v.76H86.5v-.76a2,2,0,0,1-1-.32,1.32,1.32,0,0,1-.23-.94c0-.09,0-.18,0-.28s0-.2,0-.3l.13-1,2-13.24A4.09,4.09,0,0,1,88,1.76a1.45,1.45,0,0,1,.87-.52ZM99.11,7.11a21,21,0,0,1-2,9.07q-2.16,4.61-5,4.6a3.28,3.28,0,0,1-2.88-1.92,10.29,10.29,0,0,1-1.11-5.14,21.08,21.08,0,0,1,2.07-9.19C91.63,1.51,93.25,0,95,0A3.36,3.36,0,0,1,98,1.92,10,10,0,0,1,99.11,7.11ZM96.72,4.6a7.18,7.18,0,0,0-.41-2.55c-.28-.7-.7-1-1.29-1-1.37,0-2.52,2.17-3.46,6.53a40.7,40.7,0,0,0-1.06,8.26,10,10,0,0,0,.2,2.2c.26,1.18.74,1.77,1.43,1.77a2.2,2.2,0,0,0,1.78-1.29,18.75,18.75,0,0,0,1.65-4.93,41.1,41.1,0,0,0,.85-4.83A34.65,34.65,0,0,0,96.72,4.6Zm11.1-3.36a1.66,1.66,0,0,1,.9.33,2.08,2.08,0,0,1,.4,1.48,12.85,12.85,0,0,1-.1,1.34c0,.41-.11.87-.18,1.39l-1.29,8.34L104,.48h-3.33v.76a1.7,1.7,0,0,1,.78.24,2,2,0,0,1,.51,1.06l.07.3L100.13,15a24,24,0,0,1-.75,3.61,1.35,1.35,0,0,1-.93.9v.76h3.45v-.76a1.67,1.67,0,0,1-.88-.32,1.88,1.88,0,0,1-.44-1.44,7.09,7.09,0,0,1,0-.79c0-.43.13-1.09.27-2l1.64-10.57,4.29,16.33h.41l2.3-15a28.78,28.78,0,0,1,.67-3.42c.18-.59.44-.93.78-1l.23-.06V.48h-3.39ZM125,7.11a21,21,0,0,1-2,9.07c-1.45,3.07-3.1,4.6-5,4.6a3.28,3.28,0,0,1-2.87-1.92A10.29,10.29,0,0,1,114,13.72a21.22,21.22,0,0,1,2.06-9.19Q118.22,0,120.91,0a3.36,3.36,0,0,1,2.92,1.92A10,10,0,0,1,125,7.11ZM122.59,4.6a7,7,0,0,0-.41-2.55,1.37,1.37,0,0,0-1.28-1c-1.37,0-2.53,2.17-3.46,6.53a40.11,40.11,0,0,0-1.07,8.26,10.65,10.65,0,0,0,.2,2.2q.39,1.77,1.44,1.77a2.2,2.2,0,0,0,1.77-1.29,18.29,18.29,0,0,0,1.66-4.93,45.71,45.71,0,0,0,.85-4.83A36.53,36.53,0,0,0,122.59,4.6Zm14.26-3.3.24-.06V.48h-3.4v.76a1.74,1.74,0,0,1,.91.33,2.13,2.13,0,0,1,.4,1.48c0,.28,0,.73-.11,1.34,0,.41-.11.87-.18,1.39l-1.29,8.34L129.83.48h-3.32v.76a1.69,1.69,0,0,1,.77.24,1.9,1.9,0,0,1,.51,1.06l.07.3L126,15a27,27,0,0,1-.75,3.61,1.35,1.35,0,0,1-.93.9v.76h3.44v-.76a1.67,1.67,0,0,1-.88-.32,1.92,1.92,0,0,1-.44-1.44c0-.26,0-.52,0-.79.05-.43.13-1.09.27-2l1.65-10.57,4.29,16.33h.41l2.29-15a31.07,31.07,0,0,1,.67-3.42C136.25,1.72,136.52,1.38,136.85,1.3Zm8.52,13.06a8.55,8.55,0,0,1-2.19,3.87,4.44,4.44,0,0,1-2.94,1,1,1,0,0,1-.68-.21.9.9,0,0,1-.24-.7,3.4,3.4,0,0,1,0-.48c0-.14,0-.28,0-.44l2.15-14.08a3.69,3.69,0,0,1,.5-1.64,2.22,2.22,0,0,1,1.16-.48V.48H138v.76a2.2,2.2,0,0,1,1,.31c.16.13.24.44.24.94a5.73,5.73,0,0,1-.05.67c0,.26-.07.57-.13,1l-2,13.23a4,4,0,0,1-.47,1.6,1.36,1.36,0,0,1-.87.52v.76h9.16l1-5.74ZM151.79.48v.76a1.52,1.52,0,0,1,.76.2,1.21,1.21,0,0,1,.37,1,4.09,4.09,0,0,1-.17,1.09c-.07.24-.16.5-.27.79L150.32,9.8l-1.18-6.44a4.51,4.51,0,0,1-.08-.6,4.37,4.37,0,0,1,0-.46c0-.43.09-.71.27-.83a1.75,1.75,0,0,1,.87-.23V.48h-4.63v.76a.94.94,0,0,1,.8.4,5.08,5.08,0,0,1,.42,1.44L148.2,11l-1,6.35a3.35,3.35,0,0,1-.61,1.73,1.91,1.91,0,0,1-1.06.39v.76h5.32v-.76a2,2,0,0,1-.95-.25,1.29,1.29,0,0,1-.33-1.05,7.29,7.29,0,0,1,.06-.73q.06-.51.12-.84l.82-5.46,3.12-7.89a5.54,5.54,0,0,1,.89-1.59,1.28,1.28,0,0,1,.63-.41V.48Z",opacity:1,strokeColor:"",fillColor:"#192760",width:155.237,height:20.783,stampFillColor:"#dce3ef",stampStrokeColor:""}}if(t)return t.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.currentStampAnnotation=t,t}},e.prototype.saveStampAnnotations=function(){var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_stamp");this.pdfViewerBase.isStorageExceed&&(e=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]);for(var t=new Array,i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e&&!this.pdfViewer.annotationSettings.skipDownload)for(var n=JSON.parse(e),o=0;o<n.length;o++){var s=[],a=n[o];if(a){for(var r=0;a.annotations.length>r;r++)this.pdfViewer.annotationModule.updateModifiedDate(a.annotations[r]),a.annotations[r].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(a.annotations[r].bounds,a.pageIndex));s=a.annotations}t[a.pageIndex]=s}return JSON.stringify(t)},e.prototype.storeStampInSession=function(e,t){var i=Math.round(JSON.stringify(window.sessionStorage).length/1024),n=Math.round(JSON.stringify(t).length/1024);this.pdfViewer.annotationModule.isFormFieldShape=!1,i+n>4500&&(this.pdfViewerBase.isStorageExceed=!0,this.pdfViewer.annotationModule.clearAnnotationStorage(),this.pdfViewerBase.isFormStorageExceed||this.pdfViewer.formFieldsModule.clearFormFieldStorage());var o=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_stamp"),s=0;if(this.pdfViewerBase.isStorageExceed&&(o=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]),o){this.pdfViewer.annotationModule.storeAnnotationCollections(t,e);var a=JSON.parse(o);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_stamp");var r=this.pdfViewer.annotationModule.getPageCollection(a,e);if(a[r])a[r].annotations.push(t),s=a[r].annotations.indexOf(t);else{var l={pageIndex:e,annotations:[]};l.annotations.push(t),s=l.annotations.indexOf(t),a.push(l)}p=JSON.stringify(a);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]=p:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_stamp",p)}else{this.pdfViewer.annotationModule.storeAnnotationCollections(t,e);var d={pageIndex:e,annotations:[]};d.annotations.push(t),s=d.annotations.indexOf(t);var h=[];h.push(d);var p=JSON.stringify(h);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]=p:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_stamp",p)}return s},e.prototype.updateSessionStorage=function(e,t,i){if(null!=t)for(var n=0;n<e.annotations.length;n++)if(e.annotations[n].id===t){e=e.annotations[n];break}"Rotate"===i&&(e=e.annotations[0]);var o=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_stamp");if(this.pdfViewerBase.isStorageExceed&&(o=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]),o)for(var s=e.bounds,a=JSON.parse(o),r=0;r<a.length;r++)for(var l=a[r],d=0;d<l.annotations.length;d++)if(null!=a[r].annotations[d]&&a[r].annotations[d].randomId===e.id){this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_stamp");var h=this.pdfViewer.annotationModule.getPageCollection(a,a[r].annotations[d].pageNumber);"delete"!==i?a[h]&&(e.wrapper.children[1]?a[r].annotations[d].opacity=e.wrapper.children[1].style.opacity:a[r].annotations[d].opacity=e.wrapper.children[0].style.opacity,a[r].annotations[d].rotateAngle=e.rotateAngle,a[r].annotations[d].bounds={left:s.x,top:s.y,width:e.wrapper.actualSize.width,height:e.wrapper.actualSize.height,right:s.right,bottom:s.bottom}):a[r].annotations.splice(d,1);var p=JSON.stringify(a);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]=p:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_stamp",p);break}},e.prototype.saveImportedStampAnnotations=function(e,t){var i,n=null,o=!1,s=e.IsDynamic;if(e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),e.allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),e.Subject&&s)i=this.retrieveDynamicStampAnnotation(e.Subject),o=!0;else if(e.Subject){if(i=this.retrievestampAnnotation(e.Subject),"Accepted"===e.Subject||"Rejected"===e.Subject){var a=es(i.pathdata);i.pathdata=os(a),o=!0}}else e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings),n={stampAnnotationType:"image",author:e.Author,modifiedDate:e.ModifiedDate,subject:e.Subject,allowedInteractions:e.allowedInteractions,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,stampFillcolor:e.FillColor,rotateAngle:e.RotateAngle,creationDate:e.ModifiedDate,pageNumber:t,icon:"",stampAnnotationPath:this.findImageData(e.Apperarance),randomId:"image",isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:" ",bounds:this.calculateImagePosition(e.Rect,!0),annotName:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,author:e.Author,modifiedDate:e.ModifiedDate},shapeAnnotationType:"stamp",annotationSelectorSettings:this.getSettings(e),annotationSettings:e.annotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.isPrint,isCommentLock:e.IsCommentLock,isMaskedImage:e.IsMaskedImage,customStampName:e.CustomStampName},this.pdfViewer.annotationModule.storeAnnotations(t,n,"_annotations_stamp");i&&(n={stampAnnotationType:"path",author:e.Author,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,stampFillcolor:i.stampFillColor,rotateAngle:e.RotateAngle,creationDate:e.ModifiedDate,pageNumber:t,icon:i.iconName,stampAnnotationPath:i.pathdata,randomId:"stamp",isDynamicStamp:!1,dynamicText:this.dynamicText,bounds:this.calculateImagePosition(e.Rect,!0),annotName:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,author:e.Author,modifiedDate:e.ModifiedDate},shapeAnnotationType:"stamp",annotationSelectorSettings:this.getSettings(e),annotationSettings:e.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.isPrint,isCommentLock:e.IsCommentLock,isMaskedImage:e.IsMaskedImage,customStampName:""},o&&(n.dynamicText=this.findDynamicText(e.Apperarance,e.Subject),n.isDynamicStamp=!0),this.pdfViewer.annotationModule.storeAnnotations(t,n,"_annotations_stamp"))},e.prototype.updateStampAnnotationCollections=function(e,t){var i,n=e.IsDynamic;e.allowedInteractions=e.AllowedInteractions?e.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e);var o=this.stampImageData(e);if(e.Subject&&n&&"Draft"!==e.Subject&&!o)i=this.retrieveDynamicStampAnnotation(e.Subject);else{if(!e.Subject||o)return e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings),e.IsLocked&&(e.AnnotationSettings.isLock=e.IsLocked),{stampAnnotationType:"image",author:e.Author,modifiedDate:e.ModifiedDate,allowedInteractions:e.allowedInteractions,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,stampFillcolor:e.StampFillColor,rotateAngle:e.RotateAngle,pageNumber:t,randomId:"stamp",isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,annotationId:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,author:e.Author,modifiedDate:e.ModifiedDate},shapeAnnotationType:"stamp",annotationSettings:e.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.isPrint,isMaskedImage:e.IsMaskedImage,customStampName:e.CustomStampName};i=this.retrievestampAnnotation(e.Subject)}if(i)return e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),e.IsLocked&&(e.AnnotationSettings.isLock=e.IsLocked),e.allowedInteractions=e.AllowedInteractions?e.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),{stampAnnotationType:"path",author:e.Author,allowedInteractions:e.allowedInteractions,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,stampFillcolor:e.StampFillColor,rotateAngle:e.RotateAngle,creationDate:i.creationDate,pageNumber:t,icon:i.iconName,stampAnnotationPath:i.pathdata,randomId:"stamp",isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,bounds:{left:e.Rect.X,top:e.Rect.Y,width:e.Rect.Width,height:e.Rect.Height},annotationId:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,author:e.Author,modifiedDate:e.ModifiedDate},shapeAnnotationType:"stamp",customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.isPrint,isMaskedImage:e.IsMaskedImage,customStampName:""}},e.prototype.stampImageData=function(e){var t=!1;if(e&&e.Apperarance)for(var i=0;i<e.Apperarance.length;i++)if(e.Apperarance[i].imagedata){t=!0;break}return t},e.prototype.findImageData=function(e){if(e)for(var t=0;t<e.length;t++){var i=e[t].imagedata;if(i)return i}return""},e.prototype.findDynamicText=function(e,t){var i="";if(e){for(var n=0;n<e.length;n++){var o=e[n],s=o.type,a=o.isImport;if("string"===s&&void 0!==o.text){var r=void 0;if(a)r=o.text;else{var l=o.text.split("(");r=l[1]?l[1].split(")")[0]:o.text}r.toLowerCase()!==t.toLowerCase()&&(i+=r)}}return i}return i},e.prototype.getAnnotations=function(e,t){var i,n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_stamp");if(this.pdfViewerBase.isStorageExceed&&(n=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]),n){var o=JSON.parse(n),s=this.pdfViewer.annotationModule.getPageCollection(o,e);i=o[s]?o[s].annotations:t}else i=t;return i},e.prototype.modifyInCollection=function(e,t,i){m(i.formFieldAnnotationType)||""===i.formFieldAnnotationType?this.pdfViewer.annotationModule.isFormFieldShape=!1:this.pdfViewer.annotationModule.isFormFieldShape=!0,this.pdfViewerBase.updateDocumentEditedProperty(!0);var n=this.getAnnotations(t,null);if(null!=n&&i){for(var o=0;o<n.length;o++)i.annotName===n[o].annotName&&("bounds"===e&&(n[o].bounds={left:i.wrapper.bounds.x,top:i.wrapper.bounds.y,width:i.wrapper.bounds.width,height:i.wrapper.bounds.height},n[o].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime()),this.pdfViewer.annotationModule.storeAnnotationCollections(n[o],t));this.manageAnnotations(n,t)}return null},e.prototype.manageAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_stamp");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]),i){var n=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_stamp");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[o]&&(n[o].annotations=e);var s=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]=s:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_stamp",s)}},e.prototype.updateAddAnnotationDetails=function(e,t,i,n,o,s){t=e?e.offset?e.offset:{x:10,y:10}:(e={offset:{x:10,y:10},pageNumber:0,width:void 0,height:void 0}).offset,n||o||s||(n=ea.Approved);var a=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),r=this.pdfViewer.annotation.createGUID(),l=i,d=[],h="",p="Stamp",c=[],u=!1,f=e.author?e.author:"Guest",m=this.pdfViewer.stampSettings.annotationSelectorSettings?this.pdfViewer.stampSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,g=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),y=this.pdfViewer.stampSettings.allowedInteractions?this.pdfViewer.stampSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;if(g.isLock=!!e.isLock&&e.isLock,g.minHeight=e.minHeight?e.minHeight:0,g.minWidth=e.minWidth?e.minWidth:0,g.maxWidth=e.maxWidth?e.maxWidth:0,g.maxHeight=e.maxHeight?e.maxHeight:0,e.customStamps&&e.customStamps[0].customStampName)c[0]={imagedata:e.customStamps[0].customStampImageSource,isImport:!0},this.customStampName=e.customStamps[0].customStampName,this.pdfViewerBase.customStampCollection.push(e.customStamps[0]),p="Image",e.width=e.width?e.width:100,e.height=e.height?e.height:100;else if(n){var v;v=a.split(" "),h=n.toString(),c[0]={baseFontName:"Helvetica-BoldOblique",currentFontname:"95b303ab-d397-438a-83af-e2ff8a9900f1",fontSize:10,isImport:!0,text:"By "+f+" at "+v[1]+v[2]+" , "+v[0],type:"string"},u=!0,e.width=e.width?e.width:140,e.height=e.height?e.height:55}else o?(h=o.toString(),o==ta.Accepted||o==ta.Rejected?(e.width=e.width?e.width:35,e.height=e.height?e.height:35):o==ta.SignHere?(e.width=e.width?e.width:110,e.height=e.height?e.height:30):o==ta.Witness?(e.width=e.width?e.width:130,e.height=e.height?e.height:30):o==ta.InitialHere&&(e.width=e.width?e.width:90,e.height=e.height?e.height:30)):s&&(h=s.toString(),s==ia.Final||s==ia.Draft?(e.width=e.width?e.width:110,e.height=e.height?e.height:30):s==ia.Void?(e.width=e.width?e.width:100,e.height=e.height?e.height:30):(e.width=e.width?e.width:130,e.height=e.height?e.height:30));var w={AllowedInteractions:e.allowedInteractions?e.allowedInteractions:y,AnnotName:r,AnnotType:"stamp",AnnotationSelectorSettings:e.annotationSelectorSettings?e.annotationSelectorSettings:m,AnnotationSettings:g,Apperarance:c||null,Author:f,Comments:null,CreatedDate:a,CustomData:e.customData?e.customData:null,ExistingCustomData:null,FillColor:"#192760",Icon:0,IsCommentLock:!1,IsDynamic:u,IsLocked:!!e.isLock&&e.isLock,IsPrint:!e.isPrint||e.isPrint,ModifiedDate:"",Name:null,Note:"",Opacity:e.opacity?e.opacity:1,Rect:{X:t.x,Y:t.y,Width:e.width,Height:e.height,Left:t.x,Top:t.y,Location:{X:t.x,Y:t.y},Size:{Height:e.height,IsEmpty:!1,Width:e.width}},RotateAngle:0,StampAnnotationtype:p,State:"",StateModel:"",StrokeColor:"#dce3ef",Subject:h,matrix:null,CustomStampName:this.customStampName?this.customStampName:"",pageNumber:l};return d[0]=w,{stampAnnotations:d}},e.prototype.triggerAnnotationAdd=function(e,t){var i={opacity:e.opacity,borderColor:e.strokeColor,borderWidth:e.thickness,author:t.author,subject:t.subject,modifiedDate:t.modifiedDate,fillColor:e.fillColor,fontSize:e.fontSize,width:e.bounds.width,height:e.bounds.height,fontColor:e.fontColor,fontFamily:e.fontFamily,defaultText:e.dynamicText,fontStyle:e.font,textAlignment:e.textAlign};this.pdfViewer.fireAnnotationAdd(e.pageIndex,e.annotName,"Stamp",e.bounds,i)},e}(),Gg=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Jg=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Kg="e-acrdn-root",$g="e-accordion",ey="e-acrdn-item",ty="e-item-focus",iy="e-hide",ny="e-acrdn-header",oy="e-acrdn-header-content",sy="e-acrdn-panel",ay="e-acrdn-content",ry="e-toggle-icon",ly="e-expand-icon",dy="e-rtl",hy="e-content-hide",py="e-select",cy="e-selected",uy="e-active",fy="e-overlay",my="e-toggle-animation",gy="e-expand-state",yy="e-accordion-container",vy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gg(t,e),Jg([Ge("SlideDown")],t.prototype,"effect",void 0),Jg([Ge(400)],t.prototype,"duration",void 0),Jg([Ge("linear")],t.prototype,"easing",void 0),t}(mt),wy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gg(t,e),Jg([Je({effect:"SlideUp",duration:400,easing:"linear"},vy)],t.prototype,"collapse",void 0),Jg([Je({effect:"SlideDown",duration:400,easing:"linear"},vy)],t.prototype,"expand",void 0),t}(mt),by=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gg(t,e),Jg([Ge(null)],t.prototype,"content",void 0),Jg([Ge(null)],t.prototype,"header",void 0),Jg([Ge(null)],t.prototype,"cssClass",void 0),Jg([Ge(null)],t.prototype,"iconCss",void 0),Jg([Ge(!1)],t.prototype,"expanded",void 0),Jg([Ge(!0)],t.prototype,"visible",void 0),Jg([Ge(!1)],t.prototype,"disabled",void 0),Jg([Ge()],t.prototype,"id",void 0),t}(mt),Sy=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.keyConfigs={moveUp:"uparrow",moveDown:"downarrow",enter:"enter",space:"space",home:"home",end:"end"},n}return Gg(t,e),t.prototype.destroy=function(){(this.isReact||this.isAngular||this.isVue)&&this.clearTemplate();var t=this.element;if(e.prototype.destroy.call(this),this.unwireEvents(),this.isDestroy=!0,this.restoreContent(null),[].slice.call(t.children).forEach((function(e){t.removeChild(e)})),this.trgtEle){for(this.trgtEle=null;this.ctrlTem.firstElementChild;)t.appendChild(this.ctrlTem.firstElementChild);this.ctrlTem=null}t.classList.remove(Kg),t.removeAttribute("style"),this.element.removeAttribute("data-ripple"),!this.isNested&&pt&&this.removeRippleEffect()},t.prototype.preRender=function(){var e=Fe(this.element,"."+sy);this.isNested=!1,this.templateEle=[],this.isDestroy||(this.isDestroy=!1),e&&e.firstElementChild&&e.firstElementChild.firstElementChild?e.firstElementChild.firstElementChild.classList.contains($g)&&(e.classList.add("e-nested"),this.isNested=!0):this.element.classList.add(Kg),this.enableRtl&&this.add(this.element,dy)},t.prototype.add=function(e,t){e.classList.add(t)},t.prototype.remove=function(e,t){e.classList.remove(t)},t.prototype.render=function(){this.initializeHeaderTemplate(),this.initializeItemTemplate(),this.initialize(),this.renderControl(),this.wireEvents(),this.renderComplete()},t.prototype.initialize=function(){var e=b(this.width),t=b(this.height);Le(this.element,{width:e,height:t}),m(this.initExpand)&&(this.initExpand=[]),this.expandedIndices.length>0&&(this.initExpand=this.expandedIndices)},t.prototype.renderControl=function(){this.trgtEle=this.element.children.length>0?Ee("div",this.element):null,this.renderItems(),this.initItemExpand()},t.prototype.wireFocusEvents=function(){for(var e=0,t=[].slice.call(this.element.querySelectorAll("."+ey));e<t.length;e++){var i=t[e],n=i.querySelector("."+ny);i.childElementCount>0&&n&&(ye.clearEvents(n),ye.add(n,"focus",this.focusIn,this),ye.add(n,"blur",this.focusOut,this))}},t.prototype.unwireEvents=function(){ye.remove(this.element,"click",this.clickHandler),m(this.keyModule)||this.keyModule.destroy()},t.prototype.wireEvents=function(){ye.add(this.element,"click",this.clickHandler,this),this.isNested||this.isDestroy||(this.removeRippleEffect=at(this.element,{selector:"."+ny})),this.isNested||(this.keyModule=new Ut(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}))},t.prototype.templateParser=function(e){if(e)try{return document.querySelectorAll(e).length?Mi(document.querySelector(e).innerHTML.trim()):Mi(e)}catch(t){return Mi(e)}},t.prototype.initializeHeaderTemplate=function(){this.headerTemplate&&(this.headerTemplateFn=this.templateParser(this.headerTemplate))},t.prototype.initializeItemTemplate=function(){this.itemTemplate&&(this.itemTemplateFn=this.templateParser(this.itemTemplate))},t.prototype.getHeaderTemplate=function(){return this.headerTemplateFn},t.prototype.getItemTemplate=function(){return this.itemTemplateFn},t.prototype.focusIn=function(e){e.target.parentElement.classList.add(ty)},t.prototype.focusOut=function(e){e.target.parentElement.classList.remove(ty)},t.prototype.ctrlTemplate=function(){var e;this.ctrlTem=this.element.cloneNode(!0);var t=Ee("."+yy,this.element);e=t?t.children:this.element.children;var i=[];[].slice.call(e).forEach((function(e){i.push({header:e.childElementCount>0&&e.children[0]?e.children[0]:"",content:e.childElementCount>1&&e.children[1]?e.children[1]:""}),e.parentNode.removeChild(e)})),t&&this.element.removeChild(t),this.setProperties({items:i},!0)},t.prototype.toggleIconGenerate=function(){var e=this.createElement("div",{className:ry}),t=this.createElement("span",{className:"e-tgl-collapse-icon e-icons"});return e.appendChild(t),e},t.prototype.initItemExpand=function(){var e=this.initExpand.length;if(0!==e){if("Single"===this.expandMode)this.expandItem(!0,this.initExpand[e-1]);else for(var t=0;t<e;t++)this.expandItem(!0,this.initExpand[parseInt(t.toString(),10)]);this.isReact&&this.renderReactTemplates()}},t.prototype.renderItems=function(){var e,t,i=this,n=this.element;if(m(this.trgtEle)||this.ctrlTemplate(),this.dataSource.length>0)this.dataSource.forEach((function(e,o){t=i.renderInnerItem(e,o),n.appendChild(t),t.childElementCount>0&&(ye.add(t.querySelector("."+ny),"focus",i.focusIn,i),ye.add(t.querySelector("."+ny),"blur",i.focusOut,i))}));else{var o=this.items;n&&o.length>0&&o.forEach((function(t,o){e=i.renderInnerItem(t,o),n.appendChild(e),e.childElementCount>0&&(ye.add(e.querySelector("."+ny),"focus",i.focusIn,i),ye.add(e.querySelector("."+ny),"blur",i.focusOut,i))}))}this.isReact&&this.renderReactTemplates()},t.prototype.clickHandler=function(e){var t,i=e.target,n=this.getItems(),o={};if(Fe(i,"."+$g)===this.element){i.classList.add("e-target");var s,a=Fe(i,"."+ey),r=Fe(i,"."+ny),l=Fe(i,"."+sy);a&&(m(r)||m(l))&&(r=a.children[0],l=a.children[1]),r&&(t=Ee("."+ry,r)),r?s=Fe(r,"."+ey):l&&(s=Fe(l,"."+ey));var d=this.getIndexByItem(a);s&&(o.item=n[this.getIndexByItem(s)]),o.originalEvent=e,!(!m(t)&&a.childElementCount<=1)||!m(l)&&m(Ee("."+ny+" ."+ry,s))||(a.appendChild(this.contentRendering(d)),this.ariaAttrUpdate(a)),this.afterContentRender(i,o,a,r,l,s),this.isReact&&this.renderReactTemplates()}},t.prototype.afterContentRender=function(e,t,i,n,o,s){var a=this,r=[];this.trigger("clicked",t);var l=o&&!m(Ee(".e-target",o)),d="."+sy+" ."+$g,h=o&&!m(Ee("."+$g,o))&&m(Fe(e,d)),p=o&&m(Ee("."+$g,o))||!(Fe(e,"."+$g)===this.element);if(l=l&&(h||p),e.classList.remove("e-target"),!(e.classList.contains(sy)||e.classList.contains(ay)||l)){var c=this.element.querySelector("."+yy),u=c?c.children:this.element.children;[].slice.call(u).forEach((function(e){e.classList.contains(uy)&&r.push(e)}));var f=[].slice.call(this.element.querySelectorAll("."+ey+" [e-animate]"));if(f.length>0)for(var g=0,y=f;g<y.length;g++){var v=y[g];r.push(v.parentElement)}var w=-1!==r.indexOf(s)&&"true"===o.getAttribute("e-animate"),b=!1;if(!m(i)&&!m(n)){var S=Ee("."+sy,i),C=Fe(i,"."+Kg).querySelector("."+gy);if(m(S))return;b=C===i,!xe(S)||w&&!s.classList.contains(cy)?(r.length>0&&"Single"===this.expandMode&&!w&&r.forEach((function(e){a.collapse(Ee("."+sy,e)),e.classList.remove(gy)})),this.expand(S)):this.collapse(S),m(C)||b||C.classList.remove(gy)}}},t.prototype.eleMoveFocus=function(e,t,i){var n,o=Fe(i,"."+ey);i===t?n=("moveUp"===e?i.lastElementChild:i).querySelector("."+ny):i.classList.contains(ny)&&(o="moveUp"===e?o.previousElementSibling:o.nextElementSibling)&&(n=Ee("."+ny,o)),n&&n.focus()},t.prototype.keyActionHandler=function(e){var t=e.target;if(!m(Fe(e.target,ny))||t.classList.contains($g)||t.classList.contains(ny)){var i,n=this.element;switch(e.action){case"moveUp":case"moveDown":this.eleMoveFocus(e.action,n,t);break;case"space":case"enter":!m(i=t.nextElementSibling)&&i.classList.contains(sy)?"true"!==i.getAttribute("e-animate")&&t.click():t.click(),e.preventDefault();break;case"home":case"end":("home"===e.action?n.firstElementChild.children[0]:n.lastElementChild.children[0]).focus(),e.preventDefault()}}},t.prototype.headerEleGenerate=function(){var e=this.createElement("div",{className:ny,id:y("acrdn_header")});return Ve(e,{tabindex:"0",role:"button","aria-disabled":"false","aria-expanded":"false"}),e},t.prototype.renderInnerItem=function(e,t){var i=this.createElement("div",{className:ey,id:e.id||y("acrdn_item")});if(this.headerTemplate){var n=this.headerEleGenerate(),o=this.createElement("div",{className:oy});return n.appendChild(o),Ie(this.getHeaderTemplate()(e,this,"headerTemplate",this.element.id+"_headerTemplate",!1),o),i.appendChild(n),n.appendChild(this.toggleIconGenerate()),this.add(i,py),i}if(e.header&&this.angularnativeCondiCheck(e,"header")){this.enableHtmlSanitizer&&"string"===typeof e.header&&(e.header=Vi.sanitize(e.header));n=this.headerEleGenerate(),o=this.createElement("div",{className:oy});n.appendChild(o),n.appendChild(this.fetchElement(o,e.header,t,!0)),i.appendChild(n)}var s=Ee("."+ny,i);if(!e.expanded||m(t)||this.enablePersistence||-1===this.initExpand.indexOf(t)&&this.initExpand.push(t),e.cssClass&&be([i],e.cssClass.split(" ")),e.disabled&&be([i],fy),!1===e.visible&&be([i],iy),e.iconCss){var a=this.createElement("div",{className:"e-acrdn-header-icon"}),r=this.createElement("span",{className:e.iconCss+" e-icons"});a.appendChild(r),m(s)?((s=this.headerEleGenerate()).appendChild(a),i.appendChild(s)):s.insertBefore(a,s.childNodes[0])}if(e.content&&this.angularnativeCondiCheck(e,"content")){var l=this.toggleIconGenerate();m(s)&&(s=this.headerEleGenerate(),i.appendChild(s)),s.appendChild(l),this.add(i,py)}return i},t.prototype.angularnativeCondiCheck=function(e,t){var i="content"===t?e.content:e.header;if(this.isAngular&&!m(i.elementRef)){var n=i.elementRef.nativeElement.data;if(m(n)||""===n||-1===n.indexOf("bindings="))return!0;var o=JSON.parse(i.elementRef.nativeElement.data.replace("bindings=",""));return!(!m(o)&&"false"===o["ng-reflect-ng-if"])}return!0},t.prototype.fetchElement=function(e,t,i,n){var o,s,a;try{if(document.querySelectorAll(t).length&&"Button"!==t){var r=document.querySelector(t);s=r.outerHTML.trim(),e.appendChild(r),r.style.display=""}else o=Mi(t)}catch(h){"string"===typeof t?e.innerHTML=Vi.sanitize(t):!m(this.trgtEle)&&t instanceof HTMLElement?(e.appendChild(t),e.firstElementChild.style.display=""):o=Mi(t)}if(!m(o)){this.isReact&&this.renderReactTemplates();var l=void 0,d=void 0;e.classList.contains(oy)?(l=this.element.id+i+"_header",d="header"):e.classList.contains(ay)&&(l=this.element.id+i+"_content",d="content"),a=o({},this,d,l,this.isStringTemplate)}return m(a)||!(a.length>0)||m(a[0].tagName)&&1===a.length?0===e.childElementCount&&(e.innerHTML=Vi.sanitize(t)):[].slice.call(a).forEach((function(t){m(t.tagName)||(t.style.display=""),e.appendChild(t)})),m(s)||-1===this.templateEle.indexOf(t)&&this.templateEle.push(t),e},t.prototype.ariaAttrUpdate=function(e){var t=Ee("."+ny,e),i=Ee("."+sy,e);t.setAttribute("aria-controls",i.id),i.setAttribute("aria-labelledby",t.id),i.setAttribute("role","region")},t.prototype.contentRendering=function(e){var t=this.createElement("div",{className:sy+" "+hy,id:y("acrdn_panel")});Ve(t,{"aria-hidden":"true"});var i=this.createElement("div",{className:ay});return this.dataSource.length>0?(this.isReact&&this.renderReactTemplates(),Ie(this.getItemTemplate()(this.dataSource[parseInt(e.toString(),10)],this,"itemTemplate",this.element.id+"_itemTemplate",!1),i),t.appendChild(i)):(this.enableHtmlSanitizer&&(this.items[parseInt(e.toString(),10)].content,1)&&(this.items[parseInt(e.toString(),10)].content=Vi.sanitize(this.items[parseInt(e.toString(),10)].content)),t.appendChild(this.fetchElement(i,this.items[parseInt(e.toString(),10)].content,e,!1))),t},t.prototype.expand=function(e){var t=this,i=this.getItems(),n=Fe(e,"."+ey);if(!(m(e)||xe(e)&&"true"!==e.getAttribute("e-animate")||n.classList.contains(fy))){var o=Fe(n,"."+Kg).querySelector("."+gy),s={name:this.animation.expand.effect,duration:this.animation.expand.duration,timingFunction:this.animation.expand.easing},a=Ee("."+ry,n).firstElementChild,r={element:n,item:i[this.getIndexByItem(n)],index:this.getIndexByItem(n),content:n.querySelector("."+sy),isExpanded:!0};this.trigger("expanding",r,(function(i){i.cancel||(a.classList.add(my),t.expandedItemsPush(n),m(o)||o.classList.remove(gy),n.classList.add(gy),"None"===s.name?(t.expandProgress("begin",a,e,n,i),t.expandProgress("end",a,e,n,i)):t.expandAnimation(s.name,a,e,n,s,i))}))}},t.prototype.expandAnimation=function(e,t,i,n,o,s){var a,r=this;this.lastActiveItemId=n.id,"SlideDown"===e?(o.begin=function(){r.expandProgress("begin",t,i,n,s),i.style.position="absolute",a=n.offsetHeight,i.style.maxHeight=i.offsetHeight+"px",n.style.maxHeight=""},o.progress=function(){n.style.minHeight=a+i.offsetHeight+"px"},o.end=function(){Le(i,{position:"",maxHeight:""}),n.style.minHeight="",r.expandProgress("end",t,i,n,s)}):(o.begin=function(){r.expandProgress("begin",t,i,n,s)},o.end=function(){r.expandProgress("end",t,i,n,s)}),new st(o).animate(i)},t.prototype.expandProgress=function(e,t,i,n,o){this.remove(i,hy),this.add(n,cy),this.add(t,ly),"end"===e&&(this.add(n,uy),i.setAttribute("aria-hidden","false"),Ve(i.previousElementSibling,{"aria-expanded":"true"}),t.classList.remove(my),this.trigger("expanded",o))},t.prototype.expandedItemsPush=function(e){var t=this.getIndexByItem(e);if(-1===this.expandedIndices.indexOf(t)){var i=[].slice.call(this.expandedIndices);i.push(t),this.setProperties({expandedIndices:i},!0)}},t.prototype.getIndexByItem=function(e){var t=this.getItemElements();return[].slice.call(t).indexOf(e)},t.prototype.getItemElements=function(){var e=[],t=this.element.children;return[].slice.call(t).forEach((function(t){t.classList.contains(ey)&&e.push(t)})),e},t.prototype.expandedItemsPop=function(e){var t=this.getIndexByItem(e),i=[].slice.call(this.expandedIndices);i.splice(i.indexOf(t),1),this.setProperties({expandedIndices:i},!0)},t.prototype.collapse=function(e){var t=this,i=this.getItems(),n=Fe(e,"."+ey);if(!m(e)&&xe(e)&&!n.classList.contains(fy)){var o={name:this.animation.collapse.effect,duration:this.animation.collapse.duration,timingFunction:this.animation.collapse.easing},s=Ee("."+ry,n).firstElementChild,a={element:n,item:i[this.getIndexByItem(n)],index:this.getIndexByItem(n),content:n.querySelector("."+sy),isExpanded:!1};this.trigger("expanding",a,(function(i){i.cancel||(t.expandedItemsPop(n),n.classList.remove(gy),s.classList.add(my),"None"===o.name?(t.collapseProgress("begin",s,e,n,i),t.collapseProgress("end",s,e,n,i)):t.collapseAnimation(o.name,e,n,s,o,i))}))}},t.prototype.collapseAnimation=function(e,t,i,n,o,s){var a,r,l,d,h=this;this.lastActiveItemId=i.id,"SlideUp"===e?(o.begin=function(){l=i.offsetHeight,i.style.minHeight=l+"px",t.style.position="absolute",a=i.offsetHeight,r=t.offsetHeight,t.style.maxHeight=r+"px",h.collapseProgress("begin",n,t,i,s)},o.progress=function(){(d=a-(r-t.offsetHeight))<l&&(i.style.minHeight=d+"px")},o.end=function(){t.style.display="none",h.collapseProgress("end",n,t,i,s),i.style.minHeight="",Le(t,{position:"",maxHeight:"",display:""})}):(o.begin=function(){h.collapseProgress("begin",n,t,i,s)},o.end=function(){h.collapseProgress("end",n,t,i,s)}),new st(o).animate(t)},t.prototype.collapseProgress=function(e,t,i,n,o){this.remove(t,ly),this.remove(n,cy),"end"===e&&(this.add(i,hy),t.classList.remove(my),this.remove(n,uy),i.setAttribute("aria-hidden","true"),Ve(i.previousElementSibling,{"aria-expanded":"false"}),this.trigger("expanded",o))},t.prototype.getModuleName=function(){return"accordion"},t.prototype.getItems=function(){return this.itemTemplate&&this.headerTemplate?this.dataSource:this.items},t.prototype.addItem=function(e,t){var i=this,n=this.element,o=this.getItemElements(),s=this.getItems();(m(t)&&(t=s.length),n.childElementCount>=t)&&(e instanceof Array?e:[e]).forEach((function(e,a){var r=t+a;s.splice(r,0,e);var l=i.renderInnerItem(e,r);n.childElementCount===r?n.appendChild(l):n.insertBefore(l,o[parseInt(r.toString(),10)]),ye.add(l.querySelector("."+ny),"focus",i.focusIn,i),ye.add(l.querySelector("."+ny),"blur",i.focusOut,i),i.expandedIndices=[],i.expandedItemRefresh(n),e&&e.expanded&&i.expandItem(!0,r)}));this.isReact&&this.renderReactTemplates()},t.prototype.expandedItemRefresh=function(e){var t=this,i=this.getItemElements();[].slice.call(i).forEach((function(e){e.classList.contains(cy)&&t.expandedItemsPush(e)}))},t.prototype.removeItem=function(e){this.isReact&&this.clearTemplate(["headerTemplate","itemTemplate"],e);var t=this.getItemElements()[parseInt(e.toString(),10)],i=this.getItems();m(t)||(this.restoreContent(e),Ae(t),i.splice(e,1),this.expandedIndices=[],this.expandedItemRefresh(this.element))},t.prototype.select=function(e){var t=this.getItemElements()[parseInt(e.toString(),10)];m(t)||m(Ee("."+ny,t))||t.children[0].focus()},t.prototype.hideItem=function(e,t){var i=this.getItemElements()[parseInt(e.toString(),10)];m(i)||(m(t)&&(t=!0),t?this.add(i,iy):this.remove(i,iy))},t.prototype.enableItem=function(e,t){var i=this.getItemElements()[parseInt(e.toString(),10)];if(!m(i)){var n=i.firstElementChild;t?(this.remove(i,fy),Ve(n,{tabindex:"0","aria-disabled":"false"}),n.focus()):(i.classList.contains(uy)&&(this.expandItem(!1,e),this.eleMoveFocus("movedown",this.element,n)),this.add(i,fy),n.setAttribute("aria-disabled","true"),n.removeAttribute("tabindex"))}},t.prototype.expandItem=function(e,t){var i=this,n=this.getItemElements();if(m(t))if("Single"===this.expandMode&&e){var o=n[n.length-1];this.itemExpand(e,o,this.getIndexByItem(o))}else{var s=Ee("#"+this.lastActiveItemId,this.element);[].slice.call(n).forEach((function(t){i.itemExpand(e,t,i.getIndexByItem(t)),t.classList.remove(gy)}));var a=Ee("."+gy,this.element);a&&a.classList.remove(gy),s&&s.classList.add(gy)}else{if(m(o=n[parseInt(t.toString(),10)])||!o.classList.contains(py)||o.classList.contains(uy)&&e)return;"Single"===this.expandMode&&this.expandItem(!1),this.itemExpand(e,o,t)}},t.prototype.itemExpand=function(e,t,i){var n=t.children[1];t.classList.contains(fy)||(m(n)&&e?(n=this.contentRendering(i),t.appendChild(n),this.ariaAttrUpdate(t),this.expand(n)):m(n)||(e?this.expand(n):this.collapse(n)),this.isReact&&this.renderReactTemplates())},t.prototype.destroyItems=function(){this.restoreContent(null),(this.isReact||this.isAngular||this.isVue)&&this.clearTemplate(),[].slice.call(this.element.querySelectorAll("."+ey)).forEach((function(e){Ae(e)}))},t.prototype.restoreContent=function(e){var t;t=m(e)?this.element:this.element.querySelectorAll("."+ey)[parseInt(e.toString(),10)],this.templateEle.forEach((function(e){m(t.querySelector(e))||(document.body.appendChild(t.querySelector(e)).style.display="none")}))},t.prototype.updateItem=function(e,t){if(!m(e)){var i=this.getItems(),n=i[parseInt(t.toString(),10)];i.splice(t,1),this.restoreContent(t),Ae(e),this.addItem(n,t)}},t.prototype.setTemplate=function(e,t,i){t.innerHTML="",this.templateCompile(t,e,i),this.isReact&&this.renderReactTemplates()},t.prototype.templateCompile=function(e,t,i){var n=this.createElement("div");this.fetchElement(n,t,i,!1),0!==n.childNodes.length&&[].slice.call(n.childNodes).forEach((function(t){e.appendChild(t)}))},t.prototype.getPersistData=function(){return this.addOnPersist(["expandedIndices"])},t.prototype.onPropertyChanged=function(e,t){for(var i=this.element,n=!1,o=0,s=Object.keys(e);o<s.length;o++){switch(s[o]){case"items":if(e.items instanceof Array&&t.items instanceof Array)n=!0;else for(var a=Object.keys(e.items),r=0;r<a.length;r++){var l=parseInt(Object.keys(e.items)[parseInt(r.toString(),10)],10),d=Object.keys(e.items[parseInt(l.toString(),10)])[0],h=De("."+ey,this.element)[parseInt(l.toString(),10)],p=Object(t.items[parseInt(l.toString(),10)])[""+d],c=Object(e.items[parseInt(l.toString(),10)])[""+d];if(("header"===d||"iconCss"===d||"expanded"===d||"content"===d&&""===p)&&this.updateItem(h,l),"cssClass"!==d||m(h)||(p&&Se([h],p.split(" ")),c&&be([h],c.split(" "))),"visible"!==d||m(h)||(!1===Object(e.items[parseInt(l.toString(),10)])[""+d]?h.classList.add(iy):h.classList.remove(iy)),"disabled"!==d||m(h)||this.enableItem(l,!c),"content"===d&&!m(h)&&2===h.children.length)if("function"===typeof c){var u=h.querySelector("."+ay);u.innerHTML="",this.setTemplate(c,u,l)}else h.classList.contains(cy)&&this.expandItem(!1,l),Ae(h.querySelector("."+sy))}break;case"dataSource":case"expandedIndices":null===this.expandedIndices&&(this.expandedIndices=[]),n=!0;break;case"headerTemplate":this.initializeHeaderTemplate(),n=!0;break;case"itemTemplate":this.initializeItemTemplate(),n=!0;break;case"enableRtl":e.enableRtl?this.add(i,dy):this.remove(i,dy);break;case"height":Le(this.element,{height:b(e.height)});break;case"width":Le(this.element,{width:b(e.width)});break;case"expandMode":"Single"===e.expandMode&&this.expandedIndices.length>1&&this.expandItem(!1)}}n&&(this.initExpand=[],this.expandedIndices.length>0&&(this.initExpand=this.expandedIndices),this.destroyItems(),this.renderItems(),this.initItemExpand())},Jg([Ke([],by)],t.prototype,"items",void 0),Jg([Ge([])],t.prototype,"dataSource",void 0),Jg([Ge()],t.prototype,"itemTemplate",void 0),Jg([Ge()],t.prototype,"headerTemplate",void 0),Jg([Ge("100%")],t.prototype,"width",void 0),Jg([Ge("auto")],t.prototype,"height",void 0),Jg([Ge([])],t.prototype,"expandedIndices",void 0),Jg([Ge("Multiple")],t.prototype,"expandMode",void 0),Jg([Ge(!1)],t.prototype,"enableHtmlSanitizer",void 0),Jg([Je({},wy)],t.prototype,"animation",void 0),Jg([$e()],t.prototype,"clicked",void 0),Jg([$e()],t.prototype,"expanding",void 0),Jg([$e()],t.prototype,"expanded",void 0),Jg([$e()],t.prototype,"created",void 0),Jg([$e()],t.prototype,"destroyed",void 0),t=Jg([et],t)}(Dt),Cy=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),xy=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},My="e-other-month",Iy="e-other-year",Ty="e-calendar",Ay="e-device",ky="e-rtl",Vy="e-year",Ey="e-month",Dy="e-decade",Ny="e-icons",Fy="e-disabled",Ly="e-overlay",Py="e-week-number",Oy="e-selected",By="e-focused-date",zy="e-month-hide",jy="e-today",Ry="e-day",_y="e-cell",Hy="e-zoomin",Wy="e-calendar-day-header-lg",Uy=864e5,qy=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.effect="",n.isPopupClicked=!1,n.isDateSelected=!0,n.isTodayClicked=!1,n.preventChange=!1,n.isAngular=!1,n.previousDates=!1,n}return Cy(t,e),t.prototype.render=function(){this.rangeValidation(this.min,this.max),this.calendarEleCopy=this.element.cloneNode(!0),"Islamic"===this.calendarMode&&(+this.min.setSeconds(0)===+new Date(1900,0,1,0,0,0)&&(this.min=new Date(1944,2,18)),+this.max===+new Date(2099,11,31)&&(this.max=new Date(2069,10,16))),this.globalize=new ee(this.locale),(m(this.firstDayOfWeek)||this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:this.globalize.getFirstDayOfWeek()},!0),this.todayDisabled=!1,this.todayDate=new Date((new Date).setHours(0,0,0,0)),"calendar"===this.getModuleName()?(this.element.classList.add(Ty),this.enableRtl&&this.element.classList.add(ky),ge.isDevice&&this.element.classList.add(Ay),Ve(this.element,{"data-role":"calendar"}),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.setAttribute("tabindex",this.tabIndex)):(this.calendarElement=this.createElement("div"),this.calendarElement.classList.add(Ty),this.enableRtl&&this.calendarElement.classList.add(ky),ge.isDevice&&this.calendarElement.classList.add(Ay),Ve(this.calendarElement,{"data-role":"calendar"})),!m(Fe(this.element,"fieldset"))&&Fe(this.element,"fieldset").disabled&&(this.enabled=!1),this.createHeader(),this.createContent(),this.wireEvents()},t.prototype.rangeValidation=function(e,t){m(e)&&this.setProperties({min:new Date(1900,0,1)},!0),m(t)&&this.setProperties({max:new Date(2099,11,31)},!0)},t.prototype.getDefaultKeyConfig=function(){return this.defaultKeyConfigs={controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",altUpArrow:"alt+uparrow",spacebar:"space",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"},this.defaultKeyConfigs},t.prototype.validateDate=function(e){this.setProperties({min:this.checkDateValue(new Date(this.checkValue(this.min)))},!0),this.setProperties({max:this.checkDateValue(new Date(this.checkValue(this.max)))},!0),this.currentDate=this.currentDate?this.currentDate:new Date((new Date).setHours(0,0,0,0)),!m(e)&&this.min<=this.max&&e>=this.min&&e<=this.max&&(this.currentDate=new Date(this.checkValue(e)))},t.prototype.setOverlayIndex=function(e,t,i,n){if(n&&!m(t)&&!m(i)&&!m(e)){var o=parseInt(t.style.zIndex,10)?parseInt(t.style.zIndex,10):1e3;i.style.zIndex=(o-1).toString(),e.style.zIndex=o.toString()}},t.prototype.minMaxUpdate=function(e){+this.min<=+this.max?Se([this.element],Ly):(this.setProperties({min:this.min},!0),be([this.element],Ly)),this.min=m(this.min)||!+this.min?this.min=new Date(1900,0,1):this.min,this.max=m(this.max)||!+this.max?this.max=new Date(2099,11,31):this.max,+this.min<=+this.max&&e&&+e<=+this.max&&+e>=+this.min?this.currentDate=new Date(this.checkValue(e)):+this.min<=+this.max&&!e&&+this.currentDate>+this.max?this.currentDate=new Date(this.checkValue(this.max)):+this.currentDate<+this.min&&(this.currentDate=new Date(this.checkValue(this.min)))},t.prototype.createHeader=function(){this.headerElement=this.createElement("div",{className:"e-header"});var e=this.createElement("div",{className:"e-icon-container"});this.previousIcon=this.createElement("button",{className:"e-prev",attrs:{type:"button"}}),at(this.previousIcon,{duration:400,selector:".e-prev",isCenterRipple:!0}),Ve(this.previousIcon,{"aria-disabled":"false","aria-label":"previous month"}),this.nextIcon=this.createElement("button",{className:"e-next",attrs:{type:"button"}}),at(this.nextIcon,{selector:".e-next",duration:400,isCenterRipple:!0}),"daterangepicker"===this.getModuleName()&&(Ve(this.previousIcon,{tabIndex:"-1"}),Ve(this.nextIcon,{tabIndex:"-1"})),Ve(this.nextIcon,{"aria-disabled":"false","aria-label":"next month"}),this.headerTitleElement=this.createElement("div",{className:Ry+" e-title"}),Ve(this.headerTitleElement,{"aria-atomic":"true","aria-live":"assertive","aria-label":"title"}),this.headerElement.appendChild(this.headerTitleElement),this.previousIcon.appendChild(this.createElement("span",{className:"e-date-icon-prev "+Ny})),this.nextIcon.appendChild(this.createElement("span",{className:"e-date-icon-next  "+Ny})),e.appendChild(this.previousIcon),e.appendChild(this.nextIcon),this.headerElement.appendChild(e),"calendar"===this.getModuleName()?this.element.appendChild(this.headerElement):this.calendarElement.appendChild(this.headerElement),this.adjustLongHeaderSize()},t.prototype.createContent=function(){this.contentElement=this.createElement("div",{className:"e-content"}),this.table=this.createElement("table",{attrs:{tabIndex:"0",role:"grid","aria-activedescendant":"","aria-labelledby":this.element.id}}),"calendar"===this.getModuleName()?this.element.appendChild(this.contentElement):this.calendarElement.appendChild(this.contentElement),this.contentElement.appendChild(this.table),this.createContentHeader(),this.createContentBody(),this.showTodayButton&&this.createContentFooter()},t.prototype.getCultureValues=function(){var e,t=[],i="days.stand-alone."+this.dayHeaderFormat.toLowerCase();if(!m(e="en"===this.locale||"en-US"===this.locale?l(i,ie()):this.getCultureObjects(G,""+this.locale)))for(var n=0,o=Object.keys(e);n<o.length;n++){var s=o[n];t.push(l(s,e))}return t},t.prototype.toCapitalize=function(e){return!m(e)&&e.length?e[0].toUpperCase()+e.slice(1):e},t.prototype.createContentHeader=function(){"calendar"===this.getModuleName()?m(this.element.querySelectorAll(".e-content .e-week-header")[0])||Ae(this.element.querySelectorAll(".e-content .e-week-header")[0]):m(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0])||Ae(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0]);var e="";(this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:0},!0),this.tableHeadElement=this.createElement("thead",{className:"e-week-header"}),this.weekNumber&&(e+='<th class="e-week-number"></th>',"calendar"===this.getModuleName()?be([this.element],""+Py):be([this.calendarElement],""+Py));var t=this.getCultureValues().length>0&&this.getCultureValues()?this.shiftArray(this.getCultureValues().length>0&&this.getCultureValues(),this.firstDayOfWeek):null;if(!m(t))for(var i=0;i<=6;i++)e+='<th  class="">'+this.toCapitalize(t[i])+"</th>";e="<tr>"+e+"</tr>",this.tableHeadElement.innerHTML=e,this.table.appendChild(this.tableHeadElement)},t.prototype.createContentBody=function(){switch("calendar"===this.getModuleName()?m(this.element.querySelectorAll(".e-content tbody")[0])||Ae(this.element.querySelectorAll(".e-content tbody")[0]):m(this.calendarElement.querySelectorAll(".e-content tbody")[0])||Ae(this.calendarElement.querySelectorAll(".e-content tbody")[0]),this.start){case"Year":this.renderYears();break;case"Decade":this.renderDecades();break;default:this.renderMonths()}},t.prototype.updateFooter=function(){this.todayElement.textContent=this.l10.getConstant("today"),this.todayElement.setAttribute("aria-label",this.l10.getConstant("today"))},t.prototype.createContentFooter=function(){if(this.showTodayButton){var e=new Date(+this.min),t=new Date(+this.max);this.globalize=new ee(this.locale),this.l10=new qt(this.getModuleName(),{today:"Today"},this.locale),this.todayElement=this.createElement("button",{attrs:{role:"button"}}),at(this.todayElement),this.updateFooter(),be([this.todayElement],["e-btn",jy,"e-flat","e-primary","e-css"]),+new Date(e.setHours(0,0,0,0))<=+this.todayDate&&+this.todayDate<=+new Date(t.setHours(0,0,0,0))&&!this.todayDisabled||be([this.todayElement],Fy),this.footer=this.createElement("div",{className:"e-footer-container"}),this.footer.appendChild(this.todayElement),"calendar"===this.getModuleName()&&this.element.appendChild(this.footer),"datepicker"===this.getModuleName()&&this.calendarElement.appendChild(this.footer),"datetimepicker"===this.getModuleName()&&this.calendarElement.appendChild(this.footer),this.todayElement.classList.contains(Fy)||ye.add(this.todayElement,"click",this.todayButtonClick,this)}},t.prototype.wireEvents=function(e,t,i,n){ye.add(this.headerTitleElement,"click",this.navigateTitle,this),this.defaultKeyConfigs=f(this.defaultKeyConfigs,this.keyConfigs),"calendar"===this.getModuleName()?this.keyboardModule=new Ut(this.element,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs}):this.keyboardModule=new Ut(this.calendarElement,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})},t.prototype.dateWireEvents=function(e,t,i,n){this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.defaultKeyConfigs=f(this.defaultKeyConfigs,i),this.serverModuleName=n},t.prototype.todayButtonClick=function(e,t,i){this.showTodayButton&&(this.currentView()===this.depth?this.effect="":this.effect="e-zoomin",this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?this.navigateTo(this.depth,new Date(this.checkValue(t)),i):this.navigateTo("Month",new Date(this.checkValue(t)),i))},t.prototype.resetCalendar=function(){this.calendarElement&&Ae(this.calendarElement),this.tableBodyElement&&Ae(this.tableBodyElement),this.table&&Ae(this.table),this.tableHeadElement&&Ae(this.tableHeadElement),this.nextIcon&&Ae(this.nextIcon),this.previousIcon&&Ae(this.previousIcon),this.footer&&Ae(this.footer),this.todayElement=null,this.renderDayCellArgs=null,this.calendarElement=this.tableBodyElement=this.footer=this.tableHeadElement=this.nextIcon=this.previousIcon=this.table=null},t.prototype.keyActionHandle=function(e,t,i){var n,o=this.tableBodyElement.querySelector("tr td.e-focused-date");n=i?m(o)||+t!==parseInt(o.getAttribute("id").split("_")[0],10)?this.tableBodyElement.querySelector("tr td.e-selected"):o:this.tableBodyElement.querySelector("tr td.e-selected");var s=this.getViewNumber(this.currentView()),a=this.getViewNumber(this.depth),r=s===a&&this.getViewNumber(this.start)>=a;switch(this.effect="",e.action){case"moveLeft":this.keyboardNavigate(-1,s,e,this.max,this.min),e.preventDefault();break;case"moveRight":this.keyboardNavigate(1,s,e,this.max,this.min),e.preventDefault();break;case"moveUp":0===s?this.keyboardNavigate(-7,s,e,this.max,this.min):this.keyboardNavigate(-4,s,e,this.max,this.min),e.preventDefault();break;case"moveDown":0===s?this.keyboardNavigate(7,s,e,this.max,this.min):this.keyboardNavigate(4,s,e,this.max,this.min),e.preventDefault();break;case"select":if(e.target===this.todayElement)this.todayButtonClick(e,t);else{var l=m(o)?n:o;if(!m(l)&&!l.classList.contains(Fy))if(r){var d=new Date(parseInt(""+l.id,0));this.selectDate(e,d,l)}else this.contentClick(null,--s,l,t)}break;case"controlUp":this.title(),e.preventDefault();break;case"controlDown":(m(o)||r)&&(m(n)||r)||this.contentClick(null,--s,o||n,t),e.preventDefault();break;case"home":this.currentDate=this.firstDay(this.currentDate),Ae(this.tableBodyElement),0===s?this.renderMonths(e):1===s?this.renderYears(e):this.renderDecades(e),e.preventDefault();break;case"end":this.currentDate=this.lastDay(this.currentDate,s),Ae(this.tableBodyElement),0===s?this.renderMonths(e):1===s?this.renderYears(e):this.renderDecades(e),e.preventDefault();break;case"pageUp":this.addMonths(this.currentDate,-1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"pageDown":this.addMonths(this.currentDate,1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"shiftPageUp":this.addYears(this.currentDate,-1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"shiftPageDown":this.addYears(this.currentDate,1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"controlHome":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),0,1)),e.preventDefault();break;case"controlEnd":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),11,31)),e.preventDefault()}"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.keyboardNavigate=function(e,t,i,n,o){var s=new Date(this.checkValue(this.currentDate));switch(t){case 2:this.addYears(this.currentDate,e),this.isMonthYearRange(this.currentDate)?(Ae(this.tableBodyElement),this.renderDecades(i)):this.currentDate=s;break;case 1:this.addMonths(this.currentDate,e),this.calendarMode,this.isMonthYearRange(this.currentDate)?(Ae(this.tableBodyElement),this.renderYears(i)):this.currentDate=s;break;case 0:this.addDay(this.currentDate,e,i,n,o),this.isMinMaxRange(this.currentDate)?(Ae(this.tableBodyElement),this.renderMonths(i)):this.currentDate=s}},t.prototype.preRender=function(e){var t=this;this.navigatePreviousHandler=this.navigatePrevious.bind(this),this.navigateNextHandler=this.navigateNext.bind(this),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.navigateHandler=function(e){t.triggerNavigate(e)}},t.prototype.minMaxDate=function(e){var t=new Date(new Date(+e).setHours(0,0,0,0)),i=new Date(new Date(+this.min).setHours(0,0,0,0)),n=new Date(new Date(+this.max).setHours(0,0,0,0));return+t!==+i&&+t!==+n||(+e<+this.min&&(e=new Date(+this.min)),+e>+this.max&&(e=new Date(+this.max))),e},t.prototype.renderMonths=function(e,t,i){var n,o=this.weekNumber?8:7;n="Gregorian"===this.calendarMode?this.renderDays(this.currentDate,t,null,null,i,e):this.islamicModule.islamicRenderDays(this.currentDate,t),this.createContentHeader(),"Gregorian"===this.calendarMode?this.renderTemplate(n,o,Ey,e,t):this.islamicModule.islamicRenderTemplate(n,o,Ey,e,t)},t.prototype.renderDays=function(e,t,i,n,o,s){var a,r=[],l=o?new Date(+e):this.getDate(new Date,this.timezone),d=new Date(this.checkValue(e)),h=d.getMonth();this.titleUpdate(e,"days");var p=d;for(d=new Date(p.getFullYear(),p.getMonth(),0,p.getHours(),p.getMinutes(),p.getSeconds(),p.getMilliseconds());d.getDay()!==this.firstDayOfWeek;)this.setStartDate(d,-864e5);for(var c=0;c<42;++c){var u=this.createElement("td",{className:_y}),f=this.createElement("span");if(c%7===0&&this.weekNumber){var g="FirstDay"===this.weekRule?6:"FirstFourDayWeek"===this.weekRule?3:0,y=new Date(d.getFullYear(),d.getMonth(),d.getDate()+g);f.textContent=""+this.getWeek(y),u.appendChild(f),be([u],""+Py),r.push(u)}a=new Date(+d),d=this.minMaxDate(d);var v={type:"dateTime",skeleton:"full"},w=this.globalize.parseDate(this.globalize.formatDate(d,v),v),b=this.dayCell(d),S=this.globalize.formatDate(d,{type:"date",skeleton:"full"}),C=this.createElement("span");C.textContent=this.globalize.formatDate(d,{format:"d",type:"date",skeleton:"yMd"});var x=this.min>d||this.max<d;x?(be([b],Fy),be([b],Ly)):C.setAttribute("title",""+S),h!==d.getMonth()&&be([b],My),0!==d.getDay()&&6!==d.getDay()||be([b],"e-weekend"),b.appendChild(C),this.renderDayCellArgs={date:d,isDisabled:!1,element:b,isOutOfRange:x};var M=this.renderDayCellArgs;if(this.renderDayCellEvent(M),M.isDisabled){var I=new Date(this.checkValue(t)),T=new Date(this.checkValue(M.date));if(i){if(!m(n)&&n.length>0)for(var A=0;A<n.length;A++){+new Date(this.globalize.formatDate(M.date,{type:"date",skeleton:"yMd"}))===+new Date(this.globalize.formatDate(n[A],{type:"date",skeleton:"yMd"}))&&(n.splice(A,1),A=-1)}}else I&&+I===+T&&this.setProperties({value:null},!0)}this.renderDayCellArgs.isDisabled&&!b.classList.contains(Oy)&&(be([b],Fy),be([b],Ly),+this.renderDayCellArgs.date===+this.todayDate&&(this.todayDisabled=!0));var k=b.classList.contains(My),V=b.classList.contains(Fy);V||ye.add(b,"click",this.clickHandler,this);var E=void 0;if(m(s)||"click"!=s.type||(E=s.currentTarget),!i||m(n)||V)!V&&this.getDateVal(d,t)&&be([b],Oy);else{for(var D=0;D<n.length;D++){var N={format:null,type:"date",skeleton:"short",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"};if((this.globalize.formatDate(d,N)===this.globalize.formatDate(n[D],N)&&this.getDateVal(d,n[D])||this.getDateVal(d,t))&&be([b],Oy),!m(E)&&E.innerText===b.innerText&&this.previousDates&&b.classList.contains(Oy)&&E.classList.contains(Oy)){Se([b],Oy),this.previousDates=!1;for(var F=this.copyValues(n),L=0;L<F.length;L++){var P={format:null,type:"date",skeleton:"short",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"};if(this.globalize.formatDate(w,P)===this.globalize.formatDate(F[L],P)){A=F.indexOf(F[L]);F.splice(A,1),n.splice(A,1)}}this.setProperties({values:F},!0)}else this.updateFocus(k,V,d,b,e)}n.length<=0&&this.updateFocus(k,V,d,b,e)}this.updateFocus(k,V,d,b,e),w.getFullYear()===l.getFullYear()&&w.getMonth()===l.getMonth()&&w.getDate()===l.getDate()&&be([b],jy),r.push(this.renderDayCellArgs.element),d=new Date(+a),this.addDay(d,1,null,this.max,this.min)}return r},t.prototype.updateFocus=function(e,t,i,n,o){o.getDate()!==i.getDate()||e||t?(o>=this.max&&parseInt(n.id,0)===+this.max&&!e&&!t&&be([n],By),o<=this.min&&parseInt(n.id,0)===+this.min&&!e&&!t&&be([n],By)):be([n],By)},t.prototype.renderYears=function(e,t){this.removeTableHeadElement();var i=[],n=m(t),o=new Date(this.checkValue(this.currentDate)),s=o.getMonth(),a=o.getFullYear(),r=o,l=r.getFullYear(),d=new Date(this.checkValue(this.min)).getFullYear(),h=new Date(this.checkValue(this.min)).getMonth(),p=new Date(this.checkValue(this.max)).getFullYear(),c=new Date(this.checkValue(this.max)).getMonth();r.setMonth(0),this.titleUpdate(this.currentDate,"months"),r.setDate(1);for(var u=0;u<12;++u){var f=this.dayCell(r),g=this.createElement("span"),y=t&&t.getMonth()===r.getMonth(),v=t&&t.getFullYear()===a&&y;g.textContent=this.toCapitalize(this.globalize.formatDate(r,{format:null,type:"dateTime",skeleton:"MMM"})),this.min&&(l<d||u<h&&l===d)||this.max&&(l>p||u>c&&l>=p)?be([f],Fy):!n&&v?be([f],Oy):r.getMonth()===s&&this.currentDate.getMonth()===s&&be([f],By),r.setDate(1),r.setMonth(r.getMonth()+1),f.classList.contains(Fy)||ye.add(f,"click",this.clickHandler,this),f.appendChild(g),i.push(f)}this.renderTemplate(i,4,Vy,e,t)},t.prototype.renderDecades=function(e,t){this.removeTableHeadElement();var i=[],n=new Date(this.checkValue(this.currentDate));n.setMonth(0),n.setDate(1);var o=n.getFullYear(),s=new Date(n.setFullYear(o-o%10)),a=new Date(n.setFullYear(o-o%10+9)),r=s.getFullYear(),l=a.getFullYear(),d=this.globalize.formatDate(s,{format:null,type:"dateTime",skeleton:"y"}),h=this.globalize.formatDate(a,{format:null,type:"dateTime",skeleton:"y"});this.headerTitleElement.textContent=d+" - "+h;for(var p=new Date(o-o%10-1,0,1).getFullYear(),c=0;c<12;++c){var u=p+c;n.setFullYear(u);var f=this.dayCell(n),g=this.createElement("span");g.textContent=this.globalize.formatDate(n,{format:null,type:"dateTime",skeleton:"y"}),u<r||u>l?(be([f],Iy),m(t)||n.getFullYear()!==t.getFullYear()||be([f],Oy),(u<new Date(this.checkValue(this.min)).getFullYear()||u>new Date(this.checkValue(this.max)).getFullYear())&&be([f],Fy)):u<new Date(this.checkValue(this.min)).getFullYear()||u>new Date(this.checkValue(this.max)).getFullYear()?be([f],Fy):m(t)||n.getFullYear()!==t.getFullYear()?n.getFullYear()!==this.currentDate.getFullYear()||f.classList.contains(Fy)||be([f],By):be([f],Oy),f.classList.contains(Fy)||ye.add(f,"click",this.clickHandler,this),f.appendChild(g),i.push(f)}this.renderTemplate(i,4,"e-decade",e,t)},t.prototype.dayCell=function(e){var t={skeleton:"full",type:"dateTime",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"},i=this.globalize.parseDate(this.globalize.formatDate(e,t),t).valueOf(),n={className:_y,attrs:{id:""+y(""+i),"aria-selected":"false"}};return this.createElement("td",n)},t.prototype.firstDay=function(e){var t="Decade"!==this.currentView()?this.tableBodyElement.querySelectorAll("td:not(."+My):this.tableBodyElement.querySelectorAll("td:not(."+Iy);if(t.length)for(var i=0;i<t.length;i++)if(!t[i].classList.contains(Fy)){e=new Date(parseInt(t[i].id,0));break}return e},t.prototype.lastDay=function(e,t){var i=new Date(e.getFullYear(),e.getMonth()+1,0);if(2!==t){var n=Math.abs(i.getTimezoneOffset()-this.firstDay(e).getTimezoneOffset());return n&&i.setHours(this.firstDay(e).getHours()+n/60),this.findLastDay(i)}return this.findLastDay(this.firstDay(i))},t.prototype.checkDateValue=function(e){return!m(e)&&e instanceof Date&&!isNaN(+e)?e:null},t.prototype.findLastDay=function(e){var t="Decade"===this.currentView()?this.tableBodyElement.querySelectorAll("td:not(."+Iy):this.tableBodyElement.querySelectorAll("td:not(."+My);if(t.length)for(var i=t.length-1;i>=0;i--)if(!t[i].classList.contains(Fy)){e=new Date(parseInt(t[i].id,0));break}return e},t.prototype.removeTableHeadElement=function(){"calendar"===this.getModuleName()?m(this.element.querySelectorAll(".e-content table thead")[0])||Ae(this.tableHeadElement):m(this.calendarElement.querySelectorAll(".e-content table thead")[0])||Ae(this.tableHeadElement)},t.prototype.renderTemplate=function(e,t,i,n,o){var s,a=this.getViewNumber(this.currentView());this.tableBodyElement=this.createElement("tbody"),this.table.appendChild(this.tableBodyElement),Se([this.contentElement,this.headerElement],[Ey,Dy,Vy]),be([this.contentElement,this.headerElement],[i]);for(var r=t,l=0,d=0;d<e.length/t;++d){for(s=this.createElement("tr"),l=0+l;l<r;l++)e[l].classList.contains("e-week-number")||m(e[l].children[0])||(be([e[l].children[0]],[Ry]),at(e[l].children[0],{duration:600,isCenterRipple:!0})),s.appendChild(e[l]),this.weekNumber&&7===l&&e[7].classList.contains(My)&&be([s],zy),!this.weekNumber&&6===l&&e[6].classList.contains(My)&&be([s],zy),this.weekNumber?41===l&&e[41].classList.contains(My)&&be([s],zy):35===l&&e[35].classList.contains(My)&&be([s],zy);r+=t,l+=0,this.tableBodyElement.appendChild(s)}this.table.querySelector("tbody").className=this.effect,"Gregorian"===this.calendarMode?this.iconHandler():this.islamicModule.islamicIconHandler(),(a!==this.getViewNumber(this.currentView())||0===a&&a!==this.getViewNumber(this.currentView()))&&this.navigateHandler(n),this.setAriaActiveDescendant()},t.prototype.clickHandler=function(e,t){this.clickEventEmitter(e);var i=e.currentTarget,n=this.getViewNumber(this.currentView());i.classList.contains(My)?this.contentClick(e,0,null,t):n===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)||2===n?this.contentClick(e,1,null,t):i.classList.contains(My)||0!==n?this.contentClick(e,0,i,t):this.selectDate(e,this.getIdValue(e,null),null),"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.clickEventEmitter=function(e){e.preventDefault()},t.prototype.contentClick=function(e,t,i,n){var o=this.getViewNumber(this.currentView()),s=this.getIdValue(e,i);switch(t){case 0:o===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?(Ae(this.tableBodyElement),this.currentDate=s,this.effect=Hy,this.renderMonths(e)):("Gregorian"===this.calendarMode?(this.currentDate.setMonth(s.getMonth()),s.getMonth()>0&&this.currentDate.getMonth()!==s.getMonth()&&this.currentDate.setDate(0),this.currentDate.setFullYear(s.getFullYear())):this.currentDate=s,this.effect=Hy,Ae(this.tableBodyElement),this.renderMonths(e));break;case 1:if(o===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth))this.selectDate(e,s,null);else{if("Gregorian"===this.calendarMode)this.currentDate.setFullYear(s.getFullYear());else{this.islamicPreviousHeader=this.headerElement.textContent;var a=this.islamicModule.getIslamicDate(s);this.currentDate=this.islamicModule.toGregorian(a.year,a.month,1)}this.effect=Hy,Ae(this.tableBodyElement),this.renderYears(e)}}},t.prototype.switchView=function(e,t,i,n){switch(e){case 0:Ae(this.tableBodyElement),this.renderMonths(t,null,n);break;case 1:Ae(this.tableBodyElement),this.renderYears(t);break;case 2:Ae(this.tableBodyElement),this.renderDecades(t)}},t.prototype.getModuleName=function(){return"calendar"},t.prototype.requiredModules=function(){var e=[];return this&&e.push({args:[this],member:"islamic"}),e},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.onPropertyChanged=function(e,t,i,n){this.effect="";for(var o=0,s=Object.keys(e);o<s.length;o++){var a=s[o];switch(a){case"enableRtl":e.enableRtl?"calendar"===this.getModuleName()?this.element.classList.add("e-rtl"):this.calendarElement.classList.add("e-rtl"):"calendar"===this.getModuleName()?this.element.classList.remove("e-rtl"):this.calendarElement.classList.remove("e-rtl");break;case"dayHeaderFormat":this.getCultureValues(),("datepicker"!==this.getModuleName()||this.calendarElement)&&this.createContentHeader(),this.adjustLongHeaderSize();break;case"min":case"max":this.rangeValidation(this.min,this.max),"min"===a?this.setProperties({min:this.checkDateValue(new Date(this.checkValue(e.min)))},!0):this.setProperties({max:this.checkDateValue(new Date(this.checkValue(e.max)))},!0),this.setProperties({start:this.currentView()},!0),this.tableBodyElement&&Ae(this.tableBodyElement),this.minMaxUpdate(),i&&this.validateValues(i,n),("datepicker"!==this.getModuleName()||this.calendarElement)&&this.createContentBody(),(this.todayDate<this.min||this.max<this.todayDate)&&this.footer&&this.todayElement?(Ae(this.todayElement),Ae(this.footer),this.todayElement=this.footer=null,this.createContentFooter()):this.footer&&this.todayElement&&this.todayElement.classList.contains("e-disabled")&&(Se([this.todayElement],Fy),Ae(this.todayElement),Ae(this.footer),this.todayElement=this.footer=null,this.createContentFooter());break;case"start":case"depth":case"weekNumber":case"firstDayOfWeek":case"weekRule":this.checkView(),("datepicker"!==this.getModuleName()||this.calendarElement)&&(this.createContentHeader(),this.createContentBody());break;case"locale":this.globalize=new ee(this.locale),("datepicker"!==this.getModuleName()||this.calendarElement)&&(this.createContentHeader(),this.createContentBody()),this.l10.setLocale(this.locale),this.updateFooter();break;case"showTodayButton":e.showTodayButton?this.createContentFooter():m(this.todayElement)||m(this.footer)||(Ae(this.todayElement),Ae(this.footer),this.todayElement=this.footer=void 0),this.setProperties({showTodayButton:e.showTodayButton},!0)}}},t.prototype.validateValues=function(e,t){if(e&&!m(t)&&t.length>0){for(var i=this.copyValues(t),n=0;n<i.length;n++){var o=i[n],s="Gregorian"===this.calendarMode?"gregorian":"islamic",a=void 0;a="Gregorian"===this.calendarMode?this.globalize.formatDate(o,{type:"date",skeleton:"yMd"}):this.globalize.formatDate(o,{type:"dateTime",skeleton:"full",calendar:"islamic"});var r={type:"date",skeleton:"yMd",calendar:s},l=this.globalize.formatDate(this.min,r),d={type:"date",skeleton:"yMd",calendar:s},h=this.globalize.formatDate(this.max,d);(+new Date(a)<+new Date(l)||+new Date(a)>+new Date(h))&&(i.splice(n,1),n=-1)}this.setProperties({values:i},!0)}},t.prototype.setValueUpdate=function(){m(this.tableBodyElement)||(Ae(this.tableBodyElement),this.setProperties({start:this.currentView()},!0),this.createContentBody())},t.prototype.copyValues=function(e){var t=[];if(!m(e)&&e.length>0)for(var i=0;i<e.length;i++)t.push(new Date(+e[i]));return t},t.prototype.titleUpdate=function(e,t){var i,n,o=new ee(this.locale),s="Gregorian"===this.calendarMode?"gregorian":"islamic";switch("Gregorian"===this.calendarMode?(i=o.formatDate(e,{type:"dateTime",skeleton:"yMMMM",calendar:s}),n=o.formatDate(e,{format:null,type:"dateTime",skeleton:"y",calendar:s})):(i=o.formatDate(e,{type:"dateTime",format:"MMMM y",calendar:s}),n=o.formatDate(e,{type:"dateTime",format:"y",calendar:s})),t){case"days":this.headerTitleElement.textContent=this.toCapitalize(i);break;case"months":this.headerTitleElement.textContent=n}},t.prototype.setActiveDescendant=function(){var e,t,i=this.tableBodyElement.querySelector("tr td.e-focused-date"),n=this.tableBodyElement.querySelector("tr td.e-selected"),o="Gregorian"===this.calendarMode?"gregorian":"islamic",s=this.currentView();return t="Month"===s?this.globalize.formatDate(this.currentDate,{type:"date",skeleton:"full",calendar:o}):"Year"===s?"islamic"!==o?this.globalize.formatDate(this.currentDate,{type:"date",skeleton:"yMMMM",calendar:o}):this.globalize.formatDate(this.currentDate,{type:"date",skeleton:"GyMMM",calendar:o}):this.globalize.formatDate(this.currentDate,{format:null,type:"date",skeleton:"y",calendar:o}),(n||i)&&(m(n)||n.setAttribute("aria-selected","true"),(i||n).setAttribute("aria-label",t),e=(i||n).getAttribute("id")),e},t.prototype.iconHandler=function(){switch(new Date(this.checkValue(this.currentDate)).setDate(1),this.currentView()){case"Month":this.previousIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Year":this.previousIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Decade":this.previousIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.max)>-1)}},t.prototype.destroy=function(){("calendar"===this.getModuleName()&&this.element||this.calendarElement&&this.element)&&Se([this.element],[Ty]),"calendar"===this.getModuleName()&&this.element&&(m(this.headerTitleElement)||ye.remove(this.headerTitleElement,"click",this.navigateTitle),this.todayElement&&ye.remove(this.todayElement,"click",this.todayButtonClick),this.previousIconHandler(!0),this.nextIconHandler(!0),this.keyboardModule.destroy(),this.element.removeAttribute("data-role"),m(this.calendarEleCopy.getAttribute("tabindex"))?this.element.removeAttribute("tabindex"):this.element.setAttribute("tabindex",this.tabIndex)),this.element&&(this.element.innerHTML=""),this.todayElement=null,this.tableBodyElement=null,this.renderDayCellArgs=null,this.headerElement=null,this.nextIcon=null,this.table=null,this.tableHeadElement=null,this.previousIcon=null,this.headerTitleElement=null,this.footer=null,this.contentElement=null,e.prototype.destroy.call(this)},t.prototype.title=function(e){var t=this.getViewNumber(this.currentView());this.effect=Hy,this.switchView(++t,e)},t.prototype.getViewNumber=function(e){return"Month"===e?0:"Year"===e?1:2},t.prototype.navigateTitle=function(e){e.preventDefault(),this.title(e),"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.previous=function(){this.effect="";var e=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,-1),this.switchView(e);break;case"Year":this.addYears(this.currentDate,-1),this.switchView(e);break;case"Decade":this.addYears(this.currentDate,-10),this.switchView(e)}},t.prototype.navigatePrevious=function(e){e.preventDefault(),"Gregorian"===this.calendarMode?this.previous():this.islamicModule.islamicPrevious(),this.triggerNavigate(e),"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.next=function(){this.effect="";var e=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,1),this.switchView(e);break;case"Year":this.addYears(this.currentDate,1),this.switchView(e);break;case"Decade":this.addYears(this.currentDate,10),this.switchView(e)}},t.prototype.navigateNext=function(e){e.preventDefault(),"Gregorian"===this.calendarMode?this.next():this.islamicModule.islamicNext(),this.triggerNavigate(e),"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.navigateTo=function(e,t,i){+t>=+this.min&&+t<=+this.max&&(this.currentDate=t),+t<=+this.min&&(this.currentDate=new Date(this.checkValue(this.min))),+t>=+this.max&&(this.currentDate=new Date(this.checkValue(this.max))),this.getViewNumber(this.depth)>=this.getViewNumber(e)&&(this.getViewNumber(this.depth)<=this.getViewNumber(this.start)||this.getViewNumber(this.depth)===this.getViewNumber(e))&&(e=this.depth),this.switchView(this.getViewNumber(e),null,null,i)},t.prototype.currentView=function(){return this.contentElement.classList.contains(Vy)?"Year":this.contentElement.classList.contains(Dy)?"Decade":"Month"},t.prototype.getDateVal=function(e,t){return!m(t)&&e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},t.prototype.getCultureObjects=function(e,t){var i=".dates.calendars.gregorian.days.format."+this.dayHeaderFormat.toLowerCase(),n=".dates.calendars.islamic.days.format."+this.dayHeaderFormat.toLowerCase();return"Gregorian"===this.calendarMode?l("main."+this.locale+i,e):l("main."+this.locale+n,e)},t.prototype.getWeek=function(e){var t=new Date(this.checkValue(e)).valueOf(),i=new Date(e.getFullYear(),0,1).valueOf();return Math.ceil((t-i+Uy)/Uy/7)},t.prototype.setStartDate=function(e,t){var i=e.getTimezoneOffset(),n=new Date(e.getTime()+t),o=n.getTimezoneOffset()-i;e.setTime(n.getTime()+6e4*o)},t.prototype.addMonths=function(e,t){if("Gregorian"===this.calendarMode){var i=e.getDate();e.setDate(1),e.setMonth(e.getMonth()+t),e.setDate(Math.min(i,this.getMaxDays(e)))}else{var n=this.islamicModule.getIslamicDate(e);this.currentDate=this.islamicModule.toGregorian(n.year,n.month+t,1)}},t.prototype.addYears=function(e,t){if("Gregorian"===this.calendarMode){var i=e.getDate();e.setDate(1),e.setFullYear(e.getFullYear()+t),e.setDate(Math.min(i,this.getMaxDays(e)))}else{var n=this.islamicModule.getIslamicDate(e);this.currentDate=this.islamicModule.toGregorian(n.year+t,n.month,1)}},t.prototype.getIdValue=function(e,t){var i;i=e?e.currentTarget:t;var n={type:"dateTime",skeleton:"full",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"},o=this.globalize.formatDate(new Date(parseInt(""+i.getAttribute("id"),0)),n),s=this.globalize.parseDate(o,n),a=s.valueOf()-s.valueOf()%1e3;return new Date(a)},t.prototype.adjustLongHeaderSize=function(){Se([this.element],Wy),"Wide"===this.dayHeaderFormat&&be(["calendar"===this.getModuleName()?this.element:this.calendarElement],Wy)},t.prototype.selectDate=function(e,t,i,n,o){var s=i||e.currentTarget;if(this.isDateSelected=!1,"Decade"===this.currentView())this.setDateDecade(this.currentDate,t.getFullYear());else if("Year"===this.currentView())this.setDateYear(this.currentDate,t);else{if(n&&!this.checkPresentDate(t,o)){var a=this.copyValues(o);!m(o)&&a.length>0?(a.push(new Date(this.checkValue(t))),this.setProperties({values:a},!0),this.setProperties({value:o[o.length-1]},!0)):this.setProperties({values:[new Date(this.checkValue(t))]},!0)}else this.setProperties({value:new Date(this.checkValue(t))},!0);this.currentDate=new Date(this.checkValue(t))}var r=Fe(s,"."+Ty);if(m(r)&&(r=this.tableBodyElement),n||m(r.querySelector("."+Oy))||Se([r.querySelector("."+Oy)],Oy),n||m(r.querySelector("."+By))||Se([r.querySelector("."+By)],By),n){a=this.copyValues(o);for(var l=Array.prototype.slice.call(this.tableBodyElement.querySelectorAll("td")),d=0;d<l.length;d++){var h=r.querySelectorAll("td."+By)[0],p=r.querySelectorAll("td."+Oy)[0];l[d]===h&&Se([l[d]],By),l[d]!==p||this.checkPresentDate(new Date(parseInt(p.getAttribute("id").split("_")[0],10)),o)||Se([l[d]],Oy)}if(s.classList.contains(Oy)){Se([s],Oy);for(var c=0;c<a.length;c++){var u={format:null,type:"date",skeleton:"short",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"};if(this.globalize.formatDate(t,u)===this.globalize.formatDate(a[c],u)){d=a.indexOf(a[c]);a.splice(d,1),be([s],By)}}this.setProperties({values:a},!0)}else be([s],Oy)}else be([s],Oy);this.isDateSelected=!0},t.prototype.checkPresentDate=function(e,t){var i=!1;if(!m(t))for(var n=0;n<t.length;n++){var o="Gregorian"===this.calendarMode?"gregorian":"islamic";this.globalize.formatDate(e,{format:null,type:"date",skeleton:"short",calendar:o})===this.globalize.formatDate(t[n],{format:null,type:"date",skeleton:"short",calendar:o})&&(i=!0)}return i},t.prototype.setAriaActiveDescendant=function(){Ve(this.table,{"aria-activedescendant":""+this.setActiveDescendant()})},t.prototype.previousIconHandler=function(e){e?m(this.previousIcon)||(ye.remove(this.previousIcon,"click",this.navigatePreviousHandler),be([this.previousIcon],""+Fy),be([this.previousIcon],""+Ly),this.previousIcon.setAttribute("aria-disabled","true")):(ye.add(this.previousIcon,"click",this.navigatePreviousHandler),Se([this.previousIcon],""+Fy),Se([this.previousIcon],""+Ly),this.previousIcon.setAttribute("aria-disabled","false"))},t.prototype.renderDayCellEvent=function(e){f(this.renderDayCellArgs,{name:"renderDayCell"}),this.trigger("renderDayCell",e)},t.prototype.navigatedEvent=function(e){f(this.navigatedArgs,{name:"navigated",event:e}),this.trigger("navigated",this.navigatedArgs)},t.prototype.triggerNavigate=function(e){this.navigatedArgs={view:this.currentView(),date:this.currentDate},this.navigatedEvent(e)},t.prototype.nextIconHandler=function(e){e?m(this.previousIcon)||(ye.remove(this.nextIcon,"click",this.navigateNextHandler),be([this.nextIcon],Fy),be([this.nextIcon],Ly),this.nextIcon.setAttribute("aria-disabled","true")):(ye.add(this.nextIcon,"click",this.navigateNextHandler),Se([this.nextIcon],Fy),Se([this.nextIcon],Ly),this.nextIcon.setAttribute("aria-disabled","false"))},t.prototype.compare=function(e,t,i){var n,o,s=t.getFullYear();return n=s,o=0,i&&(n=(s-=s%i)-s%i+i-1),e.getFullYear()>n?o=1:e.getFullYear()<s&&(o=-1),o},t.prototype.isMinMaxRange=function(e){return+e>=+this.min&&+e<=+this.max},t.prototype.isMonthYearRange=function(e){if("Gregorian"===this.calendarMode)return e.getMonth()>=this.min.getMonth()&&e.getFullYear()>=this.min.getFullYear()&&e.getMonth()<=this.max.getMonth()&&e.getFullYear()<=this.max.getFullYear();var t=this.islamicModule.getIslamicDate(e);return t.month>=this.islamicModule.getIslamicDate(new Date(1944,1,18)).month&&t.year>=this.islamicModule.getIslamicDate(new Date(1944,1,18)).year&&t.month<=this.islamicModule.getIslamicDate(new Date(2069,1,16)).month&&t.year<=this.islamicModule.getIslamicDate(new Date(2069,1,16)).year},t.prototype.compareYear=function(e,t){return this.compare(e,t,0)},t.prototype.compareDecade=function(e,t){return this.compare(e,t,10)},t.prototype.shiftArray=function(e,t){return e.slice(t).concat(e.slice(0,t))},t.prototype.addDay=function(e,t,i,n,o){var s=t,a=new Date(+e);if(!m(this.tableBodyElement)&&!m(i)){for(;this.findNextTD(new Date(+e),s,n,o);)s+=t;var r=new Date(a.setDate(a.getDate()+s));s=+r>+n||+r<+o?s===t?t-t:t:s}e.setDate(e.getDate()+s)},t.prototype.findNextTD=function(e,t,i,n){var o=new Date(e.setDate(e.getDate()+t)),s=[],a=!1;if((!m(o)&&o.getMonth())===(!m(this.currentDate)&&this.currentDate.getMonth())){s=("Gregorian"===this.calendarMode?this.renderDays(o):this.islamicModule.islamicRenderDays(this.currentDate,o)).filter((function(e){return e.classList.contains(Fy)}))}else s=this.tableBodyElement.querySelectorAll("td."+Fy);if(+o<=+i&&+o>=+n&&s.length)for(var r=0;r<s.length&&!(a=+o===+new Date(parseInt(s[r].id,0)));r++);return a},t.prototype.getMaxDays=function(e){var t,i=new Date(this.checkValue(e));t=28;for(var n=i.getMonth();i.getMonth()===n;)++t,i.setDate(t);return t-1},t.prototype.setDateDecade=function(e,t){e.setFullYear(t),this.setProperties({value:new Date(this.checkValue(e))},!0)},t.prototype.setDateYear=function(e,t){e.setFullYear(t.getFullYear(),t.getMonth(),e.getDate()),t.getMonth()!==e.getMonth()&&(e.setDate(0),this.currentDate=new Date(this.checkValue(t))),this.setProperties({value:new Date(this.checkValue(e))},!0)},t.prototype.compareMonth=function(e,t){return e.getFullYear()>t.getFullYear()?1:e.getFullYear()<t.getFullYear()?-1:e.getMonth()===t.getMonth()?0:e.getMonth()>t.getMonth()?1:-1},t.prototype.checkValue=function(e){return e instanceof Date?e.toUTCString():""+e},t.prototype.checkView=function(){"Decade"!==this.start&&"Year"!==this.start&&this.setProperties({start:"Month"},!0),"Decade"!==this.depth&&"Year"!==this.depth&&this.setProperties({depth:"Month"},!0),this.getViewNumber(this.depth)>this.getViewNumber(this.start)&&this.setProperties({depth:"Month"},!0)},t.prototype.getDate=function(e,t){return t&&(e=new Date(e.toLocaleString("en-US",{timeZone:t}))),e},xy([Ge(new Date(1900,0,1))],t.prototype,"min",void 0),xy([Ge(!0)],t.prototype,"enabled",void 0),xy([Ge(null)],t.prototype,"cssClass",void 0),xy([Ge(new Date(2099,11,31))],t.prototype,"max",void 0),xy([Ge(null)],t.prototype,"firstDayOfWeek",void 0),xy([Ge("Gregorian")],t.prototype,"calendarMode",void 0),xy([Ge("Month")],t.prototype,"start",void 0),xy([Ge("Month")],t.prototype,"depth",void 0),xy([Ge(!1)],t.prototype,"weekNumber",void 0),xy([Ge("FirstDay")],t.prototype,"weekRule",void 0),xy([Ge(!0)],t.prototype,"showTodayButton",void 0),xy([Ge("Short")],t.prototype,"dayHeaderFormat",void 0),xy([Ge(!1)],t.prototype,"enablePersistence",void 0),xy([Ge(null)],t.prototype,"keyConfigs",void 0),xy([Ge(null)],t.prototype,"serverTimezoneOffset",void 0),xy([$e()],t.prototype,"created",void 0),xy([$e()],t.prototype,"destroyed",void 0),xy([$e()],t.prototype,"navigated",void 0),xy([$e()],t.prototype,"renderDayCell",void 0),t=xy([et],t)}(Dt),Yy=function(e){function t(t,i){return e.call(this,t,i)||this}return Cy(t,e),t.prototype.render=function(){if("Islamic"===this.calendarMode&&void 0===this.islamicModule&&w("Requires the injectable Islamic modules to render Calendar in Islamic mode"),this.isMultiSelection&&"object"===typeof this.values&&!m(this.values)&&this.values.length>0){for(var t=[],i=[],n=0;n<this.values.length;n++)-1===t.indexOf(+this.values[n])&&(t.push(+this.values[n]),i.push(this.values[n]));this.setProperties({values:i},!0);for(var o=0;o<this.values.length;o++)if(!this.checkDateValue(this.values[o]))if("string"===typeof this.values[o]&&this.checkDateValue(new Date(this.checkValue(this.values[o])))){var s=new Date(this.checkValue(this.values[o]));this.values.splice(o,1),this.values.splice(o,0,s)}else this.values.splice(o,1);this.setProperties({value:this.values[this.values.length-1]},!0),this.previousValues=this.values.length}if(this.validateDate(),this.minMaxUpdate(),"calendar"===this.getModuleName()&&(this.setEnable(this.enabled),this.setClass(this.cssClass)),e.prototype.render.call(this),"calendar"===this.getModuleName()){var a=Fe(this.element,"form");a&&ye.add(a,"reset",this.formResetHandler.bind(this)),this.setTimeZone(this.serverTimezoneOffset)}this.renderComplete()},t.prototype.setEnable=function(e){e?Se([this.element],Fy):be([this.element],Fy)},t.prototype.setClass=function(e,t){m(t)||(t=t.replace(/\s+/g," ").trim()),m(e)||(e=e.replace(/\s+/g," ").trim()),m(t)||""===t||Se([this.element],t.split(" ")),m(e)||be([this.element],e.split(" "))},t.prototype.isDayLightSaving=function(){var e=new Date(this.value.getFullYear(),6,1).getTimezoneOffset(),t=new Date(this.value.getFullYear(),0,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(t,e)},t.prototype.setTimeZone=function(e){if(!m(this.serverTimezoneOffset)&&this.value){var t=e+(new Date).getTimezoneOffset()/60;t=this.isDayLightSaving()?t--:t,this.value=new Date(this.value.getTime()+60*t*60*1e3)}},t.prototype.formResetHandler=function(){this.setProperties({value:null},!0)},t.prototype.validateDate=function(){"string"===typeof this.value&&this.setProperties({value:this.checkDateValue(new Date(this.checkValue(this.value)))},!0),e.prototype.validateDate.call(this,this.value),!m(this.value)&&this.min<=this.max&&this.value>=this.min&&this.value<=this.max&&(this.currentDate=new Date(this.checkValue(this.value))),isNaN(+this.value)&&this.setProperties({value:null},!0)},t.prototype.minMaxUpdate=function(){"calendar"===this.getModuleName()&&(!m(this.value)&&this.value<=this.min&&this.min<=this.max?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!m(this.value)&&this.value>=this.max&&this.min<=this.max&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})),"calendar"===this.getModuleName()||m(this.value)?e.prototype.minMaxUpdate.call(this,this.value):!m(this.value)&&this.value<this.min&&this.min<=this.max?e.prototype.minMaxUpdate.call(this,this.min):!m(this.value)&&this.value>this.max&&this.min<=this.max&&e.prototype.minMaxUpdate.call(this,this.max)},t.prototype.generateTodayVal=function(t){var i=new Date;return m(this.timezone)||(i=e.prototype.getDate.call(this,i,this.timezone)),t&&m(this.timezone)?(i.setHours(t.getHours()),i.setMinutes(t.getMinutes()),i.setSeconds(t.getSeconds()),i.setMilliseconds(t.getMilliseconds())):i=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0,0),i},t.prototype.todayButtonClick=function(t){if(this.showTodayButton){var i=this.generateTodayVal(this.value);if(this.setProperties({value:i},!0),this.isTodayClicked=!0,this.todayButtonEvent=t,this.isMultiSelection){var n=this.copyValues(this.values);e.prototype.checkPresentDate.call(this,i,this.values)||(n.push(i),this.setProperties({values:n}))}e.prototype.todayButtonClick.call(this,t,new Date(+this.value))}},t.prototype.keyActionHandle=function(t){e.prototype.keyActionHandle.call(this,t,this.value,this.isMultiSelection)},t.prototype.preRender=function(){var t=this;this.changeHandler=function(e){t.triggerChange(e)},this.checkView(),e.prototype.preRender.call(this,this.value)},t.prototype.createContent=function(){this.previousDate=this.value,this.previousDateTime=this.value,e.prototype.createContent.call(this)},t.prototype.minMaxDate=function(t){return e.prototype.minMaxDate.call(this,t)},t.prototype.renderMonths=function(t,i,n){e.prototype.renderMonths.call(this,t,this.value,n)},t.prototype.renderDays=function(t,i,n,o,s,a){var r=e.prototype.renderDays.call(this,t,this.value,this.isMultiSelection,this.values,s,a);return this.isMultiSelection&&e.prototype.validateValues.call(this,this.isMultiSelection,this.values),r},t.prototype.renderYears=function(t){"Gregorian"===this.calendarMode?e.prototype.renderYears.call(this,t,this.value):this.islamicModule.islamicRenderYears(t,this.value)},t.prototype.renderDecades=function(t){"Gregorian"===this.calendarMode?e.prototype.renderDecades.call(this,t,this.value):this.islamicModule.islamicRenderDecade(t,this.value)},t.prototype.renderTemplate=function(t,i,n,o){"Gregorian"===this.calendarMode?e.prototype.renderTemplate.call(this,t,i,n,o,this.value):this.islamicModule.islamicRenderTemplate(t,i,n,o,this.value),this.changedArgs={value:this.value,values:this.values},this.changeHandler()},t.prototype.clickHandler=function(t){var i=t.currentTarget;if(this.isPopupClicked=!0,i.classList.contains(My))if(this.isMultiSelection){var n=this.copyValues(this.values);-1===n.toString().indexOf(this.getIdValue(t,null).toString())?(n.push(this.getIdValue(t,null)),this.setProperties({values:n},!0),this.setProperties({value:this.values[this.values.length-1]},!0)):this.previousDates=!0}else this.setProperties({value:this.getIdValue(t,null)},!0);var o=this.currentView();e.prototype.clickHandler.call(this,t,this.value),this.isMultiSelection&&this.currentDate!==this.value&&!m(this.tableBodyElement.querySelectorAll("."+By)[0])&&"Year"===o&&this.tableBodyElement.querySelectorAll("."+By)[0].classList.remove(By)},t.prototype.switchView=function(t,i,n,o){e.prototype.switchView.call(this,t,i,this.isMultiSelection,o)},t.prototype.getModuleName=function(){return e.prototype.getModuleName.call(this),"calendar"},t.prototype.getPersistData=function(){e.prototype.getPersistData.call(this);return this.addOnPersist(["value","values"])},t.prototype.onPropertyChanged=function(t,i){this.effect="",this.rangeValidation(this.min,this.max);for(var n=0,o=Object.keys(t);n<o.length;n++){switch(o[n]){case"value":this.isDateSelected&&("string"===typeof t.value?this.setProperties({value:new Date(this.checkValue(t.value))},!0):t.value=new Date(this.checkValue(t.value)),isNaN(+this.value)&&this.setProperties({value:i.value},!0),this.update());break;case"values":if(this.isDateSelected){if("string"===typeof t.values||"number"===typeof t.values)this.setProperties({values:null},!0);else{for(var s=this.copyValues(this.values),a=0;a<s.length;a++){var r=s[a];this.checkDateValue(r)&&!e.prototype.checkPresentDate.call(this,r,s)&&s.push(r)}this.setProperties({values:s},!0),this.values.length>0&&this.setProperties({value:t.values[t.values.length-1]},!0)}this.validateValues(this.isMultiSelection,this.values),this.update()}break;case"isMultiSelection":this.isDateSelected&&(this.setProperties({isMultiSelection:t.isMultiSelection},!0),this.update());break;case"enabled":this.setEnable(this.enabled);break;case"cssClass":"calendar"===this.getModuleName()&&this.setClass(t.cssClass,i.cssClass);break;default:e.prototype.onPropertyChanged.call(this,t,i,this.isMultiSelection,this.values)}}this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange},t.prototype.destroy=function(){if(e.prototype.destroy.call(this),"calendar"===this.getModuleName()){var t=Fe(this.element,"form");t&&ye.remove(t,"reset",this.formResetHandler.bind(this))}},t.prototype.navigateTo=function(t,i,n){this.minMaxUpdate(),e.prototype.navigateTo.call(this,t,i,n)},t.prototype.currentView=function(){return e.prototype.currentView.call(this)},t.prototype.addDate=function(t){if("string"!==typeof t&&"number"!==typeof t){var i=this.copyValues(this.values);if("object"===typeof t&&t.length>0)for(var n=t,o=0;o<n.length;o++)this.checkDateValue(n[o])&&!e.prototype.checkPresentDate.call(this,n[o],i)&&(!m(i)&&i.length>0?i.push(n[o]):i=[new Date(+n[o])]);else this.checkDateValue(t)&&!e.prototype.checkPresentDate.call(this,t,i)&&(!m(i)&&i.length>0?i.push(t):i=[new Date(+t)]);this.setProperties({values:i},!0),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.validateValues(this.isMultiSelection,i),this.update(),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}},t.prototype.removeDate=function(e){if("string"!==typeof e&&"number"!==typeof e&&!m(this.values)&&this.values.length>0){var t=this.copyValues(this.values);if("object"===typeof e&&e.length>0)for(var i=e,n=0;n<i.length;n++)for(var o=0;o<t.length;o++)+t[o]===+i[n]&&t.splice(o,1);else for(o=0;o<t.length;o++)+t[o]===+e&&t.splice(o,1);this.setProperties({values:t},!1),this.update(),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}},t.prototype.setTodayDate=function(t){var i=new Date(+t);this.setProperties({value:i},!0),e.prototype.todayButtonClick.call(this,null,i,!0)},t.prototype.update=function(){this.validateDate(),this.minMaxUpdate(),e.prototype.setValueUpdate.call(this)},t.prototype.selectDate=function(t,i,n){e.prototype.selectDate.call(this,t,i,n,this.isMultiSelection,this.values),this.isMultiSelection&&!m(this.values)&&this.values.length>0&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler(t)},t.prototype.changeEvent=function(e){((this.value&&this.value.valueOf())!==(this.previousDate&&+this.previousDate.valueOf())||this.isMultiSelection)&&(this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.changedArgs),this.previousDate=new Date(+this.value))},t.prototype.triggerChange=function(e){!m(this.todayButtonEvent)&&this.isTodayClicked&&(e=this.todayButtonEvent,this.isTodayClicked=!1),this.changedArgs.event=e||null,this.changedArgs.isInteracted=!m(e),m(this.value)||this.setProperties({value:this.value},!0),this.isMultiSelection||+this.value===Number.NaN||(m(this.value)||m(this.previousDate))&&(null!=this.previousDate||isNaN(+this.value))?m(this.values)||this.previousValues===this.values.length||(this.changeEvent(e),this.previousValues=this.values.length):this.changeEvent(e)},xy([Ge(null)],t.prototype,"value",void 0),xy([Ge(null)],t.prototype,"values",void 0),xy([Ge(!1)],t.prototype,"isMultiSelection",void 0),xy([$e()],t.prototype,"change",void 0),t=xy([et],t)}(qy),Qy=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Zy=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Xy="e-datepicker",Gy="e-popup-wrapper",Jy="e-input-focus",Ky="e-error",$y="e-active",ev="e-date-overflow",tv="e-selected",iv="e-non-edit",nv=["title","class","style"],ov=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.previousElementValue="",n.isDateIconClicked=!1,n.isAltKeyPressed=!1,n.isInteracted=!0,n.invalidValueString=null,n.checkPreviousValue=null,n.maskedDateValue="",n.isAngular=!1,n.preventChange=!1,n.isIconClicked=!1,n.isDynamicValueChanged=!1,n.moduleName=n.getModuleName(),n.isFocused=!1,n.datepickerOptions=t,n}return Qy(t,e),t.prototype.render=function(){this.initialize(),this.bindEvents(),rs.calculateWidth(this.inputElement,this.inputWrapper.container),m(this.inputWrapper.buttons[0])||m(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])||"Never"===this.floatLabelType||this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon"),!m(Fe(this.element,"fieldset"))&&Fe(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete(),this.setTimeZone(this.serverTimezoneOffset)},t.prototype.setTimeZone=function(e){if(!m(this.serverTimezoneOffset)&&this.value){var t=e+(new Date).getTimezoneOffset()/60;t=this.isDayLightSaving()?t--:t,this.value=new Date(this.value.getTime()+60*t*60*1e3),this.updateInput()}},t.prototype.isDayLightSaving=function(){var e=new Date(this.value.getFullYear(),0,1).getTimezoneOffset(),t=new Date(this.value.getFullYear(),6,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(e,t)},t.prototype.setAllowEdit=function(){this.allowEdit?this.readonly||this.inputElement.removeAttribute("readonly"):Ve(this.inputElement,{readonly:""}),this.updateIconState()},t.prototype.updateIconState=function(){this.allowEdit||!this.inputWrapper||this.readonly?this.inputWrapper&&Se([this.inputWrapper.container],[iv]):""===this.inputElement.value?Se([this.inputWrapper.container],[iv]):be([this.inputWrapper.container],[iv])},t.prototype.initialize=function(){this.checkInvalidValue(this.value),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"}),this.createInput(),this.updateHtmlAttributeToWrapper(),this.setAllowEdit(),this.updateInput(!0),!this.enableMask||this.value||!this.maskedDateValue||"Always"!=this.floatLabelType&&this.floatLabelType&&this.placeholder||this.updateInputValue(this.maskedDateValue),this.previousElementValue=this.inputElement.value,this.previousDate=m(this.value)?null:new Date(+this.value),this.inputElement.setAttribute("value",this.inputElement.value),this.inputValueCopy=this.value},t.prototype.createInput=function(){if("datepicker"===this.getModuleName()){var e={placeholder:this.placeholder};this.globalize=new ee(this.locale),this.l10n=new qt("datepicker",e,this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0)}var t=this.cssClass;m(this.cssClass)||""===this.cssClass||(t=this.cssClass.replace(/\s+/g," ").trim());var i=!this.enableMask;this.inputWrapper=rs.createInput({element:this.inputElement,floatLabelType:this.floatLabelType,bindClearAction:i,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:t,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton},buttons:["e-input-group-icon e-date-icon e-icons"]},this.createElement),this.setWidth(this.width),""!==this.inputElement.name?this.inputElement.setAttribute("name",""+this.inputElement.getAttribute("name")):this.inputElement.setAttribute("name",""+this.element.id),Ve(this.inputElement,{"aria-atomic":"true","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-invalid":"false"}),this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1),rs.addAttributes({"aria-label":"select"},this.inputWrapper.buttons[0]),be([this.inputWrapper.container],"e-date-wrapper")},t.prototype.updateInput=function(t){var i;if(void 0===t&&(t=!1),this.value&&!this.isCalendar()&&this.disabledDates(t),isNaN(+new Date(this.checkValue(this.value)))&&this.setProperties({value:null},!0),this.strictMode&&(e.prototype.validateDate.call(this),this.minMaxUpdates(),e.prototype.minMaxUpdate.call(this)),!m(this.value)){var n=this.value,o=void 0,s=m(this.formatString)?this.dateTimeFormat:this.formatString;if("datetimepicker"===this.getModuleName()?o="Gregorian"===this.calendarMode?this.globalize.formatDate(this.value,{format:s,type:"dateTime",skeleton:"yMd"}):this.globalize.formatDate(this.value,{format:s,type:"dateTime",skeleton:"yMd",calendar:"islamic"}):(i="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},o=this.globalize.formatDate(this.value,i)),+n<=+this.max&&+n>=+this.min)this.updateInputValue(o);else{var a=+n>=+this.max||!+this.value||!+this.value||+n<=+this.min;!this.strictMode&&a&&this.updateInputValue(o)}}m(this.value)&&this.strictMode&&(this.enableMask?(this.updateInputValue(this.maskedDateValue),this.notify("createMask",{module:"MaskedDateTime"})):this.updateInputValue("")),!this.strictMode&&m(this.value)&&this.invalidValueString&&this.updateInputValue(this.invalidValueString),this.changedArgs={value:this.value},this.errorClass(),this.updateIconState()},t.prototype.minMaxUpdates=function(){!m(this.value)&&this.value<this.min&&this.min<=this.max&&this.strictMode?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!m(this.value)&&this.value>this.max&&this.min<=this.max&&this.strictMode&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})},t.prototype.checkStringValue=function(e){var t=null,i=null,n=null;if("datetimepicker"===this.getModuleName()){var o=new ee(this.locale);"Gregorian"===this.calendarMode?(i={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd"},n={format:o.getDatePattern({skeleton:"yMd"}),type:"dateTime"}):(i={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd",calendar:"islamic"},n={format:o.getDatePattern({skeleton:"yMd"}),type:"dateTime",calendar:"islamic"})}else i="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};return m(t=this.checkDateValue(this.globalize.parseDate(e,i)))&&"datetimepicker"===this.getModuleName()&&(t=this.checkDateValue(this.globalize.parseDate(e,n))),t},t.prototype.checkInvalidValue=function(e){if(!(e instanceof Date)&&!m(e)){var t=null,i=e;"number"===typeof e&&(i=e.toString());if("datetimepicker"===this.getModuleName()){var n=new ee(this.locale);"Gregorian"===this.calendarMode?({format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd"},{format:n.getDatePattern({skeleton:"yMd"}),type:"dateTime"}):({format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd",calendar:"islamic"},{format:n.getDatePattern({skeleton:"yMd"}),type:"dateTime",calendar:"islamic"})}else"Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};var o=!1;if("string"!==typeof i)i=null,o=!0;else if("string"===typeof i&&(i=i.trim()),!(t=this.checkStringValue(i))){var s=null;s=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,!/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/.test(i)&&!s.test(i)||/^[a-zA-Z0-9- ]*$/.test(i)||isNaN(+new Date(this.checkValue(i)))?o=!0:t=new Date(i)}o?(this.strictMode||(this.invalidValueString=i),this.setProperties({value:null},!0)):this.setProperties({value:t},!0)}},t.prototype.bindInputEvent=function(){m(this.formatString)&&!this.enableMask||(this.enableMask||-1===this.formatString.indexOf("y")?ye.add(this.inputElement,"input",this.inputHandler,this):ye.remove(this.inputElement,"input",this.inputHandler))},t.prototype.bindEvents=function(){ye.add(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateIconHandler,this),ye.add(this.inputElement,"mouseup",this.mouseUpHandler,this),ye.add(this.inputElement,"focus",this.inputFocusHandler,this),ye.add(this.inputElement,"blur",this.inputBlurHandler,this),this.enableMask&&ye.add(this.inputElement,"keydown",this.keydownHandler,this),this.bindInputEvent(),ye.add(this.inputElement,"change",this.inputChangeHandler,this),this.showClearButton&&this.inputWrapper.clearButton&&ye.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this),this.formElement&&ye.add(this.formElement,"reset",this.resetFormHandler,this),this.defaultKeyConfigs=f(this.defaultKeyConfigs,this.keyConfigs),this.keyboardModules=new Ut(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})},t.prototype.keydownHandler=function(e){switch(e.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":case"Home":case"End":case"Delete":!this.enableMask||this.popupObj||this.readonly||("Delete"!==e.code&&e.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e:e}))}},t.prototype.unBindEvents=function(){m(this.inputWrapper)||ye.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateIconHandler),ye.remove(this.inputElement,"mouseup",this.mouseUpHandler),ye.remove(this.inputElement,"focus",this.inputFocusHandler),ye.remove(this.inputElement,"blur",this.inputBlurHandler),ye.remove(this.inputElement,"change",this.inputChangeHandler),this.enableMask&&ye.remove(this.inputElement,"keydown",this.keydownHandler),this.showClearButton&&this.inputWrapper.clearButton&&ye.remove(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler),this.formElement&&ye.remove(this.formElement,"reset",this.resetFormHandler)},t.prototype.resetFormHandler=function(){if(this.enabled&&!this.inputElement.disabled){var e=this.inputElement.getAttribute("value");"EJS-DATEPICKER"!==this.element.tagName&&"EJS-DATETIMEPICKER"!==this.element.tagName||(e="",this.inputValueCopy=null,this.inputElement.setAttribute("value","")),this.setProperties({value:this.inputValueCopy},!0),this.restoreValue(),this.inputElement&&(this.updateInputValue(e),this.errorClass())}},t.prototype.restoreValue=function(){this.currentDate=this.value?this.value:new Date,this.previousDate=this.value,this.previousElementValue=m(this.inputValueCopy)?"":this.globalize.formatDate(this.inputValueCopy,{format:this.formatString,type:"dateTime",skeleton:"yMd"})},t.prototype.inputChangeHandler=function(e){this.enabled&&e.stopPropagation()},t.prototype.bindClearEvent=function(){this.showClearButton&&this.inputWrapper.clearButton&&ye.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)},t.prototype.resetHandler=function(e){this.enabled&&(e.preventDefault(),this.clear(e))},t.prototype.mouseUpHandler=function(e){this.enableMask&&(e.preventDefault(),this.notify("setMaskSelection",{module:"MaskedDateTime"}))},t.prototype.clear=function(e){this.setProperties({value:null},!0),this.enableMask||this.updateInputValue("");var t={event:e};if(this.trigger("cleared",t),this.invalidValueString="",this.updateInput(),this.popupUpdate(),this.changeEvent(e),this.enableMask&&this.notify("clearHandler",{module:"MaskedDateTime"}),Fe(this.element,"form")){var i=this.element,n=document.createEvent("KeyboardEvent");n.initEvent("keyup",!1,!0),i.dispatchEvent(n)}},t.prototype.preventEventBubbling=function(e){e.preventDefault(),this.interopAdaptor.invokeMethodAsync("OnDateIconClick")},t.prototype.updateInputValue=function(e){rs.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.dateIconHandler=function(e){this.enabled&&(this.isIconClicked=!0,ge.isDevice&&(this.inputElement.setAttribute("readonly",""),this.inputElement.blur()),e.preventDefault(),this.readonly||(this.isCalendar()?this.hide(e):(this.isDateIconClicked=!0,this.show(null,e),"datetimepicker"===this.getModuleName()&&this.inputElement.focus(),this.inputElement.focus(),be([this.inputWrapper.container],[Jy]),be(this.inputWrapper.buttons,$y))),this.isIconClicked=!1)},t.prototype.updateHtmlAttributeToWrapper=function(){if(!m(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if(!m(this.htmlAttributes[""+i])&&nv.indexOf(i)>-1)if("class"===i){var n=this.htmlAttributes[""+i].replace(/\s+/g," ").trim();""!==n&&be([this.inputWrapper.container],n.split(" "))}else if("style"===i){var o=this.inputWrapper.container.getAttribute(i);m(o)?o=this.htmlAttributes[""+i]:";"===o.charAt(o.length-1)?o+=this.htmlAttributes[""+i]:o=o+";"+this.htmlAttributes[""+i],this.inputWrapper.container.setAttribute(i,o)}else this.inputWrapper.container.setAttribute(i,this.htmlAttributes[""+i])}},t.prototype.updateHtmlAttributeToElement=function(){if(!m(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];nv.indexOf(i)<0&&this.inputElement.setAttribute(i,this.htmlAttributes[""+i])}},t.prototype.updateCssClass=function(e,t){m(t)||(t=t.replace(/\s+/g," ").trim()),m(e)||(e=e.replace(/\s+/g," ").trim()),rs.setCssClass(e,[this.inputWrapper.container],t),this.popupWrapper&&rs.setCssClass(e,[this.popupWrapper],t)},t.prototype.calendarKeyActionHandle=function(e){switch(e.action){case"escape":this.isCalendar()?this.hide(e):this.inputWrapper.container.children[this.index].blur();break;case"enter":this.isCalendar()?+this.value===+this.currentDate||this.isCalendar()||this.inputWrapper.container.children[this.index].focus():this.show(null,e),"datetimepicker"===this.getModuleName()&&this.inputElement.focus();break;case"tab":this.hide(e)}},t.prototype.inputFocusHandler=function(){if(this.isFocused=!0,this.enabled){this.enableMask&&!this.inputElement.value&&this.placeholder&&(!this.maskedDateValue||this.value||"Auto"!=this.floatLabelType&&"Never"!=this.floatLabelType&&!this.placeholder||(this.updateInputValue(this.maskedDateValue),this.inputElement.selectionStart=0,this.inputElement.selectionEnd=this.inputElement.value.length));var e={model:this};this.isDateIconClicked=!1,this.trigger("focus",e),this.updateIconState(),this.openOnFocus&&!this.isIconClicked&&this.show()}},t.prototype.inputHandler=function(){this.isPopupClicked=!1,this.enableMask&&this.notify("inputHandler",{module:"MaskedDateTime"})},t.prototype.inputBlurHandler=function(e){if(this.enabled){if(this.strictModeUpdate(),""===this.inputElement.value&&m(this.value)&&(this.invalidValueString=null,this.updateInputValue("")),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.enableMask&&this.maskedDateValue&&this.placeholder&&"Always"!==this.floatLabelType&&(this.inputElement.value!=this.maskedDateValue||this.value||"Auto"!=this.floatLabelType&&"Never"!=this.floatLabelType&&!this.placeholder||this.updateInputValue("")),this.errorClass(),this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(e),"datepicker"===this.getModuleName()){var t={model:this};this.trigger("blur",t)}this.isCalendar()&&(this.defaultKeyConfigs=f(this.defaultKeyConfigs,this.keyConfigs),this.calendarKeyboardModules=new Ut(this.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:this.calendarKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})),this.isPopupClicked=!1}},t.prototype.documentHandler=function(t){m(this.popupObj)||m(this.inputWrapper)||!(this.inputWrapper.container.contains(t.target)&&"mousedown"!==t.type||this.popupObj.element&&this.popupObj.element.contains(t.target))||"touchstart"===t.type||t.preventDefault();var i=t.target;Fe(i,".e-datepicker.e-popup-wrapper")||m(this.inputWrapper)||Fe(i,".e-input-group")===this.inputWrapper.container||i.classList.contains("e-day")?Fe(i,".e-datepicker.e-popup-wrapper")&&(i.classList.contains("e-day")&&!m(t.target.parentElement)&&t.target.parentElement.classList.contains("e-selected")&&Fe(i,".e-content")&&Fe(i,".e-content").classList.contains("e-"+this.depth.toLowerCase())||Fe(i,".e-footer-container")&&i.classList.contains("e-today")&&i.classList.contains("e-btn")&&+new Date(+this.value)===+e.prototype.generateTodayVal.call(this,this.value))&&this.hide(t):(this.hide(t),this.focusOut())},t.prototype.inputKeyActionHandle=function(e){var t=this.currentView();switch(e.action){case"altUpArrow":this.isAltKeyPressed=!1,this.hide(e),this.inputElement.focus();break;case"altDownArrow":this.isAltKeyPressed=!0,this.strictModeUpdate(),this.updateInput(),this.changeTrigger(e),"datepicker"===this.getModuleName()&&this.show(null,e);break;case"escape":this.hide(e);break;case"enter":this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass(),this.isCalendar()||document.activeElement!==this.inputElement||this.hide(e),this.isCalendar()&&(e.preventDefault(),e.stopPropagation());break;case"tab":case"shiftTab":var i=this.inputElement.selectionStart,n=this.inputElement.selectionEnd;if(this.enableMask&&!this.popupObj&&!this.readonly){var o=this.inputElement.value.length;(0==i&&n==o||n!==o&&"tab"==e.action||0!==i&&"shiftTab"==e.action)&&e.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e:e}),i=this.inputElement.selectionStart,n=this.inputElement.selectionEnd}this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass(),this.enableMask&&(this.inputElement.selectionStart=i,this.inputElement.selectionEnd=n),this.hide(e);break;default:this.defaultAction(e),"select"===e.action&&t===this.depth&&this.hide(e)}},t.prototype.defaultAction=function(t){this.previousDate=!m(this.value)&&new Date(+this.value)||null,this.isCalendar()&&(e.prototype.keyActionHandle.call(this,t),this.isCalendar()&&Ve(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()}))},t.prototype.popupUpdate=function(){if((m(this.value)&&!m(this.previousDate)||+this.value!==+this.previousDate)&&(this.popupObj&&this.popupObj.element.querySelectorAll("."+tv).length>0&&Se(this.popupObj.element.querySelectorAll("."+tv),[tv]),!m(this.value)&&+this.value>=+this.min&&+this.value<=+this.max)){var t=new Date(this.checkValue(this.value));e.prototype.navigateTo.call(this,"Month",t)}},t.prototype.strictModeUpdate=function(){var e,t,i,n;(e="datetimepicker"===this.getModuleName()?m(this.formatString)?this.dateTimeFormat:this.formatString:m(this.formatString)?this.formatString:this.formatString.replace("dd","d"),m(e))||e.split("M").length-1<3&&(e=e.replace("MM","M"));i="datetimepicker"===this.getModuleName()?"Gregorian"===this.calendarMode?{format:m(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:m(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:t="Gregorian"===this.calendarMode?{format:e,type:"dateTime",skeleton:"yMd"}:{format:e,type:"dateTime",skeleton:"yMd",calendar:"islamic"},"string"===typeof this.inputElement.value&&(this.inputElement.value=this.inputElement.value.trim()),"datetimepicker"===this.getModuleName()?this.checkDateValue(this.globalize.parseDate(this.inputElement.value,i))?n=this.globalize.parseDate(this.inputElement.value.toLocaleUpperCase(),i):(t="Gregorian"===this.calendarMode?{type:"dateTime",skeleton:"yMd"}:{type:"dateTime",skeleton:"yMd",calendar:"islamic"},n=this.globalize.parseDate(this.inputElement.value,t)):(n=!m(n=this.globalize.parseDate(this.inputElement.value,i))&&isNaN(+n)?null:n,!m(this.formatString)&&""!==this.inputElement.value&&this.strictMode&&(this.isPopupClicked||!this.isPopupClicked&&this.inputElement.value===this.previousElementValue)&&-1===this.formatString.indexOf("y")&&n.setFullYear(this.value.getFullYear())),"datepicker"===this.getModuleName()&&this.value&&!isNaN(+this.value)&&n&&n.setHours(this.value.getHours(),this.value.getMinutes(),this.value.getSeconds(),this.value.getMilliseconds()),this.strictMode&&n?(this.updateInputValue(this.globalize.formatDate(n,i)),this.inputElement.value!==this.previousElementValue&&this.setProperties({value:n},!0)):this.strictMode||this.inputElement.value!==this.previousElementValue&&this.setProperties({value:n},!0),this.strictMode&&!n&&this.inputElement.value===(this.enableMask?this.maskedDateValue:"")&&this.setProperties({value:null},!0),isNaN(+this.value)&&this.setProperties({value:null},!0),m(this.value)&&(this.currentDate=new Date((new Date).setHours(0,0,0,0)))},t.prototype.createCalendar=function(){var e=this;this.popupWrapper=this.createElement("div",{className:Xy+" "+Gy}),m(this.cssClass)||(this.popupWrapper.className+=" "+this.cssClass),ge.isDevice&&(this.modelHeader(),this.modal=this.createElement("div"),this.modal.className=Xy+" e-date-modal",document.body.className+=" "+ev,this.modal.style.display="block",document.body.appendChild(this.modal)),this.calendarElement.querySelector("table tbody").className="",this.popupObj=new Ln(this.popupWrapper,{content:this.calendarElement,relateTo:ge.isDevice?document.body:this.inputWrapper.container,position:ge.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},offsetY:4,targetType:"container",enableRtl:this.enableRtl,zIndex:this.zIndex,collision:ge.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},open:function(){"datetimepicker"!==e.getModuleName()&&document.activeElement!==e.inputElement&&(e.defaultKeyConfigs=f(e.defaultKeyConfigs,e.keyConfigs),e.calendarElement.children[1].firstElementChild.focus(),e.calendarKeyboardModules=new Ut(e.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:e.calendarKeyActionHandle.bind(e),keyConfigs:e.defaultKeyConfigs}),e.calendarKeyboardModules=new Ut(e.inputWrapper.container.children[e.index],{eventName:"keydown",keyAction:e.calendarKeyActionHandle.bind(e),keyConfigs:e.defaultKeyConfigs}))},close:function(){e.isDateIconClicked&&e.inputWrapper.container.children[e.index].focus(),e.value&&e.disabledDates(),e.popupObj&&e.popupObj.destroy(),e.resetCalendar(),Ae(e.popupWrapper),e.popupObj=e.popupWrapper=null,e.preventArgs=null,e.calendarKeyboardModules=null,e.setAriaAttributes()},targetExitViewport:function(){ge.isDevice||e.hide()}}),this.popupObj.element.className+=" "+this.cssClass,this.setAriaAttributes()},t.prototype.setAriaDisabled=function(){this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1)},t.prototype.modelHeader=function(){var e,t=this.createElement("div",{className:"e-model-header"}),i=this.createElement("h1",{className:"e-model-year"}),n=this.createElement("div"),o=this.createElement("span",{className:"e-model-day"}),s=this.createElement("span",{className:"e-model-month"});e="Gregorian"===this.calendarMode?{format:"y",skeleton:"dateTime"}:{format:"y",skeleton:"dateTime",calendar:"islamic"},i.textContent=""+this.globalize.formatDate(this.value||new Date,e),e="Gregorian"===this.calendarMode?{format:"E",skeleton:"dateTime"}:{format:"E",skeleton:"dateTime",calendar:"islamic"},o.textContent=this.globalize.formatDate(this.value||new Date,e)+", ",e="Gregorian"===this.calendarMode?{format:"MMM d",skeleton:"dateTime"}:{format:"MMM d",skeleton:"dateTime",calendar:"islamic"},s.textContent=""+this.globalize.formatDate(this.value||new Date,e),t.appendChild(i),n.appendChild(o),n.appendChild(s),t.appendChild(n),this.calendarElement.insertBefore(t,this.calendarElement.firstElementChild)},t.prototype.changeTrigger=function(e){this.inputElement.value!==this.previousElementValue&&(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())&&(this.isDynamicValueChanged&&this.isCalendar()&&this.popupUpdate(),this.changedArgs.value=this.value,this.changedArgs.event=e||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=!m(e),this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.changedArgs),this.previousElementValue=this.inputElement.value,this.previousDate=isNaN(+new Date(this.checkValue(this.value)))?null:new Date(this.checkValue(this.value)),this.isInteracted=!0)},t.prototype.navigatedEvent=function(){this.trigger("navigated",this.navigatedArgs)},t.prototype.changeEvent=function(e){this.isIconClicked||this.selectCalendar(e),(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())?(this.changedArgs.event=e||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=this.isInteracted,this.isDynamicValueChanged||this.trigger("change",this.changedArgs),this.previousDate=this.value&&new Date(+this.value),this.isDynamicValueChanged||this.hide(e),this.previousElementValue=this.inputElement.value,this.errorClass()):e&&this.hide(e)},t.prototype.requiredModules=function(){var e=[];return this&&e.push({args:[this],member:"islamic"}),this.enableMask&&e.push({args:[this],member:"MaskedDateTime"}),e},t.prototype.selectCalendar=function(e){var t,i,n;i="datetimepicker"===this.getModuleName()&&m(this.formatString)?this.dateTimeFormat:this.formatString,this.value&&("datetimepicker"===this.getModuleName()?(n="Gregorian"===this.calendarMode?{format:i,type:"dateTime",skeleton:"yMd"}:{format:i,type:"dateTime",skeleton:"yMd",calendar:"islamic"},t=this.globalize.formatDate(this.changedArgs.value,n)):(n="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},t=this.globalize.formatDate(this.changedArgs.value,n)),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"})),m(t)||(this.updateInputValue(t),this.enableMask&&this.notify("setMaskSelection",{module:"MaskedDateTime"}))},t.prototype.isCalendar=function(){return!(!this.popupWrapper||!this.popupWrapper.classList.contains(""+Gy))},t.prototype.setWidth=function(e){this.inputWrapper.container.style.width="number"===typeof e?b(this.width):"string"===typeof e?e.match(/px|%|em/)?this.width:b(this.width):"100%"},t.prototype.show=function(t,i){var n=this;if(!(this.enabled&&this.readonly||!this.enabled||this.popupObj)){var o=!0,s=void 0;m(this.value)||+this.value>=+new Date(this.checkValue(this.min))&&+this.value<=+new Date(this.checkValue(this.max))?s=this.value||null:(s=new Date(this.checkValue(this.value)),this.setProperties({value:null},!0)),this.isCalendar()||(e.prototype.render.call(this),this.setProperties({value:s||null},!0),this.previousDate=s,this.createCalendar()),ge.isDevice&&(this.mobilePopupWrapper=this.createElement("div",{className:"e-datepick-mob-popup-wrap"}),document.body.appendChild(this.mobilePopupWrapper)),this.preventArgs={preventDefault:function(){o=!1},popup:this.popupObj,event:i||null,cancel:!1,appendTo:ge.isDevice?this.mobilePopupWrapper:document.body};var a=this.preventArgs;this.trigger("open",a,(function(t){if(n.preventArgs=t,o&&!n.preventArgs.cancel){be(n.inputWrapper.buttons,$y),n.preventArgs.appendTo.appendChild(n.popupWrapper),n.popupObj.refreshPosition(n.inputElement);var i={name:"FadeIn",duration:ge.isDevice?0:300};1e3===n.zIndex?n.popupObj.show(new st(i),n.element):n.popupObj.show(new st(i),null),e.prototype.setOverlayIndex.call(n,n.mobilePopupWrapper,n.popupObj.element,n.modal,ge.isDevice),n.setAriaAttributes()}else n.popupObj.destroy(),n.popupWrapper=n.popupObj=null;m(n.inputElement)||""!==n.inputElement.value||!m(n.tableBodyElement)&&n.tableBodyElement.querySelectorAll("td.e-selected").length>0&&(be([n.tableBodyElement.querySelector("td.e-selected")],"e-focused-date"),Se(n.tableBodyElement.querySelectorAll("td.e-selected"),tv)),ye.add(document,"mousedown touchstart",n.documentHandler,n)}))}},t.prototype.hide=function(e){var t=this;if(m(this.popupWrapper))ge.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit();else{var i=!0;this.preventArgs={preventDefault:function(){i=!1},popup:this.popupObj,event:e||null,cancel:!1},Se(this.inputWrapper.buttons,$y),Se([document.body],ev);var n=this.preventArgs;this.isCalendar()?this.trigger("close",n,(function(e){t.closeEventCallback(i,e)})):this.closeEventCallback(i,n)}},t.prototype.closeEventCallback=function(e,t){this.preventArgs=t,this.isCalendar()&&e&&!this.preventArgs.cancel&&(this.popupObj.hide(),this.isAltKeyPressed=!1,this.keyboardModule.destroy(),Se(this.inputWrapper.buttons,$y)),this.setAriaAttributes(),ge.isDevice&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null),ge.isDevice&&(m(this.mobilePopupWrapper)||(this.mobilePopupWrapper.remove(),this.mobilePopupWrapper=null)),ye.remove(document,"mousedown touchstart",this.documentHandler),ge.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()},t.prototype.focusIn=function(e){document.activeElement!==this.inputElement&&this.enabled&&(this.inputElement.focus(),be([this.inputWrapper.container],[Jy]))},t.prototype.focusOut=function(){document.activeElement===this.inputElement&&(Se([this.inputWrapper.container],[Jy]),this.inputElement.blur())},t.prototype.currentView=function(){var t;return this.calendarElement&&(t=e.prototype.currentView.call(this)),t},t.prototype.navigateTo=function(t,i){this.calendarElement&&e.prototype.navigateTo.call(this,t,i)},t.prototype.destroy=function(){this.unBindEvents(),e.prototype.destroy.call(this),m(this.keyboardModules)||this.keyboardModules.destroy(),this.popupObj&&this.popupObj.element.classList.contains("e-popup")&&e.prototype.destroy.call(this);this.inputElement&&(rs.removeAttributes({"aria-atomic":"true","aria-disabled":"true","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"},this.inputElement),m(this.inputElementCopy.getAttribute("tabindex"))?this.inputElement.removeAttribute("tabindex"):this.inputElement.setAttribute("tabindex",this.tabIndex),ye.remove(this.inputElement,"blur",this.inputBlurHandler),ye.remove(this.inputElement,"focus",this.inputFocusHandler),this.ensureInputAttribute()),this.isCalendar()&&(this.popupWrapper&&Ae(this.popupWrapper),this.popupObj=this.popupWrapper=null,this.keyboardModule.destroy()),null===this.ngTag&&(this.inputElement&&(m(this.inputWrapper)||this.inputWrapper.container.insertAdjacentElement("afterend",this.inputElement),Se([this.inputElement],["e-input"])),Se([this.element],[Xy]),m(this.inputWrapper)||Ae(this.inputWrapper.container)),this.formElement&&ye.remove(this.formElement,"reset",this.resetFormHandler),this.inputWrapper=null,this.keyboardModules=null},t.prototype.ensureInputAttribute=function(){for(var e=[],t=0;t<this.inputElement.attributes.length;t++)e[t]=this.inputElement.attributes[t].name;for(t=0;t<e.length;t++)m(this.inputElementCopy.getAttribute(e[t]))?("value"===e[t].toLowerCase()&&(this.inputElement.value=""),this.inputElement.removeAttribute(e[t])):("value"===e[t].toLowerCase()&&(this.inputElement.value=this.inputElementCopy.getAttribute(e[t])),this.inputElement.setAttribute(e[t],this.inputElementCopy.getAttribute(e[t])))},t.prototype.preRender=function(){this.inputElementCopy=this.element.cloneNode(!0),Se([this.inputElementCopy],[Xy,"e-control","e-lib"]),this.inputElement=this.element,this.formElement=Fe(this.inputElement,"form"),this.index=this.showClearButton?2:1,this.ngTag=null,"EJS-DATEPICKER"!==this.element.tagName&&"EJS-DATETIMEPICKER"!==this.element.tagName||(this.ngTag=this.element.tagName,this.inputElement=this.createElement("input"),this.element.appendChild(this.inputElement)),this.element.getAttribute("id")?null!==this.ngTag&&(this.inputElement.id=this.element.getAttribute("id")+"_input"):"datetimepicker"===this.getModuleName()?(this.element.id=y("ej2-datetimepicker"),null!==this.ngTag&&Ve(this.inputElement,{id:this.element.id+"_input"})):(this.element.id=y("ej2-datepicker"),null!==this.ngTag&&Ve(this.inputElement,{id:this.element.id+"_input"})),null!==this.ngTag&&this.validationAttribute(this.element,this.inputElement),this.updateHtmlAttributeToElement(),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.checkHtmlAttributes(!1),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),e.prototype.preRender.call(this)},t.prototype.getDefaultKeyConfig=function(){return this.defaultKeyConfigs={altUpArrow:"alt+uparrow",altDownArrow:"alt+downarrow",escape:"escape",enter:"enter",controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",shiftTab:"shift+tab",tab:"tab"},this.defaultKeyConfigs},t.prototype.validationAttribute=function(e,t){var i=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");t.setAttribute("name",i),e.removeAttribute("name");for(var n=["required","aria-required","form"],o=0;o<n.length;o++)if(!m(e.getAttribute(n[o]))){var s=e.getAttribute(n[o]);t.setAttribute(n[o],s),e.removeAttribute(n[o])}},t.prototype.checkFormat=function(){var e=new ee(this.locale);if(this.format)if("string"===typeof this.format)this.formatString=this.format;else if(""===this.format.skeleton||m(this.format.skeleton))"datetimepicker"===this.getModuleName()?this.formatString=this.dateTimeFormat:this.formatString=null;else{var t=this.format.skeleton;"datetimepicker"===this.getModuleName()?this.formatString=e.getDatePattern({skeleton:t,type:"dateTime"}):this.formatString=e.getDatePattern({skeleton:t,type:"date"})}else this.formatString=null},t.prototype.checkHtmlAttributes=function(e){this.globalize=new ee(this.locale),this.checkFormat(),this.checkView();var t,i=e?m(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","disabled","readonly","style","name","placeholder","type"];t="datetimepicker"===this.getModuleName()?"Gregorian"===this.calendarMode?{format:m(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:m(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:"Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};for(var n=0,o=i;n<o.length;n++){var s=o[n];if(!m(this.inputElement.getAttribute(s)))switch(s){case"disabled":if(m(this.datepickerOptions)||void 0===this.datepickerOptions.enabled||e){var a="disabled"!==this.inputElement.getAttribute(s)&&""!==this.inputElement.getAttribute(s)&&"true"!==this.inputElement.getAttribute(s);this.setProperties({enabled:a},!e)}break;case"readonly":if(m(this.datepickerOptions)||void 0===this.datepickerOptions.readonly||e){var r="readonly"===this.inputElement.getAttribute(s)||""===this.inputElement.getAttribute(s)||"true"===this.inputElement.getAttribute(s);this.setProperties({readonly:r},!e)}break;case"placeholder":(m(this.datepickerOptions)||void 0===this.datepickerOptions.placeholder||e)&&this.setProperties({placeholder:this.inputElement.getAttribute(s)},!e);break;case"style":this.inputElement.setAttribute("style",""+this.inputElement.getAttribute(s));break;case"name":this.inputElement.setAttribute("name",""+this.inputElement.getAttribute(s));break;case"value":if(m(this.datepickerOptions)||void 0===this.datepickerOptions.value||e){var l=this.inputElement.getAttribute(s);this.setProperties(d(s,this.globalize.parseDate(l,t),{}),!e)}break;case"min":if(+this.min===+new Date(1900,0,1)||e){var h=this.inputElement.getAttribute(s);this.setProperties(d(s,this.globalize.parseDate(h),{}),!e)}break;case"max":if(+this.max===+new Date(2099,11,31)||e){var p=this.inputElement.getAttribute(s);this.setProperties(d(s,this.globalize.parseDate(p),{}),!e)}break;case"type":"text"!==this.inputElement.getAttribute(s)&&this.inputElement.setAttribute("type","text")}}},t.prototype.getModuleName=function(){return"datepicker"},t.prototype.disabledDates=function(t){var i;void 0===t&&(t=!1);var n=this.checkDateValue(this.value)?new Date(+this.value):new Date(this.checkValue(this.value)),o=this.previousDate;this.minMaxUpdates(),(!t||t&&!m(this.renderDayCell))&&e.prototype.render.call(this),this.previousDate=o;var s,a='*[id^="/id"]'.replace("/id",""+(n&&+n));this.strictMode||("string"===typeof this.value||"object"===typeof this.value&&+this.value!==+n)&&this.setProperties({value:n},!0),m(this.calendarElement)||m(this.calendarElement.querySelectorAll(a)[0])||this.calendarElement.querySelectorAll(a)[0].classList.contains("e-disabled")&&(this.strictMode||(this.currentDate=new Date((new Date).setHours(0,0,0,0)))),"datetimepicker"===this.getModuleName()?s="Gregorian"===this.calendarMode?this.globalize.formatDate(n,{format:m(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}):this.globalize.formatDate(n,{format:m(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}):(i="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},s=this.globalize.formatDate(n,i)),this.popupObj||(this.updateInputValue(s),this.enableMask&&(this.updateInputValue(this.maskedDateValue),this.notify("createMask",{module:"MaskedDateTime"})))},t.prototype.setAriaAttributes=function(){this.isCalendar()?(rs.addAttributes({"aria-expanded":"true"},this.inputElement),Ve(this.inputElement,{"aria-owns":this.inputElement.id+"_options"}),this.value&&Ve(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()})):(rs.addAttributes({"aria-expanded":"false"},this.inputElement),this.inputElement.removeAttribute("aria-owns"),this.inputElement.removeAttribute("aria-activedescendant"))},t.prototype.errorClass=function(){var e='*[id^="/id"]'.replace("/id",""+ +this.value),t=this.calendarElement&&this.calendarElement.querySelectorAll(e)[0]&&this.calendarElement.querySelectorAll(e)[0].classList.contains("e-disabled");!(m(this.value)||m(this.min)||m(this.max)||new Date(this.value).setMilliseconds(0)>=new Date(this.min).setMilliseconds(0)&&new Date(this.value).setMilliseconds(0)<=new Date(this.max).setMilliseconds(0))||!this.strictMode&&""!==this.inputElement.value&&this.inputElement.value!==this.maskedDateValue&&m(this.value)||t?(be([this.inputWrapper.container],Ky),Ve(this.inputElement,{"aria-invalid":"true"})):(Se([this.inputWrapper.container],Ky),Ve(this.inputElement,{"aria-invalid":"false"}))},t.prototype.onPropertyChanged=function(t,i){for(var n=0,o=Object.keys(t);n<o.length;n++){switch(o[n]){case"value":this.isDynamicValueChanged=!0,this.isInteracted=!1,this.invalidValueString=null,this.checkInvalidValue(t.value),t.value=this.value,this.previousElementValue=this.inputElement.value,m(this.value)&&(this.updateInputValue(""),this.currentDate=new Date((new Date).setHours(0,0,0,0))),this.updateInput(!0),+this.previousDate!==+this.value&&this.changeTrigger(null),this.isInteracted=!0,this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange,this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"format":this.checkFormat(),this.bindInputEvent(),this.updateInput(),this.enableMask&&(this.notify("createMask",{module:"MaskedDateTime"}),this.value||this.updateInputValue(this.maskedDateValue));break;case"allowEdit":this.setAllowEdit();break;case"placeholder":rs.setPlaceholder(this.placeholder,this.inputElement);break;case"readonly":rs.setReadonly(this.readonly,this.inputElement);break;case"enabled":rs.setEnabled(this.enabled,this.inputElement),this.setAriaDisabled();break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkHtmlAttributes(!0);break;case"locale":this.globalize=new ee(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),rs.setPlaceholder(this.placeholder,this.inputElement),this.updateInput(),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"enableRtl":rs.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"start":case"depth":this.checkView(),this.calendarElement&&e.prototype.onPropertyChanged.call(this,t,i);break;case"zIndex":this.setProperties({zIndex:t.zIndex},!0);break;case"cssClass":this.updateCssClass(t.cssClass,i.cssClass);break;case"showClearButton":rs.setClearButton(this.showClearButton,this.inputElement,this.inputWrapper),this.bindClearEvent(),this.index=this.showClearButton?2:1;break;case"strictMode":this.invalidValueString=null,this.updateInput();break;case"width":this.setWidth(t.width),rs.calculateWidth(this.inputElement,this.inputWrapper.container),m(this.inputWrapper.buttons[0])||m(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])||"Never"===this.floatLabelType||this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"floatLabelType":this.floatLabelType=t.floatLabelType,rs.removeFloating(this.inputWrapper),rs.addFloating(this.inputElement,this.floatLabelType,this.placeholder),m(this.inputWrapper.buttons[0])||m(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])||"Never"===this.floatLabelType||this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"enableMask":this.enableMask?(this.notify("createMask",{module:"MaskedDateTime"}),this.updateInputValue(this.maskedDateValue),this.bindInputEvent()):this.inputElement.value===this.maskedDateValue&&this.updateInputValue("");break;default:this.calendarElement&&this.isCalendar()&&e.prototype.onPropertyChanged.call(this,t,i)}this.isDynamicValueChanged||this.hide(null),this.isDynamicValueChanged=!1}},Zy([Ge(null)],t.prototype,"width",void 0),Zy([Ge(null)],t.prototype,"value",void 0),Zy([Ge(null)],t.prototype,"cssClass",void 0),Zy([Ge(!1)],t.prototype,"strictMode",void 0),Zy([Ge(null)],t.prototype,"format",void 0),Zy([Ge(!0)],t.prototype,"enabled",void 0),Zy([Ge({})],t.prototype,"htmlAttributes",void 0),Zy([Ge(null)],t.prototype,"values",void 0),Zy([Ge(!1)],t.prototype,"isMultiSelection",void 0),Zy([Ge(!0)],t.prototype,"showClearButton",void 0),Zy([Ge(!0)],t.prototype,"allowEdit",void 0),Zy([Ge(null)],t.prototype,"keyConfigs",void 0),Zy([Ge(!1)],t.prototype,"enablePersistence",void 0),Zy([Ge(1e3)],t.prototype,"zIndex",void 0),Zy([Ge(!1)],t.prototype,"readonly",void 0),Zy([Ge(null)],t.prototype,"placeholder",void 0),Zy([Ge("Never")],t.prototype,"floatLabelType",void 0),Zy([Ge(null)],t.prototype,"serverTimezoneOffset",void 0),Zy([Ge(!1)],t.prototype,"openOnFocus",void 0),Zy([Ge(!1)],t.prototype,"enableMask",void 0),Zy([Ge({day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"})],t.prototype,"maskPlaceholder",void 0),Zy([$e()],t.prototype,"open",void 0),Zy([$e()],t.prototype,"cleared",void 0),Zy([$e()],t.prototype,"close",void 0),Zy([$e()],t.prototype,"blur",void 0),Zy([$e()],t.prototype,"focus",void 0),Zy([$e()],t.prototype,"created",void 0),Zy([$e()],t.prototype,"destroyed",void 0),t=Zy([et],t)}(Yy),sv=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),av=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},rv="e-error",lv="240px",dv=(new Date).getDate(),hv=(new Date).getMonth(),pv=(new Date).getFullYear(),cv="e-timepicker",uv="e-active",fv="e-hover",mv="e-navigation",gv="e-disabled",yv="e-input-focus",vv="e-list-item",wv="e-time-overflow",bv="e-non-edit",Sv=["title","class","style"];!function(e){e.createListItems=function(e,t,i,n,o,s){var a;this.calendarMode;var r=6e4*s,l=[],d=[];a=+t.setMilliseconds(0);for(var h=+i.setMilliseconds(0);h>=a;)d.push(a),l.push(n.formatDate(new Date(a),{format:o,type:"time"})),a+=r;return{collection:d,list:bl.createList(e,l,null,!0)}}}(Bf||(Bf={}));(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}sv(t,e),av([Ge("day")],t.prototype,"day",void 0),av([Ge("month")],t.prototype,"month",void 0),av([Ge("year")],t.prototype,"year",void 0),av([Ge("day of the week")],t.prototype,"dayOfTheWeek",void 0),av([Ge("hour")],t.prototype,"hour",void 0),av([Ge("minute")],t.prototype,"minute",void 0),av([Ge("second")],t.prototype,"second",void 0)})(mt),function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.liCollections=[],n.timeCollections=[],n.disableItemCollection=[],n.invalidValueString=null,n.isAngular=!1,n.preventChange=!1,n.maskedDateValue="",n.moduleName=n.getModuleName(),n.timeOptions=t,n}sv(t,e),t.prototype.preRender=function(){this.keyConfigure={enter:"enter",escape:"escape",end:"end",tab:"tab",home:"home",down:"downarrow",up:"uparrow",left:"leftarrow",right:"rightarrow",open:"alt+downarrow",close:"alt+uparrow"},this.cloneElement=this.element.cloneNode(!0),Se([this.cloneElement],[cv,"e-control","e-lib"]),this.inputElement=this.element,this.angularTag=null,this.formElement=Fe(this.element,"form"),"EJS-TIMEPICKER"===this.element.tagName&&(this.angularTag=this.element.tagName,this.inputElement=this.createElement("input"),this.element.appendChild(this.inputElement)),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),this.openPopupEventArgs={appendTo:document.body}},t.prototype.render=function(){this.initialize(),this.createInputElement(),this.updateHtmlAttributeToWrapper(),this.setTimeAllowEdit(),this.setEnable(),this.validateInterval(),this.bindEvents(),this.validateDisable(),this.setValue(this.getFormattedValue(this.value)),!this.enableMask||this.value||!this.maskedDateValue||"Always"!=this.floatLabelType&&this.floatLabelType&&this.placeholder||(this.updateInputValue(this.maskedDateValue),this.checkErrorState(this.maskedDateValue)),this.anchor=this.inputElement,this.inputElement.setAttribute("value",this.inputElement.value),this.inputEleValue=this.getDateObject(this.inputElement.value),m(this.inputWrapper.buttons[0])||m(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])||"Never"===this.floatLabelType||this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon"),!m(Fe(this.element,"fieldset"))&&Fe(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete()},t.prototype.setTimeAllowEdit=function(){this.allowEdit?this.readonly||this.inputElement.removeAttribute("readonly"):Ve(this.inputElement,{readonly:""}),this.clearIconState()},t.prototype.clearIconState=function(){this.allowEdit||!this.inputWrapper||this.readonly?this.inputWrapper&&Se([this.inputWrapper.container],[bv]):""===this.inputElement.value?Se([this.inputWrapper.container],[bv]):be([this.inputWrapper.container],[bv])},t.prototype.validateDisable=function(){this.setMinMax(this.initMin,this.initMax),this.popupCreation(),this.popupObj.destroy(),this.popupWrapper=this.popupObj=null,isNaN(+this.value)||null===this.value||this.valueIsDisable(this.value)||(this.strictMode&&this.resetState(),this.initValue=null,this.initMax=this.getDateObject(this.initMax),this.initMin=this.getDateObject(this.initMin),this.timeCollections=this.liCollections=[],this.setMinMax(this.initMin,this.initMax))},t.prototype.validationAttribute=function(e,t){var i=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");t.setAttribute("name",i),e.removeAttribute("name");for(var n=["required","aria-required","form"],o=0;o<n.length;o++)if(!m(e.getAttribute(n[o]))){var s=e.getAttribute(n[o]);t.setAttribute(n[o],s),e.removeAttribute(n[o])}},t.prototype.initialize=function(){this.globalize=new ee(this.locale),this.defaultCulture=new ee("en"),this.checkTimeFormat(),this.checkInvalidValue(this.value),this.setProperties({value:this.checkDateValue(new Date(this.checkInValue(this.value)))},!0),this.setProperties({min:this.checkDateValue(new Date(this.checkInValue(this.min)))},!0),this.setProperties({max:this.checkDateValue(new Date(this.checkInValue(this.max)))},!0),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkInValue(this.scrollTo)))},!0),null!==this.angularTag&&this.validationAttribute(this.element,this.inputElement),this.updateHtmlAttributeToElement(),this.checkAttributes(!1);var e={placeholder:this.placeholder};this.l10n=new qt("timepicker",e,this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.initValue=this.checkDateValue(this.value),this.initMin=this.checkDateValue(this.min),this.initMax=this.checkDateValue(this.max),this.isNavigate=this.isPreventBlur=this.isTextSelected=!1,this.activeIndex=this.valueWithMinutes=this.prevDate=null,m(this.element.getAttribute("id"))?(this.element.id=y("ej2_timepicker"),null!==this.angularTag&&Ve(this.inputElement,{id:this.element.id+"_input"})):null!==this.angularTag&&(this.inputElement.id=this.element.getAttribute("id")+"_input"),m(this.inputElement.getAttribute("name"))&&Ve(this.inputElement,{name:this.element.id}),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"})},t.prototype.checkTimeFormat=function(){if(this.format)if("string"===typeof this.format)this.formatString=this.format;else if(m(this.format.skeleton)||""===this.format.skeleton)this.formatString=this.globalize.getDatePattern({type:"time",skeleton:"short"});else{var e=this.format.skeleton;this.formatString=this.globalize.getDatePattern({type:"time",skeleton:e})}else this.formatString=null},t.prototype.checkDateValue=function(e){return!m(e)&&e instanceof Date&&!isNaN(+e)?e:null},t.prototype.createInputElement=function(){var e=this.cssClass,t=!this.enableMask;m(this.cssClass)||""===this.cssClass||(e=this.cssClass.replace(/\s+/g," ").trim()),this.inputWrapper=rs.createInput({element:this.inputElement,bindClearAction:t,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:e,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton},buttons:[" e-input-group-icon e-time-icon e-icons"]},this.createElement),this.inputWrapper.container.style.width=this.setWidth(this.width),Ve(this.inputElement,{"aria-autocomplete":"list",tabindex:"0","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-disabled":"false","aria-invalid":"false"}),this.isNullOrEmpty(this.inputStyle)||rs.addAttributes({style:this.inputStyle},this.inputElement),be([this.inputWrapper.container],"e-time-wrapper")},t.prototype.getCldrDateTimeFormat=function(){var e=new ee(this.locale).getDatePattern({skeleton:"yMd"});return this.isNullOrEmpty(this.formatString)?e+" "+this.cldrFormat("time"):this.formatString},t.prototype.checkInvalidValue=function(e){var t=!1;if("object"!==typeof e&&!m(e)){var i=e;"string"===typeof i&&(i=i.trim());var n,o=null;if("number"===typeof e?i=e.toString():"string"===typeof e&&(/^[a-zA-Z0-9- ]*$/.test(e)||m(o=this.setCurrentDate(this.getDateObject(e)))&&m(o=this.checkDateValue(this.globalize.parseDate(i,{format:this.getCldrDateTimeFormat(),type:"datetime"})))&&(o=this.checkDateValue(this.globalize.parseDate(i,{format:this.formatString,type:"dateTime",skeleton:"yMd"})))),o=!m(n=this.globalize.parseDate(i,{format:this.getCldrDateTimeFormat(),type:"datetime"}))&&n instanceof Date&&!isNaN(+n)?n:null,m(o)&&i.replace(/\s/g,"").length){var s=null;s=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,!/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/.test(i)&&!s.test(i)||/^[a-zA-Z0-9- ]*$/.test(e)||isNaN(+new Date(""+i))?t=!0:o=new Date(""+i)}t?(this.strictMode||(this.invalidValueString=i),this.setProperties({value:null},!0),this.initValue=null):(this.setProperties({value:o},!0),this.initValue=this.value)}},t.prototype.requiredModules=function(){var e=[];return this.enableMask&&e.push({args:[this],member:"MaskedDateTime"}),e},t.prototype.cldrFormat=function(e){return"en"===this.locale||"en-US"===this.locale?l("timeFormats.short",ie()):this.getCultureTimeObject(G,""+this.locale)},t.prototype.destroy=function(){this.hide(),this.unBindEvents();this.inputElement&&(rs.removeAttributes({"aria-autocomplete":"list",tabindex:"0","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-disabled":"true","aria-invalid":"false"},this.inputElement),null===this.angularTag&&this.inputWrapper.container.parentElement.appendChild(this.inputElement),m(this.cloneElement.getAttribute("tabindex"))?this.inputElement.removeAttribute("tabindex"):this.inputElement.setAttribute("tabindex",this.tabIndex),this.ensureInputAttribute(),this.enableElement([this.inputElement]),this.inputElement.classList.remove("e-input"),m(this.cloneElement.getAttribute("disabled"))&&rs.setEnabled(!0,this.inputElement,this.floatLabelType)),this.inputWrapper.container&&Ae(this.inputWrapper.container),this.inputWrapper=this.popupWrapper=this.cloneElement=void 0,this.liCollections=this.timeCollections=this.disableItemCollection=[],m(this.rippleFn)||this.rippleFn(),e.prototype.destroy.call(this),this.formElement&&ye.remove(this.formElement,"reset",this.formResetHandler),this.rippleFn=null,this.openPopupEventArgs=null,this.selectedElement=null,this.listTag=null,this.liCollections=null},t.prototype.ensureInputAttribute=function(){for(var e=[],t=0;t<this.inputElement.attributes.length;t++)e[t]=this.inputElement.attributes[t].name;for(t=0;t<e.length;t++)m(this.cloneElement.getAttribute(e[t]))?(this.inputElement.removeAttribute(e[t]),"value"===e[t].toLowerCase()&&(this.inputElement.value="")):(this.inputElement.setAttribute(e[t],this.cloneElement.getAttribute(e[t])),"value"===e[t].toLowerCase()&&(this.inputElement.value=this.cloneElement.getAttribute(e[t])))},t.prototype.popupCreation=function(){this.popupWrapper=this.createElement("div",{className:cv+" e-popup",attrs:{id:this.element.id+"_popup",style:"visibility:hidden"}}),m(this.cssClass)||(this.popupWrapper.className+=" "+this.cssClass),!m(this.step)&&this.step>0&&(this.generateList(),Ie([this.listWrapper],this.popupWrapper)),this.openPopupEventArgs.appendTo.appendChild(this.popupWrapper),this.addSelection(),this.renderPopup(),Ae(this.popupWrapper)},t.prototype.getPopupHeight=function(){var e=parseInt(lv,10),t=this.popupWrapper.getBoundingClientRect().height;return t>e?e:t},t.prototype.generateList=function(){this.createListItems(),this.wireListEvents();var e={duration:300,selector:"."+vv};this.rippleFn=at(this.listWrapper,e),this.liCollections=this.listWrapper.querySelectorAll("."+vv)},t.prototype.renderPopup=function(){var e=this;this.containerStyle=this.inputWrapper.container.getBoundingClientRect(),this.popupObj=new Ln(this.popupWrapper,{width:this.setPopupWidth(this.width),zIndex:this.zIndex,targetType:"relative",position:ge.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},collision:ge.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},enableRtl:this.enableRtl,relateTo:ge.isDevice?document.body:this.inputWrapper.container,offsetY:4,open:function(){e.popupWrapper.style.visibility="visible",be([e.inputWrapper.buttons[0]],uv)},close:function(){Se([e.inputWrapper.buttons[0]],uv),e.unWireListEvents(),e.inputElement.removeAttribute("aria-activedescendant"),ke(e.popupObj.element),e.popupObj.destroy(),e.popupWrapper.innerHTML="",e.listWrapper=e.popupWrapper=e.listTag=void 0},targetExitViewport:function(){ge.isDevice||e.hide()}}),ge.isDevice||(this.popupObj.collision={X:"none",Y:"flip"}),this.popupObj.element.style.maxHeight=lv},t.prototype.getFormattedValue=function(e){return m(this.checkDateValue(e))?null:this.globalize.formatDate(e,{skeleton:"medium",type:"time"})},t.prototype.getDateObject=function(e){if(!this.isNullOrEmpty(e)){var t=this.createDateObj(e),i=!this.isNullOrEmpty(this.initValue);if(this.checkDateValue(t)){var n=i?this.initValue.getDate():dv,o=i?this.initValue.getMonth():hv,s=i?this.initValue.getFullYear():pv;return new Date(s,o,n,t.getHours(),t.getMinutes(),t.getSeconds())}}return null},t.prototype.updateHtmlAttributeToWrapper=function(){if(!m(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if(Sv.indexOf(i)>-1)if("class"===i){var n=this.htmlAttributes[""+i].replace(/\s+/g," ").trim();""!==n&&be([this.inputWrapper.container],n.split(" "))}else if("style"===i){var o=this.inputWrapper.container.getAttribute(i);o=m(o)?this.htmlAttributes[""+i]:o+this.htmlAttributes[""+i],this.inputWrapper.container.setAttribute(i,o)}else this.inputWrapper.container.setAttribute(i,this.htmlAttributes[""+i])}},t.prototype.updateHtmlAttributeToElement=function(){if(!m(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];Sv.indexOf(i)<0&&this.inputElement.setAttribute(i,this.htmlAttributes[""+i])}},t.prototype.updateCssClass=function(e,t){m(t)||(t=t.replace(/\s+/g," ").trim()),m(e)||(e=e.replace(/\s+/g," ").trim()),rs.setCssClass(e,[this.inputWrapper.container],t),this.popupWrapper&&rs.setCssClass(e,[this.popupWrapper],t)},t.prototype.removeErrorClass=function(){Se([this.inputWrapper.container],rv),Ve(this.inputElement,{"aria-invalid":"false"})},t.prototype.checkErrorState=function(e){var t=this.getDateObject(e);this.validateState(t)&&!this.invalidValueString||this.enableMask&&this.inputElement.value===this.maskedDateValue?this.removeErrorClass():(be([this.inputWrapper.container],rv),Ve(this.inputElement,{"aria-invalid":"true"}))},t.prototype.validateInterval=function(){!m(this.step)&&this.step>0?this.enableElement([this.inputWrapper.buttons[0]]):this.disableTimeIcon()},t.prototype.disableTimeIcon=function(){this.disableElement([this.inputWrapper.buttons[0]]),this.hide()},t.prototype.disableElement=function(e){be(e,gv)},t.prototype.enableElement=function(e){Se(e,gv)},t.prototype.selectInputText=function(){this.inputElement.setSelectionRange(0,this.inputElement.value.length)},t.prototype.setCursorToEnd=function(){this.inputElement.setSelectionRange(this.inputElement.value.length,this.inputElement.value.length)},t.prototype.getMeridianText=function(){var e;if("en"===this.locale||"en-US"===this.locale)e=l("dayPeriods.format.wide",ie());else{e=l("main."+this.locale+".dates.calendars.gregorian.dayPeriods.format.abbreviated",G)}return e},t.prototype.getCursorSelection=function(){var e=this.inputElement,t=0,i=0;return isNaN(e.selectionStart)||(t=e.selectionStart,i=e.selectionEnd),{start:Math.abs(t),end:Math.abs(i)}},t.prototype.getActiveElement=function(){return m(this.popupWrapper)?null:this.popupWrapper.querySelectorAll("."+uv)},t.prototype.isNullOrEmpty=function(e){return!!(m(e)||"string"===typeof e&&""===e.trim())},t.prototype.setWidth=function(e){return e="number"===typeof e?b(e):"string"===typeof e?e.match(/px|%|em/)?e:b(e):"100%"},t.prototype.setPopupWidth=function(e){(e=this.setWidth(e)).indexOf("%")>-1&&(e=(this.containerStyle.width*parseFloat(e)/100).toString()+"px");return e},t.prototype.setScrollPosition=function(){var e=this.selectedElement;m(e)?this.popupWrapper&&this.checkDateValue(this.scrollTo)&&this.setScrollTo():this.findScrollTop(e)},t.prototype.findScrollTop=function(e){var t=this.getPopupHeight(),i=e.nextElementSibling,n=i?i.offsetTop:e.offsetTop,o=e.getBoundingClientRect().height;n+e.offsetTop>t?this.popupWrapper.scrollTop=i?n-(t/2+o/2):n:this.popupWrapper.scrollTop=0},t.prototype.setScrollTo=function(){var e;if(m(this.popupWrapper))this.popupWrapper.scrollTop=0;else{var t=this.popupWrapper.querySelectorAll("."+vv);if(t.length){var i=this.timeCollections[0],n=this.getDateObject(this.checkDateValue(this.scrollTo)).getTime();e=t[Math.round((n-i)/(6e4*this.step))]}}m(e)?this.popupWrapper.scrollTop=0:this.findScrollTop(e)},t.prototype.getText=function(){return m(this.checkDateValue(this.value))?"":this.getValue(this.value)},t.prototype.getValue=function(e){return m(this.checkDateValue(e))?null:this.globalize.formatDate(e,{format:this.cldrTimeFormat(),type:"time"})},t.prototype.cldrDateFormat=function(){return"en"===this.locale||"en-US"===this.locale?l("dateFormats.short",ie()):this.getCultureDateObject(G,""+this.locale)},t.prototype.cldrTimeFormat=function(){return this.isNullOrEmpty(this.formatString)?"en"===this.locale||"en-US"===this.locale?l("timeFormats.short",ie()):this.getCultureTimeObject(G,""+this.locale):this.formatString},t.prototype.dateToNumeric=function(){return"en"===this.locale||"en-US"===this.locale?l("timeFormats.medium",ie()):l("main."+this.locale+".dates.calendars.gregorian.timeFormats.medium",G)},t.prototype.getExactDateTime=function(e){return m(this.checkDateValue(e))?null:this.globalize.formatDate(e,{format:this.dateToNumeric(),type:"time"})},t.prototype.setValue=function(e){var t=this.checkValue(e);this.strictMode||this.validateState(t)?this.isNullOrEmpty(t)?(this.initValue=null,this.validateMinMax(this.value,this.min,this.max)):this.initValue=this.compareFormatChange(t):(null===this.checkDateValue(this.valueWithMinutes)&&(this.initValue=this.valueWithMinutes=null),this.validateMinMax(this.value,this.min,this.max)),this.updateInput(!0,this.initValue)},t.prototype.compareFormatChange=function(e){return m(e)?null:e!==this.getText()?this.getDateObject(e):this.getDateObject(this.value)},t.prototype.updatePlaceHolder=function(){rs.setPlaceholder(this.l10n.getConstant("placeholder"),this.inputElement)},t.prototype.updateInputValue=function(e){rs.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.preventEventBubbling=function(e){e.preventDefault(),this.interopAdaptor.invokeMethodAsync("OnTimeIconClick")},t.prototype.popupHandler=function(e){this.enabled&&(ge.isDevice&&this.inputElement.setAttribute("readonly",""),e.preventDefault(),this.isPopupOpen()?this.closePopup(0,e):(this.inputElement.focus(),this.show(e)))},t.prototype.mouseDownHandler=function(){this.enabled&&(this.readonly||(this.inputElement.setSelectionRange(0,0),ye.add(this.inputElement,"mouseup",this.mouseUpHandler,this)))},t.prototype.mouseUpHandler=function(e){if(!this.readonly){if(e.preventDefault(),this.enableMask)return e.preventDefault(),void this.notify("setMaskSelection",{module:"MaskedDateTime"});ye.remove(this.inputElement,"mouseup",this.mouseUpHandler);var t=this.getCursorSelection();0===t.start&&t.end===this.inputElement.value.length||(this.inputElement.value.length>0&&(this.cursorDetails=this.focusSelection()),this.inputElement.setSelectionRange(this.cursorDetails.start,this.cursorDetails.end))}},t.prototype.focusSelection=function(){var e=new RegExp("^[a-zA-Z0-9]+$"),t=this.inputElement.value.split("");t.push(" ");var i=this.getCursorSelection(),n=0,o=0,s=!1;if(this.isTextSelected)n=i.start,o=i.end,this.isTextSelected=!1;else for(var a=0;a<t.length;a++)if(e.test(t[a])||(o=a,s=!0),s){if(i.start>=n&&i.end<=o){this.isTextSelected=!0;break}n=a+1,s=!1}return{start:n,end:o}},t.prototype.inputHandler=function(e){if(!this.readonly&&this.enabled)switch("right"!==e.action&&"left"!==e.action&&"tab"!==e.action&&e.preventDefault(),e.action){case"home":case"end":case"up":case"down":!this.enableMask||this.readonly||this.isPopupOpen()||(e.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e:e})),this.enableMask&&!this.isPopupOpen()||this.keyHandler(e);break;case"enter":this.isNavigate?(this.selectedElement=this.liCollections[this.activeIndex],this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),this.updateValue(this.valueWithMinutes,e)):this.updateValue(this.inputElement.value,e),this.hide(),this.isNavigate=!1,this.isPopupOpen()&&e.stopPropagation();break;case"open":this.show(e);break;case"escape":this.updateInputValue(this.objToString(this.value)),this.enableMask&&(this.value||this.updateInputValue(this.maskedDateValue),this.createMask()),this.previousState(this.value),this.hide();break;case"close":this.hide();break;case"right":case"left":case"tab":case"shiftTab":this.isPopupOpen()||!this.enableMask||this.readonly||((0==this.inputElement.selectionStart&&this.inputElement.selectionEnd==this.inputElement.value.length||this.inputElement.selectionEnd!==this.inputElement.value.length&&"tab"==e.action||0!==this.inputElement.selectionStart&&"shiftTab"==e.action||"left"==e.action||"right"==e.action)&&e.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e:e}));break;default:this.isNavigate=!1}},t.prototype.onMouseClick=function(e){var t=e.target,i=this.selectedElement=Fe(t,"."+vv);this.setSelection(i,e),i&&i.classList.contains(vv)&&this.hide()},t.prototype.closePopup=function(e,t){var i=this;if(this.isPopupOpen()&&this.popupWrapper){var n={popup:this.popupObj,event:t||null,cancel:!1,name:"open"};Se([document.body],wv),this.trigger("close",n,(function(t){if(!t.cancel){var n={name:"FadeOut",duration:50,delay:e||0};i.popupObj.hide(new st(n)),Se([i.inputWrapper.container],["e-icon-anim"]),Ve(i.inputElement,{"aria-expanded":"false"}),i.inputElement.removeAttribute("aria-owns"),i.inputElement.removeAttribute("aria-activedescendant"),ye.remove(document,"mousedown touchstart",i.documentClickHandler)}ge.isDevice&&i.modal&&(i.modal.style.display="none",i.modal.outerHTML="",i.modal=null),ge.isDevice&&(m(i.mobileTimePopupWrap)||(i.mobileTimePopupWrap.remove(),i.mobileTimePopupWrap=null)),ge.isDevice&&i.allowEdit&&!i.readonly&&i.inputElement.removeAttribute("readonly")}))}else ge.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly")},t.prototype.disposeServerPopup=function(){this.popupWrapper&&(this.popupWrapper.style.visibility="hidden",this.popupWrapper.style.top="-9999px",this.popupWrapper.style.left="-9999px",this.popupWrapper.style.width="0px",this.popupWrapper.style.height="0px")},t.prototype.checkValueChange=function(e,t){if(this.strictMode||this.validateState(this.valueWithMinutes))if(t){var i=this.getDateObject(new Date(this.timeCollections[this.activeIndex]));+this.prevDate!==+i&&this.valueProcess(e,i)}else(this.prevValue!==this.inputElement.value||m(this.checkDateValue(this.value)))&&this.valueProcess(e,this.compareFormatChange(this.inputElement.value));else null===this.checkDateValue(this.valueWithMinutes)&&(this.initValue=this.valueWithMinutes=null),this.setProperties({value:this.compareFormatChange(this.inputElement.value)},!0),this.initValue=this.valueWithMinutes=this.compareFormatChange(this.inputElement.value),this.prevValue=this.inputElement.value,+this.prevDate!==+this.value&&this.changeEvent(e)},t.prototype.onMouseOver=function(e){var t=Fe(e.target,"."+vv);this.setHover(t,fv)},t.prototype.setHover=function(e,t){this.enabled&&this.isValidLI(e)&&!e.classList.contains(t)&&(this.removeHover(t),be([e],t),t===mv&&e.setAttribute("aria-selected","true"))},t.prototype.setSelection=function(e,t){this.isValidLI(e)&&(this.checkValue(e.getAttribute("data-value")),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime",navigated:!0}),this.selectedElement=e,this.activeIndex=Array.prototype.slice.call(this.liCollections).indexOf(e),this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),be([this.selectedElement],uv),this.selectedElement.setAttribute("aria-selected","true"),this.checkValueChange(t,!0))},t.prototype.onMouseLeave=function(){this.removeHover(fv)},t.prototype.scrollHandler=function(){"timepicker"===this.getModuleName()&&ge.isDevice||this.hide()},t.prototype.setMinMax=function(e,t){m(this.checkDateValue(e))&&(this.initMin=this.getDateObject("12:00:00 AM")),m(this.checkDateValue(t))&&(this.initMax=this.getDateObject("11:59:59 PM"))},t.prototype.validateMinMax=function(e,t,i){var n=e instanceof Date?e:this.getDateObject(e);return m(this.checkDateValue(n))?+this.createDateObj(this.getFormattedValue(this.initMin))>+this.createDateObj(this.getFormattedValue(this.initMax))&&this.disableTimeIcon():e=this.strictOperation(this.initMin,this.initMax,e,n),this.strictMode&&(e=this.valueIsDisable(e)?e:null),this.checkErrorState(e),e},t.prototype.valueIsDisable=function(e){if(this.disableItemCollection.length>0){if(this.disableItemCollection.length===this.timeCollections.length)return!1;for(var t=e instanceof Date?this.objToString(e):e,i=0;i<this.disableItemCollection.length;i++)if(t===this.disableItemCollection[i])return!1}return!0},t.prototype.validateState=function(e){if(!this.strictMode){if(!this.valueIsDisable(e))return!1;var t=this.setCurrentDate(this.getDateObject(e)),i=this.setCurrentDate(this.getDateObject(this.initMax)),n=this.setCurrentDate(this.getDateObject(this.initMin));if(m(this.checkDateValue(t))){if(+i<+n||""!==this.inputElement.value)return!1}else if(+t>+i||+t<+n)return!1}return!0},t.prototype.strictOperation=function(e,t,i,n){var o=this.createDateObj(this.getFormattedValue(t)),s=this.createDateObj(this.getFormattedValue(e)),a=this.createDateObj(this.getFormattedValue(n));if(this.strictMode){if(+s>+o)return this.disableTimeIcon(),this.initValue=this.getDateObject(o),this.updateInputValue(this.getValue(this.initValue)),this.enableMask&&this.createMask(),this.inputElement.value;if(+s>=+a)return this.getDateObject(s);if(+a>=+o||+s===+o)return this.getDateObject(o)}else if(+s>+o&&(this.disableTimeIcon(),!isNaN(+this.createDateObj(i))))return i;return i},t.prototype.bindEvents=function(){ye.add(this.inputWrapper.buttons[0],"mousedown",this.popupHandler,this),ye.add(this.inputElement,"blur",this.inputBlurHandler,this),ye.add(this.inputElement,"focus",this.inputFocusHandler,this),ye.add(this.inputElement,"change",this.inputChangeHandler,this),ye.add(this.inputElement,"input",this.inputEventHandler,this),this.enableMask&&ye.add(this.inputElement,"keydown",this.keydownHandler,this),this.showClearButton&&this.inputWrapper.clearButton&&ye.add(this.inputWrapper.clearButton,"mousedown",this.clearHandler,this),this.formElement&&ye.add(this.formElement,"reset",this.formResetHandler,this),ge.isDevice||(this.keyConfigure=f(this.keyConfigure,this.keyConfigs),this.inputEvent=new Ut(this.inputWrapper.container,{keyAction:this.inputHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.showClearButton&&this.inputElement&&ye.add(this.inputElement,"mousedown",this.mouseDownHandler,this))},t.prototype.keydownHandler=function(e){if("Delete"===e.code)!this.enableMask||this.popupObj||this.readonly||this.notify("keyDownHandler",{module:"MaskedDateTime",e:e})},t.prototype.formResetHandler=function(){if(this.enabled&&!this.inputElement.disabled){var e=this.inputElement.getAttribute("value"),t=this.checkDateValue(this.inputEleValue);"EJS-TIMEPICKER"===this.element.tagName&&(t=null,e="",this.inputElement.setAttribute("value","")),this.setProperties({value:t},!0),this.prevDate=this.value,this.valueWithMinutes=this.value,this.initValue=this.value,this.inputElement&&(this.updateInputValue(e),this.enableMask&&(e||this.updateInputValue(this.maskedDateValue),this.createMask()),this.checkErrorState(e),this.prevValue=this.inputElement.value)}},t.prototype.inputChangeHandler=function(e){this.enabled&&e.stopPropagation()},t.prototype.inputEventHandler=function(){this.enableMask&&this.notify("inputHandler",{module:"MaskedDateTime"})},t.prototype.unBindEvents=function(){this.inputWrapper&&ye.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.popupHandler),ye.remove(this.inputElement,"blur",this.inputBlurHandler),ye.remove(this.inputElement,"focus",this.inputFocusHandler),ye.remove(this.inputElement,"change",this.inputChangeHandler),ye.remove(this.inputElement,"input",this.inputEventHandler),this.inputEvent&&this.inputEvent.destroy(),ye.remove(this.inputElement,"mousedown touchstart",this.mouseDownHandler),!this.showClearButton||m(this.inputWrapper)||m(this.inputWrapper.clearButton)||ye.remove(this.inputWrapper.clearButton,"mousedown touchstart",this.clearHandler),this.formElement&&ye.remove(this.formElement,"reset",this.formResetHandler)},t.prototype.bindClearEvent=function(){this.showClearButton&&this.inputWrapper.clearButton&&ye.add(this.inputWrapper.clearButton,"mousedown",this.clearHandler,this)},t.prototype.raiseClearedEvent=function(e){var t={event:e};this.trigger("cleared",t)},t.prototype.clearHandler=function(e){if(this.enabled&&(e.preventDefault(),m(this.value)?(this.resetState(),this.raiseClearedEvent(e)):this.clear(e),this.popupWrapper&&(this.popupWrapper.scrollTop=0),this.enableMask&&this.notify("clearHandler",{module:"MaskedDateTime"}),Fe(this.element,"form"))){var t=this.element,i=document.createEvent("KeyboardEvent");i.initEvent("keyup",!1,!0),t.dispatchEvent(i)}},t.prototype.clear=function(e){this.setProperties({value:null},!0),this.initValue=null,this.resetState(),this.raiseClearedEvent(e),this.changeEvent(e)},t.prototype.setZIndex=function(){this.popupObj&&(this.popupObj.zIndex=this.zIndex,this.popupObj.dataBind())},t.prototype.checkAttributes=function(e){for(var t,i=0,n=e?m(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["step","disabled","readonly","style","name","value","min","max","placeholder"];i<n.length;i++){var o=n[i];if(!m(this.inputElement.getAttribute(o)))switch(o){case"disabled":if(m(this.timeOptions)||void 0===this.timeOptions.enabled||e){var s="disabled"!==this.inputElement.getAttribute(o)&&""!==this.inputElement.getAttribute(o)&&"true"!==this.inputElement.getAttribute(o);this.setProperties({enabled:s},!e)}break;case"style":this.inputStyle=this.inputElement.getAttribute(o);break;case"readonly":if(m(this.timeOptions)||void 0===this.timeOptions.readonly||e){var a="readonly"===this.inputElement.getAttribute(o)||""===this.inputElement.getAttribute(o)||"true"===this.inputElement.getAttribute(o);this.setProperties({readonly:a},!e)}break;case"name":this.inputElement.setAttribute("name",this.inputElement.getAttribute(o));break;case"step":this.step=parseInt(this.inputElement.getAttribute(o),10);break;case"placeholder":(m(this.timeOptions)||void 0===this.timeOptions.placeholder||e)&&this.setProperties({placeholder:this.inputElement.getAttribute(o)},!e);break;case"min":(m(this.timeOptions)||void 0===this.timeOptions.min||e)&&(t=new Date(this.inputElement.getAttribute(o)),m(this.checkDateValue(t))||this.setProperties({min:t},!e));break;case"max":(m(this.timeOptions)||void 0===this.timeOptions.max||e)&&(t=new Date(this.inputElement.getAttribute(o)),m(this.checkDateValue(t))||this.setProperties({max:t},!e));break;case"value":(m(this.timeOptions)||void 0===this.timeOptions.value||e)&&(t=new Date(this.inputElement.getAttribute(o)),m(this.checkDateValue(t))||(this.initValue=t,this.updateInput(!1,this.initValue),this.setProperties({value:t},!e)))}}},t.prototype.setCurrentDate=function(e){return m(this.checkDateValue(e))?null:new Date(pv,hv,dv,e.getHours(),e.getMinutes(),e.getSeconds())},t.prototype.getTextFormat=function(){var e=0;if("a"===this.cldrTimeFormat().split(" ")[0]||0===this.cldrTimeFormat().indexOf("a"))e=1;else if(this.cldrTimeFormat().indexOf("a")<0)for(var t=this.cldrTimeFormat().split(" "),i=0;i<t.length;i++)if(t[i].toLowerCase().indexOf("h")>=0){e=i;break}return e},t.prototype.updateValue=function(e,t){var i;if(this.isNullOrEmpty(e))this.resetState();else if(i=this.checkValue(e),this.strictMode){var n=null===i&&e.trim().length>0?this.previousState(this.prevDate):this.inputElement.value;this.updateInputValue(n),this.enableMask&&(n||this.updateInputValue(this.maskedDateValue),m(i)&&e!=this.maskedDateValue&&this.createMask(),m(i)&&e==this.maskedDateValue&&this.updateInputValue(this.maskedDateValue))}this.checkValueChange(t,"string"!==typeof e)},t.prototype.previousState=function(e){for(var t=this.getDateObject(e),i=0;i<this.timeCollections.length;i++)if(+t===this.timeCollections[i]){this.activeIndex=i,this.selectedElement=this.liCollections[i],this.valueWithMinutes=new Date(this.timeCollections[i]);break}return this.prevValue},t.prototype.resetState=function(){this.removeSelection(),rs.setValue("",this.inputElement,this.floatLabelType,!1),this.valueWithMinutes=this.activeIndex=null,this.strictMode||this.checkErrorState(null)},t.prototype.objToString=function(e){return m(this.checkDateValue(e))?null:this.globalize.formatDate(e,{format:this.cldrTimeFormat(),type:"time"})},t.prototype.checkValue=function(e){if(!this.isNullOrEmpty(e)){var t=e instanceof Date?e:this.getDateObject(e);return this.validateValue(t,e)}return this.resetState(),this.valueWithMinutes=null},t.prototype.validateValue=function(e,t){var i,n=this.validateMinMax(t,this.min,this.max),o=this.createDateObj(n);if(this.getFormattedValue(o)!==this.getFormattedValue(this.value)?(this.valueWithMinutes=m(o)?null:o,i=this.objToString(this.valueWithMinutes)):(this.strictMode&&(e=o),this.valueWithMinutes=this.checkDateValue(e),i=this.objToString(this.valueWithMinutes)),!this.strictMode&&m(i)){var s=n.trim().length>0?n:"";this.updateInputValue(s),this.enableMask&&(s||this.updateInputValue(this.maskedDateValue))}else this.updateInputValue(i),this.enableMask&&(""==i&&this.updateInputValue(this.maskedDateValue),m(i)&&t!=this.maskedDateValue&&this.createMask(),m(i)&&t==this.maskedDateValue&&this.updateInputValue(this.maskedDateValue));return i},t.prototype.createMask=function(){this.notify("createMask",{module:"MaskedDateTime"})},t.prototype.findNextElement=function(e){var t=this.inputElement.value,i=m(this.valueWithMinutes)?this.createDateObj(t):this.getDateObject(this.valueWithMinutes),n=null,o=this.liCollections.length,s=this.timeCollections;if(m(this.checkDateValue(i))&&m(this.activeIndex))this.selectNextItem(e);else{if("home"===e.action){var a=this.validLiElement(0);n=+this.createDateObj(new Date(this.timeCollections[a])),this.activeIndex=a}else if("end"===e.action){a=this.validLiElement(s.length-1,!0);n=+this.createDateObj(new Date(this.timeCollections[a])),this.activeIndex=a}else if("down"===e.action)for(var r=0;r<o;r++){if(+i<this.timeCollections[r]){a=this.validLiElement(r);n=+this.createDateObj(new Date(this.timeCollections[a])),this.activeIndex=a;break}if(r===o-1){a=this.validLiElement(0);n=+this.createDateObj(new Date(this.timeCollections[a])),this.activeIndex=a;break}}else for(r=o-1;r>=0;r--){if(+i>this.timeCollections[r]){a=this.validLiElement(r,!0);n=+this.createDateObj(new Date(this.timeCollections[a])),this.activeIndex=a;break}if(0===r){a=this.validLiElement(o-1);n=+this.createDateObj(new Date(this.timeCollections[a])),this.activeIndex=a;break}}this.selectedElement=this.liCollections[this.activeIndex],this.elementValue(m(n)?null:new Date(n))}},t.prototype.selectNextItem=function(e){var t=this.validLiElement(0,"down"!==e.action);this.activeIndex=t,this.selectedElement=this.liCollections[t],this.elementValue(new Date(this.timeCollections[t]))},t.prototype.elementValue=function(e){m(this.checkDateValue(e))||this.checkValue(e)},t.prototype.validLiElement=function(e,t){var i=null,n=m(this.popupWrapper)?this.liCollections:this.popupWrapper.querySelectorAll("."+vv),o=!0;if(n.length)if(t)for(var s=e;s>=0;s--){if(!n[s].classList.contains(gv)){i=s;break}0===s&&o&&(e=s=n.length,o=!1)}else for(s=e;s<=n.length-1;s++){if(!n[s].classList.contains(gv)){i=s;break}s===n.length-1&&o&&(e=s=-1,o=!1)}return i},t.prototype.keyHandler=function(e){if(!(m(this.step)||this.step<=0||!m(this.inputWrapper)&&this.inputWrapper.buttons[0].classList.contains(gv))){var t=this.timeCollections.length;if(m(this.getActiveElement())||0===this.getActiveElement().length)if(this.liCollections.length>0)if(m(this.value)&&m(this.activeIndex)){var i=this.validLiElement(0,"down"!==e.action);this.activeIndex=i,this.selectedElement=this.liCollections[i],this.elementValue(new Date(this.timeCollections[i]))}else this.findNextElement(e);else this.findNextElement(e);else{var n=void 0;if(e.keyCode>=37&&e.keyCode<=40){i=40===e.keyCode||39===e.keyCode?++this.activeIndex:--this.activeIndex;this.activeIndex=i=this.activeIndex===t?0:this.activeIndex,this.activeIndex=i=this.activeIndex<0?t-1:this.activeIndex,this.activeIndex=i=this.validLiElement(this.activeIndex,40!==e.keyCode&&39!==e.keyCode),n=m(this.timeCollections[i])?this.timeCollections[0]:this.timeCollections[i]}else if("home"===e.action){i=this.validLiElement(0);this.activeIndex=i,n=this.timeCollections[i]}else if("end"===e.action){i=this.validLiElement(t-1,!0);this.activeIndex=i,n=this.timeCollections[i]}this.selectedElement=this.liCollections[this.activeIndex],this.elementValue(new Date(n))}this.isNavigate=!0,this.setHover(this.selectedElement,mv),this.setActiveDescendant(),this.selectInputText(),!this.isPopupOpen()||null===this.selectedElement||e&&"click"===e.type||this.setScrollPosition()}},t.prototype.getCultureTimeObject=function(e,t){return l("main."+t+".dates.calendars.gregorian.timeFormats.short",e)},t.prototype.getCultureDateObject=function(e,t){return l("main."+t+".dates.calendars.gregorian.dateFormats.short",e)},t.prototype.wireListEvents=function(){ye.add(this.listWrapper,"click",this.onMouseClick,this),ge.isDevice||(ye.add(this.listWrapper,"mouseover",this.onMouseOver,this),ye.add(this.listWrapper,"mouseout",this.onMouseLeave,this))},t.prototype.unWireListEvents=function(){this.listWrapper&&(ye.remove(this.listWrapper,"click",this.onMouseClick),ge.isDevice||(ye.remove(this.listWrapper,"mouseover",this.onMouseOver),ye.remove(this.listWrapper,"mouseout",this.onMouseLeave)))},t.prototype.valueProcess=function(e,t){var i=m(this.checkDateValue(t))?null:t;+this.prevDate!==+i&&(this.initValue=i,this.changeEvent(e))},t.prototype.changeEvent=function(e){this.addSelection(),this.updateInput(!0,this.initValue);var t={event:e||null,value:this.value,text:this.inputElement.value,isInteracted:!m(e),element:this.element};t.value=this.valueWithMinutes||this.getDateObject(this.inputElement.value),this.prevDate=this.valueWithMinutes||this.getDateObject(this.inputElement.value),this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",t),this.invalidValueString=null,this.checkErrorState(this.value)},t.prototype.updateInput=function(e,t){e&&(this.prevValue=this.getValue(t)),this.prevDate=this.valueWithMinutes=t,"number"===typeof t&&(this.value&&+new Date(+this.value).setMilliseconds(0))===+t||(this.setProperties({value:t},!0),this.enableMask&&this.createMask()),!this.strictMode&&m(this.value)&&this.invalidValueString&&(this.checkErrorState(this.invalidValueString),this.updateInputValue(this.invalidValueString)),this.clearIconState()},t.prototype.setActiveDescendant=function(){!m(this.selectedElement)&&this.value?Ve(this.inputElement,{"aria-activedescendant":this.selectedElement.getAttribute("id")}):this.inputElement.removeAttribute("aria-activedescendant")},t.prototype.removeSelection=function(){if(this.removeHover(fv),!m(this.popupWrapper)){var e=this.popupWrapper.querySelectorAll("."+uv);e.length&&(Se(e,uv),e[0].removeAttribute("aria-selected"))}},t.prototype.removeHover=function(e){var t=this.getHoverItem(e);t&&t.length&&(Se(t,e),e===mv&&t[0].removeAttribute("aria-selected"))},t.prototype.getHoverItem=function(e){var t;return m(this.popupWrapper)||(t=this.popupWrapper.querySelectorAll("."+e)),t},t.prototype.setActiveClass=function(){if(!m(this.popupWrapper)){var e=this.popupWrapper.querySelectorAll("."+vv);if(e.length)for(var t=0;t<e.length;t++)if(this.timeCollections[t]===+this.getDateObject(this.valueWithMinutes)){e[t].setAttribute("aria-selected","true"),this.selectedElement=e[t],this.activeIndex=t;break}}},t.prototype.addSelection=function(){this.selectedElement=null,this.removeSelection(),this.setActiveClass(),m(this.selectedElement)||(be([this.selectedElement],uv),this.selectedElement.setAttribute("aria-selected","true"))},t.prototype.isValidLI=function(e){return e&&e.classList.contains(vv)&&!e.classList.contains(gv)},t.prototype.createDateObj=function(e){var t=this.globalize.formatDate(new Date,{format:null,skeleton:"short",type:"date"}),i=null;return"string"===typeof e?e.toUpperCase().indexOf("AM")>-1||e.toUpperCase().indexOf("PM")>-1?(t=this.defaultCulture.formatDate(new Date,{format:null,skeleton:"short",type:"date"}),m(i=isNaN(+new Date(t+" "+e))?null:new Date(new Date(t+" "+e).setMilliseconds(0)))&&(i=this.timeParse(t,e))):i=this.timeParse(t,e):e instanceof Date&&(i=e),i},t.prototype.timeParse=function(e,t){var i;return i=m(i=this.globalize.parseDate(e+" "+t,{format:this.cldrDateFormat()+" "+this.cldrTimeFormat(),type:"datetime"}))?this.globalize.parseDate(e+" "+t,{format:this.cldrDateFormat()+" "+this.dateToNumeric(),type:"datetime"}):i,i=m(i)?i:new Date(i.setMilliseconds(0))},t.prototype.createListItems=function(){var e,t=this;this.listWrapper=this.createElement("div",{className:"e-content",attrs:{tabindex:"-1"}});var i=6e4*this.step,n=[];this.timeCollections=[],this.disableItemCollection=[],e=+this.getDateObject(this.initMin).setMilliseconds(0);for(var o=+this.getDateObject(this.initMax).setMilliseconds(0);o>=e;)this.timeCollections.push(e),n.push(this.globalize.formatDate(new Date(e),{format:this.cldrTimeFormat(),type:"time"})),e+=i;var s={itemCreated:function(e){var i={element:e.item,text:e.text,value:t.getDateObject(e.text),isDisabled:!1};t.trigger("itemRender",i,(function(e){e.isDisabled&&e.element.classList.add(gv),e.element.classList.contains(gv)&&t.disableItemCollection.push(e.element.getAttribute("data-value"))}))}};this.listTag=bl.createList(this.createElement,n,s,!0),Ve(this.listTag,{role:"listbox","aria-hidden":"false",id:this.element.id+"_options",tabindex:"0"}),Ie([this.listTag],this.listWrapper)},t.prototype.documentClickHandler=function(e){var t=e.target;m(this.popupObj)||m(this.inputWrapper)||!(this.inputWrapper.container.contains(t)&&"mousedown"!==e.type||this.popupObj.element&&this.popupObj.element.contains(t))||"touchstart"===e.type||e.preventDefault(),Fe(t,'[id="'+this.popupObj.element.id+'"]')||t===this.inputElement||t===(this.inputWrapper&&this.inputWrapper.buttons[0])||t===(this.inputWrapper&&this.inputWrapper.clearButton)||t===(this.inputWrapper&&this.inputWrapper.container)?t!==this.inputElement&&(ge.isDevice||(this.isPreventBlur=(ge.isIE||"edge"===ge.info.name)&&document.activeElement===this.inputElement&&t===this.popupWrapper)):this.isPopupOpen()&&(this.hide(),this.focusOut())},t.prototype.setEnableRtl=function(){rs.setEnableRtl(this.enableRtl,[this.inputWrapper.container]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())},t.prototype.setEnable=function(){rs.setEnabled(this.enabled,this.inputElement,this.floatLabelType),this.enabled?(Se([this.inputWrapper.container],gv),Ve(this.inputElement,{"aria-disabled":"false"}),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.hide(),be([this.inputWrapper.container],gv),Ve(this.inputElement,{"aria-disabled":"true"}),this.inputElement.tabIndex=-1)},t.prototype.getProperty=function(e,t){"min"===t?(this.initMin=this.checkDateValue(new Date(this.checkInValue(e.min))),this.setProperties({min:this.initMin},!0)):(this.initMax=this.checkDateValue(new Date(this.checkInValue(e.max))),this.setProperties({max:this.initMax},!0)),""===this.inputElement.value?this.validateMinMax(this.value,this.min,this.max):this.checkValue(this.inputElement.value),this.checkValueChange(null,!1)},t.prototype.inputBlurHandler=function(e){if(this.enabled)if(this.isPreventBlur&&this.isPopupOpen())this.inputElement.focus();else{this.closePopup(0,e),this.enableMask&&this.maskedDateValue&&this.placeholder&&"Always"!==this.floatLabelType&&(this.inputElement.value!=this.maskedDateValue||this.value||"Auto"!=this.floatLabelType&&"Never"!=this.floatLabelType&&!this.placeholder||this.updateInputValue("")),Se([this.inputWrapper.container],[yv]);var t={model:this};this.trigger("blur",t),this.getText()!==this.inputElement.value?this.updateValue(this.inputElement.value,e):0===this.inputElement.value.trim().length&&this.resetState(),this.cursorDetails=null,this.isNavigate=!1,""===this.inputElement.value&&(this.invalidValueString=null)}},t.prototype.focusOut=function(){if(document.activeElement===this.inputElement){this.inputElement.blur(),Se([this.inputWrapper.container],[yv]);var e={model:this};this.trigger("blur",e)}},t.prototype.isPopupOpen=function(){return!(!this.popupWrapper||!this.popupWrapper.classList.contains(""+cv))},t.prototype.inputFocusHandler=function(){if(this.enabled){var e={model:this};this.readonly||ge.isDevice||this.enableMask||this.selectInputText(),this.enableMask&&!this.inputElement.value&&this.placeholder&&(!this.maskedDateValue||this.value||"Auto"!=this.floatLabelType&&"Never"!=this.floatLabelType&&!this.placeholder||(this.updateInputValue(this.maskedDateValue),this.inputElement.selectionStart=0,this.inputElement.selectionEnd=this.inputElement.value.length)),this.trigger("focus",e),this.clearIconState(),this.openOnFocus&&this.show()}},t.prototype.focusIn=function(){document.activeElement!==this.inputElement&&this.enabled&&this.inputElement.focus()},t.prototype.hide=function(){this.closePopup(100,null),this.clearIconState()},t.prototype.show=function(e){var t=this;if(!(this.enabled&&this.readonly||!this.enabled||this.popupWrapper)){this.popupCreation(),ge.isDevice&&this.listWrapper&&(this.modal=this.createElement("div"),this.modal.className=cv+" e-time-modal",document.body.className+=" "+wv,document.body.appendChild(this.modal)),ge.isDevice&&(this.mobileTimePopupWrap=this.createElement("div",{className:"e-timepicker-mob-popup-wrap"}),document.body.appendChild(this.mobileTimePopupWrap)),this.openPopupEventArgs={popup:this.popupObj||null,cancel:!1,event:e||null,name:"open",appendTo:ge.isDevice?this.mobileTimePopupWrap:document.body};var i=this.openPopupEventArgs;this.trigger("open",i,(function(e){if(t.openPopupEventArgs=e,t.openPopupEventArgs.cancel||t.inputWrapper.buttons[0].classList.contains(gv))t.popupObj.destroy(),t.popupWrapper=t.listTag=void 0,t.liCollections=t.timeCollections=t.disableItemCollection=[],t.popupObj=null;else{t.openPopupEventArgs.appendTo.appendChild(t.popupWrapper),t.popupAlignment(t.openPopupEventArgs),t.setScrollPosition(),ge.isDevice||t.inputElement.focus();var i={name:"FadeIn",duration:50};t.popupObj.refreshPosition(t.anchor),1e3===t.zIndex?t.popupObj.show(new st(i),t.element):t.popupObj.show(new st(i),null),t.setActiveDescendant(),Ve(t.inputElement,{"aria-expanded":"true"}),Ve(t.inputElement,{"aria-owns":t.inputElement.id+"_options"}),be([t.inputWrapper.container],yv),ye.add(document,"mousedown touchstart",t.documentClickHandler,t),t.setOverlayIndex(t.mobileTimePopupWrap,t.popupObj.element,t.modal,ge.isDevice)}}))}},t.prototype.setOverlayIndex=function(e,t,i,n){if(n&&!m(t)&&!m(i)&&!m(e)){var o=parseInt(t.style.zIndex,10)?parseInt(t.style.zIndex,10):1e3;i.style.zIndex=(o-1).toString(),e.style.zIndex=o.toString()}},t.prototype.formatValues=function(e){var t;return"number"===typeof e?t=b(e):"string"===typeof e&&(t=e.match(/px|%|em/)||isNaN(parseInt(e,10))?e:b(e)),t},t.prototype.popupAlignment=function(e){if(e.popup.position.X=this.formatValues(e.popup.position.X),e.popup.position.Y=this.formatValues(e.popup.position.Y),isNaN(parseFloat(e.popup.position.X))&&isNaN(parseFloat(e.popup.position.Y))||(this.popupObj.relateTo=this.anchor=document.body,this.popupObj.targetType="container"),isNaN(parseFloat(e.popup.position.X))||(this.popupObj.offsetX=parseFloat(e.popup.position.X)),isNaN(parseFloat(e.popup.position.Y))||(this.popupObj.offsetY=parseFloat(e.popup.position.Y)),ge.isDevice)"center"===e.popup.position.X&&"center"===e.popup.position.Y&&(this.popupObj.relateTo=this.anchor=document.body,this.popupObj.offsetY=0,this.popupObj.targetType="container",this.popupObj.collision={X:"fit",Y:"fit"});else{switch(e.popup.position.X){case"left":break;case"right":e.popup.offsetX=this.containerStyle.width;break;case"center":e.popup.offsetX=-this.containerStyle.width/2}switch(e.popup.position.Y){case"top":case"bottom":break;case"center":e.popup.offsetY=-this.containerStyle.height/2}"center"===e.popup.position.X&&"center"===e.popup.position.Y&&(this.popupObj.relateTo=this.inputWrapper.container,this.anchor=this.inputElement,this.popupObj.targetType="relative")}},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.getModuleName=function(){return"timepicker"},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){var o=n[i];switch(o){case"placeholder":rs.setPlaceholder(e.placeholder,this.inputElement);break;case"readonly":rs.setReadonly(this.readonly,this.inputElement,this.floatLabelType),this.readonly&&this.hide(),this.setTimeAllowEdit();break;case"enabled":this.setProperties({enabled:e.enabled},!0),this.setEnable();break;case"allowEdit":this.setTimeAllowEdit();break;case"enableRtl":this.setProperties({enableRtl:e.enableRtl},!0),this.setEnableRtl();break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0),this.setZIndex();break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkAttributes(!0);break;case"min":case"max":this.getProperty(e,o);break;case"showClearButton":rs.setClearButton(this.showClearButton,this.inputElement,this.inputWrapper),this.bindClearEvent();break;case"locale":this.setProperties({locale:e.locale},!0),this.globalize=new ee(this.locale),this.l10n.setLocale(this.locale),this.updatePlaceHolder(),this.setValue(this.value),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"width":Le(this.inputWrapper.container,{width:this.setWidth(e.width)}),this.containerStyle=this.inputWrapper.container.getBoundingClientRect(),rs.calculateWidth(this.inputElement,this.inputWrapper.container),m(this.inputWrapper.buttons[0])||m(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])||"Never"===this.floatLabelType||this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"format":this.setProperties({format:e.format},!0),this.checkTimeFormat(),this.setValue(this.value),this.enableMask&&(this.createMask(),this.value||this.updateInputValue(this.maskedDateValue));break;case"value":this.invalidValueString=null,this.checkInvalidValue(e.value),e.value=this.value,this.invalidValueString?(this.updateInputValue(this.invalidValueString),this.checkErrorState(this.invalidValueString)):("string"===typeof e.value?(this.setProperties({value:this.checkDateValue(new Date(e.value))},!0),e.value=this.value):(e.value&&+new Date(+e.value).setMilliseconds(0))!==+this.value&&(e.value=this.checkDateValue(new Date(""+e.value))),this.initValue=e.value,e.value=this.compareFormatChange(this.checkValue(e.value))),this.checkValueChange(null,!1),this.isPopupOpen()&&this.setScrollPosition(),this.isAngular&&this.preventChange&&(this.preventChange=!1),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"floatLabelType":this.floatLabelType=e.floatLabelType,rs.removeFloating(this.inputWrapper),rs.addFloating(this.inputElement,this.floatLabelType,this.placeholder),m(this.inputWrapper.buttons[0])||m(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])||"Never"===this.floatLabelType||this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"strictMode":this.invalidValueString=null,e.strictMode&&this.checkErrorState(null),this.setProperties({strictMode:e.strictMode},!0),this.checkValue(this.inputElement.value),this.checkValueChange(null,!1);break;case"scrollTo":this.checkDateValue(new Date(this.checkInValue(e.scrollTo)))?(this.popupWrapper&&this.setScrollTo(),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkInValue(e.scrollTo)))},!0)):this.setProperties({scrollTo:null},!0);break;case"enableMask":this.enableMask?(this.notify("createMask",{module:"MaskedDateTime"}),this.updateInputValue(this.maskedDateValue)):this.inputElement.value===this.maskedDateValue&&this.updateInputValue("")}}},t.prototype.checkInValue=function(e){return e instanceof Date?e.toUTCString():""+e},av([Ge(null)],t.prototype,"width",void 0),av([Ge(null)],t.prototype,"cssClass",void 0),av([Ge(!1)],t.prototype,"strictMode",void 0),av([Ge(null)],t.prototype,"keyConfigs",void 0),av([Ge(null)],t.prototype,"format",void 0),av([Ge(!0)],t.prototype,"enabled",void 0),av([Ge(!1)],t.prototype,"readonly",void 0),av([Ge({})],t.prototype,"htmlAttributes",void 0),av([Ge("Never")],t.prototype,"floatLabelType",void 0),av([Ge(null)],t.prototype,"placeholder",void 0),av([Ge(1e3)],t.prototype,"zIndex",void 0),av([Ge(!1)],t.prototype,"enablePersistence",void 0),av([Ge(!0)],t.prototype,"showClearButton",void 0),av([Ge(30)],t.prototype,"step",void 0),av([Ge(null)],t.prototype,"scrollTo",void 0),av([Ge(null)],t.prototype,"value",void 0),av([Ge(null)],t.prototype,"min",void 0),av([Ge(null)],t.prototype,"max",void 0),av([Ge(!0)],t.prototype,"allowEdit",void 0),av([Ge(!1)],t.prototype,"openOnFocus",void 0),av([Ge(!1)],t.prototype,"enableMask",void 0),av([Ge({day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"})],t.prototype,"maskPlaceholder",void 0),av([$e()],t.prototype,"change",void 0),av([$e()],t.prototype,"created",void 0),av([$e()],t.prototype,"destroyed",void 0),av([$e()],t.prototype,"open",void 0),av([$e()],t.prototype,"itemRender",void 0),av([$e()],t.prototype,"close",void 0),av([$e()],t.prototype,"cleared",void 0),av([$e()],t.prototype,"blur",void 0),av([$e()],t.prototype,"focus",void 0),t=av([et],t)}(Dt);var Cv=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),xv=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Mv=(new Date).getDate(),Iv=(new Date).getMonth(),Tv=(new Date).getFullYear(),Av=(new Date).getHours(),kv=(new Date).getMinutes(),Vv=(new Date).getSeconds(),Ev=(new Date).getMilliseconds(),Dv="e-datetimepicker",Nv="e-datetimepopup-wrapper",Fv="e-popup",Lv="e-input-focus",Pv="250px",Ov="e-icon-anim",Bv="e-disabled",zv="e-error",jv="e-active",Rv="e-hover",_v="e-list-item",Hv="e-time-overflow",Wv=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.valueWithMinutes=null,n.scrollInvoked=!1,n.moduleName=n.getModuleName(),n.dateTimeOptions=t,n}return Cv(t,e),t.prototype.focusHandler=function(){this.enabled&&be([this.inputWrapper.container],Lv)},t.prototype.focusIn=function(){e.prototype.focusIn.call(this)},t.prototype.focusOut=function(){document.activeElement===this.inputElement&&(this.inputElement.blur(),Se([this.inputWrapper.container],[Lv]))},t.prototype.blurHandler=function(e){if(this.enabled)if(this.isTimePopupOpen()&&this.isPreventBlur)this.inputElement.focus();else{Se([this.inputWrapper.container],Lv);var t={model:this};this.isTimePopupOpen()&&this.hide(e),this.trigger("blur",t)}},t.prototype.destroy=function(){this.popupObject&&this.popupObject.element.classList.contains(Fv)&&(this.popupObject.destroy(),Ae(this.dateTimeWrapper),this.dateTimeWrapper=void 0,this.liCollections=this.timeCollections=[],m(this.rippleFn)||this.rippleFn());this.inputElement&&rs.removeAttributes({"aria-live":"assertive","aria-atomic":"true","aria-invalid":"false",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-expanded":"false",role:"combobox",autocomplete:"off"},this.inputElement),this.isCalendar()&&(this.popupWrapper&&Ae(this.popupWrapper),this.popupObject=this.popupWrapper=null,this.keyboardHandler.destroy()),this.unBindInputEvents(),this.liCollections=null,this.rippleFn=null,this.selectedElement=null,this.listTag=null,this.timeIcon=null,this.popupObject=null,this.preventArgs=null,this.keyboardModule=null,e.prototype.destroy.call(this)},t.prototype.render=function(){this.timekeyConfigure={enter:"enter",escape:"escape",end:"end",tab:"tab",home:"home",down:"downarrow",up:"uparrow",left:"leftarrow",right:"rightarrow",open:"alt+downarrow",close:"alt+uparrow"},this.valueWithMinutes=null,this.previousDateTime=null,this.isPreventBlur=!1,this.cloneElement=this.element.cloneNode(!0),this.dateTimeFormat=this.cldrDateTimeFormat(),this.initValue=this.value,!m(Fe(this.element,"fieldset"))&&Fe(this.element,"fieldset").disabled&&(this.enabled=!1),e.prototype.updateHtmlAttributeToElement.call(this),this.checkAttributes(!1);var t={placeholder:this.placeholder};this.l10n=new qt("datetimepicker",t,this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),e.prototype.render.call(this),this.createInputElement(),e.prototype.updateHtmlAttributeToWrapper.call(this),this.bindInputEvents(),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"}),this.setValue(!0),!this.enableMask||this.value||!this.maskedDateValue||"Always"!=this.floatLabelType&&this.floatLabelType&&this.placeholder||rs.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkValue(this.scrollTo)))},!0),this.previousDateTime=this.value&&new Date(+this.value),"EJS-DATETIMEPICKER"===this.element.tagName&&(this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),this.enabled||(this.inputElement.tabIndex=-1)),rs.calculateWidth(this.inputElement,this.inputWrapper.container),m(this.inputWrapper.buttons[0])||m(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])||"Never"===this.floatLabelType||this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-date-time-icon"),this.renderComplete()},t.prototype.setValue=function(t){if(void 0===t&&(t=!1),this.initValue=this.validateMinMaxRange(this.value),!this.strictMode&&this.isDateObject(this.initValue)){var i=this.validateMinMaxRange(this.initValue);rs.setValue(this.getFormattedValue(i),this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({value:i},!0)}else m(this.value)&&(this.initValue=null,this.setProperties({value:null},!0));this.valueWithMinutes=this.value,e.prototype.updateInput.call(this,t)},t.prototype.validateMinMaxRange=function(e){var t=e;return this.isDateObject(e)?t=this.validateValue(e):+this.min>+this.max&&this.disablePopupButton(!0),this.checkValidState(t),t},t.prototype.checkValidState=function(e){this.isValidState=!0,this.strictMode||(+e>+this.max||+e<+this.min)&&(this.isValidState=!1),this.checkErrorState()},t.prototype.checkErrorState=function(){this.isValidState?Se([this.inputWrapper.container],zv):be([this.inputWrapper.container],zv),Ve(this.inputElement,{"aria-invalid":this.isValidState?"false":"true"})},t.prototype.validateValue=function(e){var t=e;return this.strictMode?+this.min>+this.max?(this.disablePopupButton(!0),t=this.max):+e<+this.min?t=this.min:+e>+this.max&&(t=this.max):+this.min>+this.max&&(this.disablePopupButton(!0),t=e),t},t.prototype.disablePopupButton=function(e){e?(be([this.inputWrapper.buttons[0],this.timeIcon],Bv),this.hide()):Se([this.inputWrapper.buttons[0],this.timeIcon],Bv)},t.prototype.getFormattedValue=function(e){var t;return m(e)?null:(t="Gregorian"===this.calendarMode?{format:this.cldrDateTimeFormat(),type:"dateTime",skeleton:"yMd"}:{format:this.cldrDateTimeFormat(),type:"dateTime",skeleton:"yMd",calendar:"islamic"},this.globalize.formatDate(e,t))},t.prototype.isDateObject=function(e){return!m(e)&&!isNaN(+e)},t.prototype.createInputElement=function(){Se([this.inputElement],"e-datepicker"),Se([this.inputWrapper.container],"e-date-wrapper"),be([this.inputWrapper.container],"e-datetime-wrapper"),be([this.inputElement],Dv),this.renderTimeIcon()},t.prototype.renderTimeIcon=function(){this.timeIcon=rs.appendSpan("e-input-group-icon e-time-icon e-icons",this.inputWrapper.container)},t.prototype.bindInputEvents=function(){ye.add(this.timeIcon,"mousedown",this.timeHandler,this),ye.add(this.inputWrapper.buttons[0],"mousedown",this.dateHandler,this),ye.add(this.inputElement,"blur",this.blurHandler,this),ye.add(this.inputElement,"focus",this.focusHandler,this),this.defaultKeyConfigs=f(this.defaultKeyConfigs,this.keyConfigs),this.keyboardHandler=new Ut(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyAction.bind(this),keyConfigs:this.defaultKeyConfigs})},t.prototype.unBindInputEvents=function(){ye.remove(this.timeIcon,"mousedown touchstart",this.timeHandler),ye.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateHandler),this.inputElement&&(ye.remove(this.inputElement,"blur",this.blurHandler),ye.remove(this.inputElement,"focus",this.focusHandler)),this.keyboardHandler&&this.keyboardHandler.destroy()},t.prototype.cldrTimeFormat=function(){return this.isNullOrEmpty(this.timeFormat)?"en"===this.locale||"en-US"===this.locale?l("timeFormats.short",ie()):this.getCultureTimeObject(G,""+this.locale):this.timeFormat},t.prototype.cldrDateTimeFormat=function(){var e=new ee(this.locale).getDatePattern({skeleton:"yMd"});return this.isNullOrEmpty(this.formatString)?e+" "+this.getCldrFormat("time"):this.formatString},t.prototype.getCldrFormat=function(e){return"en"===this.locale||"en-US"===this.locale?l("timeFormats.short",ie()):this.getCultureTimeObject(G,""+this.locale)},t.prototype.isNullOrEmpty=function(e){return!!(m(e)||"string"===typeof e&&""===e.trim())},t.prototype.getCultureTimeObject=function(e,t){return"Gregorian"===this.calendarMode?l("main."+this.locale+".dates.calendars.gregorian.timeFormats.short",e):l("main."+this.locale+".dates.calendars.islamic.timeFormats.short",e)},t.prototype.timeHandler=function(t){this.enabled&&(this.isIconClicked=!0,ge.isDevice&&this.inputElement.setAttribute("readonly",""),t.currentTarget===this.timeIcon&&t.preventDefault(),this.enabled&&!this.readonly&&(this.isDatePopupOpen()&&e.prototype.hide.call(this,t),this.isTimePopupOpen()?this.closePopup(t):(this.inputElement.focus(),this.popupCreation("time",t),be([this.inputWrapper.container],[Lv]))),this.isIconClicked=!1)},t.prototype.dateHandler=function(e){this.enabled&&(e.currentTarget===this.inputWrapper.buttons[0]&&e.preventDefault(),this.enabled&&!this.readonly&&(this.isTimePopupOpen()&&this.closePopup(e),m(this.popupWrapper)||this.popupCreation("date",e)))},t.prototype.show=function(t,i){this.enabled&&this.readonly||!this.enabled||("time"!==t||this.dateTimeWrapper?this.popupObj||(this.isTimePopupOpen()&&this.hide(i),e.prototype.show.call(this),this.popupCreation("date",i)):(this.isDatePopupOpen()&&this.hide(i),this.popupCreation("time",i)))},t.prototype.toggle=function(t){this.isDatePopupOpen()?(e.prototype.hide.call(this,t),this.show("time",null)):this.isTimePopupOpen()?(this.hide(t),e.prototype.show.call(this,null,t),this.popupCreation("date",null)):this.show(null,t)},t.prototype.listCreation=function(){var e;e="Gregorian"===this.calendarMode?this.globalize.parseDate(this.inputElement.value,{format:this.cldrDateTimeFormat(),type:"datetime"}):this.globalize.parseDate(this.inputElement.value,{format:this.cldrDateTimeFormat(),type:"datetime",calendar:"islamic"});var t=m(this.value)?""!==this.inputElement.value?e:new Date:this.value;this.valueWithMinutes=t,this.listWrapper=we("div",{className:"e-content",attrs:{tabindex:"0"}});var i=this.startTime(t),n=this.endTime(t),o=Bf.createListItems(this.createElement,i,n,this.globalize,this.cldrTimeFormat(),this.step);this.timeCollections=o.collection,this.listTag=o.list,Ve(this.listTag,{role:"listbox","aria-hidden":"false",id:this.element.id+"_options"}),Ie([o.list],this.listWrapper),this.wireTimeListEvents();var s={duration:300,selector:"."+_v};this.rippleFn=at(this.listWrapper,s),this.liCollections=this.listWrapper.querySelectorAll("."+_v)},t.prototype.popupCreation=function(e,t){ge.isDevice&&this.element.setAttribute("readonly","readonly"),"date"===e?!this.readonly&&this.popupWrapper&&(be([this.popupWrapper],Nv),Ve(this.popupWrapper,{id:this.element.id+"_datepopup"})):this.readonly||(this.dateTimeWrapper=we("div",{className:Dv+" "+Fv,attrs:{id:this.element.id+"_timepopup",style:"visibility:hidden ; display:block"}}),m(this.cssClass)||(this.dateTimeWrapper.className+=" "+this.cssClass),!m(this.step)&&this.step>0&&(this.listCreation(),Ie([this.listWrapper],this.dateTimeWrapper)),document.body.appendChild(this.dateTimeWrapper),this.addTimeSelection(),this.renderPopup(),this.setTimeScrollPosition(),this.openPopup(t),this.popupObject.refreshPosition(this.inputElement))},t.prototype.openPopup=function(e){var t=this;this.preventArgs={cancel:!1,popup:this.popupObject,event:e||null};var i=this.preventArgs;this.trigger("open",i,(function(e){if(t.preventArgs=e,!t.preventArgs.cancel&&!t.readonly){var i={name:"FadeIn",duration:100};1e3===t.zIndex?t.popupObject.show(new st(i),t.element):t.popupObject.show(new st(i),null),be([t.inputWrapper.container],[Ov]),Ve(t.inputElement,{"aria-expanded":"true"}),Ve(t.inputElement,{"aria-owns":t.inputElement.id+"_options"}),ye.add(document,"mousedown touchstart",t.documentClickHandler,t)}}))},t.prototype.documentClickHandler=function(e){var t=e.target;!m(this.popupObject)&&(this.inputWrapper.container.contains(t)&&"mousedown"!==e.type||this.popupObject.element&&this.popupObject.element.contains(t))&&"touchstart"!==e.type&&e.preventDefault(),Fe(t,'[id="'+(this.popupObject&&this.popupObject.element.id+'"]'))||t===this.inputElement||t===this.timeIcon||m(this.inputWrapper)||t===this.inputWrapper.container?t!==this.inputElement&&(ge.isDevice||(this.isPreventBlur=document.activeElement===this.inputElement&&(ge.isIE||"edge"===ge.info.name)&&t===this.popupObject.element)):this.isTimePopupOpen()&&(this.hide(e),this.focusOut())},t.prototype.isTimePopupOpen=function(){return!(!this.dateTimeWrapper||!this.dateTimeWrapper.classList.contains(""+Dv))},t.prototype.isDatePopupOpen=function(){return!(!this.popupWrapper||!this.popupWrapper.classList.contains(""+Nv))},t.prototype.renderPopup=function(){var e=this;this.containerStyle=this.inputWrapper.container.getBoundingClientRect(),ge.isDevice&&(this.timeModal=we("div"),this.timeModal.className=Dv+" e-time-modal",document.body.className+=" "+Hv,this.timeModal.style.display="block",document.body.appendChild(this.timeModal));this.popupObject=new Ln(this.dateTimeWrapper,{width:this.setPopupWidth(),zIndex:this.zIndex,targetType:"container",collision:ge.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},relateTo:ge.isDevice?document.body:this.inputWrapper.container,position:ge.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},enableRtl:this.enableRtl,offsetY:4,open:function(){e.dateTimeWrapper.style.visibility="visible",be([e.timeIcon],jv),ge.isDevice||(e.timekeyConfigure=f(e.timekeyConfigure,e.keyConfigs),e.inputEvent=new Ut(e.inputWrapper.container,{keyAction:e.timeKeyActionHandle.bind(e),keyConfigs:e.timekeyConfigure,eventName:"keydown"}))},close:function(){Se([e.timeIcon],jv),e.unWireTimeListEvents(),e.inputElement.removeAttribute("aria-activedescendant"),ke(e.popupObject.element),e.popupObject.destroy(),e.dateTimeWrapper.innerHTML="",e.listWrapper=e.dateTimeWrapper=void 0,e.inputEvent&&e.inputEvent.destroy()},targetExitViewport:function(){ge.isDevice||e.hide()}}),this.popupObject.element.style.maxHeight=Pv},t.prototype.setDimension=function(e){return"number"===typeof e?e=b(e):"string"===typeof e||(e="100%"),e},t.prototype.setPopupWidth=function(){var e=this.setDimension(this.width);e.indexOf("%")>-1&&(e=(this.containerStyle.width*parseFloat(e)/100).toString()+"px");return e},t.prototype.wireTimeListEvents=function(){ye.add(this.listWrapper,"click",this.onMouseClick,this),ge.isDevice||(ye.add(this.listWrapper,"mouseover",this.onMouseOver,this),ye.add(this.listWrapper,"mouseout",this.onMouseLeave,this))},t.prototype.unWireTimeListEvents=function(){this.listWrapper&&(ye.remove(this.listWrapper,"click",this.onMouseClick),ye.remove(document,"mousedown touchstart",this.documentClickHandler),ge.isDevice||(ye.add(this.listWrapper,"mouseover",this.onMouseOver,this),ye.add(this.listWrapper,"mouseout",this.onMouseLeave,this)))},t.prototype.onMouseOver=function(e){var t=Fe(e.target,"."+_v);this.setTimeHover(t,Rv)},t.prototype.onMouseLeave=function(){this.removeTimeHover(Rv)},t.prototype.setTimeHover=function(e,t){this.enabled&&this.isValidLI(e)&&!e.classList.contains(t)&&(this.removeTimeHover(t),be([e],t))},t.prototype.getPopupHeight=function(){var e=parseInt(Pv,10),t=this.dateTimeWrapper.getBoundingClientRect().height;return t>e?e:t},t.prototype.changeEvent=function(t){e.prototype.changeEvent.call(this,t),(this.value&&this.value.valueOf())!==(this.previousDateTime&&+this.previousDateTime.valueOf())&&(this.valueWithMinutes=this.value,this.setInputValue("date"),this.previousDateTime=this.value&&new Date(+this.value))},t.prototype.updateValue=function(e){this.setInputValue("time"),+this.previousDateTime!==+this.value&&(this.changedArgs={value:this.value,event:e||null,isInteracted:!m(e),element:this.element},this.addTimeSelection(),this.trigger("change",this.changedArgs),this.previousDateTime=this.previousDate=this.value)},t.prototype.setTimeScrollPosition=function(){var e=this.selectedElement;m(e)?this.dateTimeWrapper&&this.checkDateValue(this.scrollTo)&&this.setScrollTo():this.findScrollTop(e)},t.prototype.findScrollTop=function(e){var t=this.getPopupHeight(),i=e.nextElementSibling,n=i?i.offsetTop:e.offsetTop,o=e.getBoundingClientRect().height;n+e.offsetTop>t?this.dateTimeWrapper.scrollTop=i?n-(t/2+o/2):n:this.dateTimeWrapper.scrollTop=0},t.prototype.setScrollTo=function(){var e,t=this.dateTimeWrapper.querySelectorAll("."+_v);if(t.length>=0){this.scrollInvoked=!0;var i=this.timeCollections[0],n=this.getDateObject(this.checkDateValue(this.scrollTo)).getTime();e=t[Math.round((n-i)/(6e4*this.step))]}else this.dateTimeWrapper.scrollTop=0;m(e)?this.dateTimeWrapper.scrollTop=0:this.findScrollTop(e)},t.prototype.setInputValue=function(e){if("date"===e)this.inputElement.value=this.previousElementValue=this.getFormattedValue(this.getFullDateTime()),this.setProperties({value:this.getFullDateTime()},!0);else{var t=this.getFormattedValue(new Date(this.timeCollections[this.activeIndex]));rs.setValue(t,this.inputElement,this.floatLabelType,this.showClearButton),this.previousElementValue=this.inputElement.value,this.setProperties({value:new Date(this.timeCollections[this.activeIndex])},!0),this.enableMask&&this.createMask()}this.updateIconState()},t.prototype.getFullDateTime=function(){var e=null;return e=this.isDateObject(this.valueWithMinutes)?this.combineDateTime(this.valueWithMinutes):this.previousDate,this.validateMinMaxRange(e)},t.prototype.createMask=function(){this.notify("createMask",{module:"MaskedDateTime"})},t.prototype.combineDateTime=function(e){if(this.isDateObject(e)){var t=this.previousDate.getDate(),i=this.previousDate.getMonth(),n=this.previousDate.getFullYear(),o=e.getHours(),s=e.getMinutes(),a=e.getSeconds();return new Date(n,i,t,o,s,a)}return this.previousDate},t.prototype.onMouseClick=function(e){var t=e.target,i=this.selectedElement=Fe(t,"."+_v);i&&i.classList.contains(_v)&&(this.timeValue=i.getAttribute("data-value"),this.hide(e)),this.setSelection(i,e)},t.prototype.setSelection=function(e,t){if(this.isValidLI(e)&&!e.classList.contains(jv)){this.selectedElement=e;var i=Array.prototype.slice.call(this.liCollections).indexOf(e);this.activeIndex=i,this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),be([this.selectedElement],jv),this.selectedElement.setAttribute("aria-selected","true"),this.updateValue(t)}},t.prototype.setTimeActiveClass=function(){var e=m(this.dateTimeWrapper)?this.listWrapper:this.dateTimeWrapper;if(!m(e)){var t=e.querySelectorAll("."+_v);if(t.length)for(var i=0;i<t.length;i++)if(this.timeCollections[i]===+this.valueWithMinutes){t[i].setAttribute("aria-selected","true"),this.selectedElement=t[i],this.activeIndex=i,this.setTimeActiveDescendant();break}}},t.prototype.setTimeActiveDescendant=function(){!m(this.selectedElement)&&this.value?Ve(this.inputElement,{"aria-activedescendant":this.selectedElement.getAttribute("id")}):this.inputElement.removeAttribute("aria-activedescendant")},t.prototype.addTimeSelection=function(){this.selectedElement=null,this.removeTimeSelection(),this.setTimeActiveClass(),m(this.selectedElement)||(be([this.selectedElement],jv),this.selectedElement.setAttribute("aria-selected","true"))},t.prototype.removeTimeSelection=function(){if(this.removeTimeHover(Rv),!m(this.dateTimeWrapper)){var e=this.dateTimeWrapper.querySelectorAll("."+jv);e.length&&(Se(e,jv),e[0].removeAttribute("aria-selected"))}},t.prototype.removeTimeHover=function(e){var t=this.getTimeHoverItem(e);t&&t.length&&Se(t,e)},t.prototype.getTimeHoverItem=function(e){var t,i=m(this.dateTimeWrapper)?this.listWrapper:this.dateTimeWrapper;return m(i)||(t=i.querySelectorAll("."+e)),t},t.prototype.isValidLI=function(e){return e&&e.classList.contains(_v)&&!e.classList.contains(Bv)},t.prototype.calculateStartEnd=function(e,t,i){var n=e.getDate(),o=e.getMonth(),s=e.getFullYear(),a=e.getHours(),r=e.getMinutes(),l=e.getSeconds(),d=e.getMilliseconds();return t?"starttime"===i?new Date(s,o,n,0,0,0):new Date(s,o,n,23,59,59):new Date(s,o,n,a,r,l,d)},t.prototype.startTime=function(e){var t,i,n=this.min,o=null===e?new Date:e;return+o.getDate()===+n.getDate()&&+o.getMonth()===+n.getMonth()&&+o.getFullYear()===+n.getFullYear()||+new Date(o.getFullYear(),o.getMonth(),o.getDate())<=+new Date(n.getFullYear(),n.getMonth(),n.getDate())?(i=!1,t=this.min):+o<+this.max&&+o>+this.min?(i=!0,t=o):+o>=+this.max&&(i=!0,t=this.max),this.calculateStartEnd(t,i,"starttime")},t.prototype.endTime=function(e){var t,i,n=this.max,o=null===e?new Date:e;return+o.getDate()===+n.getDate()&&+o.getMonth()===+n.getMonth()&&+o.getFullYear()===+n.getFullYear()||+new Date(o.getUTCFullYear(),o.getMonth(),o.getDate())>=+new Date(n.getFullYear(),n.getMonth(),n.getDate())?(i=!1,t=this.max):+o<+this.max&&+o>+this.min?(i=!0,t=o):+o<=+this.min&&(i=!0,t=this.min),this.calculateStartEnd(t,i,"endtime")},t.prototype.hide=function(e){var t=this;if(this.popupObj||this.dateTimeWrapper){this.preventArgs={cancel:!1,popup:this.popupObj||this.popupObject,event:e||null};var i=this.preventArgs;m(this.popupObj)?this.trigger("close",i,(function(i){t.dateTimeCloseEventCallback(e,i)})):this.dateTimeCloseEventCallback(e,i)}else ge.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()},t.prototype.dateTimeCloseEventCallback=function(t,i){this.preventArgs=i,this.preventArgs.cancel||(this.isDatePopupOpen()?e.prototype.hide.call(this,t):this.isTimePopupOpen()&&(this.closePopup(t),Se([document.body],Hv),ge.isDevice&&this.timeModal&&(this.timeModal.style.display="none",this.timeModal.outerHTML="",this.timeModal=null),this.setTimeActiveDescendant())),ge.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()},t.prototype.closePopup=function(e){if(this.isTimePopupOpen()&&this.popupObject){var t={name:"FadeOut",duration:100,delay:0};this.popupObject.hide(new st(t)),this.inputWrapper.container.classList.remove(Ov),Ve(this.inputElement,{"aria-expanded":"false"}),this.inputElement.removeAttribute("aria-owns"),ye.remove(document,"mousedown touchstart",this.documentClickHandler)}},t.prototype.preRender=function(){this.checkFormat(),this.dateTimeFormat=this.cldrDateTimeFormat(),e.prototype.preRender.call(this),Se([this.inputElementCopy],[Dv])},t.prototype.getProperty=function(e,t){"min"===t?this.setProperties({min:this.validateValue(e.min)},!0):this.setProperties({max:this.validateValue(e.max)},!0)},t.prototype.checkAttributes=function(e){for(var t,i=0,n=e?m(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["style","name","step","disabled","readonly","value","min","max","placeholder","type"];i<n.length;i++){var o=n[i];if(!m(this.inputElement.getAttribute(o)))switch(o){case"name":this.inputElement.setAttribute("name",this.inputElement.getAttribute(o));break;case"step":this.step=parseInt(this.inputElement.getAttribute(o),10);break;case"readonly":if(m(this.dateTimeOptions)||void 0===this.dateTimeOptions.readonly||e){var s="disabled"===this.inputElement.getAttribute(o)||""===this.inputElement.getAttribute(o)||"true"===this.inputElement.getAttribute(o);this.setProperties({readonly:s},!e)}break;case"placeholder":(m(this.dateTimeOptions)||void 0===this.dateTimeOptions.placeholder||e)&&this.setProperties({placeholder:this.inputElement.getAttribute(o)},!e);break;case"min":(m(this.dateTimeOptions)||void 0===this.dateTimeOptions.min||e)&&(t=new Date(this.inputElement.getAttribute(o)),this.isNullOrEmpty(t)||isNaN(+t)||this.setProperties({min:t},!e));break;case"disabled":if(m(this.dateTimeOptions)||void 0===this.dateTimeOptions.enabled||e){var a="disabled"!==this.inputElement.getAttribute(o)&&"true"!==this.inputElement.getAttribute(o)&&""!==this.inputElement.getAttribute(o);this.setProperties({enabled:a},!e)}break;case"value":(m(this.dateTimeOptions)||void 0===this.dateTimeOptions.value||e)&&(t=new Date(this.inputElement.getAttribute(o)),this.isNullOrEmpty(t)||isNaN(+t)||this.setProperties({value:t},!e));break;case"max":(m(this.dateTimeOptions)||void 0===this.dateTimeOptions.max||e)&&(t=new Date(this.inputElement.getAttribute(o)),this.isNullOrEmpty(t)||isNaN(+t)||this.setProperties({max:t},!e))}}},t.prototype.requiredModules=function(){var e=[];return this&&e.push({args:[this],member:"islamic"}),this.enableMask&&e.push(this.maskedDateModule()),e},t.prototype.maskedDateModule=function(){return{args:[this],member:"MaskedDateTime"}},t.prototype.getTimeActiveElement=function(){return m(this.dateTimeWrapper)?null:this.dateTimeWrapper.querySelectorAll("."+jv)},t.prototype.createDateObj=function(e){return e instanceof Date?e:null},t.prototype.getDateObject=function(e){if(!this.isNullOrEmpty(e)){var t=this.createDateObj(e),i=this.valueWithMinutes,n=!m(i);if(this.checkDateValue(t)){var o=n?i.getDate():Mv,s=n?i.getMonth():Iv,a=n?i.getFullYear():Tv,r=n?i.getHours():Av,l=n?i.getMinutes():kv,d=n?i.getSeconds():Vv,h=n?i.getMilliseconds():Ev;return this.scrollInvoked?(this.scrollInvoked=!1,new Date(a,s,o,t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())):new Date(a,s,o,r,l,d,h)}}return null},t.prototype.findNextTimeElement=function(e){var t=this.inputElement.value,i=m(this.valueWithMinutes)?this.createDateObj(t):this.getDateObject(this.valueWithMinutes),n=null,o=this.liCollections.length;if(!m(this.activeIndex)||!m(this.checkDateValue(i))){if("home"===e.action)n=+this.createDateObj(new Date(this.timeCollections[0])),this.activeIndex=0;else if("end"===e.action)n=+this.createDateObj(new Date(this.timeCollections[this.timeCollections.length-1])),this.activeIndex=this.timeCollections.length-1;else if("down"===e.action){for(var s=0;s<o;s++)if(+i<this.timeCollections[s]){n=+this.createDateObj(new Date(this.timeCollections[s])),this.activeIndex=s;break}}else for(s=o-1;s>=0;s--)if(+i>this.timeCollections[s]){n=+this.createDateObj(new Date(this.timeCollections[s])),this.activeIndex=s;break}this.selectedElement=this.liCollections[this.activeIndex],this.timeElementValue(m(n)?null:new Date(n))}},t.prototype.setTimeValue=function(e,t){var i,n,o=this.validateMinMaxRange(t),s=this.createDateObj(o);return this.getFormattedValue(s)!==(m(this.value)?null:this.getFormattedValue(this.value))?(this.valueWithMinutes=m(s)?null:s,n=new Date(+this.valueWithMinutes)):(this.strictMode&&(e=s),this.valueWithMinutes=this.checkDateValue(e),n=new Date(+this.valueWithMinutes)),i="Gregorian"===this.calendarMode?this.globalize.formatDate(n,{format:m(this.formatString)?this.cldrDateTimeFormat():this.formatString,type:"dateTime",skeleton:"yMd"}):this.globalize.formatDate(n,{format:m(this.formatString)?this.cldrDateTimeFormat():this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),!this.strictMode&&m(n),rs.setValue(i,this.inputElement,this.floatLabelType,this.showClearButton),n},t.prototype.timeElementValue=function(e){if(!m(this.checkDateValue(e))&&!this.isNullOrEmpty(e)){var t=e instanceof Date?e:this.getDateObject(e);return this.setTimeValue(t,e)}return null},t.prototype.timeKeyHandler=function(e){if(!(m(this.step)||this.step<=0)){var t=this.timeCollections.length;if(m(this.getTimeActiveElement())||0===this.getTimeActiveElement().length)this.liCollections.length>0&&(m(this.value)&&m(this.activeIndex)?(this.activeIndex=0,this.selectedElement=this.liCollections[0],this.timeElementValue(new Date(this.timeCollections[0]))):this.findNextTimeElement(e));else{var i=void 0;if(e.keyCode>=37&&e.keyCode<=40){var n=40===e.keyCode||39===e.keyCode?++this.activeIndex:--this.activeIndex;this.activeIndex=this.activeIndex===t?0:this.activeIndex,this.activeIndex=n=this.activeIndex<0?t-1:this.activeIndex,i=m(this.timeCollections[n])?this.timeCollections[0]:this.timeCollections[n]}else"home"===e.action?(this.activeIndex=0,i=this.timeCollections[0]):"end"===e.action&&(this.activeIndex=t-1,i=this.timeCollections[t-1]);this.selectedElement=this.liCollections[this.activeIndex],this.timeElementValue(new Date(i))}this.isNavigate=!0,this.setTimeHover(this.selectedElement,"e-navigation"),this.setTimeActiveDescendant(),!this.isTimePopupOpen()||null===this.selectedElement||e&&"click"===e.type||this.setTimeScrollPosition()}},t.prototype.timeKeyActionHandle=function(e){if(this.enabled)switch("right"!==e.action&&"left"!==e.action&&"tab"!==e.action&&e.preventDefault(),e.action){case"up":case"down":case"home":case"end":this.timeKeyHandler(e);break;case"enter":this.isNavigate?(this.selectedElement=this.liCollections[this.activeIndex],this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),this.setInputValue("time"),+this.previousDateTime!==+this.value&&(this.changedArgs.value=this.value,this.addTimeSelection(),this.previousDateTime=this.value)):this.updateValue(e),this.hide(e),be([this.inputWrapper.container],Lv),this.isNavigate=!1,e.stopPropagation();break;case"escape":this.hide(e);break;default:this.isNavigate=!1}},t.prototype.inputKeyAction=function(e){if("altDownArrow"===e.action)this.strictModeUpdate(),this.updateInput(),this.toggle(e)},t.prototype.onPropertyChanged=function(t,i){for(var n=0,o=Object.keys(t);n<o.length;n++){var s=o[n];switch(s){case"value":this.isDynamicValueChanged=!0,this.invalidValueString=null,this.checkInvalidValue(t.value),t.value=this.value,t.value=this.validateValue(t.value),rs.setValue(this.getFormattedValue(t.value),this.inputElement,this.floatLabelType,this.showClearButton),this.valueWithMinutes=t.value,this.setProperties({value:t.value},!0),this.popupObj&&this.popupUpdate(),this.previousDateTime=new Date(this.inputElement.value),this.updateInput(),this.changeTrigger(null),this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange,this.enableMask&&this.value&&this.notify("createMask",{module:"MaskedDateTime"});break;case"min":case"max":this.getProperty(t,s),this.updateInput();break;case"enableRtl":rs.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"cssClass":m(i.cssClass)||(i.cssClass=i.cssClass.replace(/\s+/g," ").trim()),m(t.cssClass)||(t.cssClass=t.cssClass.replace(/\s+/g," ").trim()),rs.setCssClass(t.cssClass,[this.inputWrapper.container],i.cssClass),this.dateTimeWrapper&&rs.setCssClass(t.cssClass,[this.dateTimeWrapper],i.cssClass);break;case"locale":this.globalize=new ee(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),rs.setPlaceholder(this.l10n.getConstant("placeholder"),this.inputElement),this.dateTimeFormat=this.cldrDateTimeFormat(),e.prototype.updateInput.call(this);break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkAttributes(!0);break;case"format":this.setProperties({format:t.format},!0),this.checkFormat(),this.dateTimeFormat=this.formatString,this.setValue(),this.enableMask&&(this.notify("createMask",{module:"MaskedDateTime"}),this.value||rs.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton));break;case"placeholder":rs.setPlaceholder(t.placeholder,this.inputElement);break;case"enabled":rs.setEnabled(this.enabled,this.inputElement),this.enabled||(this.inputElement.tabIndex=-1);break;case"strictMode":this.invalidValueString=null,this.updateInput();break;case"width":this.setWidth(t.width),rs.calculateWidth(this.inputElement,this.inputWrapper.container),m(this.inputWrapper.buttons[0])||m(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])||"Never"===this.floatLabelType||this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-date-time-icon");break;case"readonly":rs.setReadonly(this.readonly,this.inputElement);break;case"floatLabelType":this.floatLabelType=t.floatLabelType,rs.removeFloating(this.inputWrapper),rs.addFloating(this.inputElement,this.floatLabelType,this.placeholder),m(this.inputWrapper.buttons[0])||m(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])||"Never"===this.floatLabelType||this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-date-time-icon");break;case"scrollTo":this.checkDateValue(new Date(this.checkValue(t.scrollTo)))?(this.dateTimeWrapper&&this.setScrollTo(),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkValue(t.scrollTo)))},!0)):this.setProperties({scrollTo:null},!0);break;case"enableMask":this.enableMask?(this.notify("createMask",{module:"MaskedDateTime"}),rs.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton)):this.inputElement.value===this.maskedDateValue&&(this.maskedDateValue="",rs.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton));break;default:e.prototype.onPropertyChanged.call(this,t,i)}this.isDynamicValueChanged||this.hide(null),this.isDynamicValueChanged=!1}},t.prototype.getModuleName=function(){return"datetimepicker"},t.prototype.restoreValue=function(){this.previousDateTime=this.previousDate,this.currentDate=this.value?this.value:new Date,this.valueWithMinutes=this.value,this.previousDate=this.value,this.previousElementValue=this.previousElementValue=m(this.inputValueCopy)?"":this.getFormattedValue(this.inputValueCopy)},xv([Ge(null)],t.prototype,"timeFormat",void 0),xv([Ge(30)],t.prototype,"step",void 0),xv([Ge(null)],t.prototype,"scrollTo",void 0),xv([Ge(1e3)],t.prototype,"zIndex",void 0),xv([Ge(null)],t.prototype,"value",void 0),xv([Ge(null)],t.prototype,"keyConfigs",void 0),xv([Ge({})],t.prototype,"htmlAttributes",void 0),xv([Ge(!1)],t.prototype,"enablePersistence",void 0),xv([Ge(!0)],t.prototype,"allowEdit",void 0),xv([Ge(!1)],t.prototype,"isMultiSelection",void 0),xv([Ge(null)],t.prototype,"values",void 0),xv([Ge(!0)],t.prototype,"showClearButton",void 0),xv([Ge(null)],t.prototype,"placeholder",void 0),xv([Ge(!1)],t.prototype,"strictMode",void 0),xv([Ge(null)],t.prototype,"serverTimezoneOffset",void 0),xv([Ge(new Date(1900,0,1))],t.prototype,"min",void 0),xv([Ge(new Date(2099,11,31))],t.prototype,"max",void 0),xv([Ge(null)],t.prototype,"firstDayOfWeek",void 0),xv([Ge("Gregorian")],t.prototype,"calendarMode",void 0),xv([Ge("Month")],t.prototype,"start",void 0),xv([Ge("Month")],t.prototype,"depth",void 0),xv([Ge(!1)],t.prototype,"weekNumber",void 0),xv([Ge(!0)],t.prototype,"showTodayButton",void 0),xv([Ge("Short")],t.prototype,"dayHeaderFormat",void 0),xv([Ge(!1)],t.prototype,"openOnFocus",void 0),xv([Ge(!1)],t.prototype,"enableMask",void 0),xv([Ge({day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"})],t.prototype,"maskPlaceholder",void 0),xv([$e()],t.prototype,"open",void 0),xv([$e()],t.prototype,"close",void 0),xv([$e()],t.prototype,"cleared",void 0),xv([$e()],t.prototype,"blur",void 0),xv([$e()],t.prototype,"focus",void 0),xv([$e()],t.prototype,"created",void 0),xv([$e()],t.prototype,"destroyed",void 0),t=xv([et],t)}(ov),Uv="e-error",qv="e-input-group",Yv="e-float-input",Qv="e-label-top",Zv="e-label-bottom",Xv={0:"[0-9]",9:"[0-9 ]","#":"[0-9 +-]",L:"[A-Za-z]","?":"[A-Za-z ]","&":"[^\x7f ]+",C:"[^\x7f]+",A:"[A-Za-z0-9]",a:"[A-Za-z0-9 ]"};function Gv(){if(Ve(this.element,{role:"textbox",autocomplete:"off",autocapitalize:"off",spellcheck:"false","aria-live":"assertive"}),this.mask){for(var e=this.mask.split("]"),t=0;t<e.length;t++)if("\\"===e[t][e[t].length-1]){e[t]=e[t]+"]";for(var i=e[t].split("["),n=0;n<i.length;n++)"\\"===i[n][i[n].length-1]&&(i[n]=i[n]+"["),aw.call(this,i[n])}else{if((i=e[t].split("[")).length>1){var o=!1;for(n=0;n<i.length;n++)"\\"===i[n]?(this.customRegExpCollec.push("["),this.hiddenMask+=i[n]+"["):""===i[n]?o=!0:""!==i[n]&&o||n===i.length-1?(this.customRegExpCollec.push("["+i[n]+"]"),this.hiddenMask+=this.promptChar,o=!1):aw.call(this,i[n])}else aw.call(this,i[0])}if(this.escapeMaskValue=this.hiddenMask,this.promptMask=this.hiddenMask.replace(/[09?LCAa#&]/g,this.promptChar),!m(this.customCharacters))for(t=0;t<this.promptMask.length;t++)m(this.customCharacters[this.promptMask[t]])||(this.promptMask=this.promptMask.replace(new RegExp(this.promptMask[t],"g"),this.promptChar));var s=0;if(this.hiddenMask.match(new RegExp(/\\/)))for(t=0;t<this.hiddenMask.length;t++){n=0;t>=1&&(n=t),n-=s=this.hiddenMask.length-this.promptMask.length,t>0&&"\\"!==this.hiddenMask[t-1]&&(">"===this.hiddenMask[t]||"<"===this.hiddenMask[t]||"|"===this.hiddenMask[t])&&(this.promptMask=this.promptMask.substring(0,n)+this.promptMask.substring(t+1-s,this.promptMask.length),this.escapeMaskValue=this.escapeMaskValue.substring(0,n)+this.escapeMaskValue.substring(t+1-s,this.escapeMaskValue.length)),"\\"===this.hiddenMask[t]&&(this.promptMask=this.promptMask.substring(0,n)+this.hiddenMask[t+1]+this.promptMask.substring(t+2-s,this.promptMask.length),this.escapeMaskValue=this.escapeMaskValue.substring(0,n)+this.escapeMaskValue[t+1]+this.escapeMaskValue.substring(t+2-s,this.escapeMaskValue.length))}else this.promptMask=this.promptMask.replace(/[>|<]/g,""),this.escapeMaskValue=this.hiddenMask.replace(/[>|<]/g,"");Ve(this.element,{"aria-invalid":"false"})}}function Jv(){Nw.call(this,this.promptMask),Dw.call(this,this.value)}function Kv(){ye.add(this.element,"keydown",gw,this),ye.add(this.element,"keypress",bw,this),ye.add(this.element,"keyup",Cw,this),ye.add(this.element,"input",mw,this),ye.add(this.element,"focus",dw,this),ye.add(this.element,"blur",pw,this),ye.add(this.element,"paste",cw,this),ye.add(this.element,"cut",uw,this),ye.add(this.element,"drop",fw,this),ye.add(this.element,"mousedown",rw,this),ye.add(this.element,"mouseup",lw,this),this.enabled&&(ew.call(this),this.formElement&&ye.add(this.formElement,"reset",nw,this))}function $v(){ye.remove(this.element,"keydown",gw),ye.remove(this.element,"keypress",bw),ye.remove(this.element,"keyup",Cw),ye.remove(this.element,"input",mw),ye.remove(this.element,"focus",dw),ye.remove(this.element,"blur",pw),ye.remove(this.element,"paste",cw),ye.remove(this.element,"cut",uw),ye.remove(this.element,"mousedown",rw),ye.remove(this.element,"mouseup",lw),this.formElement&&ye.remove(this.formElement,"reset",nw)}function ew(){this.showClearButton&&ye.add(this.inputObj.clearButton,"mousedown touchstart",tw,this)}function tw(e){e.preventDefault(),this.inputObj.clearButton.classList.contains("e-clear-icon-hide")&&!this.inputObj.container.classList.contains("e-static-clear")||(iw.call(this,e),this.value="")}function iw(e){var t=this.element.value;Nw.call(this,this.promptMask),this.redoCollec.unshift({value:this.promptMask,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),Sw.call(this,e,t),this.element.setSelectionRange(0,0)}function nw(){"EJS-MASKEDTEXTBOX"===this.element.tagName?Nw.call(this,this.promptMask):this.value=this.initInputValue}function ow(e){return e.value}function sw(e,t){var i="",n=0,o=!1,s=m(t)?m(e)||m(this)?t:e.value:t;if(s!==this.promptMask)for(var a=0;a<this.customRegExpCollec.length;a++)o&&(o=!1),">"!==this.customRegExpCollec[n]&&"<"!==this.customRegExpCollec[n]&&"|"!==this.customRegExpCollec[n]&&"\\"!==this.customRegExpCollec[n]||(--a,o=!0),o||s[a]!==this.promptChar&&!m(this.customRegExpCollec[n])&&(this._callPasteHandler||!m(this.regExpCollec[this.customRegExpCollec[n]])||this.customRegExpCollec[n].length>2&&"["===this.customRegExpCollec[n][0]&&"]"===this.customRegExpCollec[n][this.customRegExpCollec[n].length-1]||!m(this.customCharacters)&&!m(this.customCharacters[this.customRegExpCollec[n]]))&&""!==s&&(i+=s[a]),++n;return(null===this.mask||""===this.mask&&void 0!==this.value)&&(i=s),i}function aw(e){for(var t=0;t<e.length;t++)this.hiddenMask+=e[t],"\\"!==e[t]&&this.customRegExpCollec.push(e[t])}function rw(){this.isClicked=!0}function lw(){this.isClicked=!1}function dw(e){var t,i=this,n=this.element,o=0,s=sw.call(this,n),a=!1,r=!1,l={selectionStart:n.selectionStart,event:e,value:this.value,maskedValue:n.value,container:m(this.inputObj)?this.inputObj:this.inputObj.container,selectionEnd:n.selectionEnd};if(this.isClicked||hw.call(this,l,n),this.mask&&(null!==s&&""!==s||"Always"===this.floatLabelType||null===this.placeholder||""===this.placeholder||(n.value=this.promptMask),setTimeout((function(){if(n.selectionStart===i.promptMask.length||n.value[n.selectionStart]===i.promptChar)a=!0;else for(var e=n.selectionStart;e<i.promptMask.length;e++){if(n.value[e]===i.promptChar){a=!0;break}if(n.value[e]!==i.promptMask[e]){a=!1;break}}})),setTimeout((function(){var e=n.selectionStart-1;if(e===i.promptMask.length-1||n.value[e]===i.promptChar)r=!0;else for(var t=e;t>=0;t--){if(n.value[t]===i.promptChar){r=!0;break}if(n.value[t]!==i.promptMask[t]){r=!1;break}}})),this.isClicked||"Always"!==this.floatLabelType&&(null===s||""===s)&&null!==this.placeholder&&""!==this.placeholder)){for(o=0;o<this.promptMask.length;o++)if(n.value[o]===this.promptChar){setTimeout((function(){(a||r)&&(n.selectionEnd=o,n.selectionStart=o),l={selectionStart:n.selectionStart,event:e,value:i.value,maskedValue:n.value,container:m(i.inputObj)?i.inputObj:i.inputObj.container,selectionEnd:n.selectionEnd},hw.call(i,l,n)}),110);break}m(n.value.match(m(t=this.promptChar)?t:t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")))&&(l={selectionStart:n.selectionStart,event:e,value:this.value,maskedValue:n.value,container:m(this.inputObj)?this.inputObj:this.inputObj.container,selectionEnd:n.selectionEnd},hw.call(this,l,n)),this.isClicked=!1}}function hw(e,t){this.trigger("focus",e,(function(e){t.selectionStart=e.selectionStart,t.selectionEnd=e.selectionEnd}))}function pw(e){if(this.blurEventArgs={event:e,value:this.value,maskedValue:this.element.value,container:m(this.inputObj)?this.inputObj:this.inputObj.container},this.trigger("blur",this.blurEventArgs),this.mask&&(this.isFocus=!1,this.placeholder&&this.element.value===this.promptMask&&"Always"!==this.floatLabelType)){Nw.call(this,"");var t=this.element.parentNode.querySelector(".e-float-text");"Auto"===this.floatLabelType&&!m(t)&&t.classList.contains(Qv)&&Se([t],Qv)}}function cw(e){var t=this;if(this.mask&&!this.readonly){var i=this.element.selectionStart,n=this.element.selectionEnd,o=this.element.value;Nw.call(this,""),this._callPasteHandler=!0,setTimeout((function(){var s=t.element.value.replace(/ /g,"");t.redoCollec.length>0&&t.redoCollec[0].value===t.element.value&&(s=sw.call(t,t.element)),Nw.call(t,o),t.element.selectionStart=i,t.element.selectionEnd=n;var a=0;t.maskKeyPress=!0;do{Iw.call(t,s[a],!1,null),++a}while(a<s.length);if(t.maskKeyPress=!1,t._callPasteHandler=!1,t.element.value===o){var r=0;t.maskKeyPress=!0;do{Iw.call(t,s[r],!1,null),++r}while(r<s.length);t.maskKeyPress=!1}else Sw.call(t,e,o)}),1)}}function uw(e){var t=this;if(this.mask&&!this.readonly){var i=this.element.value,n=this.element.selectionStart,o=this.element.selectionEnd;this.undoCollec.push({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd});var s=this.element.value.substring(0,n)+this.promptMask.substring(n,o)+this.element.value.substring(o);setTimeout((function(){Nw.call(t,s),t.element.selectionStart=t.element.selectionEnd=n,t.element.value!==i&&Sw.call(t,e,null)}),0)}}function fw(e){e.preventDefault()}function mw(e){if(!0!==ge.isIE||""!==this.element.value||"Never"!==this.floatLabelType){if(f(e,{ctrlKey:!1,keyCode:229}),this.mask){if(""===this.element.value&&this.redoCollec.unshift({value:this.promptMask,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),1===this.element.value.length&&(this.element.value=this.element.value+this.promptMask,this.element.setSelectionRange(1,1)),this._callPasteHandler||ww.call(this,e),this.element.value.length>this.promptMask.length){var t=this.element.selectionStart,i=this.element.value.length-this.promptMask.length,n=this.element.value.substring(t-i,t);this.maskKeyPress=!1;var o=0;do{Iw.call(this,n[o],e.ctrlKey,e),++o}while(o<n.length);this.element.value!==this.preEleVal&&Sw.call(this,e,null)}var s=sw.call(this,this.element);this.prevValue=s,this.value=s,""===s&&(Nw.call(this,this.promptMask),this.element.setSelectionRange(0,0))}}}function gw(e){if(this.mask&&!this.readonly){229!==e.keyCode&&(!e.ctrlKey||89!==e.keyCode&&90!==e.keyCode||e.preventDefault(),ww.call(this,e));var t=this.element.value;if(e.ctrlKey&&(89===e.keyCode||90===e.keyCode)){var i=void 0;90===e.keyCode&&this.undoCollec.length>0&&t!==this.undoCollec[this.undoCollec.length-1].value?(i=this.undoCollec[this.undoCollec.length-1],this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),Nw.call(this,i.value),this.element.selectionStart=i.startIndex,this.element.selectionEnd=i.endIndex,this.undoCollec.splice(this.undoCollec.length-1,1)):89===e.keyCode&&this.redoCollec.length>0&&t!==this.redoCollec[0].value&&(i=this.redoCollec[0],this.undoCollec.push({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),Nw.call(this,i.value),this.element.selectionStart=i.startIndex,this.element.selectionEnd=i.endIndex,this.redoCollec.splice(0,1))}}}function yw(){var e,t=this.element.selectionStart,i=this.element.selectionEnd;this.redoCollec.length>0?(e=this.redoCollec[0],Nw.call(this,e.value),e.startIndex-t===1?(this.element.selectionStart=e.startIndex,this.element.selectionEnd=e.endIndex):(this.element.selectionStart=t+1,this.element.selectionEnd=i+1)):(Nw.call(this,this.promptMask),this.element.selectionStart=this.element.selectionEnd=t)}function vw(e,t,i){return"input"===i.type&&(e=!1,t=this.element.value,Nw.call(this,this.promptMask),Dw.call(this,t)),e}function ww(e){var t,i=!1,n=!1;this.element.value.length<this.promptMask.length&&(i=!0,t=this.element.value,i=vw.call(this,i,t,e),yw.call(this)),this.element.value.length>=this.promptMask.length&&"input"===e.type&&(i=vw.call(this,i,t,e));var o=this.element.selectionStart,s=this.element.selectionEnd,a=this.element.selectionStart,r=this.element.selectionEnd,l=this.hiddenMask.replace(/[>|\\<]/g,""),d=l[a-1],h=this.element.selectionEnd;if(i||8===e.keyCode||46===e.keyCode){this.undoCollec.push({value:this.element.value,startIndex:this.element.selectionStart,endIndex:r});var p=!1,c=this.element.value;if(a>0||(8===e.keyCode||46===e.keyCode)&&a<this.element.value.length&&this.element.selectionEnd-a!==this.element.value.length){var u=a;a!==r?(a=r,46===e.keyCode&&(p=!0)):46===e.keyCode?++u:--u;for(var f=a;8===e.keyCode||i||p?f>u:f<u;8===e.keyCode||i||p?f--:f++)for(var g=a;8===e.keyCode||i||p?g>0:g<this.element.value.length;8===e.keyCode||i||p?g--:g++){var y=void 0;(8===e.keyCode||p)&&(o!==s&&o!==a||o===s)||i?(d=l[g-1],y=a-1):(d=l[g],y=a,++a);var v=this.element.value[y];if(m(this.regExpCollec[""+d])&&!m(this.customCharacters)&&m(this.customCharacters[""+d])&&this.hiddenMask[y]!==this.promptChar&&"["!==this.customRegExpCollec[y][0]&&"]"!==this.customRegExpCollec[y][this.customRegExpCollec[y].length-1]||this.promptMask[y]!==this.promptChar&&m(this.customCharacters))this.element.selectionStart=this.element.selectionEnd=y,e.preventDefault(),46!==e.keyCode||p||++this.element.selectionStart;else{var w=this.element.value,b=this.promptChar,S=w.substring(0,y)+b+w.substring(a,w.length);Nw.call(this,S),e.preventDefault(),46!==e.keyCode||p||y++,this.element.selectionStart=this.element.selectionEnd=y,n=!0}if(a=this.element.selectionStart,!n&&8===e.keyCode||p||!n&&46!==e.keyCode?y=a-1:(y=a,n=!1),v=this.element.value[y],o!==s&&this.element.selectionStart===o||this.promptMask[y]===this.promptChar||v!==this.promptMask[y]&&this.promptMask[y]!==this.promptChar&&!m(this.customCharacters))break}}46===e.keyCode&&p&&n&&(this.element.selectionStart=this.element.selectionEnd=h),0===this.element.selectionStart&&this.element.selectionEnd===this.element.value.length&&(Nw.call(this,this.promptMask),e.preventDefault(),this.element.selectionStart=this.element.selectionEnd=a),this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),this.element.value!==c&&Sw.call(this,e,t)}}function bw(e){if(this.mask&&!this.readonly){var t=this.element.value;if(!e.ctrlKey&&!e.metaKey||(e.ctrlKey||e.metaKey)&&"KeyA"!==e.code&&"KeyY"!==e.code&&"KeyZ"!==e.code&&"KeyX"!==e.code&&"KeyC"!==e.code&&"KeyV"!==e.code){this.maskKeyPress=!0;var i=e.key;"Spacebar"===i&&(i=String.fromCharCode(e.keyCode)),i?i&&1===i.length&&(Iw.call(this,i,e.ctrlKey,e),e.preventDefault()):(this.isIosInvalid=!0,Iw.call(this,String.fromCharCode(e.keyCode),e.ctrlKey,e),e.preventDefault(),this.isIosInvalid=!1),32===e.keyCode&&" "===i&&" "===this.promptChar&&(this.element.selectionStart=this.element.selectionEnd=this.element.selectionStart-i.length)}this.element.value!==t&&Sw.call(this,e,t)}}function Sw(e,t){var i=this.isProtectedOnChange;if(!m(this.changeEventArgs)&&!this.isInitial){var n={};this.changeEventArgs={value:this.element.value,maskedValue:this.element.value,isInteraction:!1,isInteracted:!1},this.mask&&(this.changeEventArgs.value=sw.call(this,this.element)),m(e)||(this.changeEventArgs.isInteracted=!0,this.changeEventArgs.isInteraction=!0,this.changeEventArgs.event=e),this.isProtectedOnChange=!0,this.value=this.changeEventArgs.value,this.isProtectedOnChange=i,u(n,this.changeEventArgs),this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",n)}this.preEleVal=this.element.value,this.prevValue=sw.call(this,this.element)}function Cw(e){if(this.mask&&!this.readonly){var t=void 0;if(this.maskKeyPress||229!==e.keyCode)Vw.call(this);else{var i=void 0;if(1===this.element.value.length&&(this.element.value=this.element.value+this.promptMask,this.element.setSelectionRange(1,1)),this.element.value.length>this.promptMask.length){var n=this.element.selectionStart,o=this.element.value.length-this.promptMask.length,s=this.element.value.substring(n-o,n);if(this.undoCollec.length>0){t=this.undoCollec[this.undoCollec.length-1];var a=this.element.selectionStart;i=t.value;var r=t.value.substring(a-o,a);t=this.redoCollec[0],s=s.trim();var l=ge.isAndroid&&""===s;l||r===s||t.value.substring(a-o,a)===s?l&&Aw.call(this,e,a-1,this.element.selectionEnd-1,s,e.ctrlKey,!1):Iw.call(this,s,e.ctrlKey,e)}else i=this.promptMask,Iw.call(this,s,e.ctrlKey,e);this.maskKeyPress=!1,Sw.call(this,e,i)}}var d=sw.call(this,this.element);(0!==this.element.selectionStart||this.promptMask!==this.element.value||""!==d||""===d&&this.value!==d)&&(this.prevValue=d,this.value=d)}else Sw.call(this,e);if(0===this.element.selectionStart&&0===this.element.selectionEnd){var h=this.element;setTimeout((function(){h.setSelectionRange(0,0)}),0)}}function xw(e){if(e.length>1&&this.promptMask.length+e.length<this.element.value.length){var t=this.redoCollec[0].value.substring(0,this.redoCollec[0].startIndex)+e+this.redoCollec[0].value.substring(this.redoCollec[0].startIndex,this.redoCollec[0].value.length);Nw.call(this,t),this.element.selectionStart=this.element.selectionEnd=this.redoCollec[0].startIndex+e.length}this.element.selectionStart=this.element.selectionStart-e.length,this.element.selectionEnd=this.element.selectionEnd-e.length}function Mw(e){this.maskKeyPress||xw.call(this,e)}function Iw(e,t,i){if(Mw.call(this,e),!m(this)&&!m(e))for(var n,o,s=this.element.selectionStart,a=s,r=!1,l=this.element.value,d=!1,h=!1,p=0;p<e.length;p++){var c=e[p];if(s=this.element.selectionStart,this.maskKeyPress||a!==s||(s+=p),!this.maskKeyPress||s<this.promptMask.length){for(var u=s;u<this.promptMask.length;u++){n=this.escapeMaskValue[s],"\\"===this.hiddenMask[s]&&this.hiddenMask[s+1]===e&&(h=!0),(m(this.regExpCollec[""+n])&&(m(this.customCharacters)||!m(this.customCharacters)&&m(this.customCharacters[""+n]))&&this.hiddenMask[s]!==this.promptChar&&"["!==this.customRegExpCollec[s][0]&&"]"!==this.customRegExpCollec[s][this.customRegExpCollec[s].length-1]||this.promptMask[s]!==this.promptChar&&m(this.customCharacters)||this.promptChar===n&&this.escapeMaskValue===this.mask)&&(this.element.selectionStart=this.element.selectionEnd=s+1,s=this.element.selectionStart,n=this.hiddenMask[s])}if(m(this.customCharacters)||m(this.customCharacters[""+n]))(!m(this.regExpCollec[""+n])&&c.match(new RegExp(this.regExpCollec[""+n]))&&this.promptMask[s]===this.promptChar||this.promptMask[s]===this.promptChar&&"["===this.customRegExpCollec[s][0]&&"]"===this.customRegExpCollec[s][this.customRegExpCollec[s].length-1]&&c.match(new RegExp(this.customRegExpCollec[s])))&&(r=!0);else{var f=this.customCharacters[""+n].split(",");for(u=0;u<f.length;u++)if(c.match(new RegExp("["+f[u]+"]"))){r=!0;break}}if((!this.maskKeyPress||s<this.hiddenMask.length)&&r){if(0===p)if(this.maskKeyPress)this.undoCollec.push({value:l,startIndex:s,endIndex:s});else{var g=this.element.selectionStart,y=this.element.selectionEnd;this.redoCollec.length>0?(o=this.redoCollec[0].value,Nw.call(this,o),this.undoCollec.push(this.redoCollec[0])):(this.undoCollec.push({value:this.promptMask,startIndex:s,endIndex:s}),o=this.promptMask,Nw.call(this,o)),this.element.selectionStart=g,this.element.selectionEnd=y}s=this.element.selectionStart,Tw.call(this,i,s,c,o,h),d=!0,p===e.length-1&&this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),r=!1}else s=this.element.selectionStart,Aw.call(this,i,s,a,e,t,d);p!==e.length-1||r||(!ge.isAndroid||ge.isAndroid&&s<this.promptMask.length)&&this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd})}else 1!==e.length||t||m(i)||kw.call(this)}}function Tw(e,t,i,n,o){if(this.hiddenMask.length>this.promptMask.length&&(i=Ew.call(this,i,this.element.value)),!o){var s=this.element.value,a=s.substring(0,t)+i+s.substring(t+1,s.length);Nw.call(this,a),this.element.selectionStart=this.element.selectionEnd=t+1}}function Aw(e,t,i,n,o,s){if(!this.maskKeyPress){var a=this.element.value;t>=this.promptMask.length?Nw.call(this,a.substring(0,t)):(i===t?Nw.call(this,a.substring(0,t)+a.substring(t+1,a.length)):this.promptMask.length===this.element.value.length?Nw.call(this,a.substring(0,t)+a.substring(t,a.length)):Nw.call(this,a.substring(0,i)+a.substring(i+1,a.length)),this.element.selectionStart=this.element.selectionEnd=s||this.element.value[i]!==this.promptChar?t:i),kw.call(this)}1!==n.length||o||m(e)||kw.call(this)}function kw(){var e=this,t=this.element.parentNode,i=200;t.classList.contains(qv)||t.classList.contains(Yv)?be([t],Uv):be([this.element],Uv),!0===this.isIosInvalid&&(i=400),Ve(this.element,{"aria-invalid":"true"}),setTimeout((function(){e.maskKeyPress||Vw.call(e)}),i)}function Vw(){var e=this.element.parentNode;m(e)||Se([e],Uv),Se([this.element],Uv),Ve(this.element,{"aria-invalid":"false"})}function Ew(e,t){var i,n,o=t,s=0;for(n=0;n<this.hiddenMask.length;n++)if("\\"===this.hiddenMask[n]&&(i=o.substring(0,n)+"\\"+o.substring(n,o.length)),">"!==this.hiddenMask[n]&&"<"!==this.hiddenMask[n]&&"|"!==this.hiddenMask[n]||(this.hiddenMask[n]!==o[n]&&(i=o.substring(0,n)+this.hiddenMask[n]+o.substring(n,o.length)),++s),i){if(i[n]===this.promptChar&&n>this.element.selectionStart||this.element.value.indexOf(this.promptChar)<0&&this.element.selectionStart+s===n){s=0;break}o=i}for(;n>=0&&i;){if(0===n||"\\"!==i[n-1]){if(">"===i[n]){e=e.toUpperCase();break}if("<"===i[n]){e=e.toLowerCase();break}if("|"===i[n])break}--n}return e}function Dw(e){if(this.mask&&void 0!==e&&(void 0===this.prevValue||this.prevValue!==e)){if(this.maskKeyPress=!0,Nw.call(this,this.promptMask),""===e||null===e&&"Never"===this.floatLabelType&&this.placeholder||(this.element.selectionStart=0,this.element.selectionEnd=0),null!==e)for(var t=0;t<e.length;t++)Iw.call(this,e[t],!1,null);var i=sw.call(this,this.element);this.prevValue=i,this.value=i,Sw.call(this,null,null),this.maskKeyPress=!1;var n=this.element.parentNode.querySelector(".e-float-text");this.element.value===this.promptMask&&"Auto"===this.floatLabelType&&this.placeholder&&!m(n)&&n.classList.contains(Qv)&&!this.isFocus&&(Se([n],Qv),be([n],Zv),Nw.call(this,""))}(null===this.mask||""===this.mask&&void 0!==this.value)&&Nw.call(this,this.value)}function Nw(e,t){!this.isFocus&&"Auto"===this.floatLabelType&&this.placeholder&&m(this.value)&&(e="");var i=sw.call(this,t||this.element,e);null===i||""===i?(rs.setValue(e,t||this.element,this.floatLabelType,!1),this.showClearButton&&this.inputObj.clearButton.classList.add("e-clear-icon-hide")):rs.setValue(e,t||this.element,this.floatLabelType,this.showClearButton)}new function(){};var Fw,Lw=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Pw=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Ow="e-input-focus",Bw=["title","style","class"],zw=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.initInputValue="",n.isAngular=!1,n.preventChange=!1,n.isClicked=!1,n.maskOptions=t,n}return Lw(t,e),t.prototype.getModuleName=function(){return"maskedtextbox"},t.prototype.preRender=function(){this.promptMask="",this.hiddenMask="",this.escapeMaskValue="",this.regExpCollec=Xv,this.customRegExpCollec=[],this.undoCollec=[],this.redoCollec=[],this.changeEventArgs={},this.focusEventArgs={},this.blurEventArgs={},this.maskKeyPress=!1,this.isFocus=!1,this.isInitial=!1,this.isIosInvalid=!1;var e=l("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),Se([this.cloneElement],["e-control","e-maskedtextbox","e-lib"]),this.angularTagName=null,this.formElement=Fe(this.element,"form"),"EJS-MASKEDTEXTBOX"===this.element.tagName){this.angularTagName=this.element.tagName;for(var t=this.createElement("input"),i=0;i<this.element.attributes.length;i++)t.setAttribute(this.element.attributes[i].nodeName,this.element.attributes[i].nodeValue),t.innerHTML=this.element.innerHTML;this.element.hasAttribute("id")&&this.element.removeAttribute("id"),this.element.classList.remove("e-control","e-maskedtextbox"),this.element.classList.add("e-mask-container"),this.element.appendChild(t),this.element=t,d("ej2_instances",e,this.element)}this.updateHTMLAttrToElement(),this.checkHtmlAttributes(!1),this.formElement&&(this.initInputValue=this.value)},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.render=function(){"input"===this.element.tagName.toLowerCase()&&("Never"===this.floatLabelType&&be([this.element],"e-input"),this.createWrapper(),this.updateHTMLAttrToWrapper(),""===this.element.name&&this.element.setAttribute("name",this.element.id),this.isInitial=!0,this.resetMaskedTextBox(),this.isInitial=!1,this.setMaskPlaceholder(!0,!1),this.setWidth(this.width),this.preEleVal=this.element.value,ge.isDevice||"11.0"!==ge.info.version&&"edge"!==ge.info.name||this.element.blur(),ge.isDevice&&ge.isIos&&this.element.blur(),(this.element.getAttribute("value")||this.value)&&this.element.setAttribute("value",this.element.value),!m(Fe(this.element,"fieldset"))&&Fe(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete())},t.prototype.updateHTMLAttrToElement=function(){if(!m(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];Bw.indexOf(i)<0&&this.element.setAttribute(i,this.htmlAttributes[""+i])}},t.prototype.updateCssClass=function(e,t){rs.setCssClass(this.getValidClassList(e),[this.inputObj.container],this.getValidClassList(t))},t.prototype.getValidClassList=function(e){var t=e;return m(e)||""===e||(t=e.replace(/\s+/g," ").trim()),t},t.prototype.updateHTMLAttrToWrapper=function(){if(!m(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if(Bw.indexOf(i)>-1)if("class"===i){var n=this.htmlAttributes[""+i].replace(/\s+/g," ").trim();""!==n&&be([this.inputObj.container],n.split(" "))}else if("style"===i){var o=this.inputObj.container.getAttribute(i);o=m(o)?this.htmlAttributes[""+i]:o+this.htmlAttributes[""+i],this.inputObj.container.setAttribute(i,o)}else this.inputObj.container.setAttribute(i,this.htmlAttributes[""+i])}},t.prototype.resetMaskedTextBox=function(){this.promptMask="",this.hiddenMask="",this.escapeMaskValue="",this.customRegExpCollec=[],this.undoCollec=[],this.redoCollec=[],this.promptChar.length>1&&(this.promptChar=this.promptChar[0]),Gv.call(this),Jv.call(this),(null===this.mask||""===this.mask&&void 0!==this.value)&&Nw.call(this,this.value);var e=sw.call(this,this.element);this.prevValue=e,this.value=e,this.isInitial||$v.call(this),Kv.call(this)},t.prototype.setMaskPlaceholder=function(e,t){(t||this.placeholder)&&(rs.setPlaceholder(this.placeholder,this.element),(this.element.value===this.promptMask&&e&&"Always"!==this.floatLabelType||this.element.value===this.promptMask&&"Never"===this.floatLabelType)&&Nw.call(this,""))},t.prototype.setWidth=function(e){if(!m(e))if("number"===typeof e)this.inputObj.container.style.width=b(e),this.element.style.width=b(e);else if("string"===typeof e){var t=e.match(/px|%|em/)?e:b(e);this.inputObj.container.style.width=t,this.element.style.width=t}},t.prototype.checkHtmlAttributes=function(e){for(var t=0,i=e?m(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["placeholder","disabled","value","readonly"];t<i.length;t++){var n=i[t];if(!m(this.element.getAttribute(n)))switch(n){case"placeholder":(m(this.maskOptions)||void 0===this.maskOptions.placeholder||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"disabled":if(m(this.maskOptions)||void 0===this.maskOptions.enabled||e){var o="disabled"!==this.element.getAttribute(n)&&""!==this.element.getAttribute(n)&&"true"!==this.element.getAttribute(n);this.setProperties({enabled:o},!e)}break;case"value":(m(this.maskOptions)||void 0===this.maskOptions.value||e)&&this.setProperties({value:this.element.value},!e);break;case"readonly":if(m(this.maskOptions)||void 0===this.maskOptions.readonly||e){var s="readonly"===this.element.getAttribute(n)||""===this.element.getAttribute(n)||"true"===this.element.getAttribute(n);this.setProperties({readonly:s},!e)}}}},t.prototype.createWrapper=function(){var e=this.cssClass;m(this.cssClass)||""===this.cssClass||(e=this.getValidClassList(this.cssClass)),this.inputObj=rs.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{enableRtl:this.enableRtl,cssClass:e,enabled:this.enabled,readonly:this.readonly,placeholder:this.placeholder,showClearButton:this.showClearButton}},this.createElement),this.inputObj.container.setAttribute("class","e-control-wrapper e-mask "+this.inputObj.container.getAttribute("class"))},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"value":Dw.call(this,this.value),this.placeholder&&this.setMaskPlaceholder(!1,!1);break;case"placeholder":this.setMaskPlaceholder(!0,!0);break;case"width":this.setWidth(e.width),rs.calculateWidth(this.element,this.inputObj.container);break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"enabled":rs.setEnabled(e.enabled,this.element,this.floatLabelType,this.inputObj.container);break;case"readonly":rs.setReadonly(e.readonly,this.element);break;case"enableRtl":rs.setEnableRtl(e.enableRtl,[this.inputObj.container]);break;case"customCharacters":this.customCharacters=e.customCharacters,this.resetMaskedTextBox();break;case"showClearButton":rs.setClearButton(e.showClearButton,this.element,this.inputObj,void 0,this.createElement),ew.call(this);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,rs.removeFloating(this.inputObj),rs.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement);break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkHtmlAttributes(!0);break;case"mask":var o=this.value;this.mask=e.mask,this.updateValue(o);break;case"promptChar":e.promptChar.length>1&&(e.promptChar=e.promptChar[0]),e.promptChar?this.promptChar=e.promptChar:this.promptChar="_";var s=this.element.value.replace(new RegExp("["+t.promptChar+"]","g"),this.promptChar);this.promptMask===this.element.value&&(s=this.promptMask.replace(new RegExp("["+t.promptChar+"]","g"),this.promptChar)),this.promptMask=this.promptMask.replace(new RegExp("["+t.promptChar+"]","g"),this.promptChar),this.undoCollec=this.redoCollec=[],Nw.call(this,s)}}this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange},t.prototype.updateValue=function(e){this.resetMaskedTextBox(),Dw.call(this,e)},t.prototype.getMaskedValue=function(){return ow.call(this,this.element)},t.prototype.focusIn=function(){document.activeElement!==this.element&&this.enabled&&(this.element.focus(),be([this.inputObj.container],[Ow]))},t.prototype.focusOut=function(){document.activeElement===this.element&&this.enabled&&(this.element.blur(),Se([this.inputObj.container],[Ow]))},t.prototype.destroy=function(){$v.call(this);for(var t=["aria-labelledby","role","autocomplete","aria-readonly","aria-disabled","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-invalid"],i=0;i<t.length;i++)this.element.removeAttribute(t[i]);this.element.classList.remove("e-input"),this.inputObj&&(this.inputObj.container.insertAdjacentElement("afterend",this.element),Ae(this.inputObj.container)),this.blurEventArgs=null,rs.destroy(),this.changeEventArgs=null,this.inputObj=null,e.prototype.destroy.call(this)},Pw([Ge(null)],t.prototype,"cssClass",void 0),Pw([Ge(null)],t.prototype,"width",void 0),Pw([Ge(null)],t.prototype,"placeholder",void 0),Pw([Ge("Never")],t.prototype,"floatLabelType",void 0),Pw([Ge({})],t.prototype,"htmlAttributes",void 0),Pw([Ge(!0)],t.prototype,"enabled",void 0),Pw([Ge(!1)],t.prototype,"readonly",void 0),Pw([Ge(!1)],t.prototype,"showClearButton",void 0),Pw([Ge(!1)],t.prototype,"enablePersistence",void 0),Pw([Ge(null)],t.prototype,"mask",void 0),Pw([Ge("_")],t.prototype,"promptChar",void 0),Pw([Ge(null)],t.prototype,"value",void 0),Pw([Ge(null)],t.prototype,"customCharacters",void 0),Pw([$e()],t.prototype,"created",void 0),Pw([$e()],t.prototype,"destroyed",void 0),Pw([$e()],t.prototype,"change",void 0),Pw([$e()],t.prototype,"focus",void 0),Pw([$e()],t.prototype,"blur",void 0),t=Pw([et],t)}(Dt),jw=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Rw=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},_w={EMAIL:new RegExp("^[A-Za-z0-9._%+-]{1,}@[A-Za-z0-9._%+-]{1,}([.]{1}[a-zA-Z0-9]{2,}|[.]{1}[a-zA-Z0-9]{2,4}[.]{1}[a-zA-Z0-9]{2,4})$"),URL:/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/m,DATE_ISO:new RegExp("^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$"),DIGITS:new RegExp("^[0-9]*$"),PHONE:new RegExp("^[+]?[0-9]{9,13}$"),CREDITCARD:new RegExp("^\\d{13,16}$")};!function(e){e[e.Message=0]="Message",e[e.Label=1]="Label"}(Fw||(Fw={}));var Hw=function(e){function t(t,i){var n=e.call(this,i,t)||this;if(n.validated=[],n.errorRules=[],n.allowSubmit=!1,n.required="required",n.infoElement=null,n.inputElement=null,n.selectQuery="input:not([type=reset]):not([type=button]), select, textarea",n.localyMessage={},n.defaultMessages={required:"This field is required.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateIso:"Please enter a valid date ( ISO ).",creditcard:"Please enter valid card number",number:"Please enter a valid number.",digits:"Please enter only digits.",maxLength:"Please enter no more than {0} characters.",minLength:"Please enter at least {0} characters.",rangeLength:"Please enter a value between {0} and {1} characters long.",range:"Please enter a value between {0} and {1}.",max:"Please enter a value less than or equal to {0}.",min:"Please enter a value greater than or equal to {0}.",regex:"Please enter a correct value.",tel:"Please enter a valid phone number.",pattern:"Please enter a correct pattern value.",equalTo:"Please enter the valid match text"},"undefined"===typeof n.rules&&(n.rules={}),n.l10n=new qt("formValidator",n.defaultMessages,n.locale),n.locale&&n.localeFunc(),Z.on("notifyExternalChange",n.afterLocalization,n),t="string"===typeof t?Ee(t,document):t,null!=n.element)return n.element.setAttribute("novalidate",""),n.inputElements=De(n.selectQuery,n.element),n.createHTML5Rules(),n.wireEvents(),n}var i;return jw(t,e),i=t,t.prototype.addRules=function(e,t){e&&(this.rules.hasOwnProperty(e)?f(this.rules[e],t,{}):this.rules[e]=t)},t.prototype.removeRules=function(e,t){if(e||t)if(this.rules[e]&&!t)delete this.rules[e];else{if(m(this.rules[e]&&t))return;for(var i=0;i<t.length;i++)delete this.rules[e][t[i]]}else this.rules={}},t.prototype.validate=function(e){var t=Object.keys(this.rules);if(e&&t.length)return this.validateRules(e),-1!==t.indexOf(e)&&0===this.errorRules.filter((function(t){return t.name===e})).length;this.errorRules=[];for(var i=0,n=t;i<n.length;i++){var o=n[i];this.validateRules(o)}return 0===this.errorRules.length},t.prototype.reset=function(){this.element.reset(),this.clearForm()},t.prototype.getInputElement=function(e){return this.inputElement=Ee('[name="'+e+'"]',this.element),this.inputElement},t.prototype.destroy=function(){this.reset(),this.unwireEvents(),this.rules={};for(var t=0,i=De("."+this.errorClass+", ."+this.validClass,this.element);t<i.length;t++){Ae(i[t])}e.prototype.destroy.call(this),Z.off("notifyExternalChange",this.afterLocalization)},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){if("locale"===n[i])this.localeFunc()}},t.prototype.localeFunc=function(){for(var e=0,t=Object.keys(this.defaultMessages);e<t.length;e++){var i=t[e];this.l10n.setLocale(this.locale);var n=this.l10n.getConstant(i);this.localyMessage[i]=n}},t.prototype.getModuleName=function(){return"formValidator"},t.prototype.afterLocalization=function(e){this.locale=e.locale,this.localeFunc()},t.prototype.refresh=function(){this.unwireEvents(),this.inputElements=De(this.selectQuery,this.element),this.wireEvents()},t.prototype.clearForm=function(){this.errorRules=[],this.validated=[];for(var e=0,t=De(this.selectQuery,this.element);e<t.length;e++){var i=t[e];i.removeAttribute("aria-invalid"),i.classList.remove(this.errorClass),i.name.length>0&&(this.getInputElement(i.name),this.getErrorElement(i.name),this.hideMessage(i.name)),i.classList.remove(this.validClass)}},t.prototype.createHTML5Rules=function(){for(var e=["required","validateHidden","regex","rangeLength","maxLength","minLength","dateIso","digits","pattern","data-val-required","type","data-validation","min","max","range","equalTo","data-val-minlength-min","data-val-equalto-other","data-val-maxlength-max","data-val-range-min","data-val-regex-pattern","data-val-length-max","data-val-creditcard","data-val-phone"],t=["hidden","email","url","date","number","tel"],i=0,n=this.inputElements;i<n.length;i++){for(var o=n[i],s={},a=0,r=e;a<r.length;a++){var l=r[a];if(null!==o.getAttribute(l))switch(l){case"required":this.defRule(o,s,l,o.required);break;case"data-validation":l=o.getAttribute(l),this.defRule(o,s,l,!0);break;case"type":-1!==t.indexOf(o.type)&&this.defRule(o,s,o.type,!0);break;case"rangeLength":case"range":this.defRule(o,s,l,JSON.parse(o.getAttribute(l)));break;case"equalTo":var d=o.getAttribute(l);this.defRule(o,s,l,d);break;default:"true"===o.getAttribute("data-val")?this.annotationRule(o,s,l,o.getAttribute(l)):this.defRule(o,s,l,o.getAttribute(l))}}0!==Object.keys(s).length&&this.addRules(o.name,s)}},t.prototype.annotationRule=function(e,t,i,n){var o=i.split("-"),s=["required","creditcard","phone","maxlength","minlength","range","regex","equalto"],a=o[o.length-1],r=o[o.length-2];if(-1!==s.indexOf(a))switch(a){case"required":this.defRule(e,t,"required",n);break;case"creditcard":this.defRule(e,t,"creditcard",n);break;case"phone":this.defRule(e,t,"tel",n)}else if(-1!==s.indexOf(r))switch(r){case"maxlength":this.defRule(e,t,"maxLength",n);break;case"minlength":this.defRule(e,t,"minLength",n);break;case"range":var l=e.getAttribute("data-val-range-min"),d=e.getAttribute("data-val-range-max");this.defRule(e,t,"range",[l,d]);break;case"equalto":var h=e.getAttribute(i).split(".");this.defRule(e,t,"equalTo",h[h.length-1]);break;case"regex":this.defRule(e,t,"regex",n)}},t.prototype.defRule=function(e,t,i,n){var o,s=e.getAttribute("data-"+i+"-message"),a=e.getAttribute("data-val-"+i);this.rules[e.name]&&"validateHidden"!==i&&"hidden"!==i&&(this.getInputElement(e.name),o=this.getErrorMessage(this.rules[e.name][i],i)),s?n=[n,s]:a?n=[n,a]:o&&(n=[n,o]),t[i]=n},t.prototype.wireEvents=function(){for(var e=0,t=this.inputElements;e<t.length;e++){var n=t[e];i.isCheckable(n)?ye.add(n,"click",this.clickHandler,this):"SELECT"===n.tagName?ye.add(n,"change",this.changeHandler,this):(ye.add(n,"focusout",this.focusOutHandler,this),ye.add(n,"keyup",this.keyUpHandler,this))}ye.add(this.element,"submit",this.submitHandler,this),ye.add(this.element,"reset",this.resetHandler,this)},t.prototype.unwireEvents=function(){for(var e=0,t=this.inputElements;e<t.length;e++){var i=t[e];ye.clearEvents(i)}ye.remove(this.element,"submit",this.submitHandler),ye.remove(this.element,"reset",this.resetHandler)},t.prototype.focusOutHandler=function(e){this.trigger("focusout",e);var t=e.target;this.rules[t.name]&&(this.rules[t.name][this.required]||t.value.length>0?this.validate(t.name):-1===this.validated.indexOf(t.name)&&this.validated.push(t.name))},t.prototype.keyUpHandler=function(e){this.trigger("keyup",e);var t=e.target;(9!==e.which||this.rules[t.name]&&(!this.rules[t.name]||this.rules[t.name][this.required]))&&-1!==this.validated.indexOf(t.name)&&this.rules[t.name]&&-1===[16,17,18,20,35,36,37,38,39,40,45,144,225].indexOf(e.which)&&this.validate(t.name)},t.prototype.clickHandler=function(e){this.trigger("click",e);var t=e.target;"submit"!==t.type?this.validate(t.name):null!==t.getAttribute("formnovalidate")&&(this.allowSubmit=!0)},t.prototype.changeHandler=function(e){this.trigger("change",e);var t=e.target;this.validate(t.name)},t.prototype.submitHandler=function(e){this.trigger("submit",e),this.allowSubmit||this.validate()?this.allowSubmit=!1:e.preventDefault()},t.prototype.resetHandler=function(){this.clearForm()},t.prototype.validateRules=function(e){if(this.rules[e]){var t=Object.keys(this.rules[e]),i=!1,n=!1,o=t.indexOf("validateHidden"),s=t.indexOf("hidden");if(this.getInputElement(e),-1!==s&&(i=!0),-1!==o&&(n=!0),!i||i&&n){-1!==o&&t.splice(o,1),-1!==s&&t.splice(s-1,1),this.getErrorElement(e);for(var a=0,r=t;a<r.length;a++){var l=r[a],d=this.getErrorMessage(this.rules[e][l],l),h={name:e,message:d},p={inputName:e,element:this.inputElement,message:d};if(!this.isValid(e,l)&&!this.inputElement.classList.contains(this.ignore)){this.removeErrorRules(e),this.errorRules.push(h),this.inputElement.setAttribute("aria-invalid","true"),this.inputElement.setAttribute("aria-describedby",this.inputElement.id+"-info"),this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass),this.infoElement?this.showMessage(h):this.createErrorElement(e,h.message,this.inputElement),p.errorElement=this.infoElement,p.status="failure",this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass),this.optionalValidationStatus(e,p),this.trigger("validationComplete",p),"required"===l&&this.inputElement.setAttribute("aria-required","true");break}this.hideMessage(e),p.status="success",this.trigger("validationComplete",p)}}}},t.prototype.optionalValidationStatus=function(e,t){this.rules[e][this.required]||this.inputElement.value.length||m(this.infoElement)||(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),t.status="",this.hideMessage(e))},t.prototype.isValid=function(e,t){var n=this.rules[e][t],o=n instanceof Array&&"string"===typeof n[1]?n[0]:n,s=this.rules[e][t],a={value:this.inputElement.value,param:o,element:this.inputElement,formElement:this.element};return this.trigger("validationBegin",a),!a.param&&"required"===t||(s&&"function"===typeof s[0]?s[0].call(this,{element:this.inputElement,value:this.inputElement.value}):i.isCheckable(this.inputElement)?"required"!==t||De('input[name="'+e+'"]:checked',this.element).length>0:i.checkValidator[t](a))},t.prototype.getErrorMessage=function(e,t){var i=this.inputElement.getAttribute("data-"+t+"-message")?this.inputElement.getAttribute("data-"+t+"-message"):e instanceof Array&&"string"===typeof e[1]?e[1]:0!==Object.keys(this.localyMessage).length?this.localyMessage[t]:this.defaultMessages[t],n=i.match(/{(\d)}/g);if(!m(n))for(var o=0;o<n.length;o++){var s=e instanceof Array?e[o]:e;i=i.replace(n[o],s)}return i},t.prototype.createErrorElement=function(e,t,i){var n=we(this.errorElement,{className:this.errorClass,innerHTML:t,attrs:{for:e}});if(this.errorOption===Fw.Message&&(n.classList.remove(this.errorClass),n.classList.add("e-message"),n=we(this.errorContainer,{className:this.errorClass,innerHTML:n.outerHTML})),n.id=this.inputElement.name+"-info",this.element.querySelector('[data-valmsg-for="'+i.id+'"]'))this.element.querySelector('[data-valmsg-for="'+i.id+'"]').appendChild(n);else if(!0===i.hasAttribute("data-msg-containerid")){Ee("#"+i.getAttribute("data-msg-containerid"),this.element).appendChild(n)}else null!=this.customPlacement?this.customPlacement.call(this,this.inputElement,n):this.inputElement.parentNode.insertBefore(n,this.inputElement.nextSibling);n.style.display="block",this.getErrorElement(e),this.validated.push(e),this.checkRequired(e)},t.prototype.getErrorElement=function(e){return this.infoElement=Ee(this.errorElement+"."+this.errorClass,this.inputElement.parentElement),this.infoElement||(this.infoElement=Ee(this.errorElement+"."+this.errorClass+'[for="'+e+'"]',this.element)),this.infoElement},t.prototype.removeErrorRules=function(e){for(var t=0;t<this.errorRules.length;t++){this.errorRules[t].name===e&&this.errorRules.splice(t,1)}},t.prototype.showMessage=function(e){this.infoElement.style.display="block",this.infoElement.innerHTML=e.message,this.checkRequired(e.name)},t.prototype.hideMessage=function(e){this.infoElement&&(this.infoElement.style.display="none",this.removeErrorRules(e),this.inputElement.classList.add(this.validClass),this.inputElement.classList.remove(this.errorClass),this.inputElement.setAttribute("aria-invalid","false"))},t.prototype.checkRequired=function(e){this.rules[e][this.required]||this.inputElement.value.length||m(this.infoElement)||(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),this.hideMessage(e))},t.isCheckable=function(e){var t=e.getAttribute("type");return t&&("checkbox"===t||"radio"===t||"submit"===t)},t.checkValidator={required:function(e){return isNaN(Date.parse(e.value))?e.value.toString().length>0:!isNaN(new Date(e.value).getTime())},email:function(e){return _w.EMAIL.test(e.value)},url:function(e){return _w.URL.test(e.value)},dateIso:function(e){return _w.DATE_ISO.test(e.value)},tel:function(e){return _w.PHONE.test(e.value)},creditcard:function(e){return _w.CREDITCARD.test(e.value)},number:function(e){return!isNaN(Number(e.value))&&-1===e.value.indexOf(" ")},digits:function(e){return _w.DIGITS.test(e.value)},maxLength:function(e){return e.value.length<=e.param},minLength:function(e){return e.value.length>=e.param},rangeLength:function(e){var t=e.param;return e.value.length>=t[0]&&e.value.length<=t[1]},range:function(e){var t=e.param;return!isNaN(Number(e.value))&&Number(e.value)>=t[0]&&Number(e.value)<=t[1]},date:function(e){return!isNaN(new Date(e.value).getTime())},max:function(e){return isNaN(Number(e.value))?new Date(e.value).getTime()<=new Date(JSON.parse(JSON.stringify(e.param))).getTime():+e.value<=e.param},min:function(e){if(isNaN(Number(e.value))){if(-1!==e.value.indexOf(",")){var t=e.value.replace(/,/g,"");return parseFloat(t)>=e.param}return new Date(e.value).getTime()>=new Date(JSON.parse(JSON.stringify(e.param))).getTime()}return+e.value>=e.param},regex:function(e){return new RegExp(e.param).test(e.value)},equalTo:function(e){var t=e.formElement.querySelector("#"+e.param);return e.param=t.value,e.param===e.value}},Rw([Ge("")],t.prototype,"locale",void 0),Rw([Ge("e-hidden")],t.prototype,"ignore",void 0),Rw([Ge()],t.prototype,"rules",void 0),Rw([Ge("e-error")],t.prototype,"errorClass",void 0),Rw([Ge("e-valid")],t.prototype,"validClass",void 0),Rw([Ge("label")],t.prototype,"errorElement",void 0),Rw([Ge("div")],t.prototype,"errorContainer",void 0),Rw([Ge(Fw.Label)],t.prototype,"errorOption",void 0),Rw([$e()],t.prototype,"focusout",void 0),Rw([$e()],t.prototype,"keyup",void 0),Rw([$e()],t.prototype,"click",void 0),Rw([$e()],t.prototype,"change",void 0),Rw([$e()],t.prototype,"submit",void 0),Rw([$e()],t.prototype,"validationBegin",void 0),Rw([$e()],t.prototype,"validationComplete",void 0),Rw([$e()],t.prototype,"customPlacement",void 0),t=i=Rw([et],t)}(ze),Ww="set-focus",Uw="e-inplaceeditor",qw="e-inplaceeditor-tip",Yw="e-editable-value-wrapper",Qw="e-editable-inline",Zw="e-editable-component",Xw="e-editable-error",Gw="e-editable-elements",Jw="e-editable-open",Kw="e-btn-save",$w="e-btn-cancel",eb="e-rte-spin-wrap",tb="e-control-overlay",ib="e-disable",nb="e-show",ob="e-hide",sb="e-rtl",ab="e-error",rb="e-loading",lb=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),db=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},hb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return lb(t,e),db([Ge("")],t.prototype,"title",void 0),db([Ge(null)],t.prototype,"model",void 0),t}(mt),pb={AutoComplete:"auto-complete",Color:"color-picker",ComboBox:"combo-box",DateRange:"date-range-picker",MultiSelect:"multi-select",RTE:"rte",Slider:"slider",Time:"time-picker"},cb={Click:{editAreaClick:"Click to edit"},DblClick:{editAreaDoubleClick:"Double click to edit"},EditIconClick:{editAreaClick:"Click to edit"}},ub=new ee;function fb(e,t,i){if(m(t)||""===t)return"";var n,o;switch(e){case"Color":var s=t;n=s.length>7?s.slice(0,-2):s;break;case"Date":o=i.format,n=ub.formatDate(t,{format:o,type:e,skeleton:S()?"d":"yMd"});break;case"DateRange":o=i.format;var a=t;n=ub.formatDate(a[0],{format:o,type:e,skeleton:S()?"d":"yMd"})+" - "+ub.formatDate(a[1],{format:o,type:e,skeleton:S()?"d":"yMd"});break;case"DateTime":n=m(o=i.format)||""===o?ub.formatDate(t,{format:o,type:e,skeleton:S()?"d":"yMd"})+" "+ub.formatDate(t,{format:o,type:e,skeleton:S()?"t":"hm"}):ub.formatDate(t,{format:o,type:e,skeleton:S()?"d":"yMd"});break;case"Time":o=i.format,n=ub.formatDate(t,{format:o,type:e,skeleton:S()?"t":"hm"});break;case"Numeric":o=m(i.format)?"n2":i.format;var r=m(t)?null:"number"===typeof t?t:ub.parseNumber(t);n=ub.formatNumber(r,{format:o});break;default:n=t.toString()}return n}function mb(e,t){if(m(t)||""===t)return t;if("Date"!==e&&"Time"!==e&&"DateTime"!==e||"string"!==typeof t){if("DateRange"===e)if("object"===typeof t&&"string"===typeof t[0])t=[new Date(t[0]),new Date(t[1])];else if("string"===typeof t){var i=t.split("-");t=[new Date(i[0]),new Date(i[1])]}}else t=new Date(t);return t}var gb=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),yb=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},vb=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.needsID=!0,n}return gb(t,e),t.prototype.initializeValue=function(){this.initRender=!0,this.isTemplate=!1,this.isVue=!1,this.isExtModule=!1,this.submitBtn=void 0,this.cancelBtn=void 0,this.isClearTarget=!1,this.btnElements=void 0,this.dataManager=void 0,this.oldValue=void 0,this.divComponents=["RTE","Slider"],this.clearComponents=["AutoComplete","Mask","Text"],this.dateType=["Date","DateTime","Time"],this.inputDataEle=["Date","DateTime","DateRange","Time","Numeric"],this.dropDownEle=["AutoComplete","ComboBox","DropDownList","MultiSelect"],this.moduleList=["AutoComplete","Color","ComboBox","DateRange","MultiSelect","RTE","Slider","Time"]},t.prototype.preRender=function(){this.initializeValue(),this.onScrollResizeHandler=this.scrollResizeHandler.bind(this),m(this.model)&&this.setProperties({model:{}},!0),this.titleEle=this.createElement("div",{className:"e-editable-title"}),!m(this.popupSettings.model)&&this.popupSettings.model.afterOpen&&(this.afterOpenEvent=this.popupSettings.model.afterOpen)},t.prototype.render=function(){m(this.element.getAttribute("tabindex"))&&this.element.setAttribute("tabindex","0"),this.checkIsTemplate(),this.disable(this.disabled),this.updateAdaptor(),this.appendValueElement(),this.updateValue(),"Never"===this.textOption?this.renderValue(this.checkValue(fb(this.type,this.value,this.model))):this.renderInitialValue(),this.wireEvents(),this.setRtl(this.enableRtl),this.enableEditor(this.enableEditMode,!0),this.setClass("add",this.cssClass),this.renderComplete()},t.prototype.setClass=function(e,t){if(!this.isEmpty(t))for(var i=t.split(" "),n=0;n<i.length;n++)""!==i[n].trim()&&("add"===e?be([this.element],[i[n]]):Se([this.element],[i[n]]))},t.prototype.appendValueElement=function(){this.valueWrap=this.createElement("div",{id:this.element.id+"_wrap",className:Yw}),S()||(this.element.innerHTML=""),this.valueEle=this.createElement("span",{className:"e-editable-value"}),this.editIcon=this.createElement("span",{className:"e-editable-overlay-icon e-icons",attrs:{title:this.getLocale({editIcon:"Click to edit"},"editIcon")}}),this.valueWrap.appendChild(this.valueEle),this.valueWrap.appendChild(this.editIcon),this.element.appendChild(this.valueWrap)},t.prototype.renderInitialValue=function(){!(["AutoComplete","ComboBox","DropDownList","MultiSelect"].indexOf(this.type)>-1)||m(this.value)||this.isEmpty(this.value.toString())||m(this.model.fields)||m(this.model.dataSource)?this.renderValue(this.checkValue(fb(this.type,this.value,this.model))):(this.renderValue(this.getLocale({loadingText:"Loading..."},"loadingText")),this.valueWrap.classList.add(rb),Nu({target:this.valueWrap,width:10}),qu(this.valueWrap),this.getInitFieldMapValue())},t.prototype.getInitFieldMapValue=function(){var e=this,t=this.model,i=t.fields.text,n=t.fields.value,o=m(t.query)?new Bl:t.query;t.dataSource instanceof Fl?t.dataSource.executeQuery(this.getInitQuery(t,o)).then((function(t){e.updateInitValue(i,n,t.result)})):this.updateInitValue(i,n,new Fl(t.dataSource).executeLocal(this.getInitQuery(t,o)))},t.prototype.getInitQuery=function(e,t){var i,n=e.fields.value,o=this.value;if("MultiSelect"!==this.type||"object"!==typeof this.value)i=new zl(n,"equal",this.value);else for(var s=0,a=0,r=o;a<r.length;a++){var l=r[a];i=0===s?i=new zl(n,"equal",l):i.or(n,"equal",l),s++}return t.where(i)},t.prototype.updateInitValue=function(e,t,i){if(!(i.length<=0)){if(1===i.length)this.valueEle.innerHTML=this.checkValue(l(m(e)?t:e,i[0]));else{for(var n=[],o=0,s=i;o<s.length;o++){var a=s[o];n.push(l(m(e)?t:e,a))}this.valueEle.innerHTML=this.checkValue(n.toString())}Qu(this.valueWrap),this.valueWrap.classList.remove(rb)}},t.prototype.renderValue=function(e){this.enableHtmlSanitizer&&"RTE"!==this.type&&"MultiSelect"!==this.type?this.valueEle.innerText=e:this.valueEle.innerHTML=this.enableHtmlParse?e:function(e){for(var t=[],i=e.length-1;i>=0;i--)t.unshift(["&#",e[i].charCodeAt(0),";"].join(""));return t.join("")}(e),"Color"===this.type&&Le(this.valueEle,{color:e}),"Inline"===this.mode&&this.isEditorOpen()&&Se([this.valueWrap],[ob])},t.prototype.isEditorOpen=function(){return!(this.isVue&&(this.enableEditMode||!(m(this.valueWrap)||this.valueWrap.classList.contains(ob)||this.valueWrap.classList.contains("e-tooltip"))))},t.prototype.renderEditor=function(){if(this.prevValue=this.value,this.beginEditArgs={mode:this.mode,cancelFocus:!1,cancel:!1},this.trigger("beginEdit",this.beginEditArgs),!this.beginEditArgs.cancel){var e=void 0,t=Ee("."+Yw,this.element);if("EditIconClick"!==this.editableOn&&t.parentElement.removeAttribute("title"),!this.valueWrap.classList.contains(Jw)){if("Inline"===this.mode)be([this.valueWrap],[ob]),this.inlineWrapper=this.createElement("div",{className:Qw}),this.element.appendChild(this.inlineWrapper),["AutoComplete","ComboBox","DropDownList","MultiSelect"].indexOf(this.type)>-1?this.checkRemoteData(this.model):this.renderAndOpen();else{!m(this.popupSettings.model)&&this.popupSettings.model.afterOpen&&(this.popupSettings.model.afterOpen=this.afterOpenHandler.bind(this));var i=this.createElement("div",{className:"e-editable-popup"});this.isEmpty(this.popupSettings.title)||(this.titleEle.innerHTML=this.popupSettings.title,i.appendChild(this.titleEle)),e={content:i,opensOn:"Custom",enableRtl:this.enableRtl,cssClass:qw,afterOpen:this.afterOpenHandler.bind(this)},i.appendChild(this.renderControl(document.body)),f(e,this.popupSettings.model,e,!0),this.tipObj=new Xd(e),this.tipObj.appendTo(t),this.tipObj.open(t)}"Ignore"!==this.actionOnBlur&&this.wireDocEvent(),be([this.valueWrap],[Jw]),this.setProperties({enableEditMode:!0},!0),this.isReact&&this.renderReactTemplates()}}},t.prototype.renderAndOpen=function(){this.renderControl(this.inlineWrapper),this.afterOpenHandler(null)},t.prototype.checkRemoteData=function(e){var t=this;e.dataSource instanceof Fl?(e.dataBound=function(){t.afterOpenHandler(null)},this.renderControl(this.inlineWrapper),(m(e.value)&&m(this.value)||e.value===this.value&&!m(e.value)&&0===e.value.length)&&this.showDropDownPopup()):this.renderAndOpen()},t.prototype.showDropDownPopup=function(){"DropDownList"===this.type?(this.model.allowFiltering||this.componentObj.focusIn(),this.componentObj.showPopup()):this.isExtModule&&this.notify("MultiSelect"===this.type?Ww:"show-popup",{})},t.prototype.setAttribute=function(e,t){var i=this.name&&0!==this.name.length?this.name:this.element.id;t.forEach((function(t){e.setAttribute(t,"id"===t?i+"_editor":i)}))},t.prototype.renderControl=function(e){var t;this.containerEle=this.createElement("div",{className:"e-editable-wrapper"}),this.loader=this.createElement("div",{className:"e-editable-loading"}),this.formEle=this.createElement("form",{className:"e-editable-form"});var i=this.createElement("div",{className:"e-component-group"}),n=this.createElement("div",{className:Zw});return e.appendChild(this.containerEle),this.loadSpinner(),this.containerEle.appendChild(this.formEle),this.formEle.appendChild(i),this.isTemplate?this.appendTemplate(n,this.template):(Array.prototype.indexOf.call(this.divComponents,this.type)>-1?(t=this.createElement("div"),this.setAttribute(t,["id"])):(t=this.createElement("input"),this.setAttribute(t,["id","name"])),this.componentRoot=t,n.appendChild(t),n.appendChild(this.loader)),i.appendChild(n),i.appendChild(this.createElement("div",{className:Xw})),this.appendButtons(this.formEle),this.isTemplate||this.renderComponent(t),this.removeSpinner(),this.submitOnEnter&&this.wireEditorKeyDownEvent(this.containerEle),this.containerEle},t.prototype.appendButtons=function(e){this.showButtons&&e&&(this.btnElements=this.renderButtons(),e.appendChild(this.btnElements),this.wireBtnEvents())},t.prototype.renderButtons=function(){var e=this.createElement("div",{className:"e-editable-action-buttons"}),t=m(this.saveButton.content)||0===this.saveButton.content.length?"":" e-primary";return this.submitBtn=this.createButtons({constant:"save",type:"submit",container:e,title:{save:"Save"},model:this.saveButton,className:Kw+t}),this.cancelBtn=this.createButtons({type:"button",constant:"cancel",title:{cancel:"Cancel"},container:e,model:this.cancelButton,className:$w}),e},t.prototype.createButtons=function(e){var t=void 0;if(Object.keys(e.model).length>0){var i=this.createElement("button",{className:e.className,attrs:{type:e.type,title:"save"==e.constant?m(this.saveButton.content)?this.getLocale(e.title,e.constant):this.saveButton.content:m(this.cancelButton.content)?this.getLocale(e.title,e.constant):this.cancelButton.content}});e.container.appendChild(i),t=new Qi(e.model,i)}return t},t.prototype.renderComponent=function(e){var t;if(this.isExtModule=Array.prototype.indexOf.call(this.moduleList,this.type)>-1,t=m(this.model.cssClass)?Gw:this.model.cssClass.indexOf(Gw)<0?""===this.model.cssClass?Gw:this.model.cssClass+" "+Gw:this.model.cssClass,f(this.model,this.model,{cssClass:t,enableRtl:this.enableRtl,locale:this.locale,change:this.changeHandler.bind(this)}),m(this.value)||this.updateModelValue(!1),this.isExtModule)this.notify("render",{module:pb[this.type],target:e,type:this.type});else{switch(m(this.model.showClearButton)&&!S()&&(this.model.showClearButton=!0),this.type){case"Date":this.componentObj=new ov(this.model);break;case"DateTime":this.componentObj=new Wv(this.model);break;case"DropDownList":this.componentObj=new Sf(this.model);break;case"Mask":this.componentObj=new zw(this.model);break;case"Numeric":if(this.model.value)new RegExp("[eE][-+]?([0-9]+)").test(this.model.value)?this.model.value=this.model.value:this.model.value=this.model.value.toString().replace(/[`~!@#$%^&*()_|\=?;:'",<>\{\}\[\]\\\/]/gi,"");this.componentObj=new Eh(this.model);break;case"Text":this.componentObj=new Vs(this.model)}this.componentObj.appendTo(e)}},t.prototype.updateAdaptor=function(){switch(this.adaptor){case"UrlAdaptor":this.dataAdaptor=new Tl;break;case"WebApiAdaptor":this.dataAdaptor=new Vl;break;case"ODataV4Adaptor":this.dataAdaptor=new kl}},t.prototype.loadSpinner=function(e){be([this.loader],[nb]),"validate"!==e||"RTE"!==this.type&&"Color"!==this.type&&"Slider"!==this.type?this.spinObj={target:this.loader,width:ge.isDevice?"16px":"14px"}:(be([this.loader],[eb]),be([this.getEditElement()],[tb]),this.spinObj={target:this.loader}),this.formEle&&be([this.formEle],[rb]),this.btnElements&&be([this.btnElements],[ob]),Le(this.loader,{width:"100%"}),Nu(this.spinObj),qu(this.spinObj.target)},t.prototype.removeSpinner=function(e){this.loader.removeAttribute("style"),Qu(this.spinObj.target),Ae(this.spinObj.target.firstChild),"submit"!==e||"RTE"!==this.type&&"Color"!==this.type&&"Slider"!==this.type||(Se([this.loader],[eb]),Se([this.getEditElement()],[tb])),this.formEle&&Se([this.formEle],[rb]),this.btnElements&&Se([this.btnElements],[ob]),Se([this.loader],[nb])},t.prototype.getEditElement=function(){return Ee("."+Gw,this.formEle)},t.prototype.getLocale=function(e,t){return new qt("inplace-editor",e,this.locale).getConstant(t)},t.prototype.checkValue=function(e){return this.isEmpty(e)?this.emptyText:e},t.prototype.extendModelValue=function(e){var t=this.model;f(t,{value:e}),this.setProperties({model:t},!0)},t.prototype.updateValue=function(){this.oldValue=this.value,this.enableHtmlSanitizer&&"string"===typeof this.value&&(this.oldValue=this.sanitizeHelper(this.value)),m(this.value)||(this.setProperties({value:mb(this.type,this.oldValue)},!0),this.extendModelValue(mb(this.type,this.oldValue)))},t.prototype.updateModelValue=function(e){"MultiSelect"!==this.type||this.isEmpty(this.value)?this.model.value=e?this.oldValue:this.value:this.model.value=e?this.oldValue.slice():this.value.slice()},t.prototype.setValue=function(){this.isExtModule?this.notify("update",{type:this.type}):this.componentObj&&("Numeric"===this.type&&null===this.componentObj.value&&this.componentObj.setProperties({value:null},!0),this.setProperties({value:this.componentObj.value},!0),this.extendModelValue(this.componentObj.value))},t.prototype.getDropDownsValue=function(e){var t;return Array.prototype.indexOf.call(this.dropDownEle,this.type)>-1&&"MultiSelect"!==this.type?t=e?Ee(".e-"+this.type.toLocaleLowerCase(),this.containerEle).value:this.value.toString():"MultiSelect"===this.type&&(this.notify("access-value",{type:this.type}),t=e?this.printValue:this.value.join()),t},t.prototype.getSendValue=function(){return this.isEmpty(this.value)?"":Array.prototype.indexOf.call(this.dropDownEle,this.type)>-1?this.getDropDownsValue(!1):Array.prototype.indexOf.call(this.dateType,this.type)>-1?this.value.toISOString():"DateRange"===this.type?this.value[0].toISOString()+" - "+this.value[1].toISOString():this.value.toString()},t.prototype.getRenderValue=function(){return"Mask"===this.type&&0!==this.componentObj.value.length?this.componentObj.getMaskedValue():Array.prototype.indexOf.call(this.inputDataEle,this.type)>-1?this.componentRoot.value:Array.prototype.indexOf.call(this.dropDownEle,this.type)>-1?this.getDropDownsValue(!0):fb(this.type,this.value,this.model)},t.prototype.setRtl=function(e){e?be([this.element],[sb]):Se([this.element],[sb])},t.prototype.setFocus=function(){this.isTemplate||(this.isExtModule?this.notify(Ww,{}):this.componentObj.element.focus())},t.prototype.removeEditor=function(e){Object.keys(window);if(S()&&!this.isStringTemplate&&function(e,t,i){var n=document.getElementById(e);if(n)for(var o=n.getElementsByClassName("blazor-inner-template"),s=0;s<o.length;s++){var a=" ";a=m(i)?o[parseInt(s.toString(),10)].getAttribute("data-templateId"):o[parseInt(i.toString(),10)].getAttribute("data-templateId");var r=document.getElementById(a);if(r)for(var l=r.childNodes.length,d=0;d<l;d++)m(i)?o[parseInt(s.toString(),10)].appendChild(r.childNodes[0]):(o[parseInt(i.toString(),10)].appendChild(r.childNodes[0]),s=o.length)}}(this.element.id+"template"),this.tipObj&&this.formEle&&Fe(this.formEle,"."+qw).classList.add(ob),this.unWireDocEvent(),this.destroyComponents(),this.formEle=void 0,m(Ee("."+Qw,this.element))?this.tipObj&&("MultiSelect"===this.type&&(ye.remove(this.containerEle,"mousedown",this.popMouseDown),ye.remove(this.containerEle,"click",this.popClickHandler)),this.tipObj.close(),this.tipObj.destroy(),this.tipObj=void 0):(Ae(this.inlineWrapper),this.inlineWrapper=void 0),this.containerEle=void 0,Se([this.valueWrap],[Jw,ob]),e||this.setProperties({enableEditMode:!1},!0),"EditIconClick"!==this.editableOn){var t="DblClick"===this.editableOn?"editAreaDoubleClick":"editAreaClick";m(this.valueWrap.parentElement)||this.valueWrap.parentElement.setAttribute("title",this.getLocale(cb[this.editableOn],t))}this.isReact&&this.clearTemplate()},t.prototype.destroyComponents=function(){this.showButtons&&this.destroyButtons(),this.isExtModule?this.notify("destroy-modules",{}):(this.templateEle&&(document.body.appendChild(this.templateEle),this.templateEle.style.display="none",this.templateEle=void 0),m(this.componentObj)||(this.componentObj.destroy(),this.componentObj=void 0)),this.formValidate&&(this.formValidate=void 0),this.submitOnEnter&&this.containerEle&&this.unWireEditorKeyDownEvent(this.containerEle)},t.prototype.destroyButtons=function(){m(this.submitBtn)||(ye.remove(this.submitBtn.element,"mousedown",this.submitHandler),ye.remove(this.submitBtn.element,"click",this.submitPrevent),ye.remove(this.submitBtn.element,"keydown",this.btnKeyDownHandler),this.submitBtn.destroy(),this.submitBtn=void 0),m(this.cancelBtn)||(ye.remove(this.cancelBtn.element,"mouseup",this.cancelBtnClick),ye.remove(this.cancelBtn.element,"keydown",this.btnKeyDownHandler),this.cancelBtn.destroy(),this.cancelBtn=void 0),this.btnElements=void 0},t.prototype.getQuery=function(e){var t=new Bl;return Object.keys(e).forEach((function(i){t.addParams(i,e[i])})),t},t.prototype.sendValue=function(){var e=this,t={data:{name:this.name,primaryKey:this.primaryKey,value:this.getSendValue()}};this.trigger("actionBegin",t,(function(t){if(t.cancel)e.removeSpinner("submit"),"Popup"===e.mode&&e.updateArrow();else{if(e.isEmpty(e.url)||e.isEmpty(e.primaryKey)||!e.initRender&&(e.initRender||e.prevValue===e.value)){var i={data:{},value:t.data.value};e.triggerSuccess(i)}else{if(e.dataManager=new Fl({url:e.url,adaptor:e.dataAdaptor}),"UrlAdaptor"===e.adaptor)e.dataManager.executeQuery(e.getQuery(t.data),e.successHandler.bind(e),e.failureHandler.bind(e));else e.dataManager.insert(t.data).then((function(t){return e.successHandler(t)})).catch((function(t){return e.failureHandler(t)}))}e.dataManager=void 0}}))},t.prototype.isEmpty=function(e){return!(!m(e)&&0!==e.length)},t.prototype.checkIsTemplate=function(){this.isTemplate=!m(this.template)&&""!==this.template},t.prototype.templateCompile=function(e,t){var i;Object.keys(window);"string"===typeof t&&(t=t.trim());var n,o,s,a,r,l=Mi(t);if(!m(l)){var d=!(S()&&!this.isStringTemplate&&0===t.indexOf("<div>Blazor"))||this.isStringTemplate;i=l({},this,"template",this.element.id+"template",d)}!m(l)&&i.length>0&&([].slice.call(i).forEach((function(t){e.appendChild(t)})),S()&&!this.isStringTemplate&&0===t.indexOf("<div>Blazor")&&(n=this.element.id+"template",o="Template",s=this,S()&&(window.sfBlazor.updateTemplate(o,Ci[""+n],n,s,r),!1!==a&&(Ci[""+n]=[]))))},t.prototype.sanitizeHelper=function(e){if(this.enableHtmlSanitizer){var t=Vi.beforeSanitize();f(t,t,{cancel:!1,helper:null}),this.trigger("beforeSanitizeHtml",t,(function(i){t.cancel&&!m(t.helper)?e=t.helper(e):t.cancel||(e=Vi.serializeValue(t,e))}))}return e},t.prototype.appendTemplate=function(e,t){t="string"===typeof t?this.sanitizeHelper(t):t,this.setProperties({template:t},!0),"string"===typeof t||m(t.innerHTML)?("."===t[0]||"#"===t[0])&&document.querySelectorAll(t).length?(this.templateEle=document.querySelector(t),e.appendChild(this.templateEle),this.templateEle.style.display=""):this.templateCompile(e,t):(this.templateEle=t,e.appendChild(this.templateEle))},t.prototype.disable=function(e){e?be([this.element],[ib]):Se([this.element],[ib])},t.prototype.enableEditor=function(e,t){t&&!e||(e?this.renderEditor():this.cancelHandler("cancel"))},t.prototype.checkValidation=function(e,t){var i,n=this;if(this.validationRules){var o=Object.keys(this.validationRules),s=Object.keys(this.validationRules[o[0]]).length;s="validateHidden"in this.validationRules[o[0]]?s-1:s;var a=0;this.formValidate=new Hw(this.formEle,{rules:this.validationRules,validationBegin:function(e){if("RTE"===n.type){var t=document.createElement("div");t.innerHTML=e.value,e.value=t.innerText}},validationComplete:function(o){a+=1,i={errorMessage:o.message,data:{name:n.name,primaryKey:n.primaryKey,value:n.checkValue(n.getSendValue())}},n.trigger("validating",i,(function(i){"failure"===o.status?(o.errorElement.innerText=i.errorMessage,n.toggleErrorClass(!0)):n.toggleErrorClass(!1),m(e)||!e||s!==a&&"failure"!==o.status||(e=!1,n.afterValidation(t),a=0)}))},customPlacement:function(e,t){n.formEle&&Ee("."+Xw,n.formEle).appendChild(t)}}),a=0,this.formValidate.validate()}else""!==this.template?(i={errorMessage:"",data:{name:this.name,primaryKey:this.primaryKey,value:this.checkValue(this.getSendValue())}},this.trigger("validating",i,(function(e){e.errorMessage?(Ee("."+Xw,n.formEle).innerHTML=e.errorMessage,n.toggleErrorClass(!0)):n.toggleErrorClass(!1),n.afterValidation(t)}))):this.afterValidation(t)},t.prototype.afterValidation=function(e){!this.formEle.classList.contains(ab)&&e&&(this.loadSpinner("validate"),"Popup"===this.mode&&this.updateArrow(),this.sendValue())},t.prototype.toggleErrorClass=function(e){if(!m(this.formEle)){var t,i,n,o=Ee(".e-input-group",this.formEle);t=[this.formEle,o],i=ab,n=e?"add":"remove",[].slice.call(t).forEach((function(e){e&&("add"===n?be([e],[i]):Se([e],[i]))}))}},t.prototype.updateArrow=function(){var e=this.tipObj.tipPointerPosition;this.tipObj.tipPointerPosition="Middle"===e?"Auto":"Middle",this.tipObj.tipPointerPosition=e,this.tipObj.dataBind()},t.prototype.triggerSuccess=function(e){var t=this,i=e.value;this.trigger("actionSuccess",e,(function(e){t.oldValue=i,t.removeSpinner("submit"),e.cancel||t.renderValue(t.checkValue(e.value!==i?e.value:t.getRenderValue())),e.cancel&&"Inline"===t.mode&&Se([t.valueWrap],[ob]),t.removeEditor()}))},t.prototype.triggerEndEdit=function(e){var t=this,i={cancel:!1,mode:this.mode,action:e};this.trigger("endEdit",i,(function(e){e.cancel||(t.formEle&&t.formEle.classList.contains(ab)&&(t.updateModelValue(!0),t.setProperties({value:t.oldValue},!0)),t.removeEditor())}))},t.prototype.wireEvents=function(){this.wireEditEvent(this.editableOn),ye.add(this.editIcon,"click",this.clickHandler,this),ye.add(this.element,"keydown",this.valueKeyDownHandler,this),document.addEventListener("scroll",this.onScrollResizeHandler),window.addEventListener("resize",this.onScrollResizeHandler),Array.prototype.indexOf.call(this.clearComponents,this.type)>-1&&ye.add(this.element,"mousedown",this.mouseDownHandler,this)},t.prototype.wireDocEvent=function(){ye.add(document,"mousedown",this.docClickHandler,this)},t.prototype.wireEditEvent=function(e){if("EditIconClick"!==e){var t="Click"===e?"editAreaClick":"editAreaDoubleClick";this.element.setAttribute("title",this.getLocale(cb[e],t)),ge.isDevice&&ge.isIos&&"DblClick"===e?this.touchModule=new Gt(this.valueWrap,{tap:this.doubleTapHandler.bind(this)}):ye.add(this.valueWrap,e.toLowerCase(),this.clickHandler,this)}},t.prototype.wireEditorKeyDownEvent=function(e){ye.add(e,"keydown",this.enterKeyDownHandler,this)},t.prototype.wireBtnEvents=function(){m(this.submitBtn)||(ye.add(this.submitBtn.element,"mousedown",this.submitHandler,this),ye.add(this.submitBtn.element,"click",this.submitPrevent,this),ye.add(this.submitBtn.element,"keydown",this.btnKeyDownHandler,this)),m(this.cancelBtn)||(ye.add(this.cancelBtn.element,"mouseup",this.cancelBtnClick,this),ye.add(this.cancelBtn.element,"keydown",this.btnKeyDownHandler,this))},t.prototype.cancelBtnClick=function(e){this.cancelHandler("cancel"),this.trigger("cancelClick",e)},t.prototype.unWireEvents=function(){this.unWireEditEvent(this.editableOn),ye.remove(this.editIcon,"click",this.clickHandler),document.removeEventListener("scroll",this.onScrollResizeHandler),window.removeEventListener("resize",this.onScrollResizeHandler),ye.remove(this.element,"keydown",this.valueKeyDownHandler),Array.prototype.indexOf.call(this.clearComponents,this.type)>-1&&ye.remove(this.element,"mousedown",this.mouseDownHandler)},t.prototype.unWireDocEvent=function(){ye.remove(document,"mousedown",this.docClickHandler)},t.prototype.unWireEditEvent=function(e){"EditIconClick"!==e&&(this.element.removeAttribute("title"),ge.isDevice&&ge.isIos&&"DblClick"===e?(this.touchModule.destroy(),this.touchModule=void 0):ye.remove(this.valueWrap,e.toLowerCase(),this.clickHandler))},t.prototype.unWireEditorKeyDownEvent=function(e){ye.remove(e,"keydown",this.enterKeyDownHandler)},t.prototype.submitPrevent=function(e){e.preventDefault()},t.prototype.btnKeyDownHandler=function(e){var t=e.target;(13===e.keyCode&&13===e.which||32===e.keyCode&&32===e.which)&&(t.classList.contains(Kw)?this.save():t.classList.contains($w)&&this.cancelHandler("cancel")),9!==e.keyCode||!1!==e.shiftKey||!m(e.target.nextElementSibling)&&"BUTTON"===e.target.nextElementSibling.tagName||("Submit"===this.actionOnBlur?this.save():"Cancel"===this.actionOnBlur&&this.cancelHandler("cancel"))},t.prototype.afterOpenHandler=function(e){"Popup"===this.mode&&"MultiSelect"===this.type&&(ye.add(this.containerEle,"mousedown",this.popMouseDown,this),ye.add(this.containerEle,"click",this.popClickHandler,this)),"Popup"!==this.mode||this.isEmpty(this.titleEle.innerHTML)||e.element.classList.add("e-editable-tip-title"),"RTE"===this.type?(this.rteModule.refresh(),this.setAttribute(Ee(".e-richtexteditor textarea",this.containerEle),["name"])):"Slider"===this.type&&(this.sliderModule.refresh(),this.setAttribute(Ee(".e-slider-input",this.containerEle),["name"])),this.beginEditArgs.cancelFocus||("Inline"===this.mode&&["AutoComplete","ComboBox","DropDownList","MultiSelect"].indexOf(this.type)>-1&&this.model.dataSource instanceof Fl?this.showDropDownPopup():this.setFocus()),this.afterOpenEvent&&(this.tipObj.setProperties({afterOpen:this.afterOpenEvent},!0),this.tipObj.trigger("afterOpen",e))},t.prototype.popMouseDown=function(e){var t=e.target.classList;t.contains("e-chips-close")&&!t.contains("e-close-hooker")&&this.updateArrow()},t.prototype.doubleTapHandler=function(e){e.tapCount>1&&this.clickHandler(e.originalEvent)},t.prototype.clickHandler=function(e){"EditIconClick"!==this.editableOn&&e.stopPropagation(),this.renderEditor()},t.prototype.submitHandler=function(e){e.preventDefault(),this.save(),this.trigger("submitClick",e)},t.prototype.cancelHandler=function(e){this.triggerEndEdit(e)},t.prototype.popClickHandler=function(e){var t=Ee("."+Yw,this.element);e.target.classList.contains("e-chips-close")&&this.tipObj.refresh(t)},t.prototype.successHandler=function(e){this.initRender=!1;var t={data:e,value:this.getSendValue()};this.triggerSuccess(t)},t.prototype.failureHandler=function(e){var t=this,i={data:e,value:this.getSendValue()};this.trigger("actionFailure",i,(function(e){t.removeSpinner("submit"),"Popup"===t.mode&&t.updateArrow()}))},t.prototype.enterKeyDownHandler=function(e){Fe(e.target,"."+Zw+" .e-richtexteditor")||e.currentTarget.getElementsByTagName("textarea")[0]||(13===e.keyCode&&13===e.which&&Fe(e.target,"."+Zw)?(this.save(),this.trigger("submitClick",e)):27===e.keyCode&&27===e.which&&this.cancelHandler("cancel"))},t.prototype.valueKeyDownHandler=function(e){9===e.keyCode&&!0===e.shiftKey&&"BUTTON"!==e.target.tagName&&("Submit"===this.actionOnBlur?this.save():"Cancel"===this.actionOnBlur&&this.cancelHandler("cancel")),13!==e.keyCode||13!==e.which||!e.target.classList.contains(Uw)||this.valueWrap.classList.contains(Jw)||this.element.classList.contains(ib)||(e.preventDefault(),this.renderEditor())},t.prototype.mouseDownHandler=function(e){e.target.classList.contains("e-clear-icon")&&(this.isClearTarget=!0)},t.prototype.scrollResizeHandler=function(){"Popup"===this.mode&&this.tipObj&&!ge.isDevice&&this.triggerEndEdit("cancel")},t.prototype.docClickHandler=function(e){var t=e.target;if(this.isClearTarget)this.isClearTarget=!1;else{var i=Fe(t,"."+Uw),n=Fe(t,"."+qw),o=Fe(t,"."+Gw),s=Fe(t,".e-rte-elements");!m(i)&&i.isEqualNode(this.element)||!m(n)&&this.tipObj&&n.id.indexOf(this.valueWrap.id)>-1||!m(o)||!m(s)||t.classList.contains("e-chips-close")||("Submit"===this.actionOnBlur?this.save():"Cancel"===this.actionOnBlur&&this.cancelHandler("cancel"))}},t.prototype.changeHandler=function(e){var t={previousValue:void 0===this.compPrevValue?this.value:this.compPrevValue,value:e.value};"AutoComplete"!==this.type&&"ComboBox"!==this.type&&"DropDownList"!==this.type||(t.itemData=e.itemData,t.previousItemData=e.previousItemData),this.compPrevValue=t.value,this.trigger("change",t)},t.prototype.validate=function(){this.checkValidation(!0,!1)},t.prototype.save=function(){var e=this;if(this.formEle){this.element.focus(),this.editEle=Ee("."+Zw,this.formEle);Ee("."+ab,this.editEle),this.isTemplate||this.setValue();var t={cancel:!1,mode:this.mode,action:"submit"};this.trigger("endEdit",t,(function(t){t.cancel||e.checkValidation(!0,!0)}))}},t.prototype.destroy=function(){var t=this;for(this.removeEditor(S()),this.isExtModule&&this.notify("destroy",{}),this.unWireEvents(),[ib,sb].forEach((function(e){Se([t.element],[e])}));this.element.firstElementChild;)this.element.removeChild(this.element.firstElementChild);S()&&this.isServerRendered||e.prototype.destroy.call(this),this.isReact&&this.clearTemplate()},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.requiredModules=function(){var e=[];return e.push({member:pb[this.type],args:[this]}),e},t.prototype.getModuleName=function(){return"inplaceeditor"},t.prototype.onPropertyChanged=function(e,t){if(!this.validationRules||!(!m(this.element.querySelectorAll("."+ab))&&this.element.querySelectorAll("."+ab).length>0)){if(this.isEditorOpen()){var i="enableEditMode"in e;i&&t.enableEditMode&&!e.enableEditMode||!i&&this.enableEditMode?this.triggerEndEdit("cancel"):this.removeEditor()}for(var n=0,o=Object.keys(e);n<o.length;n++){switch(o[n]){case"showButtons":e.showButtons?this.appendButtons(this.formEle):this.destroyButtons();break;case"value":this.updateValue(),"Never"===this.textOption?this.renderValue(this.checkValue(fb(this.type,this.value,this.model))):this.renderInitialValue();break;case"emptyText":"Never"===this.textOption?this.renderValue(this.checkValue(fb(this.type,this.value,this.model))):this.renderInitialValue();break;case"template":this.checkIsTemplate();break;case"disabled":this.disable(e.disabled);break;case"enableRtl":this.setRtl(e.enableRtl);break;case"cssClass":this.setClass("remove",t.cssClass),this.setClass("add",e.cssClass);break;case"mode":this.enableEditor(this.enableEditMode);break;case"enableEditMode":this.enableEditor(e.enableEditMode);break;case"editableOn":this.unWireEditEvent(t.editableOn),"EditIconClick"!==e.editableOn&&this.wireEditEvent(e.editableOn)}}}},yb([Ge("")],t.prototype,"name",void 0),yb([Ge(null)],t.prototype,"value",void 0),yb([Ge("")],t.prototype,"template",void 0),yb([Ge(!0)],t.prototype,"enableHtmlSanitizer",void 0),yb([Ge(!0)],t.prototype,"enableHtmlParse",void 0),yb([Ge("")],t.prototype,"cssClass",void 0),yb([Ge("")],t.prototype,"primaryKey",void 0),yb([Ge("Empty")],t.prototype,"emptyText",void 0),yb([Ge("")],t.prototype,"url",void 0),yb([Ge("Popup")],t.prototype,"mode",void 0),yb([Ge("UrlAdaptor")],t.prototype,"adaptor",void 0),yb([Ge("Text")],t.prototype,"type",void 0),yb([Ge("Click")],t.prototype,"editableOn",void 0),yb([Ge("Never")],t.prototype,"textOption",void 0),yb([Ge("Submit")],t.prototype,"actionOnBlur",void 0),yb([Ge(!1)],t.prototype,"enablePersistence",void 0),yb([Ge(!1)],t.prototype,"disabled",void 0),yb([Ge(!0)],t.prototype,"showButtons",void 0),yb([Ge(!1)],t.prototype,"enableEditMode",void 0),yb([Ge(!0)],t.prototype,"submitOnEnter",void 0),yb([Je({},hb)],t.prototype,"popupSettings",void 0),yb([Ge(null)],t.prototype,"model",void 0),yb([Ge({iconCss:"e-icons e-save-icon"})],t.prototype,"saveButton",void 0),yb([Ge({iconCss:"e-icons e-cancel-icon"})],t.prototype,"cancelButton",void 0),yb([Ge(null)],t.prototype,"validationRules",void 0),yb([$e()],t.prototype,"created",void 0),yb([$e()],t.prototype,"beforeSanitizeHtml",void 0),yb([$e()],t.prototype,"actionBegin",void 0),yb([$e()],t.prototype,"actionSuccess",void 0),yb([$e()],t.prototype,"actionFailure",void 0),yb([$e()],t.prototype,"validating",void 0),yb([$e()],t.prototype,"beginEdit",void 0),yb([$e()],t.prototype,"endEdit",void 0),yb([$e()],t.prototype,"change",void 0),yb([$e()],t.prototype,"submitClick",void 0),yb([$e()],t.prototype,"cancelClick",void 0),yb([$e()],t.prototype,"destroyed",void 0),t=yb([et],t)}(Dt),wb=function(){function e(e,t){this.moreButtonId="",this.commentsCount=0,this.commentsreplyCount=0,this.commentContextMenu=[],this.isAccordionContainer=!0,this.isCreateContextMenu=!1,this.isCommentsSelected=!1,this.isAddAnnotationProgramatically=!1,this.isEditableElement=!1,this.isPageCommentsRendered=!1,this.isCommentsRendered=!1,this.isAnnotationRendered=!1,this.pdfViewer=e,this.pdfViewerBase=t,this.opacity=this.pdfViewer.stickyNotesSettings.opacity?this.pdfViewer.stickyNotesSettings.opacity:1}return e.prototype.renderStickyNotesAnnotations=function(e,t,i){if(e&&e.length>0)for(var n=0;n<e.length;n++){var o=e[n],s=!1,a=this.getAnnotations(t,null,"sticky");if(null!==a)for(var r=0;r<a.length;r++){var l=o.annotName?o.annotName:o.AnnotName,d=a[r].annotName?a[r].annotName:a[r].AnnotName;if(d&&l&&d===l){s=!0;break}}if(!s){o.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(o,t,o.AnnotType);var h,p=o.Bounds,c=o.Author;o.AnnotationSettings=o.AnnotationSettings?o.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(o),o.allowedInteractions=o.AllowedInteraction?o.AllowedInteraction:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(o);var u=!0;u="Imported Annotation"===o.annotationAddMode?o.IsPrint:o.AnnotationSettings.isPrint,o.IsLock&&(o.AnnotationSettings.isLock=o.IsLock),h={shapeAnnotationType:"sticky",author:c,modifiedDate:o.ModifiedDate,subject:o.Subject,note:o.Note,opacity:o.Opacity,state:o.State,stateModel:o.StateModel,pathData:"",comments:this.pdfViewer.annotationModule.getAnnotationComments(o.Comments,o,c),review:{state:o.State,stateModel:o.StateModel,modifiedDate:o.ModifiedDate,author:c},pageNumber:t,bounds:{left:o.Bounds.X,top:o.Bounds.Y,width:o.Bounds.Width,height:o.Bounds.Height,right:o.Bounds.Right,bottom:o.Bounds.Bottom},annotName:o.AnnotName,color:o.color,annotationSelectorSettings:this.getSettings(o),customData:this.pdfViewer.annotation.getCustomData(o),annotationSettings:o.AnnotationSettings,allowedInteractions:o.allowedInteractions,isPrint:u,isCommentLock:o.IsCommentLock};var f;if(o.AnnotationSelectorSettings=o.AnnotationSelectorSettings?o.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,f={author:c,modifiedDate:h.modifiedDate,annotName:h.annotName,pageIndex:t,bounds:{x:p.Left,y:p.Top,width:p.Width,height:p.Height},strokeColor:"transparent",stampStrokeColor:"",data:this.setImageSource(),shapeAnnotationType:"StickyNotes",subject:h.subject,notes:h.note,opacity:h.opacity,id:h.annotName,fillColor:h.color,annotationSelectorSettings:o.AnnotationSelectorSettings,annotationSettings:h.annotationSettings,annotationAddMode:o.annotationAddMode,isPrint:u,isCommentLock:h.isCommentLock},i?this.drawStickyNotes(p.Left,p.Top,p.Width,p.Height,t,f,i):(this.pdfViewer.add(f),this.drawStickyNotes(p.Left,p.Top,p.Width,p.Height,t,f),this.pdfViewer.annotationModule.storeAnnotations(t,h,"_annotations_sticky")),this.isAddAnnotationProgramatically){var m={opacity:f.opacity,borderColor:f.strokeColor,borderWidth:f.thickness,author:o.author,subject:o.subject,modifiedDate:o.modifiedDate,fillColor:f.fillColor,fontSize:f.fontSize,width:f.bounds.width,height:f.bounds.height,fontColor:f.fontColor,fontFamily:f.fontFamily,defaultText:f.dynamicText,fontStyle:f.font,textAlignment:f.textAlign};this.pdfViewer.fireAnnotationAdd(f.pageIndex,f.annotName,"StickyNotes",f.bounds,m)}}}},e.prototype.getSettings=function(e){var t=this.pdfViewer.annotationSelectorSettings;return e.AnnotationSelectorSettings?t=e.AnnotationSelectorSettings:this.pdfViewer.stickyNotesSettings.annotationSelectorSettings&&(t=this.pdfViewer.stickyNotesSettings.annotationSelectorSettings),t},e.prototype.drawStickyNotes=function(e,t,i,n,o,s,a){var r,l=this,d=null,h=new Image,p=this;h.onload=function(){var c,u,f="Guest"!==l.pdfViewer.annotationSettings.author?l.pdfViewer.annotationSettings.author:l.pdfViewer.stickyNotesSettings.author;if(s)r={author:s.author,modifiedDate:s.modifiedDate,annotName:s.annotName,data:h.src,bounds:{x:e,y:t,width:i,height:n},subject:s.subject,notes:s.notes,opacity:s.opacity,id:s.annotName,shapeAnnotationType:"StickyNotes",strokeColor:"transparent",stampStrokeColor:"",pageIndex:s.pageIndex,isPrint:s.isPrint};else{u=l.pdfViewer.annotation.createGUID(),(c=p.addComments("sticky",o+1))&&(document.getElementById(c).id=u);var m=l.pdfViewer.stickyNotesSettings.annotationSelectorSettings?l.pdfViewer.stickyNotesSettings.annotationSelectorSettings:l.pdfViewer.annotationSelectorSettings,g=l.pdfViewer.stickyNotesSettings.isPrint;r={bounds:{x:e,y:t,width:i,height:n},pageIndex:o,data:h.src,modifiedDate:l.getDateAndTime(),shapeAnnotationType:"StickyNotes",strokeColor:"transparent",stampStrokeColor:"",annotName:u,id:u,opacity:l.opacity,isPrint:g};var y=l.pdfViewer.stickyNotesSettings.isLock?l.pdfViewer.stickyNotesSettings.isLock:l.pdfViewer.annotationSettings.isLock,v=l.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(s);d={author:f,allowedInteractions:v,modifiedDate:l.getDateAndTime(),subject:"Sticky Note",shapeAnnotationType:"sticky",pageNumber:o,note:"",opacity:l.opacity,pathData:"",state:"",stateModel:"",color:"rgba(255,255,0)",comments:[],annotName:u,bounds:{left:e,top:t,width:i,height:n},review:{state:"",stateModel:"",modifiedDate:"",author:f},annotationSelectorSettings:m,customData:l.pdfViewer.annotationModule.getData("sticky"),annotationSettings:{isLock:y},isPrint:g,isCommentLock:!1}}if(s||(p.pdfViewer.annotation.addAction(o,null,r,"Addition","",r,r),p.pdfViewer.add(r),p.pdfViewer.annotationModule.storeAnnotations(o,d,"_annotations_sticky")),p.pdfViewerBase.isAddComment){var w={left:r.bounds.x,top:r.bounds.y,width:r.bounds.width,height:r.bounds.height};l.pdfViewerBase.updateDocumentEditedProperty(!0);var b={opacity:r.opacity,author:f,modifiedDate:r.modifiedDate,subject:r.shapeAnnotationType};l.pdfViewer.fireAnnotationAdd(r.pageIndex,r.annotName,"StickyNotes",w,b)}if(a)p.pdfViewer.renderDrawing(a,o);else{var S=document.getElementById(p.pdfViewer.element.id+"_annotationCanvas_"+o);p.pdfViewer.renderDrawing(S,o)}ge.isDevice&&p.pdfViewer.select([r.id],r.annotationSelectorSettings),p.pdfViewerBase.isAddComment=!1},h.src=this.setImageSource()},e.prototype.setImageSource=function(){return"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgd2lkdGg9IjE2IgogICBoZWlnaHQ9IjE1IgogICB2aWV3Qm94PSIwIDAgNC4yMzMzMzMxIDMuOTY4NzQ5NyIKICAgdmVyc2lvbj0iMS4xIj4KICA8ZyBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBkPSJNIDMuODM4OSwwLjk0MTY3IEMgMy42NTM5LDAuNzAzNjcgMy40MTU5LDAuNTE3NjcgMy4xMjQ5LDAuMzg1NjcgMi44MDc5LDAuMjUzNjcgMi40ODk5LDAuMTczNjcgMi4xMTk5LDAuMTczNjcgMS43NDg5LDAuMTczNjcgMS40MzE5LDAuMjUzNjcgMS4xMTQyLDAuMzg1NjcgMC44MjMxNiwwLjUxNzY3IDAuNTg1MTYsMC43MDM2NyAwLjQwMDE2LDAuOTQxNjcgMC4yMTUxNiwxLjE3OTcgMC4xMzUxNiwxLjQxNzcgMC4xMzUxNiwxLjcwODcgMC4xMzUxNiwxLjk0NjcgMC4xODgxNiwyLjE1ODcgMC4zMjAxNiwyLjM0MzcgMC40NTMxNiwyLjU1NTcgMC42MTExNiwyLjcxMzcgMC44MjMxNiwyLjg0NjcgMC43OTIxNiwzLjE1NDcgMC42NTAxNiwzLjM4MjcgMC40NzkxNiwzLjU4NzcgMC40MjgxNiwzLjY2NzcgMC41MTcxNiwzLjc0MTcgMC42OTExNiwzLjcxOTcgMS4wODgyLDMuNjM5NyAxLjQwNDksMy40NTQ3IDEuNjQyOSwzLjE2MzcgMS44MDE5LDMuMTkwNyAxLjk2MDksMy4yMTY3IDIuMTE5OSwzLjIxNjcgMi40ODk5LDMuMjE2NyAyLjgwNzksMy4xMzc3IDMuMTI0OSwzLjAwNTcgMy40MTU5LDIuODcyNyAzLjY4MDksMi42ODc3IDMuODM4OSwyLjQ0OTcgNC4wMjQ5LDIuMjExNyA0LjEwMzksMS45NzM3IDQuMTAzOSwxLjY4MjcgNC4xMDM5LDEuNDE3NyA0LjAyNDksMS4xNTI3IDMuODM4OSwwLjk0MTY3IFoiCiAgICAgICBpZD0icGF0aDE1MjQiCiAgICAgICBzdHlsZT0iZmlsbDojZmZmNzAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDowLjI2NDU4MztzdHJva2Utb3BhY2l0eToxIiAvPgogICAgPHBhdGgKICAgICAgIGQ9Ik0gMy4wNDI5LDEuNDE2NyBIIDEuMTkxMiBDIDEuMTExMiwxLjQxNjcgMS4wNTkyLDEuMzYzNyAxLjA1OTIsMS4yODM3IDEuMDU5MiwxLjIwNDcgMS4xMTEyLDEuMTUxNyAxLjE5MTIsMS4xNTE3IEggMy4wNDI5IEMgMy4xMjE5LDEuMTUxNyAzLjE3NDksMS4yMDQ3IDMuMTc0OSwxLjI4MzcgMy4xNzQ5LDEuMzYzNyAzLjEyMTksMS40MTY3IDMuMDQyOSwxLjQxNjcgWiIKICAgICAgIGlkPSJwYXRoMTUzNiIKICAgICAgIHN0eWxlPSJzdHJva2Utd2lkdGg6MC4yNjQ1ODMiIC8+CiAgICA8cGF0aAogICAgICAgZD0iTSAzLjA0MjksMS45NDU3IEggMS4xOTEyIEMgMS4xMTEyLDEuOTQ1NyAxLjA1OTIsMS44OTI3IDEuMDU5MiwxLjgxMjcgMS4wNTkyLDEuNzMzNyAxLjExMTIsMS42ODA3IDEuMTkxMiwxLjY4MDcgSCAzLjA0MjkgQyAzLjEyMTksMS42ODA3IDMuMTc0OSwxLjczMzcgMy4xNzQ5LDEuODEyNyAzLjE3NDksMS44OTI3IDMuMTIxOSwxLjk0NTcgMy4wNDI5LDEuOTQ1NyBaIgogICAgICAgaWQ9InBhdGgxNTQwIgogICAgICAgc3R5bGU9InN0cm9rZS13aWR0aDowLjI2NDU4MyIgLz4KICA8L2c+Cjwvc3ZnPgo="},e.prototype.createRequestForComments=function(){var e,t=this,i=t.pdfViewerBase.pageCount;t.isCommentsRendered||(20<i?i=20:t.isPageCommentsRendered=!0),this.isCommentsRendered?e={pageStartIndex:20..toString(),pageEndIndex:i.toString(),hashId:this.pdfViewerBase.hashId,action:"RenderAnnotationComments",elementId:this.pdfViewer.element.id,uniqueId:t.pdfViewerBase.documentId}:(e={pageStartIndex:(0).toString(),pageEndIndex:i.toString(),hashId:this.pdfViewerBase.hashId,action:"RenderAnnotationComments",elementId:this.pdfViewer.element.id,uniqueId:t.pdfViewerBase.documentId},t.isCommentsRendered=!0),this.pdfViewerBase.jsonDocumentId&&(e.documentId=this.pdfViewerBase.jsonDocumentId);var n=this.pdfViewer.serviceUrl+"/"+this.pdfViewer.serverActionSettings.renderComments;t.commentsRequestHandler=new Dh(t.pdfViewer),t.commentsRequestHandler.url=n,t.commentsRequestHandler.mode=!0,t.commentsRequestHandler.responseType="text",t.commentsRequestHandler.send(e),t.commentsRequestHandler.onSuccess=function(e){var i=e.data;if(i){if("object"!==typeof i)try{"object"!==typeof(i=JSON.parse(i))&&(i=JSON.parse(i)),"object"!==typeof i&&(t.pdfViewerBase.onControlError(500,i,this.pdfViewer.serverActionSettings.renderComments),i=null)}catch(d){t.pdfViewerBase.onControlError(500,i,this.pdfViewer.serverActionSettings.renderComments),i=null}if(i){var n=!1;if(t.pdfViewerBase.annotationComments?t.pdfViewerBase.annotationComments=i.annotationDetails:(t.pdfViewerBase.annotationComments=i.annotationDetails,n=!0),i.annotationDetails&&i.uniqueId===t.pdfViewerBase.documentId){t.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderComments,i),t.isAnnotationRendered=!0;var o=void 0;if(t.pdfViewerBase.documentAnnotationCollections)o=t.updateAnnotationsInDocumentCollections(t.pdfViewerBase.annotationComments,t.pdfViewerBase.documentAnnotationCollections);else{var s=t.pdfViewerBase.createAnnotationsCollection();o=t.updateAnnotationsInDocumentCollections(t.pdfViewerBase.annotationComments,s)}t.pdfViewerBase.annotationComments=o,t.pdfViewerBase.documentAnnotationCollections=o;for(var a=i.startPageIndex;a<i.endPageIndex;a++){var r=i.annotationDetails[a];t.pdfViewerBase.updateModifiedDateToLocalDate(r,"freeTextAnnotation"),t.pdfViewerBase.updateModifiedDateToLocalDate(r,"measureShapeAnnotation"),t.pdfViewerBase.updateModifiedDateToLocalDate(r,"shapeAnnotation"),t.pdfViewerBase.updateModifiedDateToLocalDate(r,"signatureAnnotation"),t.pdfViewerBase.updateModifiedDateToLocalDate(r,"signatureInkAnnotation"),t.pdfViewerBase.updateModifiedDateToLocalDate(r,"stampAnnotations"),t.pdfViewerBase.updateModifiedDateToLocalDate(r,"stickyNotesAnnotation"),t.pdfViewerBase.updateModifiedDateToLocalDate(r,"textMarkupAnnotation")}for(var l=i.startPageIndex;l<i.endPageIndex;l++)i.annotationDetails[l]&&t.renderAnnotationCollections(i.annotationDetails[l],l,n);t.isPageCommentsRendered||(t.isPageCommentsRendered=!0,t.createRequestForComments())}}}},t.commentsRequestHandler.onFailure=function(e){this.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText)},t.commentsRequestHandler.onError=function(e){t.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,t.pdfViewer.serverActionSettings.renderComments)}},e.prototype.updateAnnotationsInDocumentCollections=function(e,t){for(var i=0;i<this.pdfViewerBase.pageCount;i++)if(e[i]&&t[i]){if(e[i].textMarkupAnnotation&&0!==e[i].textMarkupAnnotation.length&&t[i].textMarkupAnnotation)for(var n=0;n<e[i].textMarkupAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].textMarkupAnnotation[n],t[i].textMarkupAnnotation);if(e[i].shapeAnnotation&&0!==e[i].shapeAnnotation.length&&t[i].shapeAnnotation)for(n=0;n<e[i].shapeAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].shapeAnnotation[n],t[i].shapeAnnotation);if(e[i].measureShapeAnnotation&&0!==e[i].measureShapeAnnotation.length&&t[i].measureShapeAnnotation)for(n=0;n<e[i].measureShapeAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].measureShapeAnnotation[n],t[i].measureShapeAnnotation);if(e[i].stampAnnotations&&0!==e[i].stampAnnotations.length&&t[i].stampAnnotations)for(n=0;n<e[i].stampAnnotations.length;n++)this.updateDocumentAnnotationCollections(e[i].stampAnnotations[n],t[i].stampAnnotations);if(e[i].stickyNotesAnnotation&&0!==e[i].stickyNotesAnnotation.length&&t[i].stickyNotesAnnotation)for(n=0;n<e[i].stickyNotesAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].stickyNotesAnnotation[n],t[i].stickyNotesAnnotation);if(e[i].freeTextAnnotation&&0!==e[i].freeTextAnnotation.length&&t[i].freeTextAnnotation)for(n=0;n<e[i].freeTextAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].freeTextAnnotation[n],t[i].freeTextAnnotation);if(e[i].signatureAnnotation&&0!==e[i].signatureAnnotation.length&&t[i].signatureAnnotation)for(n=0;n<e[i].signatureAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].signatureAnnotation[n],t[i].signatureAnnotation);if(e[i].signatureInkAnnotation&&0!==e[i].signatureInkAnnotation.length&&t[i].signatureInkAnnotation)for(n=0;n<e[i].signatureInkAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].signatureInkAnnotation[n],t[i].signatureInkAnnotation)}return t},e.prototype.updateDocumentAnnotationCollections=function(e,t){if(0===t.length)t.push(e);else{for(var i=!1,n=0;n<t.length;n++)if(e.AnnotName&&t[n].AnnotName&&e.AnnotName===t[n].AnnotName){i=!0;break}i||t.push(e)}},e.prototype.renderAnnotationCollections=function(e,t,i){var n=[];if(e.textMarkupAnnotation&&0!==e.textMarkupAnnotation.length)for(var o=0;o<e.textMarkupAnnotation.length;o++)this.pdfViewer.dateTimeFormat&&(e.textMarkupAnnotation[o].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.textMarkupAnnotation[o].ModifiedDate)),n.push(e.textMarkupAnnotation[o]),this.updateCollections(this.pdfViewer.annotationModule.textMarkupAnnotationModule.updateTextMarkupAnnotationCollections(e.textMarkupAnnotation[o],t));if(e.shapeAnnotation&&0!==e.shapeAnnotation.length&&this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.shapeAnnotationModule)for(o=0;o<e.shapeAnnotation.length;o++)this.pdfViewer.dateTimeFormat&&(e.shapeAnnotation[o].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.shapeAnnotation[o].ModifiedDate)),n.push(e.shapeAnnotation[o]),this.updateCollections(this.pdfViewer.annotationModule.shapeAnnotationModule.updateShapeAnnotationCollections(e.shapeAnnotation[o],t));if(e.measureShapeAnnotation&&0!==e.measureShapeAnnotation.length)for(o=0;o<e.measureShapeAnnotation.length;o++)this.pdfViewer.dateTimeFormat&&(e.measureShapeAnnotation[o].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.measureShapeAnnotation[o].ModifiedDate)),n.push(e.measureShapeAnnotation[o]),this.updateCollections(this.pdfViewer.annotationModule.measureAnnotationModule.updateMeasureAnnotationCollections(e.measureShapeAnnotation[o],t));if(e.stampAnnotations&&0!==e.stampAnnotations.length)for(o=0;o<e.stampAnnotations.length;o++)this.pdfViewer.dateTimeFormat&&(e.stampAnnotations[o].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.stampAnnotations[o].ModifiedDate)),n.push(e.stampAnnotations[o]),this.updateCollections(this.pdfViewer.annotationModule.stampAnnotationModule.updateStampAnnotationCollections(e.stampAnnotations[o],t));if(e.stickyNotesAnnotation&&0!==e.stickyNotesAnnotation.length)for(o=0;o<e.stickyNotesAnnotation.length;o++)this.pdfViewer.dateTimeFormat&&(e.stickyNotesAnnotation[o].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.stickyNotesAnnotation[o].ModifiedDate)),n.push(e.stickyNotesAnnotation[o]),this.updateCollections(this.updateStickyNotesAnnotationCollections(e.stickyNotesAnnotation[o],t));if(e.freeTextAnnotation&&0!==e.freeTextAnnotation.length)for(o=0;o<e.freeTextAnnotation.length;o++)this.pdfViewer.dateTimeFormat&&(e.freeTextAnnotation[o].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.freeTextAnnotation[o].ModifiedDate)),n.push(e.freeTextAnnotation[o]),this.updateCollections(this.pdfViewer.annotationModule.freeTextAnnotationModule.updateFreeTextAnnotationCollections(e.freeTextAnnotation[o],t));if(e.signatureAnnotation&&0!==e.signatureAnnotation.length)for(o=0;o<e.signatureAnnotation.length;o++)this.pdfViewer.dateTimeFormat&&(e.signatureAnnotation[o].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.signatureAnnotation[o].ModifiedDate)),this.updateCollections(this.pdfViewerBase.signatureModule.updateSignatureCollections(e.signatureAnnotation[o],t),!0);if(e.signatureInkAnnotation&&0!==e.signatureInkAnnotation.length)for(o=0;o<e.signatureInkAnnotation.length;o++)this.pdfViewer.dateTimeFormat&&(e.signatureInkAnnotation[o].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.signatureInkAnnotation[o].ModifiedDate)),n.push(e.signatureInkAnnotation[o]),this.updateCollections(this.pdfViewer.annotationModule.inkAnnotationModule.updateInkCollections(e.signatureInkAnnotation[o],t));if(this.pdfViewer.toolbarModule&&this.renderAnnotationComments(n,t),i)for(o=0;o<this.pdfViewerBase.renderedPagesList.length;o++)this.pdfViewerBase.renderAnnotations(this.pdfViewerBase.renderedPagesList[o],!1)},e.prototype.updateCollections=function(e,t){var i,n=!1;if((i=t?this.pdfViewer.signatureCollection:this.pdfViewer.annotationCollection)&&e)for(var o=0;o<i.length;o++)if(t){if(i[o].signatureName===e.signatureName){n=!0;break}}else if(i[o].annotationId===e.annotationId){n=!0;break}!n&&e&&(t?this.pdfViewer.signatureCollection.push(e):this.pdfViewer.annotationCollection.push(e))},e.prototype.renderAnnotationComments=function(e,t){if(t+=1,e&&0!==e.length){this.createPageAccordion(t);for(var i=0;i<e.length;i++)e[i].AnnotName&&1===e[i].AnnotName.split("freeText").length&&this.createCommentControlPanel(e[i],t);var n=document.querySelectorAll(".e-pv-new-comments-div");if(n)for(var o=0;o<n.length;o++)n[o].style.display="none"}},e.prototype.initializeAcccordionContainer=function(){var e=we("div",{id:this.pdfViewer.element.id+"_commentsPanelText",className:"e-pv-comments-panel-text"});S()?this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_NoCommentsYet").then((function(t){e.textContent=t})):e.textContent=this.pdfViewer.localeObj.getConstant("No Comments Yet");this.updateCommentPanelTextTop(),this.pdfViewerBase.navigationPane.commentsContentContainer.appendChild(e),this.accordionContentContainer=we("div",{id:this.pdfViewer.element.id+"_accordionContentContainer",className:"e-pv-accordion-content-container"}),this.pdfViewerBase.navigationPane.commentsContentContainer.appendChild(this.accordionContentContainer),this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export Annotations")],!1),this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export XFDF")],!1)},e.prototype.updateCommentPanelTextTop=function(){var e=document.getElementById(this.pdfViewer.element.id+"_commentsPanelText");this.pdfViewerBase.navigationPane.commentPanelContainer&&this.pdfViewerBase.navigationPane.commentPanelContainer.clientHeight&&"none"!==e.style.display&&(e.style.paddingTop=this.pdfViewerBase.navigationPane.commentPanelContainer.clientHeight/2-47+"px",e.style.paddingLeft=this.pdfViewerBase.navigationPane.commentPanelContainer.clientWidth/3+"px")},e.prototype.createPageAccordion=function(e){if(null===document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+e))return this.accordionContent=we("div",{id:this.pdfViewer.element.id+"_accordioncontent"+e}),this.accordionContent.style.zIndex="1000",this.accordionPageContainer=we("div",{id:this.pdfViewer.element.id+"_accordionPageContainer"+e,className:"e-pv-accordion-page-container"}),this.accordionPageContainer.appendChild(this.accordionContent),this.pdfViewerBase.viewerMainContainer.appendChild(this.accordionPageContainer),this.accordionContainer=we("div",{id:this.pdfViewer.element.id+"_accordionContainer"+e,className:"e-pv-accordion-container"}),new Sy({items:[{header:this.pdfViewer.localeObj.getConstant("Page")+" "+e,expanded:!0,content:"#"+this.pdfViewer.element.id+"_accordioncontent"+e}]}).appendTo(this.accordionContainer),this.accordionContainer.style.order="pageIndex",this.alignAccordionContainer(this.accordionContainer,e),document.getElementById(this.pdfViewer.element.id+"_commentsPanelText")&&(this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export Annotations")],!0),this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export XFDF")],!0),document.getElementById(this.pdfViewer.element.id+"_commentsPanelText").style.display="none"),document.getElementById(this.pdfViewer.element.id+"_accordionContentContainer")&&(document.getElementById(this.pdfViewer.element.id+"_accordionContentContainer").style.display="block"),this.accordionContainer},e.prototype.alignAccordionContainer=function(e,t){var i=!0;if(this.accordionContentContainer){if(this.isAccordionContainer)this.accordionContentContainer.appendChild(e),i=!1;else for(var n=1;n<=this.pdfViewerBase.pageCount;n++){var o=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+n);if(o&&t<n){this.accordionContentContainer.insertBefore(e,o),i=!1;break}}i&&(this.accordionContentContainer.appendChild(e),i=!1),this.isAccordionContainer=!1}},e.prototype.updateCommentPanelScrollTop=function(e){var t=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+e);if(t){var i=t.offsetTop+t.clientTop-35;this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop=i}},e.prototype.createCommentControlPanel=function(e,t,i,n,o){var s=document.getElementById(this.pdfViewer.element.id+"_accordioncontent"+t);if(s){var a=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+t);a&&a.ej2_instances[0].expandItem(!0),this.commentsContainer=we("div",{id:this.pdfViewer.element.id+"commentscontainer_"+t+"_"+this.commentsCount,className:"e-pv-comments-container"}),this.commentsContainer.accessKey=t.toString()+"_"+this.commentsCount;var r=!1;if(e){if(this.commentsContainer.id=e.AnnotName,e.AnnotName)for(var l=0;l<s.childElementCount;l++)if(s.children[l].id===e.AnnotName){if(r=!0,o)document.getElementById(s.children[l].id).remove(),r=!1;break}e.Name&&"freeText"===e.Name?this.commentsContainer.setAttribute("name","freeText"):this.commentsContainer.setAttribute("name",e.AnnotType)}i&&this.commentsContainer.setAttribute("name",i),this.commentsContainer.addEventListener("mousedown",this.commentsAnnotationSelect.bind(this));var d=we("div",{id:this.pdfViewer.element.id+"_commentdiv_"+t+"_"+this.commentsCount,className:"e-pv-comments-div"});this.commentsCount=this.commentsCount+1,this.commentsContainer.appendChild(d),this.updateCommentPanelScrollTop(t),r||s.appendChild(this.commentsContainer);var h=void 0;e?("null"===(h=this.commentsContainer.getAttribute("name"))&&(h=e.AnnotationType),this.createTitleContainer(d,h,t,e.Subject,e.ModifiedDate,e.Author)):(h=this.commentsContainer.getAttribute("name"),this.createTitleContainer(d,h,t,n));var p=we("div",{id:this.pdfViewer.element.id+"_commenttextbox_"+t+"_"+this.commentsCount,className:"e-pv-comment-textbox"}),c=new vb({mode:"Inline",type:"Text",model:{placeholder:this.pdfViewer.localeObj.getConstant("Add a comment")+".."},emptyText:"",editableOn:"EditIconClick",saveButton:{content:this.pdfViewer.localeObj.getConstant("Post"),cssClass:"e-outline",disabled:!0},cancelButton:{content:this.pdfViewer.localeObj.getConstant("Cancel"),cssClass:"e-outline"},submitOnEnter:!0});!e||m(e.Note)&&m(e.Text)||(c.created=function(){setTimeout((function(){c.element.querySelector(".e-editable-value").innerText=m(e.Note)?m(e.Text)?"":e.Text:e.Note}))},c.beginEdit=function(){c.value=c.valueEle.innerText}),c.appendTo(p);var u=document.querySelectorAll(".e-editable-inline");for(l=0;l<u.length;l++)u[l].style.display="none";if(e||(c.enableEditMode=!0),p.addEventListener("keydown",(function(e){c.element.querySelector(".e-btn-save")&&(""!==e.srcElement.value?c.element.querySelector(".e-btn-save").ej2_instances[0].disabled=!1:c.element.querySelector(".e-btn-save").ej2_instances[0].disabled=!0)})),c.actionSuccess=this.createCommentDiv.bind(this,c),d.appendChild(p),e){if(c.value=m(e.Note)?m(e.Text)?"":e.Text:e.Note,this.checkIslockProperty(e)&&null==e.Comments&&this.createCommentDiv(this.commentsContainer),"freeText"===e.Name&&(c.value=e.MarkupText),e.State){var f=we("div",{id:this.pdfViewer.element.id+"status_container",className:"e-pv-status-container"}),g=we("div",{id:this.pdfViewer.element.id+"status_div",className:"e-pv-status-div"}),y=we("span",{id:this.pdfViewer.element.id+"status_icon"});g.appendChild(y),f.appendChild(g),d.appendChild(f),this.updateStatusContainer(e.State,y,g,f)}if(e.Comments){for(l=0;l<e.Comments.length;l++)this.renderComments(e.Comments[l],this.commentsContainer);" "!==e.Note&&""!==e.Note&&null!==e.Note&&this.createCommentDiv(this.commentsContainer)}}return this.isNewcommentAdded=!0,d.addEventListener("click",this.commentsDivClickEvent.bind(this)),d.addEventListener("mouseover",this.commentDivMouseOver.bind(this)),d.addEventListener("mouseleave",this.commentDivMouseLeave.bind(this)),d.addEventListener("mouseout",this.commentDivMouseLeave.bind(this)),d.addEventListener("focusout",this.commentDivMouseLeave.bind(this)),p.addEventListener("dblclick",this.openEditorElement.bind(this)),p.addEventListener("focusin",this.commentDivFocus.bind(this)),this.commentsContainer.id}return""},e.prototype.commentDivFocus=function(e){if(this.isNewcommentAdded){var t=this,i=this.pdfViewerBase.currentPageNumber;setTimeout((function(){t.updateScrollPosition(i)}),500)}else null!==e.relatedTarget&&(e.preventDefault(),e.target.blur())},e.prototype.updateScrollPosition=function(e){var t=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+e);if(t&&this.isNewcommentAdded){var i=0,n=document.querySelectorAll(".e-editable-inline");n[0]&&(i=n[0].getBoundingClientRect().height);var o=t.offsetTop+t.clientTop+i;this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop<o&&(this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop=o),this.isNewcommentAdded=!1}},e.prototype.updateCommentsScrollTop=function(e){var t=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+this.pdfViewerBase.currentPageNumber),i=document.querySelector(".e-pv-comments-border"),n=0;if(t&&i){n=i.getBoundingClientRect().height;var o=void 0;o=e?t.offsetTop+i.offsetTop+n/4:t.offsetTop+i.offsetTop-70,this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop=o}},e.prototype.createCommentDiv=function(e){var t,i,n=this,o=we("div",{id:this.pdfViewer.element.id+"_newcommentdiv_"+this.commentsCount+"_"+this.commentsreplyCount,className:"e-pv-new-comments-div"});e.localName?t=e:(t=e.valueEle.parentElement.parentElement.parentElement.parentElement,i=e.valueEle.parentElement.parentElement.previousSibling.childNodes[1]);var s=new vb({mode:"Inline",type:"Text",value:"",editableOn:"Click",model:{placeholder:this.pdfViewer.localeObj.getConstant("Add a reply")+".."},emptyText:this.pdfViewer.localeObj.getConstant("Add a reply"),saveButton:{content:this.pdfViewer.localeObj.getConstant("Post"),cssClass:"e-outline",disabled:!0},cancelButton:{content:this.pdfViewer.localeObj.getConstant("Cancel"),cssClass:"e-outline"},submitOnEnter:!0});if(s.appendTo(o),o.lastChild.firstChild.click(),o.addEventListener("keydown",(function(e){s.element.querySelector(".e-btn-save")&&(""!==e.srcElement.value?s.element.querySelector(".e-btn-save").ej2_instances[0].disabled=!1:(s.element.querySelector(".e-btn-save").ej2_instances[0].disabled=!0,s.enableEditMode=!0))})),e.valueEle){if(null!=e.value&&""!==e.value&&" "!==e.value){if(this.pdfViewer.selectedItems.annotations[0]&&"FreeText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType)this.modifyTextProperty(e.value,e.prevValue,e.valueEle.parentNode.parentNode.parentNode.parentNode.id);else try{this.modifyTextProperty(e.value,e.prevValue,e.valueEle.parentNode.parentNode.parentNode.parentNode.id)}catch(a){this.modifyTextProperty(e.value,e.prevValue)}this.updateModifiedDate(i)}1===e.valueEle.parentElement.parentElement.parentElement.parentElement.childElementCount&&null!=e.value&&""!==e.value&&" "!==e.value&&(t.appendChild(o),setTimeout((function(){n.updateCommentsScrollTop(!0)}),50))}else t.appendChild(o),setTimeout((function(){n.updateCommentsScrollTop(!0)}),50);s.actionSuccess=this.saveCommentDiv.bind(this,s)},e.prototype.saveCommentDiv=function(e,t){var i,n,o,s;if(t.name&&""!==e.value?(i=e.valueEle.parentElement.parentElement.parentElement,o=e.valueEle.parentElement.parentElement,s=e.value):(o=(i=e).lastChild,s=t),i&&o){i.removeChild(o);var a=we("div",{id:this.pdfViewer.element.id+"_replytextbox_"+this.commentsCount+"_"+this.commentsreplyCount});this.commentsreplyCount=this.commentsreplyCount+1;var r=we("div",{id:this.pdfViewer.element.id+"replyDiv_"+this.commentsCount+"_"+this.commentsreplyCount,className:"e-pv-reply-div"});r.id=this.pdfViewer.annotation.createGUID(),n=this.getAuthorName(this.pdfViewer.selectedItems.annotations[0],i),this.createReplyDivTitleContainer(r,null,n),r.addEventListener("mouseover",this.commentDivMouseOver.bind(this)),r.addEventListener("mouseleave",this.commentDivMouseLeave.bind(this)),r.addEventListener("click",this.commentDivOnSelect.bind(this)),a.addEventListener("dblclick",this.openEditorElement.bind(this)),r.style.border="1px",r.style.borderColor="black",r.style.zIndex=1002;var l=new vb({mode:"Inline",type:"Text",emptyText:"",editableOn:"EditIconClick",model:{placeholder:this.pdfViewer.localeObj.getConstant("Add a reply")+".."},value:s,saveButton:{content:this.pdfViewer.localeObj.getConstant("Post"),cssClass:"e-outline"},cancelButton:{content:this.pdfViewer.localeObj.getConstant("Cancel"),cssClass:"e-outline"}});l.created=function(){setTimeout((function(){l.element.querySelector(".e-editable-value").innerText=s}))},l.beginEdit=function(){l.value=l.valueEle.innerText},l.appendTo(a),l.actionSuccess=this.modifyProperty.bind(this,l),r.appendChild(a),r.style.paddingLeft="24px",i.appendChild(r),a.addEventListener("keydown",(function(e){l.element.querySelector(".e-btn-save")&&(""!==e.srcElement.value?l.element.querySelector(".e-btn-save").ej2_instances[0].disabled=!1:l.element.querySelector(".e-btn-save").ej2_instances[0].disabled=!0)})),r.addEventListener("click",this.commentsDivClickEvent.bind(this)),r.addEventListener("dblclick",this.commentsDivDoubleClickEvent.bind(this)),this.createCommentDiv(r.parentElement),this.modifyCommentsProperty(s,r.id,i.id)}},e.prototype.renderComments=function(e,t,i,n,o){var s,a=we("div",{id:this.pdfViewer.element.id+"_replytextbox_"+this.commentsCount+"_"+this.commentsreplyCount});this.commentsreplyCount=this.commentsreplyCount+1;var r=we("div",{id:"replyDiv_"+this.commentsCount+"_"+this.commentsreplyCount,className:"e-pv-reply-div"});i?(r.id=e.annotName,s=e.author):(r.id=e.AnnotName,s=e.Author),r.style.border="1px",r.style.borderColor="black",s||(s=t.getAttribute("author")),i?void 0!==e.modifiedDate?this.createReplyDivTitleContainer(r,e.modifiedDate,s):this.createReplyDivTitleContainer(r,null,s):this.createReplyDivTitleContainer(r,e.ModifiedDate,s),r.addEventListener("mouseover",this.commentDivMouseOver.bind(this)),r.addEventListener("mouseleave",this.commentDivMouseLeave.bind(this)),r.addEventListener("click",this.commentDivOnSelect.bind(this)),a.addEventListener("dblclick",this.openEditorElement.bind(this));var l=new vb({mode:"Inline",type:"Text",emptyText:"",editableOn:"EditIconClick",model:{placeholder:this.pdfViewer.localeObj.getConstant("Add a reply")+".."},value:"",saveButton:{content:this.pdfViewer.localeObj.getConstant("Post"),cssClass:"e-outline"},cancelButton:{content:this.pdfViewer.localeObj.getConstant("Cancel"),cssClass:"e-outline"}});if(l.value=i?e.note:e.Note,l.created=function(){setTimeout((function(){l.element.querySelector(".e-editable-value").innerText=i?e?e.note:"":e?e.Note:""}))},l.beginEdit=function(){l.value=l.valueEle.innerText},l.appendTo(a),r.appendChild(a),i&&(e.State=e.state),e.State){var d=we("div",{id:this.pdfViewer.element.id+"status_container",className:"e-pv-status-container"}),h=we("div",{id:this.pdfViewer.element.id+"status_div",className:"e-pv-status-div"}),p=we("span",{id:this.pdfViewer.element.id+"status_icon"});h.appendChild(p),d.appendChild(h),r.appendChild(d),this.updateStatusContainer(e.State,p,h,d)}if(r.style.paddingLeft="24px",a.addEventListener("keydown",(function(e){l.element.querySelector(".e-btn-save")&&(""!==e.srcElement.value?l.element.querySelector(".e-btn-save").ej2_instances[0].disabled=!1:l.element.querySelector(".e-btn-save").ej2_instances[0].disabled=!0)})),i)if(o)t.appendChild(r);else{var c=document.getElementById(n);e.position?c.insertBefore(r,c.childNodes[e.position]):c&&(c.childElementCount>1?c.insertBefore(r,c.childNodes[c.childElementCount-1]):t.appendChild(r))}else t.appendChild(r);r.addEventListener("click",this.commentsDivClickEvent.bind(this)),r.addEventListener("dblclick",this.commentsDivDoubleClickEvent.bind(this)),l.actionSuccess=this.modifyProperty.bind(this,l)},e.prototype.createCommentsContainer=function(e,t,i){var n=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+t);if(!n){var o=document.getElementById(this.pdfViewer.element.id+"_accordionPageContainer"+t);o&&o.parentElement.removeChild(o),(n=this.createPageAccordion(t))&&n.ej2_instances[0].expandItem(!0)}var s=document.getElementById(this.pdfViewer.element.id+"_accordioncontent"+t);this.commentsContainer=we("div",{id:this.pdfViewer.element.id+"commentscontainer_"+t+"_"+this.commentsCount,className:"e-pv-comments-container"}),this.commentsContainer.accessKey=t.toString()+"_"+this.commentsCount,e&&(this.commentsContainer.id=e.annotName?e.annotName:e.annotationId),this.commentsContainer.addEventListener("mousedown",this.commentsAnnotationSelect.bind(this));var a=we("div",{id:this.pdfViewer.element.id+"_commentdiv_"+t+"_"+this.commentsCount,className:"e-pv-comments-div"});if(this.commentsCount=this.commentsCount+1,this.commentsContainer.appendChild(a),this.updateCommentPanelScrollTop(t),e&&s&&(e.position||0===e.position?s.insertBefore(this.commentsContainer,s.children[e.position]):s.appendChild(this.commentsContainer)),e&&s)if(e.indent)this.commentsContainer.setAttribute("name","shape_measure"),this.createTitleContainer(a,"shape_measure",t,e.subject,e.modifiedDate,e.author);else if("sticky"===e.shapeAnnotationType||"stamp"===e.shapeAnnotationType){var r=this.createTitleContainer(a,e.shapeAnnotationType,t,null,e.modifiedDate,e.author);this.commentsContainer.setAttribute("name",r),"sticky"===r&&(i||this.addStickyNotesAnnotations(t-1,e))}else"textMarkup"===e.shapeAnnotationType?(this.commentsContainer.setAttribute("name","textMarkup"),this.createTitleContainer(a,"textMarkup",t,e.subject,e.modifiedDate,e.author)):"FreeText"===e.shapeAnnotationType?(e.note=e.dynamicText,this.commentsContainer.setAttribute("name","freetext"),this.createTitleContainer(a,"freeText",t,e.subject,e.modifiedDate)):"Ink"===e.shapeAnnotationType?(e.note=e.dynamicText,this.commentsContainer.setAttribute("name","ink"),this.createTitleContainer(a,"ink",t,e.subject,e.modifiedDate)):(this.commentsContainer.setAttribute("name","shape"),"Line"===e.shapeAnnotationType?this.createTitleContainer(a,"shape",t,e.subject,e.modifiedDate,e.author):this.createTitleContainer(a,"shape",t,e.shapeAnnotationType,e.modifiedDate,e.author));var l=we("div",{id:this.pdfViewer.element.id+"_commenttextbox_"+t+"_"+this.commentsCount,className:"e-pv-comment-textbox"}),d=new vb({mode:"Inline",type:"Text",model:{placeholder:this.pdfViewer.localeObj.getConstant("Add a comment")+".."},emptyText:"",editableOn:"EditIconClick",saveButton:{content:this.pdfViewer.localeObj.getConstant("Post"),cssClass:"e-outline",disabled:!0},cancelButton:{content:this.pdfViewer.localeObj.getConstant("Cancel"),cssClass:"e-outline"},submitOnEnter:!0});d.appendTo(l);for(var h=document.querySelectorAll(".e-editable-inline"),p=0;p<h.length;p++)h[p].style.display="none";if(l.addEventListener("keydown",(function(e){d.element.querySelector(".e-btn-save")&&(""!==e.srcElement.value?d.element.querySelector(".e-btn-save").ej2_instances[0].disabled=!1:d.element.querySelector(".e-btn-save").ej2_instances[0].disabled=!0)})),d.actionSuccess=this.createCommentDiv.bind(this,d),a.appendChild(l),e){if(d.value=e.note,e.state){var c=we("div",{id:this.pdfViewer.element.id+"status_container",className:"e-pv-status-container"}),u=we("div",{id:this.pdfViewer.element.id+"status_div",className:"e-pv-status-div"}),f=we("span",{id:this.pdfViewer.element.id+"status_icon"});u.appendChild(f),c.appendChild(u),a.appendChild(c),this.updateStatusContainer(e.state,f,u,c)}if(e.comments){for(p=0;p<e.comments.length;p++)this.renderComments(e.comments[p],this.commentsContainer,!0,null,!0);e.comments.length>0&&this.createCommentDiv(this.commentsContainer)}}return a.addEventListener("click",this.commentsDivClickEvent.bind(this)),a.addEventListener("mouseover",this.commentDivMouseOver.bind(this)),a.addEventListener("mouseleave",this.commentDivMouseLeave.bind(this)),a.addEventListener("mouseout",this.commentDivMouseLeave.bind(this)),a.addEventListener("focusout",this.commentDivMouseLeave.bind(this)),l.addEventListener("dblclick",this.openEditorElement.bind(this)),this.commentsContainer.id},e.prototype.modifyProperty=function(e){var t=e.element.parentElement.id,i=e.element.parentElement.parentElement.id,n=e.element.previousSibling.firstChild;this.updateModifiedDate(n),this.modifyCommentsProperty(e.value,t,i,e.prevValue)},e.prototype.createTitleContainer=function(e,t,i,n,o,s,a){var r,l=this.getAnnotationType(t),d=we("div",{id:this.pdfViewer.element.id+"_commentTitleConatiner_"+i+"_"+this.commentsCount,className:"e-pv-comment-title-container"}),h=we("span",{id:this.pdfViewer.element.id+"_commenttype_icon"+i+"_"+this.commentsCount});h.style.opacity="0.6",this.updateCommentIcon(h,l,n),r=s||this.pdfViewer.annotationModule.updateAnnotationAuthor(l,n),h.style.padding="8px",h.style.cssFloat="left",d.appendChild(h);var p=we("div",{id:this.pdfViewer.element.id+"_commentTitle_"+i+"_"+this.commentsCount,className:"e-pv-comment-title"});p.textContent=o?r+" - "+this.convertUTCDateToLocalDate(o):r+" - "+this.setModifiedDate(),d.appendChild(p),this.moreButtonId=this.pdfViewer.element.id+"_more-options_"+this.commentsCount+"_"+this.commentsreplyCount;var c=we("button",{id:this.moreButtonId,className:"e-pv-more-options-button e-btn",attrs:{tabindex:"-1"}});c.style.visibility="hidden",c.style.zIndex="1001",c.setAttribute("type","button"),c.setAttribute("aria-label","more button");var u=we("span",{id:this.pdfViewer.element.id+"_more-options_icon",className:"e-pv-more-icon e-pv-icon"});c.appendChild(u),u.style.opacity="0.87",d.appendChild(c),e.appendChild(d);var f=e.parentElement;if(f){var m=this.pdfViewer.annotationModule.updateAnnotationAuthor(l,n);f.setAttribute("author",m)}return this.isCreateContextMenu||this.createCommentContextMenu(),this.isCreateContextMenu=!0,d.addEventListener("dblclick",this.openTextEditor.bind(this)),c.addEventListener("mouseup",this.moreOptionsClick.bind(this)),l},e.prototype.createReplyDivTitleContainer=function(e,t,i){var n=we("div",{id:this.pdfViewer.element.id+"_replyTitleConatiner_"+this.commentsCount+"_"+this.commentsreplyCount,className:"e-pv-reply-title-container"}),o=we("div",{id:this.pdfViewer.element.id+"_replyTitle_"+this.commentsCount+"_"+this.commentsreplyCount,className:"e-pv-reply-title"});o.textContent=t?i+" - "+this.setExistingAnnotationModifiedDate(t):i+" - "+this.setModifiedDate(),n.appendChild(o),this.moreButtonId=this.pdfViewer.element.id+"_more-options_"+this.commentsCount+"_"+this.commentsreplyCount;var s=we("button",{id:this.moreButtonId,className:"e-pv-more-options-button e-btn",attrs:{tabindex:"-1"}});s.style.visibility="hidden",s.style.zIndex="1001",s.setAttribute("type","button"),s.setAttribute("aria-label","more button");var a=we("span",{id:this.pdfViewer.element.id+"_more-options_icon",className:"e-pv-more-icon e-pv-icon"});s.appendChild(a),a.style.opacity="0.87",n.appendChild(s),e.appendChild(n),n.addEventListener("dblclick",this.openTextEditor.bind(this)),s.addEventListener("mouseup",this.moreOptionsClick.bind(this))},e.prototype.updateCommentIcon=function(e,t,i){"sticky"===t?e.className="e-pv-comment-icon e-pv-icon":"stamp"===t?e.className="e-pv-stamp-icon e-pv-icon":"shape"===t?e.className="Line"===i?"e-pv-shape-line-icon e-pv-icon":"LineWidthArrowHead"===i||"Arrow"===i?"e-pv-shape-arrow-icon e-pv-icon":"Circle"===i||"Ellipse"===i||"Oval"===i?"e-pv-shape-circle-icon e-pv-icon":"Rectangle"===i||"Square"===i?"e-pv-shape-rectangle-icon e-pv-icon":"Polygon"===i?"e-pv-shape-pentagon-icon e-pv-icon":"e-pv-annotation-shape-icon e-pv-icon":"measure"===t?e.className="Distance"===i||"Distance calculation"===i?"e-pv-calibrate-distance-icon e-pv-icon":"Perimeter"===i||"Perimeter calculation"===i?"e-pv-calibrate-perimeter-icon e-pv-icon":"Radius"===i||"Radius calculation"===i?"e-pv-calibrate-radius-icon e-pv-icon":"Area"===i||"Area calculation"===i?"e-pv-calibrate-area-icon e-pv-icon":"Volume"===i||"Volume calculation"===i?"e-pv-calibrate-volume-icon e-pv-icon":"e-pv-annotation-calibrate-icon e-pv-icon":"textMarkup"===t?e.className="Highlight"===i?"e-pv-highlight-icon e-pv-icon":"Underline"===i?"e-pv-underline-icon e-pv-icon":"Strikethrough"===i?"e-pv-strikethrough-icon e-pv-icon":"e-pv-annotation-icon e-pv-icon":"freeText"===t?e.className="e-pv-freetext-icon e-pv-icon":"ink"!==t&&"Ink"!==i||(e.className="e-pv-inkannotation-icon e-pv-icon")},e.prototype.updateStatusContainer=function(e,t,i,n){"Accepted"===e?(i.style.backgroundColor="rgb(24,169,85)",t.className="e-pv-accepted-icon"):"Completed"===e?(i.style.backgroundColor="rgb(0,122,255)",t.className="e-pv-completed-icon"):"Cancelled"===e?(i.style.backgroundColor="rgb(245,103,0)",t.className="e-pv-cancelled-icon"):"Rejected"===e?(i.style.backgroundColor="rgb(255,59,48)",t.className="e-pv-rejected-icon"):(t.className="",n.parentElement.removeChild(n))},e.prototype.updateAccordionContainer=function(e){var t=parseInt(e.accessKey.split("_")[0]),i=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+t);i&&i.parentElement.removeChild(i);var n=document.getElementById(this.pdfViewer.element.id+"_accordionContentContainer");n&&0===n.childElementCount&&(n.style.display="none",document.getElementById(this.pdfViewer.element.id+"_commentsPanelText")&&(this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export Annotations")],!1),this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export XFDF")],!1),document.getElementById(this.pdfViewer.element.id+"_commentsPanelText").style.display="block",this.updateCommentPanelTextTop()))},e.prototype.createCommentContextMenu=function(){this.commentContextMenu=[{text:this.pdfViewer.localeObj.getConstant("Edit")},{text:this.pdfViewer.localeObj.getConstant("Delete Context")},{text:this.pdfViewer.localeObj.getConstant("Set Status"),items:[{text:this.pdfViewer.localeObj.getConstant("None")},{text:this.pdfViewer.localeObj.getConstant("Accepted")},{text:this.pdfViewer.localeObj.getConstant("Cancelled")},{text:this.pdfViewer.localeObj.getConstant("Completed")},{text:this.pdfViewer.localeObj.getConstant("Rejected")}]}];var e=we("ul",{id:this.pdfViewer.element.id+"_comment_context_menu"});this.pdfViewer.element.appendChild(e),this.commentMenuObj=new bd({target:"#"+this.moreButtonId,items:this.commentContextMenu,beforeOpen:this.contextMenuBeforeOpen.bind(this),select:this.commentMenuItemSelect.bind(this)}),this.pdfViewer.enableRtl&&(this.commentMenuObj.enableRtl=!0),this.commentMenuObj.appendTo(e),ge.isDevice&&!this.pdfViewer.enableDesktopMode?this.commentMenuObj.animationSettings.effect="ZoomIn":this.commentMenuObj.animationSettings.effect="SlideDown"},e.prototype.contextMenuBeforeOpen=function(e){var t,i=document.querySelectorAll(".e-pv-more-options-button");if(i)for(var n=0;n<i.length;n++)"visible"===i[n].style.visibility&&(t=i[n].parentElement.nextSibling);this.checkIslockProperty(t)?(this.commentMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Edit")],!1),this.commentMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Delete Context")],!1)):(this.commentMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Edit")],!0),this.commentMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Delete Context")],!0))},e.prototype.commentMenuItemSelect=function(e){var t,i=document.querySelectorAll(".e-pv-more-options-button");if(i){for(var n=0;n<i.length;n++)"visible"===i[n].style.visibility&&(t=i[n].parentElement.nextSibling);if(e.item)switch(e.item.text){case this.pdfViewer.localeObj.getConstant("Edit"):var o=document.querySelectorAll(".e-pv-new-comments-div");for(n=0;n<o.length;n++)o[n].style.display="none";t.ej2_instances[0].enableEditMode=!0;break;case this.pdfViewer.localeObj.getConstant("Delete Context"):t.parentElement.parentElement.firstChild===t.parentElement?this.pdfViewer.annotationModule.deleteAnnotation():this.modifyCommentDeleteProperty(t.parentElement.parentElement,t.parentElement);break;case this.pdfViewer.localeObj.getConstant("Set Status"):break;case this.pdfViewer.localeObj.getConstant("Accepted"):t.parentElement.lastChild.id===this.pdfViewer.element.id+"status_container"&&t.parentElement.lastChild.remove();var s=we("div",{id:this.pdfViewer.element.id+"status_container",className:"e-pv-status-container"}),a=we("div",{id:this.pdfViewer.element.id+"status_div",className:"e-pv-status-div"}),r=we("span",{id:this.pdfViewer.element.id+"status_icon",className:"e-pv-accepted-icon"});a.style.backgroundColor="rgb(24,169,85)",a.appendChild(r),s.appendChild(a),t.parentElement.appendChild(s),this.modifyStatusProperty("Accepted",t.parentElement);break;case this.pdfViewer.localeObj.getConstant("Completed"):t.parentElement.lastChild.id===this.pdfViewer.element.id+"status_container"&&t.parentElement.lastChild.remove();var l=we("div",{id:this.pdfViewer.element.id+"status_container",className:"e-pv-status-container"}),d=we("div",{id:this.pdfViewer.element.id+"status_div",className:"e-pv-status-div"}),h=we("span",{id:this.pdfViewer.element.id+"status_icon",className:"e-pv-completed-icon"});d.style.backgroundColor="rgb(0,122,255)",d.appendChild(h),l.appendChild(d),t.parentElement.appendChild(l),this.modifyStatusProperty("Completed",t.parentElement);break;case this.pdfViewer.localeObj.getConstant("Cancelled"):t.parentElement.lastChild.id===this.pdfViewer.element.id+"status_container"&&t.parentElement.lastChild.remove();var p=we("div",{id:this.pdfViewer.element.id+"status_container",className:"e-pv-status-container"}),c=we("div",{id:this.pdfViewer.element.id+"status_div",className:"e-pv-status-div"}),u=we("span",{id:this.pdfViewer.element.id+"status_icon",className:"e-pv-cancelled-icon"});c.style.backgroundColor="rgb(245,103,0)",c.appendChild(u),p.appendChild(c),t.parentElement.appendChild(p),this.modifyStatusProperty("Cancelled",t.parentElement);break;case this.pdfViewer.localeObj.getConstant("Rejected"):t.parentElement.lastChild.id===this.pdfViewer.element.id+"status_container"&&t.parentElement.lastChild.remove();var f=we("div",{id:this.pdfViewer.element.id+"status_container",className:"e-pv-status-container"}),m=we("div",{id:this.pdfViewer.element.id+"status_div",className:"e-pv-status-div"}),g=we("span",{id:this.pdfViewer.element.id+"status_icon",className:"e-pv-rejected-icon"});m.style.backgroundColor="rgb(255,59,48)",m.appendChild(g),f.appendChild(m),t.parentElement.appendChild(f),this.modifyStatusProperty("Rejected",t.parentElement);break;case this.pdfViewer.localeObj.getConstant("None"):t.parentElement.lastChild.id===this.pdfViewer.element.id+"status_container"&&t.parentElement.lastChild.remove(),this.modifyStatusProperty("None",t.parentElement)}}},e.prototype.moreOptionsClick=function(e,t){if("block"!==document.getElementById(this.pdfViewer.element.id+"_comment_context_menu").style.display&&("e-pv-more-options-button e-btn"===e.currentTarget.className&&e.currentTarget.parentElement.nextSibling.lastChild.firstChild.click(),this.pdfViewer.annotationModule.checkContextMenuDeleteItem(this.commentMenuObj),this.commentMenuObj.open(e.clientY,e.clientX,e.currentTarget)),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){var i=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(i)}},e.prototype.openTextEditor=function(e){for(var t=document.querySelectorAll(".e-pv-new-comments-div"),i=0;i<t.length;i++)t[i].style.display="none";if(this.checkIslockProperty(e.currentTarget.nextSibling))e.currentTarget.nextSibling.ej2_instances[0].enableEditMode=!1;else if(e.currentTarget.parentElement.parentElement){var n=this.checkAnnotationSettings(e.currentTarget.parentElement.parentElement.id);if(n){var o=this.findAnnotationObject(e.currentTarget.parentElement.parentElement.id);this.pdfViewer.annotationModule.checkAllowedInteractions("Select",o)&&(n=!1)}n||(e.currentTarget.nextSibling.ej2_instances[0].enableEditMode=!0)}else e.currentTarget.nextSibling.ej2_instances[0].enableEditMode=!0},e.prototype.checkIslockProperty=function(e){var t,i=this.pdfViewer.annotationCollection;if(e.IsCommentLock)return!0;this.pdfViewer.annotationModule.textMarkupAnnotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?t=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation:this.pdfViewer.selectedItems.annotations[0]&&(t=this.pdfViewer.selectedItems.annotations[0]);for(var n=0;n<i.length;n++){var o=i[n].note?i[n].note:i[n].notes;if(!0===i[n].isCommentLock&&(e.textContent===o||i[n].dynamicText===e.textContent))return!0;for(var s=0;s<i[n].comments.length;s++)if(t&&i[n].annotationId===t.annotName&&!0===i[n].comments[s].isLock&&e.textContent===i[n].comments[s].note)return!0}return!1},e.prototype.openEditorElement=function(e){for(var t=document.querySelectorAll(".e-pv-new-comments-div"),i=0;i<t.length;i++)t[i].style.display="none";if(this.checkIslockProperty(e.currentTarget))e.currentTarget.ej2_instances[0].enableEditMode=!1;else if(e.currentTarget.parentElement.parentElement){var n=this.checkAnnotationSettings(e.currentTarget.parentElement.parentElement.id);if(n){var o=this.findAnnotationObject(e.currentTarget.parentElement.parentElement.id);this.pdfViewer.annotationModule.checkAllowedInteractions("Select",o)&&(n=!1)}n||(this.pdfViewer.selectedItems.annotations[0].isReadonly?e.currentTarget.ej2_instances[0].enableEditMode=!1:e.currentTarget.ej2_instances[0].enableEditMode=!0)}else e.currentTarget.ej2_instances[0].enableEditMode=!0},e.prototype.commentsDivClickEvent=function(e){var t=this.findAnnotationObject(e.currentTarget.parentElement.id),i=this.checkAnnotationSettings(e.currentTarget.parentElement.id);if(i&&this.pdfViewer.annotationModule.checkAllowedInteractions("Select",t)&&(i=!1),!i){var n=!1;if(0===e.clientX&&0===e.clientY?this.isSetAnnotationType=!0:this.isSetAnnotationType=!1,"e-pv-more-icon e-pv-icon"===e.target.className)return null;for(var o=document.querySelectorAll(".e-pv-more-options-button"),s=0;s<o.length;s++)o[s].style.visibility="hidden";"none"===document.getElementById(this.pdfViewer.element.id+"_commantPanel").style.display&&this.pdfViewer.annotationModule.showCommentsPanel(),e.currentTarget.parentElement.classList.contains("e-pv-comments-border")&&(n=!0),e.currentTarget.firstChild.lastChild.style.visibility="visible";var a=document.querySelectorAll(".e-pv-comments-border");if(a)for(var r=0;r<a.length;r++)a[r].classList.remove("e-pv-comments-border");e.currentTarget.parentElement.classList.add("e-pv-comments-border");var l=document.querySelectorAll(".e-pv-new-comments-div");for(s=0;s<l.length;s++)l[s].style.display="none";var d=e.currentTarget.parentElement.lastChild,h=e.currentTarget.parentElement;if(d){if(d.style.display="block",d.querySelector(".e-editable-inline")){this.isEditableElement||(d.querySelector(".e-editable-inline").style.display="block");for(s=0;s<h.childElementCount;s++){var p=h.childNodes[s].querySelector(".e-editable-inline");p&&""===p.style.display&&(d.style.display="none",d.querySelector(".e-editable-inline").style.display="none")}}this.isSetAnnotationType&&(n||this.updateCommentsScrollTop())}if(1===e.currentTarget.parentElement.childElementCount)if(this.pdfViewer.enableShapeLabel){var c=e.currentTarget.parentElement.getAttribute("name");this.isSetAnnotationType&&"shape"===c?e.currentTarget.childNodes[1].ej2_instances[0].enableEditMode=!1:e.currentTarget.childNodes[1].ej2_instances[0].enableEditMode=!0}else e.currentTarget.childNodes[1].ej2_instances[0].enableEditMode=!0;var u=void 0;e&&e.currentTarget&&e.currentTarget.childNodes[1]&&(u=e.currentTarget.childNodes[1].ej2_instances[0]),e.currentTarget&&e.currentTarget.id&&u&&(t&&t.isCommentLock&&(u.enableEditMode=!1,this.createCommentDiv(e.currentTarget)),this.pdfViewer.fireCommentSelect(e.currentTarget.id,e.currentTarget.childNodes[1].ej2_instances[0].value,t)),this.commentDivOnSelect(e),e.preventDefault()}},e.prototype.commentsDivDoubleClickEvent=function(e){for(var t=document.querySelectorAll(".e-pv-new-comments-div"),i=0;i<t.length;i++)t[i].style.display="none";if(this.checkIslockProperty(e.currentTarget.children[1]))2===e.currentTarget.childElementCount?e.currentTarget.lastChild.ej2_instances[0].enableEditMode=!1:e.currentTarget.childNodes[1].ej2_instances[0].enableEditMode=!1;else if(e.currentTarget){this.checkAnnotationSettings(e.currentTarget.parentElement.id)||(2===e.currentTarget.childElementCount?e.currentTarget.lastChild.ej2_instances[0].enableEditMode=!0:e.currentTarget.childNodes[1].ej2_instances[0].enableEditMode=!0)}},e.prototype.commentDivOnSelect=function(e){for(var t=document.querySelectorAll(".e-pv-comments-select"),i=0;i<t.length;i++)t[i].classList.remove("e-pv-comments-select");var n=document.getElementById(e.currentTarget.id);if(n&&(n.classList.remove("e-pv-comments-hover"),n.classList.remove("e-pv-comments-leave"),n.classList.add("e-pv-comments-select"),e.currentTarget.nextSibling&&e.currentTarget.nextSibling.classList.contains("e-pv-new-comments-div"))){var o=document.getElementById(e.currentTarget.nextSibling.id);o.classList.remove("e-pv-comments-hover"),o.classList.remove("e-pv-comments-leave"),o.classList.add("e-pv-comments-select")}},e.prototype.commentDivMouseOver=function(e){var t=document.getElementById(e.currentTarget.id);if(t&&(t.classList.remove("e-pv-comments-select"),t.classList.remove("e-pv-comments-leave"),t.classList.add("e-pv-comments-hover"),e.currentTarget.nextSibling&&e.currentTarget.nextSibling.classList.contains("e-pv-new-comments-div"))){var i=document.getElementById(e.currentTarget.nextSibling.id);i.classList.remove("e-pv-comments-select"),i.classList.remove("e-pv-comments-leave"),i.classList.add("e-pv-comments-hover")}},e.prototype.commentDivMouseLeave=function(e){var t=document.getElementById(e.currentTarget.id);if(t&&(t.classList.remove("e-pv-comments-hover"),t.classList.remove("e-pv-comments-select"),t.classList.add("e-pv-comments-leave"),e.currentTarget.nextSibling&&e.currentTarget.nextSibling.classList.contains("e-pv-new-comments-div"))){var i=document.getElementById(e.currentTarget.nextSibling.id);i.classList.remove("e-pv-comments-hover"),i.classList.remove("e-pv-comments-select"),i.classList.add("e-pv-comments-leave")}},e.prototype.drawIcons=function(e){if(this.pdfViewerBase.isCommentIconAdded){var t=this.pdfViewer.annotation.getEventPageNumber(e),i=this.pdfViewerBase.getElement("_pageDiv_"+t).getBoundingClientRect(),n=this.pdfViewerBase.getZoomFactor();this.pdfViewer.annotationModule.isFormFieldShape=!1,this.pdfViewer.annotation.stickyNotesAnnotationModule.drawStickyNotes((e.clientX-i.left)/n,(e.clientY-i.top)/n,30,30,t,null),this.pdfViewerBase.isCommentIconAdded=!1;var o=document.getElementById(this.pdfViewer.element.id+"_comment");if(S()&&(o=o.children[0]),o&&o.classList.contains("e-pv-select"))o.classList.remove("e-pv-select");else{var s=document.getElementById(this.pdfViewer.element.id+"_commentIcon");s&&(this.pdfViewer.enableRtl?s.className="e-pv-comment-icon e-pv-icon e-icon-left e-right":s.className="e-pv-comment-icon e-pv-icon e-icon-left")}}},e.prototype.addComments=function(e,t,i){return document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+t)||this.pdfViewer.annotation.stickyNotesAnnotationModule.createPageAccordion(t),this.pdfViewer.annotation.stickyNotesAnnotationModule.createCommentControlPanel(null,t,e,i)},e.prototype.commentsAnnotationSelect=function(e){var t=e.currentTarget,i=this.checkAnnotationSettings(t.id);if(i){var n=this.findAnnotationObject(t.id);this.pdfViewer.annotationModule.checkAllowedInteractions("Select",n)&&(i=!1)}if(!i){if(t.classList.contains("e-pv-comments-border")){for(var o=document.querySelectorAll(".e-pv-comments-div"),s=0;s<o.length;s++)o[s].style.minHeight="60px";1===e.currentTarget.childElementCount&&e.currentTarget.childNodes[0].querySelector(".e-editable-inline")&&(e.currentTarget.childNodes[0].style.minHeight=e.currentTarget.childNodes[0].clientHeight)}if("e-pv-more-icon e-pv-icon"===e.target.className||"e-pv-more-options-button e-btn"===e.target.className)return e.preventDefault(),null;var a=parseInt(t.accessKey.split("_")[0]);if(t.classList.contains("e-pv-comments-border"))this.isSetAnnotationType=!0;else{var r=document.querySelectorAll(".e-pv-comments-border");if(r)for(s=0;s<r.length;s++)r[s].classList.remove("e-pv-comments-border");(o=document.getElementById(t.id))&&o.classList.add("e-pv-comments-border");var l=document.querySelectorAll(".e-pv-new-comments-div");for(s=0;s<l.length;s++)l[s].style.display="none";if(o){var d=o.querySelector(".e-pv-new-comments-div");d&&(d.style.display="block")}var h=t.lastChild;if(this.isEditableElement=!1,h.querySelector(".e-editable-inline")){h.style.display="block",h.querySelector(".e-editable-inline").style.display="block";for(var p=0;p<t.childElementCount;p++){var c=t.childNodes[p].querySelector(".e-editable-inline");c&&""===c.style.display&&h.classList.contains("e-pv-new-comments-div")&&(this.isEditableElement=!0,h.style.display="none",h.querySelector(".e-editable-inline").style.display="none")}}this.isSetAnnotationType=!1,1===e.currentTarget.childElementCount&&(e.currentTarget.childNodes[0].childNodes[1].ej2_instances[0].enableEditMode=!0)}if(!this.isSetAnnotationType){this.pdfViewer.navigation&&this.pdfViewer.navigationModule.goToPage(a);var u=t.getAttribute("name");"null"!==u&&"Ink"!==u||(u="ink"),this.isCommentsSelected=!1,this.setAnnotationType(t.id,u,a),this.isCommentsSelected||(this.selectAnnotationObj={id:t.id,annotType:u,pageNumber:a})}}this.isSetAnnotationType=!1},e.prototype.findAnnotationObject=function(e){if(this.pdfViewer.annotationModule.textMarkupAnnotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)return this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;if(this.pdfViewer.selectedItems.annotations[0])return this.pdfViewer.selectedItems.annotations[0];var t=this.pdfViewer.annotationCollection;if(t)for(var i=0;i<t.length;i++)if(t[i].annotationId&&t[i].annotationId===e){if("textMarkup"===t[i].shapeAnnotationType)return t[i];t=this.pdfViewer.annotations;for(var n=0;n<t.length;n++)if(t[n].annotName&&t[n].annotName===e)return t[n]}},e.prototype.checkAnnotationSettings=function(e){var t=this.pdfViewer.annotationCollection;if(t){for(var i=0;i<t.length;i++)if(t[i].annotationId&&t[i].annotationId===e)return!(!t[i].annotationSettings||!t[i].annotationSettings.isLock);return!1}return!1},e.prototype.updateCommentsContainerWidth=function(){var e=document.getElementById(this.pdfViewer.element.id+"_accordionContentContainer"),t=document.getElementById(this.pdfViewer.element.id+"_commentscontentcontainer");e.style.width=t.clientWidth+"px"},e.prototype.selectCommentsAnnotation=function(e){this.selectAnnotationObj&&!this.isCommentsSelected&&this.selectAnnotationObj.pageNumber-1===e&&(this.setAnnotationType(this.selectAnnotationObj.id,this.selectAnnotationObj.annotType,this.selectAnnotationObj.pageNumber),this.selectAnnotationObj=null,this.isCommentsSelected=!0)},e.prototype.setAnnotationType=function(e,t,i){var n="measure"===t?"shape_measure":t;"freeText"===n&&(n="freetext");var o=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_"+n);if(this.pdfViewerBase.isStorageExceed&&(o=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_"+n]),o){var s=JSON.parse(o),a=this.pdfViewer.selectedItems.annotations[0],r=this.pdfViewer.annotationModule.getPageCollection(s,i-1);if(s[r])for(var l=s[r].annotations,d=0;d<l.length;d++){var h=l[d].annotationSelectorSettings;if(l[d].annotName===e){if(a&&this.pdfViewer.fireAnnotationUnSelect(a.annotName,a.pageIndex,a),this.pdfViewer.clearSelection(i-1),"textMarkup"===t){this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(i-1,!0);var p=this.pdfViewerBase.getElement("_annotationCanvas_"+(i-1));this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectAnnotation(l[d],p,i-1),this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation=l[d],this.pdfViewer.annotation.textMarkupAnnotationModule.selectTextMarkupCurrentPage=i-1,this.pdfViewer.annotation.textMarkupAnnotationModule.enableAnnotationPropertiesTool(!0),this.pdfViewer.toolbarModule&&this.pdfViewer.enableAnnotationToolbar&&(this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=!0,this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem))}else"stamp"===t?(this.pdfViewer.select([l[d].randomId],h),this.pdfViewer.annotation.onAnnotationMouseDown()):"sticky"===t?(this.pdfViewer.select([l[d].annotName],h),this.pdfViewer.annotation.onAnnotationMouseDown()):(this.pdfViewer.select([l[d].id],h),this.pdfViewer.annotation.onAnnotationMouseDown());if("textMarkup"===t){if(l[d].rect||l[d].bounds)if(f=this.pdfViewerBase.pageSize[i-1].top*this.pdfViewerBase.getZoomFactor()+this.pdfViewer.annotationModule.getAnnotationTop(l[d])*this.pdfViewerBase.getZoomFactor()){var c=(f-20).toString();this.pdfViewerBase.viewerContainer.scrollTop=parseInt(c)}}else{var u=l[d].bounds.top;"ink"===t&&(u=l[d].bounds.y);var f,m=((f=this.pdfViewerBase.pageSize[i-1].top*this.pdfViewerBase.getZoomFactor()+u*this.pdfViewerBase.getZoomFactor())-20).toString();this.pdfViewerBase.viewerContainer.scrollTop=parseInt(m)}this.isCommentsSelected=!0}}}},e.prototype.modifyTextProperty=function(e,t,i){var n,o=this.pdfViewer.annotationModule.textMarkupAnnotationModule;if(o&&o.currentTextMarkupAnnotation&&(n=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation),n?n.annotName!==i&&(n=this.pdfViewer.selectedItems.annotations[0]):n=this.pdfViewer.selectedItems.annotations[0],i&&n.annotName!==i)for(var s=0;s<this.pdfViewer.annotations.length;s++)if(i===this.pdfViewer.annotations[s].annotName){n=this.pdfViewer.annotations[s];break}if(n){var a=document.getElementById(n.annotName);if(a){var r=void 0;r=a.accessKey.split("_")[0]?parseInt(a.accessKey.split("_")[0]):this.pdfViewerBase.currentPageNumber;var l=a.getAttribute("name"),d=r-1,h=void 0,p=!1;if("FreeText"===n.shapeAnnotationType||this.pdfViewer.enableShapeLabel&&("shape"===l||"shape_measure"===l)){var c=!1;i&&n.annotName!==i&&(this.pdfViewer.annotation.modifyDynamicTextValue(e,i),c=!0),c||("FreeText"===n.shapeAnnotationType?(n.dynamicText!==e&&this.pdfViewer.annotation.modifyDynamicTextValue(e,n.annotName),n.dynamicText=e):(this.pdfViewer.annotation.modifyDynamicTextValue(e,n.annotName),n.labelContent=e,n.notes=e),this.pdfViewer.nodePropertyChange(n,{}))}if(n.measureType&&""!==n.measureType?(h=this.getAnnotations(d,null,"shape_measure"),p=!0):h=this.getAnnotations(d,null,n.shapeAnnotationType),null!==h&&"FreeText"!==n.shapeAnnotationType)for(s=0;s<h.length;s++)if(h[s].annotName===n.annotName){var u=qs(h[s]);if(null!==e&&h[s].note!==e)return this.pdfViewer.annotation.addAction(d,s,h[s],"Text Property Added","",u,h[s]),(n=h[s]).note=e,n.enableShapeLabel&&(n.labelContent=e),n.modifiedDate=this.getDateAndTime(),p?this.updateUndoRedoCollections(n,d,"shape_measure"):this.updateUndoRedoCollections(n,d),t&&""!==t?this.pdfViewer.fireCommentEdit(n.annotName,n.note,n):this.pdfViewer.fireCommentAdd(n.annotName,n.note,n),n}}}},e.prototype.getDateAndTime=function(e){e||(e=new Date),this.globalize=new ee;var t={format:this.pdfViewer.dateTimeFormat,type:"dateTime"};return this.globalize.formatDate(new Date(e),t)},e.prototype.modifyCommentsProperty=function(e,t,i,n){var o;if(o=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation:this.pdfViewer.selectedItems.annotations[0]){var s=document.getElementById(o.annotName),a=parseInt(s.accessKey.split("_")[0])-1,r=void 0,l=!1,d=this.getAuthorName(o,s);if(o.measureType&&""!==o.measureType?(r=this.getAnnotations(a,null,"shape_measure"),l=!0):r=this.getAnnotations(a,null,o.shapeAnnotationType),null!==r)for(var h=0;h<r.length;h++)r[h].annotName===o.annotName&&(o=r[h]);var p=qs(o);if(o.comments.length>0){for(var c=!1,u=0;u<o.comments.length;u++)o.comments[u].annotName===t&&(c=!0,o.comments[u].note=e,o.comments[u].modifiedDate=this.getDateAndTime());var f={annotName:t,parentId:i,subject:"Comments",comments:[],author:d,note:e,shapeAnnotationType:"",state:"",stateModel:"",modifiedDate:this.getDateAndTime(),review:{state:"",stateModel:"",modifiedDate:this.getDateAndTime(),author:d},isLock:!1};c||(o.comments[o.comments.length]=f)}else{f={annotName:t,parentId:i,subject:"Comments",comments:[],author:d,note:e,shapeAnnotationType:"",state:"",stateModel:"",modifiedDate:this.getDateAndTime(),review:{state:"",stateModel:"",modifiedDate:this.getDateAndTime(),author:d},isLock:!1};o.comments[o.comments.length]=f}this.pdfViewer.annotation.addAction(a,null,o,"Comments Property Added","",p,o),l?this.updateUndoRedoCollections(o,a,"shape_measure"):this.updateUndoRedoCollections(o,a)}void 0!==n?this.pdfViewer.fireCommentEdit(t,e,o):this.pdfViewer.fireCommentAdd(t,e,o)},e.prototype.modifyStatusProperty=function(e,t){var i;if(i=this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation?this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation:this.pdfViewer.selectedItems.annotations[0]){var n=document.getElementById(i.annotName),o=parseInt(n.accessKey.split("_")[0])-1,s=void 0,a=!1,r=n.getAttribute("author");if(i.measureType&&""!==i.measureType?(s=this.getAnnotations(o,null,"shape_measure"),a=!0):s=this.getAnnotations(o,null,i.shapeAnnotationType),null!==s)for(var l=0;l<s.length;l++)s[l].annotName===i.annotName&&(i=s[l]);var d=qs(i);if(t.parentElement.firstChild.id===t.id)i.review={state:e,stateModel:"Review",author:r,modifiedDate:this.getDateAndTime(),annotId:t.id},i.state=e,i.stateModel="Review",this.pdfViewer.annotation.addAction(o,null,i,"Status Property Added","",d,i),this.pdfViewer.fireCommentStatusChanged(t.id,i.note,i,i.state);else for(var h=0;h<i.comments.length;h++)if(i.comments[h].annotName===t.id){var p=qs(i.comments[h]);i.comments[h].state=e,i.comments[h].stateModel="Review",i.comments[h].review={state:e,stateModel:"Review",author:r,modifiedDate:this.getDateAndTime(),annotId:t.id},this.pdfViewer.annotation.addAction(o,null,i,"Status Property Added","",p,i.comments[h]),this.pdfViewer.fireCommentStatusChanged(i.comments[h].annotName,i.comments[h].note,i,i.comments[h].state)}a?this.updateUndoRedoCollections(i,o,"shape_measure"):this.updateUndoRedoCollections(i,o)}},e.prototype.modifyCommentDeleteProperty=function(e,t){var i,n,o,s=document.getElementById(e.id);if(s){var a=parseInt(s.accessKey.split("_")[0])-1,r=e.getAttribute("name"),l=this.getAnnotations(a,null,r);if(null!==l)for(var d=0;d<l.length;d++)l[d].annotName===e.id&&(o=l[d]);for(d=1;d<s.childElementCount;d++)if(s.childNodes[d].id===t.id){n=qs(o);var h=d-1;o.comments[h].position=d,i=qs(o.comments[h]),this.pdfViewer.fireCommentDelete(o.comments[h].annotName,o.comments[h].note,o),o.comments.splice(h,1),t.remove()}this.pdfViewer.annotation.addAction(a,null,n,"Comments Reply Deleted","",i,o),this.updateUndoRedoCollections(o,a)}},e.prototype.updateOpacityValue=function(e){var t=this.getAnnotations(e.pageIndex,null,e.shapeAnnotationType);if(this.pdfViewer.annotationModule.isFormFieldShape=!1,null!==t)for(var i=0;i<t.length;i++)t[i].annotName===e.annotName&&(t[i].opacity=e.opacity,this.updateUndoRedoCollections(t[i],e.pageIndex))},e.prototype.undoAction=function(e,t,i){if("Text Property Added"===t){if(e&&(p=document.getElementById(e.annotName))){var n=parseInt(p.accessKey.split("_")[0])-1,o=qs(e);p.firstChild.firstChild.nextSibling.ej2_instances[0].value=i.note;var s=i.note;return e.note=s,2===p.childElementCount&&(p.lastChild.style.display="block"),this.updateUndoRedoCollections(e,n),o}}else if("Comments Property Added"===t){if(e.comments.length>0){var a=document.getElementById(e.annotName);n=this.pdfViewerBase.currentPageNumber-1;if(a)n=parseInt(a.accessKey.split("_")[0])-1;o=qs(e);var r=e.comments[e.comments.length-1],l=document.getElementById(r.annotName);return l&&l.remove(),e=i,this.updateUndoRedoCollections(e,n),o}}else if("Status Property Added"===t){if(e){a=document.getElementById(e.annotName),n=this.pdfViewerBase.currentPageNumber-1;if(a)n=parseInt(a.accessKey.split("_")[0])-1;o=qs(e);if(e.annotName===i.annotName)e.review=i.review,e.state=i.state,e.stateModel=i.stateModel,this.pdfViewer.annotation.redoCommentsElement.push(e);else for(var d=0;d<e.comments.length;d++)if(e.comments[d].annotName===i.annotName){e.comments[d].state=i.state,e.comments[d].stateModel=i.stateModel,e.comments[d].review=i.review,this.pdfViewer.annotation.redoCommentsElement.push(e.comments[d]);break}var h=document.getElementById(i.annotName);return h.lastChild.id===this.pdfViewer.element.id+"status_container"?h.lastChild.remove():h.firstChild.lastChild.id===this.pdfViewer.element.id+"status_container"&&h.firstChild.lastChild.remove(),this.updateUndoRedoCollections(e,n),o}}else if("Comments Reply Deleted"===t){if(a=document.getElementById(e.annotName)){n=parseInt(a.accessKey.split("_")[0])-1;return this.renderComments(i,a,!0,e.annotName),this.pdfViewer.annotation.redoCommentsElement.push(i),this.updateUndoRedoCollections(e,n),e}}else if("dynamicText Change"===t){var p;if(e)if(p=document.getElementById(e.annotName))return p.firstChild.firstChild.nextSibling.ej2_instances[0].value=i.dynamicText,e}},e.prototype.redoAction=function(e,t,i){if("Text Property Added"===t){if(g=document.getElementById(e.annotName)){var n=parseInt(g.accessKey.split("_")[0])-1;return g.firstChild.firstChild.nextSibling.ej2_instances[0].value=e.note,g.lastChild.style.display="block",this.updateUndoRedoCollections(e,n),e}}else if("Comments Property Added"===t){var o=e.comments[e.comments.length-1],s=document.getElementById(e.annotName);if(s){n=parseInt(s.accessKey.split("_")[0])-1;return this.renderComments(o,s,!0,e.annotName),this.updateUndoRedoCollections(e,n),e}}else{if("Status Property Added"===t){var a=this.pdfViewer.annotation.redoCommentsElement.pop();n=this.pdfViewerBase.currentPageNumber-1;if(a){var r=we("div",{id:this.pdfViewer.element.id+"status_container",className:"e-pv-status-container"}),l=we("div",{id:this.pdfViewer.element.id+"status_div",className:"e-pv-status-div"}),d=we("span",{id:this.pdfViewer.element.id+"status_icon"});if(l.appendChild(d),r.appendChild(l),u=document.getElementById(e.annotName))n=parseInt(u.accessKey.split("_")[0])-1;if(e.annotName===a.annotName){this.updateStatusContainer(e.state,d,l,r);for(var h=0;h<u.firstChild.children.length;h++)u.firstChild.children[h].id===this.pdfViewer.element.id+"status_container"&&u.firstChild.children[h].parentElement.removeChild(u.firstChild.children[h]);u.firstChild.appendChild(r)}else for(h=0;h<e.comments.length;h++)if(e.comments[h].annotName===a.annotName){this.updateStatusContainer(e.comments[h].state,d,l,r);for(var p=document.getElementById(a.annotName),c=0;c<p.children.length;c++)p.children[c].id===this.pdfViewer.element.id+"status_container"&&p.children[c].parentElement.removeChild(p.children[c]);p&&p.appendChild(r)}}return this.updateUndoRedoCollections(e,n),e}if("Comments Reply Deleted"===t){var u;n=this.pdfViewerBase.currentPageNumber-1;if(u=document.getElementById(e.annotName))n=parseInt(u.accessKey.split("_")[0])-1;a=this.pdfViewer.annotation.redoCommentsElement.pop();var f=qs(e);for(h=0;h<e.comments.length;h++)if(e.comments[h].annotName===a.annotName){var m=document.getElementById(a.annotName);e.comments.splice(h,1),m.remove()}return this.updateUndoRedoCollections(e,n),f}var g;if("dynamicText Change"===t&&e&&(g=document.getElementById(e.annotName)))return g.firstChild.firstChild.nextSibling.ej2_instances[0].value=e.dynamicText,e}},e.prototype.updateUndoRedoCollections=function(e,t,i,n){var o=i||e.shapeAnnotationType;e.indent&&""!==e.indent&&(o="shape_measure");var s=this.getAnnotations(t,null,o);if(null!==s){for(var a=0;a<s.length;a++)e.annotName===s[a].annotName&&(s[a]=e,this.pdfViewer.annotationModule.storeAnnotationCollections(s[a],t),n&&(s.splice(a,1),this.deleteStickyNotesAnnotations(s,t)));"shape_measure"===o?this.manageAnnotations(s,t,"shape_measure"):this.manageAnnotations(s,t,e.shapeAnnotationType)}},e.prototype.addAnnotationComments=function(e,t){var i=e+1,n=this.pdfViewer.annotation.undoCommentsElement.pop();n&&(this.createCommentsContainer(n,i),this.updateUndoRedoCollections(n,e,t))},e.prototype.findPosition=function(e,t,i){var n,o=document.getElementById(e.annotName);if(o){for(var s=parseInt(o.accessKey.split("_")[0])-1,a=o.parentElement,r=0;r<a.childElementCount;r++)a.childNodes[r].id===e.annotName&&(n=r);"Stamp"===t||"Image"===t?t="stamp":"FreeText"===t?t="freetext":"StickyNotes"===t||"sticky"===t?t="sticky":"Ink"===t&&(t="ink");var l=this.getAnnotations(s,null,t);if(null!==l)for(r=0;r<l.length;r++)if(l[r].annotName===e.annotName){var d=qs(l[r]);l[r].position=n,this.pdfViewer.annotation.undoCommentsElement.push(l[r]),"sticky"===t&&this.updateUndoRedoCollections(d,s,null,i)}}},e.prototype.getAnnotations=function(e,t,i){var n;i="Stamp"===i||"stamp"===i||"Image"===i?"stamp":"StickyNotes"===i||"sticky"===i?"sticky":"textMarkup"===i?"textMarkup":"shape"===i||"Line"===i||"Radius"===i||"Rectangle"===i||"Ellipse"===i||"Polygon"===i||"LineWidthArrowHead"===i||"Square"===i||"Circle"===i?"shape":"FreeText"===i||"freetext"===i||"freeText"===i?"freetext":"ink"===i||"Ink"===i?"ink":"shape_measure";var o=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_"+i);if(this.pdfViewerBase.isStorageExceed&&(o=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_"+i]),o){var s=JSON.parse(o),a=this.pdfViewer.annotationModule.getPageCollection(s,e);n=s[a]?s[a].annotations:t}else n=t;return n},e.prototype.manageAnnotations=function(e,t,i){i="Stamp"===i||"stamp"===i?"stamp":"Sticky"===i||"sticky"===i?"sticky":"textMarkup"===i?"textMarkup":"shape"===i||"Line"===i||"Radius"===i||"Rectangle"===i||"Ellipse"===i||"Polygon"===i||"LineWidthArrowHead"===i||"Square"===i||"Circle"===i?"shape":"FreeText"===i?"freetext":"ink"===i||"Ink"===i?"ink":"shape_measure";var n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_"+i);if(this.pdfViewerBase.isStorageExceed&&(n=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_"+i]),n){var o=JSON.parse(n);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_"+i);var s=this.pdfViewer.annotationModule.getPageCollection(o,t);o[s]&&(o[s].annotations=e);var a=JSON.stringify(o);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_"+i]=a:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_"+i,a)}},e.prototype.updateStickyNotes=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sticky");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sticky"]),i)for(var n=e.bounds,o=JSON.parse(i),s=0;s<o.length;s++)for(var a=o[s],r=0;r<a.annotations.length;r++)if(o[s].annotations[r].annotName===e.annotName){this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_sticky"),o[this.pdfViewer.annotationModule.getPageCollection(o,0)]&&(o[s].annotations[r].bounds={left:n.x,top:n.y,width:n.width,height:n.height,right:n.right,bottom:n.bottom});var l=JSON.stringify(o);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sticky"]=l:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_sticky",l);break}},e.prototype.saveStickyAnnotations=function(){var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sticky");this.pdfViewerBase.isStorageExceed&&(e=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sticky"]);for(var t=new Array,i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e&&!this.pdfViewer.annotationSettings.skipDownload)for(var n=JSON.parse(e),o=0;o<n.length;o++){var s=[],a=n[o];if(a){for(var r=0;a.annotations.length>r;r++)this.pdfViewer.annotationModule.updateModifiedDate(a.annotations[r]),a.annotations[r].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(a.annotations[r].bounds,a.pageIndex));s=a.annotations}t[a.pageIndex]=s}return JSON.stringify(t)},e.prototype.deleteStickyNotesAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sticky");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sticky"]),i){var n=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_sticky");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[o]&&(n[o].annotations=e);var s=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sticky"]=s:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_sticky",s)}},e.prototype.addStickyNotesAnnotations=function(e,t){var i=this.getAnnotations(e,null,"sticky");i&&i.push(t),this.manageAnnotations(i,e,"sticky")},e.prototype.addTextToComments=function(e,t){var i=document.getElementById(e);i&&(i.firstChild.firstChild.nextSibling.ej2_instances[0].value=t)},e.prototype.updateAnnotationCollection=function(e,t,i){var n=this.findAnnotationType(t),o=this.getAnnotations(t.pageIndex,null,n);if(i&&(o=this.pdfViewer.annotationModule.removedAnnotationCollection),null!==o)for(var s=0;s<o.length;s++)if(i&&!o[s].annotName&&(o[s].annotName=o[s].annotationId),o[s].annotName===t.annotName){var a=qs(o[s]);a.annotName=e.annotName,"shape"!==n&&"shape_measure"!==n&&"freetext"!==n&&"ink"!==n||(a.id=e.id),"stamp"===n&&(a.randomId=e.id),"ink"===n?(a.bounds.x=e.bounds.x,a.bounds.y=e.bounds.y):(a.bounds.left=e.bounds.x,a.bounds.top=e.bounds.y,a.vertexPoints=e.vertexPoints),a.note=a.note?a.note:"",a.comments=[],a.review={state:"",stateModel:"",modifiedDate:a.ModifiedDate,author:a.author},a.state="",a.stateModel="",a.pageNumber=t.pageIndex,this.pdfViewer.annotationModule.storeAnnotations(t.pageIndex,a,"_annotations_"+n),this.createCommentsContainer(a,t.pageIndex+1,!0),i&&(this.pdfViewer.annotationModule.removedAnnotationCollection=[]);break}},e.prototype.findAnnotationType=function(e){return""!==e.measureType?"shape_measure":"StickyNotes"===e.shapeAnnotationType?"sticky":"Stamp"===e.shapeAnnotationType||"Image"===e.shapeAnnotationType?"stamp":"FreeText"===e.shapeAnnotationType?"freetext":"Ink"===e.shapeAnnotationType?"ink":"shape"},e.prototype.setExistingAnnotationModifiedDate=function(e){return""!==e?this.setModifiedDate(e):this.setModifiedDate()},e.prototype.updateModifiedTime=function(e,t){return e>=12?12===e?e+":"+t+" PM":e-12+":"+t+" PM":e+":"+t+" AM"},e.prototype.setModifiedDate=function(e){var t;t=e?this.getDateAndTime(e):this.getDateAndTime();var i,n=new Date(t),o=n.toString().split(" ").splice(1,2).join(" ");if(2===n.toLocaleTimeString().split(" ").length)i=n.toLocaleTimeString().split(" ")[0].split(":").splice(0,2).join(":")+" "+n.toLocaleTimeString().split(" ")[1];else{var s=parseInt(n.toLocaleTimeString().split(":")[0]),a=n.toLocaleTimeString().split(":")[1];i=this.updateModifiedTime(s,a)}return o+", "+i},e.prototype.convertUTCDateToLocalDate=function(e){var t=new Date(Date.parse(e));this.globalize=new ee(this.pdfViewer.locale);var i,n=t.toLocaleTimeString(this.globalize.culture);return i=m(n.split(" ")[1])?n.split(":").splice(0,2).join(":"):n.split(":").splice(0,2).join(":")+" "+n.split(" ")[1],t.toLocaleDateString("default",{month:"short",day:"numeric"})+", "+i},e.prototype.updateModifiedDate=function(e){e.id===this.pdfViewer.element.id+"_commenttype_icon"&&(e=e.nextSibling);var t=e.textContent.split("-")[0];e.textContent=t+" - "+this.setModifiedDate()},e.prototype.updateAnnotationModifiedDate=function(e,t,i){var n;if(e){var o=document.getElementById(e.annotName);if(o){if(t){var s=this.findAnnotationType(e),a=this.getAnnotations(e.pageIndex,null,s);if(null!=a&&e)for(var r=0;r<a.length;r++){if(e.annotName===a[r].annotName&&(e.bounds.x!==a[r].bounds.left||e.bounds.y!==a[r].bounds.top||e.bounds.height!==a[r].bounds.height||e.bounds.width!==a[r].bounds.width)){l=(n=o.firstChild.firstChild.childNodes[1]).textContent.split("-")[0];n.textContent=l+" - "+this.setModifiedDate()}"sticky"===a[r].shapeAnnotationType&&this.pdfViewer.annotationModule.storeAnnotationCollections(a[r],e.pageIndex)}}else{var l=(n=o.firstChild.firstChild.childNodes[1]).textContent.split("-")[0];n.textContent=l+" - "+this.setModifiedDate()}if(i&&(n=o.firstChild.firstChild.childNodes[1],void 0!==e.modifiedDate)){l=n.textContent.split("-")[0];n.textContent=l+" - "+this.setExistingAnnotationModifiedDate(e.modifiedDate)}}}},e.prototype.saveImportedStickyNotesAnnotations=function(e,t){var i;e.Author||(e.Author="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stickyNotesSettings.author);var n=this.pdfViewer.stickyNotesSettings.isLock?this.pdfViewer.stickyNotesSettings.isLock:this.pdfViewer.annotationSettings.isLock,o=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e);i={shapeAnnotationType:"sticky",author:e.Author,allowedInteractions:o,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,opacity:e.Opacity,state:e.State,stateModel:e.StateModel,pathData:"",comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},pageNumber:t,bounds:{left:e.Bounds.X,top:e.Bounds.Y,width:e.Bounds.Width,height:e.Bounds.Height,right:e.Bounds.Right,bottom:e.Bounds.Bottom},annotName:e.AnnotName,color:e.color,annotationSelectorSettings:this.getSettings(e),customData:this.pdfViewer.annotation.getCustomData(e),annotationSettings:{isLock:n},isPrint:e.IsPrint,isCommentLock:e.IsCommentLock},this.pdfViewer.annotationModule.storeAnnotations(t,i,"_annotations_sticky")},e.prototype.updateStickyNotesAnnotationCollections=function(e,t){e.Author||(e.Author="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stickyNotesSettings.author);var i=this.pdfViewer.stickyNotesSettings.isLock?this.pdfViewer.stickyNotesSettings.isLock:this.pdfViewer.annotationSettings.isLock,n=e.AllowedInteraction?e.AllowedInteraction:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e);return e.IsLock&&(i=e.isLock),{shapeAnnotationType:"sticky",author:e.Author,allowedInteractions:n,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,opacity:e.Opacity,state:e.State,stateModel:e.StateModel,pathData:"",comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},bounds:{left:e.Bounds.X,top:e.Bounds.Y,width:e.Bounds.Width,height:e.Bounds.Height,right:e.Bounds.Right,bottom:e.Bounds.Bottom},annotationId:e.AnnotName,color:e.color,pageNumber:t,customData:this.pdfViewer.annotation.getCustomData(e),annotationSettings:{isLock:i},isPrint:e.IsPrint,isCommentLock:e.IsCommentLock}},e.prototype.clear=function(){this.commentsCount=0,this.commentsreplyCount=0,this.isAccordionContainer=!0,this.isEditableElement=!1,this.isCreateContextMenu=!1,this.isPageCommentsRendered=!1,this.isCommentsRendered=!1,this.isAnnotationRendered=!1,this.commentMenuObj&&this.commentMenuObj.destroy();var e=document.querySelectorAll(".e-pv-accordion-page-container");if(e)for(var t=0;t<e.length;t++)e[t].remove();this.commentsRequestHandler&&this.commentsRequestHandler.clear()},e.prototype.getModuleName=function(){return"StickyNotesAnnotation"},e.prototype.updateAddAnnotationDetails=function(e,t){t=e?e.offset?e.offset:{x:1,y:1}:(e={offset:{x:1,y:1},pageNumber:0}).offset;var i=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),n=this.pdfViewer.annotation.createGUID(),o=this.pdfViewer.stickyNotesSettings.annotationSelectorSettings?this.pdfViewer.stickyNotesSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,s=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stickyNotesSettings),a=this.pdfViewer.stickyNotesSettings.allowedInteractions?this.pdfViewer.stickyNotesSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;s.isLock=!!e.isLock&&e.isLock;var r=[],l={AllowedInteractions:e.allowedInteractions?e.allowedInteractions:a,AnnotName:n,AnnotType:"sticky",AnnotationFlags:null,AnnotationSelectorSettings:e.annotationSelectorSettings?e.annotationSelectorSettings:o,AnnotationSettings:s,Author:e.author?e.author:"Guest",Bounds:{X:t.x,Y:t.y,Width:30,Height:30,Left:t.x,Top:t.y,Location:{X:t.x,Y:t.y},Size:{Height:30,IsEmpty:!1,Width:30}},Color:{IsEmpty:!1,B:51,Blue:.2,C:0,G:255},Comments:null,CreatedDate:i,CustomData:e.customData?e.customData:null,ExistingCustomData:null,Icon:"Comment",IsCommentLock:!1,IsLock:!!e.isLock&&e.isLock,IsPrint:!e.isPrint||e.isPrint,ModifiedDate:i,Note:"",Opacity:e.opacity?e.opacity:1,Reference:null,Size:{IsEmpty:!0,Width:0,Height:0},State:"",StateModel:"",StrokeColor:null,SubType:null,Subject:"Sticky Note",Type:null};return r[0]=l,{stickyNotesAnnotation:r}},e.prototype.getAnnotationType=function(e){var t;return"stamp"===e||"Stamp"===e?t="stamp":"shape"===e||"Line"===e||"Radius"===e||"Rectangle"===e||"Ellipse"===e||"Polygon"===e||"LineWidthArrowHead"===e||"Square"===e||"Circle"===e?t="shape":"textMarkup"===e?t="textMarkup":"freeText"===e||"FreeText"===e?t="freeText":"sticky"===e||"StickyNotes"===e?t="sticky":"measure"===e||"shape_measure"===e?t="measure":"ink"!==e&&"Ink"!==e||(t="ink"),t},e.prototype.getAuthorName=function(e,t){var i;if(e){var n=e.shapeAnnotationType,o=this.getAnnotationType(n);i=this.pdfViewer.annotationModule.updateAnnotationAuthor(o,n)}else i=t.getAttribute("author");return i},e}(),bb=function(){function e(e,t){this.newObject=[],this.outputString="",this.inkAnnotationindex=[],this.isAddAnnotationProgramatically=!1,this.currentPageNumber="",this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.drawInk=function(){this.pdfViewerBase.disableTextSelectionMode(),this.pdfViewer.tool="Ink"},e.prototype.drawInkAnnotation=function(e){if(this.pdfViewerBase.isToolbarInkClicked){this.pdfViewerBase.isInkAdded=!0,this.pdfViewer.annotationModule.isFormFieldShape=!1;var t=isNaN(e)?this.pdfViewerBase.currentPageNumber-1:e;if(this.outputString&&""!==this.outputString){var i=this.addInk(t);this.pdfViewer.renderDrawing(void 0,t),this.pdfViewer.clearSelection(t),this.pdfViewer.select([i.id],i.annotationSelectorSettings),this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule&&this.pdfViewer.toolbar.annotationToolbarModule.enableSignaturePropertiesTools(!0),ge.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.enableToolbar&&this.pdfViewer.enableAnnotationToolbar&&this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools("Ink")}else this.outputString="",this.newObject=[],this.pdfViewerBase.isToolbarInkClicked=!1,this.pdfViewer.tool="";this.pdfViewerBase.isInkAdded=!1}},e.prototype.storePathData=function(){this.convertToPath(this.newObject),this.newObject=[]},e.prototype.drawInkInCanvas=function(e,t){""!==this.currentPageNumber&&parseInt(this.currentPageNumber)!==t&&(this.drawInkAnnotation(parseInt(this.currentPageNumber)),this.pdfViewerBase.isToolbarInkClicked=!0,this.pdfViewer.tool="Ink");var i=this.pdfViewerBase.getZoomFactor(),n=this.pdfViewerBase.getWindowDevicePixelRatio(),o=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+t).getContext("2d"),s=this.pdfViewer.inkAnnotationSettings.thickness?this.pdfViewer.inkAnnotationSettings.thickness:1,a=this.pdfViewer.inkAnnotationSettings.opacity?this.pdfViewer.inkAnnotationSettings.opacity:1,r=this.pdfViewer.inkAnnotationSettings.strokeColor?this.pdfViewer.inkAnnotationSettings.strokeColor:"#ff0000";(!ge.isDevice||ge.isDevice&&i<=.7)&&o.setTransform(n,0,0,n,0,0),o.beginPath(),o.lineJoin="round",o.lineCap="round",o.moveTo(e.prevPosition.x,e.prevPosition.y),o.lineTo(e.currentPosition.x,e.currentPosition.y),o.lineWidth=s*i>1?s*i:s,o.strokeStyle=r,o.globalAlpha=a,o.stroke(),o.arc(e.prevPosition.x,e.prevPosition.y,1,0,2*Math.PI,!0),o.closePath(),this.pdfViewerBase.prevPosition=e.currentPosition,this.newObject.push(e.currentPosition.x,e.currentPosition.y),this.currentPageNumber=t.toString()},e.prototype.convertToPath=function(e){this.movePath(e[0],e[1]),this.linePath(e[0],e[1]);for(var t=2;t<e.length;t+=2)this.linePath(e[t],e[t+1])},e.prototype.linePath=function(e,t){m(e)||m(t)||(this.outputString+="L"+e+","+t+" ")},e.prototype.movePath=function(e,t){m(e)||m(t)||(this.outputString+="M"+e+","+t+" ")},e.prototype.addInk=function(e){var t,i=this.calculateInkSize();this.pdfViewerBase.getZoomFactor();if(this.pdfViewerBase.isToolbarInkClicked){var n=this.pdfViewer.annotation.createGUID(),o=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),s=isNaN(e)?this.pdfViewerBase.currentPageNumber-1:e,a=this.pdfViewer.inkAnnotationSettings.thickness?this.pdfViewer.inkAnnotationSettings.thickness:1,r=this.pdfViewer.inkAnnotationSettings.opacity?this.pdfViewer.inkAnnotationSettings.opacity:1,l=this.pdfViewer.inkAnnotationSettings.strokeColor?this.pdfViewer.inkAnnotationSettings.strokeColor:"#ff0000",d=this.pdfViewer.inkAnnotationSettings.isLock?this.pdfViewer.inkAnnotationSettings.isLock:this.pdfViewer.annotationSettings.isLock,h="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.inkAnnotationSettings.author?this.pdfViewer.inkAnnotationSettings.author:"Guest",p=this.pdfViewer.inkAnnotationSettings.customData,c=this.pdfViewer.inkAnnotationSettings.isPrint,u=this.pdfViewer.inkAnnotationSettings.allowedInteractions?this.pdfViewer.inkAnnotationSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,f=this.pdfViewer.inkAnnotationSettings?this.pdfViewer.inkAnnotationSettings:this.pdfViewer.annotationSettings;t={id:"ink"+this.pdfViewerBase.inkCount,bounds:{x:i.x,y:i.y,width:i.width,height:i.height},pageIndex:s,data:this.outputString,customData:p,shapeAnnotationType:"Ink",opacity:r,strokeColor:l,thickness:a,annotName:n,comments:[],author:h,subject:"Ink",notes:"",review:{state:"",stateModel:"",modifiedDate:o,author:h},annotationSelectorSettings:this.getSelector("Ink",""),modifiedDate:o,annotationSettings:f,isPrint:c,allowedInteractions:u,isCommentLock:!1,isLocked:d};var m=this.pdfViewer.add(t),g={left:t.bounds.x,top:t.bounds.y,width:t.bounds.width,height:t.bounds.height},y={opacity:t.opacity,strokeColor:t.strokeColor,thickness:t.thickness,modifiedDate:t.modifiedDate,width:t.bounds.width,height:t.bounds.height,data:this.outputString};this.pdfViewerBase.inkCount++;var v=this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("ink",t.pageIndex+1,t.shapeAnnotationType);v&&(document.getElementById(v).id=n),t.annotName=n,this.pdfViewer.annotation.addAction(s,null,m,"Addition","",m,m),this.pdfViewer.annotationModule.storeAnnotations(s,t,"_annotations_ink"),this.pdfViewer.fireAnnotationAdd(t.pageIndex,t.annotName,"Ink",g,y),this.pdfViewerBase.isInkAdded&&(this.outputString="",this.newObject=[]),this.pdfViewerBase.isToolbarInkClicked=!1,this.pdfViewer.tool=""}return t},e.prototype.setAnnotationMode=function(){this.pdfViewerBase.isToolbarInkClicked?this.drawInkAnnotation():(this.pdfViewerBase.isToolbarInkClicked=!0,this.drawInk())},e.prototype.saveInkSignature=function(){for(var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_ink"),t=new Array,i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e)for(var n=JSON.parse(e),o=0;o<n.length;o++){var s=[],a=n[o];if(a){for(var r=0;a.annotations.length>r;r++){this.pdfViewer.annotationModule.updateModifiedDate(a.annotations[r]);var l=a.annotations[r].strokeColor;a.annotations[r].strokeColor=JSON.stringify(this.pdfViewerBase.signatureModule.getRgbCode(l)),a.annotations[r].bounds=JSON.stringify(this.pdfViewer.annotation.getInkBounds(a.annotations[r].bounds,a.pageIndex));var d=os(es(a.annotations[r].data));a.annotations[r].data=JSON.stringify(d)}s=a.annotations}t[a.pageIndex]=s}return JSON.stringify(t)},e.prototype.addInCollection=function(e,t){if(t){var i=this.getAnnotations(e,null);i&&i.push(t),this.manageInkAnnotations(i,e)}},e.prototype.calculateInkSize=function(){for(var e=-1,t=-1,i=-1,n=-1,o=es(this.outputString),s=this.pdfViewerBase.getZoomFactor(),a=0;a<o.length;a++){var r=o[a];if(-1===e)e=r.x,i=r.x,t=r.y,n=r.y;else{var l=r.x,d=r.y;e>=l&&(e=l),t>=d&&(t=d),i<=l&&(i=l),n<=d&&(n=d)}}return{x:e/s,y:t/s,width:(i-e)/s,height:(n-t)/s}},e.prototype.renderExistingInkSignature=function(e,t,i){var n,o=!1;if(!i)for(var s=0;s<this.inkAnnotationindex.length;s++)if(this.inkAnnotationindex[s]===t){o=!0;break}if(e&&!o){e.length>0&&-1===this.inkAnnotationindex.indexOf(t)&&this.inkAnnotationindex.push(t);for(var a=0;a<e.length;a++){var r=e[a];if(r){var l=r.PathData;i&&l&&("object"===typeof l&&l.length>1?l=ss(l):r.IsPathData||l.split("command").length<=1||(l=ss(JSON.parse(l)))),this.outputString=l;var d=this.calculateInkSize();this.outputString="";var h=0,p=1,c=r.Bounds;d&&(d.height<1?(h=c.Height?c.Height:c.height,p=c.Height?c.Height:c.height):d.width<1&&(h=c.Width?c.Width:c.width,p=c.Width?c.Width:c.width));var u=m(c.X)?c.x+h/2:c.X+h/2,f=m(c.Y)?c.y+h/2:c.Y+h/2,g=c.Width?c.Width-(p-1):c.width-(p-1),y=c.Height?c.Height-(p-1):c.height-(p-1),v=!!r.AnnotationSettings&&r.AnnotationSettings.isLock,w=r.AnnotationSelectorSettings?r.AnnotationSelectorSettings:this.getSelector(r,"Ink"),b=this.pdfViewer.annotation.getCustomData(r),S=!0;S=r.AnnotationSettings?r.AnnotationSettings.isPrint:this.pdfViewer.inkAnnotationSettings.isPrint,r.IsLocked&&(v=r.IsLocked),"Highlight"===r.Subject&&1===r.Opacity&&(r.Opacity=r.Opacity/2),r.allowedInteractions=r.AllowedInteractions?r.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(r),n={id:"ink"+this.pdfViewerBase.inkCount,bounds:{x:u,y:f,width:g,height:y},pageIndex:t,data:l,shapeAnnotationType:"Ink",opacity:r.Opacity,strokeColor:r.StrokeColor,thickness:r.Thickness,annotName:r.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(r.Comments,r,r.Author),author:r.Author,allowedInteractions:r.allowedInteractions,subject:r.Subject,modifiedDate:r.ModifiedDate,review:{state:"",stateModel:"",modifiedDate:r.ModifiedDate,author:r.Author},notes:r.Note,annotationSettings:{isLock:v},annotationSelectorSettings:w,customData:b,isPrint:S,isCommentLock:r.IsCommentLock},this.pdfViewer.add(n);var C=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+r.pageIndex);if(this.pdfViewer.renderDrawing(C,n.pageIndex),this.pdfViewer.annotationModule.storeAnnotations(n.pageIndex,n,"_annotations_ink"),this.isAddAnnotationProgramatically){var x={opacity:n.opacity,strokeColor:n.strokeColor,thickness:n.thickness,modifiedDate:n.modifiedDate,width:n.bounds.width,height:n.bounds.height,data:this.outputString};this.pdfViewer.fireAnnotationAdd(n.pageIndex,n.annotName,"Ink",c,x)}this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.signatureCount++,this.pdfViewerBase.inkCount++,this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.annotationMenuObj&&this.pdfViewer.isSignatureEditable&&(this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export Annotations")],!0),this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export XFDF")],!0))}}}},e.prototype.saveImportedInkAnnotation=function(e,t){var i,n=e.Bounds,o={x:n.X,y:n.Y,width:n.Width,height:n.Height},s=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),a=this.pdfViewer.annotation.getCustomData(e),r=this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),l={state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},d=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(e),h=this.getSettings(e),p=e.PathData;"object"===typeof p&&p.length>1?p=ss(p):e.IsPathData||p.split("command").length<=1||(p=ss(JSON.parse(p))),i={allowedInteractions:s,annotName:e.AnnotName,annotationSelectorSettings:h,annotationSettings:d,author:e.Author,bounds:o,customData:a,comments:r,data:p,id:"Ink",isCommentLock:e.IsCommentLock,isLocked:e.IsLocked,isPrint:e.IsPrint,modifiedDate:e.ModifiedDate,note:e.Note,opacity:e.Opacity,pageIndex:t,review:l,shapeAnnotationType:e.AnnotationType,strokeColor:e.StrokeColor,subject:e.Subject,thickness:e.Thickness},this.pdfViewer.annotationModule.storeAnnotations(t,i,"_annotations_ink")},e.prototype.getSettings=function(e){this.pdfViewer.annotationSelectorSettings;return e.AnnotationSelectorSettings?e.AnnotationSelectorSettings:this.getSelector(e.ShapeAnnotationType,e.Subject)},e.prototype.storeInkSignatureData=function(e,t){this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Addition","",t,t);var i,n=t.bounds.left?t.bounds.left:t.bounds.x,o=t.bounds.top?t.bounds.top:t.bounds.y;t.wrapper&&t.wrapper.bounds&&(n=t.wrapper.bounds.left,o=t.wrapper.bounds.top),i={id:t.id,bounds:{x:n,y:o,width:t.bounds.width,height:t.bounds.height},shapeAnnotationType:"Ink",opacity:t.opacity,thickness:t.thickness,strokeColor:t.strokeColor,pageIndex:t.pageIndex,data:t.data,annotName:t.annotName,comments:t.comments,author:t.author,subject:t.subject,modifiedDate:t.modifiedDate,review:{state:"",stateModel:"",modifiedDate:t.modifiedDate,author:t.author},notes:t.notes,annotationSelectorSettings:this.getSelector(t,"Ink"),isCommentLock:t.isCommentLock};var s=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_ink");if(s){var a=JSON.parse(s);window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_ink");var r=this.pdfViewer.annotationModule.getPageCollection(a,e);if(a[r])a[r].annotations.push(i),a[r].annotations.indexOf(i);else{var l={pageIndex:e,annotations:[]};l.annotations.push(i),l.annotations.indexOf(i),a.push(l)}p=JSON.stringify(a);window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_ink",p)}else{var d={pageIndex:e,annotations:[]};d.annotations.push(i),d.annotations.indexOf(i);var h=[];h.push(d);var p=JSON.stringify(h);window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_ink",p)}},e.prototype.getSelector=function(e,t){var i=this.pdfViewer.annotationSelectorSettings;return"Ink"===e&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings&&(i=this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings),i},e.prototype.getAnnotations=function(e,t){var i,n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_ink");if(n){var o=JSON.parse(n),s=this.pdfViewer.annotationModule.getPageCollection(o,e);i=o[s]?o[s].annotations:t}else i=t;return i},e.prototype.modifySignatureInkCollection=function(e,t,i){m(i.formFieldAnnotationType)||""===i.formFieldAnnotationType?this.pdfViewer.annotationModule.isFormFieldShape=!1:this.pdfViewer.annotationModule.isFormFieldShape=!0,this.pdfViewerBase.updateDocumentEditedProperty(!0);var n=null,o=this.getAnnotations(t,null);if(null!=o&&i){for(var s=0;s<o.length;s++)if(i.id===o[s].id){if("bounds"===e)o[s].bounds={x:i.wrapper.bounds.left,y:i.wrapper.bounds.top,width:i.bounds.width,height:i.bounds.height};else if("stroke"===e)o[s].strokeColor=i.wrapper.children[0].style.strokeColor;else if("opacity"===e)o[s].opacity=i.wrapper.children[0].style.opacity;else if("thickness"===e)o[s].thickness=i.wrapper.children[0].style.strokeWidth;else if("notes"===e)o[s].notes=i.notes;else if("delete"===e){n=o.splice(s,1)[0];break}o[s].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.pdfViewer.annotationModule.storeAnnotationCollections(o[s],t)}this.manageInkAnnotations(o,t)}return n},e.prototype.manageInkAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_ink");if(i){var n=JSON.parse(i);window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_ink");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[o]&&(n[o].annotations=e);var s=JSON.stringify(n);window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_ink",s)}},e.prototype.updateInkCollections=function(e,t,i){if(e){var n=e.Bounds,o=n.X,s=n.Y,a=n.Width,r=n.Height,l=e.customData,d=e.isPrint,h=e.AllowedInteractions?e.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),p=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.inkAnnotationSettings?this.pdfViewer.inkAnnotationSettings:this.pdfViewer.annotationSettings;e.IsLocked&&(p.isLock=e.IsLocked);var c=e.PathData;return i&&(c=ss(JSON.parse(e.PathData))),{id:"ink"+this.pdfViewerBase.signatureCount,bounds:{x:o,y:s,width:a,height:r},pageIndex:t,data:c,shapeAnnotationType:"Ink",opacity:e.Opacity,strokeColor:e.StrokeColor,thickness:e.Thickness,annotationId:e.AnnotName,customData:l,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),author:e.Author,allowedInteractions:h,subject:e.Subject,modifiedDate:e.ModifiedDate,review:{state:"",stateModel:"",modifiedDate:e.ModifiedDate,author:e.Author},notes:e.Note,isPrint:d,isCommentLock:e.IsCommentLock,annotationSettings:p,isLocked:p.isLock}}},e.prototype.updateAddAnnotationDetails=function(e,t,i){t=e?e.offset?e.offset:{x:10,y:10}:(e={offset:{x:10,y:10},pageNumber:0,width:void 0,height:void 0}).offset;var n=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),o=this.pdfViewer.annotation.createGUID(),s=this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings?this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,a=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.inkAnnotationSettings),r=this.pdfViewer.inkAnnotationSettings.allowedInteractions?this.pdfViewer.inkAnnotationSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;a.isLock=!!e.isLock&&e.isLock,e.width=e.width?e.width:150,e.height=e.height?e.height:60;var l=e.path?e.path:"";if(!m(l))if("M"===l[0]||"L"===l[0]){var d=os(es(l));l=JSON.stringify(d)}else l=ss(JSON.parse(l));e.path=l;var h=[],p={AllowedInteractions:e.allowedInteractions?e.allowedInteractions:r,AnnotName:o,AnnotType:"ink",AnnotationFlags:null,AnnotationSelectorSettings:e.annotationSelectorSettings?e.annotationSelectorSettings:s,AnnotationSettings:a,AnnotationType:"Ink",Author:e.author?e.author:"Guest",Bounds:{X:t.x,Y:t.y,Width:e.width,Height:e.height,Left:t.x,Top:t.y,Location:{X:t.x,Y:t.y},Size:{Height:e.height,IsEmpty:!1,Width:e.width}},Comments:null,CreatedDate:n,CustomData:e.customData?e.customData:null,ExistingCustomData:null,IsCommentLock:!1,IsLock:!!e.isLock&&e.isLock,IsPrint:!e.isPrint||e.isPrint,ModifiedDate:n,Note:"",Opacity:e.opacity?e.opacity:1,PathData:e.path,PageNumber:i,State:"",StateModel:"",StrokeColor:e.strokeColor?e.strokeColor:"rgba(255,0,0,1)",SubType:null,Subject:"Ink",Type:null,Thickness:e.thickness?e.thickness:1};return h[0]=p,{signatureInkAnnotation:h}},e}(),Sb=function(){function e(e,t){this.inputBoxCount=0,this.isFreeTextValueChange=!1,this.isAddAnnotationProgramatically=!1,this.isInuptBoxInFocus=!1,this.freeTextPageNumbers=[],this.selectedText="",this.isTextSelected=!1,this.selectionStart=0,this.selectionEnd=0,this.isBold=!1,this.isItalic=!1,this.isUnderline=!1,this.isStrikethrough=!1,this.isReadonly=!1,this.isMaximumWidthReached=!1,this.freeTextPaddingLeft=4,this.freeTextPaddingTop=5,this.defaultFontSize=16,this.previousText="Type Here",this.currentPosition=[],this.pdfViewer=e,this.pdfViewerBase=t,this.updateTextProperties(),this.inputBoxElement=document.createElement("textarea"),this.inputBoxElement.style.position="absolute",this.inputBoxElement.style.Width=this.defautWidth,this.inputBoxElement.style.Height=this.defaultHeight,this.inputBoxElement.style.zIndex="5",this.inputBoxElement.style.fontSize=this.fontSize+"px",this.inputBoxElement.className="free-text-input",this.inputBoxElement.style.resize="none",this.inputBoxElement.style.borderColor=this.borderColor,this.inputBoxElement.style.background=this.fillColor,this.inputBoxElement.style.borderStyle=this.borderStyle,this.inputBoxElement.style.borderWidth=this.borderWidth+"px",this.inputBoxElement.style.padding=this.padding,this.inputBoxElement.style.paddingLeft=this.freeTextPaddingLeft+"px",this.inputBoxElement.style.paddingTop=this.freeTextPaddingTop*(parseFloat(this.inputBoxElement.style.fontSize)/this.defaultFontSize)+"px",this.inputBoxElement.style.borderRadius="2px",this.inputBoxElement.style.verticalAlign="middle",this.inputBoxElement.style.fontFamily=this.fontFamily,this.inputBoxElement.style.color=this.pdfViewer.freeTextSettings.fontColor?this.pdfViewer.freeTextSettings.fontColor:"#000",this.inputBoxElement.style.overflow="hidden",this.inputBoxElement.style.wordBreak=this.wordBreak,this.inputBoxElement.readOnly=this.isReadonly,this.inputBoxElement.addEventListener("focusout",this.onFocusOutInputBox.bind(this)),this.inputBoxElement.addEventListener("keydown",this.onKeyDownInputBox.bind(this)),this.inputBoxElement.addEventListener("mouseup",this.onMouseUpInputBox.bind(this)),this.freeTextPageNumbers=[]}return e.prototype.updateTextProperties=function(){if(this.defautWidth=this.pdfViewer.freeTextSettings.width?this.pdfViewer.freeTextSettings.width:151,this.defaultHeight=this.pdfViewer.freeTextSettings.height?this.pdfViewer.freeTextSettings.height:24.6,this.borderColor=this.pdfViewer.freeTextSettings.borderColor?this.pdfViewer.freeTextSettings.borderColor:"#ffffff00",this.fillColor=this.pdfViewer.freeTextSettings.fillColor?this.pdfViewer.freeTextSettings.fillColor:"#fff",this.borderStyle=this.pdfViewer.freeTextSettings.borderStyle?this.pdfViewer.freeTextSettings.borderStyle:"solid",this.borderWidth=this.pdfViewer.freeTextSettings.borderWidth?this.pdfViewer.freeTextSettings.borderWidth:1,this.fontSize=this.pdfViewer.freeTextSettings.fontSize?this.pdfViewer.freeTextSettings.fontSize:16,this.opacity=this.pdfViewer.freeTextSettings.opacity?this.pdfViewer.freeTextSettings.opacity:1,this.fontColor=this.pdfViewer.freeTextSettings.fontColor?this.pdfViewer.freeTextSettings.fontColor:"#000",this.author="Guest"!==this.pdfViewer.freeTextSettings.author?this.pdfViewer.freeTextSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest",m(this.pdfViewer.annotationModule)||0===this.getRgbCode(this.borderColor).a&&(this.borderWidth=0),this.pdfViewer.freeTextSettings.fontFamily){var e=this.pdfViewer.freeTextSettings.fontFamily;this.fontFamily="Helvetica"===e||"Times New Roman"===e||"Courier"===e||"Symbol"===e||"ZapfDingbats"===e?e:"Helvetica"}else this.fontFamily="Helvetica";this.textAlign=this.pdfViewer.freeTextSettings.textAlignment?this.pdfViewer.freeTextSettings.textAlignment:"Left",this.defaultText=this.pdfViewer.freeTextSettings.defaultText?this.pdfViewer.freeTextSettings.defaultText:"Type here",this.isReadonly=!1,this.pdfViewer.freeTextSettings.enableAutoFit?(this.wordBreak="break-all",this.padding="2px"):(this.padding="0px",this.wordBreak="break-word"),(this.pdfViewer.freeTextSettings.isLock||this.pdfViewer.annotationSettings.isLock||this.pdfViewer.freeTextSettings.isReadonly)&&(this.isReadonly=!0),1===this.pdfViewer.freeTextSettings.fontStyle?this.isBold=!0:2===this.pdfViewer.freeTextSettings.fontStyle?this.isItalic=!0:4===this.pdfViewer.freeTextSettings.fontStyle?this.isUnderline=!0:8===this.pdfViewer.freeTextSettings.fontStyle?this.isStrikethrough=!0:3===this.pdfViewer.freeTextSettings.fontStyle?(this.isBold=!0,this.isItalic=!0):5===this.pdfViewer.freeTextSettings.fontStyle?(this.isBold=!0,this.isUnderline=!0):9===this.pdfViewer.freeTextSettings.fontStyle?(this.isBold=!0,this.isStrikethrough=!0):7===this.pdfViewer.freeTextSettings.fontStyle?(this.isBold=!0,this.isItalic=!0,this.isUnderline=!0):11===this.pdfViewer.freeTextSettings.fontStyle?(this.isBold=!0,this.isItalic=!0,this.isStrikethrough=!0):14===this.pdfViewer.freeTextSettings.fontStyle?(this.isBold=!0,this.isUnderline=!0,this.isStrikethrough=!0):6===this.pdfViewer.freeTextSettings.fontStyle&&(this.isUnderline=!0,this.isItalic=!0)},e.prototype.renderFreeTextAnnotations=function(e,t,i){var n=!1;if(!i)for(var o=0;o<this.freeTextPageNumbers.length;o++)if(this.freeTextPageNumbers[o]===t){n=!0;break}if(e&&!n&&e.length>=1){this.freeTextPageNumbers.push(t);for(var s=0;s<e.length;s++){var a=e[s];if(a.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(a,t,a.AnnotType),a.AnnotType){var r=null;if(a.VertexPoints){r=[];for(var l=0;l<a.VertexPoints.length;l++){var d={x:a.VertexPoints[l].X,y:a.VertexPoints[l].Y};r.push(d)}}a.AnnotationSettings=a.AnnotationSettings?a.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings);var h=void 0,p=.5,c=m(a.Bounds.X)?a.Bounds.x:a.Bounds.X-p,u=m(a.Bounds.Y)?a.Bounds.y:a.Bounds.Y-p,f=a.Bounds.Width?a.Bounds.Width:a.Bounds.width,g=a.Bounds.Height?a.Bounds.Height:a.Bounds.height,y=!!a.isAddAnnotationProgramatically&&a.isAddAnnotationProgramatically,v=this.getRotationValue(t,y),w=(a.Rotate,a.PageRotation);1===Math.sign(a.Rotate)?a.Rotate=-a.Rotate+v:a.Rotate=a.Rotate+v;var b=Math.abs(a.Rotate);if(i&&v!==w&&this.pdfViewerBase.isJsonImported){var S=this.pdfViewerBase.pageSize[t],C=a.Bounds.X,x=a.Bounds.Y,M=f,I=g;if(w>0){var T=w/90;1===T?(g=f,f=a.Bounds.Height,c=a.Bounds.Y,u=270!==v?S.height-a.Bounds.X-a.Bounds.Width:S.width-a.Bounds.X-a.Bounds.Width):2===T?270!==v&&90!==v?(c=S.width-a.Bounds.X-a.Bounds.Width,u=S.height-a.Bounds.Y-a.Bounds.Height):(c=S.height-a.Bounds.X-a.Bounds.Width,u=S.width-a.Bounds.Y-a.Bounds.Height):3===T&&(g=f,f=a.Bounds.Height,c=90!==v?S.width-a.Bounds.Y-f:S.height-a.Bounds.Y-f,u=a.Bounds.X),C=c,x=u,M=f,I=g}1===(b=v/90%4)?(g=f,f=I,c=S.width-x-I-p,u=C-p,b=90):2===b?(c=S.width-C-M-p,u=S.height-x-I-p,b=180):3===b?(g=f,f=I,c=x-p,u=S.height-C-g-p,b=270):0===b&&(c=C-p,u=x-p)}if(90===b||270===b){var A=f;c=c-(f=g)/2+(g=A)/2,u+=f/2-g/2}a.allowedInteractions=a.AllowedInteractions?a.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(a),h={author:a.Author,modifiedDate:a.ModifiedDate,subject:a.Subject,id:"freetext"+this.inputBoxCount,rotateAngle:a.Rotate,dynamicText:a.MarkupText,strokeColor:a.StrokeColor,thickness:a.Thickness,fillColor:a.FillColor,bounds:{x:c,y:u,left:c,top:u,width:f,height:g,right:a.Bounds.Right,bottom:a.Bounds.Bottom},annotName:a.AnnotName,shapeAnnotationType:"FreeText",pageIndex:t,opacity:a.Opacity,fontColor:a.FontColor,fontSize:a.FontSize,pageRotation:v,fontFamily:a.FontFamily,notes:a.MarkupText,textAlign:a.TextAlign,comments:this.pdfViewer.annotationModule.getAnnotationComments(a.Comments,a,a.Author),review:{state:a.State,stateModel:a.StateModel,modifiedDate:a.ModifiedDate,author:a.Author},font:{isBold:a.Font.Bold,isItalic:a.Font.Italic,isStrikeout:a.Font.Strikeout,isUnderline:a.Font.Underline},annotationSelectorSettings:this.getSettings(a),annotationSettings:a.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(a),annotationAddMode:a.annotationAddMode,allowedInteractions:a.allowedInteractions,isPrint:a.IsPrint,isCommentLock:a.IsCommentLock,isReadonly:a.IsReadonly,isAddAnnotationProgrammatically:y},i&&(h.id=a.AnnotName,h.previousFontSize=a.FontSize?a.FontSize:this.fontSize);var k=this.pdfViewer.add(h);if(this.pdfViewer.annotationModule.storeAnnotations(t,h,"_annotations_freetext"),this.isAddAnnotationProgramatically){var V={opacity:h.opacity,borderColor:h.strokeColor,borderWidth:h.thickness,author:a.author,subject:a.subject,modifiedDate:a.modifiedDate,fillColor:h.fillColor,fontSize:h.fontSize,width:h.bounds.width,height:h.bounds.height,fontColor:h.fontColor,fontFamily:h.fontFamily,defaultText:h.dynamicText,fontStyle:h.font,textAlignment:h.textAlign};this.pdfViewer.fireAnnotationAdd(h.pageIndex,h.annotName,"FreeText",h.bounds,V)}this.inputBoxCount+=1,this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!0,this.pdfViewer.nodePropertyChange(k,{}),this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!1}}}},e.prototype.getSettings=function(e){var t=this.pdfViewer.annotationSelectorSettings;return e.AnnotationSelectorSettings?t=e.AnnotationSelectorSettings:this.pdfViewer.freeTextSettings.annotationSelectorSettings&&(t=this.pdfViewer.freeTextSettings.annotationSelectorSettings),t},e.prototype.setAnnotationType=function(e){if(this.pdfViewerBase.disableTextSelectionMode(),this.pdfViewer.annotationModule.isFormFieldShape=!1,"FreeText"===e){this.currentAnnotationMode="FreeText",this.updateTextProperties();var t=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.pdfViewer.drawingObject={shapeAnnotationType:"FreeText",strokeColor:this.borderColor,fillColor:this.fillColor,opacity:this.opacity,notes:"",isCommentLock:!1,thickness:this.borderWidth,borderDashArray:"0",modifiedDate:t,author:this.pdfViewer.freeTextSettings.author,subject:"Text Box",font:{isBold:this.isBold,isItalic:this.isItalic,isStrikeout:this.isStrikethrough,isUnderline:this.isUnderline},textAlign:this.textAlign},this.pdfViewer.tool="Select"}},e.prototype.modifyInCollection=function(e,t,i,n){m(i.formFieldAnnotationType)||""===i.formFieldAnnotationType?this.pdfViewer.annotationModule.isFormFieldShape=!1:this.pdfViewer.annotationModule.isFormFieldShape=!0,n||this.pdfViewerBase.updateDocumentEditedProperty(!0);var o=null,s=this.getAnnotations(t,null);if(null!=s&&i){for(var a=0;a<s.length;a++)if(i.id===s[a].id){if("bounds"===e)s[a].bounds={left:i.bounds.x,top:i.bounds.y,width:i.bounds.width,height:i.bounds.height,right:i.bounds.right,bottom:i.bounds.bottom};else if("fill"===e)s[a].fillColor=i.wrapper.children[0].style.fill;else if("stroke"===e)s[a].strokeColor=i.wrapper.children[0].style.strokeColor;else if("opacity"===e)s[a].opacity=i.wrapper.children[0].style.opacity;else if("thickness"===e)s[a].thickness=i.wrapper.children[0].style.strokeWidth;else if("notes"===e)s[a].note=i.notes;else{if("delete"===e){o=s.splice(a,1)[0];break}"dynamicText"===e?s[a].dynamicText=i.dynamicText:"fontColor"===e?s[a].fontColor=i.fontColor:"fontSize"===e?s[a].fontSize=i.fontSize:"fontFamily"===e?s[a].fontFamily=i.fontFamily:"textPropertiesChange"===e?s[a].font={isBold:i.font.isBold,isItalic:i.font.isItalic,isStrikeout:i.font.isStrikeout,isUnderline:i.font.isUnderline}:"textAlign"===e&&(s[a].textAlign=i.textAlign)}s[a].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.pdfViewer.annotationModule.storeAnnotationCollections(s[a],t)}this.manageAnnotations(s,t)}return o},e.prototype.addInCollection=function(e,t){if(t){var i=this.getAnnotations(e,null);i&&i.push(t),this.manageAnnotations(i,e)}},e.prototype.saveFreeTextAnnotations=function(){var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_freetext");this.pdfViewerBase.isStorageExceed&&(e=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_freetext"]);for(var t=new Array,i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e&&!this.pdfViewer.annotationSettings.skipDownload)for(var n=JSON.parse(e),o=0;o<n.length;o++){var s=[],a=n[o];if(a){for(var r=0;a.annotations.length>r;r++){this.pdfViewer.annotationModule.updateModifiedDate(a.annotations[r]),a.annotations[r].bounds=this.getBoundsBasedOnRotation(a.annotations[r].bounds,a.annotations[r].rotateAngle,a.pageIndex,a.annotations[r]),a.annotations[r].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(a.annotations[r].bounds,a.pageIndex));var l=a.annotations[r].strokeColor;a.annotations[r].strokeColor=JSON.stringify(this.getRgbCode(l));var d=a.annotations[r].fillColor;a.annotations[r].fillColor=JSON.stringify(this.getRgbCode(d));var h=a.annotations[r].fontColor;a.annotations[r].fontColor=JSON.stringify(this.getRgbCode(h)),a.annotations[r].vertexPoints=JSON.stringify(a.annotations[r].vertexPoints),null!==a.annotations[r].rectangleDifference&&(a.annotations[r].rectangleDifference=JSON.stringify(a.annotations[r].rectangleDifference)),a.annotations[r].padding=this.getPaddingValues(this.fontSize)}s=a.annotations}t[a.pageIndex]=s}return JSON.stringify(t)},e.prototype.getRotationValue=function(e,t){var i=this.pdfViewerBase.pageSize[e];return!m(t)&&t||0===i.rotation?0:1===i.rotation?90:2===i.rotation?180:3===i.rotation?270:0},e.prototype.getBoundsBasedOnRotation=function(e,t,i,n,o){var s=this.getRotationValue(i,o),a=.5;if(n.rotateAngle=t-s,n.pageRotation=s,90===t||-90===t||270===t||-270===t){var r=e.left+e.width/2-e.height/2,l=e.top-(e.width/2-e.height/2);return{x:r+a,y:l+a,left:r+a,top:l+a,width:e.height,height:e.width}}return{x:e.left+a,y:e.top+a,left:e.left+a,top:e.top+a,width:e.width,height:e.height}},e.prototype.manageAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_freetext");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_freetext"]),i){var n=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_freetext");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[o]&&(n[o].annotations=e);var s=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_freetext"]=s:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_freetext",s)}},e.prototype.getAnnotations=function(e,t){var i,n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_freetext");if(this.pdfViewerBase.isStorageExceed&&(n=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_freetext"]),n){var o=JSON.parse(n),s=this.pdfViewer.annotationModule.getPageCollection(o,e);i=o[s]?o[s].annotations:t}else i=t;return i},e.prototype.getRgbCode=function(e){e.match(/#([a-z0-9]+)/gi)||e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)||(e=this.pdfViewer.annotationModule.nameToHash(e));var t=e.split(",");return m(t[1])&&(t=(e=this.pdfViewer.annotationModule.getValue(e,"rgba")).split(",")),{r:parseInt(t[0].split("(")[1]),g:parseInt(t[1]),b:parseInt(t[2]),a:parseInt(t[3])}},e.prototype.onFocusOutInputBox=function(){var e=this.pdfViewer.allowServerDataBinding;if(this.pdfViewer.enableServerDataBinding(!1),this.pdfViewerBase.isFreeTextContextMenu)this.inputBoxElement.focus(),this.isTextSelected||window.getSelection().removeAllRanges();else{this.pdfViewer.fireBeforeAddFreeTextAnnotation(this.inputBoxElement.value);var t=this.inputBoxElement.id&&this.inputBoxElement.id.split("_freeText_")[1]&&this.inputBoxElement.id.split("_freeText_")[1].split("_")[0]?parseFloat(this.inputBoxElement.id.split("_freeText_")[1].split("_")[0]):this.pdfViewerBase.currentPageNumber-1,i=this.pdfViewerBase.getElement("_pageDiv_"+t),n=parseFloat(this.inputBoxElement.style.width),o=parseFloat(this.inputBoxElement.style.paddingLeft);if(this.pdfViewer.freeTextSettings.enableAutoFit&&!this.isMaximumWidthReached&&!this.isNewFreeTextAnnot){var s=parseFloat(this.inputBoxElement.style.fontSize);this.inputBoxElement.style.width=n+o-s+"px"}if(this.pdfViewer.freeTextSettings.enableAutoFit&&!this.isMaximumWidthReached&&this.isNewFreeTextAnnot){n=parseFloat(this.inputBoxElement.style.width);this.inputBoxElement.style.width=n-8+"px"}var a=parseFloat(this.inputBoxElement.style.height),r=parseFloat(this.inputBoxElement.style.width),l=parseFloat(this.inputBoxElement.style.left);if(this.pdfViewerBase.isMixedSizeDocument)l-=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+t).offsetLeft;var d=parseFloat(this.inputBoxElement.style.top),h=this.pdfViewerBase.getZoomFactor();this.pdfViewer.isValidFreeText&&(this.inputBoxElement.value="Type Here",this.pdfViewer.isValidFreeText=!1);var p=this.inputBoxElement.value,c=!1;if(!0===this.isNewFreeTextAnnot){var u=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),f=this.pdfViewer.annotation.createGUID();this.isNewFreeTextAnnot=!1,c=!0;var m=void 0,g=this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("freeText",t+1);g&&(document.getElementById(g).id=f);var y=this.pdfViewer.freeTextSettings.annotationSelectorSettings?this.pdfViewer.freeTextSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,v=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings);this.author=this.author?this.author:this.pdfViewer.freeTextSettings.author?this.pdfViewer.freeTextSettings.author:"Guest";var w=this.pdfViewer.freeTextSettings.allowedInteractions?this.pdfViewer.freeTextSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;m={author:this.author,modifiedDate:u,subject:"Text Box",id:"free_text"+this.inputBoxCount,rotateAngle:0,dynamicText:p,strokeColor:this.borderColor,thickness:this.borderWidth,fillColor:this.fillColor,bounds:{left:l/h,top:d/h,x:l/h,y:d/h,width:r/h,height:a/h},annotName:f,shapeAnnotationType:"FreeText",pageIndex:t,fontColor:this.fontColor,fontSize:this.fontSize,fontFamily:this.fontFamily,opacity:this.opacity,comments:[],textAlign:this.textAlign,font:{isBold:this.isBold,isItalic:this.isItalic,isStrikeout:this.isStrikethrough,isUnderline:this.isUnderline},review:{state:"Unmarked",stateModel:"None",modifiedDate:u,author:this.author},annotationSelectorSettings:y,annotationSettings:v,customData:this.pdfViewer.annotationModule.getData("FreeText"),isPrint:this.pdfViewer.freeTextSettings.isPrint,allowedInteractions:w,isReadonly:this.isReadonly},this.pdfViewer.enableRtl&&(m.textAlign="Right");var b=this.pdfViewer.add(m),S={left:m.bounds.x,top:m.bounds.y,width:m.bounds.width,height:m.bounds.height},C={opacity:m.opacity,borderColor:m.strokeColor,borderWidth:m.thickness,author:b.author,subject:b.subject,modifiedDate:b.modifiedDate,fillColor:m.fillColor,fontSize:m.fontSize,width:m.bounds.width,height:m.bounds.height,fontColor:m.fontColor,fontFamily:m.fontFamily,defaultText:m.dynamicText,fontStyle:m.font,textAlignment:m.textAlign};this.pdfViewer.annotation.storeAnnotations(t,m,"_annotations_freetext"),this.pdfViewer.fireAnnotationAdd(m.pageIndex,m.annotName,"FreeText",S,C),this.pdfViewer.annotation.addAction(t,null,m,"Addition","",m,m),this.pdfViewer.renderSelector(m.pageIndex),this.pdfViewer.clearSelection(m.pageIndex),this.pdfViewerBase.updateDocumentEditedProperty(!0),this.selectedAnnotation=b}if(this.isInuptBoxInFocus=!1,this.selectedAnnotation&&this.pdfViewer.selectedItems.annotations){r/=h;var x=(a/=h)-this.selectedAnnotation.bounds.height,M=void 0;x>0&&(M=(M=this.selectedAnnotation.wrapper.offsetY+x/2)>0?M:void 0);var I=r-this.selectedAnnotation.bounds.width,T=void 0;I>0?T=(T=this.selectedAnnotation.wrapper.offsetX+I/2)>0?T:void 0:(I=Math.abs(I),T=this.selectedAnnotation.wrapper.offsetX-I/2),this.selectedAnnotation.bounds.width=r,this.selectedAnnotation.bounds.height=a;var A;A=parseFloat(this.inputBoxElement.style.fontSize)/h/(this.defaultFontSize/2),this.selectedAnnotation.wrapper.children[1].margin.left=this.freeTextPaddingLeft,this.selectedAnnotation.wrapper.children[1].margin.top=parseFloat(this.inputBoxElement.style.paddingTop)/h+A,this.pdfViewer.annotation.modifyDynamicTextValue(p,this.selectedAnnotation.annotName),this.selectedAnnotation.dynamicText=p,this.modifyInCollection("dynamicText",t,this.selectedAnnotation,c),this.modifyInCollection("bounds",t,this.selectedAnnotation,c),this.pdfViewer.nodePropertyChange(this.selectedAnnotation,{bounds:{width:this.selectedAnnotation.bounds.width,height:this.selectedAnnotation.bounds.height,y:M,x:T}});var k=document.getElementById(this.selectedAnnotation.annotName);k&&k.childNodes&&(k.childNodes[0].ej2_instances?k.childNodes[0].ej2_instances[0].value=p:k.childNodes[0].childNodes&&k.childNodes[0].childNodes[1].ej2_instances&&(k.childNodes[0].childNodes[1].ej2_instances[0].value=p)),this.pdfViewer.renderSelector(this.selectedAnnotation.pageIndex,this.selectedAnnotation.annotationSelectorSettings)}this.inputBoxElement.parentElement&&(i&&i.id===this.inputBoxElement.parentElement.id?i.removeChild(this.inputBoxElement):this.inputBoxElement.parentElement.removeChild(this.inputBoxElement));var V=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+t);this.pdfViewer.renderDrawing(V,t),this.inputBoxCount+=1,c||this.previousText===p||this.pdfViewer.annotationModule.triggerAnnotationPropChange(this.selectedAnnotation,!1,!1,!1,!1,!1,!1,!1,!0,this.previousText,p)}this.pdfViewer.enableServerDataBinding(e,!0)},e.prototype.onKeyDownInputBox=function(e){var t=this;(9===e.which||m(this.pdfViewer.selectedItems.annotations[0])&&!this.isNewFreeTextAnnot)&&e.preventDefault(),this.selectedAnnotation=this.pdfViewer.selectedItems.annotations&&this.isNewFreeTextAnnot?this.pdfViewer.selectedItems.annotations[0]:this.selectedAnnotation,setTimeout((function(){t.defaultHeight<t.inputBoxElement.scrollHeight&&parseInt(t.inputBoxElement.style.height)<t.inputBoxElement.scrollHeight?t.updateFreeTextAnnotationSize(!0):t.updateFreeTextAnnotationSize(!1)}),0)},e.prototype.updateFreeTextAnnotationSize=function(e){var t=this,i=t.pdfViewer.freeTextSettings.enableAutoFit;if(i?this.autoFitFreeText():this.isMaximumWidthReached=!0,this.isMaximumWidthReached){var n=t.inputBoxElement.getBoundingClientRect().height;e||t.inputBoxElement.readOnly||(t.inputBoxElement.style.height="auto");var o=t.inputBoxElement.getBoundingClientRect().height-n,s=parseFloat(t.inputBoxElement.style.fontSize);t.inputBoxElement.style.height=t.inputBoxElement.readOnly?t.inputBoxElement.style.height:t.inputBoxElement.scrollHeight+s/2+"px",t.inputBoxElement.style.height=o<0&&!t.inputBoxElement.readOnly?n+"px":t.inputBoxElement.style.height}var a=t.pdfViewerBase.getZoomFactor(),r=parseFloat(this.inputBoxElement.style.height),l=parseFloat(this.inputBoxElement.style.width);if(r/=a,l/=a,this.selectedAnnotation){var d=r-t.selectedAnnotation.bounds.height,h=0;if(d>0?h=t.selectedAnnotation.wrapper.offsetY+d/2:(d=Math.abs(d),h=t.selectedAnnotation.wrapper.offsetY-d/2),i){var p=l-t.selectedAnnotation.bounds.width,c=0;p>0?c=t.selectedAnnotation.wrapper.offsetX+p/2:(p=Math.abs(p),c=t.selectedAnnotation.wrapper.offsetX-p/2)}t.selectedAnnotation.bounds.width=l,t.selectedAnnotation.bounds.height=r,i?t.pdfViewer.nodePropertyChange(t.selectedAnnotation,{bounds:{width:t.selectedAnnotation.bounds.width,height:t.selectedAnnotation.bounds.height,y:h,x:c}}):t.pdfViewer.nodePropertyChange(t.selectedAnnotation,{bounds:{width:t.selectedAnnotation.bounds.width,height:t.selectedAnnotation.bounds.height,y:h}}),t.pdfViewer.renderSelector(t.selectedAnnotation.pageIndex,this.selectedAnnotation.annotationSelectorSettings)}},e.prototype.autoFitFreeText=function(e,t){var i=this.pdfViewerBase.currentPageNumber-1,n=(this.pdfViewerBase.getElement("_pageDiv_"+i),this.pdfViewerBase.getElement("_annotationCanvas_"+i).getContext("2d")),o=this.inputBoxElement.style.fontSize;this.pdfViewer.freeTextSettings.fontStyle===Zs.Bold||"bold"===this.inputBoxElement.style.fontWeight?n.font="bold "+o+" "+this.inputBoxElement.style.fontFamily:n.font=o+" "+this.inputBoxElement.style.fontFamily;var s="",a=[],r=this.inputBoxElement.value;if(r.indexOf("\n")>-1){a=r.split("\n");for(var l=0;l<a.length;l++){var d=n.measureText(a[l]),h=n.measureText(s);d.width>h.width&&(s=a[l])}this.isMaximumWidthReached=!0}else s=r,this.isMaximumWidthReached=!1;var p,c=n.measureText(s),u=(o=parseFloat(this.inputBoxElement.style.fontSize))+o/2;this.isNewFreeTextAnnot?(p=Math.ceil(c.width+18),this.inputBoxElement.style.height=u+"px",this.inputBoxElement.style.top=t-u/2+"px"):p=Math.ceil(c.width)+o+Math.ceil(4),e||(this.inputBoxElement.style.height=u+"px"),this.inputBoxElement.style.width=p+"px";var f=this.pdfViewerBase.getPageWidth(i)-parseFloat(this.inputBoxElement.style.left);if(parseFloat(this.inputBoxElement.style.width)>f)if(this.isMaximumWidthReached=!0,this.isNewAddedAnnot&&e){p-=8,this.inputBoxElement.style.width=p+"px";var m=e+p*this.pdfViewerBase.getZoomFactor(),g=parseFloat(this.inputBoxElement.style.left);m>=this.pdfViewerBase.getPageWidth(i)&&(g=this.pdfViewerBase.getPageWidth(i)-p),this.inputBoxElement.style.left=g+"px"}else this.inputBoxElement.style.width=f+"px"},e.prototype.onMouseUpInputBox=function(e){var t=e.target;this.selectionStart=0,this.selectionEnd=0,3===e.which&&t&&(this.selectionStart=t.selectionStart,this.selectionEnd=t.selectionEnd),3===e.which&&null!=window.getSelection()&&""!==window.getSelection().toString()?this.isTextSelected=!0:this.isTextSelected=!1},e.prototype.addInuptElemet=function(e,t,i){void 0===t&&(t=null),this.currentPosition=[],m(i)&&(i=this.pdfViewerBase.currentPageNumber-1),t&&(i=t.pageIndex),S()&&null===t&&0===this.pdfViewer.selectedItems.annotations.length&&this.updateTextProperties(),this.inputBoxElement.id=this.pdfViewer.element.id+"_freeText_"+i+"_"+this.inputBoxCount;var n=this.pdfViewerBase.getElement("_pageDiv_"+i),o=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+i),s=this.pdfViewerBase.getZoomFactor();if(this.inputBoxElement.value=t&&t.dynamicText?t.dynamicText:this.defaultText,this.inputBoxElement.style.boxSizing="border-box",this.inputBoxElement.style.left=e.x+"px",this.inputBoxElement.style.top=e.y-this.defaultHeight*s/2+"px",this.pdfViewer.freeTextSettings.enableAutoFit?this.inputBoxElement.style.wordBreak="break-all":this.inputBoxElement.style.wordBreak="break-word",t?this.applyFreetextStyles(s,t.isReadonly):this.applyFreetextStyles(s),this.isBold?this.inputBoxElement.style.fontWeight="bold":this.inputBoxElement.style.fontWeight="normal",this.isItalic?this.inputBoxElement.style.fontStyle="italic":this.inputBoxElement.style.fontStyle="normal",this.inputBoxElement.style.textDecoration="none",this.isUnderline&&(this.inputBoxElement.style.textDecoration="underline"),this.isStrikethrough&&(this.inputBoxElement.style.textDecoration="line-through"),this.pdfViewer.enableRtl?(this.inputBoxElement.style.textAlign="right",this.inputBoxElement.style.direction="rtl",this.inputBoxElement.style.left=e.x-this.defautWidth*s/2):this.inputBoxElement.style.textAlign=this.textAlign.toLowerCase(),this.inputBoxElement.style.borderColor=this.borderColor,this.inputBoxElement.style.color=this.fontColor,this.inputBoxElement.style.background=this.fillColor,t&&t.wrapper&&t.wrapper.children[0]&&(this.inputBoxElement.style.opacity=t.wrapper.children[0].style.opacity),!0===this.isNewFreeTextAnnot&&this.pdfViewer.clearSelection(i),t&&t.wrapper&&t.wrapper.bounds){var a=t.wrapper.bounds;a.left&&(this.inputBoxElement.style.left=a.left*s+"px"),a.top&&(this.inputBoxElement.style.top=a.top*s+"px"),this.inputBoxElement.style.height=a.height?a.height*s+"px":this.defaultHeight*s+"px",this.inputBoxElement.style.width=a.width?a.width*s+"px":this.defautWidth*s+"px",this.selectedAnnotation=t,this.previousText=this.selectedAnnotation.dynamicText,this.selectedAnnotation.dynamicText="",this.inputBoxElement.style.borderColor=this.selectedAnnotation.strokeColor,this.inputBoxElement.style.color=this.selectedAnnotation.fontColor,this.inputBoxElement.style.background=this.selectedAnnotation.fillColor,!0===this.selectedAnnotation.font.isBold&&(this.inputBoxElement.style.fontWeight="bold"),!0===this.selectedAnnotation.font.isItalic&&(this.inputBoxElement.style.fontStyle="italic"),!0===this.selectedAnnotation.font.isUnderline&&(this.inputBoxElement.style.textDecoration="underline"),!0===this.selectedAnnotation.font.isStrikeout&&(this.inputBoxElement.style.textDecoration="line-through"),this.pdfViewer.enableRtl?(this.inputBoxElement.style.textAlign="right",this.inputBoxElement.style.direction="rtl"):this.selectedAnnotation.textAlign&&(this.inputBoxElement.style.textAlign=this.selectedAnnotation.textAlign),this.inputBoxElement.style.fontSize=this.selectedAnnotation.fontSize*s+"px",this.inputBoxElement.style.fontFamily=this.selectedAnnotation.fontFamily,this.pdfViewer.nodePropertyChange(this.selectedAnnotation,{})}this.pdfViewerBase.isMixedSizeDocument&&(this.inputBoxElement.style.left=parseFloat(this.inputBoxElement.style.left)+o.offsetLeft+"px"),this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!1,this.pdfViewer.freeTextSettings.enableAutoFit&&this.autoFitFreeText(e.x,e.y),this.inputBoxElement.style.paddingLeft=this.freeTextPaddingLeft*s+"px",this.inputBoxElement.style.paddingTop=this.freeTextPaddingTop*(parseFloat(this.inputBoxElement.style.fontSize)/s/this.defaultFontSize)/s+"px";var r;r=parseFloat(this.inputBoxElement.style.fontSize)/s/(this.defaultFontSize/2),this.inputBoxElement.style.paddingTop=parseFloat(this.inputBoxElement.style.paddingTop)-r+"px",n.appendChild(this.inputBoxElement),!this.pdfViewer.freeTextSettings.enableAutoFit&&this.defaultHeight*s<this.inputBoxElement.scrollHeight&&parseInt(this.inputBoxElement.style.height)<this.inputBoxElement.scrollHeight&&(this.inputBoxElement.style.height=this.inputBoxElement.scrollHeight+"px",this.inputBoxElement.style.top=e.y-parseFloat(this.inputBoxElement.style.height)/2+"px"),this.isInuptBoxInFocus=!0,this.inputBoxElement.focus(),!0!==this.isNewFreeTextAnnot&&this.inputBoxElement.value!==this.defaultText||(this.inputBoxElement.select(),this.pdfViewerBase.isFreeTextSelected=!0),this.currentPosition.push(parseInt(this.inputBoxElement.style.left)/s,parseInt(this.inputBoxElement.style.top)/s,parseInt(this.inputBoxElement.style.width)/s,parseInt(this.inputBoxElement.style.height)/s)},e.prototype.applyFreetextStyles=function(e,t){this.inputBoxElement.style.height=this.defaultHeight*e+"px",this.inputBoxElement.style.width=this.defautWidth*e+"px",this.inputBoxElement.style.borderWidth=this.borderWidth*e+"px",this.inputBoxElement.style.fontSize=this.fontSize*e+"px",this.inputBoxElement.style.fontFamily=this.fontFamily,this.inputBoxElement.readOnly=m(t)?this.isReadonly:t},e.prototype.copySelectedText=function(){if(null!==window.getSelection()){this.selectedText=window.getSelection().toString();var e=document.createElement("textarea");e.contentEditable="true",e.textContent=this.selectedText,e.style.position="fixed",document.body.appendChild(e),e.select();try{document.execCommand("copy")}catch(t){console.warn("Copy to clipboard failed.",t)}finally{e&&document.body.removeChild(e)}}},e.prototype.pasteSelectedText=function(e){if(""!==this.selectedText&&e){var t=e.value;e.value=t.slice(0,this.selectionStart)+this.selectedText+t.slice(this.selectionEnd,t.length)}var i=event;this.onKeyDownInputBox(i)},e.prototype.cutSelectedText=function(e){if(null!==window.getSelection()){var t=e.value;this.selectedText=window.getSelection().toString(),e.value=t.slice(0,e.selectionStart)+t.slice(e.selectionEnd);var i=document.createElement("textarea");i.contentEditable="true",i.textContent=this.selectedText,i.style.position="fixed",document.body.appendChild(i),i.select();try{document.execCommand("cut")}catch(n){console.warn("Copy to clipboard failed.",n)}finally{i&&document.body.removeChild(i)}}},e.prototype.saveImportedFreeTextAnnotations=function(e,t){var i=e;if(i.AnnotType){var n=null;if(i.VertexPoints){n=[];for(var o=0;o<i.VertexPoints.length;o++){var s={x:i.VertexPoints[o].X,y:i.VertexPoints[o].Y};n.push(s)}}i.AnnotationSettings=i.AnnotationSettings?i.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings);var a;i.allowedInteractions=i.AllowedInteractions?i.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(i);var r=m(i.Bounds.X)?i.Bounds.x:i.Bounds.X,l=m(i.Bounds.Y)?i.Bounds.y:i.Bounds.Y,d=i.Bounds.Width?i.Bounds.Width:i.Bounds.width,h=i.Bounds.Height?i.Bounds.Height:i.Bounds.height;a={author:i.Author,allowedInteractions:i.allowedInteractions,modifiedDate:i.ModifiedDate,subject:i.Subject,id:"freetext",rotateAngle:i.Rotate,dynamicText:i.MarkupText,strokeColor:i.StrokeColor,thickness:i.Thickness,fillColor:i.FillColor,bounds:{x:r,y:l,left:r,top:l,width:d,height:h,right:i.Bounds.Right,bottom:i.Bounds.Bottom},annotName:i.AnnotName,shapeAnnotationType:"FreeText",pageIndex:t,opacity:i.Opacity,fontColor:i.FontColor,fontSize:i.FontSize,fontFamily:i.FontFamily,notes:i.MarkupText,textAlign:i.TextAlign,comments:this.pdfViewer.annotationModule.getAnnotationComments(i.Comments,i,i.Author),review:{state:i.State,stateModel:i.StateModel,modifiedDate:i.ModifiedDate,author:i.Author},font:{isBold:i.Font.Bold,isItalic:i.Font.Italic,isStrikeout:i.Font.Strikeout,isUnderline:i.Font.Underline},annotationSelectorSettings:this.getSettings(i),annotationSettings:i.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(i),isPrint:i.IsPrint,isCommentLock:i.IsCommentLock,isReadonly:i.IsReadonly},this.pdfViewer.annotationModule.storeAnnotations(t,a,"_annotations_freetext")}},e.prototype.updateFreeTextAnnotationCollections=function(e,t){var i=e;if(i.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(i,t,i.AnnotType),i.AnnotType){var n=null;if(i.VertexPoints){n=[];for(var o=0;o<i.VertexPoints.length;o++){var s={x:i.VertexPoints[o].X,y:i.VertexPoints[o].Y};n.push(s)}}i.AnnotationSettings=i.AnnotationSettings?i.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings),i.IsLocked&&(i.AnnotationSettings.isLock=i.IsLocked),i.allowedInteractions=i.AllowedInteractions?i.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(i);var a=i.Bounds.X?i.Bounds.X:i.Bounds.x,r=i.Bounds.Y?i.Bounds.Y:i.Bounds.y,l=i.Bounds.Width?i.Bounds.Width:i.Bounds.width,d=i.Bounds.Height?i.Bounds.Height:i.Bounds.height;return{author:i.Author,allowedInteractions:i.allowedInteractions,modifiedDate:i.ModifiedDate,subject:i.Subject,id:"freetext",rotateAngle:i.Rotate,dynamicText:i.MarkupText,strokeColor:i.StrokeColor,thickness:i.Thickness,fillColor:i.FillColor,bounds:{x:a,y:r,left:a,top:r,width:l,height:d,right:i.Bounds.Right,bottom:i.Bounds.Bottom},annotationId:i.AnnotName,shapeAnnotationType:"FreeText",pageIndex:t,opacity:i.Opacity,fontColor:i.FontColor,fontSize:i.FontSize,fontFamily:i.FontFamily,notes:i.MarkupText,comments:this.pdfViewer.annotationModule.getAnnotationComments(i.Comments,i,i.Author),review:{state:i.State,stateModel:i.StateModel,modifiedDate:i.ModifiedDate,author:i.Author},customData:this.pdfViewer.annotation.getCustomData(i),font:{isBold:i.Font.Bold,isItalic:i.Font.Italic,isStrikeout:i.Font.Strikeout,isUnderline:i.Font.Underline},pageNumber:t,annotationSettings:i.AnnotationSettings,isCommentLock:i.IsCommentLock,isReadonly:i.IsReadonly,isPrint:i.IsPrint}}},e.prototype.updateAddAnnotationDetails=function(e,t){t=e?e.offset?e.offset:{x:1,y:1}:(e={offset:{x:1,y:1},pageNumber:0,width:void 0,height:void 0}).offset;var i=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),n=this.pdfViewer.annotation.createGUID(),o=e.fontStyle?e.fontStyle:Zs.None,s=this.pdfViewer.freeTextSettings.annotationSelectorSettings?this.pdfViewer.freeTextSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,a=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings),r=this.pdfViewer.freeTextSettings.allowedInteractions?this.pdfViewer.freeTextSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;a.isLock=!!e.isLock&&e.isLock,a.minHeight=e.minHeight?e.minHeight:0,a.minWidth=e.minWidth?e.minWidth:0,a.maxWidth=e.maxWidth?e.maxWidth:0,a.maxHeight=e.maxHeight?e.maxHeight:0,e.width=e.width?e.width:150,e.height=e.height?e.height:24.6;var l=[],d={AllowedInteractions:e.allowedInteractions?e.allowedInteractions:r,AnnotName:n,AnnotType:"freeText",AnnotationFlags:"Default",AnnotationIntent:null,AnnotationSelectorSettings:e.annotationSelectorSettings?e.annotationSelectorSettings:s,AnnotationSettings:a,Author:e.author?e.author:"Guest",Border:{HorizontalRadius:0,VerticalRadius:0,Width:e.borderWidth?e.borderWidth:1},BorderColor:{IsEmpty:!0,B:255,Blue:1,C:0,G:255},Bounds:{X:t.x,Y:t.y,Width:e.width,Height:e.height,Left:t.x,Top:t.y,Right:t.x+e.width,Bottom:t.y+e.height},CalloutLines:null,Color:{IsEmpty:!1,B:51,Blue:.2,C:0,G:255},Comments:null,CreatedDate:i,CustomData:e.customData?e.customData:null,ExistingCustomData:null,FillColor:e.fillColor?e.fillColor:"#ffffff00",Flatten:!1,FlattenPopups:!1,Font:{Bold:o==Zs.Bold,Italic:o==Zs.Italic,Strikeout:o==Zs.Strikethrough,Underline:o==Zs.Underline},FontColor:e.fontColor?e.fontColor:"#000",FontFamily:e.fontFamily?e.fontFamily:"Helvetica",FontSize:e.fontSize?e.fontSize:16,FreeTextAnnotationType:"Text Box",InnerColor:null,IsCommentLock:!1,IsLock:!!e.isLock&&e.isLock,IsPrint:null===e.isPrint||void 0===e.isPrint||e.isPrint,Layer:null,LineEndingStyle:"OpenArrow",Location:null,MarkupText:e.defaultText?e.defaultText:"Type Here",ModifiedDate:i,Name:n,Opacity:e.opacity?e.opacity:1,Page:null,PageTags:null,ReviewHistory:null,Rotate:0,IsReadonly:!!e.isReadonly&&e.isReadonly,State:"Unmarked",StateModel:"None",StrokeColor:e.borderColor?e.borderColor:"#ffffff00",Subject:"Text Box",Text:e.defaultText?e.defaultText:"Type Here",TextAlign:e.textAlignment?e.textAlignment:"Left",TextMarkupColor:null,Thickness:e.borderWidth?e.borderWidth:1,isAddAnnotationProgramatically:!0};return l[0]=d,{freeTextAnnotation:l}},e.prototype.getPaddingValues=function(e){var t=5;return[4,t=e/16*(t-2)]},e.prototype.addInputInZoom=function(e){var t=this.pdfViewerBase.getZoomFactor();this.inputBoxElement.style.left=e.x*t+"px",this.inputBoxElement.style.top=e.y*t+"px",this.inputBoxElement.style.height=e.height*t+"px",this.inputBoxElement.style.width=e.width*t+"px",this.inputBoxElement.style.borderWidth=this.borderWidth*t+"px",this.inputBoxElement.style.fontSize=this.fontSize*t+"px"},e}(),Cb=function(){function e(e,t){this.pdfViewer=e,this.pdfViewerBase=t,this.inputBoxElement=document.createElement("input"),this.inputBoxElement.addEventListener("focusout",this.onFocusOutInputBox.bind(this)),this.maxHeight=24.6,this.maxWidth=151,this.fontSize=16,this.isInFocus=!1,this.inputBoxElement.style.position="absolute",this.inputBoxElement.style.fontFamily="Helvetica"}return e.prototype.editLabel=function(e,t){var i=this.pdfViewerBase.currentPageNumber-1,n=this.pdfViewerBase.getElement("_pageDiv_"+i),o=this.pdfViewerBase.getZoomFactor();if(this.inputBoxElement.value=t.labelContent,this.inputBoxElement.select(),t.labelContent="",this.pdfViewer.nodePropertyChange(t,{}),this.inputBoxElement.style.left=e.x*o+"px",this.inputBoxElement.style.top=e.y*o+"px",this.inputBoxElement.style.maxHeight=this.maxHeight*o+"px",this.inputBoxElement.style.maxWidth=this.maxWidth*o+"px",this.inputBoxElement.style.fontSize=this.fontSize*o+"px",this.inputBoxElement.style.textAlign="center",t&&t.wrapper&&t.wrapper.bounds){this.inputBoxElement.style.width=t.wrapper.bounds.width?t.wrapper.bounds.width/2*o+1+"px":this.maxWidth*o+"px";var s=parseFloat(this.inputBoxElement.style.width);s=s>this.maxWidth*o?this.maxWidth*o:s,t.wrapper.bounds.left&&(this.inputBoxElement.style.left=(t.wrapper.bounds.left+t.wrapper.bounds.width/2-s/(2*o))*o+"px"),t.wrapper.bounds.top&&("Line"===t.shapeAnnotationType||"LineWidthArrowHead"===t.shapeAnnotationType||"Distance"===t.shapeAnnotationType||"Polygon"===t.shapeAnnotationType?this.inputBoxElement.style.top=(t.wrapper.bounds.top+t.wrapper.bounds.height/2-this.maxHeight)*o+"px":this.inputBoxElement.style.top=(t.wrapper.bounds.top+t.wrapper.bounds.height/2-this.maxHeight/2)*o+"px"),this.inputBoxElement.maxLength=t.labelMaxLength,this.inputBoxElement.fontFamily=t.fontFamily,this.inputBoxElement.style.color=t.fontColor,this.inputBoxElement.style.border="1px solid #ffffff00",this.inputBoxElement.style.padding="2px",this.inputBoxElement.style.background=t.labelFillColor}n.appendChild(this.inputBoxElement),this.isInFocus=!0,this.inputBoxElement.focus()},e.prototype.onFocusOutInputBox=function(){var e=this.pdfViewerBase.currentPageNumber-1,t=this.pdfViewerBase.getElement("_pageDiv_"+e),i=parseFloat(this.inputBoxElement.style.height),n=parseFloat(this.inputBoxElement.style.width);this.isInFocus=!1;var o=this.pdfViewer.selectedItems.annotations[0];if(o){n=(n-1)/this.pdfViewerBase.getZoomFactor(),i=(i-1)/this.pdfViewerBase.getZoomFactor(),o.labelContent=this.inputBoxElement.value,o.notes=this.inputBoxElement.value,"Rectangle"===o.shapeAnnotationType||"Ellipse"===o.shapeAnnotationType||"Line"===o.shapeAnnotationType||"LineWidthArrowHead"===o.shapeAnnotationType?this.pdfViewer.annotation.shapeAnnotationModule.modifyInCollection("labelContent",e,o):"Radius"===o.shapeAnnotationType&&o.measureType&&this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("labelContent",e,o),this.pdfViewer.nodePropertyChange(o,{}),this.pdfViewer.renderSelector(o.pageIndex,this.pdfViewer.annotationSelectorSettings);var s=document.getElementById(this.pdfViewer.selectedItems.annotations[0].annotName);s&&s.childNodes&&"label"!==this.inputBoxElement.value&&(s.childNodes[0].ej2_instances?s.childNodes[0].ej2_instances[0].value=this.inputBoxElement.value:s.childNodes[0].childNodes&&s.childNodes[0].childNodes[1].ej2_instances&&(s.childNodes[0].childNodes[1].ej2_instances[0].value=this.inputBoxElement.value))}t.removeChild(this.inputBoxElement);var a=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+e);this.pdfViewer.renderDrawing(a,e)},e.prototype.calculateLabelBounds=function(e,t){var i={};if(e){var n=0,o=0,s=0,a=24.6;void 0===t&&(t=this.pdfViewerBase.currentPageNumber-1);var r=this.pdfViewerBase.pageSize[t].rotation;e.width&&(s=(s=e.width/2)>0&&s<151?s:151),e.left&&(o=e.left+e.width/2-s/2),e.top&&(n=e.top+e.height/2-12.3),i=1===r||3===r?{left:o,top:n,width:s-a+s/2,height:49.2+s,right:0,bottom:0}:{left:o,top:n,width:s,height:a,right:0,bottom:0}}return i},e.prototype.calculateLabelBoundsFromLoadedDocument=function(e){var t={};if(e){var i=0,n=0,o=0;e.Width&&(o=(o=e.Width/2)>0&&o<151?o:151),e.Left&&(n=e.Left+e.Width/2-o/2),e.Top&&(i=e.Top+e.Height/2-12.3),t={left:n,top:i,width:o,height:24.6,right:0,bottom:0}}return t},e}(),xb=function(){function e(e,t){this.isUndoRedoAction=!1,this.isUndoAction=!1,this.annotationSelected=!0,this.isAnnotDeletionApiCall=!1,this.removedDocumentAnnotationCollection=[],this.isShapeCopied=!1,this.actionCollection=[],this.redoCollection=[],this.isPopupNoteVisible=!1,this.undoCommentsElement=[],this.redoCommentsElement=[],this.selectAnnotationId=null,this.isAnnotationSelected=!1,this.annotationPageIndex=null,this.previousIndex=null,this.overlappedAnnotations=[],this.overlappedCollections=[],this.isFormFieldShape=!1,this.removedAnnotationCollection=[],this.pdfViewer=e,this.pdfViewerBase=t,this.pdfViewer.enableTextMarkupAnnotation&&(this.textMarkupAnnotationModule=new Yg(this.pdfViewer,this.pdfViewerBase)),this.pdfViewer.enableShapeAnnotation&&(this.shapeAnnotationModule=new Qg(this.pdfViewer,this.pdfViewerBase)),this.pdfViewer.enableMeasureAnnotation&&(this.measureAnnotationModule=new Zg(this.pdfViewer,this.pdfViewerBase)),this.stampAnnotationModule=new Xg(this.pdfViewer,this.pdfViewerBase),this.stickyNotesAnnotationModule=new wb(this.pdfViewer,this.pdfViewerBase),this.freeTextAnnotationModule=new Sb(this.pdfViewer,this.pdfViewerBase),this.inputElementModule=new Cb(this.pdfViewer,this.pdfViewerBase),this.inkAnnotationModule=new bb(this.pdfViewer,this.pdfViewerBase)}return e.prototype.setAnnotationMode=function(e,t,i,n){var o=this.pdfViewer.allowServerDataBinding;if(this.pdfViewer.enableServerDataBinding(!1),"None"!==e&&this.triggerAnnotationUnselectEvent(),"None"===e)this.clearAnnotationMode();else if("Highlight"===e||"Strikethrough"===e||"Underline"===e)this.textMarkupAnnotationModule&&(this.textMarkupAnnotationModule.isSelectionMaintained=!1,this.textMarkupAnnotationModule.drawTextMarkupAnnotations(e.toString()));else if("Line"===e||"Arrow"===e||"Rectangle"===e||"Circle"===e||"Polygon"===e)this.shapeAnnotationModule&&this.shapeAnnotationModule.setAnnotationType(e);else if("Distance"===e||"Perimeter"===e||"Area"===e||"Radius"===e||"Volume"===e)this.measureAnnotationModule&&this.measureAnnotationModule.setAnnotationType(e);else if("FreeText"===e&&this.freeTextAnnotationModule)this.freeTextAnnotationModule.setAnnotationType("FreeText"),this.freeTextAnnotationModule.isNewFreeTextAnnot=!0,this.freeTextAnnotationModule.isNewAddedAnnot=!0;else if("HandWrittenSignature"===e)this.pdfViewerBase.signatureModule.setAnnotationMode();else if("Initial"===e)this.pdfViewerBase.signatureModule.setInitialMode();else if("Ink"===e)this.inkAnnotationModule.setAnnotationMode();else if("StickyNotes"===e){this.pdfViewerBase.isCommentIconAdded=!0,this.pdfViewerBase.isAddComment=!0;var s=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+(this.pdfViewerBase.currentPageNumber-1));s&&s.addEventListener("mousedown",this.pdfViewer.annotationModule.stickyNotesAnnotationModule.drawIcons.bind(this))}else if("Stamp"===e)if(this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0,this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=!0,this.pdfViewerBase.stampAdded=!0,t){var a=ea[t];this.pdfViewerBase.isDynamicStamp=!0,this.stampAnnotationModule.retrieveDynamicStampAnnotation(a)}else if(i){a=ta[i];this.pdfViewerBase.isDynamicStamp=!1,this.stampAnnotationModule.retrievestampAnnotation(a)}else if(n){a=ia[n];this.pdfViewerBase.isDynamicStamp=!1,this.stampAnnotationModule.retrievestampAnnotation(a)}this.pdfViewer.enableServerDataBinding(o,!0),this.pdfViewerBase.initiateTextSelection()},e.prototype.deleteAnnotationById=function(e){e&&(this.isAnnotDeletionApiCall=!0,this.annotationSelected=!1,this.selectAnnotation(e),this.deleteAnnotation(),this.isAnnotDeletionApiCall=!1)},e.prototype.clearAnnotationMode=function(){if(this.textMarkupAnnotationModule&&(this.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1),this.freeTextAnnotationModule&&(this.freeTextAnnotationModule.isNewFreeTextAnnot=!1,this.freeTextAnnotationModule.isNewAddedAnnot=!1),this.pdfViewerBase.isTextMarkupAnnotationModule()&&(this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode=""),this.pdfViewerBase.isShapeAnnotationModule()&&(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode=""),this.pdfViewerBase.isCalibrateAnnotationModule()&&(this.pdfViewer.annotation.measureAnnotationModule.currentAnnotationMode=""),this.pdfViewer.annotationModule.inkAnnotationModule){var e=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(e)}},e.prototype.deleteAnnotation=function(){this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.deleteTextMarkupAnnotation();var e=this.pdfViewer.selectedItems.annotations[0];if(e){var t=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_formfields"),i=JSON.parse(t),n=[];if(i){for(var o=0;o<i.length;o++)if(i[o].uniqueID==e.id){i[o].Value="";for(var s=0;s<i.length;s++)i[o].FieldName===i[s].FieldName&&"ink"===i[s].Name&&i.splice(s,1);n.push(i[o])}else n.push(i[o]);window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_formfields",JSON.stringify(n))}}var a=!1,r=!1;if(this.pdfViewer.selectedItems.annotations.length>0){var l=this.pdfViewer.selectedItems.annotations[0],d=l.shapeAnnotationType;if("Path"===d||"SignatureField"===l.formFieldAnnotationType||"InitialField"===l.formFieldAnnotationType||"HandWrittenSignature"===d||"SignatureText"===d||"SignatureImage"===d){var h=document.getElementById(l.id);h&&h.disabled&&(r=!0)}if(l.annotationSettings&&(a=l.annotationSettings.isLock)&&this.checkAllowedInteractions("Delete",l)&&(a=!1),!a&&!r){var p=l.pageIndex,c=l.shapeAnnotationType,u=void 0;"Line"===c||"LineWidthArrowHead"===c||"Polygon"===c||"Ellipse"===c||"Rectangle"===c||"Radius"===c||"Distance"===c?(m(l.measureType)||""===l.measureType?(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(l,"shape"),this.updateImportAnnotationCollection(l,p,"shapeAnnotation")):(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(l,"measure"),this.updateImportAnnotationCollection(l,p,"measureShapeAnnotation")),u=this.modifyInCollections(l,"delete")):"FreeText"===c?(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(l,"FreeText","delete"),u=this.modifyInCollections(l,"delete"),this.updateImportAnnotationCollection(l,p,"freeTextAnnotation")):"HandWrittenSignature"===c||"SignatureImage"===c||"SignatureText"===c?u=this.modifyInCollections(l,"delete"):"Ink"===c?(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(l,"Ink","delete"),u=this.modifyInCollections(l,"delete"),this.updateImportAnnotationCollection(l,p,"signatureInkAnnotation")):(u=this.pdfViewer.selectedItems.annotations[0],this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(u,u.shapeAnnotationType,"delete"),this.pdfViewer.annotation.stampAnnotationModule.updateSessionStorage(l,null,"delete")),"StickyNotes"===c&&this.updateImportAnnotationCollection(l,p,"stickyNotesAnnotation"),this.updateImportAnnotationCollection(l,p,"stampAnnotations"),this.pdfViewer.annotation.addAction(p,null,l,"Delete","",u,l);var f=void 0;""!==l.annotName?f=document.getElementById(l.annotName):u&&""!==u.annotName&&(f=document.getElementById(u.annotName)),this.removeCommentPanelDiv(f);var g=this.pdfViewer.selectedItems.annotations[0],y=g.annotName,v=this.getAnnotationType(g.shapeAnnotationType,g.measureType);if("Path"===c||"SignatureField"===g.formFieldAnnotationType||"InitialField"===g.formFieldAnnotationType||"HandWrittenSignature"===c||"SignatureText"===c||"SignatureImage"===c){var w=this.pdfViewer.retrieveFormFields(),b=void 0;(M=w.findIndex((function(e){return e.id===l.id})))>-1&&(b=w[M].name);for(var S=0;S<w.length;S++)if(g.id===w[S].id||m(b)&&b===w[S].name){w[S].value="",w[S].signatureType="";var C=this.getAnnotationsFromCollections(w[S].id);this.updateInputFieldDivElement(C),u=this.modifyInCollections(C,"delete"),this.pdfViewer.annotation.addAction(C.pageIndex,null,C,"Delete","",u,C),this.pdfViewer.formDesignerModule&&g.formFieldAnnotationType?this.updateFormFieldCollection(C):this.updateAnnotationCollection(C),this.pdfViewer.remove(C)}this.pdfViewer.formDesignerModule&&g.formFieldAnnotationType?this.updateFormFieldCollection(l):this.updateAnnotationCollection(l)}this.pdfViewer.formDesignerModule&&g.formFieldAnnotationType?this.updateFormFieldCollection(l):this.updateAnnotationCollection(l);var x=this.pdfViewer.nameTable[l.id.split("_")[0]];if(null!=x&&("SignatureField"===x.formFieldAnnotationType||"InitialField"===x.formFieldAnnotationType)){var M;b=void 0;(M=this.pdfViewer.formFieldCollections.findIndex((function(e){return e.id===l.id.split("_")[0]})))>-1&&(b=this.pdfViewer.formFieldCollections[M].name);for(var I=0;I<this.pdfViewer.formFieldCollections.length;I++)if(b===this.pdfViewer.formFieldCollections[I].name){var T=this.pdfViewer.formFieldCollections[I];this.pdfViewer.fireFormFieldPropertiesChangeEvent("formFieldPropertiesChange",T,T.pageIndex,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,T.value,""),T.value="",T.signatureType="",this.pdfViewer.formDesignerModule.updateFormFieldCollections(T);var A=this.getAnnotationsFromCollections(T.id+"_content");u=this.modifyInCollections(A,"delete"),this.pdfViewer.annotation.addAction(A.pageIndex,null,A,"Delete","",u,A),this.updateInputFieldDivElement(A);var k=this.pdfViewer.nameTable[A.id.split("_")[0]];k.wrapper.children.splice(k.wrapper.children.indexOf(A.wrapper.children[0]),1),this.pdfViewer.remove(A)}}if(this.pdfViewer.remove(l),this.pdfViewer.renderDrawing(),this.pdfViewer.clearSelection(p),this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner"),this.pdfViewerBase.updateDocumentEditedProperty(!0),this.pdfViewerBase.tool=null,this.pdfViewer.tool=null,"HandWrittenSignature"===g.shapeAnnotationType||"SignatureText"===g.shapeAnnotationType||"SignatureImage"===g.shapeAnnotationType||"Path"===g.shapeAnnotationType){var V={left:g.bounds.x,top:g.bounds.y,width:g.bounds.width,height:g.bounds.height};this.pdfViewer.fireSignatureRemove(p,g.id,g.shapeAnnotationType,V)}else this.pdfViewer.annotationModule&&this.pdfViewer.fireAnnotationRemove(p,y,v,g.bounds);this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.enableTextSelectionMode()}}this.updateToolbar(!0),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&!a&&(this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(!1,!0),this.pdfViewer.toolbarModule.annotationToolbarModule.enableTextMarkupAnnotationPropertiesTools(!1))},e.prototype.getAnnotationsFromCollections=function(e){var t=this.pdfViewer.annotations;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].id===e)return t[i]},e.prototype.updateInputFieldDivElement=function(e){var t=document.getElementById(e.id),i=document.getElementById(e.id+"_html_element");null!==t||m(i)||(t=i.children[0].children[0]),t&&t.classList.contains("e-pdfviewer-signatureformfields-signature")&&(t.className="e-pdfviewer-signatureformfields",t.style.pointerEvents="",t.parentElement.style.pointerEvents="",this.pdfViewer.formDesignerModule?this.pdfViewer.formDesignerModule.updateSignatureValue(e.id):this.pdfViewer.formFieldsModule.updateDataInSession(t,""))},e.prototype.storeAnnotationCollections=function(e,t){if(this.isFormFieldShape){var i=this.checkFormDesignCollection(e);(n=qs(e)).formFieldId=e.annotName,n.pageNumber=t,delete n.annotName,e.id&&(n.uniqueKey=e.id,delete n.id),i.isExisting?this.pdfViewer.formFieldCollection.splice(i.position,0,n):this.pdfViewer.formFieldCollection.push(n)}else{var n;i=this.checkAnnotationCollection(e);(n=qs(e)).annotationId=e.annotName,n.pageNumber=t,delete n.annotName,"stamp"===e.shapeAnnotationType&&(n.uniqueKey=e.randomId,delete n.randomId),"sticky"===e.shapeAnnotationType&&(n.uniqueKey=e.annotName),e.id&&(n.uniqueKey=e.id,delete n.id),n.customData&&e.customData&&JSON.stringify(n.customData)!==JSON.stringify(e.customData)&&(n.customData=e.customData),i.isExisting?this.pdfViewer.annotationCollection.splice(i.position,0,n):this.pdfViewer.annotationCollection.push(n)}},e.prototype.checkFormDesignCollection=function(e){var t=this.pdfViewer.formFieldCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].formFieldId===e.annotName)return this.pdfViewer.formFieldCollection.splice(i,1),{isExisting:!0,position:i};return{isExisting:!1,position:null}},e.prototype.updateFormFieldCollection=function(e){var t=this.pdfViewer.formFieldCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].formFieldId===e.annotName){this.removedAnnotationCollection.push(t[i]),this.pdfViewer.formFieldCollection.splice(i,1);break}},e.prototype.getCustomData=function(e){var t;return e.ExistingCustomData&&!e.CustomData?t=JSON.parse(e.ExistingCustomData):null===e.CustomData?("sticky"===e.shapeAnnotationType&&(t=this.pdfViewer.stickyNotesSettings.customData),"Stamp"===e.shapeAnnotationType&&(t=this.pdfViewer.stampSettings.customData),"FreeText"===e.shapeAnnotationType&&(t=this.pdfViewer.freeTextSettings.customData),"shape"===e.id&&(t=this.getShapeData(e.ShapeAnnotationType,e.subject)),"measure"===e.id&&(t=this.getMeasureData(e.Subject)),"textMarkup"===e.shapeAnnotationType&&(t=this.getTextMarkupData(e.subject)),"Ink"===e.shapeAnnotationType&&(t=this.pdfViewer.inkAnnotationSettings.customData)):t=e.CustomData,t},e.prototype.getShapeData=function(e,t){var i;return"Line"===e&&"Arrow"!==t&&this.pdfViewer.lineSettings.customData?i=this.pdfViewer.lineSettings.customData:"LineWidthArrowHead"!==e&&"Arrow"!==t||!this.pdfViewer.arrowSettings.customData?"Rectangle"!==e&&"Square"!==e||!this.pdfViewer.rectangleSettings.customData?"Ellipse"!==e&&"Circle"!==e||!this.pdfViewer.circleSettings.customData?"Polygon"===e&&this.pdfViewer.polygonSettings.customData?i=this.pdfViewer.polygonSettings.customData:this.pdfViewer.annotationSettings.customData&&(i=this.pdfViewer.annotationSettings.customData):i=this.pdfViewer.circleSettings.customData:i=this.pdfViewer.rectangleSettings.customData:i=this.pdfViewer.arrowSettings.customData,i},e.prototype.getMeasureData=function(e){var t;return"Distance"!==e&&"Distance calculation"!==e||!this.pdfViewer.distanceSettings.customData?"Line"!==e&&"Perimeter calculation"!==e||!this.pdfViewer.lineSettings.customData?"Polygon"!==e&&"Area calculation"!==e&&"Volume calculation"!==e||!this.pdfViewer.polygonSettings.customData?"Radius"!==e&&"Radius calculation"!==e||!this.pdfViewer.radiusSettings.customData?this.pdfViewer.annotationSettings.customData&&(t=this.pdfViewer.annotationSettings.customData):t=this.pdfViewer.radiusSettings.customData:t=this.pdfViewer.polygonSettings.customData:t=this.pdfViewer.lineSettings.customData:t=this.pdfViewer.distanceSettings.customData,t},e.prototype.getTextMarkupData=function(e){var t;return"Highlight"===e&&this.pdfViewer.highlightSettings.customData?t=this.pdfViewer.highlightSettings.customData:"Underline"===e&&this.pdfViewer.underlineSettings.customData?t=this.pdfViewer.underlineSettings.customData:"Strikethrough"===e&&this.pdfViewer.strikethroughSettings.customData?t=this.pdfViewer.strikethroughSettings.customData:this.pdfViewer.annotationSettings.customData&&(t=this.pdfViewer.annotationSettings.customData),t},e.prototype.getData=function(e){var t;return"FreeText"===e&&this.pdfViewer.freeTextSettings.customData?t=this.pdfViewer.freeTextSettings.customData:"image"!==e&&"Stamp"!==e||!this.pdfViewer.stampSettings.customData?"sticky"===e&&this.pdfViewer.stickyNotesSettings.customData?t=this.pdfViewer.stickyNotesSettings.customData:this.pdfViewer.annotationSettings.customData&&(t=this.pdfViewer.annotationSettings.customData):t=this.pdfViewer.stampSettings.customData,t},e.prototype.clearAnnotationStorage=function(){if(Math.round(JSON.stringify(window.sessionStorage).length/1024)>4500){for(var e=window.sessionStorage.length,t=[],i=0;i<e;i++)window.sessionStorage.key(i)&&window.sessionStorage.key(i).split("_")[3]&&"annotations"===window.sessionStorage.key(i).split("_")[3]&&(this.pdfViewerBase.annotationStorage[window.sessionStorage.key(i)]=window.sessionStorage.getItem(window.sessionStorage.key(i)),t.push(window.sessionStorage.key(i)));if(t)for(i=0;i<t.length;i++)window.sessionStorage.removeItem(t[i])}},e.prototype.checkAnnotationCollection=function(e){var t=this.pdfViewer.annotationCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].annotationId===e.annotName)return this.pdfViewer.annotationCollection.splice(i,1),{isExisting:!0,position:i};return{isExisting:!1,position:null}},e.prototype.updateAnnotationCollection=function(e){var t=this.pdfViewer.annotationCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].annotationId===e.annotName||t[i].annotationId===e.annotationId){this.removedAnnotationCollection.push(t[i]),this.pdfViewer.annotationCollection.splice(i,1);break}},e.prototype.updateImportAnnotationCollection=function(e,t,i){if(this.pdfViewerBase.isImportAction&&this.pdfViewerBase.importedAnnotation&&this.pdfViewerBase.importedAnnotation[t]){var n=this.pdfViewerBase.importedAnnotation[t];if(n[i])for(var o=0;o<n[i].length;o++)if(e.annotName===n[i][o].AnnotName||e.annotName===n[i][o].annotName){this.pdfViewerBase.importedAnnotation[t][i].splice(o,1);break}}var s=this.pdfViewerBase.documentAnnotationCollections;if(s&&s[t]){var a=s[t];if(a&&a[i])for(o=0;o<a[i].length;o++)if(e.annotName===a[i][o].AnnotName){this.pdfViewerBase.documentAnnotationCollections[t][i].splice(o,1);break}}},e.prototype.selectAnnotation=function(e){var t,i;if("object"===typeof e&&(i=(t=e).annotationId,t=this.getAnnotationsFromAnnotationCollections(i)),"string"===typeof e&&(t=this.getAnnotationsFromAnnotationCollections(e),i=e),t){var n,o=m(t.pageNumber)?t.pageIndex:t.pageNumber;n=this.findRenderPageList(o);var s=this.pdfViewer.annotationSelectorSettings;if(t&&o>=0){if("textMarkup"===t.shapeAnnotationType)if(t.rect||t.bounds){var a=this.pdfViewerBase.pageSize[o].top*this.pdfViewerBase.getZoomFactor()+this.getAnnotationTop(t)*this.pdfViewerBase.getZoomFactor();if(!this.isAnnotDeletionApiCall){var r=(a-20).toString();this.pdfViewerBase.viewerContainer.scrollTop=parseInt(r),this.pdfViewerBase.viewerContainer.scrollLeft=this.getAnnotationLeft(t)*this.pdfViewerBase.getZoomFactor()}}else this.pdfViewer.navigation&&this.pdfViewer.navigation.goToPage(o+1);else if(t.bounds){a=this.pdfViewerBase.pageSize[o].top*this.pdfViewerBase.getZoomFactor()+t.bounds.top*this.pdfViewerBase.getZoomFactor();var l=t.bounds.left*this.pdfViewerBase.getZoomFactor();if("Ink"===t.shapeAnnotationType&&(a=this.pdfViewerBase.pageSize[o].top*this.pdfViewerBase.getZoomFactor()+t.bounds.y*this.pdfViewerBase.getZoomFactor(),l=t.bounds.x*this.pdfViewerBase.getZoomFactor()),!this.isAnnotDeletionApiCall){var d=(a-20).toString();this.pdfViewerBase.viewerContainer.scrollTop=parseInt(d),this.pdfViewerBase.viewerContainer.scrollLeft=l}}else this.pdfViewer.navigation&&this.pdfViewer.navigation.goToPage(o+1);if(n){if(this.previousIndex&&this.pdfViewer.clearSelection(this.previousIndex),this.pdfViewer.clearSelection(o),this.previousIndex=o,"textMarkup"===t.shapeAnnotationType){this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(o,!0);var h=this.pdfViewerBase.getElement("_annotationCanvas_"+o),p=this.getTextMarkupAnnotations(o,t);p&&(this.textMarkupAnnotationModule.currentTextMarkupAnnotation=null,this.textMarkupAnnotationModule.isSelectedAnnotation=!0,this.textMarkupAnnotationModule.showHideDropletDiv(!0),this.textMarkupAnnotationModule.annotationClickPosition=null,this.textMarkupAnnotationModule.selectAnnotation(p,h,o,null,!0),this.textMarkupAnnotationModule.currentTextMarkupAnnotation=p,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=o,this.textMarkupAnnotationModule.enableAnnotationPropertiesTool(!0),this.textMarkupAnnotationModule.isSelectedAnnotation=!1,this.pdfViewer.toolbarModule&&this.pdfViewer.enableAnnotationToolbar&&(this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=!0,this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem)))}else"stamp"===t.shapeAnnotationType||"stamp"===t.ShapeAnnotationType?(this.pdfViewer.select([t.uniqueKey],s),this.pdfViewer.annotation.onAnnotationMouseDown()):"sticky"===t.shapeAnnotationType||"sticky"===t.ShapeAnnotationType?(this.pdfViewer.select([t.annotationId],s),this.pdfViewer.annotation.onAnnotationMouseDown()):(this.pdfViewer.select([t.uniqueKey],s),this.pdfViewer.annotation.onAnnotationMouseDown());var c=document.getElementById(this.pdfViewer.element.id+"_commantPanel");if(c&&"block"===c.style.display){var u=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+this.pdfViewer.currentPageNumber);u&&u.ej2_instances[0].expandItem(!0);var f=document.getElementById(i);f&&(f.classList.contains("e-pv-comments-border")||f.firstChild.click())}}else(t.uniqueKey||"textMarkup"===t.shapeAnnotationType&&"Imported Annotation"===t.annotationAddMode)&&(this.selectAnnotationId=i,this.isAnnotationSelected=!0,this.annotationPageIndex=o,this.selectAnnotationFromCodeBehind())}if(!n&&!t.uniqueKey){var g=this.updateCollectionForNonRenderedPages(t,i,o);g.pageIndex=o,this.pdfViewer.annotation.addAction(o,null,g,"Delete","",g,g),this.undoCommentsElement.push(g);var y=document.getElementById(t.annotationId);this.removeCommentPanelDiv(y)}}},e.prototype.updateCollectionForNonRenderedPages=function(e,t,i){var n,o=this.pdfViewer.annotationCollection;if(o.length){var s=o.filter((function(e){return e.annotationId===t}));n=s[0],this.updateAnnotationCollection(s[0])}var a=this.getTypeOfAnnotation(e),r=this.pdfViewerBase.documentAnnotationCollections[i];if(r[a].length)for(var l=0;l<r[a].length;l++)if(r[a][l].AnnotName===e.annotationId){var d=r[a][l];this.removedDocumentAnnotationCollection.push(d),r[a].splice(l,1);break}return n},e.prototype.getTypeOfAnnotation=function(e){var t;return e.id&&"shape"===e.id.toLowerCase()?t="shapeAnnotation":e.id&&"measure"===e.id.toLowerCase()?t="measureShapeAnnotation":e.id&&"freetext"===e.id.toLowerCase()?t="freeTextAnnotation":e.shapeAnnotationType&&"textmarkup"===e.shapeAnnotationType.toLowerCase()?t="textMarkupAnnotation":e.shapeAnnotationType&&"stamp"===e.shapeAnnotationType.toLowerCase()?t="stampAnnotations":e.shapeAnnotationType&&"ink"===e.shapeAnnotationType.toLowerCase()?t="signatureInkAnnotation":e.shapeAnnotationType&&"sticky"===e.shapeAnnotationType.toLowerCase()&&(t="stickyNotesAnnotation"),t},e.prototype.removeCommentPanelDiv=function(e){e&&(1===e.parentElement.childElementCount?this.stickyNotesAnnotationModule.updateAccordionContainer(e):e.remove())},e.prototype.clearSelection=function(){if(this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.currentTextMarkupAnnotation)this.textMarkupAnnotationModule.clearCurrentSelectedAnnotation(),this.textMarkupAnnotationModule.clearCurrentAnnotationSelection(this.textMarkupAnnotationModule.selectTextMarkupCurrentPage);else if(this.pdfViewer.selectedItems&&this.pdfViewer.selectedItems.annotations[0]){var e=this.pdfViewer.selectedItems.annotations[0];this.pdfViewer.clearSelection(e.pageIndex)}else this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber-1)},e.prototype.getAnnotationTop=function(e){return e.rect?e.rect.Top?e.rect.Top:e.rect.top:e.bounds[0].Top?e.bounds[0].Top:e.bounds[0].top},e.prototype.getAnnotationLeft=function(e){return e.rect?e.rect.Left?e.rect.Left:e.rect.left:e.bounds[0].Left?e.bounds[0].Left:e.bounds[0].left},e.prototype.selectAnnotationFromCodeBehind=function(){if(this.isAnnotationSelected&&this.selectAnnotationId){var e=this.getAnnotationsFromAnnotationCollections(this.selectAnnotationId),t=this.selectAnnotationId,i=e.pageNumber,n=this.pdfViewer.annotationSelectorSettings;if(e&&this.annotationPageIndex>=0&&this.annotationPageIndex===i){if(this.previousIndex&&this.pdfViewer.clearSelection(this.previousIndex),this.pdfViewer.clearSelection(i),this.previousIndex=i,"textMarkup"===e.shapeAnnotationType){this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(i,!0);var o=this.pdfViewerBase.getElement("_annotationCanvas_"+i),s=this.getTextMarkupAnnotations(i,e);s&&(this.textMarkupAnnotationModule.currentTextMarkupAnnotation=null,this.textMarkupAnnotationModule.isSelectedAnnotation=!0,this.textMarkupAnnotationModule.showHideDropletDiv(!0),this.textMarkupAnnotationModule.annotationClickPosition=null,this.textMarkupAnnotationModule.selectAnnotation(s,o,i),this.textMarkupAnnotationModule.currentTextMarkupAnnotation=s,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=i,this.textMarkupAnnotationModule.enableAnnotationPropertiesTool(!0),this.textMarkupAnnotationModule.isSelectedAnnotation=!1,this.pdfViewer.toolbarModule&&this.pdfViewer.enableAnnotationToolbar&&(this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=!0,this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem)))}else"stamp"===e.shapeAnnotationType||"stamp"===e.ShapeAnnotationType?(this.pdfViewer.select([e.uniqueKey],n),this.pdfViewer.annotation.onAnnotationMouseDown()):"sticky"===e.shapeAnnotationType||"sticky"===e.ShapeAnnotationType?(this.pdfViewer.select([e.annotationId],n),this.pdfViewer.annotation.onAnnotationMouseDown()):e.uniqueKey?(this.pdfViewer.select([e.uniqueKey],n),this.pdfViewer.annotation.onAnnotationMouseDown()):(this.pdfViewer.select([e.annotationId],n),this.pdfViewer.annotation.onAnnotationMouseDown());var a=document.getElementById(this.pdfViewer.element.id+"_commantPanel");if(a&&"block"===a.style.display){var r=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+this.pdfViewer.currentPageNumber);r&&r.ej2_instances[0].expandItem(!0);var l=document.getElementById(t);l&&(l.classList.contains("e-pv-comments-border")||l.firstChild.click())}}this.isAnnotationSelected=!1,this.selectAnnotationId=null,this.annotationPageIndex=null}},e.prototype.findRenderPageList=function(e){var t=!1,i=this.pdfViewerBase.renderedPagesList;if(i)for(var n=0;n<i.length;n++)if(i[n]===e)return t=!0;return t},e.prototype.getPageNumberFromAnnotationCollections=function(e){var t=this.pdfViewer.annotations;if(e){if("textMarkup"===e.shapeAnnotationType)return e.pageNumber;if(t)for(var i=0;i<t.length;i++)if(t[i].annotName===e.annotationId)return t[i].pageIndex}},e.prototype.getAnnotationsFromAnnotationCollections=function(e){var t=this.pdfViewer.annotationCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].annotationId===e)return t[i];0===this.pdfViewer.selectedItems.annotations.length&&this.pdfViewer.selectedItems.annotations.push(this.pdfViewer.nameTable[e])},e.prototype.getTextMarkupAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_textMarkup");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_textMarkup"]),!i)return null;var n=JSON.parse(i),o=this.getPageCollection(n,e);if(n[o]){for(var s=0;s<n[o].annotations.length;s++)if(n[o].annotations[s].annotName===t.annotationId)return n[o].annotations[s];return null}},e.prototype.getAnnotationType=function(e,t){var i;if(""===t||m(t))switch(e){case"Line":i="Line";break;case"LineWidthArrowHead":i="Arrow";break;case"Rectangle":i="Rectangle";break;case"Ellipse":i="Circle";break;case"Polygon":i="Polygon";break;case"Stamp":i="Stamp";break;case"Image":i="Image";break;case"FreeText":i="FreeText";break;case"Ink":i="Ink";break;case"StickyNotes":i="StickyNotes"}else switch(t){case"Distance":i="Distance";break;case"Perimeter":i="Perimeter";break;case"Area":i="Area";break;case"Radius":i="Radius";break;case"Volume":i="Volume"}return i},e.prototype.getAnnotationIndex=function(e,t){for(var i=this.pdfViewer.drawing.getPageObjects(e),n=null,o=0;o<i.length;o++)if(i[o].id===t){n=o;break}return n},e.prototype.initializeCollection=function(){this.actionCollection=[],this.redoCollection=[],this.pdfViewerBase.customStampCollection=[],this.popupNote||this.createNote()},e.prototype.showCommentsPanel=function(){if(this.pdfViewer.enableCommentPanel){var e=document.getElementById(this.pdfViewer.element.id+"_commantPanel");if(e&&"none"===e.style.display){if(e.style.display="block",ge.isDevice&&!S())document.getElementById(this.pdfViewer.element.id+"_viewerMainContainer").insertBefore(this.pdfViewerBase.navigationPane.commentPanelContainer,this.pdfViewer.toolbarModule.toolbarElement);this.pdfViewerBase.navigationPane.commentPanelResizer&&(this.pdfViewerBase.navigationPane.commentPanelResizer.style.display="block"),this.pdfViewerBase.navigationPane.setCommentPanelResizeIconTop(),this.pdfViewer.annotation.stickyNotesAnnotationModule.updateCommentPanelTextTop();var t=document.getElementById(this.pdfViewer.element.id+"_viewerContainer"),i=document.getElementById(this.pdfViewer.element.id+"_pageViewContainer");if(t&&(this.pdfViewer.enableRtl?t.style.left=this.pdfViewerBase.navigationPane.getViewerContainerRight()+"px":t.style.right=this.pdfViewerBase.navigationPane.getViewerContainerRight()+"px",t.style.width=this.pdfViewer.element.clientWidth-this.pdfViewerBase.navigationPane.getViewerContainerLeft()-this.pdfViewerBase.navigationPane.getViewerContainerRight()+"px",i.style.width=t.offsetWidth-this.pdfViewerBase.navigationPane.getViewerContainerScrollbarWidth()+"px"),this.pdfViewerBase.updateZoomValue(),this.pdfViewer.annotation&&this.pdfViewer.annotation.textMarkupAnnotationModule&&this.pdfViewer.annotation.textMarkupAnnotationModule.showHideDropletDiv(!0),ge.isDevice&&!S()){if(e.style.height=this.pdfViewerBase.viewerMainContainer.clientHeight+"px",this.pdfViewer.selectedItems.annotations.length>0){var n=document.getElementById(this.pdfViewer.selectedItems.annotations[0].annotName);n&&n.lastElementChild.children[1]&&n.lastElementChild.children[1].ej2_instances?n.lastElementChild.children[1].ej2_instances[0].enableEditMode=!0:n&&n.lastElementChild.ej2_instances&&(n.lastElementChild.ej2_instances[0].enableEditMode=!0,n.lastElementChild.style.display="block",n.lastElementChild.children[1]&&(n.lastElementChild.children[1].style.display="block"))}this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar&&(this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar.element.style.display="none",this.pdfViewer.toolbarModule.annotationToolbarModule.propertyToolbar&&(this.pdfViewer.toolbarModule.annotationToolbarModule.propertyToolbar.element.style.display="none"))}}}},e.prototype.addAction=function(e,t,i,n,o,s,a){var r={pageIndex:e,index:t,annotation:i,action:n,modifiedProperty:o,undoElement:s,redoElement:a};this.actionCollection.push(r),this.updateToolbar()},e.prototype.undo=function(){var e=this.actionCollection.pop();if(e){var t=e.annotation.shapeAnnotationType;switch(this.isUndoRedoAction=!0,this.isUndoAction=!0,e.action){case"Text Markup Added":case"Text Markup Deleted":this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.undoTextMarkupAction(e.annotation,e.pageIndex,e.index,e.action);break;case"Text Markup Property modified":this.textMarkupAnnotationModule&&(e.annotation=this.textMarkupAnnotationModule.undoRedoPropertyChange(e.annotation,e.pageIndex,e.index,e.modifiedProperty,!0));break;case"Drag":case"Resize":_s(e.annotation)?this.pdfViewer.nodePropertyChange(e.annotation,{bounds:e.undoElement.bounds,vertexPoints:e.undoElement.vertexPoints,leaderHeight:e.undoElement.leaderHeight}):this.pdfViewer.nodePropertyChange(e.annotation,{bounds:e.undoElement.bounds}),"Distance"!==e.annotation.measureType&&"Perimeter"!==e.annotation.measureType&&"Area"!==e.annotation.measureType&&"Radius"!==e.annotation.measureType&&"Volume"!==e.annotation.measureType||(this.pdfViewer.nodePropertyChange(e.annotation,{notes:e.undoElement.notes}),this.updateCalibrateValues(e.annotation)),e.annotation.formFieldAnnotationType&&this.pdfViewer.formDesigner.updateHTMLElement(e.annotation),this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.pdfViewer.select([e.annotation.id]),"Line"!==e.annotation.shapeAnnotationType&&"Rectangle"!==e.annotation.shapeAnnotationType&&"Ellipse"!==e.annotation.shapeAnnotationType&&"Polygon"!==e.annotation.shapeAnnotationType&&"LineWidthArrowHead"!==e.annotation.shapeAnnotationType&&"Radius"!==e.annotation.shapeAnnotationType&&"FreeText"!==e.annotation.shapeAnnotationType&&"HandWrittenSignature"!==e.annotation.shapeAnnotationType&&"SignatureText"!==e.annotation.shapeAnnotationType&&"SignatureImage"!==e.annotation.shapeAnnotationType&&"Ink"!==e.annotation.shapeAnnotationType||this.modifyInCollections(e.annotation,"bounds");break;case"Addition":if(this.pdfViewer.formDesigner&&e.annotation.formFieldAnnotationType)this.pdfViewer.formDesigner.deleteFormField(e.undoElement.id,!1);else{var i=!1;if("Line"===t||"LineWidthArrowHead"===t||"Polygon"===t||"Ellipse"===t||"Rectangle"===t||"Radius"===t||"Distance"===t){""===e.annotation.measureType||m(e.annotation.measureType)?this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,"shape"):this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,"measure"),i=!0;var n=e.annotation,o=n.wrapper?n.wrapper:null;o&&o.bounds&&(e.annotation.bounds=o.bounds),e.duplicate=this.modifyInCollections(e.annotation,"delete")}"Stamp"!==t&&"Image"!==t||(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,e.annotation.shapeAnnotationType,"delete"),this.stampAnnotationModule.updateSessionStorage(e.annotation,null,"delete"),i=!0),"FreeText"!==t&&"HandWrittenSignature"!==t&&"SignatureImage"!==t&&"SignatureText"!==t&&"Ink"!==t||(i=!0,this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,e.annotation.shapeAnnotationType,"delete"),e.duplicate=this.modifyInCollections(e.annotation,"delete")),i||this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,e.annotation.shapeAnnotationType,"delete"),this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.pdfViewer.remove(e.annotation),this.pdfViewer.renderDrawing(null,e.annotation.pageIndex);var s=document.getElementById(e.annotation.annotName);if(s&&(1===s.parentElement.childElementCount?this.stickyNotesAnnotationModule.updateAccordionContainer(s):s.parentElement.removeChild(s)),ge.isDevice&&!this.pdfViewer.enableDesktopMode){var a=document.getElementById(this.pdfViewer.element.id+"_propertyToolbar");a&&a.children.length>0&&(this.pdfViewer.toolbarModule.annotationToolbarModule.toolbarCreated=!1,this.pdfViewer.toolbarModule.annotationToolbarModule.createAnnotationToolbarForMobile())}}break;case"Delete":if(this.pdfViewer.formDesigner&&e.annotation.formFieldAnnotationType)e.undoElement.bounds.x=e.undoElement.wrapper.bounds.x,e.undoElement.bounds.y=e.undoElement.wrapper.bounds.y,this.pdfViewer.formDesigner.drawFormField(e.undoElement);else{if("Line"!==t&&"LineWidthArrowHead"!==t&&"Polygon"!==t&&"Ellipse"!==t&&"Rectangle"!==t&&"Radius"!==t&&"Distance"!==t||(""===e.annotation.measureType||m(e.annotation.measureType)?(t="shape",this.shapeAnnotationModule.addInCollection(e.annotation.pageIndex,e.undoElement)):(t="shape_measure",this.measureAnnotationModule.addInCollection(e.annotation.pageIndex,e.undoElement))),"Stamp"===t||"Image"===t?this.stampAnnotationModule.updateDeleteItems(e.annotation.pageIndex,e.annotation):"FreeText"===t?this.freeTextAnnotationModule.addInCollection(e.annotation.pageIndex,e.undoElement):"Ink"===t&&this.inkAnnotationModule.addInCollection(e.annotation.pageIndex,e.undoElement),!e.annotation.annotationId){var r=this.pdfViewer.add(e.annotation);("FreeText"===t||r.enableShapeLabel)&&r&&this.pdfViewer.nodePropertyChange(r,{})}var l=void 0;if(e.annotation.id&&(l=this.pdfViewer.nameTable[e.annotation.id.split("_")[0]]),null!=l&&("SignatureField"===l.formFieldAnnotationType||"InitialField"===l.formFieldAnnotationType)){l.wrapper.children.push(e.annotation.wrapper.children[0]),"SignatureText"===e.annotation.shapeAnnotationType&&l.wrapper.children.push(e.annotation.wrapper.children[1]);var d=e.annotation.id.split("_")[0]+"_content",h=null;if(this.pdfViewer.formDesignerModule&&(h=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner")),h){for(var p=JSON.parse(h),c=0;c<p.length;c++)if(p[c].Key===d)if("SignatureText"===e.annotation.shapeAnnotationType)p[c].FormField.signatureType="Text",p[c].FormField.value=e.annotation.data,this.pdfViewerBase.formFieldCollection[c].FormField.value=e.annotation.data,this.pdfViewerBase.formFieldCollection[c].FormField.signatureType="Text";else if("SignatureImage"===e.annotation.shapeAnnotationType)p[c].FormField.signatureType="Image",p[c].FormField.value=e.annotation.data,this.pdfViewerBase.formFieldCollection[c].FormField.value=e.annotation.data,this.pdfViewerBase.formFieldCollection[c].FormField.signatureType="Image";else{p[c].FormField.signatureType="Path",this.pdfViewerBase.formFieldCollection[c].FormField.signatureType="Path";var u=os(es(e.annotation.data));p[c].FormField.value=JSON.stringify(u),this.pdfViewerBase.formFieldCollection[c].FormField.value=JSON.stringify(u)}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")}}if(this.pdfViewer.renderDrawing(null,e.annotation.pageIndex),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(e.annotation.pageIndex,t),e.annotation.annotationId){var f=this.removedAnnotationCollection[this.removedAnnotationCollection.length-1],g=this.getTypeOfAnnotation(f);this.pdfViewer.annotationCollection.push(f),this.removedAnnotationCollection.splice(this.removedAnnotationCollection.length-1);var y=e.annotation.pageNumber>=0?e.annotation.pageNumber:e.annotation.pageIndex;this.pdfViewerBase.documentAnnotationCollections[y][g].push(this.removedDocumentAnnotationCollection[this.removedDocumentAnnotationCollection.length-1]),this.removedDocumentAnnotationCollection.splice(this.removedDocumentAnnotationCollection.length-1)}}break;case"stampOpacity":this.pdfViewer.nodePropertyChange(e.annotation,{opacity:e.undoElement.opacity}),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e.annotation,null,!0),e.annotation.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();break;case"Shape Stroke":this.pdfViewer.nodePropertyChange(e.annotation,{strokeColor:e.undoElement.strokeColor}),this.modifyInCollections(e.annotation,"stroke"),this.pdfViewer.renderDrawing();break;case"Shape Fill":this.pdfViewer.nodePropertyChange(e.annotation,{fillColor:e.undoElement.fillColor}),this.modifyInCollections(e.annotation,"fill"),this.pdfViewer.renderDrawing();break;case"Shape Opacity":this.pdfViewer.nodePropertyChange(e.annotation,{opacity:e.undoElement.opacity}),"StickyNotes"===e.annotation.shapeAnnotationType?(this.stickyNotesAnnotationModule.updateOpacityValue(e.annotation),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e.annotation,null,!0),e.annotation.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime()):this.modifyInCollections(e.annotation,"opacity"),this.pdfViewer.renderDrawing();break;case"Shape Thickness":this.pdfViewer.nodePropertyChange(e.annotation,{thickness:e.undoElement.thickness}),this.modifyInCollections(e.annotation,"thickness"),this.pdfViewer.renderDrawing();break;case"Line properties change":this.pdfViewer.nodePropertyChange(e.annotation,{fillColor:e.undoElement.fillColor,borderDashArray:e.undoElement.borderDashArray,borderStyle:e.undoElement.borderStyle,strokeColor:e.undoElement.strokeColor,opacity:e.undoElement.opacity,thickness:e.undoElement.thickness,sourceDecoraterShapes:this.getArrowType(e.undoElement.lineHeadStart),taregetDecoraterShapes:this.getArrowType(e.undoElement.lineHeadEnd)}),this.updateCollectionForLineProperty(e.annotation),this.pdfViewer.renderDrawing();break;case"Text Property Added":e.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(e.annotation,e.action,e.undoElement),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e.annotation,null,!0),e.annotation.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();break;case"Comments Property Added":case"Status Property Added":case"Comments Reply Deleted":e.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(e.annotation,e.action,e.undoElement);break;case"dynamicText Change":this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!0,e.annotation.dynamicText=e.undoElement.dynamicText,this.pdfViewer.selectedItems.annotations[0]&&(this.pdfViewer.selectedItems.annotations[0].dynamicText=e.undoElement.dynamicText),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(e.annotation,e.action,e.undoElement),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e.annotation,null,!0),this.modifyInCollections(e.annotation,"dynamicText"),this.pdfViewer.selectedItems.annotations[0]?this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0],{}):this.pdfViewer.nodePropertyChange(e.annotation,{}),this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!1,this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);break;case"fontColor":this.pdfViewer.nodePropertyChange(e.annotation,{fontColor:e.undoElement.fontColor}),this.modifyInCollections(e.annotation,"fontColor"),this.pdfViewer.renderDrawing();break;case"fontSize":this.pdfViewer.nodePropertyChange(e.annotation,{fontSize:e.undoElement.fontSize}),this.modifyInCollections(e.annotation,"fontSize"),this.pdfViewer.renderDrawing();break;case"fontFamily":this.pdfViewer.nodePropertyChange(e.annotation,{fontFamily:e.undoElement.fontFamily}),this.modifyInCollections(e.annotation,"fontFamily"),this.pdfViewer.renderDrawing();break;case"textAlign":this.pdfViewer.nodePropertyChange(e.annotation,{textAlign:e.undoElement.textAlign}),this.modifyInCollections(e.annotation,"textAlign"),this.pdfViewer.renderDrawing();break;case"textPropertiesChange":this.pdfViewer.nodePropertyChange(e.annotation,{font:e.undoElement.font}),this.modifyInCollections(e.annotation,"textPropertiesChange"),this.pdfViewer.renderDrawing();break;case"Rotate":this.pdfViewer.nodePropertyChange(e.annotation.annotations[0],{bounds:e.undoElement.bounds,rotateAngle:e.undoElement.rotateAngle}),this.modifyInCollections(e.annotation.annotations[0],"bounds"),this.pdfViewer.renderDrawing();break;case"FormDesigner Properties Change":e.undoElement&&e.undoElement.isMultiline!==e.redoElement.isMultiline&&this.undoRedoMultiline(e.undoElement),this.updateFormFieldPropertiesChanges(e.undoElement.formFieldAnnotationType,e.undoElement);break;case"FormField Value Change":if(e.annotation.formFieldAnnotationType)"RadioButton"==e.annotation.formFieldAnnotationType?(this.updateFormFieldValueChange(e.annotation.formFieldAnnotationType,e.undoElement,!1),this.updateFormFieldValueChange(e.annotation.formFieldAnnotationType,e.redoElement,!0)):this.updateFormFieldValueChange(e.annotation.formFieldAnnotationType,e.annotation,e.undoElement);else{document.getElementById(e.annotation.id+"_html_element").children[0].children[0].className="e-pdfviewer-signatureformfields";l=this.pdfViewer.nameTable[e.annotation.id.split("_")[0]];var v=this.pdfViewer.nameTable[e.annotation.id];l.wrapper.children.splice(l.wrapper.children.indexOf(v.wrapper.children[0]),1),"SignatureText"===e.annotation.shapeAnnotationType&&l.wrapper.children.splice(l.wrapper.children.indexOf(v.wrapper.children[1]),1);d=e.annotation.id.split("_")[0]+"_content",h=null;if(this.pdfViewer.formDesignerModule&&(h=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner")),h){for(p=JSON.parse(h),c=0;c<p.length;c++)p[c].Key===d&&(p[c].FormField.value="",p[c].FormField.signatureType="",this.pdfViewerBase.formFieldCollection[c].FormField.value="",this.pdfViewerBase.formFieldCollection[c].FormField.signatureType="");this.pdfViewer.remove(e.annotation),this.pdfViewer.renderDrawing(),this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")}}}this.redoCollection.push(e),this.updateToolbar(),this.isUndoRedoAction=!1,this.isUndoAction=!1}},e.prototype.redo=function(){var e=this.redoCollection.pop();if(e){var t=e.annotation.shapeAnnotationType;switch(this.isUndoRedoAction=!0,e.action){case"Text Markup Property modified":this.textMarkupAnnotationModule&&(e.annotation=this.textMarkupAnnotationModule.undoRedoPropertyChange(e.annotation,e.pageIndex,e.index,e.modifiedProperty));break;case"Text Markup Added":case"Text Markup Deleted":this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.redoTextMarkupAction(e.annotation,e.pageIndex,e.index,e.action);break;case"Drag":case"Resize":_s(e.annotation)?this.pdfViewer.nodePropertyChange(e.annotation,{bounds:e.redoElement.bounds,vertexPoints:e.redoElement.vertexPoints,leaderHeight:e.redoElement.leaderHeight}):this.pdfViewer.nodePropertyChange(e.annotation,{bounds:e.redoElement.bounds}),"Distance"!==e.annotation.measureType&&"Perimeter"!==e.annotation.measureType&&"Area"!==e.annotation.measureType&&"Radius"!==e.annotation.measureType&&"Volume"!==e.annotation.measureType||(this.pdfViewer.nodePropertyChange(e.annotation,{notes:e.redoElement.notes}),this.updateCalibrateValues(e.annotation)),e.annotation.formFieldAnnotationType&&this.pdfViewer.formDesigner.updateHTMLElement(e.annotation),this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.pdfViewer.select([e.annotation.id]),"Line"!==e.annotation.shapeAnnotationType&&"Rectangle"!==e.annotation.shapeAnnotationType&&"Ellipse"!==e.annotation.shapeAnnotationType&&"Polygon"!==e.annotation.shapeAnnotationType&&"LineWidthArrowHead"!==e.annotation.shapeAnnotationType&&"Radius"!==e.annotation.shapeAnnotationType&&"FreeText"!==e.annotation.shapeAnnotationType&&"HandWrittenSignature"!==e.annotation.shapeAnnotationType&&"SignatureText"!==e.annotation.shapeAnnotationType&&"SignatureImage"!==e.annotation.shapeAnnotationType&&"Ink"!==e.annotation.shapeAnnotationType||this.modifyInCollections(e.annotation,"bounds");break;case"Addition":if(this.pdfViewer.formDesigner&&e.annotation.formFieldAnnotationType)e.redoElement.bounds.x=e.redoElement.wrapper.bounds.x,e.redoElement.bounds.y=e.redoElement.wrapper.bounds.y,this.pdfViewer.formDesigner.drawFormField(e.redoElement);else{"Line"!==t&&"LineWidthArrowHead"!==t&&"Polygon"!==t&&"Ellipse"!==t&&"Rectangle"!==t&&"Radius"!==t&&"Distance"!==t||(""===e.annotation.measureType||m(e.annotation.measureType)?(t="shape",this.shapeAnnotationModule.addInCollection(e.annotation.pageIndex,e.duplicate)):(t="shape_measure",this.measureAnnotationModule.addInCollection(e.annotation.pageIndex,e.duplicate))),"FreeText"===t&&this.freeTextAnnotationModule.addInCollection(e.annotation.pageIndex,e.duplicate),"Stamp"===t&&this.stampAnnotationModule.updateDeleteItems(e.annotation.pageIndex,e.redoElement),"HandWrittenSignature"!==t&&"SignatureText"!==t&&"SignatureImage"!==t||this.pdfViewerBase.signatureModule.addInCollection(e.annotation.pageIndex,e.duplicate),"Ink"===t&&this.inkAnnotationModule.addInCollection(e.annotation.pageIndex,e.duplicate);var i=this.pdfViewer.add(e.annotation);if(this.pdfViewer.select([e.annotation.id]),("FreeText"===t||i.enableShapeLabel)&&i&&this.pdfViewer.nodePropertyChange(i,{}),this.pdfViewer.renderDrawing(null,e.annotation.pageIndex),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(e.annotation.pageIndex,t),ge.isDevice&&!this.pdfViewer.enableDesktopMode){var n=document.getElementById(this.pdfViewer.element.id+"_propertyToolbar");n&&n.children.length>0&&(this.pdfViewer.toolbarModule.annotationToolbarModule.toolbarCreated=!1,this.pdfViewer.toolbarModule.annotationToolbarModule.createAnnotationToolbarForMobile())}}break;case"Delete":if(this.pdfViewer.formDesigner&&e.annotation.formFieldAnnotationType)this.pdfViewer.formDesigner.deleteFormField(e.redoElement.id,!1);else{var o=!1,s=e.annotation.shapeAnnotationType;"Line"!==t&&"LineWidthArrowHead"!==t&&"Polygon"!==t&&"Ellipse"!==t&&"Rectangle"!==t&&"Radius"!==t&&"Distance"!==t||(s=""===e.annotation.measureType||m(e.annotation.measureType)?"shape":"measure",this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,s,"delete"),this.modifyInCollections(e.annotation,"delete"),o=!0),"Stamp"===t&&(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,s,"delete"),this.stampAnnotationModule.updateSessionStorage(e.annotation,null,"delete"),o=!0),"FreeText"!==t&&"HandWrittenSignature"!==t&&"SignatureText"!==t&&"SignatureImage"!==t||(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,s,"delete"),this.modifyInCollections(e.annotation,"delete")),o||this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,s,"delete");var a=void 0;if(e.annotation.id&&(a=this.pdfViewer.nameTable[e.annotation.id.split("_")[0]]),null!=a&&("SignatureField"===a.formFieldAnnotationType||"InitialField"===a.formFieldAnnotationType)){a.wrapper.children.splice(a.wrapper.children.indexOf(e.annotation.wrapper.children[0]),1),"SignatureText"===e.annotation.shapeAnnotationType&&a.wrapper.children.splice(a.wrapper.children.indexOf(e.annotation.wrapper.children[1]),1);var r=e.annotation.id.split("_")[0]+"_content",l=null;if(this.pdfViewer.formDesignerModule&&(l=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner")),l){for(var d=JSON.parse(l),h=0;h<d.length;h++)d[h].Key===r&&(d[h].FormField.value="",d[h].FormField.signatureType="",this.pdfViewerBase.formFieldCollection[h].FormField.value="",this.pdfViewerBase.formFieldCollection[h].FormField.signatureType="");this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")}}this.pdfViewer.clearSelection(e.annotation.pageIndex),this.pdfViewer.remove(e.annotation),this.pdfViewer.renderDrawing(null,e.annotation.pageIndex);var p=e.annotation.annotName?e.annotation.annotName:e.annotation.annotationId,c=document.getElementById(p);if(this.removeCommentPanelDiv(c),e.annotation.annotationId){var u=this.updateCollectionForNonRenderedPages(e.annotation,p,e.annotation.pageIndex);this.undoCommentsElement.push(u)}}break;case"stampOpacity":this.pdfViewer.nodePropertyChange(e.annotation,{opacity:e.redoElement.opacity}),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e.annotation,null,!0);break;case"Shape Stroke":this.pdfViewer.nodePropertyChange(e.annotation,{strokeColor:e.redoElement.strokeColor}),this.modifyInCollections(e.annotation,"stroke"),this.pdfViewer.renderDrawing();break;case"Shape Fill":this.pdfViewer.nodePropertyChange(e.annotation,{fillColor:e.redoElement.fillColor}),this.modifyInCollections(e.annotation,"fill"),this.pdfViewer.renderDrawing();break;case"Shape Opacity":this.pdfViewer.nodePropertyChange(e.annotation,{opacity:e.redoElement.opacity}),"StickyNotes"===e.annotation.shapeAnnotationType?(this.stickyNotesAnnotationModule.updateOpacityValue(e.annotation),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e.annotation,null,!0)):this.modifyInCollections(e.annotation,"opacity"),this.pdfViewer.renderDrawing();break;case"Shape Thickness":this.pdfViewer.nodePropertyChange(e.annotation,{thickness:e.redoElement.thickness}),this.modifyInCollections(e.annotation,"thickness"),this.pdfViewer.renderDrawing();break;case"Line properties change":this.pdfViewer.nodePropertyChange(e.annotation,{fillColor:e.redoElement.fillColor,strokeColor:e.redoElement.strokeColor,opacity:e.redoElement.opacity,thickness:e.redoElement.thickness,sourceDecoraterShapes:this.getArrowType(e.redoElement.lineHeadStart),taregetDecoraterShapes:this.getArrowType(e.redoElement.lineHeadEnd),borderDashArray:e.redoElement.borderDashArray,borderStyle:e.redoElement.borderStyle}),this.updateCollectionForLineProperty(e.annotation),this.pdfViewer.renderDrawing();break;case"Text Property Added":e.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(e.annotation,e.action,e.undoElement),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e.annotation,null,!0);break;case"Comments Property Added":e.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(e.annotation,e.action,e.undoElement);break;case"Status Property Added":case"Comments Reply Deleted":e.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(e.annotation,e.action);break;case"dynamicText Change":this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!0,e.annotation.dynamicText=e.redoElement.dynamicText;var f=this.pdfViewer.selectedItems.annotations[0];f&&(f.dynamicText=e.redoElement.dynamicText,f.bounds.height=e.redoElement.bounds.height),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(e.annotation,e.action,e.undoElement),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e.annotation,null,!0),this.modifyInCollections(e.annotation,"dynamicText"),f?this.pdfViewer.nodePropertyChange(f,{}):this.pdfViewer.nodePropertyChange(e.annotation,{}),this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!1,this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.pdfViewer.select([e.annotation.id]);break;case"fontColor":this.pdfViewer.nodePropertyChange(e.annotation,{fontColor:e.redoElement.fontColor}),this.modifyInCollections(e.annotation,"fontColor"),this.pdfViewer.renderDrawing();break;case"fontSize":this.pdfViewer.nodePropertyChange(e.annotation,{fontSize:e.redoElement.fontSize}),this.modifyInCollections(e.annotation,"fontSize"),this.pdfViewer.renderDrawing();break;case"textAlign":this.pdfViewer.nodePropertyChange(e.annotation,{textAlign:e.redoElement.textAlign}),this.modifyInCollections(e.annotation,"textAlign"),this.pdfViewer.renderDrawing();break;case"textPropertiesChange":this.pdfViewer.nodePropertyChange(e.annotation,{font:e.redoElement.font}),this.modifyInCollections(e.annotation,"textPropertiesChange"),this.pdfViewer.renderDrawing();break;case"Rotate":this.pdfViewer.nodePropertyChange(e.annotation.annotations[0],{bounds:e.redoElement.bounds,rotateAngle:e.redoElement.rotateAngle}),this.modifyInCollections(e.annotation.annotations[0],"bounds"),this.pdfViewer.renderDrawing();break;case"FormDesigner Properties Change":e.redoElement&&e.undoElement.isMultiline!==e.redoElement.isMultiline&&this.undoRedoMultiline(e.redoElement),this.updateFormFieldPropertiesChanges(e.redoElement.formFieldAnnotationType,e.redoElement);break;case"FormField Value Change":if(e.annotation.formFieldAnnotationType)"RadioButton"==e.annotation.formFieldAnnotationType?(this.updateFormFieldValueChange(e.annotation.formFieldAnnotationType,e.undoElement,!0),this.updateFormFieldValueChange(e.annotation.formFieldAnnotationType,e.redoElement,!1)):this.updateFormFieldValueChange(e.annotation.formFieldAnnotationType,e.annotation,e.redoElement);else{document.getElementById(e.annotation.id+"_html_element").children[0].children[0].className="e-pdfviewer-signatureformfields-signature";a=this.pdfViewer.nameTable[e.annotation.id.split("_")[0]];var g=this.pdfViewer.nameTable[e.annotation.id];a.wrapper.children.push(g.wrapper.children[0]),"SignatureText"===e.annotation.shapeAnnotationType&&a.wrapper.children.push(g.wrapper.children[1]);r=e.annotation.id.split("_")[0]+"_content",l=null;if(this.pdfViewer.formDesignerModule&&(l=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner")),l){for(d=JSON.parse(l),h=0;h<d.length;h++)if(d[h].Key===r)if("SignatureText"===e.annotation.shapeAnnotationType)d[h].FormField.signatureType="Text",d[h].FormField.value=e.annotation.data,this.pdfViewerBase.formFieldCollection[h].FormField.value=e.annotation.data,this.pdfViewerBase.formFieldCollection[h].FormField.signatureType="Text";else if("SignatureImage"===e.annotation.shapeAnnotationType)d[h].FormField.signatureType="Image",d[h].FormField.value=e.annotation.data,this.pdfViewerBase.formFieldCollection[h].FormField.value=e.annotation.data,this.pdfViewerBase.formFieldCollection[h].FormField.signatureType="Image";else{d[h].FormField.signatureType="Path",this.pdfViewerBase.formFieldCollection[h].FormField.signatureType="Path";var y=os(es(e.annotation.data));d[h].FormField.value=JSON.stringify(y),this.pdfViewerBase.formFieldCollection[h].FormField.value=JSON.stringify(y)}this.pdfViewer.add(e.annotation);var v=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+e.pageIndex);this.pdfViewer.renderDrawing(v,e.pageIndex),this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")}}}e.redoElement&&void 0!==e.redoElement.modifiedDate&&(e.annotation.modifiedDate=e.redoElement.modifiedDate),this.actionCollection.push(e),this.updateToolbar(),this.isUndoRedoAction=!1}},e.prototype.undoRedoMultiline=function(e){e.isMultiline&&"Textbox"===e.formFieldAnnotationType?this.pdfViewer.formDesignerModule.renderMultilineText(e,!0):"Textbox"===e.formFieldAnnotationType&&this.pdfViewer.formDesignerModule.renderTextbox(e,!0)},e.prototype.updateFormFieldValueChange=function(e,t,i){if(t){var n=this.pdfViewer.formDesigner.getFormField(t.id.split("_")[0]),o=null;if(this.pdfViewer.formDesignerModule&&(o=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner")),o){var s=JSON.parse(o),a=this.pdfViewer.formDesigner.getFormFiledIndex(t.id.split("_")[0]);switch(e){case"Textbox":case"PasswordField":case"RadioButton":case"DropdownList":case"ListBox":var r=document.getElementById(t.id.split("_")[0]+"_content_html_element").firstElementChild.firstElementChild;if("Textbox"==e||"PasswordField"==e)n.value=i,this.pdfViewer.formDesigner.updateValuePropertyChange(n,r,!0,a,s);else if("RadioButton"==e)n.isSelected=i,this.pdfViewer.formDesigner.updateIsSelectedPropertyChange(n,r.firstElementChild,!0,a,s);else if("DropdownList"==e||"ListBox"==e)if(n.selectedIndex=i,s[a].FormField.selectedIndex=i,this.pdfViewerBase.formFieldCollection[a].FormField.selectedIndex=i,this.pdfViewer.nameTable[s[a].Key.split("_")[0]].selectedIndex=i,"ListBox"==e)for(var l=0;l<r.options.length;l++)r.options[l].selected=!!i.includes(l);else r.selectedIndex=i;break;case"Checkbox":var d=document.getElementById(t.id.split("_")[0]+"_content_html_element").firstElementChild.firstElementChild.lastElementChild;n.isChecked=i,this.pdfViewer.formDesigner.updateIsCheckedPropertyChange(n,d,!0,a,s)}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")}}},e.prototype.updateFormFieldPropertiesChanges=function(e,t){switch(e){case"Textbox":case"PasswordField":this.pdfViewer.formDesigner.updateTextboxFormDesignerProperties(t,!0);break;case"Checkbox":this.pdfViewer.formDesigner.updateCheckboxFormDesignerProperties(t,!0);break;case"RadioButton":this.pdfViewer.formDesigner.updateRadioButtonDesignerProperties(t,!0);break;case"DropdownList":this.pdfViewer.formDesigner.updateDropdownFormDesignerProperties(t,!0);break;case"ListBox":this.pdfViewer.formDesigner.updateListBoxFormDesignerProperties(t,!0);break;case"SignatureField":case"InitialField":this.pdfViewer.formDesigner.updateSignatureTextboxProperties(t,!0)}},e.prototype.updateCollectionForLineProperty=function(e){this.modifyInCollections(e,"fill"),this.modifyInCollections(e,"stroke"),this.modifyInCollections(e,"opacity"),this.modifyInCollections(e,"thickness"),this.modifyInCollections(e,"dashArray"),this.modifyInCollections(e,"startArrow"),this.modifyInCollections(e,"endArrow")},e.prototype.updateToolbar=function(e){this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.updateUndoRedoButtons(),this.actionCollection&&0==this.actionCollection.length?this.pdfViewerBase.updateDocumentEditedProperty(!1):this.pdfViewerBase.updateDocumentEditedProperty(!0),e&&this.pdfViewerBase.updateDocumentEditedProperty(!0)},e.prototype.createNote=function(){this.popupNote=we("div",{id:this.pdfViewer.element.id+"_annotation_note",className:"e-pv-annotation-note",styles:"display:none"}),this.popupNoteAuthor=we("div",{id:this.pdfViewer.element.id+"_annotation_note_author",className:"e-pv-annotation-note-author"}),this.popupNote.appendChild(this.popupNoteAuthor),this.popupNoteContent=we("div",{id:this.pdfViewer.element.id+"_annotation_note_content",className:"e-pv-annotation-note-content"}),this.popupNote.appendChild(this.popupNoteContent),this.pdfViewerBase.mainContainer.appendChild(this.popupNote)},e.prototype.showPopupNote=function(e,t,i,n,o){var s=this.pdfViewerBase.mainContainer.getBoundingClientRect(),a=this.popupNote.getBoundingClientRect();i&&(this.popupNoteAuthor.textContent=i),this.popupNoteContent.textContent=n,"Highlight"===o?this.popupNote.style.backgroundColor="rgb(237, 232, 177)":"Underline"===o?this.popupNote.style.backgroundColor="rgb(187, 241, 191)":"Strikethrough"===o&&(this.popupNote.style.backgroundColor="rgb(242, 188, 207)"),this.popupNote.style.display="block";var r=e.pageY-s.top+5,l=e.pageX-s.left+5;l+a.width>s.width&&(l-=a.width),r+a.height>s.height&&(r-=a.height),this.popupNote.style.top=r+"px",this.popupNote.style.left=l+"px"},e.prototype.hidePopupNote=function(){this.popupNote&&(this.popupNote.style.display="none")},e.prototype.createTextMarkupPopup=function(){var e=this,t=this.pdfViewer.element.id;this.popupElement=we("div",{id:t+"_popup_annotation_note",className:"e-pv-annotation-popup-menu",styles:"display:none"});var i=we("div",{id:t+"_popup_header",className:"e-pv-annotation-popup-header"});this.authorPopupElement=we("div",{id:t+"_popup_author",className:"e-pv-annotation-popup-author"}),i.appendChild(this.authorPopupElement);var n=we("span",{id:t+"_popup_close",className:"e-pv-annotation-popup-close e-pv-icon"});i.appendChild(n),this.popupElement.appendChild(i),this.modifiedDateElement=we("div",{id:t+"_popup_modified_time",className:"e-pv-annotation-modified-time"}),this.popupElement.appendChild(this.modifiedDateElement);var o=we("div",{id:t+"_popup_content_container",className:"e-pv-annotation-popup-note-container"});this.noteContentElement=we("div",{id:t+"_popup_content",className:"e-pv-annotation-popup-content"}),this.noteContentElement.contentEditable="true",o.appendChild(this.noteContentElement),this.popupElement.appendChild(o),this.pdfViewerBase.viewerContainer.appendChild(this.popupElement),n.addEventListener("click",this.saveClosePopupMenu.bind(this)),n.addEventListener("touchend",this.saveClosePopupMenu.bind(this)),this.popupElement.addEventListener("mousedown",this.onPopupElementMoveStart.bind(this)),this.popupElement.addEventListener("mousemove",this.onPopupElementMove.bind(this)),window.addEventListener("mouseup",this.onPopupElementMoveEnd.bind(this)),this.popupElement.addEventListener("touchstart",this.onPopupElementMoveStart.bind(this)),this.popupElement.addEventListener("touchmove",this.onPopupElementMove.bind(this)),window.addEventListener("touchend",this.onPopupElementMoveEnd.bind(this)),this.noteContentElement.addEventListener("mousedown",(function(){e.noteContentElement.focus()}))},e.prototype.onPopupElementMoveStart=function(e){if("touchstart"===e.type&&(e=e.changedTouches[0]),e.target.id!==this.noteContentElement.id||!e.target.contains(this.noteContentElement.childNodes[0])){this.isPopupMenuMoved=!0;var t=this.popupElement.getBoundingClientRect();this.clientX=e.clientX-t.left,this.clientY=e.clientY-t.top+this.pdfViewerBase.pageSize[this.currentAnnotPageNumber].top*this.pdfViewerBase.getZoomFactor()}},e.prototype.onPopupElementMove=function(e){if("touchmove"===e.type&&(e=e.changedTouches[0]),this.isPopupMenuMoved&&(e.target.id!==this.noteContentElement.id||!e.target.contains(this.noteContentElement.childNodes[0]))){var t=e.clientX-this.clientX+parseFloat(this.popupElement.style.left),i=e.clientY-this.clientY+parseFloat(this.popupElement.style.top);this.clientX=e.clientX,this.clientY=e.clientY;var n=this.popupElement.getBoundingClientRect(),o=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+this.currentAnnotPageNumber);t>parseFloat(o.style.left)&&t+n.width<parseFloat(o.style.left)+parseFloat(o.style.width)?this.popupElement.style.left=t+"px":this.popupElement.style.left=parseFloat(this.popupElement.style.left)+"px",i>parseFloat(o.style.top)&&i+n.height<parseFloat(o.style.top)+parseFloat(o.style.height)?this.popupElement.style.top=i+"px":this.popupElement.style.top=parseFloat(this.popupElement.style.top)+"px"}},e.prototype.onPopupElementMoveEnd=function(){this.isPopupMenuMoved=!1},e.prototype.saveClosePopupMenu=function(){this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.saveNoteContent(this.currentAnnotPageNumber,this.noteContentElement.innerText),this.closePopupMenu()},e.prototype.closePopupMenu=function(){this.popupElement&&(this.popupElement.parentElement.removeChild(this.popupElement),this.popupElement=null,this.isPopupNoteVisible=!1)},e.prototype.showAnnotationPopup=function(e){if(this.textMarkupAnnotationModule&&(this.currentAnnotPageNumber=this.getEventPageNumber(e),this.textMarkupAnnotationModule&&(e.target!==this.noteContentElement||e.target.contains(this.noteContentElement.childNodes[0]))&&(this.hidePopupNote(),!this.popupElement))){this.createTextMarkupPopup(),this.popupElement.style.display="block",this.authorPopupElement.textContent=this.textMarkupAnnotationModule.currentTextMarkupAnnotation.author,this.modifiedDateElement.textContent=this.getProperDate(this.textMarkupAnnotationModule.currentTextMarkupAnnotation.modifiedDate),this.noteContentElement.textContent=this.textMarkupAnnotationModule.currentTextMarkupAnnotation.note;var t=this.popupElement.getBoundingClientRect(),i=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+this.currentAnnotPageNumber),n=i.getBoundingClientRect(),o=e.clientY-n.top+parseFloat(i.style.top),s=e.clientX;s+t.width>parseFloat(i.style.left)+parseFloat(i.style.width)?this.popupElement.style.left=s-t.width+"px":this.popupElement.style.left=s+"px",o+t.height>parseFloat(i.style.top)+parseFloat(i.style.height)?this.popupElement.style.top=o-t.height+"px":this.popupElement.style.top=o+"px",this.isPopupNoteVisible=!0}},e.prototype.modifyOpacity=function(e,t){var i=this.pdfViewer.selectedItems.annotations[0],n=qs(i),o=qs(i),s=1;s=t?e/100:e.value/100,i.opacity!==s&&(o.opacity=s,this.pdfViewer.nodePropertyChange(i,{opacity:s}),"StickyNotes"===i.shapeAnnotationType?this.stickyNotesAnnotationModule.updateOpacityValue(i):this.modifyInCollections(i,"opacity"),"HandWrittenSignature"===i.shapeAnnotationType||"SignatureImage"===i.shapeAnnotationType||"SignatureText"===i.shapeAnnotationType?this.pdfViewer.fireSignaturePropertiesChange(i.pageIndex,i.signatureName,i.shapeAnnotationType,!1,!0,!1,n.opacity,o.opacity):this.triggerAnnotationPropChange(i,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(i.pageIndex,null,i,"Shape Opacity","",n,o),this.pdfViewer.renderDrawing())},e.prototype.modifyFontColor=function(e){var t=this.pdfViewer.selectedItems.annotations[0],i=qs(t),n=qs(t);n.fontColor=e,this.pdfViewer.nodePropertyChange(t,{fontColor:e}),this.modifyInCollections(t,"fontColor"),this.triggerAnnotationPropChange(t,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"fontColor","",i,n),this.pdfViewer.renderDrawing()},e.prototype.modifyFontFamily=function(e){var t=this.pdfViewer.selectedItems.annotations[0],i=qs(t),n=qs(t);n.fontFamily=e,this.pdfViewer.freeTextSettings.enableAutoFit?this.updateFontFamilyRenderSize(t,e):this.pdfViewer.nodePropertyChange(t,{fontFamily:e}),this.modifyInCollections(t,"fontFamily"),this.triggerAnnotationPropChange(t,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"fontFamily","",i,n),this.pdfViewer.renderDrawing()},e.prototype.modifyFontSize=function(e,t){var i=this.pdfViewer.selectedItems.annotations[0],n=qs(i),o=qs(i);o.fontSize=e;var s=this.freeTextAnnotationModule,a=i.bounds.x,r=i.bounds.y;if(i.fontSize=e,s&&!s.isNewFreeTextAnnot&&""!==i.dynamicText){if(s.addInuptElemet({x:a,y:r},i),i){i.previousFontSize>e&&(s.inputBoxElement.style.height="auto",t||s.inputBoxElement.scrollHeight+5>i.bounds.height?s.inputBoxElement.style.height=s.inputBoxElement.scrollHeight+5+"px":s.inputBoxElement.style.height=i.bounds.height+"px");var l=parseFloat(s.inputBoxElement.style.height),d=parseFloat(s.inputBoxElement.style.width),h=this.pdfViewerBase.getZoomFactor();d/=h;var p=(l/=h)-i.bounds.height,c=void 0;p>0?c=(c=i.wrapper.offsetY+p/2)>0?c:void 0:(p=Math.abs(p),c=(c=i.wrapper.offsetY-p/2)>0?c:void 0);var u=d-i.bounds.width,f=void 0;u>0?f=(f=i.wrapper.offsetX+u/2)>0?f:void 0:(u=Math.abs(u),f=i.wrapper.offsetX-u/2),i.bounds.width=d,i.bounds.height=l,this.pdfViewer.nodePropertyChange(i,{fontSize:e,bounds:{width:i.bounds.width,height:i.bounds.height,y:c,x:f}}),this.pdfViewer.renderSelector(i.pageIndex,this.pdfViewer.annotationSelectorSettings),i.previousFontSize=e}this.modifyInCollections(i,"fontSize"),this.modifyInCollections(i,"bounds"),this.triggerAnnotationPropChange(i,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(i.pageIndex,null,i,"fontSize","",n,o),this.pdfViewer.renderDrawing()}},e.prototype.modifyTextAlignment=function(e){var t=this.pdfViewer.selectedItems.annotations[0],i=qs(t),n=qs(t);n.textAlign=e,this.pdfViewer.nodePropertyChange(t,{textAlign:e}),this.modifyInCollections(t,"textAlign"),this.triggerAnnotationPropChange(t,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"textAlign","",i,n),this.pdfViewer.renderDrawing()},e.prototype.modifyTextProperties=function(e,t){var i=this.pdfViewer.selectedItems.annotations[0],n=qs(i),o=qs(i);"bold"===t?o.font.isBold=e.isBold:"italic"===t?o.font.isItalic=e.isItalic:"underline"===t?(o.font.isUnderline=e.isUnderline,o.font.isUnderline&&o.font.isStrikeout&&(o.font.isStrikeout=!1)):"strikeout"===t&&(o.font.isStrikeout=e.isStrikeout,o.font.isUnderline&&o.font.isStrikeout&&(o.font.isUnderline=!1)),this.pdfViewer.nodePropertyChange(i,{font:e}),this.modifyInCollections(i,"textPropertiesChange"),this.triggerAnnotationPropChange(i,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(i.pageIndex,null,i,"textPropertiesChange","",n,o),this.pdfViewer.renderDrawing()},e.prototype.modifyThickness=function(e){var t=this.pdfViewer.selectedItems.annotations[0];if(t.thickness!==e){var i=qs(t),n=qs(t);n.thickness=e,this.pdfViewer.nodePropertyChange(t,{thickness:e}),this.modifyInCollections(t,"thickness"),"HandWrittenSignature"===t.shapeAnnotationType||"SignatureText"===t.shapeAnnotationType||"SignatureImage"===t.shapeAnnotationType?this.pdfViewer.fireSignaturePropertiesChange(t.pageIndex,t.signatureName,t.shapeAnnotationType,!1,!1,!0,i.thickness,n.thickness):this.triggerAnnotationPropChange(t,!1,!1,!0,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Thickness","",i,n),this.pdfViewer.renderDrawing()}},e.prototype.modifyStrokeColor=function(e){var t=this.pdfViewer.selectedItems.annotations[0],i=qs(t),n=qs(t);n.strokeColor=e,this.pdfViewer.nodePropertyChange(t,{strokeColor:e}),this.modifyInCollections(t,"stroke"),"HandWrittenSignature"===t.shapeAnnotationType||"SignatureText"===t.shapeAnnotationType||"SignatureImage"===t.shapeAnnotationType?this.pdfViewer.fireSignaturePropertiesChange(t.pageIndex,t.signatureName,t.shapeAnnotationType,!0,!1,!1,i.strokeColor,n.strokeColor):this.triggerAnnotationPropChange(t,!1,!0,!1,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Stroke","",i,n),this.pdfViewer.renderDrawing()},e.prototype.modifyFillColor=function(e){var t=this.pdfViewer.selectedItems.annotations[0],i=qs(t),n=qs(t);n.fillColor=e,this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0],{fillColor:e}),this.modifyInCollections(t,"fill"),this.triggerAnnotationPropChange(t,!0,!1,!1,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Fill","",i,n),this.pdfViewer.renderDrawing()},e.prototype.modifyDynamicTextValue=function(e,t){var i=null;if(i=this.pdfViewer.selectedItems.annotations.filter((function(e){return e.annotName===t}))[0]){var n=qs(i),o=qs(i);i.dynamicText=e,o.dynamicText=e,""===n.dynamicText&&(n.dynamicText=this.freeTextAnnotationModule.previousText),this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0],{dynamicText:e}),this.pdfViewer.annotation.addAction(i.pageIndex,null,i,"dynamicText Change","",n,o),this.modifyInCollections(i,"dynamicText"),this.pdfViewer.renderDrawing()}},e.prototype.modifyInCollections=function(e,t){var i;return""===e.measureType||m(e.measureType)?i="FreeText"===e.shapeAnnotationType?this.freeTextAnnotationModule.modifyInCollection(t,e.pageIndex,e):"HandWrittenSignature"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType||"SignatureImage"===e.shapeAnnotationType?this.pdfViewerBase.signatureModule.modifySignatureCollection(t,e.pageIndex,e):"Stamp"===e.shapeAnnotationType?this.stampAnnotationModule.modifyInCollection(t,e.pageIndex,e):"Ink"===e.shapeAnnotationType?this.inkAnnotationModule.modifySignatureInkCollection(t,e.pageIndex,e):this.shapeAnnotationModule.modifyInCollection(t,e.pageIndex,e):"Distance"!==e.measureType&&"Perimeter"!==e.measureType&&"Radius"!==e.measureType&&"Area"!==e.measureType&&"Volume"!==e.measureType||(i=this.measureAnnotationModule.modifyInCollection(t,e.pageIndex,e)),this.isUndoRedoAction?(this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e,null,!0),this.isUndoAction&&(e.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime())):"bounds"!==t&&this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e),i},e.prototype.createPropertiesWindow=function(){var e=this;if(S()){var t=100*this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity,i=this.getArrowString(this.pdfViewer.selectedItems.annotations[0].sourceDecoraterShapes),n=this.getArrowString(this.pdfViewer.selectedItems.annotations[0].taregetDecoraterShapes),o=void 0;parseInt(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray)>=3?o="Dashed":"2"===this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray?o="Dotted":"0"===this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray&&(o="Solid"),this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenPropertiesDialog",t,i,n,o)}else{var s=we("div",{id:this.pdfViewer.element.id+"_properties_window",className:"e-pv-properties-window"}),a=this.createAppearanceTab();if(this.pdfViewerBase.pageContainer.appendChild(s),this.propertiesDialog=new Ko({showCloseIcon:!0,closeOnEscape:!1,isModal:!0,header:this.pdfViewer.localeObj.getConstant("Line Properties"),target:this.pdfViewer.element,content:a,close:function(){e.destroyPropertiesWindow()}}),!ge.isDevice||this.pdfViewer.enableDesktopMode?this.propertiesDialog.buttons=[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.onOkClicked.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.onCancelClicked.bind(this)}]:this.propertiesDialog.buttons=[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.onCancelClicked.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.onOkClicked.bind(this)}],this.pdfViewer.enableRtl&&(this.propertiesDialog.enableRtl=!0),this.propertiesDialog.appendTo(s),this.pdfViewer.selectedItems.annotations[0]&&"Line"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType)document.getElementById(this.pdfViewer.element.id+"_properties_fill_color").disabled=!0;this.startArrowDropDown.content=this.createContent(this.getArrowString(this.pdfViewer.selectedItems.annotations[0].sourceDecoraterShapes)).outerHTML,this.endArrowDropDown.content=this.createContent(this.getArrowString(this.pdfViewer.selectedItems.annotations[0].taregetDecoraterShapes)).outerHTML,this.thicknessBox.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth,this.fillColorPicker.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill,this.refreshColorPicker(this.fillColorPicker),this.strokeColorPicker.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor,this.refreshColorPicker(this.strokeColorPicker),this.updateColorInIcon(this.fillDropDown.element,this.fillColorPicker.value),this.updateColorInIcon(this.strokeDropDown.element,this.strokeColorPicker.value),this.opacitySlider.value=100*this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity,this.updateOpacityIndicator(),parseInt(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray)>=3?this.lineStyleDropDown.content=this.createDropDownContent("dashed").outerHTML:"2"===this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray?this.lineStyleDropDown.content=this.createDropDownContent("dotted").outerHTML:"0"===this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray&&(this.lineStyleDropDown.content=this.createDropDownContent("solid").outerHTML),this.selectedLineStyle=this.pdfViewer.selectedItems.annotations[0].borderStyle,this.selectedLineDashArray=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray,"Distance"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(this.leaderLengthBox.value=this.pdfViewer.selectedItems.annotations[0].leaderHeight)}},e.prototype.updatePropertiesWindowInBlazor=function(){var e=document.querySelector("#"+this.pdfViewer.element.id+"_line_thickness"),t=document.querySelector("#"+this.pdfViewer.element.id+"_properties_fill_color_button"),i=document.querySelector("#"+this.pdfViewer.element.id+"_properties_stroke_color_button"),n=document.querySelector("#"+this.pdfViewer.element.id+"_properties_leader_length");e.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth,t.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill,i.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor,this.onStrokeColorChange(i.value),this.onFillColorChange(t.value),"Distance"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(n.value=parseInt(this.pdfViewer.selectedItems.annotations[0].leaderHeight.toString()))},e.prototype.destroyPropertiesWindow=function(){this.strokeColorPicker&&(this.strokeColorPicker.destroy(),this.strokeColorPicker=null),this.fillColorPicker&&(this.fillColorPicker.destroy(),this.fillColorPicker=null),this.endArrowDropDown&&(this.endArrowDropDown.destroy(),this.endArrowDropDown=null),this.startArrowDropDown&&(this.startArrowDropDown.destroy(),this.startArrowDropDown=null),this.opacitySlider&&(this.opacitySlider.destroy(),this.opacitySlider=null),this.thicknessBox&&(this.thicknessBox.destroy(),this.thicknessBox=null),this.lineStyleDropDown&&(this.lineStyleDropDown.destroy(),this.lineStyleDropDown=null),this.leaderLengthBox&&(this.leaderLengthBox.destroy(),this.leaderLengthBox=null),this.propertiesDialog&&(this.propertiesDialog.destroy(),this.propertiesDialog=null);var e=this.pdfViewerBase.getElement("_properties_window");e&&e.parentElement.removeChild(e)},e.prototype.refreshColorPicker=function(e){e.setProperties({value:e.value},!0),e.refresh()},e.prototype.createAppearanceTab=function(){var e=this,t=this.pdfViewer.element.id,i=[{text:this.pdfViewer.localeObj.getConstant("None")},{text:this.pdfViewer.localeObj.getConstant("Open Arrow")},{text:this.pdfViewer.localeObj.getConstant("Closed Arrow")},{text:this.pdfViewer.localeObj.getConstant("Round Arrow")},{text:this.pdfViewer.localeObj.getConstant("Square Arrow")},{text:this.pdfViewer.localeObj.getConstant("Diamond Arrow")}],n=we("div",{id:t+"_properties_appearance"}),o=we("div",{className:"e-pv-properties-line-style-prop"});n.appendChild(o);var s=this.createInputElement(this.pdfViewer.localeObj.getConstant("Start Arrow"),o,"text","button",!0,"e-pv-properties-line-start",t+"_properties_line_start");this.startArrowDropDown=new Yf({items:i,cssClass:"e-pv-properties-line-start",select:this.onStartArrowHeadStyleSelect.bind(this)},s);var a=this.createInputElement(this.pdfViewer.localeObj.getConstant("End Arrow"),o,"text","button",!0,"e-pv-properties-line-end",t+"_properties_line_end"),r=we("div",{className:"e-pv-properties-border-style"});n.appendChild(r),this.endArrowDropDown=new Yf({items:i,cssClass:"e-pv-properties-line-end",select:this.onEndArrowHeadStyleSelect.bind(this)},a);var l=this.createInputElement(this.pdfViewer.localeObj.getConstant("Line Style"),r,"text","button",!0,"e-pv-properties-line-style",t+"_properties_line_style"),d=this.createStyleList();this.lineStyleDropDown=new Yf({cssClass:"e-pv-properties-line-style",target:d},l);var h=this.createInputElement(this.pdfViewer.localeObj.getConstant("Line Thickness"),r,"text","input",!0,"e-pv-properties-line-thickness",t+"_properties_thickness");this.thicknessBox=new Eh({value:0,format:"## pt",cssClass:"e-pv-properties-line-thickness",min:0,max:12},h);var p=we("div",{className:"e-pv-properties-color-style"});n.appendChild(p);var c=this.createInputElement(this.pdfViewer.localeObj.getConstant("Fill Color"),p,"color","button",!0,"e-pv-properties-line-fill-color",t+"_properties_fill_color");this.fillColorPicker=this.createColorPicker(t+"_properties_fill_color",!0),this.fillColorPicker.change=function(t){var i=""===t.currentValue.hex?"#ffffff00":t.currentValue.hex;e.fillDropDown.toggle(),e.updateColorInIcon(e.fillDropDown.element,i)},this.fillDropDown=this.createDropDownButton(c,"e-pv-properties-fill-color-icon",this.fillColorPicker.element.parentElement),this.fillDropDown.beforeOpen=this.onFillDropDownBeforeOpen.bind(this),this.fillDropDown.open=function(){e.fillColorPicker.refresh()};var u=this.createInputElement(this.pdfViewer.localeObj.getConstant("Line Color"),p,"color","button",!0,"e-pv-properties-line-stroke-color",t+"_properties_stroke_color");this.strokeColorPicker=this.createColorPicker(t+"_properties_stroke_color",!1),this.strokeColorPicker.change=function(t){var i=""===t.currentValue.hex?"#ffffff00":t.currentValue.hex;e.strokeDropDown.toggle(),e.updateColorInIcon(e.strokeDropDown.element,i)},this.strokeDropDown=this.createDropDownButton(u,"e-pv-properties-stroke-color-icon",this.strokeColorPicker.element.parentElement),this.strokeDropDown.beforeOpen=this.onStrokeDropDownBeforeOpen.bind(this),this.strokeDropDown.open=function(){e.strokeColorPicker.refresh()};var f=we("div",{className:"e-pv-properties-opacity-style"});n.appendChild(f);var m=this.createInputElement(this.pdfViewer.localeObj.getConstant("Opacity"),f,"","div",!0,"e-pv-properties-line-opacity",t+"_properties_opacity");if(this.opacitySlider=new rg({type:"MinRange",max:100,min:0,cssClass:"e-pv-properties-line-opacity",change:function(){e.updateOpacityIndicator()}},m),"Distance"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType){var g=this.createInputElement(this.pdfViewer.localeObj.getConstant("Leader Length"),f,"text","input",!0,"e-pv-properties-line-leader-length",t+"_properties_leader_length");this.leaderLengthBox=new Eh({value:0,format:"## pt",cssClass:"e-pv-properties-line-leader-length",min:0,max:100},g)}return n},e.prototype.createContent=function(e){var t=we("div",{className:"e-pv-properties-line-style-content"});return t.textContent=e,t},e.prototype.onStrokeDropDownBeforeOpen=function(){1===this.pdfViewer.selectedItems.annotations.length&&(this.strokeColorPicker.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor),this.strokeColorPicker.refresh()},e.prototype.onFillDropDownBeforeOpen=function(){1===this.pdfViewer.selectedItems.annotations.length&&(this.fillColorPicker.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor),this.fillColorPicker.refresh()},e.prototype.createStyleList=function(){var e=this,t=we("ul");document.body.appendChild(t);var i=this.createListForStyle("solid");i.addEventListener("click",(function(){e.setThickness("0","solid")})),t.appendChild(i);var n=this.createListForStyle("dotted");n.addEventListener("click",(function(){e.setThickness("2","dotted")})),t.appendChild(n);var o=this.createListForStyle("dashed");return o.addEventListener("click",(function(){e.setThickness("3","dashed")})),t.appendChild(o),t},e.prototype.createColorPicker=function(e,t){var i=we("input",{id:e+"_target"});document.body.appendChild(i);var n=new Rg({inline:!0,mode:"Palette",enableOpacity:!1,value:"#000000",showButtons:!1,modeSwitcher:!1,noColor:t});return this.pdfViewer.enableRtl&&(n.enableRtl=!0),n.appendTo(i),n},e.prototype.createDropDownButton=function(e,t,i){var n=new Yf({iconCss:t+" e-pv-icon",target:i});return this.pdfViewer.enableRtl&&(n.enableRtl=!0),n.appendTo(e),n},e.prototype.updateColorInIcon=function(e,t){e.childNodes[0].style.borderBottomColor=t},e.prototype.onFillColorChange=function(e){var t=document.querySelector("#"+this.pdfViewer.element.id+"_properties_fill_color_button");"transparent"!==e&&(t.children[0].style.borderBottomColor=e)},e.prototype.onStrokeColorChange=function(e){var t=document.querySelector("#"+this.pdfViewer.element.id+"_properties_stroke_color_button");"transparent"!==e&&(t.children[0].style.borderBottomColor=e)},e.prototype.setThickness=function(e,t,i){i||(this.lineStyleDropDown.content=this.createDropDownContent(t).outerHTML),this.selectedLineDashArray=e,"0"===e?this.selectedLineStyle="Solid":"2"!==e&&"3"!==e||(this.selectedLineStyle="Dashed")},e.prototype.createDropDownContent=function(e){var t=we("div",{className:"e-pv-line-styles-content-container"}),i=we("span",{className:"e-pv-line-styles-content",styles:"border-bottom-style:"+e});return t.appendChild(i),t},e.prototype.createListForStyle=function(e){var t=we("li",{className:"e-menu-item"}),i=we("div",{className:"e-pv-line-styles-container"}),n=we("span",{className:"e-pv-line-styles-item",styles:"border-bottom-style:"+e});return i.appendChild(n),t.appendChild(i),t},e.prototype.onStartArrowHeadStyleSelect=function(e){this.startArrowDropDown.content=this.createContent(e.item.text).outerHTML},e.prototype.onEndArrowHeadStyleSelect=function(e){this.endArrowDropDown.content=this.createContent(e.item.text).outerHTML},e.prototype.createInputElement=function(e,t,i,n,o,s,a){var r=we("div",{id:a+"_container",className:s+"-container"});if(o){var l=we("div",{id:a+"_label",className:s+"-label"});l.textContent=e,r.appendChild(l)}this.pdfViewer.localeObj.getConstant("Opacity")===e&&(this.opacityIndicator=we("span",{className:"e-pv-properties-opacity-indicator"}),r.appendChild(this.opacityIndicator));var d=we(n,{id:a});return"input"===n&&(d.type=i),r.appendChild(d),t.appendChild(r),d},e.prototype.updateOpacityIndicator=function(){this.opacityIndicator.textContent=this.opacitySlider.value+"%"},e.prototype.onOkClicked=function(e){var t,i,n,o,s,a;if(S()){var r=document.querySelector("#"+this.pdfViewer.element.id+"_properties_line_start"),l=document.querySelector("#"+this.pdfViewer.element.id+"_properties_line_end"),d=document.querySelector("#"+this.pdfViewer.element.id+"_line_thickness"),h=document.querySelector("#"+this.pdfViewer.element.id+"_properties_style"),p=document.querySelector("#"+this.pdfViewer.element.id+"_properties_fill_color_button"),c=document.querySelector("#"+this.pdfViewer.element.id+"_properties_stroke_color_button"),u=document.querySelector("#"+this.pdfViewer.element.id+"_properties_opacity");t=this.getArrowTypeFromDropDown(r.value,!0),i=this.getArrowTypeFromDropDown(l.value,!0),n=parseInt(d.value),o=""===(o=this.getValue(c.children[0].style.borderBottomColor,"hex"))?"#ffffff00":o,s=""===(s=this.getValue(p.children[0].style.borderBottomColor,"hex"))?"#ffffff00":s,a=e?e/100:u.value/100,h.value&&("Solid"===h.value?this.setThickness("0","solid",!0):"Dotted"===h.value?this.setThickness("2","dotted",!0):"Dashed"===h.value&&this.setThickness("3","dashed",!0))}else t=this.getArrowTypeFromDropDown(this.startArrowDropDown.content),i=this.getArrowTypeFromDropDown(this.endArrowDropDown.content),n=this.thicknessBox.value,o=""===(o=this.strokeColorPicker.getValue(this.strokeColorPicker.value,"hex"))?"#ffffff00":o,s=""===(s=this.fillColorPicker.getValue(this.fillColorPicker.value,"hex"))||"#transp"===s||"#ffffff00"===this.fillColorPicker.value?"#ffffff00":s,a=this.opacitySlider.value/100;var f=this.pdfViewer.selectedItems.annotations[0],m=qs(f),g=qs(f),y={},v=!1,w=!1,b=!1,C=!1,x=!1,M=!1,I=!1;if(t!==f.sourceDecoraterShapes&&(y.sourceDecoraterShapes=t,g.lineHeadStart=this.getArrowString(t),x=!0),i!==f.taregetDecoraterShapes&&(y.taregetDecoraterShapes=i,g.lineHeadEnd=this.getArrowString(i),M=!0),n!==f.wrapper.children[0].style.strokeWidth&&(y.thickness=n,g.thickness=n,b=!0),o!==f.wrapper.children[0].style.strokeColor&&(y.strokeColor=o,g.strokeColor=o,w=!0),s!==f.wrapper.children[0].style.fill&&(y.fillColor=s,g.fillColor=s,v=!0),a!==f.wrapper.children[0].style.opacity&&(y.opacity=a,g.opacity=a,C=!0),this.selectedLineDashArray!==f.wrapper.children[0].style.strokeDashArray&&(y.borderDashArray=this.selectedLineDashArray,y.borderStyle=this.selectedLineStyle,g.borderDashArray=y.borderDashArray,g.borderStyle=y.borderStyle,I=!0),S()){var T=document.querySelector("#"+this.pdfViewer.element.id+"_properties_leader_length");"Distance"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&parseInt(T.value)!==this.pdfViewer.selectedItems.annotations[0].leaderHeight&&(y.leaderHeight=parseInt(T.value))}else"Distance"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&this.leaderLengthBox.value!==this.pdfViewer.selectedItems.annotations[0].leaderHeight&&(y.leaderHeight=this.leaderLengthBox.value);this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0],y),this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill=s,this.triggerAnnotationPropChange(this.pdfViewer.selectedItems.annotations[0],v,w,b,C,x,M,I),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"thickness"),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"stroke"),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"fill"),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"opacity"),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"dashArray"),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"startArrow"),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"endArrow"),"Distance"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"leaderLength"),this.pdfViewer.annotation.addAction(f.pageIndex,null,f,"Line properties change","",m,g),this.renderAnnotations(f.pageIndex,null,null,null),S()||this.propertiesDialog.hide()},e.prototype.onCancelClicked=function(){this.propertiesDialog.hide()},e.prototype.getArrowTypeFromDropDown=function(e,t){t||(e=e.split("</div>")[0].split('">')[1]);var i="None";switch(e){case this.pdfViewer.localeObj.getConstant("None"):i="None";break;case this.pdfViewer.localeObj.getConstant("Open Arrow"):i="OpenArrow";break;case this.pdfViewer.localeObj.getConstant("Closed Arrow"):i="Arrow";break;case this.pdfViewer.localeObj.getConstant("Round Arrow"):i="Circle";break;case this.pdfViewer.localeObj.getConstant("Square Arrow"):i="Square";break;case this.pdfViewer.localeObj.getConstant("Diamond Arrow"):i="Diamond";break;case this.pdfViewer.localeObj.getConstant("Butt"):i="Butt"}return i},e.prototype.getArrowString=function(e){var t=this.pdfViewer.localeObj.getConstant("None");switch(e){case"Arrow":t=this.pdfViewer.localeObj.getConstant("Closed");break;case"OpenArrow":t=this.pdfViewer.localeObj.getConstant("Open Arrow");break;case"Circle":t=this.pdfViewer.localeObj.getConstant("Round");break;case"None":case"Square":case"Diamond":t=this.pdfViewer.localeObj.getConstant(e);break;case"Butt":t=this.pdfViewer.localeObj.getConstant("Butt")}return t},e.prototype.onAnnotationMouseUp=function(){if(0!==this.pdfViewer.selectedItems.annotations.length)this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule&&(this.enableBasedOnType(),this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(!0),ge.isDevice||this.pdfViewer.toolbar.annotationToolbarModule.updateAnnnotationPropertyItems()),this.pdfViewerBase.disableTextSelectionMode();else if(!this.pdfViewer.textSelectionModule||this.pdfViewerBase.isPanMode||this.pdfViewer.designerMode||this.pdfViewer.textSelectionModule.enableTextSelectionMode(),this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule&&(!ge.isDevice||this.pdfViewer.enableDesktopMode)){var e=this.pdfViewer.toolbar.annotationToolbarModule.inkAnnotationSelected;!this.pdfViewer.annotation.freeTextAnnotationModule||this.pdfViewer.annotation.freeTextAnnotationModule.isInuptBoxInFocus||e||(this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(!1),this.pdfViewer.toolbar.annotationToolbarModule.enableFreeTextAnnotationPropertiesTools(!1)),this.pdfViewer.toolbar.annotationToolbarModule.updateAnnnotationPropertyItems(),this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(!1)}},e.prototype.onShapesMouseup=function(e,t){if(e=m(this.pdfViewer.selectedItems.annotations[0])?e:this.pdfViewer.selectedItems.annotations[0]){if(this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.currentTextMarkupAnnotation&&(this.textMarkupAnnotationModule.currentTextMarkupAnnotation=null,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=null),(this.pdfViewerBase.tool instanceof Lp||this.pdfViewerBase.tool instanceof Op)&&!this.pdfViewerBase.tool.dragging){var i={opacity:e.opacity,fillColor:e.fillColor,strokeColor:e.strokeColor,thickness:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate};this.getAnnotationIndex(e.pageIndex,e.id),e.bounds.x,e.bounds.y,e.bounds.width,e.bounds.height;this.pdfViewerBase.tool instanceof Op&&(i.lineHeadStartStyle=this.getArrowString(e.sourceDecoraterShapes),i.lineHeadEndStyle=this.getArrowString(e.taregetDecoraterShapes),i.borderDashArray=e.borderDashArray),this.pdfViewerBase.isAnnotationAdded&&"Distance"!==e.measureType||(""===e.measureType||m(e.measureType)?this.shapeAnnotationModule.renderShapeAnnotations(e,this.pdfViewer.annotation.getEventPageNumber(t)):"Distance"!==e.measureType&&"Perimeter"!==e.measureType&&"Radius"!==e.measureType||this.measureAnnotationModule.renderMeasureShapeAnnotations(e,this.pdfViewer.annotation.getEventPageNumber(t))),this.pdfViewerBase.updateDocumentEditedProperty(!0)}else this.pdfViewerBase.tool instanceof Vp||this.pdfViewerBase.tool instanceof Fp?(this.pdfViewerBase.updateDocumentEditedProperty(!0),""===e.measureType||m(e.measureType)?"FreeText"===e.shapeAnnotationType?this.pdfViewer.annotation.freeTextAnnotationModule.modifyInCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e):"HandWrittenSignature"===e.shapeAnnotationType||"SignatureImage"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType?this.pdfViewerBase.signatureModule.modifySignatureCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e):"Ink"===e.shapeAnnotationType?this.inkAnnotationModule.modifySignatureInkCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e):"Stamp"===e.shapeAnnotationType||"Image"===e.shapeAnnotationType?this.stampAnnotationModule.modifyInCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e):this.pdfViewer.annotation.shapeAnnotationModule.modifyInCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e):"Distance"!==e.measureType&&"Perimeter"!==e.measureType&&"Radius"!==e.measureType&&"Area"!==e.measureType&&"Volume"!==e.measureType||this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e),this.pdfViewerBase.tool instanceof Fp&&(e.formFieldAnnotationType||this.triggerAnnotationResize(e)),this.pdfViewerBase.tool instanceof Vp&&"Select"!==this.pdfViewerBase.action&&(e.formFieldAnnotationType||this.triggerAnnotationMove(e))):this.pdfViewerBase.tool instanceof Np&&(this.pdfViewerBase.updateDocumentEditedProperty(!0),""===e.measureType||m(e.measureType)?"Line"!==e.shapeAnnotationType&&"LineWidthArrowHead"!==e.shapeAnnotationType&&"Polygon"!==e.shapeAnnotationType||this.pdfViewer.annotation.shapeAnnotationModule.modifyInCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e):"Distance"!==e.measureType&&"Perimeter"!==e.measureType&&"Area"!==e.measureType&&"Volume"!==e.measureType||("Distance"===e.measureType&&this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("leaderLength",this.pdfViewer.annotation.getEventPageNumber(t),e),this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e)),this.triggerAnnotationResize(e));if(this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.annotationMenuObj&&this.pdfViewer.isSignatureEditable&&("HandWrittenSignature"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType||"SignatureImage"===e.shapeAnnotationType)&&(this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export Annotations")],!0),this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export XFDF")],!0)),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.enableAnnotationToolbar&&(this.pdfViewer.toolbarModule.annotationToolbarModule.clearTextMarkupMode(),""===e.measureType||m(e.measureType)?this.pdfViewer.toolbarModule.annotationToolbarModule.clearMeasureMode():"Distance"!==e.measureType&&"Perimeter"!==e.measureType&&"Area"!==e.measureType&&"Volume"!==e.measureType&&"Radius"!==e.measureType||this.pdfViewer.toolbarModule.annotationToolbarModule.clearShapeMode(),1===this.pdfViewer.selectedItems.annotations.length&&null===this.pdfViewer.selectedItems.annotations[0].formFieldAnnotationType&&this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationPropertiesTools(!0),!S()&&1===this.pdfViewer.selectedItems.annotations.length&&!this.pdfViewer.designerMode)){if(this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(!0),this.pdfViewer.toolbarModule.annotationToolbarModule.setCurrentColorInPicker(),this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=!0,this.pdfViewer.formDesignerModule||""==e.properties.id||null==e.properties.id||"sign"==e.properties.id.slice(0,4))this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);else{var n=document.getElementById(e.properties.id),o=n&&n.disabled;o?this.pdfViewer.annotation&&o&&this.pdfViewer.annotation.clearSelection():this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem)}if(this.pdfViewer.isAnnotationToolbarVisible&&this.pdfViewer.isFormDesignerToolbarVisible)document.getElementById(this.pdfViewer.element.id+"_formdesigner_toolbar").style.display="none",this.pdfViewer.toolbarModule&&(this.pdfViewer.toolbarModule.formDesignerToolbarModule.isToolbarHidden=!1,this.pdfViewer.toolbarModule.formDesignerToolbarModule.showFormDesignerToolbar(this.pdfViewer.toolbarModule.formDesignerItem),this.pdfViewer.toolbarModule.annotationToolbarModule.adjustViewer(!0))}}},e.prototype.updateCalibrateValues=function(e,t){"Distance"===e.measureType?(e.notes=function(e,t,i){for(var n,o=0;o<e.wrapper.children.length;o++){var s=e.wrapper.children[parseInt(o.toString(),10)];s&&!m(s.content)&&(n=i.setConversion(Ws([t[0],t[1]])*i.pixelToPointFactor,e),s.content=n,s.childNodes[0].text=s.content,s.refreshTextElement())}return n}(e,e.vertexPoints,this.measureAnnotationModule),!0===e.enableShapeLabel&&(e.labelContent=e.notes),this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("notes",e.pageIndex,e,t),this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(e.annotName,e.notes),this.renderAnnotations(e.pageIndex,null,null,null,null)):"Radius"===e.measureType?(e.notes=function(e,t){for(var i,n=0;n<e.wrapper.children.length;n++){var o=e.wrapper.children[parseInt(n.toString(),10)];o&&!m(o.content)&&(i=t.setConversion(e.bounds.width/2*t.pixelToPointFactor,e),o.content=i,2===o.childNodes.length?(o.childNodes[0].text=i,o.childNodes.splice(o.childNodes.length-1,1)):o.childNodes[0].text=i,o.refreshTextElement())}return i}(e,this.measureAnnotationModule),!0===e.enableShapeLabel&&(e.labelContent=e.notes),this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("notes",e.pageIndex,e,t),this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(e.annotName,e.notes),this.renderAnnotations(e.pageIndex,null,null,null,null)):"Perimeter"===e.measureType?(e.notes=cp(e,e.vertexPoints,this.measureAnnotationModule),!0===e.enableShapeLabel&&(e.labelContent=e.notes),this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("notes",e.pageIndex,e,t),this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(e.annotName,e.notes),this.renderAnnotations(e.pageIndex,null,null,null,null)):"Area"===e.measureType?(e.notes=this.measureAnnotationModule.calculateArea(e.vertexPoints,e.id,e.pageIndex),!0===e.enableShapeLabel&&(e.labelContent=e.notes,up(e)),this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("notes",e.pageIndex,e,t),this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(e.annotName,e.notes),this.renderAnnotations(e.pageIndex,null,null,null,null)):"Volume"===e.measureType&&(e.notes=this.measureAnnotationModule.calculateVolume(e.vertexPoints,e.id,e.pageIndex),!0===e.enableShapeLabel&&(e.labelContent=e.notes,up(e)),this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("notes",e.pageIndex,e,t),this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(e.annotName,e.notes),this.renderAnnotations(e.pageIndex,null,null,null,null))},e.prototype.onAnnotationMouseDown=function(){if(1===this.pdfViewer.selectedItems.annotations.length&&null===this.pdfViewer.selectedItems.annotations[0].formFieldAnnotationType&&this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule){if(!S()&&ge.isDevice&&!this.pdfViewer.enableDesktopMode)if("none"===document.getElementById(this.pdfViewer.element.id+"_commantPanel").style.display)if(this.pdfViewer.enableToolbar&&this.pdfViewer.enableAnnotationToolbar&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools("");else if(this.pdfViewer.enableToolbar&&this.pdfViewer.enableAnnotationToolbar){this.pdfViewer.toolbarModule.annotationToolbarModule.createAnnotationToolbarForMobile(),this.pdfViewer.toolbarModule.annotationToolbarModule.createPropertyTools(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType);var e=document.getElementById(this.pdfViewer.element.id+"_annotationIcon");e&&!e.parentElement.classList.contains("e-pv-select")&&e.parentElement.classList.add("e-pv-select")}this.enableBasedOnType(),this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(!0)}},e.prototype.enableBasedOnType=function(){var e=!1,t=this.pdfViewer.selectedItems.annotations[0];t&&t.annotationSettings&&(e=t.annotationSettings.isLock)&&this.checkAllowedInteractions("PropertyChange",t)&&(e=!1),!ge.isDevice||this.pdfViewer.enableDesktopMode?e||("Stamp"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"Image"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"StickyNotes"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?this.pdfViewer.toolbar.annotationToolbarModule.enableStampAnnotationPropertiesTools(!0):"Path"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureImage"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(!1):"FreeText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?this.pdfViewer.toolbar.annotationToolbarModule.enableFreeTextAnnotationPropertiesTools(!0):"HandWrittenSignature"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"Ink"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?this.pdfViewer.toolbar.annotationToolbarModule.enableSignaturePropertiesTools(!0):1===this.pdfViewer.selectedItems.annotations.length&&null===this.pdfViewer.selectedItems.annotations[0].formFieldAnnotationType&&this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(!0)):this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation||"annotations"===this.pdfViewer.selectedItems.annotations[0].propName||!ge.isDevice||this.pdfViewer.enableDesktopMode||this.pdfViewer.toolbarModule.annotationToolbarModule.createMobileAnnotationToolbar(!0,!0)},e.prototype.getProperDate=function(e){var t=new Date(e.toString());if(isNaN(t.getFullYear())){var i=e.slice(2,16);i=i.slice(0,4)+"/"+i.slice(4,6)+"/"+i.slice(6,8)+" "+i.slice(8,10)+":"+i.slice(10,12)+":"+i.slice(12,14),t=new Date(i)}return t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},e.prototype.getPageCollection=function(e,t){for(var i=null,n=0;n<e.length;n++)if(e[n].pageIndex===t){i=n;break}return i},e.prototype.getAnnotationWithId=function(e,t){for(var i,n=0;n<e.length;n++)t===e[n].id&&(i=e[n]);return i},e.prototype.getEventPageNumber=function(e){var t,i=e.target;return i.classList.contains("e-pv-hyperlink")?i=i.parentElement:i.parentElement&&i.parentElement.classList.contains("foreign-object")?i=i.parentElement.parentElement.parentElement.parentElement:i.classList.contains("e-pdfviewer-formFields")&&(i=i.parentElement),i&&(t=i.id.split("_text_")[1]||i.id.split("_textLayer_")[1]||i.id.split("_annotationCanvas_")[1]||i.id.split("_pageDiv_")[1]),isNaN(t)&&(e=this.pdfViewerBase.annotationEvent)&&(t=(i=e.target).id.split("_text_")[1]||i.id.split("_textLayer_")[1]||i.id.split("_annotationCanvas_")[1]||i.id.split("_pageDiv_")[1]),parseInt(t)},e.prototype.getAnnotationComments=function(e,t,i){var n=[],o=null;if(e&&e.length>0)for(var s=0;s<e.length;s++){var a=e[s];o={shapeAnnotationType:"sticky",author:a.Author,modifiedDate:a.ModifiedDate,note:a.Note,state:a.state,stateModel:a.stateModel,comments:[],review:{state:a.State,stateModel:a.StateModel,modifiedDate:a.ModifiedDate,author:a.Author},annotName:a.AnnotName,parentId:t.AnnotName,subject:"Comments",isLock:a.IsLock},n[n.length]=o}return n},e.prototype.getRandomNumber=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return t.toString(16)}))},e.prototype.createGUID=function(){return this.getRandomNumber()},e.prototype.createAnnotationLayer=function(e,t,i,n,o){var s=this.pdfViewerBase.getElement("_annotationCanvas_"+n);if(s)return this.updateCanvas(s,t,i,n),s;var a=we("canvas",{id:this.pdfViewer.element.id+"_annotationCanvas_"+n,className:"e-pv-annotation-canvas"});return this.updateCanvas(a,t,i,n),e.appendChild(a),a},e.prototype.resizeAnnotations=function(e,t,i){var n=this.pdfViewerBase.getElement("_annotationCanvas_"+i);n&&(n.style.width=e+"px",n.style.height=t+"px",this.pdfViewerBase.applyElementStyles(n,i))},e.prototype.clearAnnotationCanvas=function(e){var t=this.pdfViewerBase.getElement("_annotationCanvas_"+e),i=this.pdfViewerBase.getZoomFactor(),n=this.pdfViewerBase.getZoomRatio(i);if(t){var o=this.pdfViewerBase.pageSize[e].width,s=this.pdfViewerBase.pageSize[e].height;t.width=o*n,t.height=s*n,t.style.width=o*i+"px",t.style.height=s*i+"px"}},e.prototype.renderAnnotations=function(e,t,i,n,o,s){this.clearAnnotationCanvas(e),this.shapeAnnotationModule&&(s?this.shapeAnnotationModule.renderShapeAnnotations(t,e,!0):this.shapeAnnotationModule.renderShapeAnnotations(t,e)),this.measureAnnotationModule&&(s?this.measureAnnotationModule.renderMeasureShapeAnnotations(i,e,!0):this.measureAnnotationModule.renderMeasureShapeAnnotations(i,e)),null!==o&&void 0!==o||(o=this.pdfViewerBase.getElement("_annotationCanvas_"+e)),this.pdfViewer.drawing.refreshCanvasDiagramLayer(o,e),this.textMarkupAnnotationModule&&(s?this.textMarkupAnnotationModule.renderTextMarkupAnnotationsInPage(n,e,!0):this.textMarkupAnnotationModule.renderTextMarkupAnnotationsInPage(n,e))},e.prototype.storeAnnotations=function(e,t,i){Math.round(JSON.stringify(window.sessionStorage).length/1024)>4500&&(this.clearAnnotationStorage(),this.pdfViewerBase.isStorageExceed=!0,this.pdfViewerBase.isFormStorageExceed||this.pdfViewer.formFieldsModule.clearFormFieldStorage());var n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+i);this.pdfViewerBase.isStorageExceed&&(n=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+i]);var o=0;if(n){this.storeAnnotationCollections(t,e);var s=JSON.parse(n);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+i);var a=this.pdfViewer.annotationModule.getPageCollection(s,e);if(s[a])s[a].annotations.filter((function(e,i){e.annotName===t.annotName&&s[a].annotations.splice(i,1)})),s[a].annotations.push(t),o=s[a].annotations.indexOf(t);else{var r={pageIndex:e,annotations:[]};r.annotations.push(t),o=r.annotations.indexOf(t),s.push(r)}h=JSON.stringify(s);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+i]=h:window.sessionStorage.setItem(this.pdfViewerBase.documentId+i,h)}else{this.storeAnnotationCollections(t,e);var l={pageIndex:e,annotations:[]};l.annotations.push(t),o=l.annotations.indexOf(t);var d=[];d.push(l);var h=JSON.stringify(d);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+i]=h:window.sessionStorage.setItem(this.pdfViewerBase.documentId+i,h)}return o},e.prototype.getArrowType=function(e){var t="None";switch(e){case"ClosedArrow":case"Closed":t="Arrow";break;case"OpenArrow":case"Open":t="OpenArrow";break;case"Square":t="Square";break;case"Circle":case"Round":t="Circle";break;case"Diamond":t="Diamond";break;case"Butt":t="Butt"}return t},e.prototype.getArrowTypeForCollection=function(e){var t;switch(e){case"Arrow":t="ClosedArrow";break;case"OpenArrow":case"Square":case"Circle":case"Diamond":case"None":t=e.toString();break;case"Butt":t="Butt"}return t},e.prototype.getBounds=function(e,t){var i=this.pdfViewerBase.pageSize[t];return i?1===i.rotation?{left:e.top,top:i.width-(e.left+e.width),width:e.height,height:e.width}:2===i.rotation?{left:i.width-e.left-e.width,top:i.height-e.top-e.height,width:e.width,height:e.height}:3===i.rotation?{left:i.height-e.top-e.height,top:e.left,width:e.height,height:e.width}:e:e},e.prototype.getInkBounds=function(e,t){var i=this.pdfViewerBase.pageSize[t];return i?1===i.rotation?{x:e.y,y:i.width-(e.x+e.width),width:e.height,height:e.width}:2===i.rotation?{x:i.width-e.x-e.width,y:i.height-e.y-e.height,width:e.width,height:e.height}:3===i.rotation?{x:i.height-e.y-e.height,y:e.x,width:e.height,height:e.width}:e:e},e.prototype.getVertexPoints=function(e,t){if(e){var i=this.pdfViewerBase.pageSize[t];if(1===i.rotation){for(var n=[],o=0;o<e.length;o++){var s={x:e[o].y,y:i.width-e[o].x};n.push(s)}return n}if(2===i.rotation){var a=[];for(o=0;o<e.length;o++){s={x:i.width-e[o].x,y:i.height-e[o].y};a.push(s)}return a}if(3===i.rotation){var r=[];for(o=0;o<e.length;o++){s={x:i.height-e[o].y,y:e[o].x};r.push(s)}return r}return e}},e.prototype.getStoredAnnotations=function(e,t,i){var n,o=window.sessionStorage.getItem(this.pdfViewerBase.documentId+i);if(this.pdfViewerBase.isStorageExceed&&(o=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+i]),o){var s=JSON.parse(o),a=this.pdfViewer.annotationModule.getPageCollection(s,e);n=s[a]?s[a].annotations:null}else n=null;return n},e.prototype.triggerAnnotationPropChange=function(e,t,i,n,o,s,a,r,l,d,h){this.getAnnotationIndex(e.pageIndex,e.id);var p=this.getAnnotationType(e.shapeAnnotationType,e.measureType),c={name:"annotationPropertiesChange",pageIndex:e.pageIndex,annotationId:e.annotName,annotationType:p,isColorChanged:t,isOpacityChanged:o,isThicknessChanged:n,isStrokeColorChanged:i};l&&(c.isFreeTextChanged=l,c.previousText=d,c.currentText=h),s&&(c.isLineHeadStartStyleChanged=s),a&&(c.isLineHeadEndStyleChanged=a),r&&(c.isBorderDashArrayChanged=r),this.pdfViewer.trigger("annotationPropertiesChange",c)},e.prototype.triggerAnnotationAdd=function(e){var t,i={opacity:e.opacity,fillColor:e.fillColor,strokeColor:e.strokeColor,thickness:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate},n={left:e.wrapper.bounds.x,top:e.wrapper.bounds.y,width:e.wrapper.bounds.width,height:e.wrapper.bounds.height},o=this.getAnnotationType(e.shapeAnnotationType,e.measureType);"Line"!==o&&"Arrow"!==o&&"Distance"!==o&&"Perimeter"!==o||(i.lineHeadStartStyle=this.getArrowString(e.sourceDecoraterShapes),i.lineHeadEndStyle=this.getArrowString(e.taregetDecoraterShapes),i.borderDashArray=e.borderDashArray),this.pdfViewer.enableShapeLabel?(t={fontColor:e.fontColor,fontSize:e.fontSize,fontFamily:e.fontFamily,opacity:e.labelOpacity,labelContent:e.labelContent,fillColor:e.labelFillColor},this.pdfViewer.fireAnnotationAdd(e.pageIndex,e.annotName,o,n,i,null,null,null,t)):this.pdfViewer.fireAnnotationAdd(e.pageIndex,e.annotName,o,n,i)},e.prototype.triggerAnnotationResize=function(e){var t,i={opacity:e.opacity,fillColor:e.fillColor,strokeColor:e.strokeColor,thickness:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate},n=(this.getAnnotationIndex(e.pageIndex,e.id),e.bounds),o={left:n.x,top:n.y,x:n.x,y:n.y,width:n.width,height:n.height},s={left:n.oldProperties.x,top:n.oldProperties.y,width:n.oldProperties.width,height:n.oldProperties.height},a=this.getAnnotationType(e.shapeAnnotationType,e.measureType);"Line"!==a&&"Arrow"!==a&&"Distance"!==a&&"Perimeter"!==a||(i.lineHeadStartStyle=this.getArrowString(e.sourceDecoraterShapes),i.lineHeadEndStyle=this.getArrowString(e.taregetDecoraterShapes),i.borderDashArray=e.borderDashArray),this.pdfViewer.enableShapeLabel&&"HandWrittenSignature"!==e.shapeAnnotationType?(t={fontColor:e.fontColor,fontSize:e.fontSize,fontFamily:e.fontFamily,opacity:e.labelOpacity,labelContent:e.labelContent,fillColor:e.labelFillColor,notes:e.notes},this.pdfViewer.fireAnnotationResize(e.pageIndex,e.annotName,a,o,i,null,null,null,t)):"HandWrittenSignature"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType||"SignatureImage"===e.shapeAnnotationType?this.pdfViewer.fireSignatureResize(e.pageIndex,e.signatureName,e.shapeAnnotationType,e.opacity,e.strokeColor,e.thickness,o,s):this.pdfViewer.fireAnnotationResize(e.pageIndex,e.annotName,a,o,i)},e.prototype.triggerAnnotationMove=function(e,t){var i={opacity:e.opacity,fillColor:e.fillColor,strokeColor:e.strokeColor,thickness:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate},n=e.bounds,o={left:n.x,top:n.y,x:n.x,y:n.y,width:n.width,height:n.height},s={left:n.oldProperties.x?n.oldProperties.x:n.x,top:n.oldProperties.y?n.oldProperties.y:n.y,width:n.width,height:n.height},a=this.getAnnotationType(e.shapeAnnotationType,e.measureType);"Line"!==a&&"Arrow"!==a&&"Distance"!==a&&"Perimeter"!==a||(i.lineHeadStartStyle=this.getArrowString(e.sourceDecoraterShapes),i.lineHeadEndStyle=this.getArrowString(e.taregetDecoraterShapes),i.borderDashArray=e.borderDashArray),"HandWrittenSignature"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType||"SignatureImage"===e.shapeAnnotationType?this.pdfViewer.fireSignatureMove(e.pageIndex,e.signatureName,e.shapeAnnotationType,e.opacity,e.strokeColor,e.thickness,s,o):t?this.pdfViewer.fireAnnotationMoving(e.pageIndex,e.annotName,a,i,s,o):this.pdfViewer.fireAnnotationMove(e.pageIndex,e.annotName,a,i,s,o)},e.prototype.annotationSelect=function(e,t,i,n,o,s){var a;"textMarkup"===i.shapeAnnotationType?a={type:"TextMarkup",subType:i.subject,opacity:i.opacity,color:i.color,textMarkupContent:i.textMarkupContent,textMarkupStartIndex:i.textMarkupStartIndex,textMarkupEndIndex:i.textMarkupEndIndex,customData:i.customData}:"StickyNotes"===i.shapeAnnotationType?a={type:"StickyNotes",opacity:i.opacity,customData:i.customData}:"Stamp"===i.shapeAnnotationType||"Image"===i.shapeAnnotationType?a={type:"Stamp",opacity:i.opacity,customData:i.customData}:"Ink"===i.shapeAnnotationType?a={type:"Ink",opacity:i.opacity,strokeColor:i.strokeColor,thickness:i.thickness,modifiedDate:i.modifiedDate,width:i.bounds.width,height:i.bounds.height,left:i.bounds.x,top:i.bounds.y,data:i.data,customData:i.customData}:"FreeText"===i.shapeAnnotationType?a={type:"FreeText",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,content:i.dynamicText,fontFamily:i.fontFamily,fontSize:i.fontSize,fontColor:i.fontColor,textAlign:i.textAlign,fontStyle:this.updateFreeTextFontStyle(i.font),customData:i.customData}:""===i.measureType?"Line"===i.shapeAnnotationType?a={type:"Shape",subType:"Line",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,borderDashArray:i.borderDashArray,lineHeadStartStyle:i.sourceDecoraterShapes,lineHeadEndStyle:i.taregetDecoraterShapes,customData:i.customData}:"Arrow"===i.shapeAnnotationType||"LineWidthArrowHead"===i.shapeAnnotationType?a={type:"Shape",subType:"Arrow",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,borderDashArray:i.borderDashArray,lineHeadStartStyle:i.sourceDecoraterShapes,lineHeadEndStyle:i.taregetDecoraterShapes,customData:i.customData}:"Rectangle"===i.shapeAnnotationType?a={type:"Shape",subType:"Rectangle",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,customData:i.customData}:"Circle"===i.shapeAnnotationType||"Ellipse"===i.shapeAnnotationType?a={type:"Shape",subType:"Circle",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,customData:i.customData}:"Polygon"===i.shapeAnnotationType&&(a={type:"Shape",subType:"Polygon",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,customData:i.customData}):""!==i.measureType&&("Distance"===i.measureType?a={type:"Measure",subType:"Distance",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,borderDashArray:i.borderDashArray,lineHeadStartStyle:i.sourceDecoraterShapes,lineHeadEndStyle:i.taregetDecoraterShapes,customData:i.customData}:"Perimeter"===i.measureType?a={type:"Measure",subType:"Perimeter",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,borderDashArray:i.borderDashArray,lineHeadStartStyle:i.sourceDecoraterShapes,lineHeadEndStyle:i.taregetDecoraterShapes,customData:i.customData}:"Area"===i.measureType?a={type:"Measure",subType:"Area",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,customData:i.customData}:"Radius"===i.measureType?a={type:"Measure",subType:"Radius",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,customData:i.customData}:"Volume"===i.measureType&&(a={type:"Measure",subType:"Volume",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,calibrate:i.calibrate,annotationId:i.annotName,customData:i.customData}));var r=[],l=this.getOverlappedAnnotations(i,t);if(l&&this.overlappedCollections){for(var d=[],h=0;h<l.length;h++)if("textMarkup"!==l[h].shapeAnnotationType&&this.overlappedCollections||s){for(var p=0;p<this.overlappedCollections.length;p++)if(l[h].annotName===this.overlappedCollections[p].annotName){d.push(l[h]);break}}else d.push(l[h]);l=d}if(this.pdfViewer.enableMultiLineOverlap)for(h=0;h<l.length;h++)if("textMarkup"===l[h].shapeAnnotationType){var c=!1;for(p=0;p<l[h].bounds.length;p++){var u=this.orderTextMarkupBounds(l[h].bounds[p]),f=this.textMarkupAnnotationModule.annotationClickPosition;f&&(f.x||f.y)?u.left<=f.x&&u.left+u.width>=f.x&&u.top<=f.y&&u.top+u.height>=f.y&&(c=!0):c=!0}c||l.splice(h,1)}if(l&&l.length>0){n=l;for(h=0;h<n.length;h++){var m=qs(n[h]);m.annotationId=n[h].annotName,e===n[h].annotName&&i.measureType&&"Volume"===i.measureType&&(a.calibrate=n[h].calibrate),delete m.annotName,r.push(m)}}else r=null;this.addFreeTextProperties(i,a);var g=i.annotationAddMode;if(o)("Stamp"===i.shapeAnnotationType||"Image"===i.shapeAnnotationType)&&this.pdfViewerBase.isNewStamp||this.pdfViewer.fireAnnotationDoubleClick(e,t,a);else if("Stamp"===i.shapeAnnotationType||"Image"===i.shapeAnnotationType)!this.pdfViewerBase.isNewStamp&&this.annotationSelected&&(r?this.pdfViewer.fireAnnotationSelect(e,t,a,r,null,null,g):this.pdfViewer.fireAnnotationSelect(e,t,a,null,null,null,g));else{var y=this.textMarkupAnnotationModule,v=y&&y.multiPageCollectionList(i);v&&0===v.length&&(v=null),this.annotationSelected&&(r?(s=!1,this.pdfViewer.fireAnnotationSelect(e,t,a,r,v,s,g)):(s=!0,this.pdfViewer.fireAnnotationSelect(e,t,a,null,v,s,g)))}this.annotationSelected=!0},e.prototype.selectSignature=function(e,t,i){var n=i.bounds,o={height:n.height,width:n.width,x:n.x,y:n.y};if(!this.pdfViewerBase.signatureAdded){var s={bounds:o,opacity:i.opacity,thickness:i.thickness,strokeColor:i.strokeColor};this.pdfViewer.fireSignatureSelect(e,t,s)}},e.prototype.editSignature=function(e){var t,i=(t=e.uniqueKey?this.pdfViewer.nameTable[e.uniqueKey]:this.pdfViewer.selectedItems.annotations[0]).pageIndex;if("HandWrittenSignature"===t.shapeAnnotationType||"SignatureText"===t.shapeAnnotationType||"SignatureImage"===t.shapeAnnotationType){var n=qs(t),o=qs(t);t.opacity!==e.opacity&&(o.opacity=e.opacity,this.pdfViewer.nodePropertyChange(t,{opacity:e.opacity}),this.pdfViewer.fireSignaturePropertiesChange(t.pageIndex,t.signatureName,t.shapeAnnotationType,!1,!0,!1,n.opacity,o.opacity),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Opacity","",n,o)),t.strokeColor!==e.strokeColor&&(o.strokeColor=e.strokeColor,this.pdfViewer.nodePropertyChange(t,{strokeColor:e.strokeColor}),this.pdfViewer.fireSignaturePropertiesChange(t.pageIndex,t.signatureName,t.shapeAnnotationType,!0,!1,!1,n.strokeColor,o.strokeColor),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Stroke","",n,o)),t.thickness!==e.thickness&&(o.thickness=e.thickness,this.pdfViewer.nodePropertyChange(t,{thickness:e.thickness}),this.pdfViewer.fireSignaturePropertiesChange(t.pageIndex,t.signatureName,t.shapeAnnotationType,!1,!1,!0,n.thickness,o.thickness),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Thickness","",n,o)),t.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.pdfViewer.renderDrawing(),this.pdfViewerBase.signatureModule.modifySignatureCollection(null,i,t,!0)}},e.prototype.deletComment=function(e){e.parentElement.firstChild===e?this.deleteAnnotation():this.pdfViewer.annotationModule.stickyNotesAnnotationModule.modifyCommentDeleteProperty(e.parentElement,e)},e.prototype.addReplyComments=function(e,t,i){if("add"===i){var n=document.getElementById(e.annotName);this.pdfViewer.annotationModule.stickyNotesAnnotationModule.createCommentDiv(n);for(var o=0;o<t.length;o++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveCommentDiv(n,t[o])}else if("next"===i){n=document.getElementById(e.annotationId);this.selectAnnotation(e),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveCommentDiv(n,t)}},e.prototype.editComments=function(e,t){document.getElementById(e).childNodes[1].ej2_instances[0].value=t},e.prototype.editAnnotation=function(e){var t,i,n,o,s=!1;if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?(i=(t=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation).annotName,o=this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage):this.pdfViewer.selectedItems.annotations[0]&&(i=(t=this.pdfViewer.selectedItems.annotations[0]).annotName,o=t.pageIndex),void 0!==e.uniqueKey){if((t=this.pdfViewer.nameTable[e.uniqueKey]).annotationSettings.isLock=e.annotationSettings.isLock,i=t.annotName,o=t.pageIndex,S()&&e.allowedInteractions)for(var a=e.allowedInteractions.length,r=0;r<a;r++)0===e.allowedInteractions[r]&&(e.allowedInteractions[r]=na.Select),1===e.allowedInteractions[r]&&(e.allowedInteractions[r]=na.Move),2===e.allowedInteractions[r]&&(e.allowedInteractions[r]=na.Resize),3===e.allowedInteractions[r]&&(e.allowedInteractions[r]=na.Delete),4===e.allowedInteractions[r]&&(e.allowedInteractions[r]=na.PropertyChange),5===e.allowedInteractions[r]&&(e.allowedInteractions[r]=na.None);t.allowedInteractions=e.allowedInteractions?e.allowedInteractions:this.updateAnnotationAllowedInteractions(e)}if(t||"sticky"===e.shapeAnnotationType&&void 0!==e.annotationId&&((t=this.pdfViewer.nameTable[e.annotationId]).annotationSettings.isLock=e.annotationSettings.isLock,i=t.annotName,o=t.pageIndex),"textMarkup"===e.shapeAnnotationType&&!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){t=this.pdfViewer.annotationModule.textMarkupAnnotationModule.getAnnotations(e.pageNumber,e);for(r=0;r<t.length;r++)if(e.annotationId===t[r].annotName){s=!0,(t=t[r]).isPrint=e.isPrint,this.textMarkupAnnotationModule.currentTextMarkupAnnotation=t,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=t.pageNumber,t.allowedInteractions=e.allowedInteractions,o=t.pageNumber,i=e.annotationId;break}}if(t){var l=qs(t),d=qs(t);if("textMarkup"===e.shapeAnnotationType&&(n="textMarkup"),e&&!0===e.isCommentLock&&(t.isCommentLock=e.isCommentLock),e.comments)for(var h=0;h<e.comments.length;h++)!0===e.comments[h].isLock&&(n?(t.comments=e.comments,t.comments[h].isLock=e.comments[h].isLock):(t.properties.comments=e.comments,t.properties.comments[h].isLock=e.comments[h].isLock));if(e&&""!==e.note&&void 0!==e.note?n?(t.note=e.note,this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addTextToComments(t.annotName,t.note)):(t.notes=e.note,this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addTextToComments(t.annotName,t.notes)):e&&e.isCommentLock&&(e.type&&"FreeText"!==e.type||"FreeText"!==e.shapeAnnotationType)&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addTextToComments(t.annotName,"  "),e.commentId&&e.editComment&&"edit"===e.commentType&&this.editComments(e.commentId,e.editComment),e.replyComment&&"add"===e.commentType&&(this.addReplyComments(t,e.replyComment,e.commentType),this.pdfViewer.annotationCollection[0].note=e.note),e.nextComment&&"next"===e.commentType&&this.addReplyComments(e,e.nextComment,e.commentType),""===e.note&&"delete"===e.commentType){var p=document.getElementById(e.annotationId);this.deletComment(p)}if(e.comments)for(var c=0;c<e.comments.length;c++)if(""===e.comments[c].note&&"delete"===e.commentType){p=document.getElementById(e.comments[c].annotName);this.deletComment(p)}if("TextMarkup"===e.type||"textMarkup"===e.shapeAnnotationType){if(t.annotationSettings&&e.annotationSettings&&t.annotationSettings.isLock!==e.annotationSettings.isLock){var u=this.textMarkupAnnotationModule.modifyAnnotationProperty("AnnotationSettings",e.annotationSettings.isLock,null);this.textMarkupAnnotationModule.manageAnnotations(u,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage)}t.opacity!==e.opacity&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(null,e.opacity),t.color!==e.color&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyColorProperty(e.color),n="textMarkup",s&&(this.textMarkupAnnotationModule.currentTextMarkupAnnotation=null,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=null)}else if(e&&"image"===e.stampAnnotationType&&"stamp"===e.shapeAnnotationType&&e.stampAnnotationPath)n="stamp",t.data!==e.stampAnnotationPath&&(t.data=e.stampAnnotationPath,t.wrapper.children[0].imageSource=e.stampAnnotationPath),e.opacity&&t.opacity!==e.opacity&&this.annotationPropertyChange(t,e.opacity,"Shape Opacity",l,d),this.calculateAnnotationBounds(t,e);else if("StickyNotes"===e.type||"Stamp"===e.type||"sticky"===e.shapeAnnotationType||"stamp"===e.shapeAnnotationType)e.opacity&&t.opacity!==e.opacity&&this.annotationPropertyChange(t,e.opacity,"Shape Opacity",l,d),this.calculateAnnotationBounds(t,e),n="StickyNotes"===e.type||"sticky"===e.shapeAnnotationType?"sticky":"stamp";else if("Ink"===e.type||"Shape"===e.type||"Measure"===e.type||"Line"===e.shapeAnnotationType||"Square"===e.shapeAnnotationType||"Circle"===e.shapeAnnotationType||"Polygon"===e.shapeAnnotationType||"Polyline"===e.shapeAnnotationType||"Ink"===e.shapeAnnotationType){if(this.calculateAnnotationBounds(t,e),e.opacity&&t.opacity!==e.opacity&&this.annotationPropertyChange(t,e.opacity,"Shape Opacity",l,d),e.fillColor&&t.fillColor!==e.fillColor&&(d.fillColor=e.fillColor,e.labelSettings&&e.labelSettings.fillColor&&(e.labelSettings.fillColor=e.fillColor),this.pdfViewer.nodePropertyChange(t,{fillColor:e.fillColor}),this.triggerAnnotationPropChange(t,!0,!1,!1,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Fill","",l,d)),e.strokeColor&&t.strokeColor!==e.strokeColor&&(d.strokeColor=e.strokeColor,this.pdfViewer.nodePropertyChange(t,{strokeColor:e.strokeColor}),this.triggerAnnotationPropChange(t,!1,!0,!1,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Stroke","",l,d)),e.thickness&&t.thickness!==e.thickness&&(d.thickness=e.thickness,this.pdfViewer.nodePropertyChange(t,{thickness:e.thickness}),this.triggerAnnotationPropChange(t,!1,!1,!0,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Thickness","",l,d)),t.author!==e.author&&(d.author=e.author,this.pdfViewer.nodePropertyChange(t,{author:e.author}),this.triggerAnnotationPropChange(t,!1,!0,!1,!1)),t.modifiedDate!==e.modifiedDate&&(d.modifiedDate=e.modifiedDate,this.pdfViewer.nodePropertyChange(t,{modifiedDate:e.modifiedDate})),t.subject!==e.subject&&(d.subject=e.subject,this.pdfViewer.nodePropertyChange(t,{subject:e.subject}),this.triggerAnnotationPropChange(t,!1,!0,!1,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Stroke","",l,d)),this.pdfViewer.enableShapeLabel&&t.fontColor!==e.fontColor&&(d.fontColor=e.fontColor,this.pdfViewer.nodePropertyChange(t,{fontColor:e.fontColor})),this.pdfViewer.enableShapeLabel&&e.labelSettings&&e.labelSettings.fillColor&&t.labelFillColor!==e.labelSettings.fillColor&&(d.labelFillColor=e.labelSettings.fillColor,this.pdfViewer.nodePropertyChange(t,{labelFillColor:e.labelSettings.fillColor})),"Line"!==e.shapeAnnotationType&&"Polyline"!==e.shapeAnnotationType&&"Polygon"!==e.shapeAnnotationType||JSON.stringify(t.vertexPoints)!==JSON.stringify(e.vertexPoints)&&(t.vertexPoints=e.vertexPoints,this.pdfViewer.nodePropertyChange(t,{vertexPoints:e.vertexPoints})),"Line"===e.subType||"Arrow"===e.subType||"Distance"===e.subType||"Perimeter"===e.subType){var f=!1,m=!1,g=!1;l.lineHeadStart=t.sourceDecoraterShapes,l.lineHeadEnd=t.taregetDecoraterShapes,d.lineHeadStart=e.lineHeadStartStyle,d.lineHeadEnd=e.lineHeadEndStyle,d.borderDashArray=e.borderDashArray,t.taregetDecoraterShapes!==e.lineHeadEndStyle&&(m=!0),t.sourceDecoraterShapes!==e.lineHeadStartStyle&&(f=!0),t.borderDashArray!==e.borderDashArray&&(g=!0),this.pdfViewer.nodePropertyChange(t,{sourceDecoraterShapes:e.lineHeadStartStyle,taregetDecoraterShapes:e.lineHeadEndStyle,borderDashArray:e.borderDashArray}),this.triggerAnnotationPropChange(t,!1,!1,!1,!1,f,m,g),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Line properties change","",l,d)}"Shape"!==e.type&&"Line"!==e.shapeAnnotationType&&"Square"!==e.shapeAnnotationType&&"Circle"!==e.shapeAnnotationType&&"Polygon"!==e.shapeAnnotationType||(n="shape"),"Ink"!==e.type&&"Ink"!==e.shapeAnnotationType||(n="ink"),"Measure"!==e.type&&"Distance calculation"!==e.subject&&"Perimeter calculation"!==e.subject&&"Radius calculation"!==e.subject&&"Area calculation"!==e.subject&&"Volume calculation"!==e.subject||(n="shape_measure"),e.labelSettings&&this.pdfViewer.enableShapeLabel&&(this.updateFreeTextProperties(t),this.pdfViewer.nodePropertyChange(t,{labelOpacity:e.labelSettings.opacity,fontColor:e.labelSettings.fontColor,fontSize:e.labelSettings.fontSize,fontFamily:e.labelSettings.fontFamily,labelContent:t.notes,labelFillColor:e.labelSettings.fillColor})),this.pdfViewer.enableShapeLabel&&e.calibrate&&e.calibrate.depth&&this.pdfViewer.annotationModule.measureAnnotationModule.volumeDepth!==e.calibrate.depth&&(this.pdfViewer.annotationModule.measureAnnotationModule.volumeDepth=e.calibrate.depth,t.notes=this.pdfViewer.annotationModule.measureAnnotationModule.calculateVolume(t.vertexPoints,t.id,t.pageIndex),t.labelContent=t.notes,e.labelSettings&&e.labelSettings.labelContent&&(e.labelSettings.labelContent=t.notes),this.pdfViewer.nodePropertyChange(t,{labelContent:t.labelContent}),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addTextToComments(t.annotName,t.notes))}else if("FreeText"===e.type||"FreeText"===e.shapeAnnotationType){if(n="freetext",this.pdfViewer.freeTextSettings.enableAutoFit&&t.dynamicText!==e.content){var y=this.pdfViewerBase.getElement("_annotationCanvas_"+t.pageIndex).getContext("2d"),v=e.fontSize,w=void 0,b=e.fontFamily,C=this.pdfViewerBase.getZoomFactor();w=e.font.isBold?"bold "+v+"px "+b:v+"px "+b,y.font=w;var x="",M=[],I=e.content?e.content:e.dynamicText;if(I.indexOf("\n")>-1){M=I.split("\n");for(var T=0;T<M.length;T++){var A=y.measureText(M[T]),k=y.measureText(x);A.width>k.width&&(x=M[T])}}else x=I;var V=y.measureText(x);e.bounds.width=Math.ceil(V.width+18);var E=this.pdfViewerBase.getElement("_pageDiv_"+e.pageIndex).clientWidth-e.bounds.left*C;e.bounds.width>E&&(e.bounds.width=E/C);var D=e.bounds.height;e.bounds.height=D>=t.bounds.height?D:t.bounds.height}this.calculateAnnotationBounds(t,e),this.pdfViewer.nodePropertyChange(t,{opacity:e.opacity,fontColor:e.fontColor,fontSize:e.fontSize,fontFamily:e.fontFamily,dynamicText:e.content?e.content:e.dynamicText,fillColor:e.fillColor,textAlign:e.textAlign,strokeColor:e.strokeColor,thickness:e.thickness,font:e.fontStyle?this.setFreeTextFontStyle(e.fontStyle):this.setFreeTextFontStyle(e.font),isReadonly:e.isReadonly}),e.opacity&&t.opacity!==e.opacity&&this.triggerAnnotationPropChange(t,!1,!1,!1,!0),e.fillColor&&t.fillColor!==e.fillColor&&this.triggerAnnotationPropChange(t,!0,!1,!1,!1),e.strokeColor&&t.strokeColor!==e.strokeColor&&this.triggerAnnotationPropChange(t,!1,!0,!1,!1),e.thickness&&t.thickness!==e.thickness&&this.triggerAnnotationPropChange(t,!1,!1,!0,!1),e.content&&this.pdfViewer.selectedItems.annotations[0]&&this.updateAnnotationComments(this.pdfViewer.selectedItems.annotations[0].annotName,e.content);var N=document.getElementById(this.pdfViewer.element.id+"_commenttextbox_editor");new vb({value:e.content}).appendTo(N)}t.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),t.customData!==e.customData&&(t.customData=e.customData),t.isPrint=e.isPrint,"TextMarkup"!==e.type&&(this.pdfViewer.renderDrawing(),this.updateCollection(i,o,e,n))}},e.prototype.annotationPropertyChange=function(e,t,i,n,o){this.pdfViewer.nodePropertyChange(e,{opacity:t}),this.triggerAnnotationPropChange(e,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(e.pageIndex,null,e,i,"",n,o)},e.prototype.calculateAnnotationBounds=function(e,t){var i=this.pdfViewerBase.convertBounds(e.wrapper.bounds),n=this.pdfViewerBase.convertBounds(t.bounds);if(i&&n&&(JSON.stringify(i)!==JSON.stringify(n)&&Math.abs(i.Y-n.Y)>2||Math.abs(i.X-n.X)>2||Math.abs(i.Width-n.Width)>2||Math.abs(i.Height-n.Height)>2)){var o={x:n.X+n.Width/2,y:n.Y+n.Height/2,width:n.Width,height:n.Height};this.pdfViewer.nodePropertyChange(e,{bounds:o}),this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.triggerAnnotationPropChange(e,!1,!1,!1,!1)}},e.prototype.updateFreeTextProperties=function(e){e.labelSettings&&(e.labelSettings.fillColor&&(e.labelFillColor=e.labelSettings.fillColor),e.labelSettings.fontColor&&(e.fontColor=e.labelSettings.fontColor),e.labelSettings.fontSize&&(e.fontSize=e.labelSettings.fontSize),e.labelSettings.fontFamily&&(e.fontFamily=e.labelSettings.fontFamily),e.labelSettings.opacity&&(e.labelOpacity=e.labelSettings.opacity),e.labelSettings.labelContent&&(e.labelContent=e.labelSettings.labelContent))},e.prototype.updateAnnotationComments=function(e,t){var i=document.getElementById(e);i&&i.childNodes&&(i.childNodes[0].ej2_instances?i.childNodes[0].ej2_instances[0].value=t:i.childNodes[0].childNodes&&i.childNodes[0].childNodes[1].ej2_instances&&(i.childNodes[0].childNodes[1].ej2_instances[0].value=t))},e.prototype.addFreeTextProperties=function(e,t){this.pdfViewer.enableShapeLabel&&e&&t&&(t.labelSettings={fontColor:e.fontColor,fontSize:e.fontSize,fontFamily:e.fontFamily,opacity:e.labelOpacity,labelContent:e.labelContent,fillColor:e.labelFillColor})},e.prototype.updateMeasurementSettings=function(){if(this.pdfViewer.enableAnnotation&&this.pdfViewer.enableMeasureAnnotation){var e="1 "+this.pdfViewer.measurementSettings.conversionUnit+" = "+this.pdfViewer.measurementSettings.scaleRatio+" "+this.pdfViewer.measurementSettings.displayUnit;this.measureAnnotationModule.updateMeasureValues(e,this.pdfViewer.measurementSettings.displayUnit,this.pdfViewer.measurementSettings.conversionUnit,this.pdfViewer.measurementSettings.depth)}},e.prototype.updateCollection=function(e,t,i,n){var o,s=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_"+n);if(this.pdfViewerBase.isStorageExceed&&(s=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_"+n]),s){var a=JSON.parse(s),r=this.getPageCollection(a,t);if(a[r]&&null!==(o=a[r].annotations)){for(var l=0;l<o.length;l++)if(o[l].annotName===e){var d=this.modifyAnnotationProperties(o[l],i,n);o[l]=d}this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_"+n),a[r]&&(a[r].annotations=o);var h=JSON.stringify(a);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_"+n]=h:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_"+n,h)}}},e.prototype.modifyAnnotationProperties=function(e,t,i){if(t&&!0===t.isCommentLock&&(e.isCommentLock=t.isCommentLock),t.comments)for(var n=0;n<t.comments.length;n++)!0===t.comments[n].isLock&&(e.comments[n].isLock=t.comments[n].isLock);if(t&&""!==t.note&&void 0!==t.note&&(e.note=t.note),t.commentId&&t.editComment&&"edit"===t.commentType){var o=document.getElementById(t.commentId);t.annotationId===t.commentId&&(e.note=o.childNodes[1].ej2_instances[0].value);for(n=0;n<t.comments.length;n++)t.comments[n].annotName===t.commentId&&(e.comments[n].note=o.childNodes[1].ej2_instances[0].value)}if("textMarkup"===i)e.opacity=t.opacity,e.color=t.color,e.allowedInteractions=t.allowedInteractions;else if("sticky"===i||"stamp"===i)t.bounds&&(e.bounds=t.bounds),e.opacity=t.opacity,e.annotationSettings=t.annotationSettings,e.allowedInteractions=t.allowedInteractions,t.stampAnnotationPath&&(e.stampAnnotationPath=t.stampAnnotationPath);else if("ink"===i)t.bounds&&(e.bounds=t.bounds),e.opacity=t.opacity,e.strokeColor=t.strokeColor,e.thickness=t.thickness,e.annotationSettings=t.annotationSettings,e.allowedInteractions=t.allowedInteractions;else if("shape"===i||"shape_measure"===i){if("Line"===t.subType||"Arrow"===t.subType||"Distance"===t.subType||"Perimeter"===t.subType?(t.bounds&&(e.bounds=t.bounds),t.vertexPoints&&(e.vertexPoints=t.vertexPoints),e.opacity=t.opacity,e.fillColor=t.fillColor,e.strokeColor=t.strokeColor,e.thickness=t.thickness,e.borderDashArray=t.borderDashArray,e.lineHeadStart=this.getArrowTypeForCollection(t.lineHeadStartStyle),e.lineHeadEnd=this.getArrowTypeForCollection(t.lineHeadEndStyle),e.annotationSettings=t.annotationSettings,e.allowedInteractions=t.allowedInteractions):(t.bounds&&(e.bounds=t.bounds),t.vertexPoints&&(e.vertexPoints=t.vertexPoints),e.opacity=t.opacity,e.fillColor=t.fillColor,e.strokeColor=t.strokeColor,e.thickness=t.thickness,e.annotationSettings=t.annotationSettings,e.allowedInteractions=t.allowedInteractions,t.calibrate&&e.annotName===t.annotationId&&e.calibrate.depth!==t.calibrate.depth&&(e.calibrate.depth=t.calibrate.depth,this.pdfViewer.annotationModule.measureAnnotationModule.volumeDepth=t.calibrate.depth,e.note=this.pdfViewer.annotationModule.measureAnnotationModule.calculateVolume(e.vertexPoints))),this.pdfViewer.enableShapeLabel&&t.labelSettings){var s=t.labelSettings.labelContent;e.note=s,e.fontSize=t.labelSettings.fontSize,e.labelFillColor=t.labelSettings.fillColor,e.labelContent&&(e.labelContent=s),e.labelSettings&&(e.labelSettings=t.labelSettings),this.updateAnnotationComments(e.annotName,s)}}else"freetext"===i&&(t.bounds&&(e.bounds=t.bounds),e.opacity=t.opacity,e.strokeColor=t.strokeColor,e.thickness=t.thickness,t.content&&(e.dynamicText=t.content),e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontColor=t.fontColor,e.fillColor=t.fillColor,e.font=t.font?t.font:t.fontStyle,e.textAlign=t.textAlign,e.annotationSettings=t.annotationSettings,e.allowedInteractions=t.allowedInteractions,e.isReadonly=t.isReadonly);return e.customData=t.customData,e.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),e.isPrint=t.isPrint,t.annotationSettings&&!m(t.annotationSettings.isLock)&&(e.isLocked=t.annotationSettings.isLock),e},e.prototype.updateAnnotationAuthor=function(e,t){var i;return"sticky"===e?i="Guest"!==this.pdfViewer.stickyNotesSettings.author?this.pdfViewer.stickyNotesSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"stamp"===e?i="Guest"!==this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"shape"===e?"Line"===t?i="Guest"!==this.pdfViewer.lineSettings.author?this.pdfViewer.lineSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"LineWidthArrowHead"===t||"Arrow"===t?i="Guest"!==this.pdfViewer.arrowSettings.author?this.pdfViewer.arrowSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Circle"===t||"Ellipse"===t||"Oval"===t?i="Guest"!==this.pdfViewer.circleSettings.author?this.pdfViewer.circleSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Rectangle"===t||"Square"===t?i="Guest"!==this.pdfViewer.rectangleSettings.author?this.pdfViewer.rectangleSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Polygon"===t&&(i="Guest"!==this.pdfViewer.polygonSettings.author?this.pdfViewer.polygonSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest"):"measure"===e?"Distance"===t||"Distance calculation"===t?i="Guest"!==this.pdfViewer.distanceSettings.author?this.pdfViewer.distanceSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Perimeter"===t||"Perimeter calculation"===t?i="Guest"!==this.pdfViewer.perimeterSettings.author?this.pdfViewer.perimeterSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Radius"===t||"Radius calculation"===t?i="Guest"!==this.pdfViewer.radiusSettings.author?this.pdfViewer.radiusSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Area"===t||"Area calculation"===t?i="Guest"!==this.pdfViewer.areaSettings.author?this.pdfViewer.areaSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Volume"!==t&&"Volume calculation"!==t||(i="Guest"!==this.pdfViewer.volumeSettings.author?this.pdfViewer.volumeSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest"):"textMarkup"===e?i="Highlight"===t?"Guest"!==this.pdfViewer.highlightSettings.author?this.pdfViewer.highlightSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Underline"===t?"Guest"!==this.pdfViewer.underlineSettings.author?this.pdfViewer.underlineSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Strikethrough"===t?"Guest"!==this.pdfViewer.strikethroughSettings.author?this.pdfViewer.strikethroughSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":this.pdfViewer.annotationSettings.author:"freeText"===e?i="Guest"!==this.pdfViewer.freeTextSettings.author?this.pdfViewer.freeTextSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"ink"===e&&(i="Guest"!==this.pdfViewer.inkAnnotationSettings.author?this.pdfViewer.inkAnnotationSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest"),i||(i=this.pdfViewer.annotationSettings.author),i},e.prototype.nameToHash=function(e){var t={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",yellow:"#ffff00",yellowgreen:"#9acd32",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkred:"#8b0000",darksalmon:"#e9967a",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",indigo:"#4b0082",ivory:"#fffff0",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",pink:"#ffc0cb",plum:"#dda0dd",steelblue:"#4682b4",violet:"#ee82ee",powderblue:"#b0e0e6",purple:"#800080",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0"};return"undefined"!==typeof t[e.toLowerCase()]?t[e.toLowerCase()]:""},e.prototype.updateFreeTextFontStyle=function(e){return 1===e.isBold?1:2===e.isItalic?2:4===e.isUnderline?4:e.isStrikeout?8:{isBold:e.isBold,isItalic:e.isItalic,isUnderline:e.isUnderline,isStrikeout:e.isUnderline}},e.prototype.setFreeTextFontStyle=function(e){return 1===e?{isBold:!0}:2===e?{isItalic:!0}:4===e?{isUnderline:!0}:8===e?{isStrikeout:!0}:{isBold:e.isBold,isItalic:e.isItalic,isUnderline:e.isUnderline,isStrikeout:e.isStrikeout}},e.prototype.findAnnotationSettings=function(e,t){var i=this.pdfViewer.annotationSettings;if(e){var n=e.shapeAnnotationType;"StickyNotes"===n&&this.pdfViewer.stickyNotesSettings?i=this.pdfViewer.stickyNotesSettings:"Stamp"===n||"Image"===n?(i=this.pdfViewer.stampSettings,"image"!==n&&"Image"!==n||(i=this.pdfViewer.customStampSettings)):"FreeText"===n?i=this.pdfViewer.freeTextSettings:""===e.measureType?"Line"===n?i=this.pdfViewer.lineSettings:"Arrow"===n||"LineWidthArrowHead"===n?i=this.pdfViewer.arrowSettings:"Rectangle"===n?i=this.pdfViewer.rectangleSettings:"Circle"===n||"Ellipse"===n?i=this.pdfViewer.circleSettings:"Polygon"===n&&this.pdfViewer.polygonSettings&&(i=this.pdfViewer.polygonSettings):""!==e.measureType&&("Distance"===e.measureType?i=this.pdfViewer.distanceSettings:"Perimeter"===e.measureType?i=this.pdfViewer.perimeterSettings:"Area"===e.measureType?i=this.pdfViewer.areaSettings:"Radius"===e.measureType?i=this.pdfViewer.radiusSettings:"Volume"===e.measureType&&(i=this.pdfViewer.volumeSettings))}var o=e?e.annotationSettings:{};return o&&(o.minWidth||o.maxWidth||o.minHeight||o.maxHeight)?this.updateSettings(o):t?this.updateSettings(i):i},e.prototype.updateAnnotationSettings=function(e){var t=this.pdfViewer.annotationSettings;return"sticky"===e.AnnotType?t=this.pdfViewer.stickyNotesSettings:"stamp"===e.AnnotType||"image"===e.AnnotType||"Image"===e.AnnotType?(t=this.pdfViewer.stampSettings,"image"!==e.Subject&&"Image"!==e.Subject||(t=this.pdfViewer.customStampSettings)):"freeText"===e.AnnotType?t=this.pdfViewer.freeTextSettings:"shape"===e.AnnotType?"Line"===e.Subject?t=this.pdfViewer.lineSettings:"Arrow"===e.Subject||"LineWidthArrowHead"===e.Subject?t=this.pdfViewer.arrowSettings:"Rectangle"===e.Subject||"Square"===e.Subject?t=this.pdfViewer.rectangleSettings:"Circle"===e.Subject||"Ellipse"===e.Subject||"Oval"===e.Subject?t=this.pdfViewer.circleSettings:"Polygon"===e.Subject&&(t=this.pdfViewer.polygonSettings):"shape_measure"===e.AnnotType&&("Distance"===e.Subject||"Distance calculation"===e.Subject?t=this.pdfViewer.distanceSettings:"Perimeter"===e.Subject||"Perimeter calculation"===e.Subject?t=this.pdfViewer.perimeterSettings:"Area"===e.Subject||"Area calculation"===e.Subject?t=this.pdfViewer.areaSettings:"Radius"===e.Subject||"Radius calculation"===e.Subject?t=this.pdfViewer.radiusSettings:"Volume"!==e.Subject&&"Volume calculation"!==e.Subject||(t=this.pdfViewer.volumeSettings)),this.updateSettings(t)},e.prototype.updateSettings=function(e){var t=0,i=0,n=0,o=0,s=this.pdfViewer.annotationSettings;return e.minWidth||e.maxWidth||e.minHeight||e.maxHeight?(t=e.maxHeight?e.maxHeight:2e3,i=e.maxWidth?e.maxWidth:2e3,n=e.minHeight?e.minHeight:0,o=e.minWidth?e.minWidth:0):(s.minWidth||s.maxWidth||s.minHeight||s.maxHeight)&&(t=s.maxHeight?s.maxHeight:2e3,i=s.maxWidth?s.maxWidth:2e3,n=s.minHeight?s.minHeight:0,o=s.minWidth?s.minWidth:0),{minWidth:o,maxWidth:i,minHeight:n,maxHeight:t,isLock:e.isLock?e.isLock:!!s.isLock&&s.isLock,isPrint:e.isPrint}},e.prototype.getOverlappedAnnotations=function(e,t){for(var i,n=this.getPageShapeAnnotations(t),o=0;o<n.length;o++)if(e.annotName===n[o].annotName){i=n[o];break}return this.findOverlappedAnnotations(i,n)},e.prototype.getPageShapeAnnotations=function(e){var t=[],i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_ink");if(i){var n=JSON.parse(i);if(n)if(n[C=this.getPageCollection(n,e)]){var o=n[C].annotations;if(o&&o.length>0)for(var s=0;s<o.length;s++)t.push(o[s])}}var a=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape");if(a){var r=JSON.parse(a);if(r)if(r[C=this.getPageCollection(r,e)]){var l=r[C].annotations;if(l&&l.length>0)for(s=0;s<l.length;s++)t.push(l[s])}}var d=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape_measure");if(d){var h=JSON.parse(d);if(h)if(h[C=this.getPageCollection(h,e)]){var p=h[C].annotations;if(p&&p.length>0)for(s=0;s<p.length;s++)t.push(p[s])}}var c=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_stamp");if(c){var u=JSON.parse(c);if(u)if(u[C=this.getPageCollection(u,e)]){var f=u[C].annotations;if(f&&f.length>0)for(s=0;s<f.length;s++)t.push(f[s])}}var m=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_freetext");if(m){var g=JSON.parse(m);if(g)if(g[C=this.getPageCollection(g,e)]){var y=g[C].annotations;if(y&&y.length>0)for(s=0;s<y.length;s++)t.push(y[s])}}var v=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sticky");if(v){var w=JSON.parse(v);if(w)if(w[C=this.getPageCollection(w,e)]){var b=w[C].annotations;if(b&&b.length>0)for(s=0;s<b.length;s++)t.push(b[s])}}var S=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_textMarkup");if(S){var C,x=JSON.parse(S);if(x)if(x[C=this.getPageCollection(x,e)]){var M=x[C].annotations;if(M&&M.length>0)for(s=0;s<M.length;s++)t.push(M[s])}}return t},e.prototype.findOverlappedAnnotations=function(e,t){if(this.overlappedAnnotations=[],e&&e.bounds)if("textMarkup"===e.shapeAnnotationType)for(var i=0;i<e.bounds.length;i++){var n=this.orderTextMarkupBounds(e.bounds[i]);this.calculateOverlappedAnnotationBounds(e,n,t)}else this.calculateOverlappedAnnotationBounds(e,e.bounds,t);return this.overlappedAnnotations},e.prototype.calculateOverlappedAnnotationBounds=function(e,t,i){var n=t;"Ink"===e.shapeAnnotationType&&(n={left:t.x,top:t.y,height:t.height,width:t.width});for(var o=parseInt(n.left),s=parseInt(n.top),a=parseInt(n.top+n.height),r=parseInt(n.left+n.width),l=0;l<i.length;l++)if(e.annotName===i[l].annotName)this.checkOverlappedCollections(i[l],this.overlappedAnnotations);else{var d=1;"textMarkup"===i[l].shapeAnnotationType&&(d=i[l].bounds.length);for(var h=0;h<d;h++){var p=void 0,c=i[l].bounds;if("Ink"===i[l].shapeAnnotationType&&(c={left:c.x,top:c.y,height:c.height,width:c.width}),p="textMarkup"!==i[l].shapeAnnotationType&&1===d?c:this.orderTextMarkupBounds(c[h])){var u=!1;(o<=parseInt(p.left)&&r>=parseInt(p.left)||o<=parseInt(p.left+p.width)&&r>=parseInt(p.left+p.width))&&(u=!0),u&&(u=s<=parseInt(p.top)&&a>=parseInt(p.top)||s<=parseInt(p.top+p.height)&&a>=parseInt(p.top+p.height)),u?this.checkOverlappedCollections(i[l],this.overlappedAnnotations):((parseInt(p.left)<=o&&parseInt(p.left+p.width)>=o||r>=parseInt(p.left)&&r<=parseInt(p.left+p.width))&&(u=!0),u&&(u=parseInt(p.top)<=s&&parseInt(p.top+p.height)>=s||a>=parseInt(p.top)&&a<=parseInt(p.top+p.height)),u?this.checkOverlappedCollections(i[l],this.overlappedAnnotations):((o<=parseInt(p.left)&&r>=parseInt(p.left)||o<=parseInt(p.left+p.width)&&r>=parseInt(p.left+p.width))&&(u=!0),u&&(u=parseInt(p.top)<=s&&parseInt(p.top+p.height)>=s||a>=parseInt(p.top)&&a<=parseInt(p.top+p.height)),u?this.checkOverlappedCollections(i[l],this.overlappedAnnotations):((parseInt(p.left)<=o&&parseInt(p.left+p.width)>=o||r>=parseInt(p.left)&&r<=parseInt(p.left+p.width))&&(u=!0),u&&(u=s<=parseInt(p.top)&&a>=parseInt(p.top)||s<=parseInt(p.top+p.height)&&a>=parseInt(p.top+p.height)),u&&this.checkOverlappedCollections(i[l],this.overlappedAnnotations))))}}}},e.prototype.findAnnotationMode=function(e,t,i){var n=this.pdfViewer.viewerBase.importedAnnotation[t];if(n){var o=void 0;if("shape"===i?o=n.shapeAnnotation:"shape_measure"===i?o=n.measureShapeAnnotation:"freeText"===i?o=n.freeTextAnnotation:"stamp"===i?o=n.stampAnnotations:"sticky"===i?o=n.stickyNotesAnnotation:"textMarkup"===i&&(o=n.textMarkupAnnotation),o)for(var s=0;s<o.length;s++)if(o[s].AnnotName===e.AnnotName)return"Imported Annotation"}return"Existing Annotation"},e.prototype.checkOverlappedCollections=function(e,t){if(t.length>0){for(var i=!1,n=0;n<t.length;n++)if(e.annotName===t[n].annotName&&e.bounds===t[n].bounds){i=!0;break}i||t.push(e)}else t.push(e)},e.prototype.orderTextMarkupBounds=function(e){return e.Left||e.Width?{left:e.Left,top:e.Top,height:e.Height,width:e.Width}:{left:e.left,top:e.top,height:e.height,width:e.width}},e.prototype.updateModifiedDate=function(e){if(e.modifiedDate&&(e.modifiedDate=this.setAnnotationModifiedDate(e.modifiedDate)),e.comments&&e.comments.length>0)for(var t=0;t<e.comments.length;t++)e.comments[t].modifiedDate&&(e.comments[t].modifiedDate=this.setAnnotationModifiedDate(e.comments[t].modifiedDate),e.comments[t].review&&e.comments[t].review.modifiedDate&&(e.comments[t].review.modifiedDate=this.setAnnotationModifiedDate(e.comments[t].review.modifiedDate)));e.review&&e.review.modifiedDate&&(e.review.modifiedDate=this.setAnnotationModifiedDate(e.review.modifiedDate))},e.prototype.setAnnotationModifiedDate=function(e){var t;if(""===e)return e;var i=parseInt(e.split(" ")[1].split(":")[0]);t=3===e.split(" ").length?i+":"+e.split(" ")[1].split(":")[1]+":"+e.split(" ")[1].split(":")[2]+" "+e.split(" ")[2]:i>=12?12===i?i+":"+e.split(" ")[1].split(":")[1]+":"+e.split(" ")[1].split(":")[2]+" PM":i-12+":"+e.split(" ")[1].split(":")[1]+":"+e.split(" ")[1].split(":")[2]+" PM":i+":"+e.split(" ")[1].split(":")[1]+":"+e.split(" ")[1].split(":")[2]+" AM";var n=e.split(" ")[0];return e.split(",").length>1?n+" "+t:n+", "+t},e.prototype.clear=function(){this.shapeAnnotationModule&&(this.shapeAnnotationModule.shapeCount=0),this.measureAnnotationModule&&(this.measureAnnotationModule.measureShapeCount=0),this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.clear(),this.stickyNotesAnnotationModule&&this.stickyNotesAnnotationModule.clear(),this.pdfViewer.refresh(),this.undoCommentsElement=[],this.redoCommentsElement=[],this.overlappedAnnotations=[],this.previousIndex=null,this.pdfViewer.annotation&&this.pdfViewer.annotation.stampAnnotationModule&&(this.pdfViewer.annotation.stampAnnotationModule.stampPageNumber=[]),this.pdfViewer.annotation&&this.pdfViewer.annotation.freeTextAnnotationModule&&(this.pdfViewer.annotation.freeTextAnnotationModule.freeTextPageNumbers=[],this.freeTextAnnotationModule.previousText="Type Here"),this.pdfViewer.annotation&&this.pdfViewer.annotation.inkAnnotationModule&&(this.pdfViewer.annotation.inkAnnotationModule.inkAnnotationindex=[]),window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_shape"),window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_shape_measure"),window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_stamp"),window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_sticky")},e.prototype.retrieveAnnotationCollection=function(){return this.pdfViewer.annotationCollection},e.prototype.checkAllowedInteractions=function(e,t){var i=this.updateAnnotationAllowedInteractions(t);if(i&&i.length>0)for(var n=0;n<i.length;n++)if("Select"===e){if("Move"===i[n]||"Resize"===i[n]||"Delete"===i[n]||"PropertyChange"===i[n]||"Select"===i[n])return!0}else if(i[n]===e)return!0;return!1},e.prototype.checkContextMenuDeleteItem=function(e){var t=this.findCurrentAnnotation();t&&t.annotationSettings&&(t.annotationSettings.isLock?this.checkAllowedInteractions("Delete",t)?e.enableItems([this.pdfViewer.localeObj.getConstant("Delete Context")],!0):e.enableItems([this.pdfViewer.localeObj.getConstant("Delete Context")],!1):e.enableItems([this.pdfViewer.localeObj.getConstant("Delete Context")],!0))},e.prototype.isEnableDelete=function(){var e=this.findCurrentAnnotation();return!(!e||!e.annotationSettings)&&(!e.annotationSettings.isLock||!!this.checkAllowedInteractions("Delete",e))},e.prototype.findCurrentAnnotation=function(){return this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.currentTextMarkupAnnotation?this.textMarkupAnnotationModule.currentTextMarkupAnnotation:this.pdfViewer.selectedItems.annotations&&this.pdfViewer.selectedItems.annotations[0]?this.pdfViewer.selectedItems.annotations[0]:void 0},e.prototype.updateAnnotationAllowedInteractions=function(e){var t=["None"];return e&&("FreeText"===e.shapeAnnotationType&&this.pdfViewer.freeTextSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.freeTextSettings.allowedInteractions,e.allowedInteractions):"Ink"===e.shapeAnnotationType&&this.pdfViewer.inkAnnotationSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.inkAnnotationSettings.allowedInteractions,e.allowedInteractions):"StickyNotes"===e.shapeAnnotationType&&this.pdfViewer.stickyNotesSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.stickyNotesSettings.allowedInteractions,e.allowedInteractions):"Stamp"===e.shapeAnnotationType&&this.pdfViewer.stampSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.stampSettings.allowedInteractions,e.allowedInteractions):"Image"===e.shapeAnnotationType&&this.pdfViewer.customStampSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.customStampSettings.allowedInteractions,e.allowedInteractions):"textMarkup"===e.shapeAnnotationType?"Highlight"===e.textMarkupAnnotationType&&this.pdfViewer.highlightSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.highlightSettings.allowedInteractions,e.allowedInteractions):"Underline"===e.textMarkupAnnotationType&&this.pdfViewer.underlineSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.underlineSettings.allowedInteractions,e.allowedInteractions):"Strikethrough"===e.textMarkupAnnotationType&&this.pdfViewer.strikethroughSettings.allowedInteractions&&(t=this.checkAllowedInteractionSettings(this.pdfViewer.strikethroughSettings.allowedInteractions,e.allowedInteractions)):""!==e.measureType?"Distance"===e.measureType&&this.pdfViewer.distanceSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.distanceSettings.allowedInteractions,e.allowedInteractions):"Perimeter"===e.measureType&&this.pdfViewer.perimeterSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.perimeterSettings.allowedInteractions,e.allowedInteractions):"Radius"===e.measureType&&this.pdfViewer.radiusSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.radiusSettings.allowedInteractions,e.allowedInteractions):"Area"===e.measureType&&this.pdfViewer.areaSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.areaSettings.allowedInteractions,e.allowedInteractions):"Volume"===e.measureType&&this.pdfViewer.volumeSettings.allowedInteractions&&(t=this.checkAllowedInteractionSettings(this.pdfViewer.volumeSettings.allowedInteractions,e.allowedInteractions)):"Line"===e.shapeAnnotationType&&this.pdfViewer.lineSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.lineSettings.allowedInteractions,e.allowedInteractions):"Arrow"!==e.shapeAnnotationType&&"LineWidthArrowHead"!==e.shapeAnnotationType||!this.pdfViewer.arrowSettings.allowedInteractions?"Circle"!==e.shapeAnnotationType&&"Ellipse"!==e.shapeAnnotationType&&"Oval"!==e.shapeAnnotationType||!this.pdfViewer.circleSettings.allowedInteractions?"Rectangle"!==e.shapeAnnotationType&&"Square"!==e.shapeAnnotationType||!this.pdfViewer.rectangleSettings.allowedInteractions?"Polygon"===e.shapeAnnotationType&&this.pdfViewer.polygonSettings.allowedInteractions&&(t=this.checkAllowedInteractionSettings(this.pdfViewer.polygonSettings.allowedInteractions,e.allowedInteractions)):t=this.checkAllowedInteractionSettings(this.pdfViewer.rectangleSettings.allowedInteractions,e.allowedInteractions):t=this.checkAllowedInteractionSettings(this.pdfViewer.circleSettings.allowedInteractions,e.allowedInteractions):t=this.checkAllowedInteractionSettings(this.pdfViewer.arrowSettings.allowedInteractions,e.allowedInteractions)),t},e.prototype.checkIsLockSettings=function(e){var t=!1;return e&&("FreeText"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.freeTextSettings.isLock):"Ink"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.inkAnnotationSettings.isLock):"StickyNotes"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.stickyNotesSettings.isLock):"Stamp"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.stampSettings.isLock):"Image"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.customStampSettings.isLock):"textMarkup"===e.shapeAnnotationType?"Highlight"===e.textMarkupAnnotationType?t=this.checkLockSettings(this.pdfViewer.highlightSettings.isLock):"Underline"===e.textMarkupAnnotationType?t=this.checkLockSettings(this.pdfViewer.underlineSettings.isLock):"Strikethrough"===e.textMarkupAnnotationType&&(t=this.checkLockSettings(this.pdfViewer.strikethroughSettings.isLock)):""!==e.measureType?"Distance"===e.measureType?t=this.checkLockSettings(this.pdfViewer.distanceSettings.isLock):"Perimeter"===e.measureType?t=this.checkLockSettings(this.pdfViewer.perimeterSettings.isLock):"Radius"===e.measureType?t=this.checkLockSettings(this.pdfViewer.radiusSettings.isLock):"Area"===e.measureType?t=this.checkLockSettings(this.pdfViewer.areaSettings.isLock):"Volume"===e.measureType&&(t=this.checkLockSettings(this.pdfViewer.volumeSettings.isLock)):"Line"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.lineSettings.isLock):"Arrow"===e.shapeAnnotationType||"LineWidthArrowHead"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.arrowSettings.isLock):"Circle"===e.shapeAnnotationType||"Ellipse"===e.shapeAnnotationType||"Oval"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.circleSettings.isLock):"Rectangle"===e.shapeAnnotationType||"Square"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.rectangleSettings.isLock):"Polygon"===e.shapeAnnotationType&&(t=this.checkLockSettings(this.pdfViewer.polygonSettings.isLock))),t},e.prototype.checkLockSettings=function(e){var t=!1;return(e||this.pdfViewer.annotationSettings.isLock)&&(t=!0),t},e.prototype.restrictContextMenu=function(){var e=!1,t=this.findCurrentAnnotation();return t&&this.checkIsLockSettings(t)&&this.checkAllowedInteractions("Select",t)&&(e=!0),e},e.prototype.checkAllowedInteractionSettings=function(e,t){if(t){if(1!==t.length)return t;if("None"!==t[0])return t}if(e){if(1!==e.length)return e;if("None"!==e[0])return e}return this.pdfViewer.annotationSettings.allowedInteractions?this.pdfViewer.annotationSettings.allowedInteractions:["None"]},e.prototype.getValue=function(e,t){if(t=t?t.toLowerCase():"hex","r"===e[0]){var i=this.convertRgbToNumberArray(e);if("hex"===t||"hexa"===t){var n=this.rgbToHex(i);return"hex"===t?n.slice(0,7):n}return"hsv"===t?this.convertToHsvString(this.rgbToHsv.apply(this,i.slice(0,3))):"hsva"===t?this.convertToHsvString(this.rgbToHsv.apply(this,i)):"null"}if("h"===e[0]){i=this.hsvToRgb.apply(this,this.convertRgbToNumberArray(e));if("rgba"===t)return this.convertToRgbString(i);if("hex"===t||"hexa"===t){n=this.rgbToHex(i);return"hex"===t?n.slice(0,7):n}return"rgb"===t?this.convertToRgbString(i.slice(0,3)):"null"}e=this.roundValue(e);var o=this.hexToRgb(e);return"rgb"!==t&&"hsv"!==t||(o=o.slice(0,3)),"rgba"===t||"rgb"===t?this.convertToRgbString(o):"hsva"===t||"hsv"===t?this.convertToHsvString(this.rgbToHsv.apply(this,o)):"hex"===t?e.slice(0,7):"a"===t?o[3].toString():"null"},e.prototype.convertRgbToNumberArray=function(e){return e.slice(e.indexOf("(")+1,e.indexOf(")")).split(",").map((function(e,t){return 3!==t?parseInt(e,10):parseFloat(e)}))},e.prototype.convertToRgbString=function(e){return e.length?4===e.length?"rgba("+e.join()+")":"rgb("+e.join()+")":""},e.prototype.convertToHsvString=function(e){return 4===e.length?"hsva("+e.join()+")":"hsv("+e.join()+")"},e.prototype.roundValue=function(e){if(!e)return"";"#"!==e[0]&&(e="#"+e);var t=e.length;if(4===t&&(e+="f",t=5),5===t){for(var i="",n=1,o=e.length;n<o;n++)i+=e.charAt(n)+e.charAt(n);e="#"+i,t=9}return 7===t&&(e+="ff"),e},e.prototype.hexToRgb=function(e){if(!e)return[];9!==(e=e.trim()).length&&(e=this.roundValue(e));var t=Number((parseInt(e.slice(-2),16)/255).toFixed(2));e=e.slice(1,7);var i=parseInt(e,16),n=[];return n.push(i>>16&255),n.push(i>>8&255),n.push(255&i),n.push(t),n},e.prototype.rgbToHsv=function(e,t,i,n){e/=255,t/=255,i/=255;var o,s,a=Math.max(e,t,i),r=Math.min(e,t,i),l=a,d=a-r;if(s=0===a?0:d/a,a===r)o=0;else{switch(a){case e:o=(t-i)/d+(t<i?6:0);break;case t:o=(i-e)/d+2;break;case i:o=(e-t)/d+4}o/=6}var h=[Math.round(360*o),Math.round(1e3*s)/10,Math.round(1e3*l)/10];return m(n)||h.push(n),h},e.prototype.hsvToRgb=function(e,t,i,n){var o,s,a,r,l,d,h,p;if(i/=100,0===(t/=100))return o=s=a=i,[Math.round(255*o),Math.round(255*s),Math.round(255*a),n];switch(d=i*(1-t),h=i*(1-t*(l=(e/=60)-(r=Math.floor(e)))),p=i*(1-t*(1-l)),r){case 0:o=i,s=p,a=d;break;case 1:o=h,s=i,a=d;break;case 2:o=d,s=i,a=p;break;case 3:o=d,s=h,a=i;break;case 4:o=p,s=d,a=i;break;default:o=i,s=d,a=h}var c=[Math.round(255*o),Math.round(255*s),Math.round(255*a)];return m(n)||c.push(n),c},e.prototype.rgbToHex=function(e){return e.length?"#"+this.hex(e[0])+this.hex(e[1])+this.hex(e[2])+(m(e[3])?"":0!==e[3]?(Math.round(255*e[3])+65536).toString(16).substr(-2):"00"):""},e.prototype.exportAnnotationsAsStream=function(e){var t=this;if(this.pdfViewer.annotationModule&&this.pdfViewer.viewerBase.updateExportItem())return new Promise((function(i,n){t.pdfViewer.viewerBase.createRequestForExportAnnotations(!0,e,!0).then((function(e){i(e)}))}));return null},e.prototype.hex=function(e){return m(e)?"0":("0"+e.toString(16)).slice(-2)},e.prototype.cloneObject=function(e){return JSON.parse(JSON.stringify(e))},e.prototype.destroy=function(){this.destroyPropertiesWindow(),this.textMarkupAnnotationModule.clear()},e.prototype.getModuleName=function(){return"Annotation"},e.prototype.getVertexPointsXY=function(e){for(var t=[],i=0;i<e.length;i++)t[i]={X:e[i].x,Y:e[i].y};return t},e.prototype.addAnnotation=function(e,t,i,n,o){var s={x:1,y:1},a=0;t&&t.pageNumber&&t.pageNumber>0&&(a=t.pageNumber?t.pageNumber-1:0);var r=null,l=[];this.pdfViewer.annotation.triggerAnnotationUnselectEvent(),"FreeText"==e?(l[a]=this.pdfViewer.annotation.freeTextAnnotationModule.updateAddAnnotationDetails(t,s),this.pdfViewer.annotation.freeTextAnnotationModule.isAddAnnotationProgramatically=!0):"StickyNotes"==e?(l[a]=this.pdfViewer.annotation.stickyNotesAnnotationModule.updateAddAnnotationDetails(t,s),this.pdfViewer.annotation.stickyNotesAnnotationModule.isAddAnnotationProgramatically=!0):"Highlight"==e||"Underline"==e||"Strikethrough"==e?(("Highlight"==e||"Underline"==e||"Strikethrough"==e)&&(r=t),l[a]=this.pdfViewer.annotation.textMarkupAnnotationModule.updateAddAnnotationDetails(e,r),this.pdfViewer.annotation.textMarkupAnnotationModule.isAddAnnotationProgramatically=!0):"Line"===e||"Arrow"===e||"Rectangle"===e||"Circle"===e||"Polygon"===e?(("Line"==e||"Arrow"==e||"Rectangle"==e||"Circle"==e||"Polygon"==e)&&(r=t),l[a]=this.pdfViewer.annotation.shapeAnnotationModule.updateAddAnnotationDetails(e,r,s),this.pdfViewer.annotation.shapeAnnotationModule.isAddAnnotationProgramatically=!0):"Distance"===e||"Perimeter"===e||"Area"===e||"Radius"===e||"Volume"===e?(("Distance"==e||"Perimeter"==e||"Area"==e||"Radius"==e||"Volume"==e)&&(r=t),l[a]=this.pdfViewer.annotation.measureAnnotationModule.updateAddAnnotationDetails(e,r,s),this.pdfViewer.annotation.measureAnnotationModule.isAddAnnotationProgramatically=!0):"Stamp"===e?(t&&t.customStamps,l[a]=this.pdfViewer.annotation.stampAnnotationModule.updateAddAnnotationDetails(t,s,a,i,n,o),this.pdfViewer.annotation.stampAnnotationModule.isAddAnnotationProgramatically=!0):"Ink"===e&&(l[a]=this.pdfViewer.annotation.inkAnnotationModule.updateAddAnnotationDetails(t,s,a),this.pdfViewer.annotation.inkAnnotationModule.isAddAnnotationProgramatically=!0);var d={pdfAnnotation:l};this.pdfViewerBase.isAddAnnotation=!0,this.pdfViewerBase.importAnnotations(d),this.pdfViewerBase.isAddAnnotation=!1},e.prototype.triggerAnnotationAddEvent=function(e){var t=e.shapeAnnotationType;if("Stamp"===t||"Image"===t||"Path"===t||"FreeText"===t||"StickyNotes"===t||"Ink"===t){var i=void 0;i="FreeText"===t?{opacity:e.opacity,borderColor:e.strokeColor,borderWidth:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate,fillColor:e.fillColor,fontSize:e.fontSize,width:e.bounds.width,height:e.bounds.height,fontColor:e.fontColor,fontFamily:e.fontFamily,defaultText:e.dynamicText,fontStyle:e.font,textAlignment:e.textAlign}:{opacity:e.opacity,fillColor:e.fillColor,strokeColor:e.strokeColor,thickness:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate,data:e.data};var n={left:e.bounds.x,top:e.bounds.y,width:e.bounds.width,height:e.bounds.height},o=this.getAnnotationType(e.shapeAnnotationType,e.measureType);this.pdfViewer.fireAnnotationAdd(e.pageIndex,e.annotName,o,n,i)}else if("SignatureText"===t||"SignatureImage"===t||"HandWrittenSignature"===t){n={left:e.bounds.x,top:e.bounds.y,width:e.bounds.width,height:e.bounds.height};this.pdfViewer.fireSignatureAdd(e.pageIndex,e.signatureName,e.shapeAnnotationType,n,e.opacity,e.strokeColor,e.thickness,e.data)}else{var s={opacity:e.opacity,fillColor:e.fillColor,strokeColor:e.strokeColor,thickness:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate};n={left:e.bounds.x,top:e.bounds.y,width:e.bounds.width,height:e.bounds.height};"Line"!==(o=this.getAnnotationType(e.shapeAnnotationType,e.measureType))&&"Arrow"!==o&&"Distance"!==o&&"Perimeter"!==o||(s.lineHeadStartStyle=this.getArrowString(e.sourceDecoraterShapes),s.lineHeadEndStyle=this.getArrowString(e.taregetDecoraterShapes),s.borderDashArray=e.borderDashArray);var a=void 0;this.pdfViewer.enableShapeLabel?(a={fontColor:e.fontColor,fontSize:e.fontSize,fontFamily:e.fontFamily,opacity:e.labelOpacity,labelContent:e.labelContent,fillColor:e.labelFillColor},this.pdfViewer.fireAnnotationAdd(e.pageIndex,e.annotName,o,n,s,null,null,null,a)):this.pdfViewer.fireAnnotationAdd(e.pageIndex,e.annotName,o,n,s)}},e.prototype.triggerAnnotationUnselectEvent=function(){if(this.pdfViewer.selectedItems.annotations&&this.pdfViewer.selectedItems.annotations[0]){var e=this.pdfViewer.selectedItems.annotations[0];"HandWrittenSignature"!==e.shapeAnnotationType&&"SignatureText"!==e.shapeAnnotationType&&"SignatureImage"!==e.shapeAnnotationType&&"Path"!==e.shapeAnnotationType&&(this.pdfViewer.fireAnnotationUnSelect(e.annotName,e.pageIndex,e),this.pdfViewer.clearSelection(e.pageIndex))}},e.prototype.updateFontFamilyRenderSize=function(e,t){var i=this.freeTextAnnotationModule;i.inputBoxElement.style.fontFamily=t,i.autoFitFreeText();var n=this.pdfViewerBase.getZoomFactor(),o=(parseFloat(i.inputBoxElement.style.paddingLeft),e.bounds.height*n),s=parseFloat(i.inputBoxElement.style.width)-8;s/=n;var a=(o/=n)-e.bounds.height,r=void 0;a>0?r=(r=e.wrapper.offsetY+a/2)>0?r:void 0:(a=Math.abs(a),r=(r=e.wrapper.offsetY-a/2)>0?r:void 0);var l=s-e.bounds.width,d=void 0;l>0?d=(d=e.wrapper.offsetX+l/2)>0?d:void 0:(l=Math.abs(l),d=e.wrapper.offsetX-l/2),e.bounds.width=s,e.bounds.height=o,this.pdfViewer.nodePropertyChange(e,{fontFamily:t,bounds:{width:e.bounds.width,height:e.bounds.height,y:r,x:d}}),this.pdfViewer.renderSelector(e.pageIndex,this.pdfViewer.annotationSelectorSettings),this.modifyInCollections(e,"bounds")},e.prototype.updateCanvas=function(e,t,i,n){var o=this.pdfViewerBase.getZoomRatio();e.width=t*o,e.height=i*o,e.style.width=t+"px",e.style.height=i+"px",e.style.position="absolute",e.style.zIndex="1",this.pdfViewerBase.applyElementStyles(e,n)},e}(),Mb=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function a(e){try{l(n.next(e))}catch(t){s(t)}}function r(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){e.done?o(e.value):new i((function(t){t(e.value)})).then(a,r)}l((n=n.apply(e,t||[])).next())}))},Ib=function(e,t){var i,n,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(s){return function(r){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(r){s=[6,r],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,r])}}},Tb=function(){function e(e,t){this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.renderHyperlinkContent=function(e,t){if(this.pdfViewer.enableHyperlink){var i=e.hyperlinks,n=e.hyperlinkBounds;this.linkAnnotation=e.linkAnnotation,this.linkPage=e.linkPage,this.annotationY=e.annotationLocation,i&&i.length>0&&n.length>0&&this.renderWebLink(i,n,t),this.linkAnnotation&&this.linkAnnotation.length>0&&this.linkPage.length>0&&this.renderDocumentLink(this.linkAnnotation,this.linkPage,this.annotationY,t)}},e.prototype.disableHyperlinkNavigationUnderObjects=function(e,t,i){if(Sp(i,i.pdfViewer,t).length>0)t.target.classList.contains("e-pv-hyperlink")&&(e.style.cursor="move",e.style.pointerEvents="none",e.title="");else{var n=document.getElementsByClassName("e-pv-hyperlink");if(n&&n.length>0)for(var o=0;o<n.length;o++)"none"===n[o].style.pointerEvents&&(n[o].style.pointerEvents="all"),n[o].title||(n[o].title=n[o].href)}},e.prototype.renderWebLink=function(e,t,i){for(var n=this,o=this,s=!1,a=function(a){var l=we("a",{id:"weblinkdiv_"+a+"_"+i}),d=t[a];if((l=r.setHyperlinkProperties(l,d,i)).title=e[a],e[a]&&1===e[a].split("http").length){var h="http://"+e[a];l.setAttribute("href",h)}else l.setAttribute("href",e[a]);"CurrentTab"===r.pdfViewer.hyperlinkOpenState?(l.target="_self",l.onclick=function(t){return Mb(n,void 0,void 0,(function(){var i;return Ib(this,(function(n){switch(n.label){case 0:return s?[3,4]:(t.preventDefault(),o.pdfViewerBase.tool instanceof Op||o.pdfViewerBase.tool instanceof Pp?[2,!1]:[3,1]);case 1:return[4,o.pdfViewer.fireHyperlinkClick(e[a],l)];case 2:return(i=n.sent())&&(s=!0,l.click()),[2,i];case 3:return[3,5];case 4:return s=!1,[2,!0];case 5:return[2]}}))}))},l.onmouseover=function(){o.triggerHyperlinkEvent(l)}):"NewTab"===r.pdfViewer.hyperlinkOpenState?(l.target="_blank",l.onclick=function(t){return Mb(n,void 0,void 0,(function(){var i;return Ib(this,(function(n){switch(n.label){case 0:return s?[3,4]:(t.preventDefault(),o.pdfViewerBase.tool instanceof Op||o.pdfViewerBase.tool instanceof Pp?[2,!1]:[3,1]);case 1:return[4,o.pdfViewer.fireHyperlinkClick(e[a],l)];case 2:return(i=n.sent())&&(s=!0,l.click()),[2,i];case 3:return[3,5];case 4:return s=!1,[2,!0];case 5:return[2]}}))}))},l.onmouseover=function(){o.triggerHyperlinkEvent(l)}):"NewWindow"===r.pdfViewer.hyperlinkOpenState&&(l.onclick=function(t){return Mb(n,void 0,void 0,(function(){return Ib(this,(function(i){switch(i.label){case 0:return t.preventDefault(),o.pdfViewerBase.tool instanceof Op||o.pdfViewerBase.tool instanceof Pp?[2,!1]:[3,1];case 1:return[4,o.pdfViewer.fireHyperlinkClick(e[a],l)];case 2:return i.sent()&&window.open(l.href,"_blank","scrollbars=yes,resizable=yes"),[2,!1]}}))}))},l.onmouseover=function(){o.triggerHyperlinkEvent(l)}),document.getElementById(r.pdfViewer.element.id+"_pageDiv_"+i).appendChild(l)},r=this,l=0;l<e.length;l++)a(l)},e.prototype.triggerHyperlinkEvent=function(e){return!(this.pdfViewerBase.tool instanceof Op||this.pdfViewerBase.tool instanceof Pp)&&(this.pdfViewer.fireHyperlinkHover(e),!0)},e.prototype.renderDocumentLink=function(e,t,i,n){for(var o=this,s=function(s){var r=we("a",{id:"linkdiv_"+s+"_"+n}),l=e[s];if((r=a.setHyperlinkProperties(r,l,n)).setAttribute("href","javascript:void(0)"),void 0!==t[s]&&t[s]>=0){var d=a.pdfViewerBase.pageSize[n].height,h=void 0,p=void 0,c=a.pdfViewerBase.pageSize[t[s]];c&&(0!==i.length?(h=i[s],p=c.top*a.pdfViewerBase.getZoomFactor()+(d-h)*a.pdfViewerBase.getZoomFactor()):p=c.top*a.pdfViewerBase.getZoomFactor()),void 0!==p&&(r.name=p.toString(),r.setAttribute("aria-label",p.toString()),r.onclick=function(){return o.pdfViewerBase.tool instanceof Op||o.pdfViewerBase.tool instanceof Pp||(o.pdfViewerBase.viewerContainer.scrollTop=parseInt(r.name)),!1}),document.getElementById(a.pdfViewer.element.id+"_pageDiv_"+n).appendChild(r)}},a=this,r=0;r<e.length;r++)s(r)},e.prototype.setHyperlinkProperties=function(e,t,i){return e.className="e-pv-hyperlink",e.style.background="transparent",e.style.position="absolute",e.style.left=t.Left*this.pdfViewerBase.getZoomFactor()+"px",e.style.top=t.Top*this.pdfViewerBase.getZoomFactor()+"px",e.style.width=t.Width*this.pdfViewerBase.getZoomFactor()+"px",t.Height<0?(e.style.height=-t.Height*this.pdfViewerBase.getZoomFactor()+"px",e.style.top=(t.Top+t.Height)*this.pdfViewerBase.getZoomFactor()+"px"):e.style.height=(t.Height<0?-t.Height:t.Height)*this.pdfViewerBase.getZoomFactor()+"px",e.style.color="transparent",this.pdfViewerBase.applyElementStyles(e,i),e},e.prototype.modifyZindexForTextSelection=function(e,t){if(this.pdfViewerBase.pageCount>0){var i=this.pdfViewerBase.getElement("_pageDiv_"+e);if(i)for(var n=i.childNodes,o=0;o<n.length;o++){var s=n[o];"A"===s.tagName&&(t?s.classList.add("e-pv-onselection"):s.classList.remove("e-pv-onselection"))}}},e.prototype.modifyZindexForHyperlink=function(e,t){t?e.classList.add("e-pv-onselection"):e.classList.remove("e-pv-onselection")},e.prototype.destroy=function(){for(var e=0;e<this.pdfViewerBase.pageCount-1;e++){var t=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+e);if(t){var i=t.getElementsByTagName("a");if(0!==i.length)for(var n=i.length-1;n>=0;n--)i[n].parentNode.removeChild(i[n])}}},e.prototype.getModuleName=function(){return"LinkAnnotation"},e}(),Ab=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),kb=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Vb="e-treeview",Eb="e-control",Db="e-icon-collapsible",Nb="e-icon-expandable",Fb="e-list-item",Lb="e-list-text",Pb="e-list-parent",Ob="e-hover",Bb="e-active",zb="e-icons-spinner",jb="e-process",Rb="e-icons",_b="e-text-content",Hb="e-input",Wb="e-input-group",Ub="e-tree-input",qb="e-editing",Yb="e-rtl",Qb="e-interaction",Zb="e-droppable",Xb="e-dragging",Gb="e-sibling",Jb="e-drop-in",Kb="e-drop-next",$b="e-drop-out",eS="e-no-drop",tS="e-fullrow",iS="e-selected",nS="e-expanded",oS="e-node-collapsed",sS="e-disable",aS="e-check",rS="e-stop",lS="e-checkbox-wrapper",dS="e-frame",hS="e-ripple",pS="e-node-focus",cS="e-list-img",uS="e-animation-active",fS="e-disabled",mS="e-prevent",gS={treeRole:"group",itemRole:"treeitem",listRole:"group",itemText:"",wrapperRole:""},yS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ab(t,e),kb([Ge("child")],t.prototype,"child",void 0),kb([Ge([])],t.prototype,"dataSource",void 0),kb([Ge("expanded")],t.prototype,"expanded",void 0),kb([Ge("hasChildren")],t.prototype,"hasChildren",void 0),kb([Ge("htmlAttributes")],t.prototype,"htmlAttributes",void 0),kb([Ge("iconCss")],t.prototype,"iconCss",void 0),kb([Ge("id")],t.prototype,"id",void 0),kb([Ge("imageUrl")],t.prototype,"imageUrl",void 0),kb([Ge("isChecked")],t.prototype,"isChecked",void 0),kb([Ge("parentID")],t.prototype,"parentID",void 0),kb([Ge(null)],t.prototype,"query",void 0),kb([Ge("selectable")],t.prototype,"selectable",void 0),kb([Ge("selected")],t.prototype,"selected",void 0),kb([Ge(null)],t.prototype,"tableName",void 0),kb([Ge("text")],t.prototype,"text",void 0),kb([Ge("tooltip")],t.prototype,"tooltip",void 0),kb([Ge("navigateUrl")],t.prototype,"navigateUrl",void 0),t}(mt),vS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ab(t,e),kb([Ge("SlideDown")],t.prototype,"effect",void 0),kb([Ge(400)],t.prototype,"duration",void 0),kb([Ge("linear")],t.prototype,"easing",void 0),t}(mt),wS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ab(t,e),kb([Je({effect:"SlideUp",duration:400,easing:"linear"},vS)],t.prototype,"collapse",void 0),kb([Je({effect:"SlideDown",duration:400,easing:"linear"},vS)],t.prototype,"expand",void 0),t}(mt),bS=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.isRefreshed=!1,n.preventExpand=!1,n.checkedElement=[],n.disableNode=[],n.validArr=[],n.validNodes=[],n.expandChildren=[],n.isFieldChange=!1,n.changeDataSource=!1,n.hasTemplate=!1,n.isFirstRender=!1,n.isNodeDropped=!1,n.isInteracted=!1,n.isRightClick=!1,n.mouseDownStatus=!1,n}var i;return Ab(t,e),i=t,t.prototype.getModuleName=function(){return"treeview"},t.prototype.preRender=function(){var e=this;this.checkActionNodes=[],this.parentNodeCheck=[],this.dragStartAction=!1,this.isAnimate=!1,this.keyConfigs={escape:"escape",end:"end",enter:"enter",f2:"f2",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",ctrlA:"ctrl+A",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space",shiftSpace:"shift+space",ctrlSpace:"ctrl+space"},this.listBaseOption={expandCollapse:!0,showIcon:!0,expandIconClass:Nb,ariaAttributes:gS,expandIconPosition:"Left",itemCreated:function(t){e.beforeNodeCreate(t)},enableHtmlSanitizer:this.enableHtmlSanitizer,itemNavigable:this.fullRowNavigable},this.updateListProp(this.fields),this.aniObj=new st({}),this.treeList=[],this.isLoaded=!1,this.isInitalExpand=!1,this.expandChildren=[],this.index=0,this.setTouchClass(),m(this.selectedNodes)&&this.setProperties({selectedNodes:[]},!0),m(this.checkedNodes)&&this.setProperties({checkedNodes:[]},!0),m(this.expandedNodes)?this.setProperties({expandedNodes:[]},!0):this.isInitalExpand=!0},t.prototype.getPersistData=function(){return this.addOnPersist(["selectedNodes","checkedNodes","expandedNodes"])},t.prototype.render=function(){this.initialRender=!0,this.initialize(),this.setDataBinding(!1),this.setDisabledMode(),this.setExpandOnType(),this.disabled||this.setRipple(),this.wireEditingEvents(this.allowEditing),this.setDragAndDrop(this.allowDragAndDrop),this.disabled||this.wireEvents(),this.initialRender=!1,this.renderComplete()},t.prototype.initialize=function(){this.element.setAttribute("role","tree"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active"),this.setCssClass(null,this.cssClass),this.setEnableRtl(),this.setFullRow(this.fullRowSelect),this.setTextWrap(),this.nodeTemplateFn=this.templateComplier(this.nodeTemplate)},t.prototype.setDisabledMode=function(){this.disabled?this.element.classList.add(fS):this.element.classList.remove(fS)},t.prototype.setEnableRtl=function(){(this.enableRtl?be:Se)([this.element],Yb)},t.prototype.setRipple=function(){var e={selector:"."+tS+",."+_b,ignore:"."+_b+" > ."+Rb+",."+Wb+",."+Hb+", ."+lS};this.rippleFn=at(this.element,e);var t={selector:"."+_b+" > ."+Rb,isCenterRipple:!0};this.rippleIconFn=at(this.element,t)},t.prototype.setFullRow=function(e){(e?be:Se)([this.element],"e-fullrow-wrap")},t.prototype.setMultiSelect=function(e){var t=Ee("."+Pb,this.element);e?t.setAttribute("aria-multiselectable","true"):t.removeAttribute("aria-multiselectable")},t.prototype.templateComplier=function(e){if(e){this.hasTemplate=!0;this.element.classList.add(Qb);try{return document.querySelectorAll(e).length?Mi(document.querySelector(e).innerHTML.trim()):Mi(e)}catch(t){return Mi(e)}}this.element.classList.remove(Qb)},t.prototype.setDataBinding=function(e){var t=this;this.treeList.push("false"),this.fields.dataSource instanceof Fl?(this.isOffline=this.fields.dataSource.dataSource.offline,this.fields.dataSource.ready?this.fields.dataSource.ready.then((function(e){t.isOffline=t.fields.dataSource.dataSource.offline,t.fields.dataSource instanceof Fl&&t.isOffline&&(t.treeList.pop(),t.treeData=e.result,t.isNumberTypeId=t.getType(),t.setRootData(),t.renderItems(!0),0!==t.treeList.length||t.isLoaded||t.finalize())})).catch((function(e){t.trigger("actionFailure",{error:e})})):this.fields.dataSource.executeQuery(this.getQuery(this.fields)).then((function(i){t.treeList.pop(),t.treeData=i.result,t.isNumberTypeId=t.getType(),t.setRootData(),e&&(t.changeDataSource=!0),t.renderItems(!0),t.changeDataSource=!1,0!==t.treeList.length||t.isLoaded||t.finalize()})).catch((function(e){t.trigger("actionFailure",{error:e})}))):(this.treeList.pop(),m(this.fields.dataSource)?this.rootData=this.treeData=[]:(this.treeData=JSON.parse(JSON.stringify(this.fields.dataSource)),this.setRootData()),this.isNumberTypeId=this.getType(),this.renderItems(!1)),0!==this.treeList.length||this.isLoaded||this.finalize()},t.prototype.getQuery=function(e,t){void 0===t&&(t=null);var i,n=[];if(e.query)i=e.query.clone();else{i=new Bl;for(var o=this.getActualProperties(e),s=0,a=Object.keys(o);s<a.length;s++){var r=a[s];"dataSource"!==r&&"tableName"!==r&&"child"!==r&&e[r]&&"url"!==r&&-1===n.indexOf(e[r])&&n.push(e[r])}i.select(n),o.hasOwnProperty("tableName")&&i.from(e.tableName)}return bl.addSorting(this.sortOrder,e.text,i),m(t)||m(e.parentID)||i.where(e.parentID,"equal",this.isNumberTypeId?parseFloat(t):t),i},t.prototype.getType=function(){return!!this.treeData[0]&&"number"===typeof l(this.fields.id,this.treeData[0])},t.prototype.setRootData=function(){if(this.dataType=this.getDataType(this.treeData,this.fields),1===this.dataType){this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID);var e=this.getChildNodes(this.treeData,void 0,!0);m(e)?this.rootData=[]:this.rootData=e}else this.rootData=this.treeData},t.prototype.renderItems=function(e){this.listBaseOption.ariaAttributes.level=1;var t=this.getSortedData(this.rootData);this.ulElement=bl.createList(this.createElement,e?this.rootData:t,this.listBaseOption),this.element.appendChild(this.ulElement);var i=this.ulElement.querySelectorAll(".e-list-item");if(!1===this.loadOnDemand)for(var n=0;n<i.length;)this.renderChildNodes(i[n],!0,null,!0),n++;(1===De("."+Pb,this.element).length&&i&&0!==i.length||this.loadOnDemand)&&this.finalizeNode(this.element),this.parentNodeCheck=[],this.parentCheckData=[],this.updateCheckedStateFromDS(),this.autoCheck&&this.showCheckBox&&!this.isLoaded&&this.updateParentCheckState()},t.prototype.updateCheckedStateFromDS=function(e){if(this.validNodes=[],this.treeData&&this.showCheckBox){if(1===this.dataType){for(var t=this.fields,i=new Fl(this.treeData).executeLocal((new Bl).where(t.isChecked,"equal",!0,!1)),n=0;n<i.length;n++){var o=i[n][this.fields.id]?i[n][this.fields.id].toString():null;i[n][this.fields.parentID]&&i[n][this.fields.parentID].toString();if(-1!==this.checkedNodes.indexOf(o)||this.isLoaded||this.checkedNodes.push(o),i[n][this.fields.hasChildren])for(var s=i[n][this.fields.id],a=new Fl(this.treeData).executeLocal((new Bl).where(t.parentID,"equal",s,!1)),r=0;r<a.length;r++){var d=a[r][this.fields.id]?a[r][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(d)&&this.autoCheck&&this.checkedNodes.push(d)}}for(n=0;n<this.checkedNodes.length;n++){var h=this.fields,p=new Fl(this.treeData).executeLocal((new Bl).where(h.id,"equal",this.checkedNodes[n],!0));if(p[0]&&this.autoCheck&&(this.getCheckedNodeDetails(h,p),this.checkIndeterminateState(p[0])),p.length>0){var c=p[0][this.fields.id]?p[0][this.fields.id].toString():null;this.checkedNodes.indexOf(c)>-1&&-1===this.validNodes.indexOf(c)&&this.validNodes.push(c)}for(var u=new Fl(this.treeData).executeLocal((new Bl).where(h.parentID,"equal",this.checkedNodes[n],!0)),f=0;f<u.length;f++){c=u[f][this.fields.id]?u[f][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(c)&&this.autoCheck&&this.checkedNodes.push(c),this.checkedNodes.indexOf(c)>-1&&-1===this.validNodes.indexOf(c)&&this.validNodes.push(c)}}}else if(2===this.dataType||this.fields.dataSource instanceof Fl&&this.isOffline){for(f=0;f<this.treeData.length;f++){var m=this.treeData[f][this.fields.id]?this.treeData[f][this.fields.id].toString():"";this.treeData[f][this.fields.isChecked]&&!this.isLoaded&&-1===this.checkedNodes.indexOf(m)&&this.checkedNodes.push(m),this.checkedNodes.indexOf(m)>-1&&-1===this.validNodes.indexOf(m)&&this.validNodes.push(m);var g=l(this.fields.child.toString(),this.treeData[f]);g&&this.updateChildCheckState(g,this.treeData[f])}this.validNodes=this.enablePersistence?this.checkedNodes:this.validNodes}this.setProperties({checkedNodes:this.validNodes},!0)}},t.prototype.getCheckedNodeDetails=function(e,t){var i=t[0][this.fields.parentID]?t[0][this.fields.parentID].toString():null,n=0,o=this.element.querySelector('[data-uid="'+t[0][this.fields.id]+'"]'),s=this.element.querySelector('[data-uid="'+t[0][this.fields.parentID]+'"]');if(o||s){if(s){Ee("."+aS,s)||this.changeState(s,"indeterminate",null,!0,!0)}}else{this.parentNodeCheck.length;-1===this.parentNodeCheck.indexOf(i)&&this.parentNodeCheck.push(i);for(var a=this.getChildNodes(this.treeData,i),r=0;r<a.length;r++){var l=a[r][this.fields.id]?a[r][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(l)&&n++,n===a.length&&-1===this.checkedNodes.indexOf(i)&&this.checkedNodes.push(i)}var d=new Fl(this.treeData).executeLocal((new Bl).where(e.id,"equal",i,!0));this.getCheckedNodeDetails(e,d)}},t.prototype.updateParentCheckState=function(){for(var e,t=De("."+rS,this.element),i=0;i<t.length;i++){var n=Fe(t[i],"."+Fb),o=n.getAttribute("data-uid").toString(),s=0;if(e=1===this.dataType?new Fl(this.treeData).executeLocal((new Bl).where(this.fields.parentID,"equal",o,!0)):this.getChildNodes(this.treeData,o)){for(var a=0;a<e.length;a++){var r=e[a][this.fields.id].toString();-1!==this.checkedNodes.indexOf(r)&&s++}if(s===e.length){var l=n.getAttribute("data-uid");-1===this.checkedNodes.indexOf(l)&&this.checkedNodes.push(l),this.changeState(n,"check",null,!0,!0)}else 0===s&&0===this.checkedNodes.length&&this.changeState(n,"uncheck",null,!0,!0)}}},t.prototype.checkIndeterminateState=function(e){var t;if(t=1===this.dataType?this.element.querySelector('[data-uid="'+e[this.fields.parentID]+'"]'):this.element.querySelector('[data-uid="'+e[this.fields.id]+'"]'))"true"!==t.querySelector("."+lS).getAttribute("aria-checked")&&this.changeState(t,"indeterminate",null,!0,!0);else if(2===this.dataType){this.parentNodeCheck.length;-1===this.parentNodeCheck.indexOf(e[this.fields.id].toString())&&this.parentNodeCheck.push(e[this.fields.id].toString())}},t.prototype.updateChildCheckState=function(e,t){for(var i=0,n=t[this.fields.id]?t[this.fields.id].toString():"",o=0;o<e.length;o++){var s=e[o][this.fields.id]?e[o][this.fields.id].toString():"";e[o][this.fields.isChecked]&&!this.isLoaded&&-1===this.checkedNodes.indexOf(s)&&this.checkedNodes.push(s),-1!==this.checkedNodes.indexOf(n)&&-1===this.checkedNodes.indexOf(s)&&this.autoCheck&&this.checkedNodes.push(s),-1!==this.checkedNodes.indexOf(s)&&this.autoCheck&&i++,this.checkedNodes.indexOf(s)>-1&&-1===this.validNodes.indexOf(s)&&this.validNodes.push(s);var a=l(this.fields.child.toString(),e[o]);a&&a.length&&(-1===this.parentCheckData.indexOf(t)&&this.parentCheckData.push(t),this.updateChildCheckState(a,e[o])),i===e.length&&this.autoCheck&&-1===this.checkedNodes.indexOf(n)&&this.checkedNodes.push(n)}if(0!==i&&this.autoCheck){this.checkIndeterminateState(t);for(var r=0;r<this.parentCheckData.length;r++)t!==this.parentCheckData[r]&&this.parentCheckData[r]&&this.checkIndeterminateState(this.parentCheckData[r])}this.parentCheckData=[]},t.prototype.beforeNodeCreate=function(e){if(this.showCheckBox){var t=Ni(this.createElement,!0,{cssClass:this.touchClass});t.setAttribute("role","checkbox"),t.setAttribute("aria-label","checkbox");var i=Ee("div."+Rb,e.item),n=e.item.getAttribute("data-uid");e.item.childNodes[0].insertBefore(t,e.item.childNodes[0].childNodes[m(i)?0:1]);var o=l(e.fields.isChecked,e.curData);this.checkedNodes.indexOf(n)>-1?(Ee("."+dS,t).classList.add(aS),t.setAttribute("aria-checked","true"),this.addCheck(e.item)):m(o)||"true"!==o.toString()?t.setAttribute("aria-checked","false"):(Ee("."+dS,t).classList.add(aS),t.setAttribute("aria-checked","true"),this.addCheck(e.item));var s=Ee("."+dS,t);ye.add(s,"mousedown",this.frameMouseHandler,this),ye.add(s,"mouseup",this.frameMouseHandler,this)}this.fullRowSelect&&this.createFullRow(e.item),this.allowMultiSelection&&!e.item.classList.contains(iS)&&e.item.setAttribute("aria-selected","false");var a=e.fields;if(this.addActionClass(e,a.selected,iS),this.addActionClass(e,a.expanded,nS),e.item.setAttribute("tabindex","-1"),ye.add(e.item,"focus",this.focusIn,this),!m(this.nodeTemplateFn)){var r=e.item.querySelector("."+Lb),d=e.item.getAttribute("data-uid");r.innerHTML="",this.renderNodeTemplate(e.curData,r,d)}var h={node:e.item,nodeData:e.curData,text:e.text};this.isRefreshed||(this.trigger("drawNode",h),!1!==e.curData[this.fields.selectable]||this.showCheckBox||(e.item.classList.add(mS),e.item.firstElementChild.setAttribute("style","cursor: not-allowed")))},t.prototype.frameMouseHandler=function(e){Fi(e,Ee(".e-ripple-container",e.target.parentElement))},t.prototype.addActionClass=function(e,t,i){var n=l(t,e.curData);m(n)||"false"===n.toString()||e.item.classList.add(i)},t.prototype.getDataType=function(e,t){if(this.fields.dataSource instanceof Fl){for(var i=0;i<e.length;i++)if(this.isOffline){if("string"===typeof t.child&&m(l(t.child,e[i]))&&!m(l(t.parentID,e[i])))return 1}else if("string"===typeof t.child&&m(l(t.child,e[i])))return 1;return 2}i=0;for(var n=e.length;i<n;i++){if("string"===typeof t.child&&!m(l(t.child,e[i])))return 2;if(!m(l(t.parentID,e[i]))||!m(l(t.hasChildren,e[i])))return 1}return 1},t.prototype.getGroupedData=function(e,t){for(var i=(new Bl).group(t),n=bl.getDataSource(e,i),o=[],s=0;s<n.length;s++){var a=n[s].items;o.push(a)}return o},t.prototype.getSortedData=function(e){return e&&"None"!==this.sortOrder&&(e=bl.getDataSource(e,bl.addSorting(this.sortOrder,this.fields.text))),e},t.prototype.finalizeNode=function(e){for(var t=De("."+cS,e),i=0;i<t.length;i++)t[i].setAttribute("alt",cS);if(this.isLoaded){for(var n=De("."+iS,e),o=0;o<n.length;o++){this.selectNode(n[o],null);break}Se(n,iS)}for(var s=De("."+Fb+":not(."+nS+")",e),a=0;a<s.length;a++){var r=Ee("div."+Rb,s[a]);r&&r.classList.contains(Nb)&&this.disableExpandAttr(s[a])}var l=De("."+nS,e);if(!this.isInitalExpand)for(o=0;o<l.length;o++)this.renderChildNodes(l[o]);Se(l,nS),this.updateList(),this.isLoaded&&this.updateCheckedProp()},t.prototype.updateCheckedProp=function(){if(this.showCheckBox){var e=[].concat([],this.checkedNodes);this.setProperties({checkedNodes:e},!0)}},t.prototype.ensureIndeterminate=function(){if(this.autoCheck)for(var e=De("li",this.element),t=0;t<e.length;t++)e[t].classList.contains(Fb)&&(Ee("."+Pb,e[t])?this.ensureParentCheckState(e[t]):this.ensureChildCheckState(e[t]));else{var i=De("."+rS,this.element);for(t=0;t<i.length;t++)i[t].classList.remove(rS)}},t.prototype.ensureParentCheckState=function(e){if(!m(e)){if(e.classList.contains(Vb))return;var t=e;e.classList.contains(Fb)&&(t=Ee("."+Pb,e));var i=De("."+aS,t),n=De("."+rS,t),o=De("."+Fb,t),s=e.getElementsByClassName(lS)[0];o.length===i.length?this.changeState(s,"check",null,!0,!0):i.length>0||n.length>0?this.changeState(s,"indeterminate",null,!0,!0):0===i.length&&this.changeState(s,"uncheck",null,!0,!0);var a=Fe(e,"."+Pb);if(!m(a)){var r=Fe(a,"."+Fb);this.ensureParentCheckState(r)}}},t.prototype.ensureChildCheckState=function(e,t){if(!m(e)){var i=Ee("."+Pb,e),n=void 0;if(!m(i)){n=De("."+lS,i);for(var o=e.getElementsByClassName(dS)[0].classList.contains(aS),s=e.getElementsByClassName(dS)[0].classList.contains(rS),a=i.querySelectorAll("li"),r=(i.parentElement.getAttribute("aria-expanded"),void 0),d=0;d<n.length;d++){var h=a[d].getAttribute("data-uid");if(m(this.currentLoadData)||m(l(this.fields.isChecked,this.currentLoadData[d]))){var p=n[d].getElementsByClassName(dS)[0].classList.contains(aS);o||p&&!this.isLoaded||-1!==this.checkedNodes.indexOf(h)&&this.isLoaded&&(s||o)?r="check":a[d].classList.contains("e-has-child")&&!g(this.parentNodeCheck)&&this.autoCheck&&(o||s)&&-1!==this.parentNodeCheck.indexOf(h)||1===this.dataType&&!g(this.parentNodeCheck)&&this.autoCheck&&(o||s)&&-1!==this.parentNodeCheck.indexOf(h)?(r="indeterminate",this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(h),1)):r="uncheck"}else r=l(this.fields.isChecked,this.currentLoadData[d])?"check":"uncheck",-1!==this.ele&&(r=o?"check":"uncheck"),"uncheck"===r&&!g(this.parentNodeCheck)&&this.autoCheck&&-1!==this.parentNodeCheck.indexOf(h)&&(this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(h),1),r="indeterminate");this.changeState(n[d],r,t,!0,!0)}}this.autoCheck&&this.isLoaded&&this.updateParentCheckState()}},t.prototype.doCheckBoxAction=function(e,t){De("."+Fb,this.element);if(m(e)){var i=De("."+lS,this.element);if(this.loadOnDemand)for(var n=0;n<i.length;n++)this.updateFieldChecked(i[n],t),this.changeState(i[n],t?"check":"uncheck",null,null,null,t);else for(n=0;n<i.length;n++)this.updateFieldChecked(i[n],t),this.changeState(i[n],t?"check":"uncheck")}else for(var o=e.length;o>=0;o--){var s=void 0;if(m(s=1===e.length?this.getElement(e[o-1]):this.getElement(e[o]))){var a=void 0;if(""!==(a=e[o-e.length]?e[o-e.length].toString():e[o]?e[o].toString():null)&&t&&a)this.setValidCheckedNode(a),this.dynamicCheckState(a,t);else if(-1!==this.checkedNodes.indexOf(a)&&""!==a&&!t){this.checkedNodes.splice(this.checkedNodes.indexOf(a),1);var r=this.getChildNodes(this.treeData,a);if(r){for(var l=0;l<r.length;l++){var d=r[l][this.fields.id]?r[l][this.fields.id].toString():null;if(-1!==this.checkedNodes.indexOf(d)){this.checkedNodes.splice(this.checkedNodes.indexOf(d),1);var h=this.element.querySelector('[data-uid="'+d+'"]');h&&this.changeState(h,"uncheck",null)}}-1!==this.parentNodeCheck.indexOf(a)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(a),1)}a&&this.dynamicCheckState(a,t),this.updateField(this.treeData,this.fields,a,"isChecked",null)}}else{var p=Ee("."+Pb+" ."+lS,s);this.validateCheckNode(p,!t,s,null)}}if(e)for(var c=0;c<e.length;c++){a=e[c]?e[c].toString():"";t||this.updateField(this.treeData,this.fields,a,"isChecked",null)}this.autoCheck&&this.updateParentCheckState()},t.prototype.updateFieldChecked=function(e,t){var i=Fe(e,"."+Fb),n=i.getAttribute("data-uid");"true"!==this.getNodeData(i).isChecked||t||this.updateField(this.treeData,this.fields,n,"isChecked",null)},t.prototype.dynamicCheckState=function(e,t){if(1===this.dataType){var i=0,n=new Fl(this.treeData).executeLocal((new Bl).where(this.fields.id,"equal",e,!0));if(n[0]){var o=n[0][this.fields.id]?n[0][this.fields.id].toString():null,s=n[0][this.fields.parentID]?n[0][this.fields.parentID].toString():null,a=((c=this.element.querySelector('[data-uid="'+s+'"]'))&&Ee("."+rS,c),c?Ee("."+aS,c):null),r=this.element.querySelector('[data-uid="'+o+'"]'),d=this.getChildNodes(this.treeData,s);if(d)for(var h=0;h<d.length;h++){var p=d[h][this.fields.id]?d[h][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(p)&&i++}-1!==this.checkedNodes.indexOf(e)&&c&&o===e&&this.autoCheck?this.changeState(c,"indeterminate",null):-1===this.checkedNodes.indexOf(e)&&r&&o===e&&!t?this.changeState(r,"uncheck",null):-1!==this.checkedNodes.indexOf(e)&&r&&o===e&&t?this.changeState(r,"check",null):-1===this.checkedNodes.indexOf(e)&&!r&&c&&o===e&&this.autoCheck&&0!==i?this.changeState(c,"indeterminate",null):-1===this.checkedNodes.indexOf(e)&&!r&&c&&o===e&&this.autoCheck&&0===i?this.changeState(c,"uncheck",null):r||c||o!==e||!this.autoCheck||this.updateIndeterminate(e,t)}}else if(2===this.dataType||this.fields.dataSource instanceof Fl&&this.isOffline){o=void 0;var c=void 0;for(a=void 0,h=0;h<this.treeData.length;h++){o=this.treeData[h][this.fields.id]?this.treeData[h][this.fields.id].toString():"",a=(c=this.element.querySelector('[data-uid="'+o+'"]'))?Ee("."+aS,c):null,-1===this.checkedNodes.indexOf(o)&&c&&a&&!t&&this.changeState(c,"uncheck",null);var u=l(this.fields.child.toString(),this.treeData[h]);u&&this.updateChildIndeterminate(u,o,e,t,o)}}},t.prototype.updateIndeterminate=function(e,t){var i,n=this.getTreeData(e),o=0;1===this.dataType&&(i=n[0][this.fields.parentID]?n[0][this.fields.parentID].toString():null);var s=this.getChildNodes(this.treeData,i);if(s)for(var a=0;a<s.length;a++){var r=s[a][this.fields.id]?s[a][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(r)&&o++}var l=this.element.querySelector('[data-uid="'+i+'"]');l&&t||!t&&l&&-1===this.parentNodeCheck.indexOf(i)&&0!==o?this.changeState(l,"indeterminate",null):!t&&l&&-1===this.parentNodeCheck.indexOf(i)&&0===o?this.changeState(l,"uncheck",null):l||(t||-1!==this.checkedNodes.indexOf(i)||-1===this.parentNodeCheck.indexOf(i)?t&&-1===this.checkedNodes.indexOf(i)&&-1===this.parentNodeCheck.indexOf(i)?this.parentNodeCheck.push(i):t||-1===this.checkedNodes.indexOf(i)||-1!==this.parentNodeCheck.indexOf(i)||0===o||this.parentNodeCheck.push(i):this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(i),1),this.updateIndeterminate(i,t),-1===this.checkedNodes.indexOf(i)||t||this.checkedNodes.splice(this.checkedNodes.indexOf(i),1))},t.prototype.updateChildIndeterminate=function(e,t,i,n,o){for(var s=0,a=0;a<e.length;a++){var r=e[a][this.fields.id]?e[a][this.fields.id].toString():"";-1!==this.checkedNodes.indexOf(r)&&s++;var d=this.element.querySelector('[data-uid="'+t+'"]'),h=d?Ee("."+rS,d):null,p=d?Ee("."+aS,d):null,c=this.element.querySelector('[data-uid="'+r+'"]'),u=c?Ee("."+aS,c):null;if(-1!==this.checkedNodes.indexOf(i)&&d&&r===i&&this.autoCheck)this.changeState(d,"indeterminate",null);else if(-1!==this.checkedNodes.indexOf(i)||!d||c||r!==i||n){if(-1===this.checkedNodes.indexOf(i)&&c&&r===i&&!n)this.changeState(c,"uncheck",null);else if(-1===this.checkedNodes.indexOf(i)&&h&&r===i&&this.autoCheck&&0===s&&!n)h.classList.remove(rS);else if(-1===this.checkedNodes.indexOf(i)&&!c&&p&&r===i&&0===s)this.changeState(d,"uncheck",null);else if(-1===this.checkedNodes.indexOf(r)&&c&&u&&0===s)this.changeState(c,"uncheck",null);else if(!c&&!d&&r===i||-1!==this.parentNodeCheck.indexOf(t)&&this.autoCheck){var f=this.element.querySelector('[data-uid="'+o+'"]');n&&0!==s?this.changeState(f,"indeterminate",null):n&&s===e.length&&-1===this.checkedNodes.indexOf(t)?this.checkedNodes.push(t):n||0!==s||-1===this.parentNodeCheck.indexOf(t)||this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(t)),-1===this.parentNodeCheck.indexOf(t)&&this.parentNodeCheck.push(t)}}else this.autoCheck?this.changeState(d,"uncheck",null):0!==s?this.changeState(d,"indeterminate",null):this.changeState(d,"uncheck",null);var m=l(this.fields.child.toString(),e[a]);m&&this.updateChildIndeterminate(m,r,i,n,o)}},t.prototype.changeState=function(e,t,i,n,o,s){var a,r=this,l=Fe(e,"."+Fb);e===l&&(e=Ee("."+lS,l)),n?this.nodeCheckAction(e,t,l,a,i,n,o,s):(this.checkActionNodes=[],a=this.getCheckEvent(l,t,i),this.trigger("nodeChecking",a,(function(a){a.cancel||r.nodeCheckAction(e,t,l,a,i,n,o,s)})))},t.prototype.nodeCheckAction=function(e,t,i,n,o,s,a,r){var l,d=e.getElementsByClassName(dS)[0];if("check"!==t||d.classList.contains(aS)?"uncheck"===t&&(d.classList.contains(aS)||d.classList.contains(rS))?(Se([d],[aS,rS]),this.removeCheck(i),l="false"):"indeterminate"===t&&this.autoCheck&&(d.classList.remove(aS),d.classList.add(rS),this.removeCheck(i),l="mixed"):(d.classList.remove(rS),d.classList.add(aS),this.addCheck(i),l="true"),m(l="check"===t?"true":"uncheck"===t?"false":l)||e.setAttribute("aria-checked",l),a){var h=[].concat([],this.checkActionNodes);n=this.getCheckEvent(i,t,o),g(s)&&(n.data=h)}void 0!==r&&this.ensureStateChange(i,r),s||m(l)||(e.setAttribute("aria-checked",l),n.data[0].checked=l,this.trigger("nodeChecked",n),this.checkActionNodes=[])},t.prototype.addCheck=function(e){var t=e.getAttribute("data-uid");m(t)||-1!==this.checkedNodes.indexOf(t)||this.checkedNodes.push(t)},t.prototype.removeCheck=function(e){var t=this.checkedNodes.indexOf(e.getAttribute("data-uid"));t>-1&&this.checkedNodes.splice(t,1)},t.prototype.getCheckEvent=function(e,t,i){this.checkActionNodes.push(this.getNodeData(e));var n=this.checkActionNodes;return{action:t,cancel:!1,isInteracted:!m(i),node:e,data:n}},t.prototype.finalize=function(){var e=Ee("."+Pb,this.element);if(!m(e)){e.setAttribute("role",gS.treeRole),this.setMultiSelect(this.allowMultiSelection);var t=Ee("."+Fb,this.element);t&&(t.setAttribute("tabindex","0"),this.updateIdAttr(null,t)),this.allowTextWrap&&this.updateWrap(),this.renderReactTemplates(),this.hasPid=!!this.rootData[0]&&this.rootData[0].hasOwnProperty(this.fields.parentID),this.doExpandAction()}},t.prototype.setTextWrap=function(){(this.allowTextWrap?be:Se)([this.element],"e-text-wrap"),ge.isIE&&(this.allowTextWrap?be:Se)([this.element],"e-ie-wrap")},t.prototype.updateWrap=function(e){if(this.fullRowSelect)for(var t=e?De("."+Fb,e):this.liList,i=t.length,n=0;n<i;n++)this.calculateWrap(t[n])},t.prototype.calculateWrap=function(e){var t=Ee("."+tS,e);t&&t.nextElementSibling&&(t.style.height=this.allowTextWrap?t.nextElementSibling.offsetHeight+"px":"")},t.prototype.doExpandAction=function(){var e=this.expandedNodes;if(this.isInitalExpand&&e.length>0)if(this.setProperties({expandedNodes:[]},!0),this.fields.dataSource instanceof Fl)this.expandGivenNodes(e);else{for(var t=0;t<e.length;t++){var i=Ee('[data-uid="'+e[t]+'"]',this.element);if(m(i))e[t]&&-1===this.expandChildren.indexOf(e[t])&&this.expandChildren.push(e[t].toString());else{var n=Ee("."+Nb,Ee("."+_b,i));m(n)||this.expandAction(i,n,null)}}this.afterFinalized()}else this.afterFinalized()},t.prototype.expandGivenNodes=function(e){var t=this;this.expandCallback(e[this.index],(function(){t.index++,t.index<e.length?t.expandGivenNodes(e):t.afterFinalized()}))},t.prototype.expandCallback=function(e,t){var i=Ee('[data-uid="'+e+'"]',this.element);if(m(i))t();else{var n=Ee("."+Nb,Ee("."+_b,i));m(n)?t():this.expandAction(i,n,null,!1,t)}},t.prototype.afterFinalized=function(){if(this.doSelectionAction(),this.updateCheckedProp(),this.isAnimate=!0,this.isInitalExpand=!1,(!this.isLoaded||this.isFieldChange)&&!this.isNodeDropped){var e={data:this.treeData};this.trigger("dataBound",e)}this.isLoaded=!0,this.isNodeDropped=!1},t.prototype.doSelectionAction=function(){var e=De("."+iS,this.element),t=this.selectedNodes;if(t.length>0){this.setProperties({selectedNodes:[]},!0);for(var i=0;i<t.length;i++){var n=Ee('[data-uid="'+t[i]+'"]',this.element);if(n&&!n.classList.contains("e-active")?this.selectNode(n,null,!0):this.selectedNodes.push(t[i]),!this.allowMultiSelection)break}}else this.selectGivenNodes(e);Se(e,iS)},t.prototype.selectGivenNodes=function(e){for(var t=0;t<e.length&&(e[t].classList.contains("e-disable")||this.selectNode(e[t],null,!0),this.allowMultiSelection);t++);},t.prototype.clickHandler=function(e){var t=ge.isDevice?document.elementFromPoint(e.originalEvent.changedTouches[0].clientX,e.originalEvent.changedTouches[0].clientY):e.originalEvent.target;if(ye.remove(this.element,"contextmenu",this.preventContextMenu),t&&!this.dragStartAction){var i=t.classList,n=Fe(t,"."+Fb);if(n&&(!n.classList.contains(mS)||i.contains(Nb)||i.contains(Db))){if(3!==e.originalEvent.which){var o=Ee(".e-ripple-element",n),s=Ee("."+Rb,n);if(this.removeHover(),this.setFocusElement(n),this.showCheckBox&&!n.classList.contains("e-disable")){var a=Fe(t,"."+lS);if(!m(a)){var r=Ee("."+dS,a);return this.validateCheckNode(a,r.classList.contains(aS),n,e.originalEvent),void this.triggerClickEvent(e.originalEvent,n)}}i.contains(Nb)?this.expandAction(n,t,e):i.contains(Db)?this.collapseNode(n,t,e):o&&s?s.classList.contains(hS)&&s.classList.contains(Nb)?this.expandAction(n,s,e):s.classList.contains(hS)&&s.classList.contains(Db)?this.collapseNode(n,s,e):i.contains(Pb)||i.contains(Fb)||this.toggleSelect(n,e.originalEvent,!1):i.contains(Pb)||i.contains(Fb)||this.toggleSelect(n,e.originalEvent,!1)}3===e.originalEvent.which&&(this.isRightClick=!0),this.triggerClickEvent(e.originalEvent,n)}}},t.prototype.nodeCheckedEvent=function(e,t,i){Fe(e,"."+Fb);var n=this.getCheckEvent(e,t?"uncheck":"check",i);n.data=n.data.splice(0,n.data.length-1),this.trigger("nodeChecked",n)},t.prototype.triggerClickEvent=function(e,t){var i={event:e,node:t};this.trigger("nodeClicked",i)},t.prototype.expandNode=function(e,t,i){var n=this;if(this.renderReactTemplates(),t.classList.contains(zb)&&this.hideSpinner(t),this.initialRender||t.classList.add("interaction"),!0!==i||!0===i&&e.classList.contains("e-expanded")){if(!0!==this.preventExpand){Se([t],Nb),be([t],Db);var o=0,s=0,a=this,r=Ee("."+Pb,e),l=e;this.setHeight(l,r);var d=Ee("."+Fb+"."+Bb,e);this.isAnimate&&!this.isRefreshed?this.aniObj.animate(r,{name:this.animation.expand.effect,duration:this.animation.expand.duration,timingFunction:this.animation.expand.easing,begin:function(t){l.style.overflow="hidden",!m(d)&&d instanceof HTMLElement&&d.classList.add(uS),o=l.offsetHeight,s=Ee("."+_b,e).offsetHeight},progress:function(e){e.element.style.display="block",a.animateHeight(e,o,s)},end:function(e){e.element.style.display="block",!m(d)&&d instanceof HTMLElement&&d.classList.remove(uS),n.expandedNode(l,r,t)}}):this.expandedNode(l,r,t)}}else Ee("."+Pb,e).style.display="none",this.fields.dataSource instanceof Fl===!0&&(this.preventExpand=!1);this.initialRender&&t.classList.add("interaction")},t.prototype.expandedNode=function(e,t,i){t.style.display="block",e.style.display="block",e.style.overflow="",e.style.height="",Se([i],jb),this.addExpand(e),this.allowTextWrap&&this.isLoaded&&this.isFirstRender&&(this.updateWrap(e),this.isFirstRender=!1),this.isLoaded&&this.expandArgs&&!this.isRefreshed&&(this.expandArgs=this.getExpandEvent(e,null),this.expandArgs.isInteracted=this.isInteracted,this.trigger("nodeExpanded",this.expandArgs))},t.prototype.addExpand=function(e){e.setAttribute("aria-expanded","true"),Se([e],oS);var t=e.getAttribute("data-uid");m(t)||-1!==this.expandedNodes.indexOf(t)||this.expandedNodes.push(t)},t.prototype.collapseNode=function(e,t,i){var n,o=this;t.classList.contains(jb)||(be([t],jb),this.isLoaded?(n=this.getExpandEvent(e,i),this.isInteracted=n.isInteracted,this.trigger("nodeCollapsing",n,(function(i){i.cancel?Se([t],jb):o.nodeCollapseAction(e,t,i)}))):this.nodeCollapseAction(e,t,n))},t.prototype.nodeCollapseAction=function(e,t,i){var n=this;Se([t],Db),be([t],Nb);var o=0,s=0,a=this,r=Ee("."+Pb,e),l=e,d=Ee("."+Fb+"."+Bb,e);this.isAnimate?this.aniObj.animate(r,{name:this.animation.collapse.effect,duration:this.animation.collapse.duration,timingFunction:this.animation.collapse.easing,begin:function(t){l.style.overflow="hidden",!m(d)&&d instanceof HTMLElement&&d.classList.add(uS),o=Ee("."+_b,e).offsetHeight,s=l.offsetHeight},progress:function(e){a.animateHeight(e,o,s)},end:function(e){e.element.style.display="none",!m(d)&&d instanceof HTMLElement&&d.classList.remove(uS),n.collapsedNode(l,r,t,i)}}):this.collapsedNode(l,r,t,i)},t.prototype.collapsedNode=function(e,t,i,n){t.style.display="none",e.style.overflow="",e.style.height="",Se([i],jb),this.removeExpand(e),this.isLoaded&&((n=this.getExpandEvent(e,null)).isInteracted=this.isInteracted,this.trigger("nodeCollapsed",n))},t.prototype.removeExpand=function(e,t){t?e.removeAttribute("aria-expanded"):this.disableExpandAttr(e);var i=this.expandedNodes.indexOf(e.getAttribute("data-uid"));i>-1&&this.expandedNodes.splice(i,1)},t.prototype.disableExpandAttr=function(e){e.setAttribute("aria-expanded","false"),be([e],oS)},t.prototype.setHeight=function(e,t){t.style.display="block",t.style.visibility="hidden",e.style.height=e.offsetHeight+"px",t.style.display="none",t.style.visibility=""},t.prototype.animateHeight=function(e,t,i){var n=(i-t)*((e.duration-e.timeStamp)/e.duration)+t;e.element.parentElement.style.height=n+"px"},t.prototype.renderChildNodes=function(e,t,i,n){var o,s=this,a=Ee("div."+Rb,e);if(!m(a))if(this.showSpinner(a),this.fields.dataSource instanceof Fl){var r=this.parents(e,"."+Pb).length,l=this.getChildFields(this.fields,r,1);if(m(l)||m(l.dataSource))return Ae(a),void this.removeExpand(e,!0);this.treeList.push("false"),this.fields.dataSource instanceof Fl&&this.isOffline?(this.treeList.pop(),o=this.getChildNodes(this.treeData,e.getAttribute("data-uid")),this.loadChild(o,l,a,e,t,i,n)):l.dataSource.executeQuery(this.getQuery(l,e.getAttribute("data-uid"))).then((function(r){s.treeList.pop(),o=r.result,1===s.dataType&&(s.dataType=2),s.loadChild(o,l,a,e,t,i,n)})).catch((function(e){s.trigger("actionFailure",{error:e})}))}else{if(o=this.getChildNodes(this.treeData,e.getAttribute("data-uid")),this.currentLoadData=this.getSortedData(o),m(o)||0===o.length)return Ae(a),void this.removeExpand(e,!0);this.listBaseOption.ariaAttributes.level=parseFloat(e.getAttribute("aria-level"))+1,e.appendChild(bl.createList(this.createElement,this.currentLoadData,this.listBaseOption)),this.expandNode(e,a,n),this.setSelectionForChildNodes(o),this.ensureCheckNode(e),this.finalizeNode(e),this.disableTreeNodes(o),this.renderSubChild(e,t,n)}},t.prototype.loadChild=function(e,t,i,n,o,s,a){if(this.currentLoadData=e,m(e)||0===e.length)Ae(i),this.removeExpand(n,!0);else{if(this.updateListProp(t),this.fields.dataSource instanceof Fl&&!this.isOffline){var r=n.getAttribute("data-uid");d("child",e,this.getNodeObject(r))}this.listBaseOption.ariaAttributes.level=parseFloat(n.getAttribute("aria-level"))+1,n.appendChild(bl.createList(this.createElement,e,this.listBaseOption)),this.expandNode(n,i,a),this.setSelectionForChildNodes(e),this.ensureCheckNode(n),this.finalizeNode(n),this.disableTreeNodes(e),this.renderSubChild(n,o,a)}s&&s(),0!==this.treeList.length||this.isLoaded||this.finalize()},t.prototype.disableTreeNodes=function(e){for(var t=0;t<e.length;){var i=e[t][this.fields.id]?e[t][this.fields.id].toString():null;void 0!==this.disableNode&&-1!==this.disableNode.indexOf(i)&&this.doDisableAction([i]),t++}},t.prototype.setSelectionForChildNodes=function(e){var t;for(t=0;t<e.length;t++){var i=e[t][this.fields.id]?e[t][this.fields.id].toString():null;void 0!==this.selectedNodes&&-1!==this.selectedNodes.indexOf(i)&&this.doSelectionAction()}},t.prototype.ensureCheckNode=function(e){this.showCheckBox&&(this.ele=this.checkedElement?this.checkedElement.indexOf(e.getAttribute("data-uid")):null,this.autoCheck&&(this.ensureChildCheckState(e),this.ensureParentCheckState(e))),this.currentLoadData=null},t.prototype.getFields=function(e,t,i){return t===i?e:this.getFields(this.getChildMapper(e),t,i+1)},t.prototype.getChildFields=function(e,t,i){return t===i?this.getChildMapper(e):this.getChildFields(this.getChildMapper(e),t,i+1)},t.prototype.getChildMapper=function(e){return"string"===typeof e.child||m(e.child)?e:e.child},t.prototype.getChildNodes=function(e,t,i){var n,o=this;if(void 0===i&&(i=!1),m(e))return n;if(1===this.dataType)return this.getChildGroup(this.groupedData,t,i);if("string"===typeof this.fields.child){var s=e.findIndex((function(e){return e[o.fields.id]&&e[o.fields.id].toString()===t}));if(-1!==s)return l(this.fields.child,e[s]);if(-1===s)for(var a=0,r=e.length;a<r;a++){var d=l(this.fields.child,e[a]),h=m(d)?-1:d.findIndex((function(e){return e[o.fields.id]&&e[o.fields.id].toString()===t}));if(-1!==h)return l(this.fields.child,d[h]);if(!m(d)&&void 0!==(n=this.getChildNodes(d,t)))break}}return n},t.prototype.getChildGroup=function(e,t,i){var n;if(m(e))return n;for(var o=0,s=e.length;o<s;o++){if(m(e[o][0])||m(l(this.fields.parentID,e[o][0])))return i?e[o]:[];if(l(this.fields.parentID,e[o][0]).toString()===t)return e[o]}return n},t.prototype.renderSubChild=function(e,t,i){if(t)for(var n=De("."+Nb,e),o=0,s=n.length;o<s;o++){var a=n[o];if(e.querySelector(".e-icons")!==n[o]){var r=Fe(a,"."+Fb);this.expandArgs=this.getExpandEvent(r,null),!0!==i&&this.trigger("nodeExpanding",this.expandArgs),this.renderChildNodes(r,t,null,i)}}},t.prototype.toggleSelect=function(e,t,i){e.classList.contains("e-disable")||(this.allowMultiSelection&&(t&&t.ctrlKey||i)&&this.isActive(e)?this.unselectNode(e,t):this.selectNode(e,t,i))},t.prototype.isActive=function(e){return!!e.classList.contains(Bb)},t.prototype.selectNode=function(e,t,i){var n,o=this;m(e)||!this.allowMultiSelection&&this.isActive(e)&&!m(t)?this.setFocusElement(e):this.isLoaded?(n=this.getSelectEvent(e,"select",t),this.trigger("nodeSelecting",n,(function(n){n.cancel||n.node.classList.contains(mS)||o.nodeSelectAction(e,t,n,i)}))):this.nodeSelectAction(e,t,n,i)},t.prototype.nodeSelectAction=function(e,t,i,n){if(this.allowMultiSelection&&(n||t&&(!t||t.ctrlKey))||this.removeSelectAll(),this.allowMultiSelection&&t&&t.shiftKey){this.startNode||(this.startNode=e);var o=this.liList.indexOf(this.startNode),s=this.liList.indexOf(e);if(o>s){var a=o;o=s,s=a}for(var r=o;r<=s;r++){var l=this.liList[r];xe(l)&&!l.classList.contains("e-disable")&&this.addSelect(l)}}else this.startNode=e,this.addSelect(e);this.isLoaded&&(i.nodeData=this.getNodeData(e),this.trigger("nodeSelected",i)),this.isRightClick=!1},t.prototype.unselectNode=function(e,t){var i,n=this;this.isLoaded?(i=this.getSelectEvent(e,"un-select",t),this.trigger("nodeSelecting",i,(function(t){t.cancel||n.nodeUnselectAction(e,t)}))):this.nodeUnselectAction(e,i)},t.prototype.nodeUnselectAction=function(e,t){this.removeSelect(e),this.setFocusElement(e),this.isLoaded&&(t.nodeData=this.getNodeData(e),this.trigger("nodeSelected",t))},t.prototype.setFocusElement=function(e){if(!m(e)){var t=this.getFocusedNode();t&&(Se([t],pS),t.setAttribute("tabindex","-1")),be([e],pS),e.setAttribute("tabindex","0"),ye.add(e,"blur",this.focusOut,this),this.updateIdAttr(t,e)}},t.prototype.addSelect=function(e){e.setAttribute("aria-selected","true"),be([e],Bb);var t=e.getAttribute("data-uid");m(t)||-1!==this.selectedNodes.indexOf(t)||this.selectedNodes.push(t)},t.prototype.removeSelect=function(e){this.allowMultiSelection?e.setAttribute("aria-selected","false"):e.removeAttribute("aria-selected"),Se([e],Bb);var t=this.selectedNodes.indexOf(e.getAttribute("data-uid"));t>-1&&this.selectedNodes.splice(t,1)},t.prototype.removeSelectAll=function(){for(var e=this.element.querySelectorAll("."+Bb),t=0,i=e;t<i.length;t++){var n=i[t];this.allowMultiSelection?n.setAttribute("aria-selected","false"):n.removeAttribute("aria-selected")}Se(e,Bb),this.setProperties({selectedNodes:[]},!0)},t.prototype.getSelectEvent=function(e,t,i){var n=this.getNodeData(e);return{action:t,cancel:!1,isInteracted:!m(i),node:e,nodeData:n}},t.prototype.setExpandOnType=function(){this.expandOnType="Auto"===this.expandOn?ge.isDevice?"Click":"DblClick":this.expandOn},t.prototype.expandHandler=function(e){var t=e.originalEvent.target;!t||t.classList.contains(Hb)||t.classList.contains(Vb)||t.classList.contains(Pb)||t.classList.contains(Fb)||t.classList.contains(Rb)||this.showCheckBox&&Fe(t,"."+lS)||this.expandCollapseAction(Fe(t,"."+Fb),e)},t.prototype.expandCollapseAction=function(e,t){var i=Ee("div."+Rb,e);if(i&&!i.classList.contains(jb)){var n=i.classList;n.contains(Nb)?this.expandAction(e,i,t):n.contains(Db)&&this.collapseNode(e,i,t)}},t.prototype.expandAction=function(e,t,i,n,o){var s=this;t.classList.contains(jb)||(be([t],jb),this.isLoaded&&!this.isRefreshed?(this.expandArgs=this.getExpandEvent(e,i),this.isInteracted=this.expandArgs.isInteracted,this.trigger("nodeExpanding",this.expandArgs,(function(i){i.cancel?Se([t],jb):s.nodeExpandAction(e,t,n,o)}))):this.nodeExpandAction(e,t,n,o))},t.prototype.nodeExpandAction=function(e,t,i,n){var o=Ee("."+Pb,e);if(o&&"UL"===o.nodeName)this.expandNode(e,t);else{this.isFirstRender=!0,this.renderChildNodes(e,i,n);for(var s=De("."+Fb,e),a=0;a<s.length;a++){var r=this.getId(s[a]);if(-1!==this.expandChildren.indexOf(r)&&void 0!==this.expandChildren){var l=Ee("."+Nb,Ee("."+_b,s[a]));m(l)||this.expandAction(s[a],l,null),this.expandChildren.splice(this.expandChildren.indexOf(r),1)}}}},t.prototype.keyActionHandler=function(e){var t=this,i=e.target,n=this.getFocusedNode();if(i&&i.classList.contains(Hb)){var o=i;"enter"===e.action?o.blur():"escape"===e.action&&(o.value=this.oldText,o.blur())}else{e.preventDefault();var s={cancel:!1,event:e,node:n};this.trigger("keyPress",s,(function(i){if(!i.cancel)switch(e.action){case"space":t.showCheckBox?t.checkNode(e):t.toggleSelect(n,e);break;case"moveRight":t.openNode(!t.enableRtl,e);break;case"moveLeft":t.openNode(!!t.enableRtl,e);break;case"shiftDown":t.shiftKeySelect(!0,e);break;case"moveDown":case"ctrlDown":case"csDown":t.navigateNode(!0);break;case"shiftUp":t.shiftKeySelect(!1,e);break;case"moveUp":case"ctrlUp":case"csUp":t.navigateNode(!1);break;case"home":case"shiftHome":case"ctrlHome":case"csHome":t.navigateRootNode(!0);break;case"end":case"shiftEnd":case"ctrlEnd":case"csEnd":t.navigateRootNode(!1);break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":case"shiftSpace":case"ctrlSpace":t.toggleSelect(n,e);break;case"f2":t.allowEditing&&!n.classList.contains("e-disable")&&t.createTextbox(n,e);break;case"ctrlA":if(t.allowMultiSelection){var o=De("."+Fb+":not(."+Bb+")",t.element);t.selectGivenNodes(o)}}}))}},t.prototype.navigateToFocus=function(e){var t=this.getFocusedNode().querySelector("."+_b),i=t.getBoundingClientRect(),n=this.getScrollParent(this.element);if(!m(n)){var o=n.getBoundingClientRect();i.bottom>o.bottom?n.scrollTop+=i.bottom-o.bottom:i.top<o.top&&(n.scrollTop-=o.top-i.top)}this.isVisibleInViewport(t)||t.scrollIntoView(e)},t.prototype.isVisibleInViewport=function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},t.prototype.getScrollParent=function(e){return m(e)?null:e.scrollHeight>e.clientHeight?e:this.getScrollParent(e.parentElement)},t.prototype.shiftKeySelect=function(e,t){if(this.allowMultiSelection){var i=this.getFocusedNode(),n=e?this.getNextNode(i):this.getPrevNode(i);this.removeHover(),this.setFocusElement(n),this.toggleSelect(n,t,!1),this.navigateToFocus(!e)}else this.navigateNode(e)},t.prototype.checkNode=function(e){var t=this.getFocusedNode(),i=Ee("."+lS,t),n=Ee(" ."+dS,i).classList.contains(aS);t.classList.contains("e-disable")||0==t.getElementsByClassName("e-checkbox-disabled").length&&this.validateCheckNode(i,n,t,e)},t.prototype.validateCheckNode=function(e,t,i,n){var o=this,s=Fe(e,"."+Fb);this.checkActionNodes=[];var a=t?"false":"true";m(a)||e.setAttribute("aria-checked",a);var r=this.getCheckEvent(s,t?"uncheck":"check",n);this.trigger("nodeChecking",r,(function(s){s.cancel||o.nodeCheckingAction(e,t,i,s,n)}))},t.prototype.nodeCheckingAction=function(e,t,i,n,o){if(-1===this.checkedElement.indexOf(i.getAttribute("data-uid"))&&(this.checkedElement.push(i.getAttribute("data-uid")),this.autoCheck)){var s=this.getChildNodes(this.treeData,i.getAttribute("data-uid"));null!==s?this.allCheckNode(s,this.checkedElement,null,null,!1):s=null}if(this.changeState(e,t?"uncheck":"check",o,!0),this.autoCheck){this.ensureChildCheckState(i),this.ensureParentCheckState(Fe(Fe(i,"."+Pb),"."+Fb));var a=void 0;"check"===n.action?a=!0:"uncheck"===n.action&&(a=!1),this.ensureStateChange(i,a)}this.nodeCheckedEvent(e,t,o)},t.prototype.ensureStateChange=function(e,t){var i=Ee("."+Pb,e),n=e.getAttribute("data-uid"),o=this.fields;if(1===this.dataType&&this.autoCheck)for(var s=new Fl(this.treeData).executeLocal((new Bl).where(o.parentID,"equal",n,!0)),a=0;a<s.length;a++){var r=s[a][this.fields.id]?s[a][this.fields.id].toString():null,l=s[a][this.fields.isChecked]?s[a][this.fields.isChecked].toString():null;if(-1!==this.checkedNodes.indexOf(n)&&-1===this.checkedNodes.indexOf(r)){this.checkedNodes.push(r);var d=this.getChildNodes(this.treeData,r);this.getChildItems(d,t),-1!==this.parentNodeCheck.indexOf(r)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(r),1)}else if(-1===this.checkedNodes.indexOf(n)&&null===i&&-1!==this.checkedNodes.indexOf(r)){if(this.checkedNodes.splice(this.checkedNodes.indexOf(r),1),"true"===l&&this.updateField(this.treeData,this.fields,r,"isChecked",null),-1===this.checkedNodes.indexOf(n)&&null===i||-1!==this.parentNodeCheck.indexOf(r)){var h=this.getChildNodes(this.treeData,r);this.getChildItems(h,t),-1!==this.parentNodeCheck.indexOf(r)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(r),1)}}else{d=this.getChildNodes(this.treeData,r);this.getChildItems(d,t)}}else if(1!==this.dataType||this.autoCheck){(d=this.getChildNodes(this.treeData,n))&&this.childStateChange(d,n,i,t)}else if(t)for(a=0;a<this.treeData.length;a++){var p=this.treeData[a][this.fields.id]?this.treeData[a][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(p)&&this.checkedNodes.push(p)}else{for(var c=new Fl(this.treeData).executeLocal((new Bl).where(o.isChecked,"equal",!0,!1)),a=0;a<c.length;a++){var u=c[a][this.fields.id]?c[a][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(u)&&this.checkedNodes.splice(this.checkedNodes.indexOf(u),1),this.updateField(this.treeData,this.fields,u,"isChecked",null)}this.checkedNodes=[]}},t.prototype.getChildItems=function(e,t){for(var i=0;i<e.length;i++){var n=e[i][this.fields.id]?e[i][this.fields.id].toString():null,o=e[i][this.fields.isChecked]?e[i][this.fields.isChecked].toString():null;-1===this.checkedNodes.indexOf(n)||t||this.checkedNodes.splice(this.checkedNodes.indexOf(n),1),-1===this.checkedNodes.indexOf(n)&&t&&this.checkedNodes.push(n),"true"!==o||t||this.updateField(this.treeData,this.fields,n,"isChecked",null);var s=this.getChildNodes(this.treeData,n);s.length>0&&this.getChildItems(s,t)}},t.prototype.childStateChange=function(e,t,i,n){for(var o=0;o<e.length;o++){var s=e[o][this.fields.id]?e[o][this.fields.id].toString():"",a=e[o][this.fields.isChecked]?e[o][this.fields.isChecked].toString():null;this.autoCheck?-1!==this.checkedNodes.indexOf(t)&&-1===this.checkedNodes.indexOf(s)?(this.checkedNodes.push(s),-1!==this.parentNodeCheck.indexOf(s)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(s),1)):-1!==this.checkedNodes.indexOf(t)||-1===this.checkedNodes.indexOf(s)||n||(this.checkedNodes.splice(this.checkedNodes.indexOf(s),1),"true"===a&&this.updateField(this.treeData,this.fields,s,"isChecked",null)):this.autoCheck||(n?-1===this.checkedNodes.indexOf(s)&&this.checkedNodes.push(s):(-1!==this.checkedNodes.indexOf(s)&&this.checkedNodes.splice(this.checkedNodes.indexOf(s),1),this.updateField(this.treeData,this.fields,s,"isChecked",null),this.checkedNodes=[]));var r=this.getChildNodes([e[o]],s);r&&this.childStateChange(r,t,i,n)}},t.prototype.allCheckNode=function(e,t,i,n,o){if(e)for(var s=0;s<e.length;s++){var a=l(this.fields.id,e[s]),r=this.element.querySelector('[data-uid="'+a+'"]');!1!==o&&-1===this.checkedElement.indexOf(a.toString())&&(null===r&&!m(e[s][this.fields.isChecked])&&-1===t.indexOf(a.toString())||0===n||2===i)&&(!1!==e[s][this.fields.isChecked]||2===i?t.push(a.toString()):n=null,n=!1!==e[s][this.fields.isChecked]||2===i?0:null),-1===t.indexOf(a.toString())&&m(i)&&t.push(a.toString());var d=l(this.fields.child.toString(),e[s]);if(!0===l(this.fields.hasChildren,e[s])||d){var h=l(this.fields.id,e[s]),p=void 0;(p=1===this.dataType?this.getChildNodes(this.treeData,h.toString()):d)&&(m(o)?this.allCheckNode(p,t,i,n):this.allCheckNode(p,t,i,n,o),n=null)}n=null}},t.prototype.openNode=function(e,t){var i=this.getFocusedNode(),n=Ee("div."+Rb,i);if(e){if(!n)return;n.classList.contains(Nb)?this.expandAction(i,n,t):this.focusNextNode(i,!0)}else if(n&&n.classList.contains(Db))this.collapseNode(i,n,t);else{var o=Fe(Fe(i,"."+Pb),"."+Fb);if(!o)return;o.classList.contains("e-disable")||(this.setFocus(i,o),this.navigateToFocus(!0))}},t.prototype.navigateNode=function(e){var t=this.getFocusedNode();this.focusNextNode(t,e)},t.prototype.navigateRootNode=function(e){var t=this.getFocusedNode(),i=e?this.getRootNode():this.getEndNode();i.classList.contains("e-disable")||(this.setFocus(t,i),this.navigateToFocus(e))},t.prototype.getFocusedNode=function(){var e,t=Ee("."+Fb+'[tabindex="0"]',this.element);return m(t)&&(e=Ee("."+Fb,this.element)),m(t)?m(e)?this.element.firstElementChild:e:t},t.prototype.focusNextNode=function(e,t){var i=t?this.getNextNode(e):this.getPrevNode(e);if(this.setFocus(e,i),this.navigateToFocus(!t),i.classList.contains("e-disable")){var n=i.lastChild;null==i.previousSibling&&i.classList.contains("e-level-1")?this.focusNextNode(i,!0):null==i.nextSibling&&i.classList.contains("e-node-collapsed")||null==i.nextSibling&&n.classList.contains(_b)?this.focusNextNode(i,!1):this.focusNextNode(i,t)}},t.prototype.getNextNode=function(e){var t,i=this.liList.indexOf(e);do{if(i++,m(t=this.liList[i]))return e}while(!xe(t));return t},t.prototype.getPrevNode=function(e){var t,i=this.liList.indexOf(e);do{if(i--,m(t=this.liList[i]))return e}while(!xe(t));return t},t.prototype.getRootNode=function(){var e,t=0;do{e=this.liList[t],t++}while(!xe(e));return e},t.prototype.getEndNode=function(){var e,t=this.liList.length-1;do{e=this.liList[t],t--}while(!xe(e));return e},t.prototype.setFocus=function(e,t){Se([e],[Ob,pS]),e.setAttribute("tabindex","-1"),t.classList.contains("e-disable")||t.classList.contains(mS)||(be([t],[Ob,pS]),t.setAttribute("tabindex","0"),t.focus(),ye.add(t,"blur",this.focusOut,this),this.updateIdAttr(e,t))},t.prototype.updateIdAttr=function(e,t){this.element.removeAttribute("aria-activedescendant"),e&&e.removeAttribute("id"),t.setAttribute("id",this.element.id+"_active"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active")},t.prototype.focusIn=function(){if(!this.mouseDownStatus){var e=this.getFocusedNode();e.setAttribute("tabindex","0"),be([e],[Ob,pS]),ye.add(e,"blur",this.focusOut,this)}this.mouseDownStatus=!1},t.prototype.focusOut=function(e){var t=this.getFocusedNode();e.target==t&&(Se([t],[Ob,pS]),ye.remove(t,"blur",this.focusOut))},t.prototype.onMouseOver=function(e){var t=e.target,i=t.classList,n=Fe(t,"."+Fb);!n||i.contains(Pb)||i.contains(Fb)?this.removeHover():n&&!n.classList.contains("e-disable")&&this.setHover(n)},t.prototype.setHover=function(e){e.classList.contains(Ob)||e.classList.contains(mS)||(this.removeHover(),be([e],Ob))},t.prototype.onMouseLeave=function(e){this.removeHover()},t.prototype.removeHover=function(){var e=De("."+Ob,this.element);e&&e.length&&Se(e,Ob)},t.prototype.getNodeData=function(e,t){if(!m(e)&&e.classList.contains(Fb)&&!m(Fe(e,"."+Eb))&&Fe(e,"."+Eb).classList.contains(Vb)){var i=e.getAttribute("data-uid"),n=this.getText(e,t),o=Fe(e.parentNode,"."+Fb),s=o?o.getAttribute("data-uid"):null,a=e.classList.contains(Bb),r=!e.classList.contains(mS),l="true"===e.getAttribute("aria-expanded"),d=null!==e.getAttribute("aria-expanded")||null!=(Ee("."+Nb,e)||Ee("."+Db,e)),h=null,p=Ee("."+lS,e);return this.showCheckBox&&p&&(h=p.getAttribute("aria-checked")),{id:i,text:n,parentID:s,selected:a,selectable:r,expanded:l,isChecked:h,hasChildren:d}}return{id:"",text:"",parentID:"",selected:!1,expanded:!1,isChecked:"",hasChildren:!1}},t.prototype.getText=function(e,t){if(t){var i=this.getNodeObject(e.getAttribute("data-uid")),n=parseFloat(e.getAttribute("aria-level"));return l(this.getFields(this.fields,n,1).text,i)}return Ee("."+Lb,e).textContent},t.prototype.getExpandEvent=function(e,t){var i=this.getNodeData(e);return{cancel:!1,isInteracted:!m(t),node:e,nodeData:i,event:t}},t.prototype.renderNodeTemplate=function(e,t,i){var n=this.nodeTemplateFn(e,this,"nodeTemplate"+i,this.element.id+"nodeTemplate",this.isStringTemplate,void 0,t,this.root);n&&Ie(n=Array.prototype.slice.call(n),t)},t.prototype.destroyTemplate=function(e){this.clearTemplate(["nodeTemplate"+e.getAttribute("data-uid")])},t.prototype.reRenderNodes=function(){this.updateListProp(this.fields),ge.isIE?(this.ulElement=this.element.querySelector(".e-list-parent.e-ul"),this.ulElement.parentElement.removeChild(this.ulElement)):this.element.innerHTML="",m(this.nodeTemplateFn)||this.clearTemplate(),this.setTouchClass(),this.setProperties({selectedNodes:[],checkedNodes:[],expandedNodes:[]},!0),this.checkedElement=[],this.isLoaded=!1,this.setDataBinding(!0)},t.prototype.setCssClass=function(e,t){m(e)||""===e||Se([this.element],e.split(" ")),m(t)||""===t||be([this.element],t.split(" "))},t.prototype.editingHandler=function(e){var t=e.target;if(!(!t||t.classList.contains(Vb)||t.classList.contains(Pb)||t.classList.contains(Fb)||t.classList.contains(Rb)||t.classList.contains(Hb)||t.classList.contains(Wb))){var i=Fe(t,"."+Fb);this.createTextbox(i,e)}},t.prototype.createTextbox=function(e,t){var i=this,n=Ee("."+Ub,this.element);n&&n.blur();var o=Ee("."+Lb,e);this.updateOldText(e);var s=this.createElement("input",{className:Ub,attrs:{value:this.oldText}}),a=this.getEditEvent(e,null,s.outerHTML);this.trigger("nodeEditing",a,(function(t){if(!t.cancel){var n="width:"+(o.offsetWidth+5)+"px";be([e],qb),m(i.nodeTemplateFn)||i.destroyTemplate(e),i.isReact?setTimeout((function(){i.renderTextBox(a,o,n)}),5):i.renderTextBox(a,o,n)}}))},t.prototype.renderTextBox=function(e,t,i){t.innerHTML=e.innerHtml;var n=Ee("."+Ub,t);this.inputObj=rs.createInput({element:n,properties:{enableRtl:this.enableRtl}},this.createElement),this.inputObj.container.setAttribute("style",i),n.focus();var o=n;o.setSelectionRange(0,o.value.length),this.wireInputEvents(n)},t.prototype.updateOldText=function(e){var t=e.getAttribute("data-uid");this.editData=this.getNodeObject(t);var i=parseFloat(e.getAttribute("aria-level"));this.editFields=this.getFields(this.fields,i,1),this.oldText=l(this.editFields.text,this.editData)},t.prototype.inputFocusOut=function(e){if(Ee("."+Ub,this.element)){var t=e.target,i=t.value,n=Fe(t,"."+Lb),o=Fe(t,"."+Fb);Ae(this.inputObj.container),this.fields.dataSource instanceof Fl&&!this.isOffline?this.crudOperation("update",null,o,i,null,null,!0):this.appendNewText(o,n,i,!0)}},t.prototype.appendNewText=function(e,t,i,n){var o=this,s=this.getEditEvent(e,i,null);this.trigger("nodeEdited",s,(function(s){i=s.cancel?s.oldText:s.newText,o.updateText(e,t,i,n),s.oldText!==i&&o.triggerEvent("nodeEdited",[o.getNode(e)])}))},t.prototype.updateText=function(e,t,i,n){var o=d(this.editFields.text,i,this.editData);if(m(this.nodeTemplateFn))t.innerText=i;else{t.innerText="";var s=e.getAttribute("data-uid");this.renderNodeTemplate(o,t,s),this.renderReactTemplates()}n&&(Se([e],qb),e.focus(),ye.add(e,"blur",this.focusOut,this),be([e],Ob)),this.allowTextWrap&&this.calculateWrap(e)},t.prototype.getElement=function(e){return m(e)?null:"string"===typeof e?this.element.querySelector('[data-uid="'+e+'"]'):"object"===typeof e?C(e):null},t.prototype.getId=function(e){return m(e)?null:"string"===typeof e?e:"object"===typeof e?C(e).getAttribute("data-uid"):null},t.prototype.getEditEvent=function(e,t,i){return{cancel:!1,newText:t,node:e,nodeData:this.getNodeData(e),oldText:this.oldText,innerHtml:i}},t.prototype.getNodeObject=function(e){var t;if(m(e))return t;if(1!==this.dataType)return this.getChildNodeObject(this.treeData,this.fields,e);for(var i=0,n=this.treeData.length;i<n;i++){var o=l(this.fields.id,this.treeData[i]);if(!m(this.treeData[i])&&!m(o)&&o.toString()===e)return this.treeData[i]}return t},t.prototype.getChildNodeObject=function(e,t,i){var n;if(m(e))return n;for(var o=0,s=e.length;o<s;o++){var a=l(t.id,e[o]);if(e[o]&&a&&a.toString()===i)return e[o];if("string"!==typeof t.child||m(l(t.child,e[o]))){if(this.fields.dataSource instanceof Fl&&!m(l("child",e[o]))){if(void 0!==(n=this.getChildNodeObject(l("child",e[o]),this.getChildMapper(t),i)))break}}else{var r=l(t.child,e[o]);if(void 0!==(n=this.getChildNodeObject(r,this.getChildMapper(t),i)))break}}return n},t.prototype.setDragAndDrop=function(e){e&&!this.disabled?this.initializeDrag():this.destroyDrag()},t.prototype.initializeDrag=function(){var e,t=this,i=this;this.dragObj=new Bt(this.element,{enableTailMode:!0,enableAutoScroll:!0,dragArea:this.dragArea,dragTarget:"."+_b,helper:function(n){t.dragTarget=n.sender.target;var o=Fe(t.dragTarget,"."+Vb),s=Fe(t.dragTarget,"."+_b);if(t.dragLi=Fe(t.dragTarget,"."+Fb),t.fullRowSelect&&!s&&t.dragTarget.classList.contains(tS)&&(s=t.dragTarget.nextElementSibling),!t.dragTarget||!n.element.isSameNode(o)||!s||t.dragTarget.classList.contains(Vb)||t.dragTarget.classList.contains(Pb)||t.dragTarget.classList.contains(Fb)||t.dragLi.classList.contains("e-disable"))return!1;var a=s.cloneNode(!0);if(m(Ee("div."+Rb,a))){var r=i.createElement("div",{className:Rb+" "+Nb});a.insertBefore(r,a.children[0])}var l="e-drag-item "+Vb+" "+t.cssClass+" "+(t.enableRtl?Yb:"");(e=i.createElement("div",{className:l})).appendChild(a);var d=t.selectedNodes.length;if(d>1&&t.allowMultiSelection&&t.dragLi.classList.contains(Bb)){var h=i.createElement("span",{className:"e-drop-count",innerHTML:""+d});e.appendChild(h)}return document.body.appendChild(e),document.body.style.cursor="",t.dragData=t.getNodeData(t.dragLi),e},dragStart:function(i){be([t.element],Xb);var n,o=Fe(i.target,".e-list-item");o&&(n=parseInt(o.getAttribute("aria-level"),10));var s=t.getDragEvent(i.event,t,null,i.target,null,e,n);s.draggedNode.classList.contains(qb)?(t.dragObj.intDestroy(i.event),t.dragCancelAction(e)):t.trigger("nodeDragStart",s,(function(n){n.cancel?(t.dragObj.intDestroy(i.event),t.dragCancelAction(e)):t.dragStartAction=!0}))},drag:function(i){t.dragObj.setProperties({cursorAt:{top:!m(i.event.targetTouches)||ge.isDevice?60:-20}}),t.dragAction(i,e)},dragStop:function(e){Se([t.element],Xb),t.removeVirtualEle();var i=e.target,n=Fe(i,"."+Zb);i&&n||(Ae(e.helper),document.body.style.cursor="");var o,s=Fe(i,".e-list-item");s&&(o=parseInt(s.getAttribute("aria-level"),10));var a=t.getDragEvent(e.event,t,i,i,null,e.helper,o);a.preventTargetExpand=!1,t.trigger("nodeDragStop",a,(function(i){t.dragParent=i.draggedParentNode,t.preventExpand=i.preventTargetExpand,i.cancel&&(e.helper.parentNode&&Ae(e.helper),document.body.style.cursor="",!1),t.dragStartAction=!1}))}}),this.dropObj=new Rt(this.element,{out:function(e){!m(e)&&!e.target.classList.contains(Gb)&&t.dropObj.dragData.default&&t.dropObj.dragData.default.helper.classList.contains(Vb)&&(document.body.style.cursor="not-allowed")},over:function(e){document.body.style.cursor=""},drop:function(e){t.dropAction(e)}})},t.prototype.dragCancelAction=function(e){Ae(e),Se([this.element],Xb),this.dragStartAction=!1},t.prototype.dragAction=function(e,t){var i=Fe(e.target,"."+Zb),n=Fe(e.target,"."+_b),o=Ee("div."+Rb,t);Se([o],[Jb,Kb,$b,eS]),this.removeVirtualEle(),document.body.style.cursor="";var s=e.target.classList;if(this.fullRowSelect&&!n&&!m(s)&&s.contains(tS)&&(n=e.target.nextElementSibling),i){var a=Fe(e.target,"."+Fb),r=Fe(e.target,"."+lS),l=Fe(e.target,"."+Db),d=Fe(e.target,"."+Nb);if(!i.classList.contains(Vb)||n&&!a.isSameNode(this.dragLi)&&!this.isDescendant(this.dragLi,a))if(this.hasTemplate&&a){var h=Ee(this.fullRowSelect?"."+tS:"."+_b,a);if(e&&!d&&!l&&e.event.offsetY<7&&!r||d&&e.event.offsetY<5||l&&e.event.offsetX<3){var p=this.fullRowSelect?1:0;this.appendIndicator(a,o,p)}else if(e&&!d&&!l&&!r&&h&&e.event.offsetY>h.offsetHeight-10||d&&e.event.offsetY>19||l&&e.event.offsetX>19){p=this.fullRowSelect?2:1;this.appendIndicator(a,o,p)}else be([o],Jb)}else if(a&&e&&!d&&!l&&e.event.offsetY<7&&!r||d&&e.event.offsetY<5||l&&e.event.offsetX<3){p=this.fullRowSelect?1:0;this.appendIndicator(a,o,p)}else if(a&&e&&!d&&!l&&e.target.offsetHeight>0&&e.event.offsetY>e.target.offsetHeight-10&&!r||d&&e.event.offsetY>19||l&&e.event.offsetX>19){p=this.fullRowSelect?2:1;this.appendIndicator(a,o,p)}else be([o],Jb);else"LI"!==e.target.nodeName||a.isSameNode(this.dragLi)||this.isDescendant(this.dragLi,a)?e.target.classList.contains(Gb)?be([o],Kb):be([o],$b):(be([o],Kb),this.renderVirtualEle(e))}else be([o],eS),document.body.style.cursor="not-allowed";var c,u=Fe(e.target,".e-list-item");u&&(c=parseInt(u.getAttribute("aria-level"),10));var f=this.getDragEvent(e.event,this,e.target,e.target,null,t,c);f.dropIndicator&&Se([o],f.dropIndicator),this.trigger("nodeDragging",f),f.dropIndicator&&be([o],f.dropIndicator)},t.prototype.appendIndicator=function(e,t,i){be([t],Kb);var n=this.createElement("div",{className:Gb});e.insertBefore(n,e.children[i])},t.prototype.dropAction=function(e){var t,n,o,s=e.event.offsetY,a=e.target,r=!1,l=[],d=[];o=e.dragData.draggable;for(var h=0;h<o.ej2_instances.length;h++)if(o.ej2_instances[h]instanceof i){t=o.ej2_instances[h];break}if(t&&t.dragTarget){var p=Fe(t.dragTarget,"."+Fb),c=Fe(a,"."+Fb);if(d.push(p),null==c&&a.classList.contains(Vb)&&(c=a.firstElementChild),Ae(e.droppedElement),document.body.style.cursor="",!c||c.isSameNode(p)||this.isDescendant(p,c))return void(this.fields.dataSource instanceof Fl===!1&&(this.preventExpand=!1));if(t.allowMultiSelection&&p.classList.contains(Bb)){var u=De("."+Bb,t.element);if(d=u,e.target.offsetHeight<=33&&s>e.target.offsetHeight-10&&s>6)for(var f=u.length-1;f>=0;f--)c.isSameNode(u[f])||this.isDescendant(u[f],c)||this.appendNode(a,u[f],c,e,t,s);else for(var m=0;m<u.length;m++)c.isSameNode(u[m])||this.isDescendant(u[m],c)||this.appendNode(a,u[m],c,e,t,s)}else this.appendNode(a,p,c,e,t,s);n=parseInt(p.getAttribute("aria-level"),10),r=!0}this.fields.dataSource instanceof Fl===!1&&(this.preventExpand=!1);for(var g=0;g<d.length;g++)l.push(this.getNode(d[g]));this.trigger("nodeDropped",this.getDragEvent(e.event,t,a,e.target,e.dragData.draggedElement,null,n,r)),t.element.id!==this.element.id&&(t.triggerEvent("nodeDropped",l),this.isNodeDropped=!0,this.fields.dataSource=this.treeData),this.triggerEvent("nodeDropped",l)},t.prototype.appendNode=function(e,t,i,n,o,s){var a=Fe(e,"."+lS),r=Fe(n.target,"."+Db),l=Fe(n.target,"."+Nb);t.classList.contains("e-disable")||a||!(l&&n.event.offsetY<5||r&&n.event.offsetX<3||l&&n.event.offsetY>19||r&&n.event.offsetX>19||!l&&!r)?this.dropAsChildNode(t,i,o,null,n,s,!0):"LI"===e.nodeName?this.dropAsSiblingNode(t,i,n,o):e.firstElementChild&&e.classList.contains(Vb)?"UL"===e.firstElementChild.nodeName&&this.dropAsSiblingNode(t,i,n,o):e.classList.contains("e-icon-collapsible")||e.classList.contains("e-icon-expandable")?this.dropAsSiblingNode(t,i,n,o):this.dropAsChildNode(t,i,o,null,n,s)},t.prototype.dropAsSiblingNode=function(e,t,i,n){var o,s=Fe(t,"."+Pb),a=Fe(e,"."+Pb),r=Fe(a,"."+Fb);if(i.target.offsetHeight>0&&i.event.offsetY>i.target.offsetHeight-2?o=!1:i.event.offsetY<2?o=!0:(i.target.classList.contains("e-icon-expandable")||i.target.classList.contains("e-icon-collapsible"))&&(i.event.offsetY<5||i.event.offsetX<3?o=!0:(i.event.offsetY>15||i.event.offsetX>17)&&(o=!1)),i.target.classList.contains("e-icon-expandable")||i.target.classList.contains("e-icon-collapsible")){var l=i.target.closest("li");s.insertBefore(e,o?l:l.nextElementSibling)}else s.insertBefore(e,o?i.target:i.target.nextElementSibling);this.moveData(e,t,s,o,n),this.updateElement(a,r),this.updateAriaLevel(e),n.element.id===this.element.id?this.updateList():(n.updateInstance(),this.updateInstance())},t.prototype.dropAsChildNode=function(e,t,i,n,o,s,a){var r,l=Fe(e,"."+Pb),d=Fe(l,"."+Fb),h=Fe(t,"."+Pb);if(o&&o.target&&(r=Ee(this.fullRowSelect?"."+tS:"."+_b,t)),o&&s<7&&!a)h.insertBefore(e,t),this.moveData(e,t,h,!0,i);else if(o&&o.target.offsetHeight>0&&s>o.target.offsetHeight-10&&!a&&!this.hasTemplate)h.insertBefore(e,t.nextElementSibling),this.moveData(e,t,h,!1,i);else if(this.hasTemplate&&r&&s>r.offsetHeight-10&&!a)h.insertBefore(e,t.nextElementSibling),this.moveData(e,t,h,!1,i);else{var p=this.expandParent(t),c=p.childNodes[n];p.insertBefore(e,c),this.moveData(e,c,p,!0,i)}this.updateElement(l,d),this.updateAriaLevel(e),i.element.id===this.element.id?this.updateList():(i.updateInstance(),this.updateInstance())},t.prototype.moveData=function(e,t,i,n,o){var s=Fe(i,"."+Fb),a=this.getId(e),r=o.updateChildField(o.treeData,o.fields,a,null,null,!0),l=this.getId(t),h=this.getDataPos(this.treeData,this.fields,l),p=this.getId(s);if(1===this.dataType){this.updateField(this.treeData,this.fields,p,"hasChildren",!0);var c=m(h)?this.treeData.length:n?h:h+1;if(m(p)&&!this.hasPid)delete r[0][this.fields.parentID];else{var u=this.isNumberTypeId?parseFloat(p):p;d(this.fields.parentID,u,r[0])}if(this.treeData.splice(c,0,r[0]),o.element.id!==this.element.id){var f=o.removeChildNodes(a);c++;for(var g=0,y=f.length;g<y;g++)this.treeData.splice(c,0,f[g]),c++;o.groupedData=o.getGroupedData(o.treeData,o.fields.parentID)}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.addChildData(this.treeData,this.fields,p,r,n?h:h+1)},t.prototype.expandParent=function(e){var t=Ee("div."+Rb,e);t&&t.classList.contains(Nb)&&!0!==this.preventExpand&&this.expandAction(e,t,null);var i,n=Ee("."+Pb,e);(!0===this.preventExpand&&!n&&t&&this.renderChildNodes(e),m(n=Ee("."+Pb,e))||!0!==this.preventExpand||(n.style.display="none"),m(n)||!1!==this.preventExpand||(n.style.display="block"),m(n)&&!0===this.preventExpand)&&(m(t)&&bl.generateIcon(this.createElement,e,Nb,this.listBaseOption),(i=Ee("div."+Rb,e))&&i.classList.add("e-icon-expandable"),n=bl.generateUL(this.createElement,[],null,this.listBaseOption),e.appendChild(n),i?Se([i],Db):bl.generateIcon(this.createElement,e,Nb,this.listBaseOption),e.setAttribute("aria-expanded","false"),n.style.display="none");m(n)&&(this.trigger("nodeExpanding",this.getExpandEvent(e,null)),m(t)&&bl.generateIcon(this.createElement,e,Db,this.listBaseOption),(i=Ee("div."+Rb,e))?Se([i],Nb):(bl.generateIcon(this.createElement,e,Db,this.listBaseOption),Se([i=Ee("div."+Rb,e)],Nb)),n=bl.generateUL(this.createElement,[],null,this.listBaseOption),e.appendChild(n),this.addExpand(e),this.trigger("nodeExpanded",this.getExpandEvent(e,null)));return n},t.prototype.updateElement=function(e,t){if(t&&0===e.childElementCount){var i=Ee("div."+Rb,t);Ae(e),Ae(i);var n=this.getId(t);this.updateField(this.treeData,this.fields,n,"hasChildren",!1),this.removeExpand(t,!0)}},t.prototype.updateAriaLevel=function(e){var t=this.parents(e,"."+Pb).length;e.setAttribute("aria-level",""+t),this.updateChildAriaLevel(Ee("."+Pb,e),t+1)},t.prototype.updateChildAriaLevel=function(e,t){if(!m(e))for(var i=e.childNodes,n=0,o=i.length;n<o;n++){var s=i[n];s.setAttribute("aria-level",""+t),this.updateChildAriaLevel(Ee("."+Pb,s),t+1)}},t.prototype.renderVirtualEle=function(e){var t;e.event.offsetY>e.target.offsetHeight-2?t=!1:e.event.offsetY<2&&(t=!0);var i=this.createElement("div",{className:Gb}),n=this.fullRowSelect?t?1:2:t?0:1;e.target.insertBefore(i,e.target.children[n])},t.prototype.removeVirtualEle=function(){var e=Ee("."+Gb);e&&Ae(e)},t.prototype.destroyDrag=function(){this.dragObj&&this.dropObj&&(this.dragObj.destroy(),this.dropObj.destroy())},t.prototype.getDragEvent=function(e,t,i,n,o,s,a,r){var l=i?Fe(i,"."+Fb):null,d=l?this.getNodeData(l):null,h=t?t.dragLi:o,p=t?t.dragData:null,c=i?this.parents(i,"."+Fb):null,u=t.dragLi.parentElement,f=t.dragLi?Fe(u,"."+Fb):null,m=null,g=null,y=[Kb,Jb,$b,eS],v=null,w=!0===r?h:l,b=w?Fe(w,".e-list-parent"):null,S=0,C=null;if(f=t.dragLi&&null===f?Fe(u,"."+Vb):f,f=!0===r?this.dragParent:f,s)for(;S<4;){if(Ee("."+Rb,s).classList.contains(y[S])){v=y[S];break}S++}if(b){var x=0;for(S=0;S<b.childElementCount;S++){if(x=!0!==r&&b.children[S]===h&&l!==h?++x:x,!0!==r&&b.children[S].classList.contains("e-hover")){g=e.offsetY>=23?S+1:S;break}if(b.children[S]===w){e.offsetY,g=S;break}}g=0!==x?--g:g,C="e-drop-in"==v?"Inside":e.offsetY<7?"Before":"After"}if(i&&(m=0===c.length?null:i.classList.contains(Fb)?c[0]:c[1]),l===h&&(m=l),i&&n.offsetHeight<=33&&e.offsetY<n.offsetHeight-10&&e.offsetY>6&&(m=l,!0!==r)){a=++a;var M=m?Ee(".e-list-parent",m):null;if(g=M?M.children.length:0,!(this.fields.dataSource instanceof Fl)&&null===M&&m){var I=m.hasAttribute("data-uid")?this.getChildNodes(this.fields.dataSource,m.getAttribute("data-uid").toString()):null;g=I?I.length:0}}return{cancel:!1,clonedNode:s,event:e,draggedNode:h,draggedNodeData:p,droppedNode:l,droppedNodeData:d,dropIndex:g,dropLevel:a,draggedParentNode:f,dropTarget:m,dropIndicator:v,target:n,position:C}},t.prototype.addFullRow=function(e){var t=this.liList.length;if(e)for(var i=0;i<t;i++)this.createFullRow(this.liList[i]);else for(i=0;i<t;i++){Ae(Ee("."+tS,this.liList[i]))}},t.prototype.createFullRow=function(e){var t=this.createElement("div",{className:tS});e.insertBefore(t,e.childNodes[0])},t.prototype.addMultiSelect=function(e){if(e)for(var t=0,i=De("."+Fb+':not([aria-selected="true"])',this.element);t<i.length;t++){i[t].setAttribute("aria-selected","false")}else for(var n=0,o=De("."+Fb+'[aria-selected="false"]',this.element);n<o.length;n++){o[n].removeAttribute("aria-selected")}},t.prototype.collapseByLevel=function(e,t,i){if(t>0&&!m(e))for(var n=this.getVisibleNodes(i,e.childNodes),o=0,s=n.length;o<s;o++){var a=n[o],r=Ee("."+Db,Ee("."+_b,a));m(r)||this.collapseNode(a,r,null),this.collapseByLevel(Ee("."+Pb,a),t-1,i)}},t.prototype.collapseAllNodes=function(e){for(var t=this.getVisibleNodes(e,De("."+Db,this.element)),i=0,n=t.length;i<n;i++){var o=t[i],s=Fe(o,"."+Fb);this.collapseNode(s,o,null)}},t.prototype.expandByLevel=function(e,t,i){if(t>0&&!m(e))for(var n=this.getVisibleNodes(i,e.childNodes),o=0,s=n.length;o<s;o++){var a=n[o],r=Ee("."+Nb,Ee("."+_b,a));m(r)||this.expandAction(a,r,null),this.expandByLevel(Ee("."+Pb,a),t-1,i)}},t.prototype.expandAllNodes=function(e){for(var t=this.getVisibleNodes(e,De("."+Nb,this.element)),i=0,n=t.length;i<n;i++){var o=t[i],s=Fe(o,"."+Fb);this.expandAction(s,o,null,!0)}},t.prototype.getVisibleNodes=function(e,t){var i=Array.prototype.slice.call(t);if(e)for(var n=0;n<i.length;n++)xe(i[n])||(i.splice(n,1),n--);return i},t.prototype.removeNode=function(e){var t=Fe(e,"."+Pb),i=Fe(t,"."+Fb);m(this.nodeTemplateFn)||this.destroyTemplate(e),Ae(e),this.updateElement(t,i),this.removeData(e)},t.prototype.updateInstance=function(){this.updateList(),this.updateSelectedNodes(),this.updateExpandedNodes()},t.prototype.updateList=function(){this.liList=Array.prototype.slice.call(De("."+Fb,this.element))},t.prototype.updateSelectedNodes=function(){this.setProperties({selectedNodes:[]},!0);var e=De("."+Bb,this.element);this.selectGivenNodes(e)},t.prototype.updateExpandedNodes=function(){this.setProperties({expandedNodes:[]},!0);for(var e=De('[aria-expanded="true"]',this.element),t=0,i=e.length;t<i;t++)this.addExpand(e[t])},t.prototype.removeData=function(e){if(1===this.dataType){var t=new Fl(this.treeData),i=this.getId(e),n={},o=this.isNumberTypeId?parseFloat(i):i;n[this.fields.id]=o,t.remove(this.fields.id,n),this.removeChildNodes(i)}else{i=this.getId(e);this.updateChildField(this.treeData,this.fields,i,null,null,!0)}},t.prototype.removeChildNodes=function(e){var t=this.getChildGroup(this.groupedData,e,!1),i=[];if(t)for(var n=0,o=t.length;n<o;n++){var s=new Fl(this.treeData),a=l(this.fields.id,t[n]).toString(),r={},d=this.isNumberTypeId?parseFloat(a):a;r[this.fields.id]=d;var h=s.remove(this.fields.id,r);i.push(h[0]),this.removeChildNodes(a)}return i},t.prototype.doGivenAction=function(e,t,i){for(var n=0,o=e.length;n<o;n++){var s=this.getElement(e[n]);if(!m(s)){var a=Ee("."+t,Ee("."+_b,s));m(a)||(i?this.expandAction(s,a,null):this.collapseNode(s,a,null))}}},t.prototype.addGivenNodes=function(e,t,i,n,o){if(0!==e.length){var s=this.getSortedData(e),a=t?parseFloat(t.getAttribute("aria-level"))+1:1;n&&this.updateMapper(a);var r,l,h,p=bl.createListItemFromJson(this.createElement,s,this.listBaseOption,a),c=this.getId(t);if(m(t)||(l=Ee("div."+Rb,t)),1===this.dataType&&l&&l.classList.contains(Nb)&&!m(this.element.offsetParent)&&!this.element.offsetParent.parentElement.classList.contains("e-filemanager")&&(this.preventExpand=!0),1!==this.dataType&&(this.addChildData(this.treeData,this.fields,c,e,i),this.isFirstRender=!1),r=(h=o||(t?this.expandParent(t):Ee("."+Pb,this.element))).childNodes[i],!this.isFirstRender||1===this.dataType){if(r||"None"===this.sortOrder){for(var u=0;u<p.length;u++)h.insertBefore(p[u],r);if(1===this.dataType&&!m(t)&&!m(this.element.offsetParent)&&!this.element.offsetParent.parentElement.classList.contains("e-filemanager"))this.preventExpand=!1,(f=Ee("div."+Rb,t))&&f.classList.contains(Nb)&&this.expandAction(t,f,null)}if(!r&&("Ascending"===this.sortOrder||"Descending"===this.sortOrder))if(0===h.childNodes.length){for(u=0;u<p.length;u++)h.insertBefore(p[u],r);var f;if(1===this.dataType&&!m(t)&&!m(this.element.offsetParent)&&!this.element.offsetParent.parentElement.classList.contains("e-filemanager"))this.preventExpand=!1,(f=Ee("div."+Rb,t))&&f.classList.contains(Nb)&&this.expandAction(t,f,null)}else{var g=h.childNodes;for(u=0;u<p.length;u++)for(var y=0;y<g.length;y++){if("Ascending"===this.sortOrder?g[y].textContent.toUpperCase()>p[u].innerText.toUpperCase():g[y].textContent.toUpperCase()<p[u].innerText.toUpperCase()){h.insertBefore(p[u],g[y]);break}h.insertBefore(p[u],g[g.length])}}}if(1===this.dataType){this.updateField(this.treeData,this.fields,c,"hasChildren",!0);var v=this.getId(r),w=m(v)?this.treeData.length:this.getDataPos(this.treeData,this.fields,v);for(y=0;y<e.length;y++){if(!m(c)){var b=this.isNumberTypeId?parseFloat(c):c;d(this.fields.parentID,b,e[y])}this.treeData.splice(w,0,e[y]),w++}}this.finalizeNode(h)}},t.prototype.updateMapper=function(e){var t=1===e?this.fields:this.getChildFields(this.fields,e-1,1);this.updateListProp(t)},t.prototype.updateListProp=function(e){var t=this.getActualProperties(e);this.listBaseOption.fields=t,this.listBaseOption.fields.url=t.hasOwnProperty("navigateUrl")?t.navigateUrl:"navigateUrl"},t.prototype.getDataPos=function(e,t,i){for(var n=null,o=0,s=e.length;o<s;o++){var a=l(t.id,e[o]);if(e[o]&&a&&a.toString()===i)return o;if("string"!==typeof t.child||m(l(t.child,e[o]))){if(this.fields.dataSource instanceof Fl&&!m(l("child",e[o]))){var r=l("child",e[o]);if(null!==(n=this.getDataPos(r,this.getChildMapper(t),i)))break}}else{var d=l(t.child,e[o]);if(null!==(n=this.getDataPos(d,this.getChildMapper(t),i)))break}}return n},t.prototype.addChildData=function(e,t,i,n,o){var s;if(m(i)){o=m(o)?e.length:o;for(var a=0,r=n.length;a<r;a++)e.splice(o,0,n[a]),o++;return s}for(var d=0,h=e.length;d<h;d++){var p=l(t.id,e[d]);if(e[d]&&p&&p.toString()===i){if("string"===typeof t.child&&e[d].hasOwnProperty(t.child)&&null!==e[d][t.child]||this.fields.dataSource instanceof Fl&&e[d].hasOwnProperty("child")){m(u=l(c="string"===typeof t.child?t.child:"child",e[d]))&&(u=[]),o=m(o)?u.length:o;for(a=0,r=n.length;a<r;a++)u.splice(o,0,n[a]),o++}else{var c="string"===typeof t.child?t.child:"child";e[d][c]=n}return!0}if("string"!==typeof t.child||m(l(t.child,e[d]))){if(this.fields.dataSource instanceof Fl&&!m(l("child",e[d]))){var u=l("child",e[d]);if(void 0!==(s=this.addChildData(u,this.getChildMapper(t),i,n,o)))break}}else{var f=l(t.child,e[d]);if(void 0!==(s=this.addChildData(f,this.getChildMapper(t),i,n,o)))break}}return s},t.prototype.doDisableAction=function(e){var t=this.nodeType(e),i=this.checkValidId(t);this.validArr=[];for(var n=0,o=i.length;n<o;n++){var s=i[n][this.fields.id].toString();s&&-1===this.disableNode.indexOf(s)&&this.disableNode.push(s);var a=this.getElement(s);a&&(a.setAttribute("aria-disabled","true"),be([a],sS))}},t.prototype.doEnableAction=function(e){for(var t=this.nodeType(e),i=0,n=t.length;i<n;i++){var o=this.getElement(t[i]),s=t[i];s&&-1!==this.disableNode.indexOf(s)&&this.disableNode.splice(this.disableNode.indexOf(s),1),o&&(o.removeAttribute("aria-disabled"),Se([o],sS))}},t.prototype.nodeType=function(e){for(var t=[],i=0,n=e.length;i<n;i++){var o=void 0;"string"==typeof e[i]?o=e[i]?e[i].toString():null:"object"===typeof e[i]&&(o=e[i]?e[i].getAttribute("data-uid").toString():null),-1==t.indexOf(o)&&t.push(o)}return t},t.prototype.checkValidId=function(e){var t=this;if(1===this.dataType)this.validArr=this.treeData.filter((function(i){return-1!==e.indexOf(i[t.fields.id]?i[t.fields.id].toString():null)}));else if(2===this.dataType)for(var i=0;i<this.treeData.length;i++){var n=this.treeData[i][this.fields.id]?this.treeData[i][this.fields.id].toString():null;-1!==e.indexOf(n)&&this.validArr.push(this.treeData[i]);var o=l(this.fields.child.toString(),this.treeData[i]);o&&this.filterNestedChild(o,e)}return this.validArr},t.prototype.filterNestedChild=function(e,t){for(var i=0;i<e.length;i++){var n=e[i][this.fields.id]?e[i][this.fields.id].toString():null;-1!==t.indexOf(n)&&this.validArr.push(e[i]);var o=l(this.fields.child.toString(),e[i]);o&&this.filterNestedChild(o,t)}},t.prototype.setTouchClass=function(){var e=Fe(this.element,".e-bigger");this.touchClass=m(e)?"":"e-small"},t.prototype.updatePersistProp=function(){this.removeField(this.treeData,this.fields,["selected","expanded"]);for(var e=this.selectedNodes,t=0,i=e.length;t<i;t++)this.updateField(this.treeData,this.fields,e[t],"selected",!0);for(var n=this.expandedNodes,o=0,s=n.length;o<s;o++)this.updateField(this.treeData,this.fields,n[o],"expanded",!0);if(this.showCheckBox){this.removeField(this.treeData,this.fields,["isChecked"]);var a=this.checkedNodes,r=0;for(s=a.length;r<s;r++)this.updateField(this.treeData,this.fields,a[r],"isChecked",!0)}},t.prototype.removeField=function(e,t,i){if(!m(e)&&!m(t))for(var n=0,o=e.length;n<o;n++){for(var s=0;s<i.length;s++){var a=this.getMapperProp(t,i[s]);m(e[n][a])||delete e[n][a]}"string"!==typeof t.child||m(l(t.child,e[n]))?this.fields.dataSource instanceof Fl&&!m(l("child",e[n]))&&this.removeField(l("child",e[n]),this.getChildMapper(t),i):this.removeField(l(t.child,e[n]),this.getChildMapper(t),i)}},t.prototype.getMapperProp=function(e,t){switch(t){case"selected":return m(e.selected)?"selected":e.selected;case"expanded":return m(e.expanded)?"expanded":e.expanded;case"isChecked":return m(e.isChecked)?"isChecked":e.isChecked;case"hasChildren":return m(e.hasChildren)?"hasChildren":e.hasChildren;default:return t}},t.prototype.updateField=function(e,t,i,n,o){if(!m(i))if(1===this.dataType){var s=this.isNumberTypeId?parseFloat(i):i,a=new Fl(this.treeData).executeLocal((new Bl).where(t.id,"equal",s,!1));d(this.getMapperProp(t,n),o,a[0])}else this.updateChildField(e,t,i,n,o)},t.prototype.updateChildField=function(e,t,i,n,o,s){var a;if(m(e))return a;for(var r=0,h=e.length;r<h;r++){var p=l(t.id,e[r]);if(e[r]&&p&&p.toString()===i)return s?a=e.splice(r,1):(d(this.getMapperProp(t,n),o,e[r]),a=[]),a;if("string"!==typeof t.child||m(l(t.child,e[r]))){if(this.fields.dataSource instanceof Fl&&!m(l("child",e[r]))){var c=l("child",e[r]);if(void 0!==(a=this.updateChildField(c,this.getChildMapper(t),i,n,o,s)))break}}else{var u=l(t.child,e[r]);if(void 0!==(a=this.updateChildField(u,this.getChildMapper(t),i,n,o,s)))break}}return a},t.prototype.triggerEvent=function(e,t){if(this.renderReactTemplates(),"addNodes"===e){for(var i=[],n=0;n<t.length;n++)i.push(this.getNode(this.getElement(m(t[n][this.fields.id])?l(this.fields.id,t[n]).toString():null)));t=i}var o={data:this.treeData,action:e,nodeData:t};this.trigger("dataSourceChanged",o)},t.prototype.wireInputEvents=function(e){ye.add(e,"blur",this.inputFocusOut,this)},t.prototype.wireEditingEvents=function(e){var t=this;if(e&&!this.disabled){var i=this;this.touchEditObj=new Gt(this.element,{tap:function(e){t.isDoubleTapped(e)&&2===e.tapCount&&(e.originalEvent.preventDefault(),i.editingHandler(e.originalEvent))}})}else this.touchEditObj&&this.touchEditObj.destroy()},t.prototype.wireClickEvent=function(e){if(e){var t=this;this.touchClickObj=new Gt(this.element,{tap:function(e){t.clickHandler(e)}})}else this.touchClickObj&&this.touchClickObj.destroy()},t.prototype.wireExpandOnEvent=function(e){var t=this;if(e){var i=this;this.touchExpandObj=new Gt(this.element,{tap:function(e){("Click"===t.expandOnType||"DblClick"===t.expandOnType&&t.isDoubleTapped(e)&&2===e.tapCount)&&3!==e.originalEvent.which&&i.expandHandler(e)}})}else this.touchExpandObj&&this.touchExpandObj.destroy()},t.prototype.mouseDownHandler=function(e){this.mouseDownStatus=!0,(e.shiftKey||e.ctrlKey)&&e.preventDefault(),e.ctrlKey&&this.allowMultiSelection&&ye.add(this.element,"contextmenu",this.preventContextMenu,this)},t.prototype.preventContextMenu=function(e){e.preventDefault()},t.prototype.wireEvents=function(){ye.add(this.element,"mousedown",this.mouseDownHandler,this),this.wireClickEvent(!0),"None"!==this.expandOnType&&this.wireExpandOnEvent(!0),ye.add(this.element,"mouseover",this.onMouseOver,this),ye.add(this.element,"mouseout",this.onMouseLeave,this),this.keyboardModule=new Ut(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},t.prototype.unWireEvents=function(){ye.remove(this.element,"mousedown",this.mouseDownHandler),this.wireClickEvent(!1),this.wireExpandOnEvent(!1),ye.remove(this.element,"mouseover",this.onMouseOver),ye.remove(this.element,"mouseout",this.onMouseLeave),this.disabled||this.keyboardModule.destroy()},t.prototype.parents=function(e,t){for(var i=[],n=e.parentNode;!m(n);)Oe(n,t)&&i.push(n),n=n.parentNode;return i},t.prototype.isDoubleTapped=function(e){var t,i=e.originalEvent.target;return i&&e.tapCount&&(1===e.tapCount?this.firstTap=Fe(i,"."+Fb):2===e.tapCount&&(t=Fe(i,"."+Fb))),this.firstTap===t},t.prototype.isDescendant=function(e,t){for(var i=t.parentNode;!m(i);){if(i===e)return!0;i=i.parentNode}return!1},t.prototype.showSpinner=function(e){be([e],zb),Nu({target:e,width:ge.isDevice?16:14},this.createElement),qu(e)},t.prototype.hideSpinner=function(e){Qu(e),e.innerHTML="",Se([e],zb)},t.prototype.setCheckedNodes=function(e){e=JSON.parse(JSON.stringify(e)),this.uncheckAll(this.checkedNodes),this.setIndeterminate(e),e.length>0&&this.checkAll(e)},t.prototype.setValidCheckedNode=function(e){if(1===this.dataType){var t=this.fields,i=new Fl(this.treeData).executeLocal((new Bl).where(t.id,"equal",e,!0));if(i[0]&&(this.setChildCheckState(i,e,i[0]),this.autoCheck)){for(var n=i[0][this.fields.parentID]?i[0][this.fields.parentID].toString():null,o=this.getChildNodes(this.treeData,n),s=0,a=0;a<o.length;a++){var r=o[a][this.fields.id].toString();-1!==this.checkedNodes.indexOf(r)&&s++}s===o.length&&-1===this.checkedNodes.indexOf(n)&&n&&this.checkedNodes.push(n)}}else if(2===this.dataType)for(var d=0;d<this.treeData.length;d++){if((this.treeData[d][this.fields.id]?this.treeData[d][this.fields.id].toString():"")===e&&-1===this.checkedNodes.indexOf(e)){this.checkedNodes.push(e);break}var h=l(this.fields.child.toString(),this.treeData[d]);h&&this.setChildCheckState(h,e,this.treeData[d])}},t.prototype.setChildCheckState=function(e,t,i){var n,o=0;if(1===this.dataType){i&&(n=i[this.fields.id]?i[this.fields.id].toString():null);for(var s=0;s<e.length;s++){var a=e[s][this.fields.id]?e[s][this.fields.id].toString():null;i&&n&&this.autoCheck&&-1!==this.checkedNodes.indexOf(n)&&-1===this.checkedNodes.indexOf(a)&&this.checkedNodes.push(a),a===t&&-1===this.checkedNodes.indexOf(t)&&this.checkedNodes.push(t),(r=this.getChildNodes(this.treeData,a))&&this.setChildCheckState(r,t,i)}}else{i&&(n=i[this.fields.id]?i[this.fields.id].toString():"");for(s=0;s<e.length;s++){var r,d=e[s][this.fields.id]?e[s][this.fields.id].toString():"";i&&n&&this.autoCheck&&-1!==this.checkedNodes.indexOf(n)&&-1===this.checkedNodes.indexOf(d)&&this.checkedNodes.push(d),d===t&&-1===this.checkedNodes.indexOf(t)&&this.checkedNodes.push(t),(r=l(this.fields.child.toString(),e[s]))&&this.setChildCheckState(r,t,e[s]),-1!==this.checkedNodes.indexOf(d)&&this.autoCheck&&o++,o===e.length&&-1===this.checkedNodes.indexOf(n)&&this.autoCheck&&this.checkedNodes.push(n)}}},t.prototype.setIndeterminate=function(e){for(var t=0;t<e.length;t++)this.setValidCheckedNode(e[t])},t.prototype.updatePosition=function(e,t,i,n){if(1===this.dataType){var o=this.getDataPos(this.treeData,this.fields,e);if(this.treeData.splice(o,1,t),i){this.removeChildNodes(e);for(var s=0;s<n.length;s++)this.treeData.splice(o,0,n[s]),o++}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.updateChildPosition(this.treeData,this.fields,e,[t],void 0)},t.prototype.updateChildPosition=function(e,t,i,n,o){for(var s,a=0,r=e.length;a<r;a++){var d=l(t.id,e[a]);if(e[a]&&d&&d.toString()===i)return e[a]=n[0],!0;if("string"!==typeof t.child||m(l(t.child,e[a]))){if(this.fields.dataSource instanceof Fl&&!m(l("child",e[a]))){var h=l("child",e[a]);if(void 0!==(s=this.updateChildPosition(h,this.getChildMapper(t),i,n,o)))break}}else{var p=l(t.child,e[a]);if(void 0!==(s=this.updateChildPosition(p,this.getChildMapper(t),i,n,o)))break}}return s},t.prototype.dynamicState=function(){this.setDragAndDrop(this.allowDragAndDrop),this.wireEditingEvents(this.allowEditing),this.disabled?(this.unWireEvents(),this.rippleFn(),this.rippleIconFn()):(this.wireEvents(),this.setRipple())},t.prototype.crudOperation=function(e,t,i,n,o,s,a){var r,l=this,d=this.fields.dataSource,h=[],p=this.getQuery(this.fields),c=this.fields.id,u={addedRecords:[],deletedRecords:[],changedRecords:[]},f=[];t?f=this.nodeType(t):i&&("string"==typeof i?f[0]=i.toString():"object"===typeof i&&(f[0]=i.getAttribute("data-uid").toString()));for(var g=0,y=f.length;g<y;g++){if(!m(this.getElement(f[g]))){var v=this.getNodeObject(f[g]);h.push(v)}}switch(e){case"delete":1==t.length?r=d.remove(c,h[0],p.fromTable,p):(u.deletedRecords=h,r=d.saveChanges(u,c,p.fromTable,p)),r.then((function(e){return l.deleteSuccess(f)})).catch((function(e){return l.dmFailure(e)}));break;case"update":h[0][this.fields.text]=n,(r=d.update(c,h[0],p.fromTable,p)).then((function(e){return l.editSucess(i,n,a)})).catch((function(e){return l.dmFailure(e,i,a)}));break;case"insert":if(1==o.length)r=d.insert(o[0],p.fromTable,p);else{var w=[];for(g=0,y=o.length;g<y;g++)w.push(o[g]);u.addedRecords=w,r=d.saveChanges(u,c,p.fromTable,p)}r.then((function(e){var t=l.getElement(i);l.addSuccess(o,t,s),l.preventExpand=!1})).catch((function(e){return l.dmFailure(e)}))}},t.prototype.deleteSuccess=function(e){for(var t=[],i=0,n=e.length;i<n;i++){var o=this.getElement(e[i]);t.push(this.getNode(o)),m(o)||this.removeNode(o)}this.updateInstance(),1===this.dataType&&(this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)),this.triggerEvent("removeNode",t)},t.prototype.editSucess=function(e,t,i){var n=this.getElement(e),o=Ee("."+Lb,n);this.appendNewText(n,o,t,i)},t.prototype.addSuccess=function(e,t,i){var n,o=t?t.querySelector("."+Rb):null,s=this;t&&o&&o.classList.contains(Nb)&&null===t.querySelector("."+Pb)?s.renderChildNodes(t,null,(function(){n=t.querySelector("."+Pb),s.addGivenNodes(e,t,i,!0,n),s.triggerEvent("addNodes",e)})):(this.addGivenNodes(e,t,i,!0),this.triggerEvent("addNodes",e))},t.prototype.dmFailure=function(e,t,i){t&&this.updatePreviousText(t,i),this.trigger("actionFailure",{error:e})},t.prototype.updatePreviousText=function(e,t){var i=this.getElement(e),n=Ee("."+Lb,i);this.updateText(i,n,this.oldText,t)},t.prototype.getHierarchicalParentId=function(e,t,i){var n=this,o=t.findIndex((function(t){return t[n.fields.id]&&t[n.fields.id].toString()===e}));if(-1==o)for(var s=0;s<t.length;s++){var a=l(this.fields.child.toString(),t[s]);if(!m(a)){if(o=a.findIndex((function(t){return t[n.fields.id]&&t[n.fields.id].toString()===e})),-1!=o){i.push(t[s][this.fields.id].toString()),this.getHierarchicalParentId(t[s][this.fields.id].toString(),this.treeData,i);break}this.getHierarchicalParentId(e,a,i)}}return i},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"allowDragAndDrop":this.setDragAndDrop(this.allowDragAndDrop);break;case"dragArea":this.allowDragAndDrop&&(this.dragObj.dragArea=this.dragArea);break;case"allowEditing":this.wireEditingEvents(this.allowEditing);break;case"allowMultiSelection":if(this.selectedNodes.length>1){var o=this.getElement(this.selectedNodes[0]);this.isLoaded=!1,this.removeSelectAll(),this.selectNode(o,null),this.isLoaded=!0}this.setMultiSelect(this.allowMultiSelection),this.addMultiSelect(this.allowMultiSelection);break;case"allowTextWrap":this.setTextWrap(),this.updateWrap();break;case"checkedNodes":this.showCheckBox&&(this.checkedNodes=t.checkedNodes,this.setCheckedNodes(e.checkedNodes));break;case"autoCheck":this.showCheckBox&&(this.autoCheck=e.autoCheck,this.ensureIndeterminate());break;case"cssClass":this.setCssClass(t.cssClass,e.cssClass);break;case"enableRtl":this.setEnableRtl();break;case"expandedNodes":this.isAnimate=!1,this.setProperties({expandedNodes:[]},!0),this.collapseAll(),this.isInitalExpand=!0,this.setProperties({expandedNodes:m(e.expandedNodes)?[]:e.expandedNodes},!0),this.doExpandAction(),this.isInitalExpand=!1,this.isAnimate=!0;break;case"expandOn":this.wireExpandOnEvent(!1),this.setExpandOnType(),"None"===this.expandOnType||this.disabled||this.wireExpandOnEvent(!0);break;case"disabled":this.setDisabledMode(),this.dynamicState();break;case"fields":this.isAnimate=!1,this.isFieldChange=!0,this.initialRender=!0,this.reRenderNodes(),this.initialRender=!1,this.isAnimate=!0,this.isFieldChange=!1;break;case"fullRowSelect":this.setFullRow(this.fullRowSelect),this.addFullRow(this.fullRowSelect),this.allowTextWrap&&(this.setTextWrap(),this.updateWrap());break;case"loadOnDemand":if(!1===this.loadOnDemand&&!this.onLoaded){for(var s=this.element.querySelectorAll("li"),a=0;a<s.length;)"true"!==s[a].getAttribute("aria-expanded")&&this.renderChildNodes(s[a],!0,null,!0),a++;this.onLoaded=!0}break;case"nodeTemplate":this.hasTemplate=!1,this.nodeTemplateFn=this.templateComplier(this.nodeTemplate),this.reRenderNodes();break;case"selectedNodes":this.removeSelectAll(),this.setProperties({selectedNodes:e.selectedNodes},!0),this.doSelectionAction();break;case"showCheckBox":case"sortOrder":this.reRenderNodes();break;case"fullRowNavigable":this.setProperties({fullRowNavigable:e.fullRowNavigable},!0),this.listBaseOption.itemNavigable=e.fullRowNavigable,this.reRenderNodes()}}},t.prototype.destroy=function(){this.clearTemplate(),this.element.removeAttribute("aria-activedescendant"),this.unWireEvents(),this.wireEditingEvents(!1),this.disabled||(this.rippleFn(),this.rippleIconFn()),this.setCssClass(this.cssClass,null),this.setDragAndDrop(!1),this.setFullRow(!1),this.ulElement&&this.ulElement.parentElement&&this.ulElement.parentElement.removeChild(this.ulElement),e.prototype.destroy.call(this)},t.prototype.addNodes=function(e,t,i,n){if(!m(e)){e=JSON.parse(JSON.stringify(e));var o=this.getElement(t);if(this.preventExpand=n,this.fields.dataSource instanceof Fl)this.isOffline?this.addSuccess(e,o,i):this.crudOperation("insert",null,t,null,e,i,this.preventExpand);else if(2===this.dataType)this.addGivenNodes(e,o,i);else{if(o)this.addGivenNodes(e,o,i);else{e=this.getSortedData(e);for(var s=0;s<e.length;s++){var a=l(this.fields.parentID,e[s]);o=a?this.getElement(a.toString()):a,this.addGivenNodes([e[s]],o,i)}}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}this.updateCheckedStateFromDS(),this.showCheckBox&&o&&this.ensureParentCheckState(o),this.fields.dataSource instanceof Fl===!1&&(this.preventExpand=!1,this.triggerEvent("addNodes",e))}},t.prototype.beginEdit=function(e){var t=this.getElement(e);m(t)||this.disabled||this.createTextbox(t,null)},t.prototype.checkAll=function(e){this.showCheckBox&&this.doCheckBoxAction(e,!0)},t.prototype.collapseAll=function(e,t,i){m(e)?t>0?this.collapseByLevel(Ee("."+Pb,this.element),t,i):this.collapseAllNodes(i):this.doGivenAction(e,Db,!1)},t.prototype.disableNodes=function(e){m(e)||this.doDisableAction(e)},t.prototype.enableNodes=function(e){m(e)||this.doEnableAction(e)},t.prototype.ensureVisible=function(e){var t=[];if(1==this.dataType)for(var i=this.getTreeData(e);0!=i.length&&!m(i[0][this.fields.parentID]);)t.push(i[0][this.fields.parentID].toString()),i=this.getTreeData(i[0][this.fields.parentID].toString());else 2==this.dataType&&(t=this.getHierarchicalParentId(e,this.treeData,t).reverse());this.expandAll(t);var n=this.getElement(e);if(!m(n)){if("object"==typeof e){var o=this.parents(n,"."+Fb);this.expandAll(o)}setTimeout((function(){n.scrollIntoView({behavior:"smooth"})}),450)}},t.prototype.expandAll=function(e,t,i){m(e)?t>0?this.expandByLevel(Ee("."+Pb,this.element),t,i):this.expandAllNodes(i):this.doGivenAction(e,Nb,!0)},t.prototype.getAllCheckedNodes=function(){return this.checkedNodes},t.prototype.getDisabledNodes=function(){return this.disableNode},t.prototype.getNode=function(e){var t=this.getElement(e);return this.getNodeData(t,!0)},t.prototype.getTreeData=function(e){var t=this.getId(e);if(this.updatePersistProp(),m(t))return this.treeData;var i=this.getNodeObject(t);return m(i)?[]:[i]},t.prototype.moveNodes=function(e,t,i,n){var o=this.getElement(t),s=[];if(!m(o)){for(var a=0;a<e.length;a++){var r=this.getElement(e[a]);s.push(this.getNode(r)),m(r)||o.isSameNode(r)||this.isDescendant(r,o)||(this.preventExpand=n,this.dropAsChildNode(r,o,this,i))}this.fields.dataSource instanceof Fl===!1&&(this.preventExpand=!1),this.triggerEvent("moveNodes",s)}},t.prototype.refreshNode=function(e,t){if(!m(e)&&!m(t)){var i,n=!1;if(1==this.dataType&&t.length>1)n=!0;else if(2==this.dataType&&1===t.length){m(l(this.fields.child.toString(),t[0]))||(n=!0)}var o,s,a=this.getElement(e);if(i=a?a.getAttribute("data-uid"):e?e.toString():null,this.refreshData=this.getNodeObject(i),t=JSON.parse(JSON.stringify(t)),1==this.dataType&&n){for(var r=0;r<t.length;r++)if(m(t[r][this.fields.parentID])){s=t[r],t.splice(r,1);break}o=f({},this.refreshData,s)}else o=f({},this.refreshData,t[0]);if(m(a))this.updatePosition(i,o,n,t);else{this.isRefreshed=!0;var d=parseFloat(a.getAttribute("aria-level")),h=bl.createListItemFromJson(this.createElement,[o],this.listBaseOption,d),p=Ee("."+Pb,a),c=l(this.fields.child.toString(),o);if(n&&p||n&&!m(c)){var g=a.parentElement,y=Array.prototype.indexOf.call(g.childNodes,a);ke(a),g.insertBefore(h[0],g.childNodes[y]),this.updatePosition(i,o,n,t),n&&p&&this.expandAll([i])}else{var v=Ee("."+_b,a),w=Ee("."+_b,h[0]),b=Ee("div."+Rb,v),S=Ee("div."+Rb,w);b&&S&&(S.classList.contains(Nb)&&b.classList.contains(Db)?(Se([S],Nb),be([S],Db)):S.classList.contains(Db)&&b.classList.contains(Nb)?(Se([S],Db),be([S],Nb)):b.classList.contains("interaction")&&be([S],"interaction")),ke(v);var C=Ee("."+tS,a);C.parentNode.insertBefore(w,C.nextSibling),this.updatePosition(i,o,n,t)}if(a=this.getElement(e),o[this.fields.tooltip]&&a.setAttribute("title",o[this.fields.tooltip]),o.hasOwnProperty(this.fields.htmlAttributes)&&o[this.fields.htmlAttributes]){var x={};u(x,o[this.fields.htmlAttributes]),x.class?(be([a],x.class.split(" ")),delete x.class):Ve(a,x)}-1!==this.selectedNodes.indexOf(i)&&(a.setAttribute("aria-selected","true"),be([a],Bb)),this.isRefreshed=!1,this.triggerEvent("refreshNode",[this.getNode(a)])}}},t.prototype.removeNodes=function(e){m(e)||(this.fields.dataSource instanceof Fl&&!this.isOffline?this.crudOperation("delete",e):this.deleteSuccess(e))},t.prototype.updateNode=function(e,t){var i=this;if(!m(e)&&!m(t)&&this.allowEditing){var n=this.getElement(e);if(!m(n)){var o=Ee("."+Lb,n);this.updateOldText(n);var s=this.getEditEvent(n,null,null);this.trigger("nodeEditing",s,(function(s){s.cancel||(i.fields.dataSource instanceof Fl&&!i.isOffline?i.crudOperation("update",null,e,t,null,null,!1):i.appendNewText(n,o,t,!1))}))}}},t.prototype.uncheckAll=function(e){this.showCheckBox&&this.doCheckBoxAction(e,!1)},kb([Ge(!1)],t.prototype,"allowDragAndDrop",void 0),kb([Ge(!1)],t.prototype,"allowEditing",void 0),kb([Ge(!1)],t.prototype,"allowMultiSelection",void 0),kb([Ge(!1)],t.prototype,"allowTextWrap",void 0),kb([Je({},wS)],t.prototype,"animation",void 0),kb([Ge()],t.prototype,"checkedNodes",void 0),kb([Ge("")],t.prototype,"cssClass",void 0),kb([Ge(!1)],t.prototype,"disabled",void 0),kb([Ge(null)],t.prototype,"dragArea",void 0),kb([Ge(!1)],t.prototype,"enableHtmlSanitizer",void 0),kb([Ge(!1)],t.prototype,"enablePersistence",void 0),kb([Ge()],t.prototype,"expandedNodes",void 0),kb([Ge("Auto")],t.prototype,"expandOn",void 0),kb([Je({},yS)],t.prototype,"fields",void 0),kb([Ge(!0)],t.prototype,"fullRowSelect",void 0),kb([Ge(!0)],t.prototype,"loadOnDemand",void 0),kb([Ge()],t.prototype,"locale",void 0),kb([Ge()],t.prototype,"nodeTemplate",void 0),kb([Ge()],t.prototype,"selectedNodes",void 0),kb([Ge("None")],t.prototype,"sortOrder",void 0),kb([Ge(!1)],t.prototype,"showCheckBox",void 0),kb([Ge(!0)],t.prototype,"autoCheck",void 0),kb([Ge(!1)],t.prototype,"fullRowNavigable",void 0),kb([$e()],t.prototype,"actionFailure",void 0),kb([$e()],t.prototype,"created",void 0),kb([$e()],t.prototype,"dataBound",void 0),kb([$e()],t.prototype,"dataSourceChanged",void 0),kb([$e()],t.prototype,"drawNode",void 0),kb([$e()],t.prototype,"destroyed",void 0),kb([$e()],t.prototype,"keyPress",void 0),kb([$e()],t.prototype,"nodeChecked",void 0),kb([$e()],t.prototype,"nodeChecking",void 0),kb([$e()],t.prototype,"nodeClicked",void 0),kb([$e()],t.prototype,"nodeCollapsed",void 0),kb([$e()],t.prototype,"nodeCollapsing",void 0),kb([$e()],t.prototype,"nodeDragging",void 0),kb([$e()],t.prototype,"nodeDragStart",void 0),kb([$e()],t.prototype,"nodeDragStop",void 0),kb([$e()],t.prototype,"nodeDropped",void 0),kb([$e()],t.prototype,"nodeEdited",void 0),kb([$e()],t.prototype,"nodeEditing",void 0),kb([$e()],t.prototype,"nodeExpanded",void 0),kb([$e()],t.prototype,"nodeExpanding",void 0),kb([$e()],t.prototype,"nodeSelected",void 0),kb([$e()],t.prototype,"nodeSelecting",void 0),t=i=kb([et],t)}(Dt),SS=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),CS=function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},xS={None:[],SlideLeft:["SlideRightOut","SlideLeftOut","SlideLeftIn","SlideRightIn"],SlideDown:["SlideTopOut","SlideBottomOut","SlideBottomIn","SlideTopIn"],Zoom:["FadeOut","FadeZoomOut","FadeZoomIn","FadeIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},MS={None:[],SlideLeft:["SlideLeftOut","SlideRightOut","SlideRightIn","SlideLeftIn"],SlideDown:["SlideBottomOut","SlideTopOut","SlideTopIn","SlideBottomIn"],Zoom:["FadeZoomOut","FadeOut","FadeIn","FadeZoomIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},IS={root:"e-listview",hover:"e-hover",selected:"e-active",focused:"e-focused",parentItem:"e-list-parent",listItem:"e-list-item",listIcon:"e-list-icon",textContent:"e-text-content",listItemText:"e-list-text",groupListItem:"e-list-group-item",hasChild:"e-has-child",view:"e-view",header:"e-list-header",headerText:"e-headertext",headerTemplateText:"e-headertemplate-text",text:"e-text",disable:"e-disabled",content:"e-content",icon:"e-icons",backIcon:"e-icon-back",backButton:"e-back-button",checkboxWrapper:"e-checkbox-wrapper",checkbox:"e-checkbox",checked:"e-check",checklist:"e-checklist",checkboxIcon:"e-frame",checkboxRight:"e-checkbox-right",checkboxLeft:"e-checkbox-left",listviewCheckbox:"e-listview-checkbox",itemCheckList:"e-checklist",virtualElementContainer:"e-list-virtualcontainer"},TS="Template",AS="GroupTemplate",kS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return SS(t,e),CS([Ge("id")],t.prototype,"id",void 0),CS([Ge("text")],t.prototype,"text",void 0),CS([Ge("isChecked")],t.prototype,"isChecked",void 0),CS([Ge("isVisible")],t.prototype,"isVisible",void 0),CS([Ge("enabled")],t.prototype,"enabled",void 0),CS([Ge("iconCss")],t.prototype,"iconCss",void 0),CS([Ge("child")],t.prototype,"child",void 0),CS([Ge("tooltip")],t.prototype,"tooltip",void 0),CS([Ge("groupBy")],t.prototype,"groupBy",void 0),CS([Ge("text")],t.prototype,"sortBy",void 0),CS([Ge("htmlAttributes")],t.prototype,"htmlAttributes",void 0),CS([Ge("tableName")],t.prototype,"tableName",void 0),t}(mt),VS=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.previousSelectedItems=[],n.hiddenItems=[],n.enabledItems=[],n.disabledItems=[],n}return SS(t,e),t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"htmlAttributes":this.setHTMLAttribute();break;case"cssClass":this.setCSSClass(t.cssClass);break;case"enable":this.setEnable();break;case"width":case"height":this.setSize();break;case"enableRtl":this.setEnableRTL();break;case"fields":this.listBaseOption.fields=this.fields.properties,this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.reRender();break;case"headerTitle":this.curDSLevel.length||this.header(this.headerTitle,!1,"header");break;case"query":case"dataSource":this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.reRender();break;case"showHeader":this.header(this.headerTitle,!1,"header");break;case"enableVirtualization":m(this.contentContainer)||Ae(this.contentContainer),this.refresh();break;case"showCheckBox":case"checkBoxPosition":this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.setCheckbox();break;case"sortOrder":case"template":this.enableVirtualization||this.refresh();break;case"showIcon":this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():(this.listBaseOption.showIcon=this.showIcon,this.curViewDS=this.getSubDS(),this.resetCurrentList())}}},t.prototype.setHTMLAttribute=function(){Object.keys(this.htmlAttributes).length&&Ve(this.element,this.htmlAttributes)},t.prototype.setCSSClass=function(e){this.cssClass&&be([this.element],this.cssClass.split(" ").filter((function(e){return e}))),e&&Se([this.element],e.split(" ").filter((function(e){return e})))},t.prototype.setSize=function(){this.element.style.height=b(this.height),this.element.style.width=b(this.width),this.isWindow=!this.element.clientHeight},t.prototype.setEnable=function(){this.enableElement(this.element,this.enable)},t.prototype.setEnableRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},t.prototype.enableElement=function(e,t){t?e.classList.remove(IS.disable):e.classList.add(IS.disable)},t.prototype.header=function(e,t,i){if(void 0===this.headerEle&&this.showHeader){this.enableHtmlSanitizer&&this.setProperties({headerTitle:Vi.sanitize(this.headerTitle)},!0),this.headerEle=this.createElement("div",{className:IS.header});var n=this.createElement("span",{className:IS.headerText,innerHTML:this.headerTitle}),o=this.createElement("div",{className:IS.text,innerHTML:n.outerHTML}),s=this.createElement("div",{className:IS.icon+" "+IS.backIcon+" "+IS.backButton,attrs:{style:"display:none;"}});if(this.headerEle.appendChild(s),this.headerEle.appendChild(o),this.headerTemplate){var a=Mi(this.headerTemplate),r=this.createElement("div",{className:IS.headerTemplateText}),l=a({},this,i,this.LISTVIEW_HEADERTEMPLATE_ID,null,null,this.headerEle);l&&Ie(l,r),Ie([r],this.headerEle),this.isReact&&this.renderReactTemplates()}this.headerTemplate&&this.headerTitle&&o.classList.add("header"),this.element.classList.add("e-has-header"),Me([this.headerEle],this.element)}else if(this.headerEle)if(this.showHeader){this.headerEle.style.display="";o=this.headerEle.querySelector("."+IS.headerText),s=this.headerEle.querySelector("."+IS.backIcon);this.enableHtmlSanitizer&&(e=Vi.sanitize(e)),o.innerHTML=e,this.headerTemplate&&t&&(o.parentElement.classList.remove("header"),this.headerEle.querySelector("."+IS.headerTemplateText).classList.add("nested-header")),this.headerTemplate&&!t&&(o.parentElement.classList.add("header"),this.headerEle.querySelector("."+IS.headerTemplateText).classList.remove("nested-header"),this.headerEle.querySelector("."+IS.headerTemplateText).classList.add("header")),s.style.display=!0===t?"":"none"}else this.headerEle.style.display="none"},t.prototype.switchView=function(e,t,i){var n=this;if(e&&t){var o=e.style.position,s="hidden"!==this.element.style.overflow?this.element.style.overflow:"";e.style.position="absolute",e.classList.add("e-view");var a=void 0,r=this.animation.duration;if(this.animation.effect)a=this.enableRtl?MS[this.animation.effect]:xS[this.animation.effect];else{a=xS.SlideLeft,i=this.enableRtl,r=0}this.element.style.overflow="hidden",this.aniObj.animate(e,{name:!0===i?a[0]:a[1],duration:r,timingFunction:this.animation.easing,end:function(t){e.style.display="none",n.element.style.overflow=s,e.style.position=o,e.classList.remove("e-view")}}),t.style.display="",this.aniObj.animate(t,{name:!0===i?a[2]:a[3],duration:r,timingFunction:this.animation.easing,end:function(){n.trigger("actionComplete")}}),this.curUL=t}},t.prototype.preRender=function(){if(this.template)try{document.querySelectorAll(this.template).length&&this.setProperties({template:document.querySelector(this.template).innerHTML.trim()},!0)}catch(e){Mi(this.template)}this.listBaseOption={template:this.template,headerTemplate:this.headerTemplate,groupTemplate:this.groupTemplate,expandCollapse:!0,listClass:"",ariaAttributes:{itemRole:"listitem",listRole:"group",itemText:"",groupItemRole:"presentation",wrapperRole:"presentation"},fields:this.fields.properties,sortOrder:this.sortOrder,showIcon:this.showIcon,itemCreated:this.renderCheckbox.bind(this),templateID:""+this.element.id+TS,groupTemplateID:""+this.element.id+AS,enableHtmlSanitizer:this.enableHtmlSanitizer},this.initialization()},t.prototype.initialization=function(){this.curDSLevel=[],this.animateOptions={},this.curViewDS=[],this.currentLiElements=[],this.isNestedList=!1,this.selectedData=[],this.selectedId=this.enablePersistence?this.selectedId:[],this.LISTVIEW_TEMPLATE_ID=""+this.element.id+TS,this.LISTVIEW_GROUPTEMPLATE_ID=""+this.element.id+AS,this.LISTVIEW_HEADERTEMPLATE_ID=this.element.id+"HeaderTemplate",this.aniObj=new st(this.animateOptions),this.removeElement(this.curUL),this.removeElement(this.ulElement),this.removeElement(this.headerEle),this.removeElement(this.contentContainer),this.curUL=this.ulElement=this.liCollection=this.headerEle=this.contentContainer=void 0},t.prototype.renderCheckbox=function(e){var t=this;if(e.item.classList.contains(IS.hasChild)&&(this.isNestedList=!0),this.showCheckBox&&this.isValidLI(e.item)){var i,n=void 0;(n=Ni(this.createElement,!1,{checked:!1,enableRtl:this.enableRtl,cssClass:IS.listviewCheckbox})).setAttribute("role","checkbox");var o=n.querySelector("."+IS.checkboxIcon);if(e.item.classList.add(IS.itemCheckList),e.item.firstElementChild.classList.add(IS.checkbox),"string"!==typeof this.dataSource[0]&&"number"!==typeof this.dataSource[0])if(i=Rl(e.curData,this.listBaseOption.fields),this.enablePersistence&&!m(this.selectedId))-1!=this.selectedId.findIndex((function(e){return e==i[t.listBaseOption.fields.id].toString()}))&&this.checkInternally(e,n);else i[this.listBaseOption.fields.isChecked]&&this.checkInternally(e,n);else"string"!==typeof this.dataSource[0]&&"number"!==typeof this.dataSource[0]||-1===this.selectedData.indexOf(e.text)||this.checkInternally(e,n);n.setAttribute("aria-checked",o.classList.contains(IS.checked)?"true":"false"),n.setAttribute("aria-label","checkbox"),"Left"===this.checkBoxPosition?(n.classList.add(IS.checkboxLeft),e.item.firstElementChild.classList.add(IS.checkboxLeft),e.item.firstElementChild.insertBefore(n,e.item.firstElementChild.childNodes[0])):(n.classList.add(IS.checkboxRight),e.item.firstElementChild.classList.add(IS.checkboxRight),e.item.firstElementChild.appendChild(n)),this.currentLiElements.push(e.item),"Left"===this.checkBoxPosition?this.virtualCheckBox=e.item.firstElementChild.children[0]:this.virtualCheckBox=e.item.firstElementChild.lastElementChild}},t.prototype.checkInternally=function(e,t){e.item.classList.add(IS.selected),t.querySelector("."+IS.checkboxIcon).classList.add(IS.checked),t.setAttribute("aria-checked","true")},t.prototype.checkItem=function(e){this.toggleCheckBase(e,!0)},t.prototype.toggleCheckBase=function(e,t){if(this.showCheckBox){var i=e;if(e instanceof Object&&e.constructor!==HTMLLIElement&&(i=this.getLiFromObjOrElement(e)),!m(i)){var n=i.querySelector("."+IS.checkboxIcon);!0===t?i.classList.add(IS.selected):i.classList.remove(IS.selected),!0===t?n.classList.add(IS.checked):n.classList.remove(IS.checked),n.parentElement.setAttribute("aria-checked",t?"true":"false")}this.setSelectedItemData(i),this.updateSelectedId()}},t.prototype.uncheckItem=function(e){this.toggleCheckBase(e,!1)},t.prototype.checkAllItems=function(){this.toggleAllCheckBase(!0)},t.prototype.uncheckAllItems=function(){this.toggleAllCheckBase(!1)},t.prototype.toggleAllCheckBase=function(e){if(this.showCheckBox){for(var t=0;t<this.liCollection.length;t++){var i=this.liCollection[t].querySelector("."+IS.checkboxIcon);i&&(e?i.classList.contains(IS.checked)||this.checkItem(this.liCollection[t]):i.classList.contains(IS.checked)&&this.uncheckItem(this.liCollection[t]))}this.enableVirtualization&&this.virtualizationModule.checkedItem(e),this.updateSelectedId()}},t.prototype.setCheckbox=function(){if(this.showCheckBox)for(var e=Array.prototype.slice.call(this.element.querySelectorAll("."+IS.listItem)),t={item:void 0,curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:""},i=0;i<e.length;i++){var n=e[i];t.item=n,t.curData=this.getItemData(n),n.querySelector("."+IS.checkboxWrapper)&&this.removeElement(n.querySelector("."+IS.checkboxWrapper)),this.renderCheckbox(t),t.item.classList.contains(IS.selected)&&this.checkInternally(t,t.item.querySelector("."+IS.checkboxWrapper))}else{for(e=Array.prototype.slice.call(this.element.querySelectorAll("."+IS.itemCheckList)),i=0;i<e.length;i++){(n=e[i]).classList.remove(IS.selected),n.firstElementChild.classList.remove(IS.checkbox),this.removeElement(n.querySelector("."+IS.checkboxWrapper))}this.selectedItems&&this.selectedItems.item.classList.add(IS.selected)}},t.prototype.refreshItemHeight=function(){this.virtualizationModule&&this.virtualizationModule.refreshItemHeight()},t.prototype.clickHandler=function(e){var t=e.target;this.targetElement=t;var i,n=t.classList;if(n.contains(IS.backIcon)||n.contains(IS.headerText))this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back();else{var o=Fe(t.parentNode,"."+IS.listItem);if(null===o&&(o=t),this.removeFocus(),this.enable&&this.showCheckBox&&this.isValidLI(o))if(e.target.classList.contains(IS.checkboxIcon)){if(o.classList.add(IS.focused),m(o.querySelector("."+IS.checked))){var s={curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:void 0,item:o};this.checkInternally(s,s.item.querySelector("."+IS.checkboxWrapper))}else this.uncheckItem(o),o.classList.add(IS.focused);if(this.enableVirtualization&&this.virtualizationModule.setCheckboxLI(o,e),e){var a=this.selectEventData(o,e);u(a,{isChecked:o.querySelector("."+IS.checkboxIcon).classList.contains(IS.checked)}),this.trigger("select",a)}}else o.classList.contains(IS.hasChild)?(this.removeHover(),this.removeSelect(),this.removeSelect(o),this.setSelectLI(o,e),o.classList.remove(IS.selected)):(this.setCheckboxLI(o,e),"INPUT"!=t.nodeName&&"TEXTAREA"!=t.nodeName||(t.classList.add("e-focused"),this.targetElement=t));else this.setSelectLI(o,e),"INPUT"!=t.nodeName&&"TEXTAREA"!=t.nodeName||(t.classList.add("e-focused"),this.targetElement=t);m(i=Fe(e.target,"li"))||i.classList.contains("e-has-child")&&!e.target.parentElement.classList.contains("e-listview-checkbox")&&i.classList.add(IS.disable)}this.updateSelectedId()},t.prototype.removeElement=function(e){return e&&e.parentNode&&e.parentNode.removeChild(e)},t.prototype.hoverHandler=function(e){var t=Fe(e.target.parentNode,"."+IS.listItem);this.setHoverLI(t)},t.prototype.leaveHandler=function(e){this.removeHover()},t.prototype.homeKeyHandler=function(e,t){if(e.preventDefault(),Object.keys(this.dataSource).length&&this.curUL){var i=this.curUL.querySelectorAll("."+IS.listItem),n=this.curUL.querySelector("."+IS.focused)||this.curUL.querySelector("."+IS.selected);n&&(n.classList.remove(IS.focused),this.showCheckBox||n.classList.remove(IS.selected));var o=t?i.length-1:0;i[o].classList.contains(IS.hasChild)||this.showCheckBox?i[o].classList.add(IS.focused):this.setSelectLI(i[o],e),i[o]?this.element.setAttribute("aria-activedescendant",i[o].id.toString()):this.element.removeAttribute("aria-activedescendant")}},t.prototype.onArrowKeyDown=function(e,t){var i,n;return!m(this.curUL.querySelector("."+IS.hasChild))||this.showCheckBox?(n=this.curUL.querySelector("."+IS.focused)||this.curUL.querySelector("."+IS.selected),m(i=bl.getSiblingLI(this.curUL.querySelectorAll("."+IS.listItem),n,t))||(n&&(n.classList.remove(IS.focused),this.showCheckBox||n.classList.remove(IS.selected)),i.classList.contains(IS.hasChild)||this.showCheckBox?i.classList.add(IS.focused):this.setSelectLI(i,e))):(n=this.curUL.querySelector("."+IS.selected),i=bl.getSiblingLI(this.curUL.querySelectorAll("."+IS.listItem),n,t),this.setSelectLI(i,e)),i?this.element.setAttribute("aria-activedescendant",i.id.toString()):this.element.removeAttribute("aria-activedescendant"),i},t.prototype.arrowKeyHandler=function(e,t){var i=this;if(e.preventDefault(),Object.keys(this.dataSource).length&&this.curUL){var n=this.onArrowKeyDown(e,t),o=this.element.getBoundingClientRect().top,s=this.element.getBoundingClientRect().height,a=this.curUL.querySelector("."+IS.listItem).getBoundingClientRect(),r=void 0,l=void 0;if(this.fields.groupBy&&(l=this.curUL.querySelector("."+IS.groupListItem).getBoundingClientRect()),n){var d=n.getBoundingClientRect().top,h=n.getBoundingClientRect().height;if(t)(r=this.isWindow?d:d-o)<0&&(!0===this.isWindow?window.scroll(0,pageYOffset+r):this.element.scrollTop=this.element.scrollTop+r);else{var p=this.isWindow?window.innerHeight:s;(r=this.isWindow?d+h:d-o+h)>p&&(!0===this.isWindow?window.scroll(0,pageYOffset+(r-p)):this.element.scrollTop=this.element.scrollTop+(r-p))}}else if(this.enableVirtualization&&t&&this.virtualizationModule.uiFirstIndex)this.onUIScrolled=function(){i.onArrowKeyDown(e,t),i.onUIScrolled=void 0},r=this.virtualizationModule.listItemHeight,!0===this.isWindow?window.scroll(0,pageYOffset-r):this.element.scrollTop=this.element.scrollTop-r;else if(t)if(this.showHeader&&this.headerEle){var c=l?l.top:a.top,u=this.headerEle.getBoundingClientRect();r=u.top<0?u.height-c:0,!0===this.isWindow?window.scroll(0,pageYOffset-r):this.element.scrollTop=0}else this.fields.groupBy&&(r=this.isWindow?l.top<0?l.top:0:o-a.top+l.height,!0===this.isWindow?window.scroll(0,pageYOffset+r):this.element.scrollTop=this.element.scrollTop-r)}},t.prototype.enterKeyHandler=function(e){if(Object.keys(this.dataSource).length&&this.curUL){var t=!m(this.curUL.querySelector("."+IS.hasChild)),i=this.curUL.querySelector("."+IS.focused);t&&i&&(i.classList.remove(IS.focused),this.showCheckBox&&(this.removeSelect(),this.removeSelect(i),this.removeHover()),this.setSelectLI(i,e))}},t.prototype.spaceKeyHandler=function(e){if(e.preventDefault(),this.enable&&this.showCheckBox&&Object.keys(this.dataSource).length&&this.curUL){var t=this.curUL.querySelector("."+IS.focused),i=void 0,n=void 0;if(!m(t)&&m(t.querySelector("."+IS.checked))){var o={curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:void 0,item:t};i=o.item.querySelector("."+IS.checkboxWrapper),this.checkInternally(o,i),n=i.querySelector("."+IS.checkboxIcon+"."+IS.icon)}else this.uncheckItem(t);var s=this.selectEventData(t,e);u(s,{isChecked:!!n&&n.classList.contains(IS.checked)}),this.trigger("select",s),this.updateSelectedId()}},t.prototype.keyActionHandler=function(e){switch(e.keyCode){case 36:this.homeKeyHandler(e);break;case 35:this.homeKeyHandler(e,!0);break;case 40:this.arrowKeyHandler(e);break;case 38:this.arrowKeyHandler(e,!0);break;case 13:this.enterKeyHandler(e);break;case 8:this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back();break;case 32:!m(this.targetElement)&&this.targetElement.classList.contains("e-focused")||this.spaceKeyHandler(e)}},t.prototype.swipeActionHandler=function(e){"Right"===e.swipeDirection&&e.velocity>.5&&"touchend"===e.originalEvent.type&&(this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back())},t.prototype.focusout=function(){if(Object.keys(this.dataSource).length&&this.curUL){var e=this.curUL.querySelector("."+IS.focused);e&&(e.classList.remove(IS.focused),this.showCheckBox||this.selectedLI.classList.add(IS.selected))}},t.prototype.wireEvents=function(){ye.add(this.element,"keydown",this.keyActionHandler,this),ye.add(this.element,"click",this.clickHandler,this),ye.add(this.element,"mouseover",this.hoverHandler,this),ye.add(this.element,"mouseout",this.leaveHandler,this),ye.add(this.element,"focusout",this.focusout,this),this.touchModule=new Gt(this.element,{swipe:this.swipeActionHandler.bind(this)})},t.prototype.unWireEvents=function(){ye.remove(this.element,"click",this.clickHandler),ye.remove(this.element,"mouseover",this.hoverHandler),ye.remove(this.element,"mouseout",this.leaveHandler),ye.remove(this.element,"mouseover",this.hoverHandler),ye.remove(this.element,"mouseout",this.leaveHandler),this.touchModule.destroy()},t.prototype.removeFocus=function(){for(var e=0,t=this.element.querySelectorAll("."+IS.focused);e<t.length;e++){t[e].classList.remove(IS.focused)}},t.prototype.removeHover=function(){var e=this.element.querySelector("."+IS.hover);e&&e.classList.remove(IS.hover)},t.prototype.removeSelect=function(e){if(m(e))for(var t=0,i=this.element.querySelectorAll("."+IS.selected);t<i.length;t++){var n=i[t];this.showCheckBox&&n.querySelector("."+IS.checked)||n.classList.remove(IS.selected)}else e.classList.remove(IS.selected)},t.prototype.isValidLI=function(e){return e&&e.classList.contains(IS.listItem)&&!e.classList.contains(IS.groupListItem)&&!e.classList.contains(IS.disable)},t.prototype.setCheckboxLI=function(e,t){if(this.isValidLI(e)&&this.enable&&this.showCheckBox){this.curUL.querySelector("."+IS.focused)&&this.curUL.querySelector("."+IS.focused).classList.remove(IS.focused);var i=e.querySelector("textarea")||e.querySelector("input");e.classList.add(IS.focused),m(t)||t.target===i&&i.classList.add("e-focused");var n=e.querySelector("."+IS.checkboxWrapper),o=n.querySelector("."+IS.checkboxIcon+"."+IS.icon);this.removeHover(),o.classList.contains(IS.checked)?(o.classList.remove(IS.checked),e.classList.remove(IS.selected)):(o.classList.add(IS.checked),e.classList.add(IS.selected)),n.setAttribute("aria-checked",o.classList.contains(IS.checked)?"true":"false");var s=this.selectEventData(e,t);u(s,{isChecked:o.classList.contains(IS.checked)}),this.enableVirtualization&&this.virtualizationModule.setCheckboxLI(e,t),this.trigger("select",s),this.setSelectedItemData(e),this.renderSubList(e)}},t.prototype.selectEventData=function(e,t){var i=this.getItemData(e),n=Rl(i,this.listBaseOption.fields),o={};return u(o,!m(i)&&"string"===typeof this.dataSource[0]||"number"===typeof this.dataSource[0]?{item:e,text:e&&e.innerText.trim(),data:this.dataSource}:{item:e,text:n&&n[this.listBaseOption.fields.text],data:i}),t&&u(o,{isInteracted:!0,event:t,cancel:!1,index:this.curUL&&Array.prototype.indexOf.call(this.curUL.children,e)}),o},t.prototype.setSelectedItemData=function(e){var t=this.getItemData(e),i=Rl(t,this.listBaseOption.fields);m(t)||"string"!==typeof this.dataSource[0]&&"number"!==typeof this.dataSource[0]?this.selectedItems={item:e,text:i&&i[this.listBaseOption.fields.text],data:t}:this.selectedItems={item:e,text:e&&e.innerText.trim(),data:this.dataSource}},t.prototype.setSelectLI=function(e,t){var i=this;if(this.isValidLI(e)&&!e.classList.contains(IS.selected)&&this.enable){this.showCheckBox||this.removeSelect(),e.classList.add(IS.selected),this.removeHover(),this.setSelectedItemData(e),this.enableVirtualization&&this.virtualizationModule.setSelectLI(e,t);var n=this.selectEventData(e,t);this.trigger("select",n,(function(t){t.cancel||(i.selectedLI=e,i.renderSubList(e))}))}},t.prototype.setHoverLI=function(e){if(this.isValidLI(e)&&!e.classList.contains(IS.hover)&&this.enable){var t=this.element.querySelectorAll("."+IS.hover);t&&t.length&&Se(t,IS.hover),e.classList.contains(IS.selected)&&!this.showCheckBox||e.classList.add(IS.hover)}},t.prototype.getSubDS=function(){var e=this.curDSLevel;if(e.length){for(var t=this.localData,i=0,n=e;i<n.length;i++){var o=n[i],s={};s[this.fields.id]=o,this.curDSJSON=this.findItemFromDS(t,s);var a=Rl(this.curDSJSON,this.listBaseOption.fields);t=this.curDSJSON?a[this.fields.child]:t}return t}return this.localData},t.prototype.getItemData=function(e){var t,i=this.dataSource instanceof Fl?this.localData:this.dataSource,n=this.getElementUID(e);return t=m(this.element.querySelector("."+IS.hasChild))&&this.fields.groupBy?this.curViewDS:i,this.findItemFromDS(t,n)},t.prototype.findItemFromDS=function(e,t,i){var n,o=this;return e&&e.length&&t?e.some((function(s){var a=Rl(s,o.listBaseOption.fields);if(!t[o.fields.id]&&!t[o.fields.text]||t[o.fields.id]&&(!m(a[o.fields.id])&&a[o.fields.id].toString())!==t[o.fields.id].toString()||t[o.fields.text]&&a[o.fields.text]!==t[o.fields.text])if("object"!==typeof s&&-1!==e.indexOf(s))n=i?e:s;else if(!m(t[o.fields.id])&&m(a[o.fields.id])){var r=o.element.querySelector('[data-uid="'+t[o.fields.id]+'"]');r&&r.innerText.trim()===a[o.fields.text]&&(n=s)}else a.hasOwnProperty(o.fields.child)&&a[o.fields.child].length&&(n=o.findItemFromDS(a[o.fields.child],t,i));else n=i?e:s;return!!n})):n=e,n},t.prototype.getQuery=function(){var e=[],t=this.query?this.query:new Bl;if(!this.query){for(var i=0,n=Object.keys(this.fields.properties);i<n.length;i++){var o=n[i];"tableName"!==o&&this.fields[o]&&this.fields[o]!==bl.defaultMappedFields[o]&&-1===e.indexOf(this.fields[o])&&e.push(this.fields[o])}t.select(e),this.fields.properties.hasOwnProperty("tableName")&&t.from(this.fields.tableName)}return t},t.prototype.setViewDataSource=function(e){void 0===e&&(e=this.localData);var t=m(this.fields.sortBy)?this.fields.text:this.fields.sortBy,i=bl.addSorting(this.sortOrder,t);e&&this.fields.groupBy?"None"!==this.sortOrder?this.curViewDS=bl.groupDataSource(bl.getDataSource(e,i),this.listBaseOption.fields,this.sortOrder):this.curViewDS=bl.groupDataSource(e,this.listBaseOption.fields,this.sortOrder):e&&"None"!==this.sortOrder?this.curViewDS=bl.getDataSource(e,i):this.curViewDS=e},t.prototype.isInAnimation=function(){return this.curUL.classList.contains(".e-animate")},t.prototype.renderRemoteLists=function(e,t){this.isDestroyed||(this.localData=e.result,t.removeElement(t.contentContainer),this.renderList(),this.trigger("actionComplete",e))},t.prototype.triggerActionFailure=function(e){this.isDestroyed||this.trigger("actionFailure",e)},t.prototype.setLocalData=function(){var e=this;this.trigger("actionBegin");var t=this;if(this.dataSource instanceof Fl)this.dataSource.ready?this.dataSource.ready.then((function(i){e.isOffline=e.dataSource.dataSource.offline,e.dataSource instanceof Fl&&e.isOffline&&e.renderRemoteLists(i,t)})).catch((function(t){e.triggerActionFailure(t)})):this.dataSource.executeQuery(this.getQuery()).then((function(i){e.renderRemoteLists(i,t)})).catch((function(t){e.triggerActionFailure(t)}));else if(this.dataSource&&this.dataSource.length)this.localData=this.dataSource,this.renderList(),this.trigger("actionComplete",{data:this.localData});else{var i=this.element.querySelector("ul");i&&(ke(i),this.setProperties({dataSource:bl.createJsonFromElement(i)},!0),this.localData=this.dataSource,this.renderList(),this.trigger("actionComplete",{data:this.localData}))}},t.prototype.reRender=function(){this.removeElement(this.headerEle),this.removeElement(this.ulElement),this.removeElement(this.contentContainer),this.isReact&&this.clearTemplate(),-1===Object.keys(window).indexOf("ejsInterop")&&(this.element.innerHTML=""),this.headerEle=this.ulElement=this.liCollection=void 0,this.header(),this.setLocalData()},t.prototype.resetCurrentList=function(){this.setViewDataSource(this.curViewDS),this.contentContainer.innerHTML="",this.createList(),this.renderIntoDom(this.curUL)},t.prototype.setAttributes=function(e){for(var t=0;t<e.length;t++){var i=e[t];i.classList.contains("e-list-item")&&(i.setAttribute("id",this.element.id+"_"+i.getAttribute("data-uid")),i.setAttribute("tabindex","-1"))}},t.prototype.createList=function(){this.currentLiElements=[],this.isNestedList=!1,this.ulElement=this.curUL=bl.createList(this.createElement,this.curViewDS,this.listBaseOption,null,this),this.liCollection=this.curUL.querySelectorAll("."+IS.listItem),this.setAttributes(this.liCollection)},t.prototype.exceptionEvent=function(e){this.trigger("actionFailure",e)},t.prototype.UpdateCurrentUL=function(){this.ulElement=this.curUL=this.element.querySelector("."+IS.parentItem),this.curUL&&(this.liCollection=this.curUL.querySelectorAll("."+IS.listItem))},t.prototype.renderSubList=function(e){this.liElement=e;var t=e.getAttribute("data-uid");if(e.classList.contains(IS.hasChild)&&t){var i=Fe(e.parentNode,"."+IS.parentItem),n=this.element.querySelector("[pid='"+t+"']");if(this.curDSLevel.push(t),this.setViewDataSource(this.getSubDS()),!n){var o=this.curViewDS;n=bl.createListFromJson(this.createElement,o,this.listBaseOption,this.curDSLevel.length,null,this),this.isReact&&this.renderReactTemplates();var s=n.querySelectorAll("."+IS.listItem);this.setAttributes(s),n.setAttribute("pID",t),n.style.display="none",this.renderIntoDom(n)}if(this.switchView(i,n),this.liCollection=this.curUL.querySelectorAll("."+IS.listItem),this.selectedItems){var a=Rl(this.selectedItems.data,this.listBaseOption.fields);this.header(a[this.listBaseOption.fields.text],!0,"header")}this.selectedLI=void 0}},t.prototype.renderIntoDom=function(e){this.contentContainer.appendChild(e)},t.prototype.renderList=function(e){this.setViewDataSource(e),this.enableVirtualization?(Object.keys(this.dataSource).length&&(!this.template&&!this.groupTemplate||this.virtualizationModule.isNgTemplate()||(this.isReact||this.isVue?("string"==typeof this.template&&(this.listBaseOption.template=null),"string"==typeof this.groupTemplate&&(this.listBaseOption.groupTemplate=null)):(this.listBaseOption.template=null,this.listBaseOption.groupTemplate=null),this.listBaseOption.itemCreated=this.virtualizationModule.createUIItem.bind(this.virtualizationModule))),this.virtualizationModule.uiVirtualization()):(this.createList(),this.contentContainer=this.createElement("div",{className:IS.content}),this.element.appendChild(this.contentContainer),this.renderIntoDom(this.ulElement),this.isReact&&this.renderReactTemplates())},t.prototype.getElementUID=function(e){var t={};return e instanceof Element?t[this.fields.id]=e.getAttribute("data-uid"):t=e,t},t.prototype.render=function(){this.element.classList.add(IS.root),Ve(this.element,{role:"list",tabindex:"0"}),this.setCSSClass(),this.setEnableRTL(),this.setEnable(),this.setSize(),this.wireEvents(),this.header(),this.setLocalData(),this.setHTMLAttribute(),this.rippleFn=at(this.element,{selector:"."+IS.listItem}),this.renderComplete()},t.prototype.destroy=function(){this.isReact&&this.clearTemplate(),this.unWireEvents();var t=[IS.root,IS.disable,"e-rtl","e-has-header","e-lib"].concat(this.cssClass.split(" ").filter((function(e){return e})));Se([this.element],t),this.element.removeAttribute("role"),this.element.removeAttribute("tabindex"),this.curUL=this.ulElement=this.liCollection=this.headerEle=void 0,this.element.innerHTML="",e.prototype.destroy.call(this)},t.prototype.back=function(){var e=this.curDSLevel[this.curDSLevel.length-1];if(void 0!==e&&!this.isInAnimation()){this.curDSLevel.pop(),this.setViewDataSource(this.getSubDS());var t=this.element.querySelector("[data-uid='"+e+"']"),i=this.curUL;t?t=t.parentElement:(this.createList(),this.renderIntoDom(this.ulElement),t=this.curUL);var n=Rl(this.curDSJSON,this.listBaseOption.fields)[this.fields.text];this.switchView(i,t,!0),this.removeFocus();var o=this.element.querySelector("[data-uid='"+e+"']");o.classList.remove(IS.disable),o.classList.add(IS.focused),this.showCheckBox&&o.querySelector("."+IS.checkboxIcon).classList.contains(IS.checked)||o.classList.remove(IS.selected),this.liCollection=this.curUL.querySelectorAll("."+IS.listItem),this.enableHtmlSanitizer&&this.setProperties({headerTitle:Vi.sanitize(this.headerTitle)},!0),this.header(this.curDSLevel.length?n:this.headerTitle,!!this.curDSLevel.length,"header")}},t.prototype.selectItem=function(e){this.enableVirtualization?this.virtualizationModule.selectItem(e):this.showCheckBox?this.setCheckboxLI(this.getLiFromObjOrElement(e)):!0===m(e)?this.removeSelect():this.setSelectLI(this.getLiFromObjOrElement(e))},t.prototype.getLiFromObjOrElement=function(e){var t,i=this.dataSource instanceof Fl?this.localData:this.dataSource;if(!m(e))if("string"===typeof i[0]||"number"===typeof i[0])if(e instanceof Element){for(var n=e.getAttribute("data-uid").toString(),o=0;o<this.liCollection.length;o++)if(this.liCollection[o].getAttribute("data-uid").toString()===n){t=this.liCollection[o];break}}else Array.prototype.some.call(this.curUL.querySelectorAll("."+IS.listItem),(function(i){return i.innerText.trim()===e.toString()&&(t=i,!0)}));else{var s=this.getItemData(e),a=Rl(s,this.listBaseOption.fields);if(s&&(t=this.element.querySelector('[data-uid="'+a[this.fields.id]+'"]'),!this.enableVirtualization&&m(t))){var r=this.element.querySelectorAll("."+IS.listItem);for(o=0;o<r.length;o++)r[o].innerText.trim()===a[this.fields.text]&&(t=r[o])}}return t},t.prototype.selectMultipleItems=function(e){if(!m(e))for(var t=0;t<e.length;t++)m(e[t])||this.selectItem(e[t])},t.prototype.getParentId=function(){var e=[];if(this.isNestedList)for(var t=this.curDSLevel.length-1;t>=0;t--)e.push(this.curDSLevel[t]);return e},t.prototype.updateSelectedId=function(){this.selectedId=[];for(var e=this.curUL.getElementsByClassName(IS.selected),t=0;t<e.length;t++){var i=this.getItemData(e[t]);i[this.listBaseOption.fields.id]&&this.selectedId.push(i[this.listBaseOption.fields.id])}},t.prototype.getSelectedItems=function(){var e,t=!1;this.selectedId=[];var i=this.dataSource instanceof Fl?this.localData:this.dataSource;if(this.enableVirtualization&&!t)e=this.virtualizationModule.getSelectedItems(),t=!0;else if(this.showCheckBox&&!t){var n=this.curUL.getElementsByClassName(IS.selected),o=[],s=[];this.selectedId=[];for(var a=[],r=0;r<n.length;r++)if("string"===typeof i[0]||"number"===typeof i[0])o.push(n[r].innerText.trim());else{var l=this.getItemData(n[r]),d=Rl(l,this.listBaseOption.fields);this.isNestedList?a.push({data:l,parentId:this.getParentId()}):s.push(l),d?(o.push(d[this.listBaseOption.fields.text]),this.selectedId.push(d[this.listBaseOption.fields.id])):(o.push(void 0),this.selectedId.push(void 0))}"string"!==typeof i[0]&&"number"!==typeof i[0]||t||(e={item:n,data:i,text:o},t=!0),this.isNestedList&&!t?(e={item:n,data:a,text:o},t=!0):t||(e={item:n,data:s,text:o},t=!0)}else if(!t){var h=this.element.getElementsByClassName(IS.selected)[0];d=Rl(this.getItemData(h),this.listBaseOption.fields);"string"!==typeof i[0]&&"number"!==typeof i[0]||t?t||(m(d)||m(h)?(e=void 0,t=!0):(this.selectedId.push(d[this.listBaseOption.fields.id]),e={text:d[this.listBaseOption.fields.text],item:h,data:this.getItemData(h)},t=!0)):(e=m(h)?void 0:{item:h,data:i,text:h.innerText.trim()},t=!0)}return e},t.prototype.findItem=function(e){return this.getItemData(e)},t.prototype.enableItem=function(e){this.setItemState(e,!0),this.enableVirtualization&&this.virtualizationModule.enableItem(e)},t.prototype.disableItem=function(e){this.setItemState(e,!1),this.enableVirtualization&&this.virtualizationModule.disableItem(e)},t.prototype.setItemState=function(e,t){var i=this.getItemData(e),n=Rl(i,this.listBaseOption.fields);if(i){var o=this.element.querySelector('[data-uid="'+n[this.fields.id]+'"]');t?(o&&o.classList.remove(IS.disable),delete i[this.fields.enabled]):t||(o&&o.classList.add(IS.disable),i[this.fields.enabled]=!1)}},t.prototype.showItem=function(e){this.showHideItem(e,!1,""),this.enableVirtualization&&this.virtualizationModule.showItem(e)},t.prototype.hideItem=function(e){this.showHideItem(e,!0,"none"),this.enableVirtualization&&this.virtualizationModule.hideItem(e)},t.prototype.showHideItem=function(e,t,i){var n=this.getItemData(e),o=Rl(n,this.listBaseOption.fields);if(n){var s=this.element.querySelector('[data-uid="'+o[this.fields.id]+'"]');s&&(s.style.display=i),t?n[this.fields.isVisible]=!1:delete n[this.fields.isVisible]}},t.prototype.addItem=function(e,t){void 0===t&&(t=void 0);var i=this.dataSource instanceof Fl?this.localData:this.dataSource;this.addItemInternally(e,t,i)},t.prototype.addItemInternally=function(e,t,i){if(e instanceof Array)if(this.enableVirtualization)this.virtualizationModule.addItem(e,t,i);else{var n=this.findItemFromDS(i,t),o=void 0;if(n)(o=Rl(n,this.listBaseOption.fields)[this.fields.child])||(o=[]),o=o.concat(e);if(n instanceof Array){for(var s=0;s<e.length;s++){i.push(e[s]),this.setViewDataSource(i);var a=this.contentContainer?this.contentContainer.children[0]:null;this.contentContainer&&a?this.addItemIntoDom(e[s],a,this.curViewDS):this.reRender()}this.liCollection=this.curUL.querySelectorAll("."+IS.listItem)}else n&&(n[this.fields.child]=o,this.addItemInNestedList(n,e))}},t.prototype.addItemInNestedList=function(e,t){var i=e[this.fields.id],n=e[this.fields.child],o=this.element.querySelector("[pid='"+i+"']"),s=this.element.querySelector("[data-uid='"+i+"']"),a=o||(s?Fe(s,"ul"):null),r=o?n:[e];if(!!s&&!s.classList.contains(IS.hasChild)){var l=bl.createListItemFromJson(this.createElement,r,this.listBaseOption,null,null,this);this.setAttributes(l),a.insertBefore(l[0],s),Ae(s),!0}if(o&&t){for(var d=0;d<t.length;d++)r.push(t[d]),this.addItemIntoDom(t[d],a,r);!0}},t.prototype.addItemIntoDom=function(e,t,i){var n=i.indexOf(e);this.addListItem(e,n,t,i);var o=i[n-1];o&&o.isHeader&&1===o.items.length&&this.addListItem(o,n-1,t,i)},t.prototype.addListItem=function(e,t,i,n){var o=this.getLiFromObjOrElement(n[t+1])||this.getLiFromObjOrElement(n[t+2])||null,s=bl.createListItemFromJson(this.createElement,[e],this.listBaseOption,null,null,this);if(this.setAttributes(s),this.template&&this.isReact&&this.renderReactTemplates(),this.fields.groupBy&&n[t+1]&&n[t+1].isHeader){var a=this.getLiFromObjOrElement(n[t-1]);a&&(o=a.nextElementSibling)}i.insertBefore(s[0],o)},t.prototype.removeItem=function(e){var t=this.dataSource instanceof Fl?this.localData:this.dataSource;this.enableVirtualization?this.virtualizationModule.removeItem(e):this.removeItemFromList(e,t)},t.prototype.removeItemFromList=function(e,t){var i,n=this,o=this.curViewDS,s=e instanceof Element?this.getElementUID(e):e;if(i=this.findItemFromDS(t,s,!0)){var a;a=this.findItemFromDS(i,s);var r=o.indexOf(a),l=this.getLiFromObjOrElement(e),d=void 0;this.validateNestedView(l),this.fields.groupBy&&this.curViewDS[r-1]&&o[r-1].isHeader&&1===o[r-1].items.length&&l&&l.previousElementSibling.classList.contains(IS.groupListItem)&&(m(l.nextElementSibling)||l.nextElementSibling&&l.nextElementSibling.classList.contains(IS.groupListItem))&&(d=l.previousElementSibling),l&&Ae(l),d&&Ae(d);var h=i.length-1<=0?this.findParent(this.localData,this.fields.id,(function(e){return e===a[n.fields.id]}),null):null,p=i.indexOf(a);if(i.splice(p,1),this.setViewDataSource(t),h&&h.parent&&Array.isArray(h.parent[this.fields.child])&&h.parent[this.fields.child].length<=0){var c=this.getLiFromObjOrElement(h.parent);if(c){var u=bl.createListItemFromJson(this.createElement,[h.parent],this.listBaseOption,null,null,this);this.setAttributes(u),c.parentElement.insertBefore(u[0],c),c.parentElement.removeChild(c)}}i.length<=0&&this.back(),this.liCollection=Array.prototype.slice.call(this.element.querySelectorAll("."+IS.listItem))}},t.prototype.validateNestedView=function(e){var t=e?e.getAttribute("data-uid").toString().toLowerCase():null;if(t&&this.curDSLevel&&this.curDSLevel.length>0)for(;this.curDSLevel.some((function(e){return e.toString().toLowerCase()===t}));)this.back()},t.prototype.removeMultipleItems=function(e){if(e.length)for(var t=0;t<e.length;t++)this.removeItem(e[t])},t.prototype.findParent=function(e,t,i,n){if(e.hasOwnProperty(t)&&!0===i(e[t]))return f({},e);for(var o=0;o<Object.keys(e).length;o++)if(e[Object.keys(e)[o]]&&"object"===typeof e[Object.keys(e)[o]]){var s=this.findParent(e[Object.keys(e)[o]],t,i,e);if(null!=s)return s.parent||(s.parent=n),s}return null},t.prototype.getModuleName=function(){return"listview"},t.prototype.requiredModules=function(){var e=[];return this.enableVirtualization&&e.push({args:[this],member:"virtualization"}),e},t.prototype.getPersistData=function(){return this.addOnPersist(["cssClass","enableRtl","htmlAttributes","enable","fields","animation","headerTitle","sortOrder","showIcon","height","width","showCheckBox","checkBoxPosition","selectedId"])},CS([Ge("")],t.prototype,"cssClass",void 0),CS([Ge(!1)],t.prototype,"enableVirtualization",void 0),CS([Ge({})],t.prototype,"htmlAttributes",void 0),CS([Ge(!0)],t.prototype,"enable",void 0),CS([Ge([])],t.prototype,"dataSource",void 0),CS([Ge()],t.prototype,"query",void 0),CS([Je(bl.defaultMappedFields,kS)],t.prototype,"fields",void 0),CS([Ge({effect:"SlideLeft",duration:400,easing:"ease"})],t.prototype,"animation",void 0),CS([Ge("None")],t.prototype,"sortOrder",void 0),CS([Ge(!1)],t.prototype,"showIcon",void 0),CS([Ge(!1)],t.prototype,"showCheckBox",void 0),CS([Ge("Left")],t.prototype,"checkBoxPosition",void 0),CS([Ge("")],t.prototype,"headerTitle",void 0),CS([Ge(!1)],t.prototype,"showHeader",void 0),CS([Ge(!1)],t.prototype,"enableHtmlSanitizer",void 0),CS([Ge("")],t.prototype,"height",void 0),CS([Ge("")],t.prototype,"width",void 0),CS([Ge(null)],t.prototype,"template",void 0),CS([Ge(null)],t.prototype,"headerTemplate",void 0),CS([Ge(null)],t.prototype,"groupTemplate",void 0),CS([$e()],t.prototype,"select",void 0),CS([$e()],t.prototype,"actionBegin",void 0),CS([$e()],t.prototype,"actionComplete",void 0),CS([$e()],t.prototype,"actionFailure",void 0),t=CS([et],t)}(Dt),ES=function(){function e(e,t){var i=this;this.childNavigateCount=0,this.bookmarkClick=function(e){if(e.event.target.classList.contains("e-icons"))i.childNavigateCount++;else{var t=e.data.Id;i.childNavigateCount=0,i.pdfViewerBase.navigationPane.goBackToToolbar();var n=i.bookmarkList.getSelectedItems();i.navigateToBookmark(t,e.text,n.data.FileName)}return!1},this.nodeClick=function(e){i.setHeight(e.node);var t=Number(e.nodeData.id),n=i.treeObj.getTreeData(e.node);if(i.navigateToBookmark(t,e.node.textContent,n[0].FileName),i.pdfViewer.annotationModule&&i.pdfViewer.annotationModule.inkAnnotationModule){var o=parseInt(i.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);i.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(o)}return!1},this.bookmarkPanelBeforeOpen=function(e){if(i.pdfViewer.enableBookmarkStyles)for(var t=0;t<i.bookmarkStyles.length;t++)if(e.text.trim()===i.bookmarkStyles[t].Text.trim()){var n=e.node.lastElementChild;if(n){for(var o=i.bookmarkStyles[t].FontStyle.split(","),s=0;s<o.length;s++)switch(o[s].trim()){case"Italic":n.style.fontStyle="italic";break;case"Bold":n.style.fontWeight="Bold"}var a=n.getElementsByClassName("e-pv-bookmark-title")[0];a?a.style.color=i.bookmarkStyles[t].Color:n.children[0].style.color=i.bookmarkStyles[t].Color}break}},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.createRequestForBookmarks=function(){var e=this,t={hashId:this.pdfViewerBase.hashId,action:"Bookmarks",elementId:this.pdfViewer.element.id,uniqueId:this.pdfViewerBase.documentId};this.pdfViewerBase.jsonDocumentId&&(t.documentId=this.pdfViewerBase.jsonDocumentId),this.pdfViewer.enableBookmarkStyles&&(t.bookmarkStyles=this.pdfViewer.enableBookmarkStyles),this.bookmarkRequestHandler=new Dh(this.pdfViewer),this.bookmarkRequestHandler.url=e.pdfViewer.serviceUrl+"/Bookmarks",this.bookmarkRequestHandler.responseType="json",this.bookmarkRequestHandler.send(t),this.bookmarkRequestHandler.onSuccess=function(t){e.pdfViewerBase.navigationPane&&e.pdfViewerBase.navigationPane.disableBookmarkButton();var i=t.data;if(i){if("object"!==typeof i)try{i=JSON.parse(i)}catch(o){e.pdfViewerBase.onControlError(500,i,"Bookmarks"),i=null}if(i&&i.uniqueId===e.pdfViewerBase.documentId&&(e.pdfViewer.fireAjaxRequestSuccess("Bookmarks",i),e.bookmarks={bookMark:i.Bookmarks},e.bookmarkStyles=i.Bookmarkstyles,e.bookmarksDestination={bookMarkDestination:i.BookmarksDestination},S())){var n={bookmarks:e.bookmarks,bookmarksDestination:e.bookmarksDestination};e.pdfViewer&&e.pdfViewer._dotnetInstance&&e.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateBookmarkCollection",n)}}e.pdfViewerBase.navigationPane&&(null==e.bookmarks?(e.pdfViewerBase.navigationPane.disableBookmarkButton(),S()&&e.pdfViewer._dotnetInstance&&e.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateBookmarkCollection",null)):(e.pdfViewerBase.navigationPane.enableBookmarkButton(),e.isBookmarkViewDiv=!1,e.pdfViewer.isBookmarkPanelOpen&&e.pdfViewerBase.navigationPane.openBookmarkcontentInitially()))},this.bookmarkRequestHandler.onFailure=function(t){e.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText,"Bookmarks")},this.bookmarkRequestHandler.onError=function(t){e.pdfViewerBase.openNotificationPopup(),e.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText,"Bookmarks")}},e.prototype.renderBookmarkcontent=function(){var e=this;if(!this.isBookmarkViewDiv){var t=S();this.bookmarkView=t?this.pdfViewer.element.querySelector(".e-pv-bookmark-view"):we("div",{id:this.pdfViewer.element.id+"_bookmark_view",className:"e-pv-bookmark-view"}),this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.bookmarkView);var i=we("div",{id:this.pdfViewer.element.id+"_bookmark_iconview",className:"e-pv-bookmark-icon-view"});if(this.pdfViewer.enableRtl){n=we("span",{id:this.pdfViewer.element.id+"_bookmark_icon",className:"e-pv-bookmark-icon e-pv-icon e-right"});i.appendChild(n)}else{var n=we("span",{id:this.pdfViewer.element.id+"_bookmark_icon",className:"e-pv-bookmark-icon e-pv-icon"});i.appendChild(n)}var o=we("div",{id:this.pdfViewer.element.id+"_bookmark_Title",className:"e-pv-bookmark-title"});this.pdfViewer.enableRtl&&(o.style.paddingRight="26px"),o.innerText="${Title}",i.appendChild(o),t||(this.treeObj=new bS({fields:{dataSource:this.bookmarks.bookMark,id:"Id",text:"Title",child:"Child",hasChildren:"HasChild"},nodeTemplate:i.outerHTML,nodeSelected:this.nodeClick.bind(this),drawNode:this.bookmarkPanelBeforeOpen.bind(this)}),this.treeObj.isStringTemplate=!0,this.pdfViewer.enableRtl&&(this.treeObj.enableRtl=!0),this.treeObj.appendTo(this.bookmarkView));for(var s=["mouseover","keydown"],a=0;a<s.length;a++)this.bookmarkView.addEventListener(s[a],(function(t){e.setHeight(t.target)}));this.isBookmarkViewDiv=!0}this.bookmarkView.style.display="block"},e.prototype.renderBookmarkContentMobile=function(){null!=this.bookmarkView&&this.bookmarkView.remove(),this.bookmarkView=we("div",{id:this.pdfViewer.element.id+"_bookmark_view",className:"e-pv-bookmark-view"}),this.pdfViewerBase.getElement("_bookmarks_container").appendChild(this.bookmarkView),this.bookmarkList=new VS({dataSource:this.bookmarks.bookMark,fields:{id:"Id",text:"Title",child:"Child"},showHeader:!1,select:this.bookmarkClick.bind(this)}),this.bookmarkList.isStringTemplate=!0,this.pdfViewer.enableRtl&&(this.bookmarkList.enableRtl=!0),this.bookmarkList.appendTo(this.bookmarkView)},e.prototype.setHeight=function(e){this.treeObj&&this.treeObj.fullRowSelect&&e.classList&&(e.classList.contains("e-treeview")?e=e.querySelector(".e-node-focus").querySelector(".e-fullrow"):e.classList.contains("e-list-parent")?e=e.querySelector(".e-fullrow"):"e-fullrow"!==e.classList.value&&(e.closest&&e.closest(".e-list-item")?e=e.closest(".e-list-item").querySelector(".e-fullrow"):e.classList.contains("e-list-item")?e=e.querySelector(".e-fullrow"):e.classList.contains("e-icons")&&e.classList.contains("interaction")&&e.parentElement.parentElement.classList.contains("e-list-item")&&(e=e.parentElement.parentElement.querySelector(".e-fullrow"))),e.nextElementSibling&&(e.style.height=e.nextElementSibling.offsetHeight+"px"))},e.prototype.setBookmarkContentHeight=function(){if(this.treeObj){var e=this.treeObj.element;this.treeObj.fullRowSelect&&(e.classList.contains("e-treeview")&&(e=e.querySelector(".e-node-focus").querySelector(".e-fullrow")),e.nextElementSibling&&(e.style.height=e.nextElementSibling.offsetHeight+"px"))}},e.prototype.navigateToBookmark=function(e,t,i){var n=this.bookmarksDestination.bookMarkDestination[e].PageIndex,o=this.bookmarksDestination.bookMarkDestination[e].Y;-1!==n&&this.goToBookmark(n,o),this.pdfViewer.fireBookmarkClick(-1!==n?n+1:n,o,t,i)},e.prototype.getBookmarks=function(){if(this.bookmarks&&this.bookmarksDestination)return{bookmarks:this.bookmarks,bookmarksDestination:this.bookmarksDestination}},e.prototype.goToBookmark=function(e,t){var i=this.pdfViewerBase.pageSize[e].height,n=(0===t?this.pdfViewerBase.pageSize[e].top*this.pdfViewerBase.getZoomFactor():this.pdfViewerBase.pageSize[e].top*this.pdfViewerBase.getZoomFactor()+(i-t)*this.pdfViewerBase.getZoomFactor()).toString();return this.pdfViewerBase.viewerContainer.scrollTop=parseInt(n),ge.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.pdfViewerBase.mobileScrollerContainer.style.display="",this.pdfViewerBase.updateMobileScrollerPosition()),this.pdfViewerBase.focusViewerContainer(),!1},e.prototype.clear=function(){if(this.pdfViewerBase.navigationPane&&(this.pdfViewerBase.navigationPane.disableBookmarkButton(),this.pdfViewerBase.navigationPane.updateViewerContainerOnClose()),this.bookmarks&&(this.bookmarks.bookMark=[],this.bookmarks=null),this.bookmarksDestination&&(this.bookmarksDestination.bookMarkDestination=[]),null!=this.bookmarkView&&!S())for(null!==this.bookmarkView.parentElement&&this.bookmarkView.parentElement.removeChild(this.bookmarkView);this.bookmarkView.hasChildNodes();)this.bookmarkView.removeChild(this.bookmarkView.lastChild);this.bookmarkRequestHandler&&this.bookmarkRequestHandler.clear()},e.prototype.destroy=function(){this.clear()},e.prototype.getModuleName=function(){return"BookmarkView"},e}(),DS=function(){function e(e,t){var i=this;this.thumbnailLimit=30,this.thumbnailThreshold=50,this.thumbnailTopMargin=10,this.isThumbnailClicked=!1,this.thumbnailClick=function(e){var t=i,n=t.getPageNumberFromID(e.srcElement.id);if(t.previousElement&&(t.previousElement.classList.remove("e-pv-thumbnail-selection"),t.previousElement.classList.remove("e-pv-thumbnail-focus"),t.previousElement.classList.add("e-pv-thumbnail-selection-ring")),e.srcElement.parentElement.id===t.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+n?(t.setSelectionStyle(e.srcElement.parentElement),t.previousElement=e.srcElement.parentElement):e.srcElement.id===t.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+n&&(t.setSelectionStyle(e.srcElement),t.previousElement=e.srcElement),t.pdfViewer.fireThumbnailClick(n+1),t.isThumbnailClicked=!0,t.goToThumbnailPage(n+1),t.pdfViewerBase.focusViewerContainer(),i.pdfViewer.annotationModule&&i.pdfViewer.annotationModule.inkAnnotationModule){var o=parseInt(i.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);i.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(o)}},this.thumbnailMouseOver=function(e){var t=i,n=t.getPageNumberFromID(e.srcElement.id);e.srcElement.id===t.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+n?t.setMouseOverStyle(e.srcElement):e.srcElement.id===t.pdfViewer.element.id+"_thumbnail_image_"+n&&t.setMouseOverStyle(e.srcElement.parentElement)},this.thumbnailMouseLeave=function(e){var t=i,n=t.getPageNumberFromID(e.srcElement.id);e.srcElement.parentElement.id===t.pdfViewer.element.id+"_thumbnail_view"?t.setMouseLeaveStyle(e.srcElement.children[0].children[0]):e.srcElement.parentElement.id===t.pdfViewer.element.id+"_thumbnail_"+n&&t.setMouseLeaveStyle(e.srcElement.parentElement.children[0])},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.createThumbnailContainer=function(){this.thumbnailView=we("div",{id:this.pdfViewer.element.id+"_thumbnail_view",className:"e-pv-thumbnail-view e-pv-thumbnail-row"}),this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.thumbnailView)},e.prototype.openThumbnailPane=function(){this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.openThumbnailPane()},e.prototype.createRequestForThumbnails=function(){var e=this;return!!document.documentMode?(this.requestCreation(e),null):new Promise((function(t,i){e.requestCreation(e)}))},e.prototype.requestCreation=function(e){e.startIndex=e.thumbnailLimit,e.thumbnailLimit=e.startIndex+e.thumbnailThreshold<e.pdfViewer.pageCount?e.startIndex+e.thumbnailThreshold:e.pdfViewer.pageCount;for(var t=!1,i=e.startIndex;i<e.thumbnailLimit;i++)e.pdfViewerBase.digitalSignaturePresent(i)&&(t=!0);var n="";t&&(n=e.pdfViewerBase.digitalSignaturePages.toString());var o={startPage:e.startIndex.toString(),endPage:e.thumbnailLimit.toString(),sizeX:"99.7",sizeY:"141",hashId:e.pdfViewerBase.hashId,action:"RenderThumbnailImages",elementId:e.pdfViewer.element.id,uniqueId:e.pdfViewerBase.documentId,digitalSignaturePresent:t,digitalSignaturePageList:n};this.pdfViewerBase.jsonDocumentId&&(o.documentId=this.pdfViewerBase.jsonDocumentId),this.thumbnailRequestHandler=new Dh(this.pdfViewer),this.thumbnailRequestHandler.url=e.pdfViewer.serviceUrl+"/"+e.pdfViewer.serverActionSettings.renderThumbnail,this.thumbnailRequestHandler.responseType="json",this.thumbnailRequestHandler.send(o),this.thumbnailRequestHandler.onSuccess=function(t){var i=t.data;if(i){if("object"!==typeof i)try{i=JSON.parse(i)}catch(o){e.pdfViewerBase.onControlError(500,i,e.pdfViewer.serverActionSettings.renderThumbnail),i=null}if(i&&i.uniqueId===e.pdfViewerBase.documentId&&(e.pdfViewer.fireAjaxRequestSuccess(e.pdfViewer.serverActionSettings.renderThumbnail,i),e.renderThumbnailImage(i),e.pdfViewer.isThumbnailViewOpen)){e.pdfViewerBase.navigationPane.isThumbnailOpen=!0,e.pdfViewerBase.navigationPane.sideBarTitle.textContent=e.pdfViewer.localeObj.getConstant("Page Thumbnails"),document.getElementById(e.pdfViewer.element.id+"_thumbnail_view").style.display="flex";var n=e.pdfViewer.element.querySelector(".e-pv-bookmark-view");n&&(n.style.display="none"),e.pdfViewerBase.navigationPane.setThumbnailSelectionIconTheme(),e.pdfViewerBase.navigationPane.updateViewerContainerOnExpand(),e.pdfViewerBase.navigationPane.isBookmarkOpen=!1}}},this.thumbnailRequestHandler.onFailure=function(t){e.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText,e.pdfViewer.serverActionSettings.renderThumbnail)},this.thumbnailRequestHandler.onError=function(t){e.pdfViewerBase.openNotificationPopup(),e.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText,e.pdfViewer.serverActionSettings.renderThumbnail)}},e.prototype.gotoThumbnailImage=function(e){var t=this.checkThumbnailScroll(e);if(this.thumbnailView){var i=this.thumbnailView.children[e];if(i){var n=i.children[0];if(t){var o=n.offsetTop+n.clientTop-this.thumbnailTopMargin;this.pdfViewerBase.navigationPane.sideBarContent.scrollTop=o}this.isThumbnailClicked||(this.previousElement&&(this.previousElement.classList.remove("e-pv-thumbnail-selection"),this.previousElement.classList.remove("e-pv-thumbnail-focus"),this.previousElement.classList.remove("e-pv-thumbnail-hover"),this.previousElement.classList.add("e-pv-thumbnail-selection-ring")),this.setFocusStyle(n,e)),this.previousElement=n.children[0]}}},e.prototype.checkThumbnailScroll=function(e){var t=!1;if(this.thumbnailView){var i=this.getVisibleThumbs(),n=i.views.length;if(n>0){var o=this.getPageNumberFromID(i.first.id),s=n>1?this.getPageNumberFromID(i.last.id):o;e<=o||e>=s?t=!0:i.views.some((function(i){var n=i.id.split("_"),o=n[n.length-1];return parseInt(o)===e&&(t=i.percent<100,!0)}))}}return t},e.prototype.getPageNumberFromID=function(e){var t=e.split("_"),i=t[t.length-1];return parseInt(i)},e.prototype.setFocusStyle=function(e,t){e.children[0].id===this.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+t&&this.setMouseFocusStyle(e.children[0])},e.prototype.renderThumbnailImage=function(e){if(this.thumbnailView)for(var t=e&&isNaN(e.startPage)?e.startPage:this.startIndex,i=e&&isNaN(e.endPage)?e.endPage:this.thumbnailLimit,n=t;n<i;n++){var o=we("a",{id:"page_"+n,attrs:{"aria-label":"Thumbnail of Page"+(n+1),tabindex:"-1",role:"link"},className:"e-pv-thumbnail-anchor-node"}),s=we("div",{id:this.pdfViewer.element.id+"_thumbnail_"+n,className:"e-pv-thumbnail e-pv-thumbnail-column"});this.thumbnailSelectionRing=we("div",{id:this.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+n,className:"e-pv-thumbnail-selection-ring"}),s.appendChild(this.thumbnailSelectionRing);var a=we("div",{id:this.pdfViewer.element.id+"_thumbnail_pagenumber_"+n,className:"e-pv-thumbnail-number"});a.textContent=(n+1).toString(),s.appendChild(a),this.thumbnailImage=we("img",{id:this.pdfViewer.element.id+"_thumbnail_image_"+n,className:"e-pv-thumbnail-image"}),this.thumbnailImage.src=e.thumbnailImage[n],this.thumbnailImage.alt=this.pdfViewer.element.id+"_thumbnail_page_"+n,this.pdfViewerBase.pageSize[n]&&this.pdfViewerBase.pageSize[n].height<this.pdfViewerBase.pageSize[n].width&&(this.thumbnailImage.style.height="86px",this.thumbnailImage.style.width="126px",s.style.height="100px",s.style.width="140px",o.style.left="-25px",o.style.position="relative",a.style.left="18px",a.style.position="relative"),this.thumbnailSelectionRing.appendChild(this.thumbnailImage),o.appendChild(s),this.thumbnailView.appendChild(o),this.wireUpEvents(),0===n&&this.setMouseFocusToFirstPage()}(this.pdfViewerBase.navigationPane.enableThumbnailButton(),this.thumbnailLimit!==this.pdfViewerBase.pageCount&&this.thumbnailView)&&(!!document.documentMode?this.createRequestForThumbnails():Promise.all([this.createRequestForThumbnails()]))},e.prototype.wireUpEvents=function(){this.thumbnailSelectionRing&&(this.thumbnailSelectionRing.addEventListener("click",this.thumbnailClick),this.thumbnailSelectionRing.addEventListener("mouseover",this.thumbnailMouseOver),this.thumbnailSelectionRing.addEventListener("mouseleave",this.thumbnailMouseLeave))},e.prototype.unwireUpEvents=function(){this.thumbnailSelectionRing&&this.thumbnailImage&&(this.thumbnailSelectionRing.removeEventListener("click",this.thumbnailClick),this.thumbnailSelectionRing.removeEventListener("mouseover",this.thumbnailMouseOver),this.thumbnailSelectionRing.removeEventListener("mouseleave",this.thumbnailMouseLeave))},e.prototype.goToThumbnailPage=function(e){e>0&&e<=this.pdfViewerBase.pageCount&&this.pdfViewerBase.currentPageNumber!==e?this.pdfViewerBase.updateScrollTop(e-1):this.isThumbnailClicked=!1},e.prototype.setSelectionStyle=function(e){e.classList.remove("e-pv-thumbnail-selection-ring"),e.classList.remove("e-pv-thumbnail-hover"),e.classList.remove("e-pv-thumbnail-focus"),e.classList.add("e-pv-thumbnail-selection")},e.prototype.setMouseOverStyle=function(e){e.classList.contains("e-pv-thumbnail-selection")||(e.classList.remove("e-pv-thumbnail-selection-ring"),e.classList.contains("e-pv-thumbnail-focus")||e.classList.add("e-pv-thumbnail-hover"))},e.prototype.setMouseLeaveStyle=function(e){e.classList.contains("e-pv-thumbnail-selection")?e.classList.contains("e-pv-thumbnail-selection")||(e.classList.remove("e-pv-thumbnail-selection"),e.classList.add("e-pv-thumbnail-focus")):(e.classList.contains("e-pv-thumbnail-focus")||e.classList.add("e-pv-thumbnail-selection-ring"),e.classList.remove("e-pv-thumbnail-hover"))},e.prototype.setMouseFocusStyle=function(e){e.classList.remove("e-pv-thumbnail-selection"),e.classList.remove("e-pv-thumbnail-hover"),e.classList.add("e-pv-thumbnail-focus")},e.prototype.setMouseFocusToFirstPage=function(){var e=this.thumbnailView.children[0];if(e){var t=e.children[0].children[0];this.setMouseFocusStyle(t),this.previousElement=t}},e.prototype.clear=function(){if(this.startIndex=0,this.thumbnailLimit=0,this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.sideBarContentContainer&&(this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display="block",this.pdfViewerBase.navigationPane.sideBarContent.scrollTop=0,this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display="none"),this.thumbnailView)for(;this.thumbnailView.hasChildNodes();)this.thumbnailView.removeChild(this.thumbnailView.lastChild);this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.resetThumbnailView(),this.thumbnailRequestHandler&&this.thumbnailRequestHandler.clear(),this.unwireUpEvents()},e.prototype.getVisibleThumbs=function(){return this.getVisibleElements(this.pdfViewerBase.navigationPane.sideBarContent,this.thumbnailView.children)},e.prototype.getVisibleElements=function(e,t){var i=e.scrollTop,n=i+e.clientHeight,o=e.scrollLeft,s=o+e.clientWidth;var a,r,l,d,h,p,c,u,f,m=[],g=0===t.length?0:this.binarySearchFirstItem(t,(function(e){return e.offsetTop+e.clientTop+e.clientHeight>i}));t.length>0&&(g=this.backtrackBeforeAllVisibleElements(g,t,i));for(var y=-1,v=g,w=t.length;v<w;v++){if(p=(r=a=this.getThumbnailElement(v)).offsetLeft+r.clientLeft,l=r.offsetTop+r.clientTop,u=p+(c=r.clientWidth),h=l+(d=r.clientHeight),-1===y)h>=n&&(y=h);else if(l>y)break;h<=i||l>=n||u<=o||p>=s||(f=(d-(Math.max(0,i-l)+Math.max(0,h-n)))*(c-(Math.max(0,o-p)+Math.max(0,u-s)))*100/d/c|0,m.push({id:a.id,x:p,y:l,view:a,percent:f}))}return{first:m[0],last:m[m.length-1],views:m}},e.prototype.binarySearchFirstItem=function(e,t){var i=0,n=e.length-1;if(0===e.length||!t(this.getThumbnailElement(n)))return e.length-1;if(t(this.getThumbnailElement(i)))return i;for(;i<n;){var o=i+n>>1;t(this.getThumbnailElement(o))?n=o:i=o+1}return i},e.prototype.backtrackBeforeAllVisibleElements=function(e,t,i){if(e<2)return e;var n=this.getThumbnailElement(e),o=n.offsetTop+n.clientTop;o>=i&&(o=(n=this.getThumbnailElement(e-1)).offsetTop+n.clientTop);for(var s=e-2;s>=0&&!((n=this.getThumbnailElement(s)).offsetTop+n.clientTop+n.clientHeight<=o);--s)e=s;return e},e.prototype.getThumbnailElement=function(e){return this.thumbnailView.children[e].children[0]},e.prototype.destroy=function(){this.clear()},e.prototype.getModuleName=function(){return"ThumbnailView"},e}(),NS=function(){function e(e,t){this.printHeight=1056,this.printWidth=816,this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.print=function(){var e,t=this;this.pdfViewerBase.pageCount>0&&(this.printViewerContainer=we("div",{id:this.pdfViewer.element.id+"_print_viewer_container",className:"e-pv-print-viewer-container"}),"Default"===this.pdfViewer.printMode?(this.pdfViewerBase.showPrintLoadingIndicator(!0),this.iframe=document.createElement("iframe"),this.iframe.className="iframeprint",this.iframe.id="iframePrint",this.iframe.style.position="fixed",this.iframe.style.top="-100000000px",document.body.appendChild(this.iframe),this.frameDoc=this.iframe.contentWindow?this.iframe.contentWindow:this.iframe.contentDocument,this.frameDoc.document.open()):(this.printWindow=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),this.printWindow.moveTo(0,0),this.printWindow.resizeTo(screen.availWidth,screen.availHeight),this.createPrintLoadingIndicator(this.printWindow.document.body)),setTimeout((function(){for(e=0;e<t.pdfViewerBase.pageCount;e++){var i=t.pdfViewerBase.pageSize[e].width,n=t.pdfViewerBase.pageSize[e].height,o=793,s=1122;t.printWidth=816,t.printHeight=1056,i>n&&(o=1122,s=793),i>=o+10||i<=o-10||n>=s+10||n<=s-10||(t.printWidth=783,t.printHeight=1110),t.pdfViewer.printModule.createRequestForPrint(e,i,n,t.pdfViewerBase.pageCount)}t.pdfViewer.firePrintEnd(t.pdfViewer.downloadFileName)}),100))},e.prototype.createRequestForPrint=function(e,t,i,n){var o=this,s={pageNumber:e.toString(),documentId:this.pdfViewerBase.documentId,hashId:this.pdfViewerBase.hashId,zoomFactor:"2",action:"PrintImages",elementId:this.pdfViewer.element.id,uniqueId:this.pdfViewerBase.documentId,digitalSignaturePresent:this.pdfViewerBase.digitalSignaturePresent(e)};this.pdfViewerBase.jsonDocumentId&&(s.documentId=this.pdfViewerBase.jsonDocumentId),o.pdfViewerBase.createFormfieldsJsonData(),o.printRequestHandler=new Dh(o.pdfViewer),o.printRequestHandler.url=o.pdfViewer.serviceUrl+"/"+o.pdfViewer.serverActionSettings.print,o.printRequestHandler.responseType=null,o.printRequestHandler.mode=!1,this.pdfViewerBase.validateForm&&this.pdfViewer.enableFormFieldsValidation?(this.pdfViewer.fireValidatedFailed(o.pdfViewer.serverActionSettings.download),this.pdfViewerBase.validateForm=!1,this.pdfViewerBase.showPrintLoadingIndicator(!1)):o.printRequestHandler.send(s),o.printRequestHandler.onSuccess=function(n){o.pdfViewerBase.isPrint=!0;var s=n.data;if(s&&"object"!==typeof s)try{"object"!==typeof(s=JSON.parse(s))&&(o.pdfViewerBase.onControlError(500,s,o.pdfViewer.serverActionSettings.print),s=null)}catch(v){o.pdfViewerBase.onControlError(500,s,o.pdfViewer.serverActionSettings.print),s=null}if(s&&s.uniqueId===o.pdfViewerBase.documentId){o.pdfViewer.fireAjaxRequestSuccess(o.pdfViewer.serverActionSettings.print,s);var a="";if(!o.pdfViewer.annotationSettings.skipPrint){var r=o.pdfViewerBase.documentAnnotationCollections;if(r&&r[s.pageNumber]&&o.pdfViewerBase.isTextMarkupAnnotationModule()){var l=r[s.pageNumber];if(o.pdfViewerBase.isImportAction){var d=l.textMarkupAnnotation,h=l.shapeAnnotation,p=l.measureShapeAnnotation,c=l.stampAnnotations,u=l.stickyNotesAnnotation;a=o.pdfViewer.annotationModule.textMarkupAnnotationModule.printTextMarkupAnnotations(d,s.pageNumber,c,h,p,u)}else a=o.pdfViewer.annotationModule.textMarkupAnnotationModule.printTextMarkupAnnotations(l.textMarkupAnnotation,s.pageNumber,l.stampAnnotations,l.shapeAnnotation,l.measureShapeAnnotation,l.stickyNoteAnnotation)}o.pdfViewerBase.isAnnotationCollectionRemoved&&(a=o.pdfViewer.annotationModule.textMarkupAnnotationModule.printTextMarkupAnnotations(null,s.pageNumber,null,null,null,null))}var f=s.pageNumber;o.printCanvas=we("canvas",{id:o.pdfViewer.element.id+"_printCanvas_"+e,className:"e-pv-print-canvas"}),o.printCanvas.style.width=t+"px",o.printCanvas.style.height=i+"px";o.printCanvas.height=2*o.printHeight*window.devicePixelRatio,o.printCanvas.width=2*o.printWidth*window.devicePixelRatio;var m=o.printCanvas.getContext("2d"),g=new Image,y=new Image;g.onload=function(){i>t||!o.pdfViewer.enablePrintRotation?(m.drawImage(g,0,0,o.printCanvas.width,o.printCanvas.height),a&&m.drawImage(y,0,0,o.printCanvas.width,o.printCanvas.height)):(m.translate(.5*o.printCanvas.width,.5*o.printCanvas.height),m.rotate(-.5*Math.PI),m.translate(.5*-o.printCanvas.height,.5*-o.printCanvas.width),m.drawImage(g,0,0,o.printCanvas.height,o.printCanvas.width),a&&m.drawImage(y,0,0,o.printCanvas.height,o.printCanvas.width)),f===o.pdfViewerBase.pageCount-1&&o.printWindowOpen(),o.pdfViewer.renderDrawing(null,e)},g.src=s.image,y.src=a,o.printViewerContainer.appendChild(o.printCanvas)}o.pdfViewerBase.isPrint=!1},this.printRequestHandler.onFailure=function(e){o.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,o.pdfViewer.serverActionSettings.print)},this.printRequestHandler.onError=function(e){o.pdfViewerBase.openNotificationPopup(),o.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,o.pdfViewer.serverActionSettings.print)}},e.prototype.renderFieldsForPrint=function(e,t,i){var n,o=null;if(n="Default"===this.pdfViewer.printMode?this.frameDoc.document.getElementById("fields_"+e):this.printWindow.document.getElementById("fields_"+e),this.pdfViewer.formFieldsModule&&(o=this.pdfViewerBase.getItemFromSessionStorage("_formfields")),this.pdfViewer.formDesignerModule){var s=null;if(this.pdfViewer.formDesignerModule&&(s=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner")),s){var a=JSON.parse(s);for(c=0;c<a.length;c++){if((u=a[c].FormField).pageNumber-1===e&&u.isPrint){var r=this.pdfViewer.nameTable[a[c].Key.split("_")[0]],l=r.wrapper.children[0],d=void 0;if(l)if("RadioButton"===u.formFieldAnnotationType){for(var h=0;h<u.radiobuttonItem.length;h++)if(r=this.pdfViewer.nameTable[u.radiobuttonItem[h].id.split("_")[0]],d=this.createFormDesignerFields(u.radiobuttonItem[h],l,r)){m=u.radiobuttonItem[h].lineBound,g=u.radiobuttonItem[h].fontFamily;this.applyPosition(d,m,g,t,i,!0,u.radiobuttonItem[h].zoomValue,u.pageNumber-1),n.appendChild(d)}}else if(d=this.createFormDesignerFields(u,l,r)){m=u.lineBound,g=u.fontFamily;this.applyPosition(d,m,g,t,i,!0,u.zoomValue,u.pageNumber-1),n.appendChild(d)}}}}}else if(o)for(var p=JSON.parse(o),c=0;c<p.length;c++){var u=p[c];if(parseFloat(u.PageIndex)===e){var f=this.pdfViewer.formFieldsModule.createFormFields(u,e,c,n).currentField;if(f){var m=u.LineBounds,g=u.Font;if(this.applyPosition(f,m,g,t,i),f.InsertSpaces=u.InsertSpaces,f.InsertSpaces){var y=parseInt(f.style.width)/f.maxLength-parseFloat(f.style.fontSize)/2-.6;f.style.letterSpacing=y+"px",f.style.fontFamily="monospace"}var v=this.pdfViewerBase.pageSize[e];if(v.width>v.height&&this.pdfViewer.enablePrintRotation){var w=this.pdfViewer.formFieldsModule.ConvertPointToPixel(m.X),b=this.pdfViewer.formFieldsModule.ConvertPointToPixel(m.Y),S=this.pdfViewer.formFieldsModule.ConvertPointToPixel(m.Width),C=this.pdfViewer.formFieldsModule.ConvertPointToPixel(m.Height),x=v.width-w-C,M=b+C;S=S,C=C;f.style.transform="rotate(-90deg)",f.style.transformOrigin="left bottom",f.style.left=M+"px",f.style.top=x+"px",f.style.height=C+"px",f.style.width=S+"px"}f.style.backgroundColor="transparent",u.IsSignatureField||(f.style.borderColor="transparent"),n.appendChild(f)}}}},e.prototype.createFormDesignerFields=function(e,t,i){var n,o,s={id:"form_field_"+t.id+"_html_element",class:"foreign-object"};o=this.pdfViewer.formDesignerModule.createHtmlElement("div",s);var a={id:t.id+"_html_element",class:"foreign-object"};return n=this.pdfViewer.formDesignerModule.createHtmlElement("div",a),"SignatureField"===e.formFieldAnnotationType||"InitialField"===e.formFieldAnnotationType?(this.pdfViewer.formDesignerModule.disableSignatureClickEvent=!0,t.template=n.appendChild(this.pdfViewer.formDesignerModule.createSignatureDialog(this.pdfViewer,i,null,!0)),this.pdfViewer.formDesignerModule.disableSignatureClickEvent=!1):"DropdownList"===e.formFieldAnnotationType?t.template=n.appendChild(this.pdfViewer.formDesignerModule.createDropDownList(t,i,!0)):"ListBox"===e.formFieldAnnotationType?t.template=n.appendChild(this.pdfViewer.formDesignerModule.createListBox(t,i,!0)):t.template=n.appendChild(this.pdfViewer.formDesignerModule.createInputElement(e.formFieldAnnotationType,i,null,!0)),o.appendChild(n),n},e.prototype.applyPosition=function(e,t,i,n,o,s,a,r){if(t){var l,d=void 0,h=void 0,p=void 0,c=this.pdfViewerBase.pageSize[r],u=c?c.width:0,f=c?c.height:0;s&&f<u&&this.pdfViewer.enablePrintRotation?(l=u-t.X/a-t.Height/a,d=(t.Y+t.Height)/a,h=t.Width/a,p=t.Height/a,e.style.transform="rotate(-90deg)",e.style.transformOrigin="left bottom"):(d=s?t.X/a/o:this.pdfViewer.formFieldsModule.ConvertPointToPixel(t.X)/o,l=s?t.Y/a/n:this.pdfViewer.formFieldsModule.ConvertPointToPixel(t.Y)/n,h=s?t.Width/a/o:this.pdfViewer.formFieldsModule.ConvertPointToPixel(t.Width)/o,p=s?t.Height/a/n:this.pdfViewer.formFieldsModule.ConvertPointToPixel(t.Height)/n);var m=0;null!==i&&i.Height&&(e.style.fontFamily=i.Name,i.Italic&&(e.style.fontStyle="italic"),i.Bold&&(e.style.fontWeight="Bold"),m=this.pdfViewerBase.ConvertPointToPixel(i.Size)),ge.isIE&&(l-=1),this.pdfViewerBase.setStyleToTextDiv(e,d,l,m,h,p,!0)}},e.prototype.printWindowOpen=function(){var e,t=this,i=navigator.userAgent;e="Default"===this.pdfViewer.printMode?this.frameDoc.document:this.printWindow.document;for(var n=0;n<this.printViewerContainer.children.length;n++){var o=this.printViewerContainer.children[n].toDataURL();if(e.write('<div style="margin:0mm;width:'+this.printWidth.toString()+"px;height:"+this.printHeight.toString()+'px;position:relative"><img src="'+o+'" id="image_'+n+'" /><div id="fields_'+n+'" style="margin:0px;top:0px;left:0px;position:absolute;width:'+this.printWidth.toString()+"px;height:"+this.printHeight.toString()+'px;z-index:2"></div></div>'),this.pdfViewer.formFieldsModule||this.pdfViewer.formDesignerModule){var s,a,r=this.pdfViewerBase.pageSize[n].width,l=this.pdfViewerBase.pageSize[n].height;l<r&&this.pdfViewer.enablePrintRotation?(s=l/this.printWidth,a=r/this.printHeight):(s=l/this.printHeight,a=r/this.printWidth),this.renderFieldsForPrint(n,s,a)}0===n&&(-1!==i.indexOf("Chrome")||-1!==i.indexOf("Safari")||-1!==i.indexOf("Firefox")?(e.write("<!DOCTYPE html>"),e.write("<html moznomarginboxes mozdisallowselectionprint><head><style>html, body { height: 100%; width:100% } img { height: 100%; width: 100%; display: block; }@media print { body { margin: 0cm; } img { width:100%; width:100%; box-sizing: border-box; }br, button { display: none; } div{ page-break-inside: avoid; }} @page{margin:0mm;  size:"+this.printWidth.toString()+"px "+this.printHeight.toString()+"px; }</style></head><body>")):(e.write("<!DOCTYPE html>"),e.write("<html><head><style>html, body { height: 100%; } img { height: 100%; width: 100%; }@media print { body { margin: 0cm; }img { width:100%; width:100%; box-sizing: border-box; }br, button { display: none; } div{ page-break-inside: avoid; }} @page{margin:0mm;  size:"+this.printWidth.toString()+"px "+this.printHeight.toString()+"px; }</style></head><body>")))}if(ge.isIE||"edge"===ge.info.name)try{"Default"===this.pdfViewer.printMode?(this.pdfViewerBase.showPrintLoadingIndicator(!1),this.iframe.contentWindow.document.execCommand("print",!1,null)):this.printWindow.document.execCommand("print",!1,null)}catch(d){"Default"===this.pdfViewer.printMode?(this.pdfViewerBase.showPrintLoadingIndicator(!1),this.iframe.contentWindow.print()):this.printWindow.print()}else setTimeout((function(){if("Default"===t.pdfViewer.printMode)if(t.pdfViewerBase.showPrintLoadingIndicator(!1),t.iframe.contentWindow.print(),t.iframe.contentWindow.focus(),t.pdfViewerBase.isDeviceiOS||ge.isDevice){var e=t;window.onafterprint=function(t){document.body.removeChild(e.iframe)}}else document.body.removeChild(t.iframe);else t.printWindow&&(t.printWindow.print(),t.printWindow.focus(),ge.isDevice&&!t.pdfViewerBase.isDeviceiOS||t.printWindow.close())}),200)},e.prototype.createPrintLoadingIndicator=function(e){var t=we("div",{id:this.pdfViewer.element.id+"_printWindowcontainer"});t.style.height="100%",t.style.width="100%",t.style.position="absolute",t.style.zIndex=2e3,t.style.left=0,t.style.top=0,t.style.overflow="auto",t.style.backgroundColor="rgba(0, 0, 0, 0.3)",e.appendChild(t);var i=we("div",{id:this.pdfViewer.element.id+"_printLoadingContainer"});i.style.position="absolute",i.style.width="50px",i.style.height="50px",i.style.left="46%",i.style.top="45%",t.style.zIndex=3e3,t.appendChild(i);var n=new Image;n.src="data:image/gif;base64,R0lGODlhNgA3APMAAP///wAAAHh4eBwcHA4ODtjY2FRUVNzc3MTExEhISIqKigAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAANgA3AAAEzBDISau9OOvNu/9gKI5kaZ4lkhBEgqCnws6EApMITb93uOqsRC8EpA1Bxdnx8wMKl51ckXcsGFiGAkamsy0LA9pAe1EFqRbBYCAYXXUGk4DWJhZN4dlAlMSLRW80cSVzM3UgB3ksAwcnamwkB28GjVCWl5iZmpucnZ4cj4eWoRqFLKJHpgSoFIoEe5ausBeyl7UYqqw9uaVrukOkn8LDxMXGx8ibwY6+JLxydCO3JdMg1dJ/Is+E0SPLcs3Jnt/F28XXw+jC5uXh4u89EQAh+QQJCgAAACwAAAAANgA3AAAEzhDISau9OOvNu/9gKI5kaZ5oqhYGQRiFWhaD6w6xLLa2a+iiXg8YEtqIIF7vh/QcarbB4YJIuBKIpuTAM0wtCqNiJBgMBCaE0ZUFCXpoknWdCEFvpfURdCcM8noEIW82cSNzRnWDZoYjamttWhphQmOSHFVXkZecnZ6foKFujJdlZxqELo1AqQSrFH1/TbEZtLM9shetrzK7qKSSpryixMXGx8jJyifCKc1kcMzRIrYl1Xy4J9cfvibdIs/MwMue4cffxtvE6qLoxubk8ScRACH5BAkKAAAALAAAAAA2ADcAAATOEMhJq7046827/2AojmRpnmiqrqwwDAJbCkRNxLI42MSQ6zzfD0Sz4YYfFwyZKxhqhgJJeSQVdraBNFSsVUVPHsEAzJrEtnJNSELXRN2bKcwjw19f0QG7PjA7B2EGfn+FhoeIiYoSCAk1CQiLFQpoChlUQwhuBJEWcXkpjm4JF3w9P5tvFqZsLKkEF58/omiksXiZm52SlGKWkhONj7vAxcbHyMkTmCjMcDygRNAjrCfVaqcm11zTJrIjzt64yojhxd/G28XqwOjG5uTxJhEAIfkECQoAAAAsAAAAADYANwAABM0QyEmrvTjrzbv/YCiOZGmeaKqurDAMAlsKRE3EsjjYxJDrPN8PRLPhhh8XDMk0KY/OF5TIm4qKNWtnZxOWuDUvCNw7kcXJ6gl7Iz1T76Z8Tq/b7/i8qmCoGQoacT8FZ4AXbFopfTwEBhhnQ4w2j0GRkgQYiEOLPI6ZUkgHZwd6EweLBqSlq6ytricICTUJCKwKkgojgiMIlwS1VEYlspcJIZAkvjXHlcnKIZokxJLG0KAlvZfAebeMuUi7FbGz2z/Rq8jozavn7Nev8CsRACH5BAkKAAAALAAAAAA2ADcAAATLEMhJq7046827/2AojmRpnmiqrqwwDAJbCkRNxLI42MSQ6zzfD0Sz4YYfFwzJNCmPzheUyJuKijVrZ2cTlrg1LwjcO5HFyeoJeyM9U++mfE6v2+/4PD6O5F/YWiqAGWdIhRiHP4kWg0ONGH4/kXqUlZaXmJlMBQY1BgVuUicFZ6AhjyOdPAQGQF0mqzauYbCxBFdqJao8rVeiGQgJNQkIFwdnB0MKsQrGqgbJPwi2BMV5wrYJetQ129x62LHaedO21nnLq82VwcPnIhEAIfkECQoAAAAsAAAAADYANwAABMwQyEmrvTjrzbv/YCiOZGmeaKqurDAMAlsKRE3EsjjYxJDrPN8PRLPhhh8XDMk0KY/OF5TIm4qKNWtnZxOWuDUvCNw7kcXJ6gl7Iz1T76Z8Tq/b7/g8Po7kX9haKoAZZ0iFGIc/iRaDQ40Yfj+RepSVlpeYAAgJNQkIlgo8NQqUCKI2nzNSIpynBAkzaiCuNl9BIbQ1tl0hraewbrIfpq6pbqsioaKkFwUGNQYFSJudxhUFZ9KUz6IGlbTfrpXcPN6UB2cHlgfcBuqZKBEAIfkECQoAAAAsAAAAADYANwAABMwQyEmrvTjrzbv/YCiOZGmeaKqurDAMAlsKRE3EsjjYxJDrPN8PRLPhhh8XDMk0KY/OF5TIm4qKNWtnZxOWuDUvCNw7kcXJ6gl7Iz1T76Z8Tq/b7yJEopZA4CsKPDUKfxIIgjZ+P3EWe4gECYtqFo82P2cXlTWXQReOiJE5bFqHj4qiUhmBgoSFho59rrKztLVMBQY1BgWzBWe8UUsiuYIGTpMglSaYIcpfnSHEPMYzyB8HZwdrqSMHxAbath2MsqO0zLLorua05OLvJxEAIfkECQoAAAAsAAAAADYANwAABMwQyEmrvTjrzbv/YCiOZGmeaKqurDAMAlsKRE3EsjjYxJDrPN8PRLPhfohELYHQuGBDgIJXU0Q5CKqtOXsdP0otITHjfTtiW2lnE37StXUwFNaSScXaGZvm4r0jU1RWV1hhTIWJiouMjVcFBjUGBY4WBWw1A5RDT3sTkVQGnGYYaUOYPaVip3MXoDyiP3k3GAeoAwdRnRoHoAa5lcHCw8TFxscduyjKIrOeRKRAbSe3I9Um1yHOJ9sjzCbfyInhwt3E2cPo5dHF5OLvJREAOwAAAAAAAAAAAA==",n.style.width="50px",n.style.height="50px",i.appendChild(n);var o=we("div",{id:this.pdfViewer.element.id+"_printLabelContainer"});o.style.position="absolute",o.textContent="Loading ...",o.style.fontWeight="Bold",o.style.left="46%",o.style.top="54.5%",o.style.zIndex="3000",t.appendChild(o)},e.prototype.destroy=function(){this.printViewerContainer=void 0,this.frameDoc=void 0,this.printWindow=void 0},e.prototype.getModuleName=function(){return"Print"},e}(),FS=function(){function e(e,t){var i=this;this.isTextSelection=!1,this.selectionStartPage=null,this.isBackwardPropagatedSelection=!1,this.contextMenuHeight=144,this.backwardStart=0,this.selectionRangeArray=[],this.selectionAnchorTouch=null,this.selectionFocusTouch=null,this.scrollMoveTimer=0,this.isMouseLeaveSelection=!1,this.isTouchSelection=!1,this.previousScrollDifference=0,this.topStoreLeft=null,this.topStoreRight=null,this.isTextSearched=!1,this.isSelectionStartTriggered=!1,this.allTextContent="",this.onLeftTouchSelectElementTouchStart=function(e){i.initiateSelectionByTouch()},this.onRightTouchSelectElementTouchStart=function(e){i.initiateSelectionByTouch()},this.onLeftTouchSelectElementTouchEnd=function(e){i.terminateSelectionByTouch(e)},this.onRightTouchSelectElementTouchEnd=function(e){i.terminateSelectionByTouch(e)},this.onLeftTouchSelectElementTouchMove=function(e){var t;e.preventDefault(),e.target.style.zIndex="0";var n=i.dropDivElementRight,o=i.isTouchedWithinContainer(e);if(n&&o){var s=n.getBoundingClientRect(),a=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY;if(e.target.style.zIndex="1000",t=i.getNodeElement(undefined,a,r,e,t)){var l=Math.sqrt((r-s.top)*(r-s.top)+(a-s.left)*(a-s.left)),d=i.isCloserTouchScroll(l),h=!1;if(r<=s.top?(i.dropElementLeft.style.transform="rotate(0deg)",i.dropElementRight.style.transform="rotate(-90deg)",h=i.selectTextByTouch(t.parentElement,a,r,!1,"left",d)):(i.dropElementLeft.style.transform="rotate(-90deg)",i.dropElementRight.style.transform="rotate(0deg)",h=i.selectTextByTouch(t.parentElement,a,r,!0,"left",d)),h){var p=i.dropDivElementLeft.getBoundingClientRect(),c=i.pdfViewerBase.pageSize[i.pdfViewerBase.currentPageNumber-1].top,u=i.getClientValueTop(r,i.pdfViewerBase.currentPageNumber-1),f=a-i.pdfViewerBase.getElement("_pageDiv_"+(i.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect().left;i.dropDivElementLeft.style.top=c*i.pdfViewerBase.getZoomFactor()+u+"px",i.topStoreLeft={pageTop:c,topClientValue:i.getMagnifiedValue(u),pageNumber:i.pdfViewerBase.currentPageNumber-1,left:i.getMagnifiedValue(f),isHeightNeeded:!1},i.dropDivElementLeft.style.left=a-i.pdfViewerBase.viewerContainer.getBoundingClientRect().left-p.width/2+"px",i.previousScrollDifference=l}}}},this.onRightTouchSelectElementTouchMove=function(e){var t;e.preventDefault(),e.target.style.zIndex="0";var n=i.dropDivElementLeft,o=i.isTouchedWithinContainer(e);if(n&&o){var s=n.getBoundingClientRect(),a=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY;if(e.target.style.zIndex="1000",t=i.getNodeElement(undefined,a,r,e,t)){var l=Math.sqrt((r-s.top)*(r-s.top)+(a-s.left)*(a-s.left)),d=i.isCloserTouchScroll(l),h=!1;if(r>=s.top?(i.dropElementRight.style.transform="rotate(-90deg)",i.dropElementLeft.style.transform="rotate(0deg)",h=i.selectTextByTouch(t.parentElement,a,r,!0,"right",d)):(i.dropElementRight.style.transform="rotate(0deg)",i.dropElementLeft.style.transform="rotate(-90deg)",h=i.selectTextByTouch(t.parentElement,a,r,!1,"right",d)),h){var p=i.pdfViewerBase.pageSize[i.pdfViewerBase.currentPageNumber-1].top,c=i.getClientValueTop(r,i.pdfViewerBase.currentPageNumber-1),u=i.dropDivElementRight.getBoundingClientRect();i.dropDivElementRight.style.top=p*i.pdfViewerBase.getZoomFactor()+c+"px";var f=a-i.pdfViewerBase.getElement("_pageDiv_"+(i.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect().left;i.topStoreRight={pageTop:p,topClientValue:i.getMagnifiedValue(c),pageNumber:i.pdfViewerBase.currentPageNumber-1,left:i.getMagnifiedValue(f),isHeightNeeded:!1},i.dropDivElementRight.style.left=a-i.pdfViewerBase.viewerContainer.getBoundingClientRect().left-u.width/2+"px",i.previousScrollDifference=l}}}},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.textSelectionOnMouseMove=function(e,t,i,n){var o=e;if(this.isTextSearched=!0,o.nodeType===o.TEXT_NODE){this.isSelectionStartTriggered||this.pdfViewerBase.getTextMarkupAnnotationMode()||(this.pdfViewer.fireTextSelectionStart(this.pdfViewerBase.currentPageNumber),this.isSelectionStartTriggered=!0),this.isBackwardPropagatedSelection=!1;var s=o.ownerDocument.createRange(),a=window.getSelection();if(null!==a.anchorNode){var r=a.anchorNode.compareDocumentPosition(a.focusNode);(!r&&a.anchorOffset>a.focusOffset||r===Node.DOCUMENT_POSITION_PRECEDING)&&(this.isBackwardPropagatedSelection=!0)}s.selectNodeContents(o);for(var l=0,d=s.endOffset;l<d;){s.setStart(o,l),s.setEnd(o,l+1);var h=(y=s.getBoundingClientRect()).right;if(n&&(h=parseInt(y.right.toString())),y.left<=t&&h>=t&&parseInt(y.top.toString())<=i&&y.bottom>=i)null!==a.anchorNode&&a.anchorNode.parentNode.classList.contains("e-pv-text")&&(a.anchorOffset>l?0!=this.backwardStart?s.setStart(a.anchorNode,this.backwardStart):s.setStart(a.anchorNode,a.anchorOffset+1):s.setStart(a.anchorNode,a.anchorOffset)),a.removeAllRanges(),a.addRange(s),this.isTextSelection||(this.selectionStartPage=this.pdfViewerBase.currentPageNumber-1),this.isTextSelection=!0,!!document.documentMode||(this.isBackwardPropagatedSelection||s.endOffset>l?(this.backwardStart!=s.startOffset&&s.startOffset>=l&&(this.backwardStart=s.endOffset),0===l&&1!=s.endOffset?a.extend(o,l):a.extend(o,l+1)):n?a.extend(o,l):a.extend(o,l+1)),s.detach();l+=1}var p=this.pdfViewer.annotationModule;if(p&&p.textMarkupAnnotationModule&&p.textMarkupAnnotationModule.isEnableTextMarkupResizer(p.textMarkupAnnotationModule.currentTextMarkupAddMode)){var c=document.getElementById(this.pdfViewer.element.id+"_droplet_left");if(this.pdfViewerBase.isSelection&&a&&a.rangeCount>0){var u=a.getRangeAt(0).getBoundingClientRect(),f=u.left,m=u.top;this.pdfViewer.annotation.textMarkupAnnotationModule.updateLeftposition(f,m),this.pdfViewerBase.isSelection=!1}else c&&"none"===c.style.display&&this.pdfViewer.annotation.textMarkupAnnotationModule.updateLeftposition(t,i);this.pdfViewer.annotation.textMarkupAnnotationModule.updatePosition(t,i)}}else for(var g=0;g<o.childNodes.length;g++){var y;if(o.childNodes[g].nodeType===o.TEXT_NODE)(y=(s=this.getSelectionRange(g,o)).getBoundingClientRect()).left<=t&&y.right>=parseInt(t.toString())&&parseInt(y.top.toString())<=i&&y.bottom>=i?(s.detach(),this.textSelectionOnMouseMove(o.childNodes[g],t,i,n)):s.detach()}},e.prototype.textSelectionOnDrag=function(e,t,i,n){var o=e;if(this.isTextSearched=!0,o.nodeType===o.TEXT_NODE){this.isBackwardPropagatedSelection=!1;var s=o.ownerDocument.createRange(),a=window.getSelection();if(null!==a.anchorNode){var r=a.anchorNode.compareDocumentPosition(a.focusNode);(!r&&a.anchorOffset>a.focusOffset||r===Node.DOCUMENT_POSITION_PRECEDING)&&(this.isBackwardPropagatedSelection=!0)}s.selectNodeContents(o);for(var l=0,d=s.endOffset;l<d;){if(s.setStart(o,l),s.setEnd(o,l+1),(f=s.getBoundingClientRect()).left<=t&&f.right>=t&&parseInt(f.top.toString())<=i&&f.bottom>=i)return n?(null!==a.anchorNode&&a.anchorNode.parentNode.classList.contains("e-pv-text")&&s.setStart(a.anchorNode,a.anchorOffset),a.removeAllRanges(),a.addRange(s),a.extend(o,l)):a.focusNode&&(s.setEnd(a.focusNode,a.focusOffset),a.removeAllRanges(),a.addRange(s)),this.isTextSelection||(this.selectionStartPage=this.pdfViewerBase.currentPageNumber-1),this.isTextSelection=!0,s.detach(),!0;l+=1}if(this.pdfViewerBase.isSelection){var h=a.getRangeAt(0).getBoundingClientRect(),p=h.left,c=h.top;this.pdfViewer.annotation.textMarkupAnnotationModule.updateLeftposition(p,c),this.pdfViewerBase.isSelection=!1}this.pdfViewer.annotation.textMarkupAnnotationModule.updatePosition(t,i)}else for(var u=0;u<o.childNodes.length;u++){var f;if(o.childNodes[u].nodeType===o.TEXT_NODE)(f=(s=this.getSelectionRange(u,o)).getBoundingClientRect()).left<=t&&f.right>=t&&parseInt(f.top.toString())<=i&&f.bottom>=i?(s.detach(),this.textSelectionOnDrag(o.childNodes[u],t,i,n)):s.detach()}return null},e.prototype.selectTextRegion=function(e,t){for(var i=null,n=e-1,o=0;o<t.length;o++){var s=t[o],a=(s.left?s.left:s.Left)*this.pdfViewerBase.getZoomFactor(),r=(s.top?s.top:s.Top)*this.pdfViewerBase.getZoomFactor(),l=(s.width?s.width:s.Width)*this.pdfViewerBase.getZoomFactor(),d=(s.height?s.height:s.Height,this.pdfViewerBase.getElement("_textLayer_"+n));if(d){for(var h=d.childNodes,p=0;p<h.length;p++)if(h[p]){var c=h[p].getBoundingClientRect(),u=this.getClientValueTop(c.top,n),f=c.left-this.pdfViewerBase.getElement("_pageDiv_"+n).getBoundingClientRect().left,m=f+c.width,g=parseInt(h[p].style.left),y=parseInt(h[p].style.top),v=this.checkLeftBounds(f,g,m,a),w=this.checkTopBounds(u,y,r);if(v&&w){i=h[p];break}}if(null!=i){var b=this.pdfViewerBase.getElement("_textLayer_"+n).getBoundingClientRect();this.textSelectionOnMouseMove(i,a+b.left,r+b.top,!1),t.length-1===o&&this.textSelectionOnMouseMove(i,a+b.left+l,r+b.top,!1)}}}},e.prototype.checkLeftBounds=function(e,t,i,n){var o=!1;return(e===parseInt(n.toString())||parseInt(e.toString())===parseInt(n.toString())||e+1===parseInt(n.toString())||e-1===parseInt(n.toString())||t===parseInt(n.toString())||t===n||i>=n&&e<=n)&&(o=!0),o},e.prototype.checkTopBounds=function(e,t,i){var n=!1;return e!==parseInt(i.toString())&&parseInt(e.toString())!==parseInt(i.toString())&&parseInt((e+1).toString())!==parseInt(i.toString())&&parseInt((e-1).toString())!==parseInt(i.toString())&&t!==parseInt(i.toString())&&t!==i||(n=!0),n},e.prototype.textSelectionOnMouseLeave=function(e){var t=this;e.preventDefault();var i=this.pdfViewerBase.viewerContainer.offsetTop;this.pdfViewer.magnificationModule&&"fitToPage"===this.pdfViewer.magnificationModule.fitType||(e.clientY>i?this.scrollMoveTimer=setInterval((function(){t.scrollForwardOnSelection()}),500):this.scrollMoveTimer=setInterval((function(){t.scrollBackwardOnSelection()}),500))},e.prototype.scrollForwardOnSelection=function(){this.isMouseLeaveSelection=!0,this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.viewerContainer.scrollTop+200,this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber-1)},e.prototype.scrollBackwardOnSelection=function(){this.isMouseLeaveSelection=!0,this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.viewerContainer.scrollTop-200,this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber-1)},e.prototype.clear=function(){this.scrollMoveTimer&&(this.isMouseLeaveSelection=!1,clearInterval(this.scrollMoveTimer))},e.prototype.selectAWord=function(e,t,i,n){if(e.nodeType===e.TEXT_NODE){var o=window.getSelection();(f=e.ownerDocument.createRange()).selectNodeContents(e);for(var s=0,a=f.endOffset;s<a;){if(f.setStart(e,s),f.setEnd(e,s+1),(g=f.getBoundingClientRect()).left<=t&&g.right>=t&&g.top<=i&&g.bottom>=i){for(var r=e.textContent,l=[],d=void 0,h=void 0,p=0;p<r.length;p++)" "===r[p]&&l.push(p);for(var c=0;c<l.length;c++){if(s===l[c]&&(d=l[c],h=l[c]),l[0]>s){d=0,h=l[c];break}s>l[c]&&s<l[c+1]?(d=l[c],h=l[c+1]):s>l[c]&&(l[c+1]||(d=l[c]))}h||(h=r.length),0===d?f.setStart(e,d):f.setStart(e,d+1),f.setEnd(e,h),o.removeAllRanges(),o.addRange(f),this.isTextSelection=!0;var u=m(f.startContainer.parentElement)?f.startContainer.parentNode:f.startContainer.parentElement;this.selectionStartPage=parseInt(u.id.split("_text_")[1]),n&&(this.selectionAnchorTouch={anchorNode:o.anchorNode.parentElement.id,anchorOffset:o.anchorOffset},this.selectionFocusTouch={focusNode:o.focusNode.parentElement.id,focusOffset:o.focusOffset}),ge.isIE||f.detach();break}s+=1}}else for(p=0;p<e.childNodes.length;p++){var f,g;(g=(f=this.getSelectionRange(p,e)).getBoundingClientRect()).left<=t&&g.right>=t&&g.top<=i&&g.bottom>=i?(f.detach(),this.selectAWord(e.childNodes[p],t,i,n)):f.detach()}},e.prototype.getSelectionRange=function(e,t){var i=t.childNodes[e].ownerDocument.createRange();return i.selectNodeContents(t.childNodes[e]),i},e.prototype.selectEntireLine=function(e){var t=[],i=e.target,n=i.getBoundingClientRect(),o=parseInt((n.top+n.height/2).toString()),s=parseInt(e.target.id.split("_text_")[1]),a=document.querySelectorAll('div[id*="'+this.pdfViewer.element.id+"_text_"+s+'"]');if(i.classList.contains("e-pv-text")){this.pdfViewer.fireTextSelectionStart(s+1);for(var r=0;r<a.length;r++){var l=a[r].getBoundingClientRect(),d=parseInt(l.top.toString()),h=parseInt(l.bottom.toString());if(d<=o&&h>o&&n.bottom+10>h){var p=a[r].id;""!==p&&t.push(p)}}var c=window.getSelection();c.removeAllRanges();var u=document.createRange(),f=t.length-1,m=document.getElementById(t[0]),g=document.getElementById(t[f]);g.childNodes.length>0?(u.setStart(m.childNodes[0],0),u.setEnd(g.childNodes[0],g.textContent.length)):(u.setStart(m.childNodes[0],0),u.setEnd(g,1)),this.selectionStartPage=parseInt(u.startContainer.parentElement.id.split("_text_")[1]),c.addRange(u),this.isTextSelection=!0,null!=c&&"MouseUp"===this.pdfViewer.contextMenuSettings.contextMenuAction&&this.calculateContextMenuPosition(e.clientY,e.clientY)}},e.prototype.enableTextSelectionMode=function(){this.pdfViewerBase.isTextSelectionDisabled=!1,m(this.pdfViewerBase.viewerContainer)||(this.pdfViewerBase.viewerContainer.classList.remove("e-disable-text-selection"),this.pdfViewerBase.viewerContainer.classList.add("e-enable-text-selection"),this.pdfViewerBase.viewerContainer.addEventListener("selectstart",(function(){return!0})))},e.prototype.clearTextSelection=function(){if(this.isTextSelection){if(this.pdfViewerBase.textLayer.clearDivSelection(),window.getSelection&&window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges(),this.pdfViewer.linkAnnotationModule){var e=this.pdfViewerBase.currentPageNumber-3;e=e<0?0:e;var t=this.pdfViewer.currentPageNumber+1;t=t<this.pdfViewerBase.pageCount-1?t:this.pdfViewerBase.pageCount-1;for(var i=e;i<=t;i++)this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(i,!1)}this.pdfViewer.annotation&&this.pdfViewer.annotation.textMarkupAnnotationModule&&this.pdfViewer.annotation.textMarkupAnnotationModule.showHideDropletDiv(!0),this.selectionRangeArray=[],this.isTextSelection=!1,this.isTouchSelection=!1,this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.searchAfterSelection(),this.pdfViewerBase.contextMenuModule.close(),this.removeTouchElements()}},e.prototype.removeTouchElements=function(){this.dropDivElementLeft&&(this.dropDivElementLeft.parentElement.removeChild(this.dropDivElementLeft),this.dropDivElementLeft=null,this.dropElementLeft.style.transform="rotate(0deg)"),this.dropDivElementRight&&(this.dropDivElementRight.parentElement.removeChild(this.dropDivElementRight),this.dropDivElementRight=null,this.dropElementRight.style.transform="rotate(-90deg)")},e.prototype.resizeTouchElements=function(){var e=this.pdfViewerBase.viewerContainer.getBoundingClientRect().left;if(this.dropDivElementLeft){var t=this.dropDivElementLeft.getBoundingClientRect(),i=0,n=this.pdfViewerBase.getElement("_pageDiv_"+this.topStoreLeft.pageNumber).getBoundingClientRect();this.dropDivElementLeft.style.left=parseFloat(this.topStoreLeft.left.toString())*this.pdfViewerBase.getZoomFactor()+n.left-e-t.width/2+"px",this.topStoreLeft.isHeightNeeded&&(i=t.height/2*this.pdfViewerBase.getZoomFactor()),this.dropDivElementLeft.style.top=parseFloat(this.topStoreLeft.pageTop.toString())*this.pdfViewerBase.getZoomFactor()+parseFloat(this.topStoreLeft.topClientValue.toString())*this.pdfViewerBase.getZoomFactor()+i+"px"}if(this.dropDivElementRight){t=this.dropDivElementRight.getBoundingClientRect(),i=0;var o=this.pdfViewerBase.getElement("_pageDiv_"+this.topStoreRight.pageNumber).getBoundingClientRect();this.dropDivElementRight.style.left=parseFloat(this.topStoreRight.left.toString())*this.pdfViewerBase.getZoomFactor()+o.left-e-t.width/2+"px",this.topStoreRight.isHeightNeeded&&(i=t.height/2*this.pdfViewerBase.getZoomFactor()),this.dropDivElementRight.style.top=parseFloat(this.topStoreRight.pageTop.toString())*this.pdfViewerBase.getZoomFactor()+parseFloat(this.topStoreRight.topClientValue.toString())*this.pdfViewerBase.getZoomFactor()+i+"px"}},e.prototype.textSelectionOnMouseup=function(e){if(this.clear(),null!==window.getSelection().anchorNode){if(this.isMouseLeaveSelection=!1,this.isSelectionStartTriggered=!1,this.maintainSelectionOnZoom(!0,!1),this.fireTextSelectEnd(),this.pdfViewerBase.textLayer.getTextSearchStatus()){this.pdfViewerBase.textLayer.clearDivSelection();for(var t=this.pdfViewer.textSearchModule.getIndexes(),i=parseFloat(t.lowerPageValue.toString()),n=parseFloat(t.higherPageValue.toString()),o=i;o<n;o++)this.applySelectionRangeOnScroll(o);this.pdfViewer.textSearchModule.searchAfterSelection()}else this.applySpanForSelection();this.pdfViewer.linkAnnotationModule&&this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(this.pdfViewerBase.currentPageNumber-1,!1),this.isTextSearched&&"MouseUp"===this.pdfViewer.contextMenuSettings.contextMenuAction&&(this.calculateContextMenuPosition(e.clientY,e.clientX),this.isTextSearched=!1)}else this.pdfViewerBase.textLayer.clearDivSelection(),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.searchAfterSelection(),this.pdfViewerBase.contextMenuModule.close(),this.removeTouchElements()},e.prototype.fireTextSelectEnd=function(){if(0!==this.selectionRangeArray.length){for(var e=0,t="",i=[],n=0;n<this.selectionRangeArray.length;n++){t+=this.selectionRangeArray[n].textContent;for(var o=0;o<this.selectionRangeArray[n].rectangleBounds.length;o++){var s=this.selectionRangeArray[n].rectangleBounds[o];i.push({left:s.left,right:s.right,top:s.top,bottom:s.bottom,width:s.width,height:s.height,pageIndex:this.selectionRangeArray[n].pageNumber+1})}this.selectionRangeArray[n].isBackward&&0===n?e=this.selectionRangeArray[n].pageNumber+1:this.selectionRangeArray[n].isBackward||n!==this.selectionRangeArray.length-1||(e=this.selectionRangeArray[n].pageNumber+1)}this.pdfViewer.fireTextSelectionEnd(e,t,i)}},e.prototype.maintainSelectionOnZoom=function(e,t){var i=window.getSelection();if("Range"===i.type||!i.type&&!i.isCollapsed){var n=this.pdfViewerBase.textLayer.isBackWardSelection(i);if(null!==i.anchorNode){var o=parseInt(this.getNodeElementFromNode(i.anchorNode).id.split("_text_")[1]),s=parseInt(this.getNodeElementFromNode(i.focusNode).id.split("_text_")[1]);if(this.isTouchSelection&&isNaN(s))if(i.focusNode===this.pdfViewerBase.pageContainer){var a=this.pdfViewerBase.pageContainer.lastChild;a.classList.contains("e-pv-touch-select-drop")?s=parseInt(a.previousSibling.previousSibling.id.split("_pageDiv_")[1]):a.classList.contains("e-pv-page-div")&&(s=parseInt(a.id.split("_pageDiv_")[1]))}if(n)for(r=o;r>=s;r--)this.maintainSelectionOnScroll(r,t);else for(var r=o;r<=s;r++)this.maintainSelectionOnScroll(r,t)}e||i.removeAllRanges()}},e.prototype.isSelectionAvailableOnScroll=function(e){for(var t=!1,i=this.selectionRangeArray,n=0;n<i.length;n++)if(null!==i[n]&&e===i[n].pageNumber){t=!0,this.isTouchSelection&&!this.pdfViewerBase.getMagnified()&&(t=!1);break}return t},e.prototype.applySelectionRangeOnScroll=function(e){this.isMouseLeaveSelection?this.applySelectionMouseScroll(e):this.applySelectionRange(e)},e.prototype.getSelectionRangeFromArray=function(e){for(var t=!1,i=null,n=this.selectionRangeArray,o=0;o<n.length;o++)if(null!==n[o]&&e===n[o].pageNumber){i=n[o],t=!0;break}return{isSelectionAvailable:t,selectionRange:i}},e.prototype.applySelectionRange=function(e){var t=this.getSelectionRangeFromArray(e),i=t.isSelectionAvailable,n=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+e);if(n&&i&&0!==n.childNodes.length){var o=t.selectionRange,s=void 0,a=void 0,r=void 0,l=void 0;if(o.isBackward){var d=parseInt(o.endNode.split("_text_")[1].split("_")[1]),h=parseInt(o.startNode.split("_text_")[1].split("_")[1]);d<h?(s=d,r=o.endOffset,l=o.startOffset,a=h):(s=h,r=o.endOffset,a=d,l=o.startOffset)}else s=parseInt(o.startNode.split("text_")[1].split("_")[1]),a=parseInt(o.endNode.split("text_")[1].split("_")[1]),r=o.startOffset,l=o.endOffset;window.getSelection().removeAllRanges(),this.pdfViewerBase.textLayer.applySpanForSelection(e,e,s,a,r,l),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.searchAfterSelection()}},e.prototype.applySelectionMouseScroll=function(e){var t=this.getSelectionRangeFromArray(e);if(t.isSelectionAvailable){var i=t.selectionRange,n=window.getSelection(),o=document.getElementById(i.startNode).childNodes[0],s=document.getElementById(i.endNode).childNodes[0],a=document.createRange();if(null===n.anchorNode)i.isBackward?(a.setStart(s,i.endOffset),a.setEnd(o,i.startOffset)):(a.setStart(o,i.startOffset),a.setEnd(s,i.endOffset));else{var r=isNaN(parseInt(n.anchorNode.parentElement.id.split("_text_")[1]))?parseInt(n.anchorNode.id.split("_pageDiv_")[1]):parseInt(n.anchorNode.parentElement.id.split("_text_")[1]);isNaN(r)&&(r=parseInt(n.anchorNode.id.split("_text_")[1]));var l=isNaN(parseInt(n.focusNode.parentElement.id.split("_text_")[1]))?parseInt(n.focusNode.id.split("_pageDiv_")[1]):parseInt(n.focusNode.parentElement.id.split("_text_")[1]),d=parseInt(i.startNode.split("_text_")[1]);if(r===l&&r===d)i.isBackward?(a.setStart(s,i.endOffset),a.setEnd(o,i.startOffset)):(a.setStart(o,i.startOffset),a.setEnd(s,i.endOffset));else if(isNaN(r))isNaN(r)&&(i.isBackward?(a.setStart(s,i.endOffset),a.setEnd(o,i.startOffset)):(a.setStart(o,i.startOffset),a.setEnd(s,i.endOffset)));else if(isNaN(r)||i.isBackward){var h=this.pdfViewerBase.textLayer.isBackWardSelection(n);if(r>d&&d>l&&r!==l)h?n.extend(n.focusNode,n.focusOffset):(a.setStart(n.anchorNode,n.anchorOffset),a.setEnd(n.focusNode,n.focusOffset));else if(r<d&&d<l&&r!==l)h?n.extend(n.focusNode,n.focusOffset):(a.setStart(n.anchorNode,n.anchorOffset),a.setEnd(n.focusNode,n.focusOffset));else if(r<d)h?d!==this.selectionRangeArray[0].pageNumber?this.extendCurrentSelection(s.parentElement,i.endOffset,n,a):this.extendCurrentSelection(o.parentElement,i.startOffset,n,a):d!==this.selectionRangeArray[0].pageNumber?(a.setStart(n.anchorNode,n.anchorOffset),a.setEnd(s,i.endOffset)):(a.setStart(n.anchorNode,n.anchorOffset),a.setEnd(o,i.startOffset));else if(r===d)d===l?(a.setStart(o,i.startOffset),a.setEnd(o,i.startOffset),n.removeAllRanges(),n.addRange(a),a=document.createRange(),n.extend(s,i.endOffset)):h?this.extendCurrentSelection(s.parentElement,i.endOffset,n,a):(a.setStart(s,i.endOffset),a.setEnd(n.focusNode,n.focusOffset));else if(l===d)h?n.extend(n.focusNode,n.focusOffset):(a.setStart(n.anchorNode,n.anchorOffset),a.setEnd(n.focusNode,n.focusOffset));else if(r>d){var p=parseInt(i.startNode.split("_"+d+"_")[1]),c=parseInt(i.endNode.split("_"+d+"_")[1]);h?d!==this.selectionRangeArray[0].pageNumber?p<c?this.extendCurrentSelection(o.parentElement,i.startOffset,n,a):(a.setStart(s.parentElement,i.endOffset),a.setEnd(n.anchorNode,n.anchorOffset)):this.extendCurrentSelection(s.parentElement,i.endOffset,n,a):p<c?(a.setStart(o,i.startOffset),a.setEnd(n.focusNode,n.focusOffset)):(a.setStart(s,i.endOffset),a.setEnd(n.focusNode,n.focusOffset))}}else r<d&&d<l&&r!==l?(a.setStart(n.anchorNode,n.anchorOffset),a.setEnd(n.focusNode,n.focusOffset)):r<d?(a.setStart(n.anchorNode,n.anchorOffset),a.setEnd(s,i.endOffset)):(a.setStart(o,i.startOffset),a.setEnd(n.focusNode,n.focusOffset))}""!==a.toString()&&(n.removeAllRanges(),n.addRange(a))}},e.prototype.maintainSelectionOnScroll=function(e,t){var i=this.isSelectionAvailableOnScroll(e);this.isTextSelection&&!i&&this.maintainSelection(e,t)},e.prototype.maintainSelection=function(e,t){var i=window.getSelection();if(this.isTextSelection&&("Range"===i.type||!i.type&&!i.isCollapsed)){var n=parseInt(this.getNodeElementFromNode(i.anchorNode).id.split("_text_")[1]),o=parseInt(this.getNodeElementFromNode(i.focusNode).id.split("_text_")[1]);if(isNaN(o)&&null!==i.anchorNode)if(this.pdfViewerBase.textLayer.isBackWardSelection(i))o=parseInt(this.pdfViewerBase.pageContainer.firstChild.id.split("_pageDiv_")[1]);else{var s=this.pdfViewerBase.pageContainer.lastChild;o=s.classList.contains("e-pv-touch-select-drop")?parseInt(s.previousSibling.previousSibling.id.split("_pageDiv_")[1]):parseInt(s.id.split("_pageDiv_")[1])}var a=this.pdfViewerBase.textLayer.isBackWardSelection(i);if(this.isTouchSelection&&e>o&&e>n)return;if(n===o){var r=null,l=this.getSelectionBounds(i.getRangeAt(0),e),d=this.getSelectionRectangleBounds(i.getRangeAt(0),e),h=1===this.getNodeElementFromNode(i.anchorNode).childNodes.length?i.anchorOffset:this.getCorrectOffset(i.anchorNode,i.anchorOffset),p=1===this.getNodeElementFromNode(i.focusNode).childNodes.length?i.focusOffset:this.getCorrectOffset(i.focusNode,i.focusOffset);r={isBackward:a,startNode:this.getNodeElementFromNode(i.anchorNode).id,startOffset:h,endNode:this.getNodeElementFromNode(i.focusNode).id,endOffset:p,textContent:this.allTextContent,pageNumber:e,bound:l,rectangleBounds:d},this.pushSelectionRangeObject(r,e)}else{(r=this.createRangeObjectOnScroll(e,n,o))&&(this.pushSelectionRangeObject(r,e),t&&this.stichSelection(a,i,e))}}},e.prototype.getCorrectOffset=function(e,t){for(var i=0,n=this.getNodeElementFromNode(e),o=0;o<n.childNodes.length;o++){if(n.childNodes[o]===e){i+=t;break}i+=n.childNodes[o].textContent.length}return i},e.prototype.pushSelectionRangeObject=function(e,t){if(this.isTouchSelection){var i=this.selectionRangeArray.filter((function(e){return e.pageNumber===t}));if(i.length>0){var n=this.selectionRangeArray.indexOf(i[0]);return void this.selectionRangeArray.splice(n,1,e)}}var o=this.selectionRangeArray.filter((function(e){return e.pageNumber===t+1}));if(0===o.length)if(this.isTouchSelection&&0!==this.selectionRangeArray.length){var s=this.selectionRangeArray.filter((function(e){return e.pageNumber===t-1}));if(0!==s.length){var a=this.selectionRangeArray.indexOf(s[0]);this.selectionRangeArray.splice(a+1,0,e)}else{var r=this.selectionRangeArray[0];t<r.pageNumber?this.selectionRangeArray.splice(0,0,e):this.selectionRangeArray.push(e)}}else this.selectionRangeArray.push(e);else{var l=this.selectionRangeArray.indexOf(o[0]);this.selectionRangeArray.splice(l,0,e)}},e.prototype.extendCurrentSelection=function(e,t,i,n){var o=i.focusOffset,s=i.focusNode.parentElement.id,a=isNaN(parseInt(s.split("_text_")[1]))?parseInt(i.focusNode.id.split("_pageDiv_")[1]):parseInt(s.split("_text_")[1]);isNaN(parseInt(s.split("_text_")[1]))&&(s=this.pdfViewerBase.getElement("_textLayer_"+(a+1)).firstChild.id),n.setStart(e.childNodes[0],t),n.setEnd(e.childNodes[0],t),i.removeAllRanges(),i.addRange(n),i.extend(document.getElementById(s).childNodes[0],o)},e.prototype.stichSelection=function(e,t,i){var n,o=document.createRange();if(e)if(n=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(i-1))){(s=n.lastChild)||(s=(n=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(i-2))).lastChild),this.extendCurrentSelection(s,this.getTextLastLength(s),t,o)}else{var s=(n=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(i+1))).firstChild;this.extendCurrentSelection(s,0,t,o)}else if(n=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(i+1))){var a=n.firstChild;a||(a=(n=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(i+2))).firstChild),o.setStart(a.childNodes[0],0),o.setEnd(t.focusNode,t.focusOffset),t.removeAllRanges(),t.addRange(o)}},e.prototype.textSelectionOnMouseWheel=function(e){this.isMouseLeaveSelection=!0,this.stichSelectionOnScroll(e)},e.prototype.stichSelectionOnScroll=function(e){var t=window.getSelection();if(this.isTextSelection){var i,n=parseInt(this.getNodeElementFromNode(t.anchorNode).id.split("_text_")[1]),o=parseInt(this.getNodeElementFromNode(t.focusNode).id.split("_text_")[1]),s=void 0;if(n!==e&&o!==e)if(this.pdfViewerBase.textLayer.isBackWardSelection(t)){if(s=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(e-1)))(i=s.firstChild)&&this.extendSelectionStich(i.childNodes[0],0,t)}else if(s=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(e-1)))if(i=s.lastChild)i.childNodes[0]?this.extendSelectionStich(i.childNodes[0],this.getTextLastLength(i),t):this.extendSelectionStich(i,this.getTextLastLength(i),t);else{var a=(s=this.pdfViewerBase.getElement("_textLayer_"+e)).firstChild;this.extendSelectionStich(a.childNodes[0],0,t)}this.maintainSelectionArray()}},e.prototype.extendSelectionStich=function(e,t,i){i.extend&&i.extend(e,t)},e.prototype.createRangeObjectOnScroll=function(e,t,i){var n=window.getSelection();if(null!==n.anchorNode){var o=this.pdfViewerBase.textLayer.isBackWardSelection(n),s=void 0,a=void 0,r=void 0,l=void 0,d=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+e);if(d.childNodes){if(o)e===t?(s=this.getNodeElementFromNode(n.anchorNode),a=d.firstChild,r=this.getCorrectOffset(n.anchorNode,n.anchorOffset),l=0):e<t&&e>i?(s=d.firstChild,a=d.lastChild,r=0,l=this.getTextLastLength(a)):e===i&&(s=this.getNodeElementFromNode(n.focusNode),a=d.lastChild,r=this.getCorrectOffset(n.focusNode,n.focusOffset),l=this.getTextLastLength(a));else if(e===t)s=this.getNodeElementFromNode(n.anchorNode),a=d.lastChild,r=this.getCorrectOffset(n.anchorNode,n.anchorOffset),l=this.getTextLastLength(a);else if(e>t&&e<i)s=d.firstChild,a=d.lastChild,r=0,l=this.getTextLastLength(a);else if(e===i){s=d.firstChild,-1!==this.getNodeElementFromNode(n.focusNode).id.indexOf(i.toString())?(a=this.getNodeElementFromNode(n.focusNode),l=this.getCorrectOffset(n.focusNode,n.focusOffset)):(a=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+i).lastChild,l=this.getTextLastLength(a)),r=0}if(s&&a){var h=this.getSelectionRangeObject(s.id,r,a.id,l,e),p=(h.toString(),this.getSelectionBounds(h,e)),c=this.getSelectionRectangleBounds(h,e);return{isBackward:o,startNode:s.id,startOffset:r,endNode:a.id,endOffset:l,textContent:this.allTextContent,pageNumber:e,bound:p,rectangleBounds:c}}return null}}return null},e.prototype.getSelectionRangeObject=function(e,t,i,n,o){var s=document.getElementById(e),a=document.getElementById(i);s.childNodes[0]&&(s=s.childNodes[0]),a.childNodes[0]&&(a=a.childNodes[0]);var r=parseInt(e.split("_"+o+"_")[1]),l=parseInt(i.split("_"+o+"_")[1]),d=document.createRange();return r<=l?(d.setStart(s,t),d.setEnd(a,n)):(d.setStart(a,n),d.setEnd(s,t)),d},e.prototype.getSelectionBounds=function(e,t){var i=null;if(this.getNodeElementFromNode(e.startContainer)!==this.getNodeElementFromNode(e.endContainer)){var n=document.createRange(),o=this.createRangeForSelection(e.startContainer,e.endContainer,e.startOffset,e.endOffset,n);i=this.normalizeBounds(o.getBoundingClientRect(),t)}else i=this.normalizeBounds(e.getBoundingClientRect(),t);return i},e.prototype.getSelectionRectangleBounds=function(e,t){var i=[],n=this.getNodeElementFromNode(e.startContainer),o=this.getNodeElementFromNode(e.endContainer),s=null,a=[];if(this.allTextContent="",n!==o){for(var r=0,l=0,d=this.pdfViewerBase.textLayer.getPageIndex(e.startContainer),h=this.pdfViewerBase.textLayer.getTextIndex(e.startContainer,d),p=this.pdfViewerBase.textLayer.getPageIndex(e.endContainer),c=this.pdfViewerBase.textLayer.getTextIndex(e.endContainer,p),u=this.pdfViewerBase.getElement("_textLayer_"+p).childNodes,f=t===d?h:0;f<u.length;f++){var m=u[f];if(r=f===h?e.startOffset:0,l=f===c?e.endOffset:m.textContent.length,0!==r||0!==l){for(var g=document.createRange(),y=0;y<m.childNodes.length;y++){var v=m.childNodes[y];g.setStart(v,r),g.setEnd(v,l)}var w=this.normalizeBounds(g.getBoundingClientRect(),t);i.push(w);var b=g.toString();if(a.push(b),g.detach(),f===c)break}}for(var S=0;S<a.length;S++){var C=a[S];(0!=S&&" "===C&&a[S-1].includes("\r\n")||S!=a.length-1&&" "===a[S]&&"\r\n"===a[S+1])&&(C=""),"\r\n"!==C.slice(C.length-2)||a.length,this.allTextContent+=C}}else s=this.normalizeBounds(e.getBoundingClientRect(),t),this.allTextContent=e.toString(),i.push(s);return i},e.prototype.getTextId=function(e){var t=e.lastIndexOf("_"),i=e.substring(t+1,e.length);return parseInt(i)},e.prototype.normalizeBounds=function(e,t){var i=this.pdfViewerBase.getElement("_pageDiv_"+t);if(this.pdfViewerBase.isMixedSizeDocument){var n=this.pdfViewerBase.getElement("_textLayer_"+t);n&&(i=n)}var o=i.getBoundingClientRect();return{bottom:this.getMagnifiedValue(e.bottom-o.top),height:this.getMagnifiedValue(e.height),left:this.getMagnifiedValue(e.left-o.left),top:this.getMagnifiedValue(e.top-o.top),right:this.getMagnifiedValue(e.right-o.left),width:this.getMagnifiedValue(e.width)}},e.prototype.getMagnifiedValue=function(e){return e/this.pdfViewerBase.getZoomFactor()},e.prototype.getCurrentSelectionBounds=function(e){for(var t=null,i=this.selectionRangeArray,n=0;n<i.length;n++)null!==i[n]&&e===i[n].pageNumber&&(t=i[n].bound);return t},e.prototype.createRangeForSelection=function(e,t,i,n,o){return o.setStart(e,i),o.setEnd(t,n),o},e.prototype.maintainSelectionArray=function(){var e=this;if(0!==this.selectionRangeArray.length){var t=window.getSelection(),i=this.pdfViewerBase.textLayer.isBackWardSelection(t),n=isNaN(parseInt(this.getNodeElementFromNode(t.anchorNode).id.split("_text_")[1]))?parseInt(t.anchorNode.id.split("_pageDiv_")[1]):parseInt(this.getNodeElementFromNode(t.anchorNode).id.split("_text_")[1]);isNaN(n)&&(n=parseInt(t.anchorNode.id.split("_text_")[1]));var o=isNaN(parseInt(this.getNodeElementFromNode(t.focusNode).id.split("_text_")[1]))?parseInt(t.focusNode.id.split("_pageDiv_")[1]):parseInt(this.getNodeElementFromNode(t.focusNode).id.split("_text_")[1]);isNaN(o)&&(o=isNaN(parseInt(t.focusNode.id.split("_text_")[1]))?parseInt(t.focusNode.id.split("_textLayer_")[1]):parseInt(t.focusNode.id.split("_text_")[1]));var s=[];if((s=i?this.selectionRangeArray.filter((function(t){return!(o<t.pageNumber&&t.pageNumber<=e.selectionStartPage)})):this.selectionRangeArray.filter((function(t){return!(e.selectionStartPage<=t.pageNumber&&t.pageNumber<o)}))).length>0){for(var a=0;a<s.length;a++){var r=this.selectionRangeArray.indexOf(s[a]);-1!==r&&this.selectionRangeArray.splice(r,1)}1===this.selectionRangeArray.length&&(this.selectionRangeArray[0].pageNumber!==n&&this.selectionRangeArray[0].pageNumber!==o||(s=[]))}}},e.prototype.applySpanForSelection=function(){var e=window.getSelection();if(e.anchorNode!==e.focusNode||e.anchorOffset!==e.focusOffset||e.isCollapsed||e.removeAllRanges(),null!==e.anchorNode&&this.pdfViewerBase.viewerContainer.contains(this.getNodeElementFromNode(e.anchorNode))){var t=void 0,i=void 0,n=void 0,o=void 0,s=void 0,a=void 0;if(this.pdfViewerBase.textLayer.isBackWardSelection(e))t=parseInt(this.getNodeElementFromNode(e.focusNode).id.split("_text_")[1]),i=parseInt(this.getNodeElementFromNode(e.anchorNode).id.split("_text_")[1]),n=parseInt(this.getNodeElementFromNode(e.focusNode).id.split("_text_")[1].split("_")[1]),o=parseInt(this.getNodeElementFromNode(e.anchorNode).id.split("_text_")[1].split("_")[1]),s=e.focusOffset,a=e.anchorOffset;else{var r=this.getNodeElementFromNode(e.anchorNode),l=this.getNodeElementFromNode(e.focusNode);t=-1!==r.id.indexOf("text_")?parseInt(r.id.split("text_")[1]):parseInt(r.id.split("_textLayer_")[1]),i=-1!==l.id.indexOf("text_")?parseInt(l.id.split("text_")[1]):parseInt(l.id.split("_textLayer_")[1]);var d=!1;if(this.isTouchSelection&&e.focusNode===this.pdfViewerBase.pageContainer){var h=this.pdfViewerBase.pageContainer.lastChild;if(h.classList.contains("e-pv-touch-select-drop")){var p=h.previousSibling.previousSibling;i=parseInt(p.id.split("_pageDiv_")[1]),l=this.pdfViewerBase.getElement("_textLayer_"+i).lastChild,d=!0}else if(h.classList.contains("e-pv-page-div")){p=h;i=parseInt(p.id.split("_pageDiv_")[1]),l=this.pdfViewerBase.getElement("_textLayer_"+i).lastChild,d=!0}}r.classList.contains("e-pv-maintaincontent")&&(r=this.getNodeElementFromNode(r),t=parseInt(r.id.split("text_")[1])),l.classList.contains("e-pv-maintaincontent")&&(l=this.getNodeElementFromNode(l),i=parseInt(l.id.split("text_")[1])),t===i&&(r.contains(l)&&(r=l),l.contains(r)&&(l=r)),n=r.id.split("text_")[1]?parseInt(r.id.split("text_")[1].split("_")[1]):null,o=l.id.split("text_")[1]?parseInt(l.id.split("text_")[1].split("_")[1]):null,n=isNaN(n)?o:n,o=isNaN(o)?n:o,s=e.anchorOffset,a=d?l.textContent.length:e.focusOffset}this.pdfViewerBase.checkIsNormalText()&&(e.removeAllRanges(),this.pdfViewerBase.textLayer.clearDivSelection(),this.pdfViewerBase.textLayer.applySpanForSelection(t,i,n,o,s,a)),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.searchAfterSelection()}},e.prototype.initiateTouchSelection=function(e,t,i){this.pdfViewerBase.isShapeBasedAnnotationsEnabled()&&this.pdfViewer.selectedItems.annotations.length>0&&this.pdfViewer.clearSelection(this.pdfViewer.selectedItems.annotations[0].pageIndex);var n=e.target,o=document.elementsFromPoint(e.touches[0].clientX,e.touches[0].clientY);0!==o.length&&o[0].classList.contains("e-pv-hyperlink")&&o[1].classList.contains("e-pv-text")&&(n=o[1]);var s=parseFloat(n.id.split("_")[2]);this.pdfViewer.fireTextSelectionStart(s+1),this.selectAWord(n,t,i,!0),this.createTouchSelectElement(e),this.maintainSelectionOnZoom(!0,!1),this.fireTextSelectEnd(),this.applySpanForSelection()},e.prototype.selectTextByTouch=function(e,t,i,n,o,s){var a=!1;if(e.nodeType===e.TEXT_NODE){var r=e.ownerDocument.createRange(),l=window.getSelection();r.selectNodeContents(e);for(var d=0,h=r.endOffset;d<h;){if(r.setStart(e,d),r.setEnd(e,d+1),(c=r.getBoundingClientRect()).left<=t&&c.right>=t&&c.top<=i&&c.bottom>=i)return null!=l.anchorNode&&(n&&r.setStart(l.anchorNode,l.anchorOffset),r=this.setTouchSelectionStartPosition(l,r,n,o,e,d,s),n&&l.extend(e,d),a=!0),r.detach(),a;d+=1}}else for(var p=0;p<e.childNodes.length;p++){var c,u=e.childNodes[p].ownerDocument.createRange();if(u.selectNodeContents(e.childNodes[p]),(c=u.getBoundingClientRect()).left<=t&&c.right>=t&&c.top<=i&&c.bottom>=i)return u.detach(),this.selectTextByTouch(e.childNodes[p],t,i,n,o,s);u.detach()}return a},e.prototype.setTouchSelectionStartPosition=function(e,t,i,n,o,s,a){if(i){if("left"===n){var r=this.getTouchFocusElement(e,!0);t.setStart(r.focusNode,r.focusOffset),t.setEnd(o,s),this.selectionAnchorTouch={anchorNode:t.endContainer.parentElement.id,anchorOffset:t.endOffset}}else if("right"===n){r=this.getTouchAnchorElement(e,!1);t.setStart(r.anchorNode,r.anchorOffset),t.setEnd(o,s),this.selectionFocusTouch={focusNode:t.endContainer.parentElement.id,focusOffset:t.endOffset}}}else if("left"===n)if(a)t.setStart(o,s),t.setEnd(e.focusNode,e.focusOffset),this.selectionAnchorTouch={anchorNode:t.startContainer.parentElement.id,anchorOffset:t.startOffset};else{r=this.getTouchFocusElement(e,!1);t.setStart(o,s),t.setEnd(r.focusNode,r.focusOffset),""===t.toString()&&(t.setStart(o,s),t.setEnd(e.focusNode,e.focusOffset)),this.selectionAnchorTouch={anchorNode:t.startContainer.parentElement.id,anchorOffset:t.startOffset}}else if("right"===n){r=this.getTouchAnchorElement(e,!0);t.setStart(o,s),t.setEnd(r.anchorNode,r.anchorOffset),""===t.toString()&&(t.setStart(r.anchorNode,r.anchorOffset),t.setEnd(o,s)),this.selectionFocusTouch={focusNode:t.startContainer.parentElement.id,focusOffset:t.startOffset}}return e.removeAllRanges(),e.addRange(t),t},e.prototype.getTouchAnchorElement=function(e,t){var i=document.getElementById(this.selectionAnchorTouch.anchorNode.toString()),n=null,o=0;return i?(n=i.childNodes[0],o=parseInt(this.selectionAnchorTouch.anchorOffset.toString())):t?(n=e.focusNode,o=e.focusOffset):(n=e.anchorNode,o=e.anchorOffset),{anchorNode:n,anchorOffset:o}},e.prototype.getTouchFocusElement=function(e,t){var i=document.getElementById(this.selectionFocusTouch.focusNode.toString()),n=null,o=0;return i?(n=i.childNodes[0],o=parseInt(this.selectionFocusTouch.focusOffset.toString())):t?(n=e.anchorNode,o=e.anchorOffset):(n=e.focusNode,o=e.focusOffset),{focusNode:n,focusOffset:o}},e.prototype.createTouchSelectElement=function(e){this.isTouchSelection=!0;var t=window.getSelection();if("Range"===t.type){this.dropDivElementLeft=we("div",{id:this.pdfViewer.element.id+"_touchSelect_droplet_left",className:"e-pv-touch-select-drop"}),this.dropDivElementRight=we("div",{id:this.pdfViewer.element.id+"_touchSelect_droplet_right",className:"e-pv-touch-select-drop"}),this.dropElementLeft=we("div",{className:"e-pv-touch-ellipse"}),this.dropElementLeft.style.transform="rotate(0deg)",this.dropDivElementLeft.appendChild(this.dropElementLeft),this.dropElementRight=we("div",{className:"e-pv-touch-ellipse"}),this.dropElementRight.style.transform="rotate(-90deg)",this.dropElementRight.style.margin="0 9px 0 0",this.dropDivElementRight.appendChild(this.dropElementRight),this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementLeft),this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementRight);var i=t.getRangeAt(0).getBoundingClientRect(),n=this.dropDivElementLeft.getBoundingClientRect(),o=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top,s=this.pdfViewerBase.viewerContainer.getBoundingClientRect().left,a=this.getClientValueTop(i.top,this.pdfViewerBase.currentPageNumber-1),r=a+o*this.pdfViewerBase.getZoomFactor()+n.height/2*this.pdfViewerBase.getZoomFactor()+"px";this.dropDivElementLeft.style.top=r,this.dropDivElementLeft.style.left=i.left-(s+n.width)+"px",this.dropDivElementRight.style.top=r,this.dropDivElementRight.style.left=i.left+i.width-s+"px";var l=this.pdfViewerBase.getElement("_pageDiv_"+(this.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect().left,d=i.left-l;this.topStoreLeft={pageTop:o,topClientValue:this.getMagnifiedValue(a),pageNumber:this.pdfViewerBase.currentPageNumber-1,left:this.getMagnifiedValue(d),isHeightNeeded:!0},this.topStoreRight={pageTop:o,topClientValue:this.getMagnifiedValue(a),pageNumber:this.pdfViewerBase.currentPageNumber-1,left:this.getMagnifiedValue(d+i.width),isHeightNeeded:!0},this.dropDivElementLeft.addEventListener("touchstart",this.onLeftTouchSelectElementTouchStart),this.dropDivElementLeft.addEventListener("touchmove",this.onLeftTouchSelectElementTouchMove),this.dropDivElementLeft.addEventListener("touchend",this.onLeftTouchSelectElementTouchEnd),this.dropDivElementRight.addEventListener("touchstart",this.onRightTouchSelectElementTouchStart),this.dropDivElementRight.addEventListener("touchmove",this.onRightTouchSelectElementTouchMove),this.dropDivElementRight.addEventListener("touchend",this.onRightTouchSelectElementTouchEnd),this.calculateContextMenuPosition(e.touches[0].clientY+this.dropDivElementLeft.clientHeight+10,parseInt(this.dropDivElementLeft.style.left,10)-10)}},e.prototype.calculateContextMenuPosition=function(e,t){var i=this;if(ge.isDevice&&!this.pdfViewer.enableDesktopMode){var n=e-this.contextMenuHeight;n<this.pdfViewerBase.toolbarHeight?e+=this.contextMenuHeight:e=n,e+this.contextMenuHeight>window.innerHeight&&(e-=this.contextMenuHeight)}"MouseUp"===this.pdfViewer.contextMenuSettings.contextMenuAction&&(t-=50);var o=this;setTimeout((function(){var n=document.getElementsByClassName("e-pv-maintaincontent")[0]?document.getElementsByClassName("e-pv-maintaincontent")[0].getBoundingClientRect():null;if(n){e=n.bottom+o.contextMenuHeight+o.pdfViewerBase.toolbarHeight>window.innerHeight?n.top-(o.contextMenuHeight+o.pdfViewerBase.toolbarHeight-10):n.bottom+o.pdfViewerBase.toolbarHeight-10,t=n.left-35;var s=i.pdfViewer.toolbarModule?i.pdfViewer.toolbarModule.annotationToolbarModule:"null";s&&s.textMarkupToolbarElement&&0!==s.textMarkupToolbarElement.children.length||o.pdfViewerBase.contextMenuModule.open(e,t,o.pdfViewerBase.viewerContainer)}}))},e.prototype.initiateSelectionByTouch=function(){this.pdfViewerBase.textLayer.clearDivSelection(),this.pdfViewerBase.contextMenuModule.close();var e=this.pdfViewerBase.currentPageNumber-3;e=e<0?0:e;var t=this.pdfViewer.currentPageNumber+1;t=t<this.pdfViewerBase.pageCount-1?t:this.pdfViewerBase.pageCount-1;for(var i=e;i<=t;i++){var n=this.pdfViewerBase.getElement("_textLayer_"+i);n&&null!==n.childNodes&&this.applySelectionMouseScroll(i)}this.selectionRangeArray.length>0&&this.pdfViewer.fireTextSelectionStart(this.selectionRangeArray[0].pageNumber+1)},e.prototype.terminateSelectionByTouch=function(e){if(this.maintainSelectionOnZoom(!0,!1),this.applySpanForSelection(),this.pdfViewerBase.getTextMarkupAnnotationMode())this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);else{this.fireTextSelectEnd();var t=e.changedTouches[0].clientY+e.currentTarget.clientHeight,i=this.getSpanBounds();t=i.bottom+this.contextMenuHeight+this.pdfViewerBase.toolbarHeight>window.innerHeight?i.top-(this.contextMenuHeight+this.pdfViewerBase.toolbarHeight):i.bottom+this.pdfViewerBase.toolbarHeight-10,this.pdfViewerBase.contextMenuModule.open(t,(i.right-i.left)/2,this.pdfViewerBase.viewerContainer)}},e.prototype.getSpanBounds=function(){var e=[],t=[],i=[],n=0,o=document.getElementsByClassName("e-pv-maintaincontent");if(o.length>0){for(var s=0;s<o.length;s++){var a=o[s].getBoundingClientRect();n+=a.height,e.push(a.width),t.push(a.right),i.push(a.left)}return{top:o[0].getBoundingClientRect().top,bottom:o[o.length-1].getBoundingClientRect().bottom,left:Math.min.apply(null,i),right:Math.max.apply(null,t),width:Math.max.apply(null,e),height:n}}},e.prototype.getNodeElement=function(e,t,i,n,o){if(document.caretRangeFromPoint)e=document.caretRangeFromPoint(t,i),o=this.onTouchElementScroll(e,o,i,n);else if(document.caretPositionFromPoint){var s=document.caretPositionFromPoint(t,i),a=document.caretPositionFromPoint(t,i);(e=document.createRange()).setStart(s.offsetNode,s.offset),e.setEnd(a.offsetNode,a.offset),o=this.onTouchElementScroll(e,o,i,n)}return o},e.prototype.isTouchedWithinContainer=function(e){var t=!1;return 0!==document.elementsFromPoint(e.touches[0].clientX,e.touches[0].clientY).length&&(t=!0),t},e.prototype.onTouchElementScroll=function(e,t,i,n){var o=this.pdfViewerBase.viewerContainer.scrollTop;if(null!=e){t=e.startContainer;var s=this.isScrolledOnScrollBar(n);this.pdfViewerBase.viewerContainer.contains(t.parentElement)&&!s||(i<this.pdfViewerBase.viewerContainer.clientHeight?this.pdfViewerBase.viewerContainer.scrollTop=o-30:this.pdfViewerBase.viewerContainer.scrollTop=o+30)}else i<this.pdfViewerBase.viewerContainer.clientHeight?this.pdfViewerBase.viewerContainer.scrollTop=o-30:this.pdfViewerBase.viewerContainer.scrollTop=o+30;return t},e.prototype.isCloserTouchScroll=function(e){var t=!1;return this.previousScrollDifference>e&&(t=!0),t},e.prototype.getClientValueTop=function(e,t){return this.pdfViewerBase.getElement("_pageDiv_"+t)?e-this.pdfViewerBase.getElement("_pageDiv_"+t).getBoundingClientRect().top:e},e.prototype.isScrolledOnScrollBar=function(e){var t=!1;return e.touches&&this.pdfViewerBase.viewerContainer.clientHeight+this.pdfViewerBase.viewerContainer.offsetTop<e.touches[0].clientY&&e.touches[0].clientY<this.pdfViewerBase.viewerContainer.offsetHeight+this.pdfViewerBase.viewerContainer.offsetTop&&(t=!0),t},e.prototype.getTextLastLength=function(e){return e?e.textContent.length:0},e.prototype.getNodeElementFromNode=function(e){return e.parentElement?e.parentElement:e.parentNode},e.prototype.copyText=function(){var e="";if(this.maintainSelectionOnZoom(!0,!1),this.selectionRangeArray.length>0)for(var t=0;t<this.selectionRangeArray.length;t++)e+=this.selectionRangeArray[t].textContent;if(e.length>0){this.pdfViewer.annotation&&(this.pdfViewer.annotation.isShapeCopied=!1);var i=document.createElement("textarea");i.contentEditable="true",i.textContent=e,this.pdfViewer.annotation&&this.pdfViewer.annotation.freeTextAnnotationModule&&(this.pdfViewer.annotation.freeTextAnnotationModule.selectedText=e),i.style.position="fixed",document.body.appendChild(i),i.select();try{document.execCommand("copy")}catch(n){console.warn("Copy to clipboard failed.",n)}finally{i&&document.body.removeChild(i)}}},e.prototype.destroy=function(){this.clear()},e.prototype.getModuleName=function(){return"TextSelection"},e}(),LS=function(){function e(e,t){var i=this;this.isTextSearch=!1,this.searchCount=0,this.searchIndex=0,this.currentSearchIndex=0,this.startIndex=null,this.searchPageIndex=null,this.searchString=null,this.isMatchCase=!1,this.searchRequestHandler=null,this.textContents=new Array,this.searchMatches=new Array,this.searchCollection=new Array,this.searchedPages=[],this.isPrevSearch=!1,this.searchTextDivzIndex="-1",this.tempElementStorage=new Array,this.isMessagePopupOpened=!1,this.isTextRetrieved=!1,this.isTextSearched=!1,this.isTextSearchEventTriggered=!1,this.isSearchText=!1,this.checkBoxOnChange=function(e){if(S()?e.currentTarget&&e.currentTarget.checked?i.isMatchCase=!0:i.isMatchCase=!1:e.checked?i.isMatchCase=!0:i.isMatchCase=!1,i.isTextSearch){i.resetVariables(),i.clearAllOccurrences();var t=i.searchInput.value;i.searchIndex=0,i.textSearch(t)}},this.searchKeypressHandler=function(e){i.enableNextButton(!0),i.enablePrevButton(!0),13===e.which?(i.initiateTextSearch(i.searchInput),i.updateSearchInputIcon(!1)):i.resetVariables()},this.searchClickHandler=function(e){i.searchButtonClick(i.searchBtn,i.searchInput)},this.nextButtonOnClick=function(e){i.nextSearch()},this.prevButtonOnClick=function(e){i.prevSearch()},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.createTextSearchBox=function(){var e,t=this;this.searchBox=we("div",{id:this.pdfViewer.element.id+"_search_box",className:"e-pv-search-bar"}),(e=S()?document.getElementById("toolbarContainer"):this.pdfViewerBase.getElement("_toolbarContainer"))&&(S(),this.searchBox.style.top=e.clientHeight+"px");var i=we("div",{id:this.pdfViewer.element.id+"_search_box_elements",className:"e-pv-search-bar-elements"}),n=we("div",{id:this.pdfViewer.element.id+"_search_input_container",className:"e-input-group e-pv-search-input"});(this.searchInput=we("input",{id:this.pdfViewer.element.id+"_search_input",className:"e-input"}),this.searchInput.type="text",S())?this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Findindocument").then((function(e){t.searchInput.placeholder=e})):this.searchInput.placeholder=this.pdfViewer.localeObj.getConstant("Find in document");this.searchBtn=we("span",{id:this.pdfViewer.element.id+"_search_box-icon",className:"e-input-group-icon e-input-search-group-icon e-pv-search-icon"}),n.appendChild(this.searchInput),n.appendChild(this.searchBtn),i.appendChild(n),this.pdfViewer.enableRtl?this.prevSearchBtn=this.createSearchBoxButtons("prev_occurrence","e-pv-next-search"):this.prevSearchBtn=this.createSearchBoxButtons("prev_occurrence","e-pv-prev-search"),this.prevSearchBtn.setAttribute("aria-label","Previous Search text"),i.appendChild(this.prevSearchBtn),this.pdfViewer.enableRtl?this.nextSearchBtn=this.createSearchBoxButtons("next_occurrence","e-pv-prev-search"):this.nextSearchBtn=this.createSearchBoxButtons("next_occurrence","e-pv-next-search"),this.nextSearchBtn.setAttribute("aria-label","Next Search text"),i.appendChild(this.nextSearchBtn);var o=we("div",{id:this.pdfViewer.element.id+"_match_case_container",className:"e-pv-match-case-container"}),s=we("input",{id:this.pdfViewer.element.id+"_match_case"});if(s.type="checkbox",S()&&(s.style.height="17px",s.style.width="17px",s.addEventListener("change",this.checkBoxOnChange.bind(this))),o.appendChild(s),this.searchBox.appendChild(i),this.searchBox.appendChild(o),this.pdfViewerBase.mainContainer.appendChild(this.searchBox),S()){var a=we("span",{id:this.pdfViewer.element.id+"_search_box_text",styles:"position: absolute; padding-top: 3px; padding-left: 8px; padding-right: 8px; font-size: 13px"});this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Matchcase").then((function(e){a.textContent=e})),o.appendChild(a)}else{new wa({cssClass:"e-pv-match-case",label:this.pdfViewer.localeObj.getConstant("Match case"),change:this.checkBoxOnChange.bind(this)}).appendTo(s)}var r=we("div",{id:this.pdfViewer.element.id+"_textSearchLoadingIndicator"});n.appendChild(r),r.style.position="absolute",r.style.top="15px",r.style.left=n.clientWidth-46+"px",fc({target:r,cssClass:"e-spin-center"}),this.setLoaderProperties(r),this.showSearchBox(!1),this.pdfViewer.enableRtl?(this.searchBox.classList.add("e-rtl"),this.searchBox.style.left="88.3px"):(this.searchBox.classList.remove("e-rtl"),this.searchBox.style.right="88.3px"),this.searchInput.addEventListener("focus",(function(){t.searchInput.parentElement.classList.add("e-input-focus")})),this.searchInput.addEventListener("blur",(function(){t.searchInput.parentElement.classList.remove("e-input-focus")})),this.searchInput.addEventListener("keydown",this.searchKeypressHandler.bind(this)),this.searchBtn.addEventListener("click",this.searchClickHandler.bind(this)),this.nextSearchBtn.addEventListener("click",this.nextButtonOnClick.bind(this)),this.prevSearchBtn.addEventListener("click",this.prevButtonOnClick.bind(this))},e.prototype.setLoaderProperties=function(e){var t=e.firstChild.firstChild.firstChild;t&&(t.style.height="18px",t.style.width="18px",t.style.transformOrigin="9px 9px 9px")},e.prototype.showLoadingIndicator=function(e){var t=document.getElementById(this.pdfViewer.element.id+"_textSearchLoadingIndicator");t&&(e?Ac(t):Vc(t))},e.prototype.textSearchBoxOnResize=function(){if(this.pdfViewer.toolbarModule&&this.pdfViewer.enableToolbar){var e=this.pdfViewerBase.getElement("_toolbarContainer_popup");e&&e.contains(this.pdfViewerBase.getElement("_search").parentElement)&&(this.searchBox.style.right="0px")}else this.pdfViewerBase.viewerContainer.clientWidth+this.pdfViewerBase.viewerContainer.offsetLeft<this.searchBox.offsetLeft+this.searchBox.clientWidth?(this.searchBox.style.right="0px",this.searchBox.style.width=parseInt(this.searchBox.style.width)-(this.searchBox.offsetLeft+this.searchBox.clientWidth-this.pdfViewerBase.viewerContainer.clientWidth)+"px",this.searchInput.style.width=parseInt(this.searchInput.style.width)-(this.searchBox.offsetLeft+this.searchBox.clientWidth-this.pdfViewerBase.viewerContainer.clientWidth)+"px"):(this.searchBox.style.right="88.3px",this.searchBox.style.width="",this.searchInput.style.width="")},e.prototype.showSearchBox=function(e){e?this.searchBox.style.display="block":(this.searchBox.style.display="none",this.searchInput.value=""),this.onTextSearchClose()},e.prototype.searchAfterSelection=function(){this.isTextSearch&&(this.initSearch(this.searchPageIndex,!0),this.highlightOthers())},e.prototype.initiateTextSearch=function(e){var t=e.value;t&&t.length>0&&" "===t[t.length-1]&&(t=t.slice(0,t.length-1)),this.initiateSearch(t)},e.prototype.initiateSearch=function(e){e!==this.searchString&&(this.isTextSearch=!1,this.searchPageIndex=this.pdfViewerBase.currentPageNumber-1),this.clearAllOccurrences(),""!==e&&(this.searchMatches[this.searchPageIndex]&&e===this.searchString?0===this.searchMatches[this.searchPageIndex].length?this.initSearch(this.searchPageIndex,!1):this.nextSearch():(this.resetVariables(),this.searchIndex=0,this.textSearch(e)))},e.prototype.textSearch=function(e){if(""!==e||e){if(this.searchString=e,this.isTextSearch=!0,this.isSearchText=!0,this.searchPageIndex=this.pdfViewerBase.currentPageNumber-1,this.searchCount=0,this.isTextSearchEventTriggered=!1,this.showLoadingIndicator(!0),this.pdfViewer.fireTextSearchStart(e,this.isMatchCase),this.pdfViewer.isExtractText)if(this.isTextRetrieved)for(var t=0;t<this.pdfViewerBase.pageCount;t++)this.initSearch(t,!1,!0);else{this.isTextSearched=!0;for(t=0;t<this.documentTextCollection.length;t++)this.initSearch(t,!1,!0)}this.initSearch(this.searchPageIndex,!1),this.highlightOthers()}},e.prototype.nextSearch=function(){this.isPrevSearch=!1,this.isTextSearch=!0,this.isSearchText=!1,this.searchString?(this.clearAllOccurrences(),this.searchIndex=this.searchIndex+1,this.searchMatches[this.searchPageIndex]?(this.searchIndex>=this.searchMatches[this.searchPageIndex].length?(this.searchIndex=0,this.searchPageIndex=this.searchPageIndex+1<this.pdfViewerBase.pageCount?this.searchPageIndex+1:0,this.pdfViewerBase.pageCount>1?this.initSearch(this.searchPageIndex,!1):(this.initSearch(this.searchPageIndex,!0),this.isMessagePopupOpened||this.onMessageBoxOpen(),this.pdfViewerBase.updateScrollTop(this.searchPageIndex)),this.showLoadingIndicator(!0)):(this.highlightSearchedTexts(this.searchPageIndex,!1,void 0),this.showLoadingIndicator(!1)),this.highlightOthers(!0)):this.initiateTextSearch(this.searchInput)):this.initiateTextSearch(this.searchInput)},e.prototype.prevSearch=function(){if(this.isPrevSearch=!0,this.isTextSearch=!0,this.isSearchText=!1,this.searchString)this.clearAllOccurrences(),this.searchIndex=this.searchIndex-1,this.searchIndex<0?(this.searchPageIndex=this.searchPageIndex-1<0?this.pdfViewerBase.pageCount-1:this.searchPageIndex-1,this.initSearch(this.searchPageIndex,!1),this.showLoadingIndicator(!0)):(this.highlightSearchedTexts(this.searchPageIndex,!1,void 0),this.showLoadingIndicator(!1)),this.highlightOthers(!0);else{this.searchIndex=this.searchIndex-1,this.searchPageIndex=this.searchPageIndex-1<0?this.pdfViewerBase.pageCount-1:this.searchPageIndex-1;var e=this.searchInput.value;this.textSearch(e)}},e.prototype.initSearch=function(e,t,i){var n=this.pdfViewerBase.getStoredData(e,!0),o=null,s=null,a=null;if(i){if(0!==this.documentTextCollection.length){var r=this.documentTextCollection[e][e],l=r.pageText?r.pageText:r.PageText;this.documentTextCollection[e]&&r&&this.getSearchTextContent(e,this.searchString,l,s,t,this.documentTextCollection[e])}}else n?(o=n.pageText,s=n.textContent,a=this.pdfViewerBase.textLayer.characterBound[e],this.textContents[e]=s,this.getPossibleMatches(e,this.searchString,o,s,t,a)):t||this.createRequestForSearch(e);this.pdfViewerBase.pageCount===(this.searchedPages&&this.searchedPages.length)&&(this.isTextSearchEventTriggered||(this.isTextSearchEventTriggered=!0,this.pdfViewer.fireTextSearchComplete(this.searchString,this.isMatchCase)))},e.prototype.getPossibleMatches=function(e,t,i,n,o,s){var a;if(this.searchMatches&&!this.searchMatches[e]){var r=i,l=t,d=r.replace(/(\s\r\n)/gm," ").replace(/(\r\n)/gm," "),h=i.replace(/(\s\r\n)/gm,"  ").replace(/(\r\n)/gm," "),p=d.replace(/[^a-zA-z0-9" "]/g,""),c=t.length;this.isMatchCase||(l=t.toLowerCase(),r=i.toLowerCase(),d=d.toLowerCase(),h=h.toLowerCase(),p=p.toLowerCase());for(var u=[],f=[],g=-c,y=-c,v=-c,w=-c,b=-c;(0!==g||0===g)&&""!==l&&" "!==l&&l;){if(g=r.indexOf(l,g+c),-1!==l.indexOf(" ")){var S=t.replace(" ","\r\n");y=r.indexOf(S,y+c),(y=-1)<=-1||y<g&&u.push(y)}if(g<=-1&&y<=-1)break;g<=-1||u.push(g),y>g&&!(y<=-1)&&u.push(y)}if(0==u.length){if(v=d.indexOf(l,v+c),w=h.indexOf(l,w+c),b=p.indexOf(l,b+c),-1!==v){g=-(a=this.correctLinetext(t,g,r))[0].length;for(var C=0;C<a.length;C++)g=r.indexOf(a[C].trim(),g+(void 0===a[C-1]?a[0].length:a[C-1].length)),f.push(g),f.length>1&&(f[1]-(f[0]+a[0].length)<=3?(u.push(f),this.searchMatches[e]=u):(C=-1,g=f[0]+a[0].length,f.splice(0,f.length)))}else if(-1!==b){g=-(a=this.correctLinetext(t,g,r))[0].length;for(C=0;C<a.length;C++)g=r.indexOf(a[C].trim(),g+(void 0===a[C-1]?a[0].length:a[C-1].length)),f.push(g),f.length>1&&(f[1]-(f[0]+a[0].length)<=3?(u.push(f),this.searchMatches[e]=u):(C=-1,g=f[0]+a[0].length,f.splice(0,f.length)))}else if(-1!==w){g=-(a=this.correctLinetext(t,g,r))[0].length;for(C=0;C<a.length;C++)g=r.indexOf(a[C].trim(),g+(void 0===a[C-1]?a[0].length:a[C-1].length)),f.push(g),f.length>1&&(f[1]-(f[0]+a[0].length)<=3?(u.push(f),this.searchMatches[e]=u):(C=-1,g=f[0]+a[0].length,f.splice(0,f.length)))}u.length>1&&u.splice(1,u.length)}this.searchMatches&&u.length>0&&(this.searchMatches[e]=u)}if(o||(-1===this.searchedPages.indexOf(e)&&(this.searchedPages.push(e),this.startIndex=this.searchedPages[0]),this.updateSearchInputIcon(!1)),this.searchMatches&&this.searchMatches[e]&&0!==this.searchMatches[e].length)o||(this.isPrevSearch&&(this.searchIndex=this.searchMatches[e].length-1),this.pdfViewerBase.currentPageNumber-1!==this.searchPageIndex?(this.searchMatches.length>0&&(0===this.searchIndex||-1===this.searchIndex)&&this.searchPageIndex===this.currentSearchIndex?(this.isMessagePopupOpened||this.isSearchText||this.onMessageBoxOpen(),this.searchPageIndex=this.getSearchPage(this.pdfViewerBase.currentPageNumber-1),this.searchedPages=[this.searchPageIndex]):this.isPrevSearch&&this.searchMatches&&this.searchMatches.length>0&&this.searchMatches[this.searchPageIndex]&&this.searchMatches[this.searchPageIndex].length>0&&this.searchedPages.length===this.pdfViewerBase.pageCount&&this.startIndex-1===this.searchPageIndex&&(this.isMessagePopupOpened||this.onMessageBoxOpen(),this.searchedPages=[this.startIndex]),this.pdfViewerBase.updateScrollTop(this.searchPageIndex)):this.searchMatches&&this.searchMatches[this.searchPageIndex]&&this.searchMatches[this.searchPageIndex].length>0&&this.searchedPages.length===this.pdfViewerBase.pageCount&&this.startIndex===this.searchPageIndex&&this.pdfViewerBase.pageCount>1&&(this.isMessagePopupOpened||this.onMessageBoxOpen(),this.searchedPages=[this.startIndex])),this.highlightSearchedTexts(e,o,a);else if(!o)if(this.isPrevSearch?this.searchPageIndex=this.searchPageIndex-1<0?this.pdfViewerBase.pageCount-1:this.searchPageIndex-1:this.searchPageIndex=this.searchPageIndex+1<this.pdfViewerBase.pageCount?this.searchPageIndex+1:0,-1===this.searchedPages.indexOf(this.searchPageIndex)&&this.searchedPages.length!==this.pdfViewerBase.pageCount)this.showLoadingIndicator(!0),this.initSearch(this.searchPageIndex,!1);else{var x=this.getSearchPage(e);this.searchMatches&&m(this.searchMatches[this.searchPageIndex])&&this.searchedPages.length===this.pdfViewerBase.pageCount?(this.isMessagePopupOpened||this.onMessageBoxOpen(),this.pdfViewerBase.updateScrollTop(this.startIndex)):this.searchMatches&&this.searchMatches.length>0&&(0===this.searchIndex||-1===this.searchIndex)&&x===this.currentSearchIndex?(this.isPrevSearch?(this.isMessagePopupOpened||this.onMessageBoxOpen(),this.searchPageIndex=x,this.searchedPages=[x],this.searchIndex=-1):(this.isMessagePopupOpened||1===this.pdfViewerBase.currentPageNumber||this.isSearchText||this.onMessageBoxOpen(),this.searchPageIndex=x,this.searchedPages=[x],this.searchIndex=0),this.highlightSearchedTexts(this.searchPageIndex,o,void 0)):this.searchMatches&&this.searchMatches[this.searchPageIndex]&&this.searchMatches[this.searchPageIndex].length>0&&this.searchedPages.length===this.pdfViewerBase.pageCount&&(this.isMessagePopupOpened||this.onMessageBoxOpen(),this.searchPageIndex=this.startIndex,this.searchedPages=[this.searchPageIndex],this.searchIndex=0,this.pdfViewerBase.updateScrollTop(this.startIndex),this.highlightSearchedTexts(this.searchPageIndex,o,void 0))}},e.prototype.correctLinetext=function(e,t,i){var n=[],o=e.split(/[" "]+/);this.isMatchCase||(o=e.toLowerCase().split(/[" "]+/)),t=0;var s="",a=i.replace(/ \r\n/g," ");a=(a=a.replace(/\r\n/g," ")).replace(/[^a-zA-Z0-9 ]/g,""),e=e.replace(/[^a-zA-Z0-9 ]/g,"");var r=a.match(e);if(this.isMatchCase||(r=a.match(e.toLowerCase())),m(r))return n;for(var l=r=i.slice(r.index,i.length),d=0;d<o.length;d++){var h=s+o[d];t=i.indexOf(h,t),("\n"===(l=l?l.replace(o[d-1],""):i.replace(o[d-1],""))[l.indexOf(o[d])-1]&&"\n"===l[l.indexOf(o[d+1])-1]||"\n"===l[l.indexOf(o[d])-1]&&m(l[l.indexOf(o[d+1])-1]))&&(t=-1,""===s&&(s=o[d],d+=1)),-1!==t?(s+=o[d]+" ",d==o.length-1&&n.push(s)):(n.push(s),s=o[d]+" ","\n"==l[l.indexOf(o[d])-1]&&"\n"==l[l.indexOf(o[d+1])-1]&&(n.push(s),s=o[d+1]+" ",l=l?l.replace(o[d-1],""):i.replace(o[d-1],""),d+=1),d==o.length-1&&n.push(s))}return n},e.prototype.getSearchTextContent=function(e,t,i,n,o,s){var a=i,r=t,l=t.length;this.isMatchCase||(r=t.toLowerCase(),a=i.toLowerCase());for(var d=[],h=-l,p=-l;0!==h&&""!==r&&" "!==r&&r;){if(h=a.indexOf(r,h+l),-1!==r.indexOf(" ")){var c=t.replace(" ","\r\n");(p=a.indexOf(c,p+l))<=-1||p<h&&d.push(p)}if(h<=-1&&p<=-1)break;h<=-1||d.push(h),p>h&&!(p<=-1)&&d.push(p)}0!==d.length&&(this.searchCount=this.searchCount+d.length),this.searchMatches[e]=d},e.prototype.getSearchPage=function(e){var t=null;if(this.isPrevSearch){for(var i=e;i>=0;i--)if(i!==e&&this.searchMatches[i]){t=i;break}if(!t)for(var n=this.pdfViewerBase.pageCount-1;n>e;n--)if(this.searchMatches[n]){t=n;break}}else{for(i=e;i<this.pdfViewerBase.pageCount;i++)if(i!==e&&this.searchMatches[i]){t=i;break}if(!t)if(0===e)t=e;else for(n=0;n<e;n++)if(this.searchMatches[n]){t=n;break}}return t},e.prototype.highlightSearchedTexts=function(e,t,i){var n,o=this.searchMatches[e],s={y:-100,x:-100},a=this.searchString,r=this.pdfViewerBase.textLayer.characterBound[e];if(t&&this.pdfViewerBase.currentPageNumber-1!==this.searchPageIndex&&this.searchMatches.length>0&&e===this.getSearchPage(this.pdfViewerBase.currentPageNumber-1)&&!0,r){for(var l=0;l<o.length;l++){if(void 0!==o[l].length&&void 0!==i)if(l===this.searchIndex&&e===this.searchPageIndex)for(var d=0;d<i.length;d++)n="e-pv-search-text-highlight",this.searchString=i[d].trim(),this.addDivForSearch(l,e,r,this.searchString.length,n,d);else for(d=0;d<i.length;d++)n="e-pv-search-text-highlightother",this.searchString=i[d].trim(),this.addDivForSearch(l,e,r,this.searchString.length,n,d);else n=l===this.searchIndex&&e===this.searchPageIndex?"e-pv-search-text-highlight":"e-pv-search-text-highlightother";void 0==o[l].length&&this.addDivForSearch(l,e,r,this.searchString.length,n,void 0)}if(this.searchString=a,e===this.searchPageIndex&&!t){var h=this.pdfViewerBase.getElement("_searchtext_"+e+"_"+this.searchIndex);if(h){var p=this.getScrollElement(h);this.scrollToSearchStr(p,s)}else{this.pdfViewerBase.updateScrollTop(e);var c=this.pdfViewerBase.getElement("_searchtext_"+e+"_"+this.searchIndex);if(c){p=this.getScrollElement(c);this.scrollToSearchStr(p,s)}}}}},e.prototype.addDivForSearch=function(e,t,i,n,o,s){var a;m(this.pdfViewerBase.getElement("_textLayer_"+t))&&"e-pv-search-text-highlight"===o&&this.pdfViewer.navigation&&this.pdfViewer.navigation.goToPage(t+1);for(var r=a=void 0!==this.searchMatches[t][e].length?this.searchMatches[t][e][s]:this.searchMatches[t][e],l=0;a<r+n;)a=this.addDivElement(a,i,n,o,e,t,r,l,s),l++;"e-pv-search-text-highlight"===o&&this.showLoadingIndicator(!1)},e.prototype.addDivElement=function(e,t,i,n,o,s,a,r,l){var d=0,h=0,p=0,c=0,u=!1;t[e]&&(c=t[e].X,p=t[e].Y);var f=0;for(e-a!==0&&(f=e-a,i+=1);f<i;f++){if(t[e])c>(g=t[e]).X+g.Width&&(u=!0),d=d>(y=(p=p<g.Y?p:g.Y)<g.Y?g.Y-p:p-g.Y)+g.Height?d:y+g.Height,e++}var m=!1;if(u){var g,y;c=(g=t[a+i-1]).X,h=t[a].X-t[a+i-1].X,d=d>(y=(p=p<g.Y?p:g.Y)<g.Y?g.Y-p:p-g.Y)+g.Height?d:y+g.Height;for(var v=t[a-1].Y-t[a].Y,w=a+i-1;w>=a;w--)0===(g=t[w]).Width&&(v=g.Y-t[w-1].Y);h+=v}else if(a+i!==e)m=!0,t[e-1]&&(h=t[e-1].X-c);else{m=!1;var b=this.pdfViewerBase.getStoredData(s,!0),S=null;if(b)S=b.pageText;else if(this.pdfViewer.isExtractText&&0!==this.documentTextCollection.length){var C=this.documentTextCollection[s][s];S=C.pageText?C.pageText:C.PageText}t[e]?h=!S||""!==S[e]&&" "!==S[e]&&"\r"!==S[e]&&"\n"!==S[e]||0!==t[e].Width?t[e].X-c:t[e-1].X-c+t[e-1].Width:t[e-1]&&(h=t[e-1].X-c)}return this.createSearchTextDiv(o,s,d,h,p,c,n,m,r,l),e},e.prototype.createSearchTextDiv=function(e,t,i,n,o,s,a,r,l,d){var h="_searchtext_"+t+"_"+e;if(r&&(h+="_"+l),void 0!==d&&this.pdfViewerBase.getElement(h)){var p=we("div",{id:this.pdfViewer.element.id+h+"_"+d}),c=this.pdfViewerBase.pageSize[t];if(this.calculateBounds(p,i,n,o,s,c),p.classList.add(a),"e-pv-search-text-highlight"===a){p.style.backgroundColor=""===this.pdfViewer.textSearchColorSettings.searchHighlightColor?"#fdd835":this.pdfViewer.textSearchColorSettings.searchHighlightColor;var u={left:s,top:o,width:n,height:i};this.pdfViewer.fireTextSearchHighlight(this.searchString,this.isMatchCase,u,t+1)}else"e-pv-search-text-highlightother"===a&&(p.style.backgroundColor=""===this.pdfViewer.textSearchColorSettings.searchColor?"#8b4c12":this.pdfViewer.textSearchColorSettings.searchColor);var f=this.pdfViewerBase.getElement("_textLayer_"+t);p.style.zIndex=this.searchTextDivzIndex,f&&f.appendChild(p)}if(!this.pdfViewerBase.getElement(h)){p=we("div",{id:this.pdfViewer.element.id+h}),c=this.pdfViewerBase.pageSize[t];if(this.calculateBounds(p,i,n,o,s,c),p.classList.add(a),"e-pv-search-text-highlight"===a){p.style.backgroundColor=""===this.pdfViewer.textSearchColorSettings.searchHighlightColor?"#fdd835":this.pdfViewer.textSearchColorSettings.searchHighlightColor;u={left:s,top:o,width:n,height:i};this.pdfViewer.fireTextSearchHighlight(this.searchString,this.isMatchCase,u,t+1)}else"e-pv-search-text-highlightother"===a&&(p.style.backgroundColor=""===this.pdfViewer.textSearchColorSettings.searchColor?"#8b4c12":this.pdfViewer.textSearchColorSettings.searchColor);f=this.pdfViewerBase.getElement("_textLayer_"+t);p.style.zIndex=this.searchTextDivzIndex,f&&f.appendChild(p)}},e.prototype.calculateBounds=function(e,t,i,n,o,s){0===s.rotation||2===s.rotation?(e.style.height=Math.ceil(t)*this.pdfViewerBase.getZoomFactor()+"px",e.style.width=i*this.pdfViewerBase.getZoomFactor()+"px",2===s.rotation?(e.style.top=(s.height-n-t)*this.pdfViewerBase.getZoomFactor()+"px",e.style.left=Math.ceil(s.width-o-i)*this.pdfViewerBase.getZoomFactor()+"px"):(e.style.top=n*this.pdfViewerBase.getZoomFactor()+"px",e.style.left=o*this.pdfViewerBase.getZoomFactor()+"px")):1===s.rotation?(e.style.height=i*this.pdfViewerBase.getZoomFactor()+"px",e.style.width=t*this.pdfViewerBase.getZoomFactor()+"px",e.style.top=o*this.pdfViewerBase.getZoomFactor()+"px",e.style.left=(s.height-n-t)*this.pdfViewerBase.getZoomFactor()+"px"):3===s.rotation&&(e.style.height=i*this.pdfViewerBase.getZoomFactor()+"px",e.style.width=t*this.pdfViewerBase.getZoomFactor()+"px",e.style.left=(s.width-s.height+n)*this.pdfViewerBase.getZoomFactor()+"px",e.style.top=(s.height-o-i)*this.pdfViewerBase.getZoomFactor()+"px")},e.prototype.isClassAvailable=function(){for(var e=!1,t=0;t<this.tempElementStorage.length;t++)if(this.tempElementStorage[t].classString&&("e-pv-search-text-highlight"===this.tempElementStorage[t].classString||"e-pv-search-text-highlightother"===this.tempElementStorage[t].classString)){e=!0;break}return e},e.prototype.getScrollElement=function(e){var t=e;if(e.childNodes.length>0)for(var i=0;i<e.childNodes.length;i++)e.childNodes[i].classList&&e.childNodes[i].classList.contains("e-pv-search-text-highlight")&&(t=e.childNodes[i]);return t},e.prototype.scrollToSearchStr=function(e,t){for(var i=e.offsetParent,n=e.offsetTop+e.clientTop,o=e.offsetLeft+e.clientLeft;i.id!==this.pdfViewerBase.viewerContainer.id;)n+=i.offsetTop,o+=i.offsetLeft,i=i.offsetParent;t&&(n+=t.y,o+=t.x,(ge.isDevice&&!this.pdfViewer.enableDesktopMode||this.pdfViewerBase.getZoomFactor()>1.5)&&(i.scrollLeft=o)),i.scrollTop=n,this.pdfViewerBase.updateMobileScrollerPosition()},e.prototype.resizeSearchElements=function(e){for(var t=document.querySelectorAll('div[id*="'+this.pdfViewer.element.id+"_searchtext_"+e+'"]'),i=0;i<t.length;i++){var n=t[i],o=1;this.pdfViewer.magnificationModule&&(o=this.pdfViewer.magnificationModule.previousZoomFactor);var s=e+"_"+o+"_"+this.pdfViewerBase.getZoomFactor();n.getAttribute("name")!==s&&(n.style.width=parseFloat(n.style.width)/o*this.pdfViewerBase.getZoomFactor()+"px",n.style.height=parseFloat(n.style.height)/o*this.pdfViewerBase.getZoomFactor()+"px",n.style.top=parseFloat(n.style.top)/o*this.pdfViewerBase.getZoomFactor()+"px",n.style.left=parseFloat(n.style.left)/o*this.pdfViewerBase.getZoomFactor()+"px",n.setAttribute("name",s))}},e.prototype.highlightOtherOccurrences=function(e){this.initSearch(e,!0)},e.prototype.highlightOthers=function(e){for(var t=this.getIndexes(),i=parseFloat(t.lowerPageValue.toString()),n=parseFloat(t.higherPageValue.toString()),o=i;o<=n;o++)this.highlightOtherOccurrences(o);e&&this.showLoadingIndicator(!1)},e.prototype.clearAllOccurrences=function(){for(var e=document.querySelectorAll('div[id*="'+this.pdfViewer.element.id+'_searchtext_"]'),t=0;t<e.length;t++)e[t].parentElement.removeChild(e[t])},e.prototype.getIndexes=function(){var e=this.pdfViewerBase.currentPageNumber-3;e=e>0?e:0;var t=this.pdfViewerBase.currentPageNumber+1;return{lowerPageValue:e,higherPageValue:t=t<this.pdfViewerBase.pageCount?t:this.pdfViewerBase.pageCount-1}},e.prototype.applyTextSelection=function(){if(this.pdfViewer.textSelectionModule&&!this.pdfViewerBase.isTextSelectionDisabled)for(var e=this.getIndexes(),t=parseFloat(e.lowerPageValue.toString()),i=parseFloat(e.higherPageValue.toString()),n=t;n<=i;n++)this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(n)},e.prototype.resetTextSearch=function(){this.resetVariables(),this.onTextSearchClose(),this.searchPageIndex=null,this.searchIndex=0,this.updateSearchInputIcon(!0),this.enableNextButton(!1),this.enablePrevButton(!1),this.documentTextCollection=[],this.isTextRetrieved=!1,this.isTextSearched=!1,this.isSearchText=!1,this.searchRequestHandler&&this.searchRequestHandler.clear()},e.prototype.onTextSearchClose=function(){this.isPrevSearch=!1,this.isTextSearch=!1,this.pdfViewerBase.pageCount>0&&this.clearAllOccurrences()},e.prototype.createRequestForSearch=function(e){var t=this,i=816,n=this.pdfViewer.element.clientHeight,o=this.pdfViewerBase.pageSize[e].width,s=(this.pdfViewerBase.pageSize[e].height,this.pdfViewerBase.getTileCount(o)),a=i>=o?1:s,r=i>=o?1:s,l=!1,d=this.pdfViewer.tileRenderingSettings;d.enableTileRendering&&d.x>0&&d.y>0&&(a=i>=o?1:d.x,r=i>=o?1:d.y),a>1&&r>1&&(l=!0);for(var h=function(d){for(var h=function(h){var c=void 0;c={xCoordinate:d,yCoordinate:h,pageNumber:e,viewPortWidth:i,viewPortHeight:n,documentId:t.pdfViewerBase.getDocumentId(),hashId:t.pdfViewerBase.hashId,zoomFactor:t.pdfViewerBase.getZoomFactor(),tilecount:s,action:"Search",elementId:t.pdfViewer.element.id,uniqueId:t.pdfViewerBase.documentId,tileXCount:a,tileYCount:r},p.pdfViewerBase.jsonDocumentId&&(c.documentId=p.pdfViewerBase.jsonDocumentId),p.searchRequestHandler=new Dh(p.pdfViewer),p.searchRequestHandler.url=p.pdfViewer.serviceUrl+"/"+p.pdfViewer.serverActionSettings.renderPages,p.searchRequestHandler.responseType="json",p.searchRequestHandler.send(c),p.searchRequestHandler.onSuccess=function(n){var s=n.data;if(s){if("object"!==typeof s)try{s=JSON.parse(s)}catch(c){t.pdfViewerBase.onControlError(500,s,this.pdfViewer.serverActionSettings.renderPages),s=null}if(s)if(m(s.pageText)||s.uniqueId!==t.pdfViewerBase.documentId){if(l&&s.uniqueId===t.pdfViewerBase.documentId){t.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderPages,s);p=void 0!==s.pageNumber?s.pageNumber:e;t.pdfViewerBase.storeWinData(s,p,s.tileX,s.tileY),d===a-1&&h===r-1&&t.initSearch(e,!1)}}else{t.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderPages,s);var p=void 0!==s.pageNumber?s.pageNumber:e;i>=o?t.pdfViewerBase.storeWinData(s,p):t.pdfViewerBase.storeWinData(s,p,s.tileX,s.tileY),l?d===a-1&&h===r-1&&t.initSearch(e,!1):t.initSearch(e,!1)}}},p.searchRequestHandler.onFailure=function(e){t.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,this.pdfViewer.serverActionSettings.renderPages)},p.searchRequestHandler.onError=function(e){t.pdfViewerBase.openNotificationPopup(),t.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,this.pdfViewer.serverActionSettings.renderPages)}},c=0;c<r;c++)h(c)},p=this,c=0;c<a;c++)h(c)},e.prototype.getPDFDocumentTexts=function(){var e=50,t=this.pdfViewerBase.pageCount;e>=t&&(e=t),this.createRequestForGetPdfTexts(0,e)},e.prototype.createRequestForGetPdfTexts=function(e,t){var i,n=this;i={pageStartIndex:e,pageEndIndex:t,documentId:n.pdfViewerBase.getDocumentId(),hashId:n.pdfViewerBase.hashId,action:"RenderPdfTexts",elementId:n.pdfViewer.element.id,uniqueId:n.pdfViewerBase.documentId},this.pdfViewerBase.jsonDocumentId&&(i.documentId=this.pdfViewerBase.jsonDocumentId),this.searchRequestHandler=new Dh(this.pdfViewer),this.searchRequestHandler.url=this.pdfViewer.serviceUrl+"/"+this.pdfViewer.serverActionSettings.renderTexts,this.searchRequestHandler.responseType="json",this.searchRequestHandler.send(i),this.searchRequestHandler.onSuccess=function(i){var o=i.data;if(o){if("object"!==typeof o)try{o=JSON.parse(o)}catch(a){n.pdfViewerBase.onControlError(500,o,this.pdfViewer.serverActionSettings.renderTexts),o=null}if(o&&o.documentTextCollection&&o.uniqueId===n.pdfViewerBase.documentId){n.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderTexts,o),n.documentTextCollection.length>0?(n.documentTextCollection=o.documentTextCollection.concat(n.documentTextCollection),n.documentTextCollection=n.orderPdfTextCollections(n.documentTextCollection)):n.documentTextCollection=o.documentTextCollection;var s=n.pdfViewerBase.pageCount;t!==s?(e=t,(t+=50)>=s&&(t=s),n.createRequestForGetPdfTexts(e,t)):(n.isTextRetrieved=!0,n.pdfViewer.fireTextExtractionCompleted(n.documentTextCollection),n.isTextSearched&&n.searchString.length>0&&(n.textSearch(n.searchString),n.isTextSearched=!1))}}},this.searchRequestHandler.onFailure=function(e){n.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,this.pdfViewer.serverActionSettings.renderTexts)},this.searchRequestHandler.onError=function(e){n.pdfViewerBase.openNotificationPopup(),n.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,this.pdfViewer.serverActionSettings.renderTexts)}},e.prototype.orderPdfTextCollections=function(e){for(var t=[],i=0;i<e.length;i++)if(0===t.length)t.push(e[i]);else if(parseInt(Object.keys(e[i])[0])>parseInt(Object.keys(t[t.length-1])[0]))t.push(e[i]);else for(var n=0;n<t.length;n++)if(parseInt(Object.keys(e[i])[0])<parseInt(Object.keys(t[n])[0])){t.splice(n,0,e[i]);break}return t},e.prototype.createSearchBoxButtons=function(e,t){var i=we("button",{id:this.pdfViewer.element.id+"_"+e,className:"e-btn e-icon-btn e-pv-search-btn "+t});i.setAttribute("type","button");var n=we("span",{id:this.pdfViewer.element.id+"_"+e+"Icon",className:"e-pv-icon-search "+t+"-icon"});return i.disabled=!0,i.appendChild(n),i},e.prototype.enablePrevButton=function(e){ge.isDevice&&!this.pdfViewer.enableDesktopMode||(e?this.prevSearchBtn.removeAttribute("disabled"):this.prevSearchBtn&&(this.prevSearchBtn.disabled=!0))},e.prototype.enableNextButton=function(e){ge.isDevice&&!this.pdfViewer.enableDesktopMode||(e?this.nextSearchBtn.removeAttribute("disabled"):this.nextSearchBtn&&(this.nextSearchBtn.disabled=!0))},e.prototype.resetVariables=function(){this.searchedPages=[],this.searchMatches=new Array},e.prototype.searchButtonClick=function(e,t){(this.isMessagePopupOpened=!1,S()&&ge.isDevice&&!this.pdfViewer.enableDesktopMode)&&(e=this.pdfViewerBase.getElement("_search_box-icon").children[0].children[0],t=this.pdfViewerBase.getElement("_search_input"));e.classList.contains("e-pv-search-icon")?this.initiateTextSearch(t):e.classList.contains("e-pv-search-close")&&(this.showLoadingIndicator(!1),t.value="",this.resetTextSearch(),t.focus())},e.prototype.updateSearchInputIcon=function(e){S()&&this.searchBtn&&ge.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.searchBtn=this.pdfViewerBase.getElement("_search_box-icon").children[0].children[0]),this.searchBtn&&(e?(this.searchBtn.classList.remove("e-pv-search-close"),this.searchBtn.classList.add("e-pv-search-icon")):(this.searchBtn.classList.remove("e-pv-search-icon"),this.searchBtn.classList.add("e-pv-search-close")))},e.prototype.onMessageBoxOpen=function(){var e=this;(this.showLoadingIndicator(!1),this.pdfViewerBase.getElement("_search_input").blur(),this.isMessagePopupOpened=!0,!ge.isDevice||this.pdfViewer.enableDesktopMode)?S()?this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Nomatches").then((function(t){e.pdfViewerBase.textLayer.createNotificationPopup(t)})):this.pdfViewerBase.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant("No matches")):S()?this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_NoTextFound").then((function(t){e.pdfViewerBase.navigationPane.createTooltipMobile(t)})):this.pdfViewerBase.navigationPane.createTooltipMobile(this.pdfViewer.localeObj.getConstant("No Text Found"))},e.prototype.searchText=function(e,t){e&&e.length>0&&" "===e[e.length-1]&&(e=e.slice(0,e.length-1)),this.searchString=e,this.isMatchCase=t,this.searchIndex=0,this.textSearch(e)},e.prototype.searchNext=function(){this.nextSearch()},e.prototype.searchPrevious=function(){this.prevSearch()},e.prototype.cancelTextSearch=function(){this.resetTextSearch()},e.prototype.destroy=function(){this.searchMatches=void 0},e.prototype.getModuleName=function(){return"TextSearch"},e}(),PS=function(){function e(e,t){this.isFormFieldExistingInCollection=!1,this.multilineCheckboxCheckedState=!1,this.formFieldListItemCollection=[],this.formFieldListItemDataSource=[],this.isInitialField=!1,this.isSetFormFieldMode=!1,this.increasedSize=5,this.defaultZoomValue=1,this.signatureFieldPropertyChanged={isReadOnlyChanged:!1,isRequiredChanged:!1,isVisibilityChanged:!1,isNameChanged:!1,isPrintChanged:!1,isTooltipChanged:!1,isThicknessChanged:!1},this.initialFieldPropertyChanged={isReadOnlyChanged:!1,isRequiredChanged:!1,isVisibilityChanged:!1,isNameChanged:!1,isPrintChanged:!1,isTooltipChanged:!1,isThicknessChanged:!1},this.textFieldPropertyChanged={isReadOnlyChanged:!1,isRequiredChanged:!1,isBackgroundColorChanged:!1,isBorderColorChanged:!1,isAlignmentChanged:!1,isFontSizeChanged:!1,isNameChanged:!1,isToolTipChanged:!1,isThicknessChanged:!1,isVisibilityChanged:!1,isPrintChanged:!1,isSelected:!1,isFontFamilyChanged:!1,isFontStyle:!1,isValueChanged:!1,isMaXLength:!1,isColorChanged:!1,isMultilineChanged:!1},this.passwordFieldPropertyChanged={isReadOnlyChanged:!1,isRequiredChanged:!1,isBackgroundColorChanged:!1,isBorderColorChanged:!1,isAlignmentChanged:!1,isFontSizeChanged:!1,isNameChanged:!1,isToolTipChanged:!1,isThicknessChanged:!1,isVisibilityChanged:!1,isPrintChanged:!1,isSelected:!1,isFontFamilyChanged:!1,isFontStyle:!1,isValueChanged:!1,isMaXLength:!1,isColorChanged:!1},this.checkBoxFieldPropertyChanged={isReadOnlyChanged:!1,isRequiredChanged:!1,isBackgroundColorChanged:!1,isBorderColorChanged:!1,isNameChanged:!1,isToolTipChanged:!1,isThicknessChanged:!1,isVisibilityChanged:!1,isPrintChanged:!1,isCheckedChanged:!1},this.radioButtonFieldPropertyChanged={isReadOnlyChanged:!1,isRequiredChanged:!1,isBackgroundColorChanged:!1,isBorderColorChanged:!1,isNameChanged:!1,isToolTipChanged:!1,isThicknessChanged:!1,isVisibilityChanged:!1,isPrintChanged:!1,isSelectedChanged:!1},this.dropdownFieldPropertyChanged={isReadOnlyChanged:!1,isRequiredChanged:!1,isBackgroundColorChanged:!1,isBorderColorChanged:!1,isAlignmentChanged:!1,isFontSizeChanged:!1,isNameChanged:!1,isToolTipChanged:!1,isThicknessChanged:!1,isVisibilityChanged:!1,isPrintChanged:!1,isSelected:!1,isFontFamilyChanged:!1,isFontStyle:!1,isColorChanged:!1,isOptionChanged:!1},this.listBoxFieldPropertyChanged={isReadOnlyChanged:!1,isRequiredChanged:!1,isBackgroundColorChanged:!1,isBorderColorChanged:!1,isAlignmentChanged:!1,isFontSizeChanged:!1,isNameChanged:!1,isToolTipChanged:!1,isThicknessChanged:!1,isVisibilityChanged:!1,isPrintChanged:!1,isSelected:!1,isFontFamilyChanged:!1,isFontStyle:!1,isColorChanged:!1,isOptionChanged:!1},this.disableSignatureClickEvent=!1,this.formFieldIndex=0,this.formFieldIdIndex=0,this.isProgrammaticSelection=!1,this.isShapeCopied=!1,this.isDrawHelper=!1,this.isFormFieldUpdated=!1,this.isPropertyDialogOpen=!1,this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.drawHelper=function(e,t,i){var n=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+this.pdfViewerBase.activeElements.activePageID);if(null!==document.getElementById(this.pdfViewer.element.id+"_pageCanvas_"+this.pdfViewerBase.activeElements.activePageID)&&null!==n){var o=this.pdfViewerBase.getZoomFactor(),s=void 0,a=this.updateFormFieldInitialSize(t,e);if(s=this.createHtmlElement("div",{id:"FormField_helper_html_element",class:"foreign-object"}),this.isDrawHelper=!0,"SignatureField"===e||"InitialField"===e)s.appendChild(this.createSignatureDialog(this.pdfViewer,t,a));else if("DropdownList"===e){var r={id:"dropdown_helper"};s.appendChild(this.createDropDownList(r,t))}else if("ListBox"===e){r={id:"listbox_helper"};s.appendChild(this.createListBox(r,t))}else s.appendChild(this.createInputElement(e,t,a));n.appendChild(s);var l=this.pdfViewerBase.getMousePosition(i);s.setAttribute("style","height:"+a.height*o+"px; width:"+a.width*o+"px;left:"+l.x*o+"px; top:"+l.y*o+"px;position:absolute;opacity: 0.5;")}},e.prototype.drawHTMLContent=function(e,t,i,n,o,s){var a=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+n),r=document.getElementById(this.pdfViewer.element.id+"_pageCanvas_"+n);if(null===document.getElementById("form_field_"+t.id+"_html_element")&&null!==t&&null!==r&&a){var l=this.pdfViewerBase.getZoomFactor(),d=void 0,h=void 0,p={id:"form_field_"+t.id+"_html_element",class:"foreign-object"};h=this.createHtmlElement("div",p);var c={id:t.id+"_html_element",class:"foreign-object"};d=this.createHtmlElement("div",c),t.template="SignatureField"===e||"InitialField"===e?d.appendChild(this.createSignatureDialog(o,i)):"DropdownList"===e?d.appendChild(this.createDropDownList(t,i)):"ListBox"===e?d.appendChild(this.createListBox(t,i)):d.appendChild(this.createInputElement(e,i)),this.isSetFormFieldMode=!1;var u=document.createElement("div");if(u.id=i.id+"_designer_name",u.style.fontSize=i.fontSize?i.fontSize*l+"px":10*l+"px",u.className="e-pv-show-designer-name",this.pdfViewer.designerMode?(u.innerHTML=i.name,u.style.position="absolute"):(u.innerHTML="",u.style.position="initial"),"Checkbox"===e&&ge.isDevice){var f=void 0,m=(w=i.bounds).height+this.increasedSize,g=w.width+this.increasedSize;(f=we("div",{id:i.id+"_outer_div",className:"e-pv-checkbox-outer-div"})).setAttribute("style","height:"+m*l+"px; width:"+g*l+"px;left:"+w.x*l+"px; top:"+w.y*l+"px;position:absolute; opacity: 1;"),d.appendChild(u),f.addEventListener("click",this.setCheckBoxState.bind(this)),h.appendChild(d),a.appendChild(f),f.appendChild(h)}else d.appendChild(u),h.appendChild(d),a.appendChild(h);if("RadioButton"===e&&document.getElementsByClassName("e-pv-radiobtn-span").length>0)for(var y=document.getElementsByClassName("e-pv-radiobtn-span"),v=0;v<y.length;v++){var w=this.getCheckboxRadioButtonBounds(i);y[v].style.width=w.width/2+"px",y[v].style.height=w.height/2+"px",(parseInt(y[v].style.width,10)<=1||parseInt(y[v].style.height,10)<=1)&&(y[v].style.width="1px",y[v].style.height="1px",y[v].style.margin="1px")}var b=Wh(t).topLeft;if("Checkbox"===e&&ge.isDevice?d.setAttribute("style","height:"+t.actualSize.height*l+"px; width:"+t.actualSize.width*l+"px;left:"+b.x*l+"px; top:"+b.y*l+"px;transform:rotate("+(t.rotateAngle+t.parentTransform)+"deg);pointer-events:"+(this.pdfViewer.designerMode?"none":"all")+";visibility:"+(t.visible?"visible":"hidden")+";opacity:"+t.style.opacity+";"):d.setAttribute("style","height:"+t.actualSize.height*l+"px; width:"+t.actualSize.width*l+"px;left:"+b.x*l+"px; top:"+b.y*l+"px;position:absolute;transform:rotate("+(t.rotateAngle+t.parentTransform)+"deg);pointer-events:"+(this.pdfViewer.designerMode?"none":"all")+";visibility:"+(t.visible?"visible":"hidden")+";opacity:"+t.style.opacity+";"),this.updateFormDesignerFieldInSessionStorage(b,t,e,i),("SignatureField"===e||"InitialField"===e)&&i.value){var S=s+"_content",C=this.pdfViewer.nameTable[S].value,x=C.indexOf("base64")>-1?"Image":C.startsWith("M")&&C.split(",")[1].split(" ")[1].startsWith("L")?"Path":"Type";this.pdfViewer.formFieldsModule.drawSignature(x,C,t.template,i.fontFamily)}var M={name:i.name,id:i.id,value:i.value,fontFamily:i.fontFamily,fontSize:i.fontSize,fontStyle:i.fontStyle,color:i.color,backgroundColor:i.backgroundColor,alignment:i.alignment,isReadonly:i.isReadonly,visibility:i.visibility,maxLength:i.maxLength,isRequired:i.isRequired,isPrint:i.isPrint,rotation:i.rotateAngle,tooltip:i.tooltip,borderColor:i.borderColor,thickness:i.thickness,options:i.options,pageNumber:i.pageNumber,isChecked:i.isChecked,isSelected:i.isSelected};this.pdfViewer.fireFormFieldAddEvent("formFieldAdd",M,this.pdfViewerBase.activeElements.activePageID)}else{b=Wh(t).topLeft;this.updateFormDesignerFieldInSessionStorage(b,t,e,i)}return t.template},e.prototype.updateFormDesignerFieldInSessionStorage=function(e,t,i,n){var o=this.pdfViewerBase.getZoomFactor(),s={id:t.id,lineBound:{X:e.x*o,Y:e.y*o,Width:t.actualSize.width*o,Height:t.actualSize.height*o},name:n.name,zoomValue:o,pageNumber:n.pageNumber,value:n.value,formFieldAnnotationType:i,isMultiline:n.isMultiline,signatureType:n.signatureType,signatureBound:n.signatureBound,fontFamily:n.fontFamily,fontSize:n.fontSize,fontStyle:n.fontStyle,fontColor:this.getRgbCode(n.color),borderColor:this.getRgbCode(n.borderColor),thickness:n.thickness,backgroundColor:this.getRgbCode(n.backgroundColor),textAlign:n.alignment,isChecked:n.isChecked,isSelected:n.isSelected,isReadonly:n.isReadonly,font:{isBold:n.font.isBold,isItalic:n.font.isItalic,isStrikeout:n.font.isStrikeout,isUnderline:n.font.isUnderline},selectedIndex:n.selectedIndex,radiobuttonItem:null,option:n.options?n.options:[],visibility:n.visibility,maxLength:n.maxLength,isRequired:n.isRequired,isPrint:n.isPrint,rotation:n.rotateAngle,tooltip:n.tooltip,insertSpaces:n.insertSpaces};if("RadioButton"===s.formFieldAnnotationType&&(s.radiobuttonItem=[],s.radiobuttonItem.push({id:t.id,lineBound:{X:e.x*o,Y:e.y*o,Width:t.actualSize.width*o,Height:t.actualSize.height*o},name:n.name,zoomValue:o,pageNumber:n.pageNumber,value:n.value,formFieldAnnotationType:i,fontFamily:n.fontFamily,fontSize:n.fontSize,fontStyle:n.fontStyle,fontColor:this.getRgbCode(n.color),borderColor:this.getRgbCode(n.borderColor),thickness:n.thickness,backgroundColor:this.getRgbCode(n.backgroundColor),textAlign:n.alignment,isChecked:n.isChecked,isSelected:n.isSelected,isReadonly:n.isReadonly,visibility:n.visibility,maxLength:n.maxLength,isRequired:n.isRequired,isPrint:n.isPrint,rotation:0,tooltip:n.tooltip})),!this.getRadioButtonItem(s,n)){for(var a=0;a<this.pdfViewerBase.formFieldCollection.length;a++){this.pdfViewerBase.formFieldCollection[a].Key===s.id&&(this.pdfViewerBase.formFieldCollection.splice(a,1),this.pdfViewerBase.formFieldCollection.push({Key:t.id,FormField:s}),this.isFormFieldExistingInCollection=!0)}this.isFormFieldExistingInCollection||this.pdfViewerBase.formFieldCollection.push({Key:t.id,FormField:s}),this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner"),this.isFormFieldExistingInCollection=!1,this.pdfViewerBase.formFieldCollection.length>0?this.pdfViewerBase.enableFormFieldButton(!0):this.pdfViewerBase.enableFormFieldButton(!1)}},e.prototype.getRadioButtonItem=function(e,t){var i=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner");if(i){for(var n=JSON.parse(i),o=!1,s=0;s<n.length;s++){var a=n[s],r=void 0;if("RadioButton"===e.formFieldAnnotationType&&e.radiobuttonItem&&a.FormField.radiobuttonItem)for(var l=0;l<a.FormField.radiobuttonItem.length;l++){if(a.FormField.radiobuttonItem[l].id===e.id){r={lineBound:e.lineBound,id:e.id,name:e.name,zoomValue:e.zoomValue,pageNumber:e.pageNumber,value:e.value,formFieldAnnotationType:e.formFieldAnnotationType,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontColor:this.getRgbCode(t.color),borderColor:this.getRgbCode(t.borderColor),thickness:t.thickness,backgroundColor:this.getRgbCode(t.backgroundColor),textAlign:e.textAlign,isChecked:e.isChecked,isSelected:e.isSelected,isReadonly:e.isReadonly,visibility:e.visibility,maxLength:e.maxLength,isRequired:e.isRequired,isPrint:e.isPrint,rotation:0,tooltip:e.tooltip},a.FormField.radiobuttonItem.splice(l,1),a.FormField.radiobuttonItem.push(r),m(this.pdfViewerBase.formFieldCollection[s])||this.pdfViewerBase.formFieldCollection[s].FormField.name===a.FormField.name&&(this.pdfViewerBase.formFieldCollection[s].FormField.radiobuttonItem=a.FormField.radiobuttonItem,o=!0);break}if(e.formFieldAnnotationType===a.FormField.formFieldAnnotationType&&e.name===a.FormField.name){r={lineBound:e.lineBound,id:e.id,name:e.name,zoomValue:e.zoomValue,pageNumber:e.pageNumber,value:e.value,formFieldAnnotationType:e.formFieldAnnotationType,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontColor:this.getRgbCode(t.color),borderColor:this.getRgbCode(t.borderColor),thickness:t.thickness,backgroundColor:this.getRgbCode(t.backgroundColor),textAlign:e.textAlign,isChecked:e.isChecked,isSelected:e.isSelected,isReadonly:e.isReadonly,visibility:e.visibility,maxLength:e.maxLength,isRequired:e.isRequired,isPrint:e.isPrint,rotation:0,tooltip:e.tooltip};for(var d=!1,h=0;h<a.FormField.radiobuttonItem.length;h++)if(a.FormField.radiobuttonItem[h].id===r.id){a.FormField.radiobuttonItem[h]=r,d=!0;break}if(d||a.FormField.radiobuttonItem.push(r),!m(this.pdfViewerBase.formFieldCollection[s])){this.pdfViewerBase.formFieldCollection[s].FormField.radiobuttonItem=a.FormField.radiobuttonItem,o=!0;for(var p=0;p<this.pdfViewerBase.formFieldCollection.length;p++){this.pdfViewerBase.formFieldCollection[p].Key===r.id&&this.pdfViewerBase.formFieldCollection.splice(p,1)}}}}}o&&this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")}return o},e.prototype.getRgbCode=function(e){if(!e.match(/#([a-z0-9]+)/gi)&&!e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)){var t=this.nameToHash(e);""!=t&&(e=t)}var i=e.split(",");m(i[1])&&(i=(e=this.getValue(e,"rgba")).split(","));var n=parseInt(i[0].split("(")[1]),o=parseInt(i[1]),s=parseInt(i[2]),a=100*parseFloat(i[3]);return isNaN(a)&&(a=0),{r:n,g:o,b:s,a:a}},e.prototype.nameToHash=function(e){var t={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",yellow:"#ffff00",yellowgreen:"#9acd32",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkred:"#8b0000",darksalmon:"#e9967a",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",indigo:"#4b0082",ivory:"#fffff0",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",pink:"#ffc0cb",plum:"#dda0dd",steelblue:"#4682b4",violet:"#ee82ee",powderblue:"#b0e0e6",purple:"#800080",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0"};return"undefined"!==typeof t[e.toLowerCase()]?t[e.toLowerCase()]:""},e.prototype.getValue=function(e,t){if(t=t?t.toLowerCase():"hex","r"===e[0]){var i=this.convertRgbToNumberArray(e);if("hex"===t||"hexa"===t){var n=this.rgbToHex(i);return"hex"===t?n.slice(0,7):n}return"hsv"===t?this.convertToHsvString(this.rgbToHsv.apply(this,i.slice(0,3))):"hsva"===t?this.convertToHsvString(this.rgbToHsv.apply(this,i)):"null"}if("h"===e[0]){i=this.hsvToRgb.apply(this,this.convertRgbToNumberArray(e));if("rgba"===t)return this.convertToRgbString(i);if("hex"===t||"hexa"===t){n=this.rgbToHex(i);return"hex"===t?n.slice(0,7):n}return"rgb"===t?this.convertToRgbString(i.slice(0,3)):"null"}e=this.roundValue(e);var o=this.hexToRgb(e);return"rgb"!==t&&"hsv"!==t||(o=o.slice(0,3)),"rgba"===t||"rgb"===t?this.convertToRgbString(o):"hsva"===t||"hsv"===t?this.convertToHsvString(this.rgbToHsv.apply(this,o)):"hex"===t?e.slice(0,7):"a"===t?o[3].toString():"null"},e.prototype.convertRgbToNumberArray=function(e){return e.slice(e.indexOf("(")+1,e.indexOf(")")).split(",").map((function(e,t){return 3!==t?parseInt(e,10):parseFloat(e)}))},e.prototype.convertToRgbString=function(e){return e.length?4===e.length?"rgba("+e.join()+")":"rgb("+e.join()+")":""},e.prototype.convertToHsvString=function(e){return 4===e.length?"hsva("+e.join()+")":"hsv("+e.join()+")"},e.prototype.roundValue=function(e){if(!e)return"";"#"!==e[0]&&(e="#"+e);var t=e.length;if(4===t&&(e+="f",t=5),5===t){for(var i="",n=1,o=e.length;n<o;n++)i+=e.charAt(n)+e.charAt(n);e="#"+i,t=9}return 7===t&&(e+="ff"),e},e.prototype.hexToRgb=function(e){if(!e)return[];9!==(e=e.trim()).length&&(e=this.roundValue(e));var t=Number((parseInt(e.slice(-2),16)/255).toFixed(2));e=e.slice(1,7);var i=parseInt(e,16),n=[];return n.push(i>>16&255),n.push(i>>8&255),n.push(255&i),n.push(t),n},e.prototype.rgbToHsv=function(e,t,i,n){e/=255,t/=255,i/=255;var o,s,a=Math.max(e,t,i),r=Math.min(e,t,i),l=a,d=a-r;if(s=0===a?0:d/a,a===r)o=0;else{switch(a){case e:o=(t-i)/d+(t<i?6:0);break;case t:o=(i-e)/d+2;break;case i:o=(e-t)/d+4}o/=6}var h=[Math.round(360*o),Math.round(1e3*s)/10,Math.round(1e3*l)/10];return m(n)||h.push(n),h},e.prototype.hsvToRgb=function(e,t,i,n){var o,s,a,r,l,d,h,p;if(i/=100,0===(t/=100))return o=s=a=i,[Math.round(255*o),Math.round(255*s),Math.round(255*a),n];switch(d=i*(1-t),h=i*(1-t*(l=(e/=60)-(r=Math.floor(e)))),p=i*(1-t*(1-l)),r){case 0:o=i,s=p,a=d;break;case 1:o=h,s=i,a=d;break;case 2:o=d,s=i,a=p;break;case 3:o=d,s=h,a=i;break;case 4:o=p,s=d,a=i;break;default:o=i,s=d,a=h}var c=[Math.round(255*o),Math.round(255*s),Math.round(255*a)];return m(n)||c.push(n),c},e.prototype.rgbToHex=function(e){return e.length?"#"+this.hex(e[0])+this.hex(e[1])+this.hex(e[2])+(m(e[3])?"":0!==e[3]?(Math.round(255*e[3])+65536).toString(16).substr(-2):"00"):""},e.prototype.updateCanvas=function(e,t){if(null!==t&&void 0!==t);else{t=this.pdfViewerBase.getElement("_annotationCanvas_"+e);var i=this.pdfViewerBase.getZoomFactor(),n=this.pdfViewerBase.getZoomRatio(i);if(t){var o=this.pdfViewerBase.pageSize[e].width,s=this.pdfViewerBase.pageSize[e].height;t.width=o*n,t.height=s*n,t.style.width=o*i+"px",t.style.height=s*i+"px"}}this.pdfViewer.drawing.refreshCanvasDiagramLayer(t,e)},e.prototype.rerenderFormFields=function(e){var t=this.pdfViewerBase.getZoomFactor(),i=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner");if(i){var n=JSON.parse(i),o=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+e),s=document.getElementById(this.pdfViewer.element.id+"_pageCanvas_"+e);if(null!==n&&null!==s&&null!==o)for(var a=0;a<n.length;a++){var r=n[a].FormField;if(r.pageNumber===e+1)if(!document.getElementById("form_field_"+r.id+"_html_element")){var l=this.pdfViewer.nameTable[n[a].Key.split("_")[0]],d=l.wrapper.children[0];if(d){if("RadioButton"===r.formFieldAnnotationType)for(var h=0;h<r.radiobuttonItem.length;h++)d=(l=this.pdfViewer.nameTable[r.radiobuttonItem[h].id.split("_")[0]]).wrapper.children[0],r.radiobuttonItem[h]=this.renderFormFieldsInZooming(d,r.radiobuttonItem[h],l,t),this.pdfViewerBase.formFieldCollection[a].FormField.radiobuttonItem[h].lineBound=r.radiobuttonItem[h].lineBound,this.pdfViewerBase.formFieldCollection[a].FormField.radiobuttonItem[h].zoomValue=t;else{var p=this.renderFormFieldsInZooming(d,r,l,t);r.lineBound=p.lineBound,r.signatureBound&&(r.signatureBound=p.signatureBound,this.pdfViewerBase.formFieldCollection[a].FormField.signatureBound=r.signatureBound,this.pdfViewer.nameTable[d.id.split("_")[0]+"_content"].signatureBound=r.signatureBound),this.pdfViewerBase.formFieldCollection[a].FormField.lineBound=r.lineBound,this.pdfViewerBase.formFieldCollection[a].FormField.zoomValue=t}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")}}if(this.pdfViewerBase.isFocusField&&this.pdfViewerBase.focusField){var c=document.getElementById(this.pdfViewerBase.focusField.id);c&&("SignatureField"!==this.pdfViewerBase.focusField.type&&"InitialField"!==this.pdfViewerBase.focusField.type||!this.pdfViewer.formDesignerModule?c.focus():c.parentElement.focus(),this.pdfViewerBase.isFocusField=!1,this.pdfViewerBase.focusField=[])}}}},e.prototype.renderFormFieldsInZooming=function(e,t,i,n){if(e){var o=void 0,s=void 0,a={id:"form_field_"+e.id+"_html_element",class:"foreign-object"};s=this.createHtmlElement("div",a);var r={id:e.id+"_html_element",class:"foreign-object"};o=this.createHtmlElement("div",r),"SignatureField"===t.formFieldAnnotationType||"InitialField"===t.formFieldAnnotationType?(this.disableSignatureClickEvent=!0,i.value=t.value,i.signatureType=t.signatureType,i.signatureBound=t.signatureBound,e.template=o.appendChild(this.createSignatureDialog(this.pdfViewer,i)),this.disableSignatureClickEvent=!1):"DropdownList"===t.formFieldAnnotationType?e.template=o.appendChild(this.createDropDownList(e,i)):"ListBox"===t.formFieldAnnotationType?e.template=o.appendChild(this.createListBox(e,i)):e.template=o.appendChild(this.createInputElement(t.formFieldAnnotationType,i));var l=document.createElement("div");l.id=i.id+"_designer_name",l.style.fontSize=i.fontSize?i.fontSize*n+"px":10*n+"px",l.className="e-pv-show-designer-name",this.pdfViewer.designerMode?(l.innerHTML=i.name,l.style.position="absolute"):(l.innerHTML="",l.style.position="initial"),o.appendChild(l),s.appendChild(o);var d=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+(t.pageNumber-1));if(d.appendChild(s),"RadioButton"===i.formFieldAnnotationType&&document.getElementsByClassName("e-pv-radiobtn-span").length>0)this.getCheckboxRadioButtonBounds(i),document.getElementsByClassName("e-pv-radiobtn-span");var h=Wh(i.wrapper.children[0]).topLeft;if("Checkbox"===t.formFieldAnnotationType&&ge.isDevice){var p=void 0,c=e.actualSize.height+this.increasedSize,u=e.actualSize.width+this.increasedSize;(p=we("div",{id:e.id+"_outer_div",className:"e-pv-checkbox-outer-div"})).setAttribute("style","height:"+c*n+"px; width:"+u*n+"px;left:"+h.x*n+"px; top:"+h.y*n+"px;position:absolute; opacity: 1;"),p.appendChild(s),p.addEventListener("click",this.setCheckBoxState.bind(this)),d.appendChild(p),o.setAttribute("style","height:"+e.actualSize.height*n+"px; width:"+e.actualSize.width*n+"px;left:"+h.x*n+"px; top:"+h.y*n+"px;transform:rotate("+(e.rotateAngle+e.parentTransform)+"deg);pointer-events:"+(this.pdfViewer.designerMode?"none":"all")+";visibility:"+(e.visible?"visible":"hidden")+";opacity:"+e.style.opacity+";")}else o.setAttribute("style","height:"+e.actualSize.height*n+"px; width:"+e.actualSize.width*n+"px;left:"+h.x*n+"px; top:"+h.y*n+"px;position:absolute;transform:rotate("+(e.rotateAngle+e.parentTransform)+"deg);pointer-events:"+(this.pdfViewer.designerMode?"none":"all")+";visibility:"+(e.visible?"visible":"hidden")+";opacity:"+e.style.opacity+";");if(t.lineBound={X:h.x*n,Y:h.y*n,Width:e.actualSize.width*n,Height:e.actualSize.height*n},t.signatureBound&&i.wrapper.children[1]){var f=i.wrapper.children[1].bounds;t.signatureBound.x=f.x*n,t.signatureBound.y=f.y*n,t.signatureBound.width=f.width*n,t.signatureBound.height=f.height*n}}return t},e.prototype.updateFormFieldInitialSize=function(e,t){var i=this.pdfViewerBase.getZoomFactor();switch(t){case"Textbox":case"PasswordField":case"DropdownList":e.width=200*i,e.height=24*i;break;case"SignatureField":case"InitialField":e.width=200*i,e.height=63*i;break;case"Checkbox":case"RadioButton":e.width=20*i,e.height=20*i;break;case"ListBox":e.width=198*i,e.height=66*i}return{width:e.width,height:e.height}},e.prototype.updateHTMLElement=function(e){var t=e.wrapper.children[0],i=this.pdfViewerBase.getZoomFactor();if(t){var n=document.getElementById(t.id+"_html_element");if(!m(n)){var o=Wh(e.wrapper.children[0]).topLeft;n.setAttribute("style","height:"+t.actualSize.height*i+"px; width:"+t.actualSize.width*i+"px;left:"+o.x*i+"px; top:"+o.y*i+"px;position:absolute;transform:rotate("+(t.rotateAngle+t.parentTransform)+"deg);pointer-events:"+(this.pdfViewer.designerMode?"none":"all")+";visibility:"+(t.visible?"visible":"hidden")+";opacity:"+t.style.opacity+";");var s=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner");if("RadioButton"===e.formFieldAnnotationType){var a=n.firstElementChild.firstElementChild,r=n.firstElementChild.firstElementChild.lastElementChild;t.actualSize.width>t.actualSize.height?(n.firstElementChild.style.display="inherit",a.style.width=a.style.height=t.actualSize.height*i+"px",r.style.width=r.style.height=t.actualSize.height-10+"px"):(n.firstElementChild.style.display="flex",a.style.width=a.style.height=t.actualSize.width*i+"px",r.style.width=r.style.height=t.actualSize.width-10+"px")}if("Checkbox"===e.formFieldAnnotationType){a=n.firstElementChild.firstElementChild,r=n.firstElementChild.firstElementChild.lastElementChild.firstElementChild;if(t.actualSize.width>t.actualSize.height?(n.firstElementChild.style.display="inherit",a.style.width=a.style.height=t.actualSize.height*i+"px",r.style.width=t.actualSize.height/5*i+"px",r.style.height=t.actualSize.height/2.5*i+"px",r.style.left=t.actualSize.height/2.5*i+"px",r.style.top=t.actualSize.height/5*i+"px"):(n.firstElementChild.style.display="flex",a.style.width=a.style.height=t.actualSize.width*i+"px",r.style.width=t.actualSize.width/5*i+"px",r.style.height=t.actualSize.width/2.5*i+"px",r.style.left=t.actualSize.width/2.5*i+"px",r.style.top=t.actualSize.width/5*i+"px"),-1!==r.className.indexOf("e-pv-cb-checked")){var l=parseInt(a.style.width,10);r.style.borderWidth=l>20?"3px":l<=15?"1px":"2px"}}if("SignatureField"===e.formFieldAnnotationType||"InitialField"===e.formFieldAnnotationType){var d=n.firstElementChild.firstElementChild,h=d.nextElementSibling,p=this.getBounds(h),c={height:t.actualSize.height,width:t.actualSize.width,signatureIndicatorSettings:{text:h.textContent,width:p.width,height:p.height},initialIndicatorSettings:{text:h.textContent,width:p.width,height:p.height}};this.updateSignatureandInitialIndicator(e,c,d)}for(var u=JSON.parse(s),f=0;f<u.length;f++)if("RadioButton"===u[f].FormField.formFieldAnnotationType){for(var g=0;g<u[f].FormField.radiobuttonItem.length;g++)if(t.id===u[f].FormField.radiobuttonItem[g].id){this.pdfViewerBase.formFieldCollection[f].FormField.radiobuttonItem[g].lineBound={X:o.x*i,Y:o.y*i,Width:t.actualSize.width*i,Height:t.actualSize.height*i},this.pdfViewerBase.formFieldCollection[f].FormField.radiobuttonItem[g].zoomValue=i;break}}else if(u[f].Key===t.id){if(u[f].FormField.lineBound={X:o.x*i,Y:o.y*i,Width:t.actualSize.width*i,Height:t.actualSize.height*i},u[f].FormField.signatureBound){var y=o.x*i+t.actualSize.width*i/2;y-=u[f].FormField.signatureBound.width/2;var v=o.y*i+t.actualSize.height*i/2;v-=u[f].FormField.signatureBound.height/2,u[f].FormField.signatureBound.x=y,u[f].FormField.signatureBound.y=v,this.pdfViewerBase.formFieldCollection[f].FormField.signatureBound=u[f].FormField.signatureBound,this.pdfViewer.nameTable[t.id.split("_")[0]+"_content"].signatureBound=u[f].FormField.signatureBound}this.pdfViewerBase.formFieldCollection[f].FormField.lineBound=u[f].FormField.lineBound}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")}}},e.prototype.getCheckboxRadioButtonBounds=function(e,t,i){var n=i?this.defaultZoomValue:this.pdfViewerBase.getZoomFactor(),o=0,s=0,a="";return t?t.width>t.height?(o=s=t.height*n,a="inherit"):(o=s=t.width*n,a="flex"):e&&(e.bounds.width>e.bounds.height?(o=s=e.bounds.height*n,a="inherit"):(o=s=e.bounds.width*n,a="flex")),{width:o,height:s,display:a}},e.prototype.updateSessionFormFieldProperties=function(e){for(var t=this.pdfViewerBase.getZoomFactor(),i=e.wrapper.children[0],n=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),o=JSON.parse(n),s=0;s<o.length;s++)if("RadioButton"===o[s].FormField.formFieldAnnotationType){for(var a=0;a<o[s].FormField.radiobuttonItem.length;a++)if(i.id===o[s].FormField.radiobuttonItem[a].id){var r={id:i.id,lineBound:{X:i.bounds.x*t,Y:i.bounds.y*t,Width:i.bounds.width*t,Height:i.bounds.height*t},name:e.name,zoomValue:t,pageNumber:e.pageNumber,value:e.value,formFieldAnnotationType:e.formFieldAnnotationType,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontColor:this.getRgbCode(e.color),backgroundColor:this.getRgbCode(e.backgroundColor),borderColor:this.getRgbCode(e.borderColor),thickness:e.thickness,textAlign:e.alignment,isChecked:e.isChecked,isSelected:e.isSelected,isReadonly:e.isReadonly,visibility:e.visibility,maxLength:e.maxLength,isRequired:e.isRequired,isPrint:e.isPrint,rotation:0,tooltip:e.tooltip};o[s].FormField.radiobuttonItem[a]=r,this.pdfViewerBase.formFieldCollection[s]&&this.pdfViewerBase.formFieldCollection[s].FormField&&this.pdfViewerBase.formFieldCollection[s].FormField.radiobuttonItem[a]&&(this.pdfViewerBase.formFieldCollection[s].FormField.radiobuttonItem[a]=r);break}}else if(o[s].Key===i.id){var l={id:i.id,lineBound:{X:i.bounds.x*t,Y:i.bounds.y*t,Width:i.bounds.width*t,Height:i.bounds.height*t},name:e.name,zoomValue:t,pageNumber:e.pageNumber,value:e.value,formFieldAnnotationType:e.formFieldAnnotationType,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontColor:this.getRgbCode(e.color),backgroundColor:this.getRgbCode(e.backgroundColor),borderColor:this.getRgbCode(e.borderColor),thickness:e.thickness,textAlign:e.alignment,isChecked:e.isChecked,isSelected:e.isSelected,isReadonly:e.isReadonly,font:{isBold:e.font.isBold,isItalic:e.font.isItalic,isStrikeout:e.font.isStrikeout,isUnderline:e.font.isUnderline},selectedIndex:[],radiobuttonItem:null,option:e.options?e.options:[],visibility:e.visibility,maxLength:e.maxLength,isRequired:e.isRequired,isPrint:e.isPrint,rotation:0,tooltip:e.tooltip};if("SignatureField"===o[s].FormField.formFieldAnnotationType||"InitialField"===o[s].FormField.formFieldAnnotationType){var d=e,h={id:i.id,lineBound:{X:i.bounds.x*t,Y:i.bounds.y*t,Width:i.bounds.width*t,Height:i.bounds.height*t},name:e.name,zoomValue:t,pageNumber:e.pageNumber,value:e.value,formFieldAnnotationType:e.formFieldAnnotationType,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontColor:this.getRgbCode(e.color),backgroundColor:this.getRgbCode(e.backgroundColor),borderColor:this.getRgbCode(e.borderColor),thickness:e.thickness,textAlign:e.alignment,isChecked:e.isChecked,isSelected:e.isSelected,isReadonly:e.isReadonly,font:{isBold:e.font.isBold,isItalic:e.font.isItalic,isStrikeout:e.font.isStrikeout,isUnderline:e.font.isUnderline},selectedIndex:[],radiobuttonItem:null,option:e.options?e.options:[],visibility:e.visibility,maxLength:e.maxLength,isRequired:e.isRequired,isPrint:e.isPrint,rotation:0,tooltip:e.tooltip,signatureType:e.signatureType,signatureBound:d.signatureBound};o[s].FormField=h,this.pdfViewerBase.formFieldCollection[s].FormField=h}else o[s].FormField=l,this.pdfViewerBase.formFieldCollection[s].FormField=l;break}this.pdfViewerBase.formFieldCollection.length>0?this.pdfViewerBase.enableFormFieldButton(!0):this.pdfViewerBase.enableFormFieldButton(!1),this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")},e.prototype.createSignatureDialog=function(e,t,i,n){this.isInitialField=!m(t.isInitialField)&&t.isInitialField,this.pdfViewerBase.isInitialField=this.isInitialField,this.pdfViewerBase.isInitialField=t.isInitialField;var o=we("div");o.className="foreign-object",o.style.position="absolute",o.style.width="100%",o.style.height="100%",o.addEventListener("focus",this.focusFormFields.bind(this)),o.addEventListener("blur",this.blurFormFields.bind(this));var s=we("div");s.style.width="100%",s.style.height="100%",s.style.position="absolute",s.style.backgroundColor="transparent",m(t.thickness)||(s.className="e-pdfviewer-signatureformfields-signature",s.style.border=t.thickness+"px solid #303030"),m(t.value)||""===t.value?(s.className="e-pdfviewer-signatureformfields",s.style.pointerEvents=""):(s.className="e-pdfviewer-signatureformfields-signature",s.style.pointerEvents="none"),s.id=t.id,s.disabled=t.isReadonly,o.appendChild(s);var a,r=this.pdfViewer.signatureFieldSettings,l=this.pdfViewer.initialFieldSettings;r.signatureIndicatorSettings||(r.signatureIndicatorSettings={opacity:1,backgroundColor:"orange",width:19,height:10,fontSize:10,text:null,color:"black"}),r.signatureDialogSettings||(r.signatureDialogSettings={displayMode:Ks.Draw|Ks.Text|Ks.Upload,hideSaveSignature:!1}),a=t.isInitialField?t.signatureIndicatorSettings?t.signatureIndicatorSettings:l.initialIndicatorSettings:t.signatureIndicatorSettings?t.signatureIndicatorSettings:r.signatureIndicatorSettings;var d=19===this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.width?t.isInitialField?30:25:this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.width,h=a.width?a.width:t.signatureIndicatorSettings&&t.signatureIndicatorSettings.width?t.signatureIndicatorSettings.width:d,p=10===this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.height?13:this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.height,c=a.height?a.height:t.signatureIndicatorSettings&&t.signatureIndicatorSettings.height?t.signatureIndicatorSettings.height:p,u=a.backgroundColor?"orange"===a.backgroundColor?"#FFE48559":a.backgroundColor:t.signatureIndicatorSettings&&t.signatureIndicatorSettings.backgroundColor?t.signatureIndicatorSettings.backgroundColor:"#FFE48559",f=(t.isInitialField,t.bounds?t.bounds.width:i.width),g=t.bounds?t.bounds.height:i.height,y=c>g/2?g/2:c,v=h>f/2?f/2:h,w=10;w=t.signatureIndicatorSettings&&t.signatureIndicatorSettings.fontSize?t.signatureIndicatorSettings.fontSize>y/2?10:t.signatureIndicatorSettings.fontSize:this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.fontSize>y/2?10:this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.fontSize;var b=we("span");l.initialIndicatorSettings||(l.initialIndicatorSettings={opacity:1,backgroundColor:"orange",width:19,height:10,fontSize:10,text:null,color:"black"}),l.initialDialogSettings||(l.initialDialogSettings={displayMode:Ks.Draw|Ks.Text|Ks.Upload,hideSaveSignature:!1});var S=t.signatureIndicatorSettings?t.signatureIndicatorSettings.text:null;"InitialField"==t.formFieldAnnotationType?(b.id="initialIcon_"+t.pageIndex+"_"+this.setFormFieldIdIndex(),this.setIndicatorText(b,S,this.pdfViewer.initialFieldSettings.initialIndicatorSettings.text,"Initial")):(b.style.height="",b.style.width="",b.id="signIcon_"+t.pageIndex+"_"+this.setFormFieldIdIndex(),this.setIndicatorText(b,S,this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.text,"Sign")),b.style.overflow="hidden",b.style.whiteSpace="nowrap",b.style.padding="2px 3px 2px 1px",b.style.boxSizing="border-box";var C=this.pdfViewerBase.getZoomFactor();b.style.textAlign="left",b.style.fontSize=w*C+"px";var x=this.getBounds(b);b.style.backgroundColor=u,b.style.color=a.color,b.style.opacity=a.opacity,b.style.height=c,b.style.width=h,b.style.position="absolute";var M=this.setHeightWidth(f,v,x.width+w,C);b.style.width=M+"px";var I=this.setHeightWidth(g,y,x.height,C);return b.style.height=I+"px",n||o.appendChild(b),this.updateSignInitialFieldProperties(t,t.isInitialField,this.pdfViewer.isFormDesignerToolbarVisible,this.isSetFormFieldMode),m(t.tooltip)||""==t.tooltip||this.setToolTip(t.tooltip,o),this.updateSignatureFieldProperties(t,o,n),o},e.prototype.setIndicatorText=function(e,t,i,n){e.innerHTML=t||(i||n)},e.prototype.getBounds=function(e){var t=e.cloneNode(!0);t.style.height="",t.style.width="",t.id=t.id+"_clonedElement",document.body.appendChild(t);var i=document.getElementById(t.id).getBoundingClientRect();return document.body.removeChild(t),i},e.prototype.updateSignatureandInitialIndicator=function(e,t,i){if(null!==i){var n=i.getBoundingClientRect(),o=this.pdfViewerBase.getZoomFactor(),s=i.nextElementSibling,a=void 0,r=void 0;if("SignatureField"===e.formFieldAnnotationType&&(a=e.signatureIndicatorSettings,r=t.signatureIndicatorSettings),"InitialField"===e.formFieldAnnotationType&&(a=e.signatureIndicatorSettings?e.signatureIndicatorSettings:this.pdfViewer.initialFieldSettings.initialIndicatorSettings,r=t.initialIndicatorSettings),s.style.width="",s.style.height="",r&&a){void 0!==r.text&&(this.setIndicatorText(s,r.text,r.text,"Sign"),a.text=r.text),r.fontSize&&(s.style.fontSize=r.fontSize>e.height/2?10:r.fontSize*o+"px",a.fontSize=r.fontSize);var l=this.getBounds(s);if(r.color&&(s.style.color=r.color,a.color=this.nameToHash(r.color)),r.backgroundColor&&(s.style.backgroundColor=r.backgroundColor,a.backgroundColor=this.nameToHash(r.backgroundColor)),r.opacity&&(s.style.opacity=r.opacity,a.opacity=r.opacity),r.width||t.width||r.text){var d=this.setHeightWidth(n.width,r.width,l.width,o);s.style.width=d+"px",a.width=d}if(r.height||t.height||r.text){var h=this.setHeightWidth(n.height,r.height,l.height,o);s.style.height=h+"px",a.height=h}}return this.updateSignatureFieldProperties(e,i,e.isPrint),e.signatureIndicatorSettings&&a&&(e.signatureIndicatorSettings=a),e}},e.prototype.setHeightWidth=function(e,t,i,n){return e/2>t&&i<t?t*n:i<=e/2?i*n:e/2*n},e.prototype.createDropDownList=function(e,t,i){var n=we("div");n.className="foreign-object",n.style.position="absolute",n.style.width="100%",n.style.height="100%";var o=document.createElement("select");o.addEventListener("change",this.dropdownChange.bind(this)),o.addEventListener("focus",this.focusFormFields.bind(this)),o.addEventListener("blur",this.blurFormFields.bind(this)),o.id=t.id,o.name="editabledropdown"+this.pdfViewerBase.activeElements.activePageID+e.id,o.setAttribute("aria-label","editabledropdown"+this.pdfViewerBase.activeElements.activePageID+e.id),o.className="e-pv-formfield-dropdown",o.style.width="100%",o.style.height="100%",o.style.position="absolute",this.updateDropdownFieldSettingsProperties(t,this.pdfViewer.isFormDesignerToolbarVisible,this.isSetFormFieldMode);var s=t.options?t.options:[];this.updateDropdownListProperties(t,o,i);for(var a=0;a<s.length;a++){var r=document.createElement("option");r.className="e-pv-formfield-dropdown",r.value=s[a].itemValue,r.text=s[a].itemName,this.updateDropdownListProperties(t,r),o.appendChild(r)}return o.selectedIndex=m(t.selectedIndex)?0:t.selectedIndex,n.appendChild(o),m(t.tooltip)||""==t.tooltip||this.setToolTip(t.tooltip,n),n},e.prototype.createListBox=function(e,t,i){var n=we("div");n.className="foreign-object",n.style.position="absolute",n.style.width="100%",n.style.height="100%";var o=document.createElement("select");o.addEventListener("click",this.listBoxChange.bind(this)),o.addEventListener("focus",this.focusFormFields.bind(this)),o.addEventListener("blur",this.blurFormFields.bind(this)),o.id=t.id,o.name="editabledropdown"+this.pdfViewerBase.activeElements.activePageID+e.id,o.setAttribute("aria-label","editabledropdown"+this.pdfViewerBase.activeElements.activePageID+e.id),o.className="e-pv-formfield-listbox",o.style.width="100%",o.style.height="100%",o.style.position="absolute",o.multiple=!0,this.updatelistBoxFieldSettingsProperties(t,this.pdfViewer.isFormDesignerToolbarVisible,this.isSetFormFieldMode);var s=t.options?t.options:[];this.updateListBoxProperties(t,o,i);for(var a=0;a<s.length;a++){var r=document.createElement("option");if(r.className="e-pv-formfield-listbox",r.value=s[a].itemValue,r.text=s[a].itemName,!m(t.selectedIndex))for(var l=0;l<t.selectedIndex.length;l++)a===t.selectedIndex[l]&&(r.selected=!0);o.appendChild(r)}return n.appendChild(o),m(t.tooltip)||""==t.tooltip||this.setToolTip(t.tooltip,n),n},e.prototype.createInputElement=function(e,t,i,n){var o,s,a,r=this.pdfViewerBase.getZoomFactor(),l=we("div");l.className="foreign-object",l.style.position="absolute",l.style.width="100%",l.style.height="100%";var d=we("input"),h=we("textarea");if(d.id=t.id,d.setAttribute("aria-label",this.pdfViewer.element.id+"formfilldesigner"),d.style.position="absolute","Textbox"===e)t.isMultiline?(h=this.createTextAreaElement(d.id),this.updateTextFieldSettingProperties(t,this.pdfViewer.isFormDesignerToolbarVisible,this.isSetFormFieldMode),this.updateTextboxProperties(t,h,n)):(d=this.createTextboxElement(d.id),this.updateTextFieldSettingProperties(t,this.pdfViewer.isFormDesignerToolbarVisible,this.isSetFormFieldMode),this.updateTextboxProperties(t,d,n));else if("Checkbox"==e){var p=n?this.defaultZoomValue:this.pdfViewerBase.getZoomFactor();l.style.display="flex",l.style.alignItems="center";var c=this.getCheckboxRadioButtonBounds(t,i,n);if(l.style.display=c.display,(o=we("label",{className:"e-pv-checkbox-container"})).style.width=t.bounds?t.bounds.width*p+"px":c.width+"px",o.style.height=t.bounds?t.bounds.height*p+"px":c.height+"px",this.isDrawHelper?o.style.cursor="crosshair":o.style.cursor="pointer",s=we("div",{className:"e-pv-checkbox-div"}),ge.isDevice||(s.addEventListener("click",this.setCheckBoxState.bind(this)),s.addEventListener("focus",this.focusFormFields.bind(this)),s.addEventListener("blur",this.blurFormFields.bind(this))),s.id=t.id+"_input",(a=t.isChecked?we("span",{className:"e-pv-checkbox-span e-pv-cb-checked"}):we("span",{className:"e-pv-checkbox-span e-pv-cb-unchecked"})).id=t.id+"_input_span",o.id=t.id+"_input_label",a.style.width=c.width/5+"px",a.style.height=c.height/2.5+"px",a.style.left=c.width/2.5+"px",a.style.top=c.height/5+"px",-1!==a.className.indexOf("e-pv-cb-checked")){var u=parseInt(o.style.width,10);a.style.borderWidth=u>20?"3px":u<=15?"1px":"2px"}if(n&&(s.style.backgroundColor="rgb(218, 234, 247)",s.style.border="1px solid #303030",s.style.visibility="visible",s.style.height="100%",s.style.width="100%",s.style.position="absolute",-1!==a.className.indexOf("e-pv-cb-checked"))){a.style.border="solid #303030",a.style.position="absolute",a.style.borderLeft="transparent",a.style.borderTop="transparent",a.style.transform="rotate(45deg)";var f=parseInt(o.style.width,10);a.style.borderWidth=f>20?"3px":f<=15?"1px":"2px"}d.type="checkbox",d.style.margin="0px",d.style.width=c.width+"px",d.style.height=c.height+"px",n||this.updateCheckBoxFieldSettingsProperties(t,this.pdfViewer.isFormDesignerToolbarVisible,this.isSetFormFieldMode),this.updateCheckboxProperties(t,s),d.appendChild(o),o.appendChild(s),s.appendChild(a),n&&(d.style.outlineWidth=t.thickness+"px",d.style.outlineColor=t.borderColor,d.style.outlineStyle="solid",d.style.background=t.backgroundColor)}else if("PasswordField"==e)d.type="password",d.className="e-pv-formfield-input",d.style.width="100%",d.style.height="100%",d.style.borderStyle="solid",d.addEventListener("click",this.inputElementClick.bind(this)),d.addEventListener("focus",this.focusFormFields.bind(this)),d.addEventListener("blur",this.blurFormFields.bind(this)),d.addEventListener("change",this.getTextboxValue.bind(this)),this.updatePasswordFieldSettingProperties(t,this.pdfViewer.isFormDesignerToolbarVisible,this.isSetFormFieldMode),this.updatePasswordFieldProperties(t,d,n);else{l.style.display="flex",l.style.alignItems="center";c=this.getCheckboxRadioButtonBounds(t,i,n);l.style.display=c.display,(o=we("label",{className:"e-pv-radiobtn-container"})).style.width=c.width+"px",o.style.height=c.height+"px",o.style.display="table",o.style.verticalAlign="middle",o.style.borderWidth=t.thickness+"px",o.style.boxShadow=t.borderColor+" 0px 0px 0px "+t.thickness+"px",o.style.borderRadius="50%",o.style.visibility=t.visibility,this.isDrawHelper?o.style.cursor="crosshair":o.style.cursor="pointer",o.style.background=t.backgroundColor,(a=we("span",{className:"e-pv-radiobtn-span"})).id=t.id+"_input_span",a.style.width=Math.floor(c.width/2)+"px",a.style.height=Math.floor(c.height/2)+"px",r<1&&c.width<=20&&c.height<=20?a.style.margin=Math.round(parseInt(o.style.width)/3.5)+"px":a.style.margin=Math.round(parseInt(o.style.width)/4)+"px",o.addEventListener("click",this.setRadioButtonState.bind(this)),o.id=t.id+"_input_label",d.type="radio",n||(d.className="e-pv-radio-btn"),d.style.margin="0px",d.addEventListener("click",(function(e){e.stopPropagation()})),d.addEventListener("focus",this.focusFormFields.bind(this)),d.addEventListener("blur",this.blurFormFields.bind(this)),d.style.width=c.width+"px",d.style.height=c.height+"px",this.updateRadioButtonFieldSettingProperties(t,this.pdfViewer.isFormDesignerToolbarVisible,this.isSetFormFieldMode),this.updateRadioButtonProperties(t,d),o.appendChild(d),o.appendChild(a),t.isRequired&&(o.style.boxShadow="red 0px 0px 0px "+t.thickness+"px")}return"Checkbox"!==e&&"RadioButton"!==e||n?"Checkbox"===e&&n?l.appendChild(o):t.isMultiline?l.appendChild(h):l.appendChild(d):l.appendChild(o),m(t.tooltip)||""==t.tooltip||("RadioButton"===e?this.setToolTip(t.tooltip,o):this.setToolTip(t.tooltip,l)),this.isDrawHelper=!1,l},e.prototype.listBoxChange=function(e){for(var t=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),i=JSON.parse(t),n=0;n<i.length;n++)if(i[n].Key.split("_")[0]===e.currentTarget.id.split("_")[0]||this.pdfViewer.nameTable[e.currentTarget.id.split("_")[0]].name===i[n].FormField.name){if(i[n].Key.split("_")[0]!==e.currentTarget.id.split("_")[0])for(var o=document.getElementById(i[n].Key.split("_")[0]+"_content_html_element").firstElementChild.firstElementChild,s=0;s<e.currentTarget.options.length;s++)o.options[s].selected=e.currentTarget.options[s].selected;i[n].FormField.selectedIndex=[];for(var a=this.pdfViewerBase.formFieldCollection[n].FormField.selectedIndex,r=0;r<e.currentTarget.selectedOptions.length;r++){var l=e.currentTarget.selectedOptions[r].index,d=0;this.pdfViewerBase.formFieldCollection[n].FormField.selectedIndex&&0!==this.pdfViewerBase.formFieldCollection[n].FormField.selectedIndex.length&&(this.pdfViewerBase.formFieldCollection[n].FormField.selectedIndex[0]>=0&&(d=this.pdfViewerBase.formFieldCollection[n].FormField.selectedIndex.pop()),this.pdfViewerBase.formFieldCollection[n].FormField.selectedIndex.push(d));var h=i[n].FormField.option[d].itemValue;i[n].FormField.selectedIndex.push(l),this.pdfViewer.nameTable[i[n].Key.split("_")[0]].selectedIndex=i[n].FormField.selectedIndex,this.pdfViewerBase.formFieldCollection[n].FormField.selectedIndex=i[n].FormField.selectedIndex;var p=i[n].FormField.option[l].itemValue;this.pdfViewerBase.formFieldCollection[n].FormField.value=p,this.updateFormFieldCollections(this.pdfViewerBase.formFieldCollection[n].FormField),this.pdfViewer.fireFormFieldPropertiesChangeEvent("formFieldPropertiesChange",i[n].FormField,this.pdfViewerBase.formFieldCollection[n].FormField.pageNumber,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,h,p)}this.pdfViewer.annotation&&this.pdfViewer.annotation.addAction(this.pdfViewerBase.formFieldCollection[n].FormField.pageNumber,null,this.pdfViewerBase.formFieldCollection[n].FormField,"FormField Value Change","",a,this.pdfViewerBase.formFieldCollection[n].FormField.selectedIndex)}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner"),this.updateFormFieldSessions()},e.prototype.dropdownChange=function(e){for(var t=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),i=JSON.parse(t),n=0;n<i.length;n++)if(i[n].Key.split("_")[0]===e.target.id.split("_")[0]||this.pdfViewer.nameTable[e.target.id.split("_")[0]].name===i[n].FormField.name){this.pdfViewerBase.formFieldCollection[n].FormField.selectedIndex=[];var o=document.getElementById(e.currentTarget.id).selectedIndex,s=0;0!==i[n].FormField.selectedIndex.length&&(s=i[n].FormField.selectedIndex.pop(),i[n].FormField.selectedIndex.push(s));var a=i[n].FormField.option[s].itemValue;this.pdfViewerBase.formFieldCollection[n].FormField.selectedIndex.push(o),i[n].FormField.selectedIndex=this.pdfViewerBase.formFieldCollection[n].FormField.selectedIndex,this.pdfViewer.nameTable[i[n].Key.split("_")[0]].selectedIndex=this.pdfViewerBase.formFieldCollection[n].FormField.selectedIndex;var r=i[n].FormField.option[o].itemValue;if(this.pdfViewerBase.formFieldCollection[n].FormField.value=r,i[n].Key.split("_")[0]!==e.target.id.split("_")[0])document.getElementById(i[n].Key.split("_")[0]+"_content_html_element").firstElementChild.firstElementChild.selectedIndex=o;this.updateFormFieldCollections(this.pdfViewerBase.formFieldCollection[n].FormField),this.pdfViewer.fireFormFieldPropertiesChangeEvent("formFieldPropertiesChange",i[n].FormField,this.pdfViewerBase.formFieldCollection[n].FormField.pageNumber,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,a,r),this.pdfViewer.annotation&&this.pdfViewer.annotation.addAction(this.pdfViewerBase.formFieldCollection[n].FormField.pageNumber,null,this.pdfViewerBase.formFieldCollection[n].FormField,"FormField Value Change","",s,o)}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner"),this.updateFormFieldSessions()},e.prototype.setCheckBoxState=function(e){if(ge.isDevice?(""===e.target.className||"e-pv-checkbox-outer-div"===e.target.className)&&"e-pv-checkbox-outer-div"===e.currentTarget.className&&!this.pdfViewer.designerMode:!this.pdfViewer.designerMode){var t=!1,i=void 0;if(i=ge.isDevice?document.getElementById(e.target.id.split("_")[0]+"_input"):e.target,"undefined_input"!==e.target.id&&!this.pdfViewer.nameTable[e.target.id.split("_")[0]].isReadonly&&!this.pdfViewer.designerMode){i&&i.firstElementChild&&"e-pv-checkbox-span e-pv-cb-checked"===i.firstElementChild.className?(i.firstElementChild.classList.remove("e-pv-cb-checked"),i.firstElementChild.classList.add("e-pv-checkbox-span","e-pv-cb-unchecked"),t=!1):"e-pv-checkbox-span e-pv-cb-checked"===i.className?(i.classList.remove("e-pv-cb-checked"),i.classList.add("e-pv-checkbox-span","e-pv-cb-unchecked"),t=!1):(i.firstElementChild.classList.remove("e-pv-cb-unchecked"),i.firstElementChild.classList.add("e-pv-checkbox-span","e-pv-cb-checked"),t=!0);var n=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner");if(t&&-1!==i.firstElementChild.className.indexOf("e-pv-cb-checked")){var o=parseInt(e.target.parentElement.style.width,10);i.firstElementChild.style.borderWidth=o>20?"3px":o<=15?"1px":"2px"}for(var s=JSON.parse(n),a=0;a<s.length;a++)if(s[a].Key.split("_")[0]===e.target.id.split("_")[0]||this.pdfViewer.nameTable[e.target.id.split("_")[0]].name===s[a].FormField.name){this.pdfViewer.nameTable[s[a].Key.split("_")[0]].isChecked=t;var r=this.pdfViewerBase.formFieldCollection[a].FormField.isChecked;if(s[a].FormField.isChecked=t,this.pdfViewerBase.formFieldCollection[a].FormField.isChecked=s[a].FormField.isChecked,s[a].Key.split("_")[0]!==e.target.id.split("_")[0]){var l=document.getElementById(s[a].Key.split("_")[0]+"_input").firstElementChild;t?(l.classList.contains("e-pv-cb-unchecked")&&l.classList.remove("e-pv-cb-unchecked"),l.classList.add("e-pv-cb-checked")):(l.classList.contains("e-pv-cb-checked")&&l.classList.remove("e-pv-cb-checked"),l.classList.add("e-pv-cb-unchecked"))}this.updateFormFieldCollections(this.pdfViewerBase.formFieldCollection[a].FormField),this.pdfViewer.fireFormFieldPropertiesChangeEvent("formFieldPropertiesChange",s[a].FormField,this.pdfViewerBase.formFieldCollection[a].FormField.pageNumber,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,r,t),this.pdfViewer.annotation&&this.pdfViewer.annotation.addAction(this.pdfViewerBase.formFieldCollection[a].FormField.pageNumber,null,this.pdfViewerBase.formFieldCollection[a].FormField,"FormField Value Change","",r,t)}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner"),this.updateFormFieldSessions()}}},e.prototype.setCheckedValue=function(e,t){t?(e.firstElementChild.classList.remove("e-pv-cb-unchecked"),e.firstElementChild.classList.add("e-pv-checkbox-span","e-pv-cb-checked")):(e.firstElementChild.classList.remove("e-pv-cb-checked"),e.firstElementChild.classList.add("e-pv-checkbox-span","e-pv-cb-unchecked"))},e.prototype.setRadioButtonState=function(e){for(var t=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),i=JSON.parse(t),n=0;n<i.length;n++)if(null!=i[n].FormField.radiobuttonItem){for(var o=void 0,s=void 0,a=0;a<i[n].FormField.radiobuttonItem.length;a++){if(i[n].FormField.radiobuttonItem[a].id.split("_")[0]===e.currentTarget.id.split("_")[0])this.pdfViewer.nameTable[e.currentTarget.id.split("_")[0]].isSelected=!0,i[n].FormField.radiobuttonItem[a].isSelected=!0,this.pdfViewerBase.formFieldCollection[n].FormField.radiobuttonItem[a].isSelected||(o=this.pdfViewerBase.formFieldCollection[n].FormField.radiobuttonItem[a]),this.pdfViewerBase.formFieldCollection[n].FormField.radiobuttonItem[a].isSelected=!0,this.pdfViewer.fireFormFieldPropertiesChangeEvent("formFieldPropertiesChange",i[n].FormField,this.pdfViewerBase.formFieldCollection[n].FormField.pageNumber,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!0);else if(this.pdfViewer.nameTable[e.currentTarget.id.split("_")[0]].name===i[n].FormField.radiobuttonItem[a].name){this.pdfViewer.nameTable[i[n].FormField.radiobuttonItem[a].id.split("_")[0]].isSelected=!1;this.pdfViewerBase.formFieldCollection[n].FormField.radiobuttonItem[a].isSelected;i[n].FormField.radiobuttonItem[a].isSelected=!1,this.pdfViewerBase.formFieldCollection[n].FormField.radiobuttonItem[a].isSelected&&(s=this.pdfViewerBase.formFieldCollection[n].FormField.radiobuttonItem[a]),this.pdfViewerBase.formFieldCollection[n].FormField.radiobuttonItem[a].isSelected=i[n].FormField.radiobuttonItem[a].isSelected,this.pdfViewer.fireFormFieldPropertiesChangeEvent("formFieldPropertiesChange",i[n].FormField,this.pdfViewerBase.formFieldCollection[n].FormField.pageNumber,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!0,!1)}this.updateFormFieldCollections(this.pdfViewerBase.formFieldCollection[n].FormField.radiobuttonItem[a])}null==o&&null==s||!this.pdfViewer.annotation||this.pdfViewer.annotation.addAction(this.pdfViewerBase.formFieldCollection[n].FormField.pageNumber,null,this.pdfViewerBase.formFieldCollection[n].FormField,"FormField Value Change","",o,s)}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner"),this.updateFormFieldSessions()},e.prototype.getTextboxValue=function(e){for(var t=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),i=JSON.parse(t),n=0;n<i.length;n++)if(i[n].Key.split("_")[0]===e.target.id.split("_")[0]||this.pdfViewer.nameTable[e.target.id.split("_")[0]].name===i[n].FormField.name){var o=this.pdfViewerBase.formFieldCollection[n].FormField.value;if(i[n].FormField.value=e.target.value,this.pdfViewer.nameTable[i[n].Key.split("_")[0]].value=i[n].FormField.value,this.pdfViewerBase.formFieldCollection[n].FormField.value=i[n].FormField.value,i[n].Key.split("_")[0]!==e.target.id.split("_")[0]){var s=document.getElementById(i[n].Key.split("_")[0]+"_content_html_element");if(s&&s.firstElementChild&&s.firstElementChild.firstElementChild)s.firstElementChild.firstElementChild.value=i[n].FormField.value}this.updateFormFieldCollections(this.pdfViewerBase.formFieldCollection[n].FormField),this.pdfViewer.fireFormFieldPropertiesChangeEvent("formFieldPropertiesChange",this.pdfViewerBase.formFieldCollection[n].FormField,this.pdfViewerBase.formFieldCollection[n].FormField.pageNumber,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,o,e.target.value),this.pdfViewer.annotation&&this.pdfViewer.annotation.addAction(this.pdfViewerBase.formFieldCollection[n].FormField.pageNumber,null,this.pdfViewerBase.formFieldCollection[n].FormField,"FormField Value Change","",o,e.target.value)}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner"),this.updateFormFieldSessions()},e.prototype.inputElementClick=function(e){e.target.focus()},e.prototype.updateFormFieldSessions=function(){var e=this.pdfViewerBase.getItemFromSessionStorage("_formfields"),t=JSON.parse(e);t&&this.pdfViewer.formFieldCollection.length===t.length&&this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formfields")},e.prototype.focusFormFields=function(e){var t=e.target;if(t||"e-pv-checkbox-outer-div"===t.className){var i="transparent"===t.style.borderColor?"#000000":t.style.borderColor;t.style.boxShadow="0 0 5px "+i}if(t&&("e-pv-radiobtn-container"===t.className||"e-pv-radio-btn"===t.className||"e-pv-radiobtn-span"===t.className)&&"transparent"===t.style.borderColor){i="transparent"===t.style.borderColor?"#000000":t.style.borderColor;t.parentElement.style.boxShadow="0px 0px 5px "+i}!t||"e-pv-radiobtn-container"!==t.className&&"e-pv-radio-btn"!==t.className&&"e-pv-radiobtn-span"!==t.className||(t.parentElement.style.boxShadow=t.style.borderColor+"0px 0px 5px "+t.style.borderWidth)},e.prototype.blurFormFields=function(e){var t=e.target;if(t.style.boxShadow="","radio"===t.type&&"transparent"===t.style.borderColor){var i="transparent"===t.style.borderColor?"#000000":t.style.borderColor;t.parentElement.style.boxShadow="0px 0px 0px "+i}"radio"===t.type&&(t.parentElement.style.boxShadow=t.style.borderColor+"0px 0px 0px "+t.style.borderWidth)},e.prototype.setTextBoxFontStyle=function(e){return 1===e?{isBold:!0}:2===e?{isItalic:!0}:3===e?{isBold:!0,isItalic:!0}:4===e?{isUnderline:!0}:5===e?{isBold:!0,isUnderline:!0}:6===e?{isUnderline:!0,isItalic:!0}:7===e?{isBold:!0,isItalic:!0,isUnderline:!0}:8===e?{isStrikeout:!0}:9===e?{isBold:!0,isStrikeout:!0}:10===e?{isItalic:!0,isStrikeout:!0}:11===e?{isBold:!0,isItalic:!0,isStrikeout:!0}:12===e?{isUnderline:!0,isStrikeout:!0}:13===e?{isUnderline:!0,isStrikeout:!0,isBold:!0}:14===e?{isItalic:!0,isUnderline:!0,isStrikeout:!0}:15===e?{isBold:!0,isItalic:!0,isUnderline:!0,isStrikeout:!0}:{isBold:!1,isItalic:!1,isStrikeout:!1,isUnderline:!1}},e.prototype.addFormField=function(e,t,i,n){var o={thickness:1,bounds:{x:t.bounds.X,y:t.bounds.Y,width:t.bounds.Width,height:t.bounds.Height},fontFamily:m(t.fontFamily)?"Helvetica":t.fontFamily,fontSize:m(t.fontSize)?10:t.fontSize,color:m(t.color)?"black":t.color,backgroundColor:m(t.backgroundColor)?"#daeaf7ff":t.backgroundColor,alignment:m(t.alignment)?"left":t.alignment,isReadonly:!!t.isReadOnly&&t.isReadOnly,rotateAngle:t.rotateAngle,isTransparent:t.isTransparent};switch(o.fontStyle=m(t.fontStyle)?"None":t.fontStyle,o.visibility=m(t.visibility)?"visible":t.visibility,o.value=m(t.value)?"":t.value,o.isRequired=!!t.isRequired&&t.isRequired,o.isPrint=t.isPrint,o.pageNumber=m(t.pageNumber)?this.pdfViewerBase.currentPageNumber:t.pageNumber,o.pageIndex=o.pageNumber-1,o.font=t.font,o.id=n,i&&this.setFormFieldIndex(),e){case"Textbox":o.formFieldAnnotationType=e,o.isMultiline=t.isMultiline,o.name=m(t.name)?"Textbox"+this.formFieldIndex:t.name,o.insertSpaces=t.insertSpaces,o.maxLength=t.maxLength,o.thickness=m(t.thickness)?1:t.thickness,o.borderColor=m(t.borderColor)?"#303030":t.borderColor,t.font?o.font=t.font:this.pdfViewer.textFieldSettings.fontStyle&&(o.font=this.setTextBoxFontStyle(this.pdfViewer.textFieldSettings.fontStyle));break;case"Password":o.formFieldAnnotationType="PasswordField",o.name=m(t.name)?"Password"+this.formFieldIndex:t.name,o.maxLength=t.maxLength,o.thickness=m(t.thickness)?1:t.thickness,o.borderColor=m(t.borderColor)?"#303030":t.borderColor;break;case"DropDown":o.formFieldAnnotationType="DropdownList",o.name=m(t.name)?"Dropdown"+this.formFieldIndex:t.name,o.options=t.options?t.options:[];for(var s=0;s<this.pdfViewer.formFieldCollection.length;s++){if("DropdownList"===(a=this.pdfViewer.formFieldCollection[s]).formFieldAnnotationType&&a.name===o.name){o.options=a.options;break}}o.selectedIndex=m(t.selectedIndex)?[0]:t.selectedIndex,o.thickness=m(t.thickness)?1:t.thickness,o.borderColor=m(t.borderColor)?"#303030":t.borderColor;break;case"ListBox":o.formFieldAnnotationType=e,o.name=m(t.name)?"List Box"+this.formFieldIndex:t.name,o.options=t.options?t.options:[];for(s=0;s<this.pdfViewer.formFieldCollection.length;s++){var a;if((a=this.pdfViewer.formFieldCollection[s]).formFieldAnnotationType===e&&a.name===o.name){o.options=a.options;break}}o.selectedIndex=t.selectedIndex,o.thickness=m(t.thickness)?1:t.thickness,o.borderColor=m(t.borderColor)?"#303030":t.borderColor;break;case"CheckBox":o.formFieldAnnotationType="Checkbox",o.bounds={x:t.bounds.X,y:t.bounds.Y,width:t.bounds.Width,height:t.bounds.Height},o.backgroundColor=m(t.backgroundColor)?"#daeaf7ff":t.backgroundColor,o.isReadonly=!!t.isReadOnly&&t.isReadOnly,o.name=m(t.name)?"Check Box"+this.formFieldIndex:t.name,o.isChecked=!!t.isChecked&&t.isChecked,o.visibility=t.visibility?t.visibility:"visible",o.isRequired=!!t.isRequired&&t.isRequired,o.thickness=m(t.thickness)?1:t.thickness,o.borderColor=m(t.borderColor)?"#303030":t.borderColor;break;case"RadioButton":o.formFieldAnnotationType=e,o.bounds={x:t.bounds.X,y:t.bounds.Y,width:t.bounds.Width,height:t.bounds.Height},o.backgroundColor=m(t.backgroundColor)?"#daeaf7ff":t.backgroundColor,o.isReadonly=!!t.isReadOnly&&t.isReadOnly,o.name=m(t.name)?"Radio Button"+this.formFieldIndex:t.name,o.isSelected=!!t.isSelected&&t.isSelected,o.visibility=t.visibility?t.visibility:"visible",o.isRequired=!!t.isRequired&&t.isRequired,o.thickness=m(t.thickness)?1:t.thickness,o.borderColor=m(t.borderColor)?"#303030":t.borderColor;break;case"SignatureField":o.formFieldAnnotationType=e,o.bounds={x:t.bounds.X,y:t.bounds.Y,width:t.bounds.Width,height:t.bounds.Height},o.backgroundColor=m(t.backgroundColor)?"#daeaf7ff":t.backgroundColor,o.fontSize=m(t.fontSize)?10:t.fontSize,o.fontStyle=m(t.fontStyle)?"None":t.fontStyle,o.name=m(t.name)?"Signature"+this.formFieldIndex:t.name,o.isRequired=!!t.isRequired&&t.isRequired,o.isReadonly=!!t.isReadOnly&&t.isReadOnly,o.thickness=m(t.thickness)?1:t.thickness;var r=t.signatureIndicatorSettings?t.signatureIndicatorSettings:t.initialIndicatorSettings;o.signatureIndicatorSettings=r?{opacity:r.opacity?r.opacity:1,backgroundColor:r.backgroundColor?r.backgroundColor:"orange",width:r.width?r.width:19,height:r.height?r.height:10,fontSize:r.fontSize?r.fontSize:10,text:r.text?r.text:null,color:r.color?r.color:"black"}:null;break;case"InitialField":o.formFieldAnnotationType=e,o.bounds={x:t.bounds.X,y:t.bounds.Y,width:t.bounds.Width,height:t.bounds.Height},o.backgroundColor=m(t.backgroundColor)?"#daeaf7ff":t.backgroundColor,o.fontSize=m(t.fontSize)?10:t.fontSize,o.thickness=m(t.thickness)?1:t.thickness,o.fontStyle=m(t.fontStyle)?"None":t.fontStyle,o.name=m(t.name)?"Initial"+this.formFieldIndex:t.name,o.isRequired=!!t.isRequired&&t.isRequired,o.isReadonly=!!t.isReadOnly&&t.isReadOnly,o.isInitialField=!0;var l=t.initialIndicatorSettings?t.initialIndicatorSettings:t.signatureIndicatorSettings;o.signatureIndicatorSettings=l?{opacity:l.opacity?l.opacity:1,backgroundColor:l.backgroundColor?l.backgroundColor:"orange",width:l.width?l.width:19,height:l.height?l.height:10,fontSize:l.fontSize?l.fontSize:10,text:l.text?l.text:null,color:l.color?l.color:"black"}:null}o.tooltip=m(t.tooltip)?"":t.tooltip,this.setFormFieldIndex();var d=null;return i?this.addFieldCollection(o):(this.pdfViewerBase.disableTextSelectionMode(),d=this.drawFormField(o)),d},e.prototype.addFieldCollection=function(e){var t={id:Hh(),name:e.name,value:e.value,type:e.formFieldAnnotationType,isReadOnly:e.isReadonly,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,color:e.color,backgroundColor:e.backgroundColor,isMultiline:e.isMultiline,alignment:e.alignment,visibility:e.visibility,maxLength:e.maxLength,isRequired:e.isRequired,isPrint:e.isPrint,isSelected:e.isSelected,insertSpaces:e.insertSpaces,isChecked:e.isChecked,tooltip:e.tooltip,bounds:e.bounds,thickness:e.thickness,pageIndex:e.pageIndex,borderColor:e.borderColor,signatureIndicatorSettings:e.signatureIndicatorSettings};this.pdfViewer.formFieldCollections.push(t)},e.prototype.drawFormField=function(e){var t,i=this.pdfViewer.add(e),n=this.pdfViewer.formFieldCollections.findIndex((function(e){return e.id===i.id}));n>-1&&(t=this.pdfViewer.formFieldCollections[n],this.isFormFieldUpdated&&this.updateNodeBasedOnCollections(i,t));var o=this.pdfViewer.formFieldCollection.findIndex((function(e){return e.id===i.id}));o<0?this.pdfViewer.formFieldCollection.push(i):o>-1&&(this.pdfViewer.formFieldCollection[o]=i);var s={id:i.id,name:i.name,value:i.value,type:i.formFieldAnnotationType,isReadOnly:i.isReadonly,fontFamily:i.fontFamily,fontSize:i.fontSize,fontStyle:i.fontStyle,color:i.color,backgroundColor:i.backgroundColor,isMultiline:i.isMultiline,alignment:i.alignment,visibility:i.visibility,maxLength:i.maxLength,isRequired:i.isRequired,isPrint:i.isPrint,isSelected:i.isSelected,isChecked:i.isChecked,tooltip:i.tooltip,bounds:i.bounds,pageIndex:i.pageIndex,thickness:i.thickness,borderColor:i.borderColor,signatureIndicatorSettings:i.signatureIndicatorSettings,insertSpaces:i.insertSpaces};return n>-1?this.pdfViewer.formFieldCollections[n]=s:this.pdfViewer.formFieldCollections.push(s),this.drawHTMLContent(i.formFieldAnnotationType,i.wrapper.children[0],i,e.pageNumber-1,this.pdfViewer)},e.prototype.updateNodeBasedOnCollections=function(e,t){e.name=t.name,e.value=t.value,e.isReadonly=t.isReadOnly,e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle.toString(),e.color=t.color,e.backgroundColor=t.backgroundColor,e.alignment=t.alignment,e.visibility=t.visibility,e.maxLength=t.maxLength,e.isRequired=t.isRequired,e.isPrint=t.isPrint,e.isSelected=t.isSelected,e.isChecked=t.isChecked,e.tooltip=t.tooltip,e.thickness=t.thickness,e.borderColor=t.borderColor},e.prototype.setFormFieldMode=function(e,t){switch(e){case"Textbox":this.activateTextboxElement(e),this.isSetFormFieldMode=!0;break;case"Password":this.activatePasswordField("PasswordField"),this.isSetFormFieldMode=!0;break;case"CheckBox":this.activateCheckboxElement("Checkbox"),this.isSetFormFieldMode=!0;break;case"RadioButton":this.activateRadioButtonElement(e),this.isSetFormFieldMode=!0;break;case"DropDown":this.activateDropDownListElement("DropdownList",t),this.isSetFormFieldMode=!0;break;case"ListBox":this.activateListboxElement(e,t),this.isSetFormFieldMode=!0;break;case"SignatureField":case"InitialField":this.activateSignatureBoxElement(e),this.isSetFormFieldMode=!0}},e.prototype.resetFormField=function(e){var t=this.getFormField(e);if(t){switch(t.formFieldAnnotationType){case"Textbox":this.resetTextboxProperties(t);break;case"PasswordField":this.resetPasswordProperties(t);break;case"Checkbox":this.resetCheckboxProperties(t);break;case"RadioButton":this.resetRadioButtonProperties(t);break;case"DropdownList":this.resetDropdownListProperties(t);break;case"ListBox":this.resetListBoxProperties(t);break;case"SignatureField":case"InitialField":this.resetSignatureTextboxProperties(t)}this.updateSessionFormFieldProperties(t)}},e.prototype.selectFormField=function(e){var t=this.getFormField(e);t&&(this.isProgrammaticSelection=!0,this.pdfViewer.select([t.id]),this.isProgrammaticSelection=!1)},e.prototype.updateFormField=function(e,t){var i=this.getFormField(e);if(this.isFormFieldUpdated=!0,i){if(!i.isReadonly||!m(t.isReadOnly)&&!t.isReadOnly)switch(i.formFieldAnnotationType){case"Textbox":case"PasswordField":case"DropdownList":case"ListBox":case"SignatureField":case"InitialField":var n=document.getElementById(i.id+"_content_html_element");n?(n=n.firstElementChild.firstElementChild,this.formFieldPropertyChange(i,t,n)):this.updateFormFieldsInCollections(e,t);break;case"RadioButton":var o=document.getElementById(i.id+"_content_html_element");o?(o=o.firstElementChild.firstElementChild.firstElementChild,this.formFieldPropertyChange(i,t,o)):this.updateFormFieldsInCollections(e,t);break;case"Checkbox":var s=document.getElementById(i.id+"_content_html_element");s?(s=s.firstElementChild.firstElementChild.lastElementChild,this.formFieldPropertyChange(i,t,s)):this.updateFormFieldsInCollections(e,t)}}else this.updateFormFieldsInCollections(e,t)},e.prototype.updateFormFieldsInCollections=function(e,t){for(var i=this.pdfViewer.formFieldCollections,n=0;n<i.length;n++){var o=i[n];if(o.id===e){this.updateFormFieldData(o,t);var s=this.pdfViewer.formFieldCollections.findIndex((function(t){return t.id===e}));this.pdfViewer.formFieldCollections[s]=o}}},e.prototype.updateFormFieldData=function(e,t){if(t.name&&e.name!==t.name&&(e.name=t.name),("SignatureField"!==e.type||"InitialField"!==e.type)&&(t.thickness&&e.thickness!==t.thickness&&(e.thickness=t.thickness),t.borderColor)){var i=this.colorNametoHashValue(t.borderColor);e.borderColor!==i&&(e.borderColor=i)}if(t.backgroundColor){var n=this.colorNametoHashValue(t.backgroundColor);e.backgroundColor!==n&&(e.backgroundColor=n)}if(m(t.isReadOnly)||e.isReadonly===t.isReadOnly||(e.isReadOnly=t.isReadOnly),m(t.isRequired)||e.isRequired===t.isRequired||(e.isRequired=t.isRequired),m(t.isPrint)||e.isPrint===t.isPrint||(e.isPrint=t.isPrint),t.visibility&&e.visibility!==t.visibility&&(e.visibility=t.visibility),t.tooltip&&e.tooltip!==t.tooltip&&(e.tooltip=t.tooltip),"Checkbox"!==e.type||m(t.isChecked)||e.isChecked!==t.isChecked||(e.isChecked=t.isChecked),"RadioButton"!==e.type||m(t.isSelected)||e.isSelected!==t.isSelected||(e.isSelected=t.isSelected),"DropdownList"!==e.type&&"ListBox"!==e.type||!t.options||(e.options=t.options),"Textbox"===e.type||"SignatureField"===e.type||"InitialField"===e.type||"DropdownList"===e.type||"ListBox"===e.type||"PasswordField"===e.type){if(t.value&&e.value!==t.value&&(e.value=t.value),t.fontSize&&e.fontSize!==t.fontSize&&(e.fontSize=t.fontSize),t.color){var o=this.colorNametoHashValue(t.color);e.color!==o&&(e.color=o)}"SignatureField"!==e.type&&(t.alignment&&e.alignment!==t.alignment&&(e.alignment=t.alignment),t.maxLength&&e.maxLength!==t.maxLength&&(e.maxLength=t.maxLength)),"PasswordField"!==e.type&&(t.fontFamily&&e.fontFamily!==t.fontFamily&&(e.fontFamily=t.fontFamily),t.fontStyle&&e.fontStyle!==t.fontStyle&&(e.fontStyle=t.fontStyle))}},e.prototype.getSignatureBackground=function(e){return e.includes("#")&&(e.length>8?e=e.slice(0,-2)+"60":e+="60"),e},e.prototype.formFieldPropertyChange=function(e,t,i){var n,o,s=!1,a=!1,r=!1,l=!1,d=!1,h=!1,p=!1,c=!1,u=!1,f=!1,g=!1,y=!1,v=!1,w=!1,b=!1,S=!1,C=this.pdfViewerBase.getZoomFactor();if(t.name){e.name!==t.name&&(S=!0),e.name=t.name;var x=document.getElementById(e.id+"_designer_name");x.innerHTML=e.name,x.style.fontSize=e.fontSize?e.fontSize*C+"px":10*C+"px",i.name=t.name,this.pdfViewer.nameTable[e.id.split("_")[0]].name=e.name,S&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,n,o,S)}if(e.formFieldAnnotationType&&(m(t.thickness)||(e.thickness!==t.thickness&&(c=!0,n=e.thickness,o=t.thickness),i.style.borderWidth=t.thickness.toString()+"px",e.thickness=t.thickness,this.pdfViewer.nameTable[e.id.split("_")[0]].thickness=t.thickness,c&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,c,!1,!1,!1,!1,!1,!1,!1,n,o)),t.borderColor)){var M=this.colorNametoHashValue(t.borderColor);e.borderColor!==M&&(p=!0,n=e.borderColor,o=M),e.borderColor=M,i.style.borderColor=M,"RadioButton"===e.formFieldAnnotationType&&(i.parentElement.style.boxShadow=M+" 0px 0px 0px "+e.thickness+"px",this.setToolTip(t.tooltip,i.parentElement)),this.pdfViewer.nameTable[e.id.split("_")[0]].borderColor=M,p&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,p,!1,!1,!1,!1,!1,!1,!1,!1,n,o)}if(t.backgroundColor){var I=this.colorNametoHashValue(t.backgroundColor);I=this.getSignatureBackground(I),e.backgroundColor!==I&&(h=!0,n=e.backgroundColor,o=I),e.backgroundColor=I,"SignatureField"===e.formFieldAnnotationType||"InitialField"===e.formFieldAnnotationType?i.parentElement.style.background=I:i.style.background=I,"RadioButton"===e.formFieldAnnotationType&&(i.parentElement.style.background=e.backgroundColor),this.pdfViewer.nameTable[e.id.split("_")[0]].backgroundColor=I,h&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,h,!1,!1,!1,!1,!1,!1,!1,!1,!1,n,o)}if(t.bounds){e.bounds={x:t.bounds.X,y:t.bounds.Y,width:t.bounds.Width,height:t.bounds.Height};var T=this.pdfViewer.nameTable[e.id.split("_")[0]];T.bounds={x:t.bounds.X,y:t.bounds.Y,width:t.bounds.Width,height:t.bounds.Height},T.wrapper.bounds=new Nh(t.bounds.X,t.bounds.Y,t.bounds.Width,t.bounds.Height),this.pdfViewer.drawing.nodePropertyChange(T,{bounds:{x:T.wrapper.bounds.x,y:T.wrapper.bounds.y,width:T.wrapper.bounds.width,height:T.wrapper.bounds.height}});var A=T.wrapper.children[0],k=Wh(T.wrapper.children[0]).topLeft,V=document.getElementById(A.id+"_html_element");m(V)||V.setAttribute("style","height:"+A.actualSize.height*C+"px; width:"+A.actualSize.width*C+"px;left:"+k.x*C+"px; top:"+k.y*C+"px;position:absolute;transform:rotate("+(A.rotateAngle+A.parentTransform)+"deg);pointer-events:"+(this.pdfViewer.designerMode?"none":"all")+";visibility:"+(A.visible?"visible":"hidden")+";opacity:"+A.style.opacity+";")}if(m(t.isReadOnly)||(e.isReadonly!==t.isReadOnly&&(f=!0,n=e.isReadonly,o=t.isReadOnly),e.isReadonly=t.isReadOnly,this.setReadOnlyToElement(e,i,t.isReadOnly),this.setReadOnlyToFormField(e,t.isReadOnly),this.pdfViewer.nameTable[e.id.split("_")[0]].isReadonly=t.isReadOnly,f&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,!1,!1,f,!1,!1,!1,!1,!1,n,o)),m(t.isRequired)||(e.isRequired!==t.isRequired&&(v=!0,n=e.isRequired,o=t.isRequired),e.isRequired=t.isRequired,this.setRequiredToElement(e,i,t.isRequired),this.setRequiredToFormField(e,t.isRequired),this.pdfViewer.nameTable[e.id.split("_")[0]].isRequired=t.isRequired,v&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,v,!1,!1,n,o)),t.visibility){if(e.visibility!==t.visibility&&(g=!0,n=e.visibility,o=t.visibility),e.visibility=t.visibility,i.style.visibility=t.visibility,"RadioButton"===e.formFieldAnnotationType&&(i.parentElement.style.visibility=e.visibility),"SignatureField"===e.formFieldAnnotationType||"InitialField"===e.formFieldAnnotationType){i.parentElement.style.visibility=e.visibility;var E=this.pdfViewer.nameTable[e.id.split("_")[0]+"_content"],D=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),N=JSON.parse(D),F=this.getFormFiledIndex(e.id.split("_")[0]);"hidden"===e.visibility?E&&this.hideSignatureValue(e,E,F,N):E&&this.showSignatureValue(e,n,E,F,N)}this.pdfViewer.nameTable[e.id.split("_")[0]].visibility=t.visibility,g&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,g,!1,!1,!1,!1,n,o)}if(m(t.isPrint)||(e.isPrint!==t.isPrint&&(w=!0,n=e.isPrint,o=t.isPrint),e.isPrint=t.isPrint,this.pdfViewer.nameTable[e.id.split("_")[0]].isPrint=t.isPrint,w&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,w,!1,n,o)),t.tooltip&&(e.tooltip!==t.tooltip&&(b=!0,n=e.tooltip,o=t.tooltip),e.tooltip=t.tooltip,m(t.tooltip)||("RadioButton"===e.formFieldAnnotationType?this.setToolTip(t.tooltip,i.parentElement):this.setToolTip(t.tooltip,i)),this.pdfViewer.nameTable[e.id.split("_")[0]].tooltip=t.tooltip,b&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,b,n,o)),("Checkbox"===e.formFieldAnnotationType&&!m(t.isChecked)||t.isChecked)&&(e.isChecked!==this.checkboxCheckedState&&(s=!0,n=e.isChecked,o=t.isChecked),e.isChecked=t.isChecked,i.checked=t.isChecked,this.setCheckedValue(i,t.isChecked),this.pdfViewer.nameTable[e.id.split("_")[0]].isChecked=t.isChecked,s&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,s,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,n,o)),("RadioButton"===e.formFieldAnnotationType&&!m(t.isSelected)||t.isSelected)&&(e.isSelected!==t.isSelected&&(s=!0,n=e.isSelected,o=this.checkboxCheckedState),e.isSelected=t.isSelected,i.checked=t.isSelected,this.pdfViewer.nameTable[e.id.split("_")[0]].isSelected=t.isSelected,s&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,s,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,n,o)),"DropdownList"!==e.formFieldAnnotationType&&"ListBox"!==e.formFieldAnnotationType||t.options&&(e.options=t.options,this.updateDropDownListDataSource(e,i),this.pdfViewer.nameTable[e.id.split("_")[0]].options=e.options),"Textbox"===e.formFieldAnnotationType||"SignatureField"===e.formFieldAnnotationType||"InitialField"===e.formFieldAnnotationType||"DropdownList"===e.formFieldAnnotationType||"ListBox"===e.formFieldAnnotationType||"PasswordField"===e.formFieldAnnotationType){if(t.value){if(e.value!==t.value&&(s=!0,n=e.value,o=t.value),e.value=t.value,"DropdownList"!==e.formFieldAnnotationType&&"ListBox"!==e.formFieldAnnotationType)i.value=t.value;else if("DropdownList"===e.formFieldAnnotationType||"ListBox"===e.formFieldAnnotationType)for(var L=0;L<i.options.length;L++)i.options[L].text===t.value&&(i.options.selectedIndex=L);this.pdfViewer.nameTable[e.id.split("_")[0]].value=t.value,s&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,s,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,n,o)}if(t.fontSize&&(e.fontSize!==t.fontSize&&(r=!0,n=e.fontSize,o=t.fontSize),e.fontSize=t.fontSize,i.style.fontSize=t.fontSize*C+"px",this.pdfViewer.nameTable[e.id.split("_")[0]].fontSize=t.fontSize,r&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,r,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,n,o)),t.color){var P=this.colorNametoHashValue(t.color);e.color!==P&&(d=!0,n=e.color,o=P),e.color=P,i.style.color=P,this.pdfViewer.nameTable[e.id.split("_")[0]].color=P,d&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,d,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,n,o)}if("SignatureField"!==e.formFieldAnnotationType&&(t.alignment&&(e.alignment!==t.alignment&&(u=!0,n=e.alignment,o=t.alignment),e.alignment=t.alignment,i.style.textAlign=t.alignment,this.pdfViewer.nameTable[e.id.split("_")[0]].alignment=t.alignment,u&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,!1,u,!1,!1,!1,!1,!1,!1,n,o)),t.maxLength&&(e.maxLength!==t.maxLength&&(y=!0,n=e.maxLength,o=t.maxLength),e.maxLength=t.maxLength,i.maxLength=t.maxLength,this.pdfViewer.nameTable[e.id.split("_")[0]].maxLength=t.maxLength,y&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,y,!1,!1,!1,n,o))),"PasswordField"!==e.formFieldAnnotationType){t.fontFamily&&(e.fontFamily!==t.fontFamily&&(a=!0,n=e.fontFamily,o=t.fontFamily),e.fontFamily=t.fontFamily,i.style.fontFamily=t.fontFamily,this.pdfViewer.nameTable[e.id.split("_")[0]].fontFamily=t.fontFamily,a&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,a,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,n,o));var O="",B="";t.fontStyle&&(O+=e.font.isBold?"Bold, ":"",O+=e.font.isItalic?"Italic, ":"",O+=e.font.isStrikeout?"Strikethrough, ":"",O+=e.font.isUnderline?"Underline, ":"",0!==(t.fontStyle&Zs.Bold)&&(i.style.fontWeight="bold",e.fontStyle="Bold",e.font.isBold=!0,this.pdfViewer.nameTable[e.id.split("_")[0]].font.isBold=!0),B+=e.font.isBold?"Bold, ":"",0!==(t.fontStyle&Zs.Italic)&&(i.style.fontStyle="italic",e.fontStyle="Italic",e.font.isItalic=!0,this.pdfViewer.nameTable[e.id.split("_")[0]].font.isItalic=!0),B+=e.font.isItalic?"Italic, ":"",0!==(t.fontStyle&Zs.Strikethrough)&&(i.style.textDecoration="line-through",e.font.isStrikeout=!0,e.fontStyle="Strikethrough",this.pdfViewer.nameTable[e.id.split("_")[0]].font.isStrikeout=!0),B+=e.font.isStrikeout?"Strikethrough, ":"",0!==(t.fontStyle&Zs.Underline)&&(i.style.textDecoration="underline",e.fontStyle="Underline",e.font.isUnderline=!0,this.pdfViewer.nameTable[e.id.split("_")[0]].font.isUnderline=!0),B+=e.font.isUnderline?"Underline, ":"",(l=!0)&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,l,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,O,B))}}("SignatureField"===e.formFieldAnnotationType&&t.signatureIndicatorSettings||"InitialField"===e.formFieldAnnotationType&&t.initialIndicatorSettings)&&(e=this.updateSignatureandInitialIndicator(e,t,i)),this.updateSessionFormFieldProperties(e);var z={id:e.id,name:e.name,value:e.value,type:e.formFieldAnnotationType,isReadOnly:e.isReadonly,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,color:e.color,backgroundColor:e.backgroundColor,alignment:e.alignment,visibility:e.visibility,maxLength:e.maxLength,isRequired:e.isRequired,isPrint:e.isPrint,tooltip:e.tooltip,bounds:e.bounds,thickness:e.thickness,borderColor:e.borderColor,pageIndex:e.pageIndex};this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.findIndex((function(e){return e.id===z.id}))]=z},e.prototype.colorNametoHashValue=function(e){var t=e;return t.match(/#([a-z0-9]+)/gi)||t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)||(t=this.nameToHash(t)),""!==t?t:e},e.prototype.getFormField=function(e){var t,i;return"object"===typeof e&&(i=this.getAnnotationsFromAnnotationCollections(e.id))&&(t=this.pdfViewer.nameTable[i.id]),"string"===typeof e&&(i=this.getAnnotationsFromAnnotationCollections(e))&&(t=this.pdfViewer.nameTable[i.id]),t},e.prototype.resetTextboxProperties=function(e){var t=document.getElementById(e.id+"_content_html_element").firstElementChild.firstElementChild;t&&(e.name="textboxField",e.value="",e.fontFamily="Helvetica",e.fontSize=10,e.fontStyle="None",e.color="black",e.backgroundColor="#daeaf7ff",e.alignment="left",e.visibility="visible",e.isReadonly=!1,e.isRequired=!1,e.tooltip="",e.isPrint=!0,e.borderColor="#303030",e.thickness=1,e.maxLength=0,this.updateTextboxProperties(e,t))},e.prototype.resetPasswordProperties=function(e){var t=document.getElementById(e.id+"_content_html_element").firstElementChild.firstElementChild;t&&(e.name="passswordField",e.value="",e.fontFamily="Helvetica",e.fontSize=10,e.fontStyle="None",e.color="black",e.backgroundColor="#daeaf7ff",e.alignment="left",e.visibility="visible",e.isReadonly=!1,e.isRequired=!1,e.tooltip="",e.isPrint=!0,e.borderColor="#303030",e.thickness=1,e.maxLength=0,this.updatePasswordFieldProperties(e,t))},e.prototype.resetCheckboxProperties=function(e){var t=document.getElementById(e.id+"_content_html_element").firstElementChild.firstElementChild;t&&(e.name="checkboxField",e.isChecked=!1,e.backgroundColor="#daeaf7ff",e.visibility="visible",e.isReadonly=!1,e.isRequired=!1,e.tooltip="",e.isPrint=!0,e.borderColor="#303030",e.thickness=1,this.updateCheckboxProperties(e,t))},e.prototype.resetRadioButtonProperties=function(e){var t=document.getElementById(e.id+"_content_html_element").firstElementChild.firstElementChild;t&&(e.name="RadioButtonField",e.isSelected=!1,e.backgroundColor="#daeaf7ff",e.visibility="visible",e.isReadonly=!1,e.isRequired=!1,e.tooltip="",e.isPrint=!0,e.borderColor="#303030",e.thickness=1,this.updateRadioButtonProperties(e,t))},e.prototype.resetDropdownListProperties=function(e){var t=document.getElementById(e.id+"_content_html_element").firstElementChild.firstElementChild;t&&(e.name="dropDownField",e.value="",e.fontFamily="Helvetica",e.fontSize=10,e.fontStyle="None",e.color="black",e.backgroundColor="#daeaf7ff",e.alignment="left",e.visibility="visible",e.isReadonly=!1,e.isRequired=!1,e.tooltip="",e.isPrint=!0,e.borderColor="#303030",e.thickness=1,e.options=[],this.updateDropdownListProperties(e,t),e.options&&this.updateDropDownListDataSource(e,t))},e.prototype.resetListBoxProperties=function(e){var t=document.getElementById(e.id+"_content_html_element").firstElementChild.firstElementChild;t&&(e.name="listBoxField",e.value="",e.fontFamily="Helvetica",e.fontSize=10,e.fontStyle="None",e.color="black",e.backgroundColor="#daeaf7ff",e.alignment="left",e.visibility="visible",e.isReadonly=!1,e.isRequired=!1,e.tooltip="",e.isPrint=!0,e.borderColor="#303030",e.thickness=1,e.options=[],this.updateListBoxProperties(e,t),e.options&&this.updateDropDownListDataSource(e,t))},e.prototype.resetSignatureTextboxProperties=function(e){var t=document.getElementById(e.id+"_content_html_element").firstElementChild.firstElementChild;t&&(e.name="signatureField",e.value="",e.fontFamily="Helvetica",e.fontSize=10,e.fontStyle="None",e.color="black",e.backgroundColor="#daeaf7ff",e.isRequired=!1,e.isReadonly=!1,e.tooltip="",e.isPrint=!0,e.visibility="visible",this.updateSignatureFieldProperties(e,t))},e.prototype.deleteFormField=function(e,t){void 0===t&&(t=!0);var i=this.getFormField(e);i&&(this.clearSelection(e),this.pdfViewer.remove(i),this.pdfViewer.renderDrawing(),m(this.pdfViewer.toolbar)||m(this.pdfViewer.toolbar.formDesignerToolbarModule)||this.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(!1),this.pdfViewerBase.formFieldCollection.length>0?this.pdfViewerBase.enableFormFieldButton(!0):this.pdfViewerBase.enableFormFieldButton(!1),t&&this.pdfViewer.annotation&&this.pdfViewer.annotation.addAction(this.pdfViewerBase.currentPageNumber,null,i,"Delete","",i,i))},e.prototype.clearSelection=function(e){var t,i;if("object"===typeof e&&(i=this.getAnnotationsFromAnnotationCollections(e.id),t=this.pdfViewer.nameTable[i.id]),"string"===typeof e&&(i=this.getAnnotationsFromAnnotationCollections(e),t=this.pdfViewer.nameTable[i.id]),t&&this.pdfViewer.selectedItems&&!m(this.pdfViewer.selectedItems.properties.formFields)&&this.pdfViewer.selectedItems.properties.formFields.length>0&&this.pdfViewer.selectedItems.properties.formFields[0].id===t.id){var n=m(this.pdfViewerBase.activeElements.activePageID)?t.pageIndex:this.pdfViewerBase.activeElements.activePageID;this.pdfViewer.clearSelection(n)}},e.prototype.setMode=function(e){e&&-1!==e.indexOf("designer")?(this.enableDisableFormFieldsInteraction(!0),this.pdfViewerBase.disableTextSelectionMode()):(this.enableDisableFormFieldsInteraction(!1),this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.enableTextSelectionMode())},e.prototype.enableDisableFormFieldsInteraction=function(e){var t=this.pdfViewer.formFieldCollection;if(t&&t.length>0)for(var i=0;i<t.length;i++){var n=document.getElementById(t[i].id+"_content_html_element"),o=document.getElementById(t[i].id+"_designer_name");if(n)if(e){this.pdfViewer.designerMode=!0,n.style.pointerEvents="none",o.innerHTML=t[i].name;var s=this.pdfViewerBase.getZoomFactor();o.style.fontSize=t[i].fontSize?t[i].fontSize*s+"px":10*s+"px",o.style.position="absolute"}else this.pdfViewer.designerMode=!1,n.style.pointerEvents="all",o.innerHTML="",o.style.position="initial","RadioButton"===t[i].formFieldAnnotationType&&this.updateRadioButtonDesignerProperties(t[i]),"Checkbox"===t[i].formFieldAnnotationType&&this.updateCheckboxFormDesignerProperties(t[i]),this.pdfViewer.clearSelection(t[i].pageIndex)}},e.prototype.getAnnotationsFromAnnotationCollections=function(e){var t=this.pdfViewer.formFieldCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].id===e)return t[i]},e.prototype.updateSignatureValue=function(e){for(var t=0;t<this.pdfViewerBase.formFieldCollection.length;t++)e===this.pdfViewerBase.formFieldCollection[t].FormField.id&&(this.pdfViewerBase.formFieldCollection[t].FormField.value="",this.pdfViewer.nameTable[this.pdfViewerBase.formFieldCollection[t].FormField.id.split("_")[0]].value="",this.pdfViewer.nameTable[this.pdfViewerBase.formFieldCollection[t].FormField.id].value="",this.pdfViewerBase.formFieldCollection[t].FormField.signatureType="",this.pdfViewer.nameTable[this.pdfViewerBase.formFieldCollection[t].FormField.id.split("_")[0]].signatureType="",this.pdfViewer.nameTable[this.pdfViewerBase.formFieldCollection[t].FormField.id].signatureType="")},e.prototype.removeFieldsFromAnnotationCollections=function(e){for(var t=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),i=JSON.parse(t),n=0;n<i.length;n++)if(i[n].Key.split("_")[0]===e){i.splice(n,1),this.pdfViewerBase.formFieldCollection.splice(n,1);break}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner");var o=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape");if(o){var s=JSON.parse(o),a=this.pdfViewer.annotationModule.getPageCollection(s,this.pdfViewerBase.currentPageNumber-1);if(s[a]){for(var r=0;r<s[a].annotations.length;r++)if(e===s[a].annotations[r].id){s[a].annotations.splice(r,1);break}var l=JSON.stringify(s);window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_shape",l)}}var d=this.pdfViewer.formFieldCollection;if(d&&e)for(n=0;n<d.length;n++)d[n].formFieldId===e&&this.pdfViewer.formFieldCollection.splice(n,1)},e.prototype.setFormFieldIndex=function(){return this.formFieldIndex=this.formFieldIndex+1,this.formFieldIndex},e.prototype.setFormFieldIdIndex=function(){return this.formFieldIdIndex=this.formFieldIdIndex+1,this.formFieldIdIndex},e.prototype.activateTextboxElement=function(e){this.pdfViewer.drawingObject={formFieldAnnotationType:e,name:"Textbox"+this.setFormFieldIndex(),value:"",fontFamily:"Helvetica",fontSize:10*this.pdfViewerBase.getZoomFactor(),fontStyle:"None",color:"black",backgroundColor:"#daeaf7ff",thickness:1,borderColor:"#303030",alignment:"left",isReadonly:!1,visibility:"visible",isRequired:!1,isPrint:!0,rotateAngle:0,tooltip:"",font:{isItalic:!1,isBold:!1,isStrikeout:!1,isUnderline:!1}},this.pdfViewer.tool="DrawTool"},e.prototype.activatePasswordField=function(e){this.pdfViewer.drawingObject={formFieldAnnotationType:e,name:"Password"+this.setFormFieldIndex(),value:"",fontFamily:"Helvetica",fontSize:10*this.pdfViewerBase.getZoomFactor(),fontStyle:"None",color:"black",alignment:"left",backgroundColor:"#daeaf7ff",thickness:1,borderColor:"#303030",isReadonly:!1,visibility:"visible",isRequired:!1,isPrint:!0,rotateAngle:0,tooltip:"",font:{isItalic:!1,isBold:!1,isStrikeout:!1,isUnderline:!1}},this.pdfViewer.tool="DrawTool"},e.prototype.activateCheckboxElement=function(e){this.pdfViewer.drawingObject={formFieldAnnotationType:e,name:"Check Box"+this.setFormFieldIndex(),isChecked:!1,fontSize:10*this.pdfViewerBase.getZoomFactor(),backgroundColor:"#daeaf7ff",color:"black",thickness:1,borderColor:"#303030",isReadonly:!1,visibility:"visible",isPrint:!0,rotateAngle:0,tooltip:""},this.pdfViewer.tool="DrawTool"},e.prototype.activateRadioButtonElement=function(e){this.pdfViewer.drawingObject={formFieldAnnotationType:e,name:"Radio Button"+this.setFormFieldIndex(),isSelected:!1,fontSize:10*this.pdfViewerBase.getZoomFactor(),backgroundColor:"#daeaf7ff",color:"black",thickness:1,borderColor:"#303030",isReadonly:!1,visibility:"visible",isPrint:!0,rotateAngle:0,tooltip:""},this.pdfViewer.tool="DrawTool"},e.prototype.activateDropDownListElement=function(e,t){this.pdfViewer.drawingObject={formFieldAnnotationType:e,name:"Dropdown"+this.setFormFieldIndex(),fontFamily:"Helvetica",fontSize:10*this.pdfViewerBase.getZoomFactor(),fontStyle:"None",color:"black",backgroundColor:"#daeaf7ff",thickness:1,borderColor:"#303030",alignment:"left",isReadonly:!1,visibility:"visible",isRequired:!1,isPrint:!0,rotateAngle:0,tooltip:"",options:t,isMultiSelect:!1,font:{isItalic:!1,isBold:!1,isStrikeout:!1,isUnderline:!1}},this.pdfViewer.tool="DrawTool"},e.prototype.activateListboxElement=function(e,t){this.pdfViewer.drawingObject={formFieldAnnotationType:e,name:"List Box"+this.setFormFieldIndex(),fontFamily:"Helvetica",fontSize:10*this.pdfViewerBase.getZoomFactor(),fontStyle:"None",color:"black",backgroundColor:"#daeaf7ff",thickness:1,borderColor:"#303030",alignment:"left",isReadonly:!1,visibility:"visible",isRequired:!1,isPrint:!0,rotateAngle:0,tooltip:"",options:t,isMultiSelect:!0,font:{isItalic:!1,isBold:!1,isStrikeout:!1,isUnderline:!1}},this.pdfViewer.tool="DrawTool"},e.prototype.activateSignatureBoxElement=function(e){var t={opacity:1,backgroundColor:"rgba(255, 228, 133, 0.35)",width:19,height:10,fontSize:10,text:null,color:"black"};switch(e){case"SignatureField":m(this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings)||(t=this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings);break;case"InitialField":m(this.pdfViewer.initialFieldSettings.initialIndicatorSettings)||(t=this.pdfViewer.initialFieldSettings.initialIndicatorSettings)}this.pdfViewer.drawingObject={formFieldAnnotationType:e,name:"InitialField"===e||this.pdfViewer.isInitialFieldToolbarSelection?"Initial"+this.setFormFieldIndex():"Signature"+this.setFormFieldIndex(),fontFamily:"Helvetica",fontSize:10*this.pdfViewerBase.getZoomFactor(),fontStyle:"None",color:"black",backgroundColor:"#daeaf7ff",alignment:"left",isReadonly:!1,visibility:"visible",isRequired:!1,isPrint:!0,rotateAngle:0,tooltip:"",font:{isItalic:!1,isBold:!1,isStrikeout:!1,isUnderline:!1},isInitialField:"InitialField"===e||this.pdfViewer.isInitialFieldToolbarSelection,signatureIndicatorSettings:{opacity:t.opacity,backgroundColor:t.backgroundColor,width:t.width,height:t.height,fontSize:t.fontSize,text:t.text,color:t.color}},this.pdfViewer.tool="DrawTool"},e.prototype.updateTextboxProperties=function(e,t,i){t.name=e.name?e.name:"Textbox"+this.setFormFieldIndex(),t.value=e.value?e.value:"";var n=i?this.defaultZoomValue:this.pdfViewerBase.getZoomFactor();if(e.insertSpaces){var o=e.bounds.width*n/e.maxLength-e.fontSize*n/2-.6*n;t.style.letterSpacing=o+"px",t.style.fontFamily="monospace",t.style.paddingLeft=o/2+"px"}else t.style.fontFamily=e.fontFamily&&this.getFontFamily(e.fontFamily)?e.fontFamily:"Helvetica";t.style.fontSize=e.fontSize?e.fontSize*n+"px":10*n+"px",e.font.isBold&&(t.style.fontWeight="bold"),e.font.isItalic&&(t.style.fontStyle="italic"),e.font.isUnderline&&e.font.isStrikeout?t.style.textDecoration="underline line-through":e.font.isStrikeout?t.style.textDecoration="line-through":e.font.isUnderline&&(t.style.textDecoration="underline"),e.isTransparent&&"#ffffffff"===e.borderColor?(t.style.backgroundColor="transparent",t.style.borderColor="transparent"):(t.style.backgroundColor=e.backgroundColor?e.backgroundColor:"#daeaf7ff",t.style.borderColor=e.borderColor?e.borderColor:"#303030"),t.style.color=e.color?e.color:"black",t.style.borderWidth=m(e.thickness)?"1px":e.thickness+"px",t.style.textAlign=e.alignment?e.alignment.toLowerCase():"left",t.style.visibility=e.visibility?e.visibility:"visible",t.style.pointerEvents=e.isReadonly?"none":"default",e.isReadonly&&(t.disabled=!0,t.style.cursor="default",t.style.backgroundColor="transparent"),e.isRequired&&(t.required=!0,t.style.border="1px solid red",t.style.borderWidth=m(e.thickness)?"1px":e.thickness+"px"),void 0!=e.maxLength&&(t.maxLength=0===e.maxLength?524288:e.maxLength),t.tabIndex=this.formFieldIndex,t.setAttribute("aria-label",this.pdfViewer.element.id+"formfilldesigner")},e.prototype.updatePasswordFieldProperties=function(e,t,i){t.name=e.name?e.name:"Password"+this.setFormFieldIndex(),t.value=e.value?e.value:"",t.style.fontFamily=e.fontFamily?e.fontFamily:"Helvetica";var n=i?this.defaultZoomValue:this.pdfViewerBase.getZoomFactor();t.style.fontSize=e.fontSize?e.fontSize*n+"px":10*n+"px",e.font.isBold&&(t.style.fontWeight="bold"),e.font.isItalic&&(t.style.fontStyle="italic"),e.font.isStrikeout&&(t.style.textDecoration="line-through"),e.font.isUnderline&&(t.style.textDecoration="underline"),t.style.borderWidth=m(e.thickness)?"1px":e.thickness+"px",t.style.color=e.color?e.color:"black",t.style.backgroundColor=e.backgroundColor?e.backgroundColor:"#daeaf7ff",t.style.borderColor=e.borderColor?e.borderColor:"#303030",t.style.textAlign=e.alignment?e.alignment.toLowerCase():"left",t.style.visibility=e.visibility?e.visibility:"visible",t.style.pointerEvents=e.isReadonly?"none":"default",e.isReadonly&&(t.disabled=!0,t.style.cursor="default",t.style.backgroundColor="transparent"),e.isRequired&&(t.required=!0,t.style.border="1px solid red",t.style.borderWidth=m(e.thickness)?"1px":e.thickness+"px"),void 0!=e.maxLength&&(t.maxLength=0===e.maxLength?524288:e.maxLength),t.tabIndex=this.formFieldIndex},e.prototype.updateCheckboxProperties=function(e,t){t.name=e.name?e.name:"Check Box"+this.setFormFieldIndex(),t.checked=!!e.isChecked,e.isTransparent&&"#ffffffff"===e.borderColor?(t.style.backgroundColor="transparent",t.style.borderColor="transparent"):(t.style.backgroundColor=e.backgroundColor?e.backgroundColor:"#daeaf7ff",t.style.borderColor=e.borderColor?e.borderColor:"#303030"),t.style.visibility=e.visibility?e.visibility:"visible",t.style.pointerEvents=e.isReadonly?"none":"default",t.style.borderWidth=m(e.thickness)?"1px":e.thickness+"px",e.isReadonly&&(t.disabled=!0,t.style.cursor="default",t.style.backgroundColor="transparent"),e.isRequired&&(t.required=!0,t.style.border="1px solid red",t.style.borderWidth=m(e.thickness)?"1px":e.thickness+"px"),t.tabIndex=this.formFieldIndex},e.prototype.updateRadioButtonProperties=function(e,t){t.name=e.name?e.name:"Radio Button"+this.setFormFieldIndex(),t.checked=!!e.isSelected,t.style.backgroundColor=e.backgroundColor?e.backgroundColor:"#daeaf7ff",t.style.borderColor=e.borderColor?e.borderColor:"#303030",t.style.visibility=e.visibility?e.visibility:"visible",t.style.pointerEvents=e.isReadonly?"none":"default",t.style.borderWidth=m(e.thickness)?"1px":e.thickness+"px",e.isReadonly&&(t.disabled=!0,t.style.cursor="default",t.style.backgroundColor="transparent"),e.isRequired&&(t.required=!0,t.style.border="1px solid red",t.style.borderWidth=m(e.thickness)?"1px":e.thickness+"px"),t.tabIndex=this.formFieldIndex},e.prototype.updateDropdownListProperties=function(e,t,i){t.name=e.name?e.name:"Dropdown"+this.setFormFieldIndex(),t.value=e.value?e.value:"",t.style.fontFamily=e.fontFamily?e.fontFamily:"Helvetica";var n=i?this.defaultZoomValue:this.pdfViewerBase.getZoomFactor();t.style.fontSize=e.fontSize?e.fontSize*n+"px":10*n+"px",e.font.isBold&&(t.style.fontWeight="bold"),e.font.isItalic&&(t.style.fontStyle="italic"),e.font.isStrikeout&&(t.style.textDecoration="line-through"),e.font.isUnderline&&(t.style.textDecoration="underline"),t.style.borderWidth=m(e.thickness)?"1px":e.thickness+"px",t.style.color=e.color?e.color:"black",t.style.backgroundColor=e.backgroundColor?e.backgroundColor:"#daeaf7ff",t.style.borderColor=e.borderColor?e.borderColor:"#303030",t.style.textAlign=e.alignment?e.alignment.toLowerCase():"left",t.style.visibility=e.visibility?e.visibility:"visible",t.style.pointerEvents=e.isReadonly?"none":"default",e.isReadonly&&(t.disabled=!0,t.style.cursor="default",t.style.backgroundColor="transparent"),e.isRequired&&(t.required=!0,t.style.border="1px solid red",t.style.borderWidth=m(e.thickness)?"1px":e.thickness+"px"),t.tabIndex=this.formFieldIndex},e.prototype.updateListBoxProperties=function(e,t,i){t.name=e.name?e.name:"List Box"+this.setFormFieldIndex(),t.value=e.value?e.value:"",t.style.fontFamily=e.fontFamily?e.fontFamily:"Helvetica";var n=i?this.defaultZoomValue:this.pdfViewerBase.getZoomFactor();t.style.fontSize=e.fontSize?e.fontSize*n+"px":10*n+"px",e.font.isBold&&(t.style.fontWeight="bold"),e.font.isItalic&&(t.style.fontStyle="italic"),e.font.isStrikeout&&(t.style.textDecoration="line-through"),e.font.isUnderline&&(t.style.textDecoration="underline"),t.style.color=e.color?e.color:"black",t.style.backgroundColor=e.backgroundColor?e.backgroundColor:"#daeaf7ff",t.style.borderColor=e.borderColor?e.borderColor:"#303030",t.style.textAlign=e.alignment?e.alignment.toLowerCase():"left",t.style.visibility=e.visibility?e.visibility:"visible",t.style.pointerEvents=e.isReadonly?"none":"default",t.style.borderWidth=m(e.thickness)?"1px":e.thickness+"px",e.isReadonly&&(t.disabled=!0,t.style.cursor="default",t.style.backgroundColor="transparent"),e.isRequired&&(t.required=!0,t.style.border="1px solid red",t.style.borderWidth=m(e.thickness)?"1px":e.thickness+"px"),t.tabIndex=this.formFieldIndex},e.prototype.updateSignatureFieldProperties=function(e,t,i){t.name=e.name?e.name:"Signature"+this.setFormFieldIndex(),t.value=e.value?e.value:"",t.style.fontFamily=e.fontFamily?e.fontFamily:"Helvetica",t.style.visibility=e.visibility?e.visibility:"visible";var n=this.pdfViewerBase.getZoomFactor();t.style.fontSize=e.fontSize?e.fontSize*n+"px":10*n+"px",e.font.isBold&&(t.style.fontWeight="bold"),e.font.isItalic&&(t.style.fontStyle="italic"),e.font.isStrikeout&&(t.style.textDecoration="line-through"),e.font.isUnderline&&(t.style.textDecoration="underline"),t.style.color=e.color?e.color:"black",t.style.borderWidth=m(e.thickness)?"1px":e.thickness+"px";var o=e.backgroundColor?e.backgroundColor:"#FFE48559";if(o=this.getSignatureBackground(o),t.style.backgroundColor=i?"transparent":o,e.isReadonly&&(t.disabled=!0,t.style.cursor="default",t.style.backgroundColor="transparent"),e.isRequired){if(t.required=!0,t.firstElementChild){var s=e.thickness>0?e.thickness:1;t.firstElementChild.style.border=s+"px solid red"}else t.style.border="1px solid red";t.style.borderWidth=e.thickness?e.thickness+"px":"1px"}t.tabIndex=this.formFieldIndex},e.prototype.createHtmlElement=function(e,t){var i=we(e);return this.setAttributeHtml(i,t),i},e.prototype.setAttributeHtml=function(e,t){for(var i=Object.keys(t),n=0;n<i.length;n++)"style"!==i[n]?e.setAttribute(i[n],t[i[n]]):this.applyStyleAgainstCsp(e,t[i[n]])},e.prototype.applyStyleAgainstCsp=function(e,t){for(var i=t.split(";"),n=0;n<i.length;n++){var o=i[n].split(":");2===o.length&&(e.style[o[0].trim()]=o[1].trim())}},e.prototype.getFieldBounds=function(e,t){var i,n=this.pdfViewerBase.pageSize[t];if(e={X:e.X?e.X:e.x,Y:e.Y?e.Y:e.y,Width:e.Width?e.Width:e.width,Height:e.Height?e.Height:e.height},n)switch(n.rotation){case 0:i=e;break;case 1:i={X:e.Y-(e.Width/2-e.Height/2),Y:n.width-e.X-e.Height-(e.Width/2-e.Height/2),Width:e.Width,Height:e.Height};break;case 2:i={X:n.width-e.X-e.Width,Y:n.height-e.Y-e.Height,Width:e.Width,Height:e.Height};break;case 3:i={X:n.height-e.Y-e.Width+(e.Width/2-e.Height/2),Y:e.X+(e.Width/2-e.Height/2),Width:e.Height,Height:e.Width}}return i||(i=e),i},e.prototype.downloadFormDesigner=function(){var e=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner");if(e){for(var t=JSON.parse(e),i=0;i<t.length;i++){var n=t[i].FormField;if(n.Multiline=n.isMultiline,n.isRequired)if("Textbox"===n.formFieldAnnotationType||"PasswordField"===n.formFieldAnnotationType||n.Multiline)null===n.value||""===n.value?(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[n.name]=n.value):delete this.pdfViewerBase.nonFillableFields[n.name];else if("RadioButton"===n.formFieldAnnotationType){if(n.radiobuttonItem){for(var o=!1,s=0;s<n.radiobuttonItem.length;s++)if(n.radiobuttonItem[s].isSelected){o=!0;break}o?delete this.pdfViewerBase.nonFillableFields[n.name]:(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[n.name]=o)}}else"Checkbox"===n.formFieldAnnotationType?!1===n.isChecked?(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[n.name]=n.isChecked):delete this.pdfViewerBase.nonFillableFields[n.name]:"DropdownList"===n.formFieldAnnotationType||"ListBox"===n.formFieldAnnotationType?m(n.selectedIndex)||0===n.selectedIndex.length?(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[n.name]=n.selectedIndex):delete this.pdfViewerBase.nonFillableFields[n.name]:"SignatureField"!==n.formFieldAnnotationType&&"InitialField"!==n.formFieldAnnotationType||(null===n.value||""===n.value?(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[n.name]=n.value):delete this.pdfViewerBase.nonFillableFields[n.name])}for(s=0;s<this.pdfViewer.formFieldCollection.length;s++)for(var a=function(e){var i=r.loadedFormFieldValue(r.pdfViewer.formFieldCollections[e],r.pdfViewer.formFieldCollection[s]);0===t.filter((function(e){if(i.id+"_content"===e.FormField.id||i.id===e.FormField.id)return i})).length&&t.push({Key:i.id+"_content",FormField:i})},r=this,l=0;l<this.pdfViewer.formFieldCollections.length;l++)a(l);return JSON.stringify(t)}return null},e.prototype.loadedFormFieldValue=function(e,t){var i,n=this.hexToRgb(e.backgroundColor),o=e.bounds,s=e.backgroundColor?{r:n[0],g:n[1],b:n[2],a:n[3]}:{r:218,g:234,b:247,a:100},a=this.hexToRgb(e.color),r=e.color?{r:a[0],g:a[1],b:a[2],a:100}:{r:0,g:0,b:0,a:100},l=this.hexToRgb(e.borderColor),d=e.borderColor?{r:l[0],g:l[1],b:l[2],a:100}:{r:48,g:48,b:48,a:100};e.name!==t.name||"Textbox"!==e.type&&"PasswordField"!==e.type||(i=t.value);var h={lineBound:{X:o.x,Y:o.y,Width:o.width,Height:o.height},pageNumber:parseFloat(e.pageIndex)+1,name:e.name,tooltip:e.tooltip,value:i||e.value,radiobuttonItem:[],signatureType:t.signatureType?t.signatureType:"",id:e.id,insertSpaces:!!e.insertSpaces&&e.insertSpaces,isChecked:!!e.isChecked&&e.isChecked,isSelected:!!e.isSelected&&e.isSelected,fontFamily:e.fontFamily,fontStyle:e.fontStyle,backgroundColor:s,fontColor:r,borderColor:d,thickness:e.thickness,fontSize:e.fontSize,isMultiline:!!e.Multiline&&e.Multiline,rotation:0,isReadOnly:!!e.isReadOnly&&e.isReadOnly,isRequired:!!e.isRequired&&e.isRequired,textAlign:e.alignment,formFieldAnnotationType:e.type,zoomvalue:1,options:[],maxLength:e.maxLength?e.maxLength:0,visibility:e.visibility,font:{isItalic:!1,isBold:!1,isStrikeout:!1,isUnderline:!1}};if("RadioButton"===e.type){var p={lineBound:{X:o.x,Y:o.y,Width:o.width,Height:o.height},pageNumber:parseFloat(e.pageIndex)+1,name:e.name,tooltip:e.tooltip,value:e.value,signatureType:t.signatureType?t.signatureType:"",id:e.id,isChecked:!!e.isChecked&&e.isChecked,isSelected:!!e.isSelected&&e.isSelected,fontFamily:e.fontFamily,fontStyle:e.fontStyle,backgroundColor:s,fontColor:r,borderColor:d,thickness:e.thickness,fontSize:e.fontSize,rotation:0,isReadOnly:!!e.isReadOnly&&e.isReadOnly,isRequired:!!e.isRequired&&e.isRequired,textAlign:e.alignment,formFieldAnnotationType:e.type,zoomvalue:1,maxLength:e.maxLength?e.maxLength:0,visibility:e.visibility,font:{isItalic:!1,isBold:!1,isStrikeout:!1,isUnderline:!1}};h.radiobuttonItem.push(p)}else h.radiobuttonItem=[];return h},e.prototype.createAnnotationLayer=function(e,t,i,n,o){var s=this.pdfViewerBase.getElement("_annotationCanvas_"+n);if(s)return this.updateAnnotationCanvas(s,t,i,n),s;var a=we("canvas",{id:this.pdfViewer.element.id+"_annotationCanvas_"+n,className:"e-pv-annotation-canvas"});return this.updateAnnotationCanvas(a,t,i,n),e.appendChild(a),a},e.prototype.resizeAnnotations=function(e,t,i){var n=this.pdfViewerBase.getElement("_annotationCanvas_"+i);n&&(n.style.width=e+"px",n.style.height=t+"px",this.pdfViewerBase.applyElementStyles(n,i))},e.prototype.getEventPageNumber=function(e){var t=e.target;t.classList.contains("e-pv-hyperlink")?t=t.parentElement:(t.parentElement.classList.contains("foreign-object")||t.parentElement.classList.contains("e-pv-radiobtn-container"))&&(t=t.closest(".e-pv-text-layer"));var i=t.id.split("_text_")[1]||t.id.split("_textLayer_")[1]||t.id.split("_annotationCanvas_")[1]||t.id.split("_pageDiv_")[1];return isNaN(i)&&(e=this.pdfViewerBase.annotationEvent)&&(i=(t=e.target).id.split("_text_")[1]||t.id.split("_textLayer_")[1]||t.id.split("_annotationCanvas_")[1]||t.id.split("_pageDiv_")[1]),parseInt(i)},e.prototype.getPropertyPanelHeaderContent=function(e){switch(e){case"Textbox":return this.pdfViewer.localeObj.getConstant("Textbox");case"PasswordField":return this.pdfViewer.localeObj.getConstant("Password");case"Checkbox":return this.pdfViewer.localeObj.getConstant("Check Box");case"RadioButton":return this.pdfViewer.localeObj.getConstant("Radio Button");case"DropdownList":return this.pdfViewer.localeObj.getConstant("Dropdown");case"ListBox":return this.pdfViewer.localeObj.getConstant("List Box");case"InitialField":return this.pdfViewer.localeObj.getConstant("Initial");case"SignatureField":return this.pdfViewer.localeObj.getConstant("Signature")}},e.prototype.createPropertiesWindow=function(){var e,t=this,i=we("div",{id:this.pdfViewer.element.id+"_properties_window",className:"e-pv-properties-form-field-window"}),n=this.createAppearanceTab();this.pdfViewerBase.pageContainer.appendChild(i),e="DropdownList"!==this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType&&"ListBox"!==this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType?"430px":"505px",this.propertiesDialog=new Ko({showCloseIcon:!0,closeOnEscape:!1,isModal:!0,header:'<div class="e-pv-form-field-property-header"> '+this.getPropertyPanelHeaderContent(this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType)+" "+this.pdfViewer.localeObj.getConstant("Properties")+"</div>",minHeight:e,target:this.pdfViewer.element,content:n,beforeOpen:function(){t.isPropertyDialogOpen=!0},allowDragging:!0,close:function(){t.destroyPropertiesWindow(),t.isPropertyDialogOpen=!1}}),!ge.isDevice||this.pdfViewer.enableDesktopMode,this.propertiesDialog.buttons=[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.onCancelClicked.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.onOkClicked.bind(this)}],this.pdfViewer.enableRtl&&(this.propertiesDialog.enableRtl=!0);var o=we("div");o.className="e-pv-properties-bottom-spliter",i.appendChild(o),this.propertiesDialog.appendTo(i)},e.prototype.onOkClicked=function(e){var t=this.pdfViewer.selectedItems.formFields[0],i=qs(t);if(t){switch(t.formFieldAnnotationType){case"Textbox":case"PasswordField":if(this.formFieldMultiline&&this.formFieldMultiline.checked&&"Textbox"===t.formFieldAnnotationType&&this.multilineCheckboxCheckedState?this.renderMultilineText(t):"Textbox"===t.formFieldAnnotationType&&this.multilineCheckboxCheckedState&&this.renderTextbox(t),"PasswordField"===t.formFieldAnnotationType&&this.updateTextboxFormDesignerProperties(t),"Textbox"===t.formFieldAnnotationType){var n=this.checkTextboxName(t);if(n&&n.length>0)for(var o=0;o<n.length;o++){var s=n[o];s.id===t.id&&(t.isMultiline?this.renderMultilineText(s):this.renderTextbox(s),document.getElementById(s.id+"_content_html_element")?this.updateTextboxFormDesignerProperties(s):this.updateFormFieldPropertiesInCollections(s))}}this.multilineCheckboxCheckedState=!1;var a=Wh(t.wrapper.children[0]).topLeft;this.updateFormDesignerFieldInSessionStorage(a,t.wrapper.children[0],t.formFieldAnnotationType,t);break;case"Checkbox":this.updateCheckboxFormDesignerProperties(t);var r=Wh(t.wrapper.children[0]).topLeft;this.updateFormDesignerFieldInSessionStorage(r,t.wrapper.children[0],t.formFieldAnnotationType,t);break;case"RadioButton":this.updateRadioButtonDesignerProperties(t);var l=Wh(t.wrapper.children[0]).topLeft;this.updateFormDesignerFieldInSessionStorage(l,t.wrapper.children[0],t.formFieldAnnotationType,t);break;case"SignatureField":case"InitialField":this.updateSignatureTextboxProperties(t);var d=Wh(t.wrapper.children[0]).topLeft;this.updateFormDesignerFieldInSessionStorage(d,t.wrapper.children[0],t.formFieldAnnotationType,t);break;case"DropdownList":this.updateDropdownFormDesignerProperties(t);var h=Wh(t.wrapper.children[0]).topLeft;this.updateFormDesignerFieldInSessionStorage(h,t.wrapper.children[0],t.formFieldAnnotationType,t);break;case"ListBox":this.updateListBoxFormDesignerProperties(t);var p=Wh(t.wrapper.children[0]).topLeft;this.updateFormDesignerFieldInSessionStorage(p,t.wrapper.children[0],t.formFieldAnnotationType,t)}this.updateFormFieldCollections(t);var c=qs(t);this.pdfViewer.annotation&&this.pdfViewer.annotation.addAction(this.pdfViewerBase.currentPageNumber,null,t,"FormDesigner Properties Change","",i,c)}this.propertiesDialog.hide()},e.prototype.updateFormFieldPropertiesInCollections=function(e){for(var t=this.pdfViewer.formFieldCollections,i=0;i<t.length;i++){var n=t[i];if(n.id===e.id&&n.name===e.name){this.formFieldName&&this.formFieldName.value&&(n.name=this.formFieldName.value),this.formFieldValue&&e.value!==this.formFieldValue.value&&(n.value=this.formFieldValue.value),this.formFieldAlign&&e.alignment!==this.formFieldAlign&&(n.alignment=this.formFieldAlign),this.formFieldPrinting&&e.isPrint!==this.formFieldPrinting.checked&&(n.isPrint=this.formFieldPrinting.checked),this.formFieldTooltip&&e.tooltip!==this.formFieldTooltip.value&&(n.tooltip=this.formFieldTooltip.value),this.formFieldVisibility&&e.visibility!==this.formFieldVisibility.value&&(n.visibility=this.formFieldVisibility),this.formFieldFontFamily&&this.formFieldFontFamily.value&&(n.fontFamily=this.formFieldFontFamily.value),this.formFieldFontSize&&this.formFieldFontSize.value&&(n.fontSize=parseInt(this.formFieldFontSize.value.toString())),this.fontColorValue&&e.color!==this.fontColorValue&&(n.color=this.fontColorValue),this.backgroundColorValue&&e.backgroundColor!==this.backgroundColorValue&&(n.backgroundColor=this.backgroundColorValue),this.borderColorValue&&e.borderColor!==this.borderColorValue&&(n.borderColor=this.borderColorValue),this.formFieldBorderWidth&&e.thickness!==parseInt(this.formFieldBorderWidth)&&(n.thickness=parseInt(this.formFieldBorderWidth)),this.formFieldReadOnly&&e.isReadonly!==this.formFieldReadOnly.checked&&(n.isReadOnly=this.formFieldReadOnly.checked),this.formFieldRequired&&e.isRequired!==this.formFieldRequired.checked&&(n.isRequired=this.formFieldRequired.checked),0!==i&&i<this.pdfViewer.formFieldCollection.length?n.fontStyle=this.pdfViewer.formFieldCollection[i-1].fontStyle:n.fontStyle=this.pdfViewer.formFieldCollection[i+1].fontStyle;var o=this.pdfViewer.formFieldCollections.findIndex((function(t){return t.id===e.id}));this.pdfViewer.formFieldCollections[o]=n}}},e.prototype.checkTextboxName=function(e){for(var t=[],i=0;i<this.pdfViewer.formFieldCollection.length;i++){var n=this.pdfViewer.formFieldCollection[i];n.name===e.name&&"Textbox"===n.formFieldAnnotationType&&t.push(n)}return t},e.prototype.renderMultilineText=function(e,t){t?this.reRenderMultilineTextbox(e,"e-pv-formfield-input"):this.addMultilineTextbox(e,"e-pv-formfield-input",!0)},e.prototype.renderTextbox=function(e,t){t?this.reRenderMultilineTextbox(e,"e-pv-formfield-textarea"):this.addMultilineTextbox(e,"e-pv-formfield-textarea",!1)},e.prototype.addMultilineTextbox=function(e,t,i){var n=e.wrapper.children[0];if(e.isMultiline=i,document.getElementById(n.id+"_html_element")){var o=document.getElementById(n.id+"_html_element").children[0],s=o.children[0].id;if(document.getElementById(o.children[0].id).remove(),-1!==t.indexOf("e-pv-formfield-textarea")){var a=this.createTextboxElement(s);n.template=o.appendChild(a)}else{var r=this.createTextAreaElement(s);n.template=o.appendChild(r)}var l=this.getFormFiledIndex(e.id.split("_")[0]);this.pdfViewerBase.formFieldCollection[l].FormField.isMultiline=e.isMultiline,this.pdfViewer.nameTable[e.id.split("_")[0]].isMultiline=e.isMultiline}},e.prototype.reRenderMultilineTextbox=function(e,t){var i=document.getElementById(e.id+"_content_html_element");if(i){var n=i.firstElementChild.firstElementChild,o=n.id;if(n.remove(),-1!==t.indexOf("e-pv-formfield-textarea")){var s=this.createTextboxElement(o);i.firstElementChild.appendChild(s)}else{s=this.createTextAreaElement(o);i.firstElementChild.appendChild(s)}}},e.prototype.createTextAreaElement=function(e){var t=we("textarea");return t.id=e,t.className="e-pv-formfield-textarea",t.style.width="100%",t.style.height="100%",t.style.borderStyle="solid",t.addEventListener("click",this.inputElementClick.bind(this)),t.addEventListener("change",this.getTextboxValue.bind(this)),t},e.prototype.createTextboxElement=function(e){var t=we("input");return t.id=e,t.type="text",t.className="e-pv-formfield-input",t.autocomplete="off",t.style.width="100%",t.style.height="100%",t.style.position="absolute",t.style.borderStyle="solid",t.addEventListener("click",this.inputElementClick.bind(this)),t.addEventListener("change",this.getTextboxValue.bind(this)),t.addEventListener("focus",this.focusFormFields.bind(this)),t.addEventListener("blur",this.blurFormFields.bind(this)),t},e.prototype.updateFormFieldCollections=function(e){var t={id:e.id.split("_")[0],name:e.name,value:e.value,type:e.type?e.type:e.formFieldAnnotationType,isReadOnly:e.isReadonly,fontFamily:e.fontFamily,isMultiline:e.isMultiline,fontSize:e.fontSize,fontStyle:e.fontStyle,color:e.color?e.color:this.getRgbToHex(e.fontColor),backgroundColor:"string"===typeof e.backgroundColor?e.backgroundColor:this.getRgbToHex(e.backgroundColor),alignment:e.alignment?e.alignment:e.textAlign,visibility:e.visibility,maxLength:e.maxLength,isRequired:e.isRequired,isPrint:e.isPrint,isSelected:e.isSelected,isChecked:e.isChecked,tooltip:e.tooltip,bounds:e.bounds?e.bounds:e.lineBound,thickness:e.thickness,borderColor:"string"===typeof e.borderColor?e.borderColor:this.getRgbToHex(e.borderColor),pageIndex:m(e.pageNumber)?e.pageIndex:e.pageNumber-1};this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.findIndex((function(e){return e.id===t.id}))]=t},e.prototype.getRgbToHex=function(e){return"#"+this.hex(e.r)+this.hex(e.g)+this.hex(e.b)},e.prototype.updateDropdownFormDesignerProperties=function(e,t){var i=document.getElementById(e.id+"_content_html_element").firstElementChild.firstElementChild;if(this.pdfViewer.designerMode||t){var n=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),o=JSON.parse(n),s=this.getFormFiledIndex(e.id.split("_")[0]);e.options=this.createDropdownDataSource(e),this.updateDropDownListDataSource(e,i),e.selectedIndex=[],s>-1&&(o[s].FormField.option=e.options,this.pdfViewerBase.formFieldCollection[s].FormField.option=e.options,!m(e.options)&&e.options.length>0&&(o[s]&&o[s].FormField.value?e.selectedIndex.push(e.options.findIndex((function(e){return e.itemValue===o[s].FormField.value}))):e.selectedIndex.push(0))),this.pdfViewer.nameTable[e.id.split("_")[0]].options=e.options,(this.formFieldName&&this.formFieldName.value||t)&&this.updateNamePropertyChange(e,i,t,s,o),(this.formFieldValue&&o[s]&&o[s].FormField.value||t)&&this.updateValuePropertyChange(e,i,t,s,o),(this.formFieldPrinting||t)&&this.updateIsPrintPropertyChange(e,t,s,o),(this.formFieldTooltip||t)&&this.updateTooltipPropertyChange(e,i,t,s,o),(this.formFieldVisibility||t)&&this.updateVisibilityPropertyChange(e,i,t,s,o),(this.formFieldFontFamily&&this.formFieldFontFamily.value||t)&&this.updateFontFamilyPropertyChange(e,i,t,s,o),(this.formFieldFontSize&&this.formFieldFontSize.value||t)&&this.updateFontSizePropertyChange(e,i,t,s,o),this.updateFontStylePropertyChange(e,i,t,s,o),(this.formFieldAlign||t)&&this.updateAlignmentPropertyChange(e,i,t,s,o),(this.fontColorValue||t)&&this.updateColorPropertyChange(e,i,t,s,o),(this.backgroundColorValue||t)&&this.updateBackgroundColorPropertyChange(e,i,t,s,o),(this.borderColorValue||t)&&this.updateBorderColorPropertyChange(e,i,t,s,o),m(this.formFieldBorderWidth)&&!t||this.updateBorderThicknessPropertyChange(e,i,t,s,o),(this.formFieldReadOnly||t)&&this.updateIsReadOnlyPropertyChange(e,i,t,s,o),(this.formFieldRequired||t)&&this.updateIsRequiredPropertyChange(e,i,t,s,o)}t&&this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")},e.prototype.updateListBoxFormDesignerProperties=function(e,t){var i=document.getElementById(e.id+"_content_html_element").firstElementChild.firstElementChild;if(this.pdfViewer.designerMode||t){var n=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),o=JSON.parse(n),s=this.getFormFiledIndex(e.id.split("_")[0]);e.options=this.createDropdownDataSource(e),this.updateDropDownListDataSource(e,i),e.selectedIndex=[],s>-1&&(o[s].FormField.option=e.options,this.pdfViewerBase.formFieldCollection[s].FormField.option=e.options,!m(e.options)&&e.options.length>0&&(o[s]&&o[s].FormField.value?e.selectedIndex.push(e.options.findIndex((function(e){return e.itemValue===o[s].FormField.value}))):e.selectedIndex.push(0))),this.pdfViewer.nameTable[e.id.split("_")[0]].options=e.options,(this.formFieldName&&this.formFieldName.value||t)&&this.updateNamePropertyChange(e,i,t,s,o),(this.formFieldPrinting||t)&&this.updateIsPrintPropertyChange(e,t,s,o),(this.formFieldTooltip||t)&&this.updateTooltipPropertyChange(e,i,t,s,o),(this.formFieldVisibility||t)&&this.updateVisibilityPropertyChange(e,i,t,s,o),(this.formFieldFontFamily&&this.formFieldFontFamily.value||t)&&this.updateFontFamilyPropertyChange(e,i,t,s,o),(this.formFieldFontSize&&this.formFieldFontSize.value||t)&&this.updateFontSizePropertyChange(e,i,t,s,o),this.updateFontStylePropertyChange(e,i,t,s,o),(this.formFieldAlign||t)&&this.updateAlignmentPropertyChange(e,i,t,s,o),(this.fontColorValue||t)&&this.updateColorPropertyChange(e,i,t,s,o),(this.backgroundColorValue||t)&&this.updateBackgroundColorPropertyChange(e,i,t,s,o),(this.borderColorValue||t)&&this.updateBorderColorPropertyChange(e,i,t,s,o),m(this.formFieldBorderWidth)&&!t||this.updateBorderThicknessPropertyChange(e,i,t,s,o),(this.formFieldReadOnly||t)&&this.updateIsReadOnlyPropertyChange(e,i,t,s,o),(this.formFieldRequired||t)&&this.updateIsRequiredPropertyChange(e,i,t,s,o)}t&&this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")},e.prototype.updateDropDownListDataSource=function(e,t){for(;t.firstChild;)t.firstChild.remove();for(var i=0;i<e.options.length;i++){var n=document.createElement("option");n.className="e-pv-formfield-dropdown",n.value=e.options[i].itemValue,n.text=e.options[i].itemName,t.appendChild(n)}},e.prototype.createDropdownDataSource=function(e){var t=document.getElementById(this.pdfViewer.element.id+"_ul_list_item");if(this.formFieldListItemDataSource=[],t&&t.children&&t.children.length>0)for(var i=0;i<t.children.length;i++){var n=t.children[i];this.formFieldListItemDataSource.push({itemName:n.innerHTML,itemValue:n.innerHTML})}else e&&e.options.length>0&&(this.formFieldListItemDataSource=e.options);return this.formFieldListItemDataSource},e.prototype.updateSignatureTextboxProperties=function(e,t){var i=document.getElementById(e.id+"_content_html_element").firstElementChild.firstElementChild,n=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),o=JSON.parse(n),s=this.getFormFiledIndex(e.id.split("_")[0]);(this.pdfViewer.designerMode||t)&&((this.formFieldName&&this.formFieldName.value||t)&&this.updateNamePropertyChange(e,i,t,s,o),(this.formFieldPrinting||t)&&this.updateIsPrintPropertyChange(e,t,s,o),(this.formFieldTooltip||t)&&this.updateTooltipPropertyChange(e,i,t,s,o),m(this.formFieldBorderWidth)&&!t||this.updateBorderThicknessPropertyChange(e,i,t,s,o),(this.formFieldVisibility||t)&&this.updateVisibilityPropertyChange(e,i,t,s,o),(this.formFieldReadOnly||t)&&this.updateIsReadOnlyPropertyChange(e,i,t,s,o),(this.formFieldRequired||t)&&this.updateIsRequiredPropertyChange(e,i,t,s,o)),t&&this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")},e.prototype.updateCheckboxFormDesignerProperties=function(e,t){var i=document.getElementById(e.id+"_content_html_element").firstElementChild.firstElementChild.lastElementChild,n=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),o=JSON.parse(n),s=this.getFormFiledIndex(e.id.split("_")[0]);(this.formFieldName&&this.formFieldName.value||t)&&this.updateNamePropertyChange(e,i,t,s,o),(this.backgroundColorValue||t)&&this.updateBackgroundColorPropertyChange(e,i,t,s,o),(this.borderColorValue||t)&&this.updateBorderColorPropertyChange(e,i,t,s,o),m(this.formFieldBorderWidth)&&!t||this.updateBorderThicknessPropertyChange(e,i,t,s,o),this.formFieldChecked&&(this.checkboxCheckedState=this.formFieldChecked.checked),(this.formFieldPrinting||t)&&this.updateIsPrintPropertyChange(e,t,s,o),(this.formFieldTooltip||t)&&this.updateTooltipPropertyChange(e,i,t,s,o),(this.formFieldVisibility||t)&&this.updateVisibilityPropertyChange(e,i,t,s,o),(void 0!=this.checkboxCheckedState||t)&&this.updateIsCheckedPropertyChange(e,i,t,s,o),(this.pdfViewer.designerMode&&this.borderColorValue||t)&&this.updateBorderColorPropertyChange(e,i,t,s,o),(this.pdfViewer.designerMode&&this.formFieldBorderWidth||t)&&this.updateBorderThicknessPropertyChange(e,i,t,s,o),(this.formFieldReadOnly||t)&&this.updateIsReadOnlyPropertyChange(e,i,t,s,o),(this.formFieldRequired||t)&&this.updateIsRequiredPropertyChange(e,i,t,s,o),t&&this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")},e.prototype.updateRadioButtonDesignerProperties=function(e,t){var i=document.getElementById(e.id+"_content_html_element").firstElementChild.firstElementChild.firstElementChild,n=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),o=JSON.parse(n),s=this.getFormFiledIndex(e.id.split("_")[0]);if((this.formFieldName&&this.formFieldName.value||t)&&this.updateNamePropertyChange(e,i,t,s,o),this.formFieldChecked&&(this.checkboxCheckedState=this.formFieldChecked.checked),(this.formFieldPrinting||t)&&this.updateIsPrintPropertyChange(e,t,s,o),(this.formFieldTooltip||t)&&this.updateTooltipPropertyChange(e,i,t,s,o),(this.formFieldVisibility||t)&&this.updateVisibilityPropertyChange(e,i,t,s,o),(this.pdfViewer.designerMode&&!m(this.formFieldBorderWidth)||t)&&this.updateBorderThicknessPropertyChange(e,i,t,s,o),(this.backgroundColorValue||t)&&this.updateBackgroundColorPropertyChange(e,i,t,s,o),(this.borderColorValue||t)&&this.updateBorderColorPropertyChange(e,i,t,s,o),(void 0!=this.checkboxCheckedState||t)&&this.updateIsSelectedPropertyChange(e,i,t,s,o),(this.formFieldReadOnly||t)&&this.updateIsReadOnlyPropertyChange(e,i,t,s,o),(this.formFieldRequired||t)&&this.updateIsRequiredPropertyChange(e,i,t,s,o),t){var a=this.pdfViewer.nameTable[e.id.split("_")[0]],r=Wh(a.wrapper.children[0]).topLeft;this.updateFormDesignerFieldInSessionStorage(r,a.wrapper.children[0],a.formFieldAnnotationType,a)}},e.prototype.updateTextboxFormDesignerProperties=function(e,t){var i,n,o=document.getElementById(e.id+"_content_html_element").firstElementChild.firstElementChild,s=!1,a=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner"),r=JSON.parse(a),l=this.getFormFiledIndex(e.id.split("_")[0]);if(this.pdfViewer.designerMode||t){if((this.formFieldName&&this.formFieldName.value||t)&&this.updateNamePropertyChange(e,o,t,l,r),(this.formFieldValue||t)&&this.updateValuePropertyChange(e,o,t,l,r),(this.formFieldPrinting||t)&&this.updateIsPrintPropertyChange(e,t,l,r),(this.formFieldTooltip||t)&&this.updateTooltipPropertyChange(e,o,t,l,r),(this.formFieldVisibility||t)&&this.updateVisibilityPropertyChange(e,o,t,l,r),(this.formFieldFontFamily&&this.formFieldFontFamily.value||t)&&this.updateFontFamilyPropertyChange(e,o,t,l,r),(this.formFieldFontSize&&this.formFieldFontSize.value||t)&&this.updateFontSizePropertyChange(e,o,t,l,r),this.updateFontStylePropertyChange(e,o,t,l,r),(this.formFieldAlign||t||this.multilineCheckboxCheckedState)&&this.updateAlignmentPropertyChange(e,o,t,l,r),this.maxLengthItem||t){this.maxLengthItem&&e.maxLength!==this.maxLengthItem.value&&(s=!0,i=e.maxLength,n=this.maxLengthItem.value);var d=0===this.maxLengthItem.value?524288:this.maxLengthItem.value;t&&0!==e.maxLength?o.maxLength=e.maxLength:(o.maxLength=d,e.maxLength=this.maxLengthItem.value),l>-1&&(r[l].FormField.maxLength=e.maxLength,this.pdfViewerBase.formFieldCollection[l].FormField.maxLength=e.maxLength),this.pdfViewer.nameTable[e.id.split("_")[0]].maxLength=e.maxLength,s&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,s,!1,!1,!1,i,n)}(this.fontColorValue||t||this.multilineCheckboxCheckedState)&&this.updateColorPropertyChange(e,o,t,l,r),(this.backgroundColorValue||t||this.multilineCheckboxCheckedState)&&this.updateBackgroundColorPropertyChange(e,o,t,l,r),(this.borderColorValue||t||this.multilineCheckboxCheckedState)&&this.updateBorderColorPropertyChange(e,o,t,l,r),m(this.formFieldBorderWidth)&&!t||this.updateBorderThicknessPropertyChange(e,o,t,l,r),(this.formFieldReadOnly||t)&&this.updateIsReadOnlyPropertyChange(e,o,t,l,r),(this.formFieldRequired||t)&&this.updateIsRequiredPropertyChange(e,o,t,l,r)}this.pdfViewer.designerMode||this.formFieldVisibility&&this.formFieldVisibility.value&&(e.visibility=this.formFieldVisibility.value,document.getElementById(e.id+"_content_html_element").firstElementChild.firstElementChild.style.visibility=e.visibility);this.updateFormFieldCollections(e),t&&this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")},e.prototype.updateIsCheckedPropertyChange=function(e,t,i,n,o){if(this.pdfViewer.designerMode||i){var s=!1,a=void 0,r=void 0;e.isChecked!==this.checkboxCheckedState&&(s=!0,a=e.isChecked,r=this.checkboxCheckedState),i||(e.isChecked=this.checkboxCheckedState),n>-1&&(o[n].FormField.isChecked=e.isChecked,this.pdfViewerBase.formFieldCollection[n].FormField.isChecked=e.isChecked),this.pdfViewer.nameTable[e.id.split("_")[0]].isChecked=e.isChecked,s&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,s,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,a,r)}if(!this.pdfViewer.designerMode||i){var l=document.getElementById(e.id+"_input").firstElementChild;e.isChecked?(l.classList.contains("e-pv-cb-unchecked")&&l.classList.remove("e-pv-cb-unchecked"),l.classList.add("e-pv-cb-checked")):(l.classList.contains("e-pv-cb-checked")&&l.classList.remove("e-pv-cb-checked"),l.classList.add("e-pv-cb-unchecked"))}},e.prototype.updateIsSelectedPropertyChange=function(e,t,i,n,o){if(this.pdfViewer.designerMode||i){var s=!1,a=void 0,r=void 0;if(e.isSelected!==this.checkboxCheckedState&&(s=!0,a=e.isSelected,r=this.checkboxCheckedState),i||(e.isSelected=this.checkboxCheckedState),n>-1){o[n].FormField.isSelected=e.isSelected,this.pdfViewerBase.formFieldCollection[n].FormField.isSelected=e.isSelected;for(var l=0;l<o[n].FormField.radiobuttonItem.length;l++)o[n].FormField.radiobuttonItem[l].id.split("_")[0]===e.id.split("_")[0]&&(o[n].FormField.radiobuttonItem[l].isSelected=e.isSelected,this.pdfViewerBase.formFieldCollection[n].FormField.radiobuttonItem[l].isSelected=e.isSelected)}this.pdfViewer.nameTable[e.id.split("_")[0]].isSelected=e.isSelected,s&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,s,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,a,r)}if(!this.pdfViewer.designerMode||i){if(t.checked=e.isSelected,n>-1){o[n].FormField.isSelected=e.isSelected,this.pdfViewerBase.formFieldCollection[n].FormField.isSelected=e.isSelected;for(l=0;l<o[n].FormField.radiobuttonItem.length;l++)o[n].FormField.radiobuttonItem[l].id.split("_")[0]===e.id.split("_")[0]&&(o[n].FormField.radiobuttonItem[l].isSelected=e.isSelected,this.pdfViewerBase.formFieldCollection[n].FormField.radiobuttonItem[l].isSelected=e.isSelected)}this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner"),this.pdfViewer.nameTable[e.id.split("_")[0]].isSelected=e.isSelected}},e.prototype.updateValuePropertyChange=function(e,t,i,n,o){var s,a,r=!1;"DropdownList"!==e.formFieldAnnotationType&&this.formFieldValue&&e.value!==this.formFieldValue.value?(r=!0,s=e.value,a=this.formFieldValue.value):"DropdownList"===e.formFieldAnnotationType&&this.formFieldValue&&e.value!==o[n].FormField.value&&(r=!0,s=e.value,a=o[n].FormField.value),i?t.value=e.value:("DropdownList"===e.formFieldAnnotationType?e.value=o[n].FormField.value:e.value=this.formFieldValue.value,"DropdownList"===e.formFieldAnnotationType?t.value=o[n].FormField.value:t.value=this.formFieldValue.value),n>-1&&(o[n].FormField.value=e.value,this.pdfViewerBase.formFieldCollection[n].FormField.value=e.value),this.pdfViewer.nameTable[e.id.split("_")[0]].value=e.value,r&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,r,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,s,a)},e.prototype.updateFontStylePropertyChange=function(e,t,i,n,o){var s,a,r,l=this.updateFontStyle(t,e,i,n,o);s=l[0],a=l[1],r=l[2],n>-1&&(o[n].FormField.fontStyle=e.fontStyle,this.pdfViewerBase.formFieldCollection[n].FormField.fontStyle=e.fontStyle),this.pdfViewer.nameTable[e.id.split("_")[0]].fontStyle=e.fontStyle,s&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,s,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,a,r)},e.prototype.updateBorderThicknessPropertyChange=function(e,t,i,n,o){var s,a,r=!1,l=parseInt(this.formFieldBorderWidth);e.thickness!==l&&(r=!0,s=e.thickness,a=l||e.thickness),i?t.style.borderWidth=e.thickness.toString():(t.style.borderWidth=this.formFieldBorderWidth?this.formFieldBorderWidth+"px":e.thickness+"px",e.thickness=l),n>-1&&(o[n].FormField.thickness=e.thickness,this.pdfViewerBase.formFieldCollection[n].FormField.thickness=e.thickness),this.pdfViewer.nameTable[e.id.split("_")[0]].thickness=e.thickness,r&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,r,!1,!1,!1,!1,!1,!1,!1,s,a)},e.prototype.updateBorderColorPropertyChange=function(e,t,i,n,o){var s,a,r=!1;e.borderColor!==this.borderColorValue&&(r=!0,s=e.borderColor,a=this.borderColorValue?this.borderColorValue:e.borderColor),i?t.style.borderColor=e.borderColor:(t.style.borderColor=this.borderColorValue?this.borderColorValue:e.borderColor,e.borderColor=this.borderColorValue?this.borderColorValue:e.borderColor),"RadioButton"==e.formFieldAnnotationType&&(t.parentElement.style.boxShadow=this.borderColorValue+" 0px 0px 0px "+e.thickness+"px"),n>-1&&(o[n].FormField.borderColor=this.getRgbCode(e.borderColor),this.pdfViewerBase.formFieldCollection[n].FormField.borderColor=this.getRgbCode(e.borderColor)),this.pdfViewer.nameTable[e.id.split("_")[0]].borderColor=e.borderColor,r&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,r,!1,!1,!1,!1,!1,!1,!1,!1,s,a)},e.prototype.updateBackgroundColorPropertyChange=function(e,t,i,n,o){var s,a,r=!1;e.backgroundColor!==this.backgroundColorValue&&(r=!0,s=e.backgroundColor,a=this.backgroundColorValue?this.backgroundColorValue:e.backgroundColor),i?"RadioButton"==e.formFieldAnnotationType?t.parentElement.style.background=e.backgroundColor:t.style.background=e.backgroundColor:("RadioButton"==e.formFieldAnnotationType?t.parentElement.style.background=this.backgroundColorValue?this.backgroundColorValue:e.backgroundColor:t.style.background=this.backgroundColorValue?this.backgroundColorValue:e.backgroundColor,e.backgroundColor=this.backgroundColorValue?this.backgroundColorValue:e.backgroundColor),n>-1&&(o[n].FormField.backgroundColor=this.getRgbCode(e.backgroundColor),this.pdfViewerBase.formFieldCollection[n].FormField.backgroundColor=this.getRgbCode(e.backgroundColor)),this.pdfViewer.nameTable[e.id.split("_")[0]].backgroundColor=e.backgroundColor,r&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,r,!1,!1,!1,!1,!1,!1,!1,!1,!1,s,a)},e.prototype.updateColorPropertyChange=function(e,t,i,n,o){var s,a,r=!1;e.color!==this.fontColorValue&&(r=!0,s=e.color,a=this.fontColorValue?this.fontColorValue:e.color),i?t.style.color=e.color:(t.style.color=this.fontColorValue?this.fontColorValue:e.color,e.color=this.fontColorValue?this.fontColorValue:e.color),n>-1&&(o[n].FormField.color=this.getRgbCode(e.color),this.pdfViewerBase.formFieldCollection[n].FormField.color=this.getRgbCode(e.color)),this.pdfViewer.nameTable[e.id.split("_")[0]].color=e.color,r&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,r,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,s,a)},e.prototype.updateAlignmentPropertyChange=function(e,t,i,n,o){var s,a,r=!1;if(e.alignment!==this.formFieldAlign&&(r=!0,s=e.alignment,a=this.formFieldAlign?this.formFieldAlign:e.alignment),i){if(t.style.textAlign=e.alignment,("ListBox"==e.formFieldAnnotationType||"DropdownList"==e.formFieldAnnotationType)&&t.children.length>0){t.style.textAlignLast=e.alignment;for(var l=0;l<t.children.length;l++){(d=t.children[l]).style.textAlignLast=e.alignment,d.style.textAlign=e.alignment}}}else if(t.style.textAlign=this.formFieldAlign?this.formFieldAlign:e.alignment,e.alignment=this.formFieldAlign?this.formFieldAlign:e.alignment,("ListBox"==e.formFieldAnnotationType||"DropdownList"==e.formFieldAnnotationType)&&t.children.length>0){t.style.textAlignLast=this.formFieldAlign?this.formFieldAlign:e.alignment;for(l=0;l<t.children.length;l++){var d;(d=t.children[l]).style.textAlignLast=this.formFieldAlign?this.formFieldAlign:e.alignment,d.style.textAlign=this.formFieldAlign?this.formFieldAlign:e.alignment}}n>-1&&(o[n].FormField.alignment=e.alignment,this.pdfViewerBase.formFieldCollection[n].FormField.alignment=e.alignment),this.pdfViewer.nameTable[e.id.split("_")[0]].alignment=e.alignment,r&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,!1,r,!1,!1,!1,!1,!1,!1,s,a)},e.prototype.updateFontSizePropertyChange=function(e,t,i,n,o){var s,a,r=!1,l=this.pdfViewerBase.getZoomFactor(),d=this.formFieldFontSize?parseInt(this.formFieldFontSize.value.toString()):null;parseInt(e.fontSize)!==d&&(r=!0,s=e.fontSize,a=d),i?t.style.fontSize=e.fontSize*l+"px".toString():(e.fontSize=d,t.style.fontSize=parseInt(this.formFieldFontSize.value.toString())*l+"px"),n>-1&&(o[n].FormField.fontSize=e.fontSize,this.pdfViewerBase.formFieldCollection[n].FormField.fontSize=e.fontSize),this.pdfViewer.nameTable[e.id.split("_")[0]].fontSize=e.fontSize,r&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,r,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,s,a)},e.prototype.updateFontFamilyPropertyChange=function(e,t,i,n,o){var s,a,r=!1,l=this.formFieldFontFamily?this.formFieldFontFamily.value.toString():"";e.fontFamily!==l&&(r=!0,s=e.fontFamily,a=l),i?t.style.fontFamily=e.fontFamily:(e.fontFamily=l,t.style.fontFamily=l),n>-1&&(o[n].FormField.fontFamily=e.fontFamily,this.pdfViewerBase.formFieldCollection[n].FormField.fontFamily=e.fontFamily),this.pdfViewer.nameTable[e.id.split("_")[0]].fontFamily=e.fontFamily,r&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,r,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,s,a)},e.prototype.updateVisibilityPropertyChange=function(e,t,i,n,o){var s,a,r=!1;if(this.formFieldVisibility&&e.visibility!==this.formFieldVisibility.value&&(r=!0,s=e.visibility,a=this.formFieldVisibility.value),i||(e.visibility=this.formFieldVisibility.value),t.style.visibility=e.visibility,"RadioButton"===e.formFieldAnnotationType&&(t.parentElement.style.visibility=e.visibility),"SignatureField"===e.formFieldAnnotationType||"InitialField"===e.formFieldAnnotationType){var l=document.getElementById(e.id+"_content_html_element").firstElementChild.children[1];l.style.visibility=e.visibility,l.parentElement.style.visibility=e.visibility;var d=this.pdfViewer.nameTable[e.id.split("_")[0]+"_content"];"hidden"===e.visibility?d&&this.hideSignatureValue(e,d,n,o):d&&this.showSignatureValue(e,s,d,n,o)}n>-1&&(o[n].FormField.visibility=e.visibility,this.pdfViewerBase.formFieldCollection[n].FormField.visibility=e.visibility),this.pdfViewer.nameTable[e.id.split("_")[0]].visibility=e.visibility,r&&(this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner"),this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,r,!1,!1,!1,!1,s,a))},e.prototype.hideSignatureValue=function(e,t,i,n){e.wrapper.children.splice(e.wrapper.children.indexOf(t.wrapper.children[0]),1),e.value="",e.signatureType="",n[i].FormField.value="",n[i].FormField.signatureType="",this.pdfViewerBase.formFieldCollection[i].FormField.value="",this.pdfViewerBase.formFieldCollection[i].FormField.signatureType="",this.pdfViewer.remove(t),this.pdfViewer.renderDrawing()},e.prototype.showSignatureValue=function(e,t,i,n,o){if("SignatureText"===i.shapeAnnotationType)e.value=i.data,e.signatureType="Text",o[n].FormField.signatureType="Text",o[n].FormField.value=i.data,this.pdfViewerBase.formFieldCollection[n].FormField.value=i.data,this.pdfViewerBase.formFieldCollection[n].FormField.signatureType="Text";else if("SignatureImage"===i.shapeAnnotationType)e.value=i.data,e.signatureType="Image",o[n].FormField.signatureType="Image",o[n].FormField.value=i.data,this.pdfViewerBase.formFieldCollection[n].FormField.value=i.data,this.pdfViewerBase.formFieldCollection[n].FormField.signatureType="Image";else{o[n].FormField.signatureType="Path",e.signatureType="Path",this.pdfViewerBase.formFieldCollection[n].FormField.signatureType="Path";var s=os(es(i.data));e.value=JSON.stringify(s),o[n].FormField.value=JSON.stringify(s),this.pdfViewerBase.formFieldCollection[n].FormField.value=JSON.stringify(s)}if(e.signatureBound=i.signatureBound,"hidden"===t){this.pdfViewer.add(i),e.wrapper.children.push(i.wrapper);var a=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+e.pageIndex);this.pdfViewer.renderDrawing(a,e.pageIndex)}this.pdfViewer.renderDrawing()},e.prototype.updateTooltipPropertyChange=function(e,t,i,n,o){var s,a,r=!1;this.formFieldTooltip&&e.tooltip!==this.formFieldTooltip.value&&(r=!0,s=e.tooltip,a=this.formFieldTooltip.value),i?(this.formFieldTooltip=new Vs,this.formFieldTooltip.value=e.tooltip):e.tooltip=this.formFieldTooltip?this.formFieldTooltip.value:e.tooltip,n>-1&&(o[n].FormField.tooltip=e.tooltip,this.pdfViewerBase.formFieldCollection[n].FormField.tooltip=e.tooltip),this.pdfViewer.nameTable[e.id.split("_")[0]].tooltip=this.formFieldTooltip.value,m(this.formFieldTooltip.value)||""===this.formFieldTooltip.value||this.setToolTip(this.formFieldTooltip.value,"RadioButton"==e.formFieldAnnotationType||"DropdownList"==e.formFieldAnnotationType?t.parentElement:t),r&&(this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner"),this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,r,s,a))},e.prototype.updateNamePropertyChange=function(e,t,i,n,o){var s=document.getElementById(e.id+"_designer_name"),a=this.pdfViewerBase.getZoomFactor();if(s.style.fontSize=e.fontSize?e.fontSize*a+"px":10*a+"px",i||(e.name=this.formFieldName?this.formFieldName.value:e.name),s.innerHTML=e.name,n>-1&&(o[n].FormField.name!==e.name&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,null,null,!0,o[n].FormField.name),o[n].FormField.name=e.name,this.pdfViewerBase.formFieldCollection[n].FormField.name=e.name),t.name=e.name,this.pdfViewer.nameTable[e.id.split("_")[0]].name=e.name,"DropdownList"==e.formFieldAnnotationType||"ListBox"==e.formFieldAnnotationType)for(var r=0;r<this.pdfViewer.formFieldCollection.length;r++){var l=this.pdfViewer.formFieldCollection[r];if(("DropdownList"===l.formFieldAnnotationType||"ListBox"===l.formFieldAnnotationType)&&l.name===e.name&&l.id!==e.id){e.options=l.options,this.updateDropDownListDataSource(e,t);break}}},e.prototype.updateIsReadOnlyPropertyChange=function(e,t,i,n,o){var s,a,r=!1;this.formFieldReadOnly&&e.isReadonly!==this.formFieldReadOnly.checked&&(r=!0,s=e.isReadonly,a=this.formFieldReadOnly.checked),i?(this.formFieldReadOnly=new wa,this.formFieldReadOnly.checked=e.isReadonly):e.isReadonly=this.formFieldReadOnly.checked,n>-1&&(o[n].FormField.isReadonly=e.isReadonly,this.pdfViewerBase.formFieldCollection[n].FormField.isReadonly=e.isReadonly),this.pdfViewer.nameTable[e.id.split("_")[0]].isReadonly=e.isReadonly,this.setReadOnlyToElement(e,t,e.isReadonly),this.setReadOnlyToFormField(e,e.isReadonly),r&&(this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner"),this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,!1,!1,r,!1,!1,!1,!1,!1,s,a))},e.prototype.updateIsRequiredPropertyChange=function(e,t,i,n,o){var s,a,r=!1;if(this.formFieldRequired&&e.isRequired!==this.formFieldRequired.checked&&(r=!0,s=e.isRequired,a=this.formFieldRequired.checked),i?(this.formFieldRequired=new wa,this.formFieldRequired.checked=e.isRequired):e.isRequired=this.formFieldRequired.checked,n>-1&&(o[n].FormField.isRequired=e.isRequired,this.pdfViewerBase.formFieldCollection[n].FormField.isRequired=e.isRequired,this.pdfViewerBase.formFieldCollection[n].FormField.radiobuttonItem)){for(var l=0;l<this.pdfViewerBase.formFieldCollection[n].FormField.radiobuttonItem.length;l++)this.pdfViewerBase.formFieldCollection[n].FormField.radiobuttonItem[l].isRequired=e.isRequired,this.pdfViewer.nameTable[this.pdfViewerBase.formFieldCollection[n].FormField.radiobuttonItem[l].id.split("_")[0]].isRequired=e.isRequired;this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner")}this.pdfViewer.nameTable[e.id.split("_")[0]].isRequired=e.isRequired,this.setRequiredToElement(e,t,e.isRequired),this.setRequiredToFormField(e,e.isRequired),r&&(this.pdfViewerBase.setItemInSessionStorage(this.pdfViewerBase.formFieldCollection,"_formDesigner"),this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,r,!1,!1,s,a))},e.prototype.updateIsPrintPropertyChange=function(e,t,i,n){var o,s,a=!1;this.formFieldPrinting&&e.isPrint!==this.formFieldPrinting.checked&&(a=!0,o=e.isPrint,s=this.formFieldPrinting.checked),t?(this.formFieldPrinting=new wa,this.formFieldPrinting.checked=e.isPrint):e.isPrint=this.formFieldPrinting.checked,i>-1&&(n[i].FormField.isPrint=e.isPrint,this.pdfViewerBase.formFieldCollection[i].FormField.isPrint=e.isPrint),this.pdfViewer.nameTable[e.id.split("_")[0]].isPrint=e.isPrint,a&&this.updateFormFieldPropertiesChanges("formFieldPropertiesChange",e,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,a,!1,o,s)},e.prototype.getFormFiledIndex=function(e){if(null==this.pdfViewerBase.formFieldCollection||0==this.pdfViewerBase.formFieldCollection.length)return-1;var t=this.pdfViewerBase.formFieldCollection.findIndex((function(t){return t.Key.split("_")[0]===e}));if(t>-1)return t;for(var i=0;i<this.pdfViewerBase.formFieldCollection.length;i++)if("RadioButton"===this.pdfViewerBase.formFieldCollection[i].FormField.formFieldAnnotationType&&this.pdfViewerBase.formFieldCollection[i].FormField.radiobuttonItem)for(var n=0;n<this.pdfViewerBase.formFieldCollection[i].FormField.radiobuttonItem.length;n++)if(this.pdfViewerBase.formFieldCollection[i].FormField.radiobuttonItem[n].id.split("_")[0]===e)return i;return-1},e.prototype.updateFontStyle=function(e,t,i,n,o){var s=!1,a="",r="";return this.formFieldBold?("Bold"!==t.fontStyle&&(s=!0,a+=t.font.isBold?"Bold, ":""),i?t.font.isBold?this.setFontStyleValues(t,"Bold",this.formFieldBold,e,!0,"bold",n,o):this.setFontStyleValues(t,"None",this.formFieldBold,e,!1,"",n,o):"bold"===this.formFieldBold?this.setFontStyleValues(t,"Bold",this.formFieldBold,e,!0,"bold",n,o):this.setFontStyleValues(t,"None","bold",e,!1,"",n,o)):t.font.isBold&&this.setFontStyleValues(t,"None","bold",e,!1,"",n,o),r+=t.font.isBold?"Bold, ":"",this.formFieldItalic?("Italic"!==t.fontStyle&&(s=!0,a+=t.font.isItalic?"Italic, ":""),i?t.font.isItalic?this.setFontStyleValues(t,"Italic",this.formFieldItalic,e,!0,"italic",n,o):this.setFontStyleValues(t,"None",this.formFieldItalic,e,!1,"",n,o):"italic"===this.formFieldItalic?this.setFontStyleValues(t,"Italic",this.formFieldItalic,e,!0,"italic",n,o):this.setFontStyleValues(t,"None","italic",e,!1,"",n,o)):t.font.isItalic&&this.setFontStyleValues(t,"None","italic",e,!1,"",n,o),r+=t.font.isItalic?"Italic, ":"",this.formFieldUnderline?("Underline"!==t.fontStyle&&(s=!0,a+=t.font.isUnderline?"Underline, ":""),i?t.font.isUnderline?this.setFontStyleValues(t,"Underline",this.formFieldUnderline,e,!0,"underline",n,o):this.setFontStyleValues(t,"None",this.formFieldUnderline,e,!1,"",n,o):"underline"===this.formFieldUnderline?this.setFontStyleValues(t,"Underline",this.formFieldUnderline,e,!0,"underline",n,o):this.setFontStyleValues(t,"None","underline",e,!1,"",n,o)):t.font.isUnderline&&this.setFontStyleValues(t,"None","underline",e,!1,"",n,o),r+=t.font.isUnderline?"Underline, ":"",this.formFieldStrikeOut?("Strikethrough"!==t.fontStyle&&(s=!0,a+=t.font.isStrikeout?"Strikethrough, ":""),i?t.font.isStrikeout?this.setFontStyleValues(t,"Strikethrough",this.formFieldStrikeOut,e,!0,"line-through",n,o):this.setFontStyleValues(t,"None",this.formFieldStrikeOut,e,!1,"",n,o):"line-through"===this.formFieldStrikeOut?this.setFontStyleValues(t,"Strikethrough",this.formFieldStrikeOut,e,!0,"line-through",n,o):this.setFontStyleValues(t,"None","line-through",e,!1,"",n,o)):t.font.isStrikeout&&this.setFontStyleValues(t,"None","line-through",e,!1,"",n,o),[s,a,r+=t.font.isStrikeout?"Strikethrough, ":""]},e.prototype.setFontStyleValues=function(e,t,i,n,o,s,a,r){"bold"===i?(e.fontStyle=t,e.font.isBold=o,n.style.fontWeight=s,this.setDropdownFontStyleValue(n,i,s),a>-1&&(r[a].FormField.font.isBold=o,this.pdfViewerBase.formFieldCollection[a].FormField.font.isBold=o),this.pdfViewer.nameTable[e.id.split("_")[0]].font.isBold=o):"italic"===i?(n.style.fontStyle=s,this.setDropdownFontStyleValue(n,i,s),e.fontStyle=t,e.font.isItalic=o,a>-1&&(r[a].FormField.font.isItalic=o,this.pdfViewerBase.formFieldCollection[a].FormField.font.isItalic=o),this.pdfViewer.nameTable[e.id.split("_")[0]].font.isItalic=o):"underline"===i?(this.setDropdownFontStyleValue(n,i,s),n.style.textDecoration=s,e.fontStyle=t,e.font.isUnderline=o,a>-1&&(r[a].FormField.font.isUnderline=o,this.pdfViewerBase.formFieldCollection[a].FormField.font.isUnderline=o),this.pdfViewer.nameTable[e.id.split("_")[0]].font.isUnderline=o):"line-through"===i&&(this.setDropdownFontStyleValue(n,i,s),n.style.textDecoration=s,e.fontStyle=t,e.font.isStrikeout=o,a>-1&&(r[a].FormField.font.isStrikeout=o,this.pdfViewerBase.formFieldCollection[a].FormField.font.isStrikeout=o),this.pdfViewer.nameTable[e.id.split("_")[0]].font.isStrikeout=o)},e.prototype.setDropdownFontStyleValue=function(e,t,i){if(e.length>0)for(var n=0;n<e.length;n++)"bold"===t?e[n].style.fontWeight=i:"italic"===t?e[n].style.fontStyle=i:("underline"===t||"line-through"===t)&&(e[n].style.textDecoration=i)},e.prototype.updateFormFieldPropertiesChanges=function(e,t,i,n,o,s,a,r,l,d,h,p,c,u,f,m,g,y,v,w,b){var S={name:t.name,id:t.id,value:t.value,fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,color:t.color,backgroundColor:t.backgroundColor,alignment:t.alignment,isReadonly:t.isReadonly,visibility:t.visibility,maxLength:t.maxLength,isRequired:t.isRequired,isPrint:t.isPrint,rotation:t.rotateAngle,tooltip:t.tooltip,options:t.options,isChecked:t.isChecked,isSelected:t.isSelected,previousName:b,currentName:t.name};this.pdfViewer.fireFormFieldPropertiesChangeEvent("formFieldPropertiesChange",S,t.pageIndex,i,n,o,s,a,r,l,d,h,p,c,u,f,m,g,y,v,w)},e.prototype.onCancelClicked=function(e){this.propertiesDialog.hide()},e.prototype.createAppearanceTab=function(){var e=we("div",{id:this.pdfViewer.element.id+"_properties_appearance"});"DropdownList"!==this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType&&"ListBox"!==this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType?e.style.height="260px":e.style.height="336px";var t=we("div");t.className="e-pv-properties-header-spliter",e.appendChild(t);var i=we("div",{className:"e-pv-properties-tab-style-prop"});return e.appendChild(i),!this.pdfViewer.selectedItems||"ListBox"!==this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType&&"DropdownList"!==this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType?!this.pdfViewer.selectedItems||"SignatureField"!==this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType&&"InitialField"!==this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType?this.tabControl=new wl({items:[{header:{text:'<div class="e-pv-form-field-property-header-general"> '+this.pdfViewer.localeObj.getConstant("General")+"</div>"},content:this.createGeneralProperties()},{header:{text:'<div class="e-pv-form-field-property-header-general"> '+this.pdfViewer.localeObj.getConstant("Appearance")+"</div>"},content:this.createAppearanceProperties()}]},i):this.tabControl=new wl({items:[{header:{text:'<div class="e-pv-form-field-property-header-general"> '+this.pdfViewer.localeObj.getConstant("General")+"</div>"},content:this.createGeneralProperties()}]},i):this.tabControl=new wl({items:[{header:{text:'<div class="e-pv-form-field-property-header-general"> '+this.pdfViewer.localeObj.getConstant("General")+"</div>"},content:this.createGeneralProperties()},{header:{text:'<div class="e-pv-form-field-property-header-general"> '+this.pdfViewer.localeObj.getConstant("Appearance")+"</div>"},content:this.createAppearanceProperties()},{header:{text:'<div class="e-pv-form-field-property-header-general"> '+this.pdfViewer.localeObj.getConstant("Options")+"</div>"},content:this.createOptionProperties()}]},i),i.children[1].style.height="100%",e},e.prototype.createGeneralProperties=function(){var e=this.pdfViewer.selectedItems.formFields?this.pdfViewer.selectedItems.formFields[0]:null,t=we("div",{id:this.pdfViewer.element.id+"_general_prop_appearance"}),i=we("div",{className:"e-pv-properties-text-edit-prop"});t.appendChild(i);var n=we("div",{className:"e-pv-properties-form-field-name-main-div"}),o=we("div",{className:"e-pv-properties-name-edit-prop"}),s=we("input",{className:"e-pv-properties-name-edit-input e-input"});o.appendChild(s),n.appendChild(o),this.formFieldName=new Vs({type:"text",floatLabelType:"Always",placeholder:this.pdfViewer.localeObj.getConstant("Name"),value:e.name,cssClass:"e-pv-properties-formfield-name"},s),i.appendChild(n);var a=we("div",{className:"e-pv-properties-form-field-tooltip-main-div"}),r=we("div",{className:"e-pv-properties-tooltip-edit-prop"}),l=we("input",{className:"e-pv-properties-tooltip-prop-input e-input"});r.appendChild(l),a.appendChild(r),this.formFieldTooltip=new Vs({type:"text",floatLabelType:"Always",placeholder:this.pdfViewer.localeObj.getConstant("Tooltip"),value:e.tooltip,cssClass:"e-pv-properties-formfield-tooltip"},l),i.appendChild(a);var d=we("div",{className:"e-pv-properties-visibility-style-prop"});t.appendChild(d);var h=we("div",{className:"e-pv-properties-form-field-value-main-div"}),p=we("div",{className:"e-pv-properties-value-edit-prop"}),c=we("input",{className:"e-pv-properties-value-input e-input"});p.appendChild(c),h.appendChild(p),"PasswordField"==this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType?this.formFieldValue=new Vs({type:"password",floatLabelType:"Always",placeholder:this.pdfViewer.localeObj.getConstant("Value"),value:e.value,cssClass:"e-pv-properties-formfield-value"},c):this.formFieldValue=new Vs({type:"text",floatLabelType:"Always",placeholder:this.pdfViewer.localeObj.getConstant("Value"),value:e.value,cssClass:"e-pv-properties-formfield-value"},c),"Textbox"!==this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType&&"PasswordField"!==this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType&&(this.formFieldValue.enabled=!1,this.formFieldValue.value=""),d.appendChild(h);var u=we("div",{className:"e-pv-properties-form-field-visibility-main-div"}),f=we("div",{className:"e-pv-properties-visibility-edit-prop"}),m=we("input",{className:"e-pv-properties-formfield-visibility"});f.appendChild(m),u.appendChild(f);var g="visible"===e.visibility?0:1;this.formFieldVisibility=new Sf({dataSource:["visible","hidden"],floatLabelType:"Always",index:g,value:e.visibility,placeholder:this.pdfViewer.localeObj.getConstant("Form Field Visibility"),cssClass:"e-pv-properties-formfield-visibility"},m),d.appendChild(u);var y=we("div",{className:"e-pv-properties-checkbox-main-div-prop"}),v=we("input",{className:"e-pv-properties-checkbox-readonly-input e-input"});if(y.appendChild(v),this.formFieldReadOnly=new wa({label:this.pdfViewer.localeObj.getConstant("Read Only"),checked:e.isReadonly,cssClass:"e-pv-properties-form-field-checkbox"},v),"Checkbox"===this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType||"RadioButton"===this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType){var w=we("input",{className:"e-pv-properties-checkbox-checked-input e-input"});y.appendChild(w),this.formFieldChecked=new wa({label:this.pdfViewer.localeObj.getConstant("Checked"),cssClass:"e-pv-properties-form-field-checkbox",checked:e.isChecked||e.isSelected,change:this.checkBoxChange.bind(this)},w)}var b=we("input",{className:"e-pv-properties-checkbox-required-input e-input"});y.appendChild(b),this.formFieldRequired=new wa({label:this.pdfViewer.localeObj.getConstant("Required"),checked:e.isRequired,cssClass:"e-pv-properties-form-field-checkbox"},b);var S=we("input",{className:"e-pv-properties-checkbox-printing-input e-input"});if(y.appendChild(S),this.formFieldPrinting=new wa({label:this.pdfViewer.localeObj.getConstant("Show Printing"),checked:e.isPrint,cssClass:"e-pv-properties-form-field-checkbox"},S),"Textbox"===e.formFieldAnnotationType){var C=we("input",{className:"e-pv-properties-checkbox-multiline-input e-input"});y.appendChild(C),this.formFieldMultiline=new wa({label:this.pdfViewer.localeObj.getConstant("Multiline"),checked:e.isMultiline,cssClass:"e-pv-properties-form-field-checkbox",change:this.multilineCheckboxChange.bind(this)},C)}return t.appendChild(y),t},e.prototype.checkBoxChange=function(e){this.checkboxCheckedState=e.checked},e.prototype.multilineCheckboxChange=function(e){this.multilineCheckboxCheckedState=!0},e.prototype.setToolTip=function(e,t){var i=new Xd({content:e});i.appendTo(t),i.beforeOpen=this.tooltipBeforeOpen.bind(this)},e.prototype.tooltipBeforeOpen=function(e){var t=this.pdfViewer.nameTable[e.target.id.split("_")[0]];m(t)||(e.element.children[0].innerHTML=t.tooltip)},e.prototype.createAppearanceProperties=function(){var e=this.pdfViewer.selectedItems.formFields?this.pdfViewer.selectedItems.formFields[0]:null,t=this.pdfViewer.element.id,i=we("div",{id:t+"_formatting_text_prop_appearance"}),n=we("div",{className:"e-pv-properties-format-text-style-prop"});i.appendChild(n),this.createLabelElement(this.pdfViewer.localeObj.getConstant("Formatting"),n,!0,"e-pv-properties-formfield-label",t+"_properties_formfield_formatting");var o=we("div",{className:"e-pv-properties-font-items-container"}),s=we("div",{className:"e-pv-properties-font-family-container"}),a=we("input",{className:"e-pv-properties-format-font-family-prop"});s.appendChild(a),o.appendChild(s),this.formFieldFontFamily=new Sf({dataSource:["Helvetica","Courier","Times New Roman","Symbol","ZapfDingbats"],value:this.getFontFamily(e.fontFamily)?e.fontFamily:"Helvetica",cssClass:"e-pv-properties-formfield-fontfamily"},a),this.setToolTip(this.pdfViewer.localeObj.getConstant("Font family"),s);var r=we("div",{className:"e-pv-properties-font-size-container"}),l=we("input",{className:"e-pv-properties-format-font-family-prop"});r.appendChild(l),o.appendChild(r),this.formFieldFontSize=new Sf({dataSource:["6px","8px","10px","12px","14px","16px","18px","20px","24px","28px","32px","36px","40px"],value:e.fontSize+"px",cssClass:"e-pv-properties-formfield-fontsize"},l),this.setToolTip(this.pdfViewer.localeObj.getConstant("Font size"),r);var d=we("div",{className:"e-pv-properties-form-field-font-style"});d.onclick=this.fontStyleClicked.bind(this),d.appendChild(this.addClassFontItem("_formField_bold","e-pv-bold-icon",e.font.isBold)),d.appendChild(this.addClassFontItem("_formField_italic","e-pv-italic-icon",e.font.isItalic)),d.appendChild(this.addClassFontItem("_formField_underline_textinput","e-pv-underlinetext-icon",e.font.isUnderline)),d.appendChild(this.addClassFontItem("_formField_strikeout","e-pv-strikeout-icon",e.font.isStrikeout)),o.appendChild(d),this.getFontStyle(e.font),i.appendChild(o);var h=we("div",{className:"e-pv-properties-font-color-container"}),p=we("div",{className:"e-pv-properties-form-field-font-align"});p.onclick=this.fontAlignClicked.bind(this);var c=e.alignment.toLowerCase();p.appendChild(this.addClassFontItem("_formField_left_align","e-pv-left-align-icon","left"===c)),p.appendChild(this.addClassFontItem("_formField_center_align","e-pv-center-align-icon","center"===c)),p.appendChild(this.addClassFontItem("_formField_right_align","e-pv-right-align-icon","right"===c)),this.getAlignment(c),h.appendChild(p),this.fontColorElement=we("div",{className:"e-pv-formfield-textcolor-icon",id:this.pdfViewer.element.id+"formField_textColor"}),this.fontColorElement.setAttribute("role","combobox"),this.fontColorPalette=this.createColorPicker(this.fontColorElement.id,e.color),"black"!==e.color&&(this.fontColorValue=e.color),this.fontColorPalette.change=this.onFontColorChange.bind(this),this.fontColorDropDown=this.createDropDownButton(this.fontColorElement,"e-pv-annotation-textcolor-icon",this.fontColorPalette.element.parentElement),h.appendChild(this.fontColorElement),this.setToolTip(this.pdfViewer.localeObj.getConstant("Font color"),this.fontColorDropDown.element),this.updateColorInIcon(this.fontColorElement,this.pdfViewer.selectedItems.formFields[0].color),"Checkbox"!==e.formFieldAnnotationType&&"RadioButton"!==e.formFieldAnnotationType||(this.fontColorPalette.disabled=!0,this.fontColorDropDown.disabled=!0,this.fontColorElement.style.pointerEvents="none",this.fontColorElement.style.opacity="0.5",p.style.pointerEvents="none",p.style.opacity="0.5",this.formFieldFontSize.enabled=!1,this.formFieldFontFamily.enabled=!1,s.style.pointerEvents="none",r.style.pointerEvents="none",d.style.pointerEvents="none",d.style.opacity="0.5");var u=we("div",{className:"e-pv-formfield-maxlength-group",id:this.pdfViewer.element.id+"formField_maxlength_group"}),f=we("div",{className:"e-pv-formfield-maxlength-icon",id:this.pdfViewer.element.id+"formField_maxlength"});u.appendChild(f),this.createLabelElement(this.pdfViewer.localeObj.getConstant("Max Length"),f,!0,"e-pv-properties-formfield-label",t+"_properties_formfield_maxlength");var m=we("div",{className:"e-pv-formfield-maxlength",id:this.pdfViewer.element.id+"formField_maxlength_container"}),g=we("input",{className:"e-pv-formfield-maxlength-input e-input"});g.setAttribute("aria-label","Max Length"),m.appendChild(g),u.appendChild(m),this.maxLengthItem=new Eh({format:"n",value:0!==e.maxLength?e.maxLength:0,min:0},g),h.appendChild(u),this.setToolTip(this.pdfViewer.localeObj.getConstant("Max Length"),this.maxLengthItem.element),"Textbox"!==e.formFieldAnnotationType&&"PasswordField"!==e.formFieldAnnotationType&&(this.maxLengthItem.enabled=!1,f.style.pointerEvents="none"),i.appendChild(h);var y=we("div",{className:"e-pv-properties-color-container-style-prop"}),v=we("div",{className:"e-pv-properties-fill-color-style-prop"});i.appendChild(v),this.createLabelElement(this.pdfViewer.localeObj.getConstant("Fill"),v,!0,"e-pv-properties-formfield-label",t+"_properties_formfield_fontcolor"),this.colorDropDownElement=we("div",{className:"e-pv-formfield-fontcolor-icon",id:this.pdfViewer.element.id+"formField_fontColor"}),this.colorDropDownElement.setAttribute("role","combobox"),this.colorPalette=this.createColorPicker(this.colorDropDownElement.id,e.backgroundColor),this.colorPalette.change=this.onColorPickerChange.bind(this),this.colorDropDown=this.createDropDownButton(this.colorDropDownElement,"e-pv-annotation-color-icon",this.colorPalette.element.parentElement),this.setToolTip(this.pdfViewer.localeObj.getConstant("Fill Color"),this.colorDropDown.element),v.appendChild(this.colorDropDownElement),y.appendChild(v),this.updateColorInIcon(this.colorDropDownElement,this.pdfViewer.selectedItems.formFields[0].backgroundColor);var w=we("div",{className:"e-pv-properties-stroke-color-style-prop"});this.createLabelElement(this.pdfViewer.localeObj.getConstant("Border"),w,!0,"e-pv-properties-formfield-label",t+"_properties_formfield_strokecolor"),this.strokeDropDownElement=we("div",{className:"e-pv-formfield-strokecolor-icon",id:this.pdfViewer.element.id+"formField_strokeColor"}),this.strokeDropDownElement.setAttribute("role","combobox"),this.strokeColorPicker=this.createColorPicker(this.strokeDropDownElement.id,e.borderColor),this.strokeColorPicker.change=this.onStrokePickerChange.bind(this),this.strokeDropDown=this.createDropDownButton(this.strokeDropDownElement,"e-pv-annotation-stroke-icon",this.strokeColorPicker.element.parentElement),this.setToolTip(this.pdfViewer.localeObj.getConstant("Border Color"),this.strokeDropDown.element),w.appendChild(this.strokeDropDownElement),y.appendChild(w),this.updateColorInIcon(this.strokeDropDownElement,this.pdfViewer.selectedItems.formFields[0].borderColor);var b=we("div",{className:"e-pv-properties-stroke-thickness-style-prop"});this.createLabelElement(this.pdfViewer.localeObj.getConstant("Thickness"),b,!0,"e-pv-properties-formfield-label",t+"_properties_formfield_strokethickness"),this.thicknessElement=we("div",{className:"e-pv-formfield-strokethickness-icon",id:this.pdfViewer.element.id+"formField_strokethickness"}),this.thicknessElement.setAttribute("role","combobox");var S=this.createThicknessSlider(this.thicknessElement.id);return this.thicknessDropDown=this.createDropDownButton(this.thicknessElement,"e-pv-annotation-thickness-icon",S),this.thicknessDropDown.beforeOpen=this.thicknessDropDownBeforeOpen.bind(this),this.setToolTip(this.pdfViewer.localeObj.getConstant("Thickness"),this.thicknessDropDown.element),this.thicknessSlider.change=this.thicknessChange.bind(this),this.thicknessSlider.changed=this.thicknessChange.bind(this),b.appendChild(this.thicknessElement),y.appendChild(b),i.appendChild(y),i},e.prototype.thicknessChange=function(e){1===this.pdfViewer.selectedItems.formFields.length&&(this.formFieldBorderWidth=e.value,this.updateThicknessIndicator())},e.prototype.thicknessDropDownBeforeOpen=function(){1===this.pdfViewer.selectedItems.formFields.length&&(this.formFieldBorderWidth=this.pdfViewer.selectedItems.formFields[0].thickness.toString(),this.thicknessSlider.value=this.pdfViewer.selectedItems.formFields[0].thickness),this.updateThicknessIndicator()},e.prototype.updateThicknessIndicator=function(){this.thicknessIndicator.textContent=this.thicknessSlider.value+" pt"},e.prototype.createOptionProperties=function(){var e=this,t=this.pdfViewer.element.id,i=we("div",{id:t+"_option_prop_appearance"}),n=we("div",{className:"e-pv-properties-form-field-list-add-div"}),o=we("div",{className:"e-pv-properties-form-field-list-item-main-div"});this.createLabelElement(this.pdfViewer.localeObj.getConstant("List Item"),o,!0,"e-pv-properties-formfield-label",t+"_properties_formfield_listitem");var s=we("div",{className:"e-pv-properties-list-item-edit-prop"}),a=we("input",{className:"e-pv-properties-list-item-input e-input"});a.setAttribute("aria-label","Item Name"),a.addEventListener("keyup",(function(t){if(e.formFieldAddButton.disabled=!0,e.formFieldListItem.value=t.target.value,t.target&&t.target.value)if(e.formFieldListItemCollection.length>0)for(var i=0;i<e.formFieldListItemCollection.length;i++){if(e.formFieldListItemCollection[i]===t.target.value){e.formFieldAddButton.disabled=!0;break}e.formFieldAddButton.disabled=!1}else e.formFieldAddButton.disabled=!1})),s.appendChild(a),o.appendChild(s),this.formFieldListItem=new Vs({type:"text",cssClass:"e-pv-properties-formfield-listitem"},a),n.appendChild(o),i.appendChild(n);var r=we("div",{className:"e-pv-properties-form-field-list-btn-div"}),l=we("button",{className:"e-btn"});l.addEventListener("click",this.addListItemOnClick.bind(this)),r.appendChild(l),this.formFieldAddButton=new Qi({content:this.pdfViewer.localeObj.getConstant("Add"),disabled:!0,cssClass:"e-pv-properties-dropdown-btn"},l),n.appendChild(r);var d=we("div",{className:"e-pv-properties-form-field-export-value-div"}),h=we("div",{className:"e-pv-properties-form-field-export-value-main-div"});this.createLabelElement(this.pdfViewer.localeObj.getConstant("Export Value"),h,!0,"e-pv-properties-formfield-label",t+"_properties_formfield_exportValue");var p=we("div",{className:"e-pv-properties-export-value-edit-prop"}),c=we("input",{className:"e-pv-properties-export-value-input e-input"});c.setAttribute("aria-label","Item Value"),p.appendChild(c),h.appendChild(p),this.formFieldListItem=new Vs({type:"text",cssClass:"e-pv-properties-formfield-exportvalue"},c),d.appendChild(h),i.appendChild(d);var u=we("div",{className:"e-pv-properties-form-field-option-dropdown-list-div"}),f=we("div",{className:"e-pv-properties-form-field-option-dropdown-list-item-div"});"DropdownList"===this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType?this.createLabelElement(this.pdfViewer.localeObj.getConstant("Dropdown Item List"),f,!0,"e-pv-properties-formfield-label",t+"_properties_formfield_dropdown_listitem"):this.createLabelElement(this.pdfViewer.localeObj.getConstant("List Box Item List"),f,!0,"e-pv-properties-formfield-label",t+"_properties_formfield_dropdown_listitem"),u.appendChild(f);var m=we("div",{className:"e-pv-properties-form-field-btn-textarea-container"}),g=we("div",{className:"e-pv-properties-formfield-textarea",styles:"width:300px;height:123px;border:1px solid #E0E0E0;margin-right:15px;overflow:auto"}),y=we("ul",{id:this.pdfViewer.element.id+"_ul_list_item",className:"e-pv-form-designer-ul-list-items"}),v=this.createListElement(y);g.appendChild(y),m.appendChild(g);var w=we("div",{className:"e-pv-properties-form-field-group-btn-div"}),b=we("div",{className:"e-pv-properties-form-field-delete-btn-div"}),S=we("button",{className:"e-btn"});S.addEventListener("click",this.deleteListItem.bind(this)),b.appendChild(S),this.formFieldDeleteButton=new Qi({content:this.pdfViewer.localeObj.getConstant("Delete Item"),disabled:!(v>0),cssClass:"e-pv-properties-dropdown-btn"},S),w.appendChild(b);var C=we("div",{className:"e-pv-properties-form-field-up-btn-div"}),x=we("button",{className:"e-btn"});x.addEventListener("click",this.moveUpListItem.bind(this)),C.appendChild(x),this.formFieldUpButton=new Qi({content:this.pdfViewer.localeObj.getConstant("Up"),disabled:!(v>1),cssClass:"e-pv-properties-dropdown-btn"},x),w.appendChild(C);var M=we("div",{className:"e-pv-properties-form-field-down-btn-div"}),I=we("button",{className:"e-btn"});return I.addEventListener("click",this.moveDownListItem.bind(this)),M.appendChild(I),this.formFieldDownButton=new Qi({content:this.pdfViewer.localeObj.getConstant("Down"),disabled:!0,cssClass:"e-pv-properties-dropdown-btn"},I),w.appendChild(M),m.appendChild(w),u.appendChild(m),i.appendChild(u),i},e.prototype.addListItemOnClick=function(){var e=this.formFieldListItem.value;this.formFieldListItemCollection.push(e);var t=document.getElementById(this.pdfViewer.element.id+"_ul_list_item");if(t.children&&t.children.length>0)for(var i=0;i<t.children.length;i++){var n=t.children[i];n.classList.contains("e-pv-li-select")&&n.classList.remove("e-pv-li-select")}var o=we("li",{className:"e-pv-formfield-li-element"});o.addEventListener("click",this.listItemOnClick.bind(this)),o.innerHTML=e,o.classList.add("e-pv-li-select"),t.appendChild(o),this.formFieldDeleteButton.disabled=!1,this.formFieldAddButton.disabled=!0,o.previousElementSibling&&(this.formFieldUpButton.disabled=!1),o.nextElementSibling||(this.formFieldDownButton.disabled=!0)},e.prototype.listItemOnClick=function(e){var t=document.getElementById(this.pdfViewer.element.id+"_ul_list_item");if(t.children&&t.children.length>0)for(var i=0;i<t.children.length;i++){var n=t.children[i];n.classList.contains("e-pv-li-select")&&n.classList.remove("e-pv-li-select")}e.target&&e.target.classList.add("e-pv-li-select"),e.target.nextElementSibling?this.formFieldDownButton.disabled=!1:this.formFieldDownButton.disabled=!0,e.target.previousElementSibling?this.formFieldUpButton.disabled=!1:this.formFieldUpButton.disabled=!0},e.prototype.deleteListItem=function(){var e=document.getElementById(this.pdfViewer.element.id+"_ul_list_item");if(e.children&&e.children.length>0)for(var t=0;t<e.children.length;t++){var i=e.children[t];i.classList.contains("e-pv-li-select")&&(i.classList.remove("e-pv-li-select"),this.formFieldListItemCollection.splice(t,1),i.previousElementSibling?(i.previousElementSibling.classList.add("e-pv-li-select"),i.previousElementSibling.previousElementSibling||(this.formFieldUpButton.disabled=!0)):i.nextElementSibling&&(i.nextElementSibling.classList.add("e-pv-li-select"),i.nextElementSibling.nextElementSibling||(this.formFieldDownButton.disabled=!0)),i.remove())}e.children&&0===e.children.length&&(this.formFieldDeleteButton.disabled=!0,this.formFieldUpButton.disabled=!0,this.formFieldDownButton.disabled=!0),e.children&&1===e.children.length&&(this.formFieldDeleteButton.disabled=!1,this.formFieldUpButton.disabled=!0,this.formFieldDownButton.disabled=!0)},e.prototype.moveUpListItem=function(){var e=document.getElementById(this.pdfViewer.element.id+"_ul_list_item");if(e.children&&e.children.length>0)for(var t=0;t<e.children.length;t++){var i=e.children[t];i.classList.contains("e-pv-li-select")&&(i.previousElementSibling?(i.parentNode.insertBefore(i,i.previousElementSibling),i.previousElementSibling||(this.formFieldUpButton.disabled=!0)):this.formFieldUpButton.disabled=!0,i.nextElementSibling&&(this.formFieldDownButton.disabled=!1))}},e.prototype.moveDownListItem=function(){var e,t=document.getElementById(this.pdfViewer.element.id+"_ul_list_item");if(t.children&&t.children.length>0)for(var i=0;i<t.children.length;i++)if((e=t.children[i]).classList.contains("e-pv-li-select")){if(e.nextElementSibling){e.parentNode.insertBefore(e.nextElementSibling,e);break}this.formFieldDownButton.disabled=!0}e.nextElementSibling||(this.formFieldDownButton.disabled=!0),e.previousElementSibling&&(this.formFieldUpButton.disabled=!1)},e.prototype.createListElement=function(e){var t=this.pdfViewer.selectedItems.formFields[0];if(t&&t.options&&t.options.length>0){for(var i=0;i<t.options.length;i++){var n=t.options[i].itemName;if(this.formFieldListItemCollection[i]!==t.options[i].itemName){this.formFieldListItemCollection.push(n);var o=we("li",{className:"e-pv-formfield-li-element"});o.addEventListener("click",this.listItemOnClick.bind(this)),o.addEventListener("focus",this.focusFormFields.bind(this)),o.addEventListener("blur",this.blurFormFields.bind(this)),o.innerHTML=n,e.appendChild(o)}}e.children[e.children.length-1].classList.add("e-pv-li-select")}return e.children.length},e.prototype.createThicknessSlider=function(e){var t=we("div",{className:"e-pv-annotation-thickness-popup-container"});document.body.appendChild(t);var i=we("span",{id:e+"_label",className:"e-pv-annotation-thickness-label"});i.textContent=this.pdfViewer.localeObj.getConstant("Line Thickness");var n=we("div",{id:e+"_slider"});return this.thicknessSlider=new rg({type:"MinRange",cssClass:"e-pv-annotation-thickness-slider",max:12,min:0}),this.thicknessIndicator=we("div",{id:e+"_thickness_indicator",className:"e-pv-annotation-thickness-indicator"}),this.thicknessIndicator.textContent="0 pt",this.pdfViewer.enableRtl?(t.appendChild(this.thicknessIndicator),t.appendChild(n),this.thicknessSlider.enableRtl=!0,this.thicknessSlider.appendTo(n),t.appendChild(i)):(t.appendChild(i),t.appendChild(n),this.thicknessSlider.appendTo(n),t.appendChild(this.thicknessIndicator)),this.thicknessSlider.element.parentElement.classList.add("e-pv-annotation-thickness-slider-container"),t},e.prototype.createColorPicker=function(e,t){var i=we("input",{id:e+"_target"});document.body.appendChild(i);var n=new Rg({inline:!0,mode:"Palette",cssClass:"e-show-value",enableOpacity:!1,value:t,showButtons:!1,modeSwitcher:!1});return this.pdfViewer.enableRtl&&(n.enableRtl=!0),n.appendTo(i),n},e.prototype.fontStyleClicked=function(e){if(e.target)if(-1!==e.target.id.indexOf("formField_bold"))(t=-1!==e.target.id.indexOf("formField_bold_div")?e.target:e.target.parentElement).classList.contains("e-pv-li-select")&&(this.isBold=!0),this.isBold=!this.isBold,this.isBold?(this.formFieldBold="bold",t.classList.add("e-pv-li-select")):(this.formFieldBold="normal",t.classList.remove("e-pv-li-select"));else if(-1!==e.target.id.indexOf("formField_italic")){(t=-1!==e.target.id.indexOf("formField_italic_div")?e.target:e.target.parentElement).classList.contains("e-pv-li-select")&&(this.isItalic=!0),this.isItalic=!this.isItalic,this.isItalic?(this.formFieldItalic="italic",t.classList.add("e-pv-li-select")):(this.formFieldItalic="normal",t.classList.remove("e-pv-li-select"))}else if(-1!==e.target.id.indexOf("formField_underline")){(t=-1!==e.target.id.indexOf("formField_underline_textinput_div")?e.target:e.target.parentElement).classList.contains("e-pv-li-select")&&(this.isUnderline=!0),this.isUnderline=!this.isUnderline,this.isUnderline?(this.formFieldUnderline="underline",this.isStrikeThrough=!1,t.classList.add("e-pv-li-select")):(this.formFieldUnderline="none",t.classList.remove("e-pv-li-select"))}else if(-1!==e.target.id.indexOf("formField_strikeout")){var t;(t=-1!==e.target.id.indexOf("formField_strikeout_div")?e.target:e.target.parentElement).classList.contains("e-pv-li-select")&&(this.isStrikeThrough=!0),this.isStrikeThrough=!this.isStrikeThrough,this.isStrikeThrough?(this.formFieldStrikeOut="line-through",this.isUnderline=!1,t.classList.add("e-pv-li-select")):(this.formFieldStrikeOut="none",t.classList.remove("e-pv-li-select"))}},e.prototype.clearFontAlignIconSelection=function(e){for(var t=0;t<e.children.length;t++)e.children[t].classList.contains("e-pv-li-select")&&e.children[t].classList.remove("e-pv-li-select")},e.prototype.fontAlignClicked=function(e){if(e.target)if(e.target.classList.remove("e-pv-li-select"),-1!==e.target.id.indexOf("_formField_left_align")){var t=-1!==e.target.id.indexOf("_formField_left_align_div")?e.target:e.target.parentElement;this.formFieldAlign="left",this.clearFontAlignIconSelection(e.currentTarget),t.classList.add("e-pv-li-select")}else if(-1!==e.target.id.indexOf("_formField_right_align")){t=-1!==e.target.id.indexOf("_formField_right_align_div")?e.target:e.target.parentElement;this.formFieldAlign="right",this.clearFontAlignIconSelection(e.currentTarget),t.classList.add("e-pv-li-select")}else{t=-1!==e.target.id.indexOf("_formField_center_align_div")?e.target:e.target.parentElement;this.formFieldAlign="center",this.clearFontAlignIconSelection(e.currentTarget),t.classList.add("e-pv-li-select")}},e.prototype.onFontColorChange=function(e){this.fontColorValue=""===e.currentValue.hex?"#ffffff00":e.currentValue.hex,this.updateColorInIcon(this.fontColorElement,this.fontColorValue),this.fontColorDropDown.toggle()},e.prototype.onColorPickerChange=function(e){this.backgroundColorValue=""===e.currentValue.hex?"#ffffff00":e.currentValue.hex,this.updateColorInIcon(this.colorDropDownElement,this.backgroundColorValue),this.colorDropDown.toggle()},e.prototype.updateColorInIcon=function(e,t){e.childNodes[0].style.borderBottomColor=t},e.prototype.onStrokePickerChange=function(e){this.borderColorValue=""===e.currentValue.hex?"#ffffff00":e.currentValue.hex,this.updateColorInIcon(this.strokeDropDownElement,this.borderColorValue),this.strokeDropDown.toggle()},e.prototype.createDropDownButton=function(e,t,i){var n=document.getElementById(i.id+"-popup");n&&n.remove();var o=new Yf({iconCss:t+" e-pv-icon",target:i});return this.pdfViewer.enableRtl&&(o.enableRtl=!0),o.appendTo(e),o},e.prototype.addClassFontItem=function(e,t,i){var n=we("div",{id:this.pdfViewer.element.id+e+"_div"});n.classList.add(t+"-div");var o=we("span",{id:this.pdfViewer.element.id+e+"_span"});switch(o.classList.add(t),o.classList.add("e-pv-icon"),t){case"e-pv-bold-icon":this.setToolTip(this.pdfViewer.localeObj.getConstant("Bold"),n);break;case"e-pv-italic-icon":this.setToolTip(this.pdfViewer.localeObj.getConstant("Italic"),n);break;case"e-pv-underlinetext-icon":this.setToolTip(this.pdfViewer.localeObj.getConstant("Underlines"),n);break;case"e-pv-strikeout-icon":this.setToolTip(this.pdfViewer.localeObj.getConstant("Strikethroughs"),n);break;case"e-pv-left-align-icon":this.setToolTip(this.pdfViewer.localeObj.getConstant("Align left"),n);break;case"e-pv-center-align-icon":this.setToolTip(this.pdfViewer.localeObj.getConstant("Center"),n);break;case"e-pv-right-align-icon":this.setToolTip(this.pdfViewer.localeObj.getConstant("Align right"),n)}return i&&n.classList.add("e-pv-li-select"),n.appendChild(o),n},e.prototype.createLabelElement=function(e,t,i,n,o){var s=we("div",{id:o+"_container",className:n+"-container"}),a=null;i&&((a=we("div",{id:o+"_label",className:n})).textContent=e,s.appendChild(a)),t.appendChild(a)},e.prototype.setReadOnlyToFormField=function(e,t){for(var i=0;i<this.pdfViewer.formFieldCollection.length;i++){var n=this.pdfViewer.formFieldCollection[i];if(n.formFieldAnnotationType===e.formFieldAnnotationType&&n.name===e.name&&n.id===e.id)switch(n.isReadonly=t,n.formFieldAnnotationType){case"Textbox":case"PasswordField":case"DropdownList":case"ListBox":case"SignatureField":case"InitialField":var o=document.getElementById(n.id+"_content_html_element").firstElementChild.firstElementChild;this.setReadOnlyToElement(n,o,t);break;case"RadioButton":var s=document.getElementById(n.id+"_content_html_element").firstElementChild.firstElementChild.firstElementChild;this.setReadOnlyToElement(n,s,t);break;case"Checkbox":var a=document.getElementById(n.id+"_content_html_element").firstElementChild.firstElementChild.lastElementChild;this.setReadOnlyToElement(n,a,t)}}},e.prototype.getFormDesignerSignField=function(e){var t,i=this.pdfViewerBase.getItemFromSessionStorage("_formDesigner");if(i)for(var n=JSON.parse(i),o=0;o<n.length;o++)"SignatureField"===(t=n[o].FormField).formFieldAnnotationType&&(t.uniqueID=t.id.replace("_content",""),e.push(n[o]));return e},e.prototype.setRequiredToFormField=function(e,t){for(var i=0;i<this.pdfViewer.formFieldCollection.length;i++){var n=this.pdfViewer.formFieldCollection[i];if(n.formFieldAnnotationType===e.formFieldAnnotationType&&n.name===e.name&&n.id===e.id)switch(n.isRequired=t,n.formFieldAnnotationType){case"Textbox":case"PasswordField":case"DropdownList":case"SignatureField":case"InitialField":var o=document.getElementById(n.id+"_content_html_element").firstElementChild.firstElementChild;this.setRequiredToElement(n,o,t);break;case"RadioButton":var s=document.getElementById(n.id+"_content_html_element").firstElementChild.firstElementChild.firstElementChild;this.setRequiredToElement(n,s,t),this.updateFormFieldCollections(n);break;case"Checkbox":var a=document.getElementById(n.id+"_content_html_element").firstElementChild.firstElementChild.lastElementChild;this.setRequiredToElement(n,a,t)}}},e.prototype.setReadOnlyToElement=function(e,t,i){if(i)if(t.disabled=!0,"RadioButton"===e.formFieldAnnotationType)t.parentElement.style.cursor="default",t.parentElement.style.backgroundColor="transparent";else if("SignatureField"===e.formFieldAnnotationType||"InitialField"===e.formFieldAnnotationType){t.parentElement.style.backgroundColor="transparent";var n=m(e.thickness)?e.thickness:1;t.parentElement.style.borderWidth=n}else t.style.cursor="default",t.style.backgroundColor="transparent";else if(t.disabled=!1,"RadioButton"===e.formFieldAnnotationType)t.parentElement.style.backgroundColor=e.backgroundColor;else if("SignatureField"===e.formFieldAnnotationType||"InitialField"===e.formFieldAnnotationType){var o=e.backgroundColor?e.backgroundColor:"#FFE48559";t.parentElement.style.backgroundColor=this.getSignatureBackground(o)}else t.style.backgroundColor=e.backgroundColor},e.prototype.setRequiredToElement=function(e,t,i){if(i){if(t.required=!0,t.style.border="1px solid red","RadioButton"===e.formFieldAnnotationType){var n=0===e.thickness?1:e.thickness;t.parentElement.style.boxShadow="red 0px 0px 0px "+n+"px"}else if("SignatureField"===e.formFieldAnnotationType||"InitialField"===e.formFieldAnnotationType){n=e.thickness>0?e.thickness:1;t.style.border=n+"px solid red"}}else t.required=!1,"SignatureField"===e.formFieldAnnotationType||"InitialField"===e.formFieldAnnotationType?t.style.borderWidth=e.thickness:t.style.borderWidth=e.thickness+"px",t.style.borderColor=e.borderColor,"RadioButton"===e.formFieldAnnotationType&&(t.parentElement.style.boxShadow=e.borderColor+" 0px 0px 0px "+e.thickness+"px")},e.prototype.destroyPropertiesWindow=function(){this.formFieldListItemCollection=[],this.formFieldListItemDataSource=[],this.formFieldFontFamily=null,this.formFieldFontSize=null,this.formFieldAlign=null,this.fontColorValue=null,this.backgroundColorValue=null,this.borderColorValue=null,this.formFieldBorderWidth=null,this.formFieldName=null,this.formFieldChecked=null,this.formFieldReadOnly=null,this.formFieldRequired=null,this.formFieldTooltip=null,this.formFieldPrinting=null,this.formFieldMultiline=null,this.formFieldVisibility=null;var e=this.pdfViewerBase.getElement("_properties_window");e&&e.parentElement.removeChild(e)},e.prototype.destroy=function(){this.destroyPropertiesWindow()},e.prototype.hex=function(e){return("0"+e.toString(16)).slice(-2)},e.prototype.getModuleName=function(){return"FormDesigner"},e.prototype.updateAnnotationCanvas=function(e,t,i,n){var o=this.pdfViewerBase.getZoomRatio();e.width=t*o,e.height=i*o,e.style.width=t+"px",e.style.height=i+"px",e.style.position="absolute",e.style.zIndex="1",this.pdfViewerBase.applyElementStyles(e,n)},e.prototype.getFontFamily=function(e){return["Helvetica","Courier","TimesRoman","Symbol","ZapfDingbats"].indexOf(e)>-1},e.prototype.updateTextFieldSettingProperties=function(e,t,i){var n=this.pdfViewer.textFieldSettings;!m(n.isReadOnly)&&this.textFieldPropertyChanged.isReadOnlyChanged&&(e.isReadonly=n.isReadOnly),!m(n.isRequired)&&this.textFieldPropertyChanged.isRequiredChanged&&(e.isRequired=n.isRequired),n.value&&this.textFieldPropertyChanged.isValueChanged&&(e.value=n.value),n.backgroundColor&&"white"!==n.backgroundColor&&this.textFieldPropertyChanged.isBackgroundColorChanged&&(e.backgroundColor=n.backgroundColor),n.borderColor&&"black"!==n.borderColor&&this.textFieldPropertyChanged.isBorderColorChanged&&(e.borderColor=n.borderColor),n.alignment&&"Left"!==n.alignment&&this.textFieldPropertyChanged.isAlignmentChanged&&(e.alignment=n.alignment),n.color&&"black"!==n.color&&this.textFieldPropertyChanged.isColorChanged&&(e.color=n.color),n.fontFamily&&"Helvetica"!==n.fontFamily&&this.textFieldPropertyChanged.isFontFamilyChanged&&(e.fontFamily=n.fontFamily),n.fontSize&&10!==n.fontSize&&this.textFieldPropertyChanged.isFontSizeChanged&&(e.fontSize=n.fontSize),n.fontStyle&&this.textFieldPropertyChanged.isFontStyleChanged&&(e.fontStyle=this.getFontStyleName(n.fontStyle,e)),n.name&&this.textFieldPropertyChanged.isNameChanged&&(e.name=n.name),n.tooltip&&this.textFieldPropertyChanged.isToolTipChanged&&(e.tooltip=n.tooltip),n.thickness&&1!==n.thickness&&this.textFieldPropertyChanged.isThicknessChanged&&(e.thickness=n.thickness),n.maxLength&&this.textFieldPropertyChanged.isMaxLengthChanged&&(e.maxLength=n.maxLength),n.visibility&&this.textFieldPropertyChanged.isVisibilityChanged&&(e.visibility=n.visibility),!m(n.isPrint)&&this.textFieldPropertyChanged.isPrintChanged&&(e.isPrint=n.isPrint),!m(n.isMultiline)&&this.textFieldPropertyChanged.isMultilineChanged&&(e.isMultiline=n.isMultiline)},e.prototype.updatePasswordFieldSettingProperties=function(e,t,i){var n=this.pdfViewer.passwordFieldSettings;!m(n.isReadOnly)&&this.passwordFieldPropertyChanged.isReadOnlyChanged&&(e.isReadonly=n.isReadOnly),!m(n.isRequired)&&this.passwordFieldPropertyChanged.isRequiredChanged&&(e.isRequired=n.isRequired),n.value&&this.passwordFieldPropertyChanged.isValueChanged&&(e.value=n.value),n.backgroundColor&&"white"!==n.backgroundColor&&this.passwordFieldPropertyChanged.isBackgroundColorChanged&&(e.backgroundColor=n.backgroundColor),n.borderColor&&"black"!==n.borderColor&&this.passwordFieldPropertyChanged.isBorderColorChanged&&(e.borderColor=n.borderColor),n.alignment&&"Left"!==n.alignment&&this.passwordFieldPropertyChanged.isAlignmentChanged&&(e.alignment=n.alignment),n.color&&"black"!==n.color&&this.passwordFieldPropertyChanged.isColorChanged&&(e.color=n.color),n.fontFamily&&"Helvetica"!==n.fontFamily&&this.passwordFieldPropertyChanged.isFontFamilyChanged&&(e.fontFamily=n.fontFamily),n.fontSize&&10!==n.fontSize&&this.passwordFieldPropertyChanged.isFontSizeChanged&&(e.fontSize=n.fontSize),n.fontStyle&&this.passwordFieldPropertyChanged.isFontStyleChanged&&(e.fontStyle=this.getFontStyleName(n.fontStyle,e)),n.name&&this.passwordFieldPropertyChanged.isNameChanged&&(e.name=n.name),n.tooltip&&this.passwordFieldPropertyChanged.isToolTipChanged&&(e.tooltip=n.tooltip),n.thickness&&1!==n.thickness&&this.passwordFieldPropertyChanged.isThicknessChanged&&(e.thickness=n.thickness),n.maxLength&&this.passwordFieldPropertyChanged.isMaxLengthChanged&&(e.maxLength=n.maxLength),n.visibility&&this.passwordFieldPropertyChanged.isVisibilityChanged&&(e.visibility=n.visibility),!m(n.isPrint)&&this.passwordFieldPropertyChanged.isPrintChanged&&(e.isPrint=n.isPrint)},e.prototype.updateCheckBoxFieldSettingsProperties=function(e,t,i){var n=this.pdfViewer.checkBoxFieldSettings;!m(n.isReadOnly)&&this.checkBoxFieldPropertyChanged.isReadOnlyChanged&&(e.isReadonly=n.isReadOnly),!m(n.isRequired)&&this.checkBoxFieldPropertyChanged.isRequiredChanged&&(e.isRequired=n.isRequired),n.backgroundColor&&"white"!==n.backgroundColor&&this.checkBoxFieldPropertyChanged.isBackgroundColorChanged&&(e.backgroundColor=n.backgroundColor),n.borderColor&&"black"!==n.borderColor&&this.checkBoxFieldPropertyChanged.isBorderColorChanged&&(e.borderColor=n.borderColor),n.name&&this.checkBoxFieldPropertyChanged.isNameChanged&&(e.name=n.name),n.tooltip&&this.checkBoxFieldPropertyChanged.isToolTipChanged&&(e.tooltip=n.tooltip),n.thickness&&1!==n.thickness&&this.checkBoxFieldPropertyChanged.isThicknessChanged&&(e.thickness=n.thickness),n.visibility&&this.checkBoxFieldPropertyChanged.isVisibilityChanged&&(e.visibility=n.visibility),!m(n.isPrint)&&this.checkBoxFieldPropertyChanged.isPrintChanged&&(e.isPrint=n.isPrint),!m(n.isChecked)&&this.checkBoxFieldPropertyChanged.isCheckedChanged&&(e.isChecked=n.isChecked)},e.prototype.updateRadioButtonFieldSettingProperties=function(e,t,i){var n=this.pdfViewer.radioButtonFieldSettings;!m(n.isReadOnly)&&this.radioButtonFieldPropertyChanged.isReadOnlyChanged&&(e.isReadonly=n.isReadOnly),!m(n.isRequired)&&this.radioButtonFieldPropertyChanged.isRequiredChanged&&(e.isRequired=n.isRequired),n.backgroundColor&&"white"!==n.backgroundColor&&this.radioButtonFieldPropertyChanged.isBackgroundColorChanged&&(e.backgroundColor=n.backgroundColor),n.borderColor&&"black"!==n.borderColor&&this.radioButtonFieldPropertyChanged.isBorderColorChanged&&(e.borderColor=n.borderColor),n.name&&this.radioButtonFieldPropertyChanged.isNameChanged&&(e.name=n.name),n.tooltip&&this.radioButtonFieldPropertyChanged.isToolTipChanged&&(e.tooltip=n.tooltip),n.thickness&&1!==n.thickness&&this.radioButtonFieldPropertyChanged.isThicknessChanged&&(e.thickness=n.thickness),n.visibility&&this.radioButtonFieldPropertyChanged.isVisibilityChanged&&(e.visibility=n.visibility),!m(n.isPrint)&&this.radioButtonFieldPropertyChanged.isPrintChanged&&(e.isPrint=n.isPrint),!m(n.isSelected)&&this.radioButtonFieldPropertyChanged.isSelectedChanged&&(e.isSelected=n.isSelected)},e.prototype.updateDropdownFieldSettingsProperties=function(e,t,i){var n=this.pdfViewer.DropdownFieldSettings;!m(n.isReadOnly)&&this.dropdownFieldPropertyChanged.isReadOnlyChanged&&(e.isReadonly=n.isReadOnly),!m(n.isRequired)&&this.dropdownFieldPropertyChanged.isRequiredChanged&&(e.isRequired=n.isRequired),n.backgroundColor&&"white"!==n.backgroundColor&&this.dropdownFieldPropertyChanged.isBackgroundColorChanged&&(e.backgroundColor=n.backgroundColor),n.borderColor&&"black"!==n.borderColor&&this.dropdownFieldPropertyChanged.isBorderColorChanged&&(e.borderColor=n.borderColor),n.alignment&&"Left"!==n.alignment&&this.dropdownFieldPropertyChanged.isAlignmentChanged&&(e.alignment=n.alignment),n.color&&"black"!==n.color&&this.dropdownFieldPropertyChanged.isColorChanged&&(e.color=n.color),n.fontFamily&&"Helvetica"!==n.fontFamily&&this.dropdownFieldPropertyChanged.isFontFamilyChanged&&(e.fontFamily=n.fontFamily),n.fontSize&&10!==n.fontSize&&this.dropdownFieldPropertyChanged.isFontSizeChanged&&(e.fontSize=n.fontSize),n.fontStyle&&this.dropdownFieldPropertyChanged.isFontStyleChanged&&(e.fontStyle=this.getFontStyleName(n.fontStyle,e)),n.name&&this.dropdownFieldPropertyChanged.isNameChanged&&(e.name=n.name),n.tooltip&&this.dropdownFieldPropertyChanged.isToolTipChanged&&(e.tooltip=n.tooltip),n&&1!==n.thickness&&this.dropdownFieldPropertyChanged.isThicknessChanged&&(e.thickness=n.thickness),n.visibility&&this.dropdownFieldPropertyChanged.isVisibilityChanged&&(e.visibility=n.visibility),!m(n.isPrint)&&this.dropdownFieldPropertyChanged.isPrintChanged&&(e.isPrint=n.isPrint),n.options&&this.dropdownFieldPropertyChanged.isOptionChanged&&(e.options=e.options&&e.options.length>0?e.options:n.options)},e.prototype.updatelistBoxFieldSettingsProperties=function(e,t,i){var n=this.pdfViewer.listBoxFieldSettings;!m(n.isReadOnly)&&this.listBoxFieldPropertyChanged.isReadOnlyChanged&&(e.isReadonly=n.isReadOnly),!m(n.isRequired)&&this.listBoxFieldPropertyChanged.isRequiredChanged&&(e.isRequired=n.isRequired),n.backgroundColor&&"white"!==n.backgroundColor&&this.listBoxFieldPropertyChanged.isBackgroundColorChanged&&(e.backgroundColor=n.backgroundColor),n.borderColor&&"black"!==n.borderColor&&this.listBoxFieldPropertyChanged.isBorderColorChanged&&(e.borderColor=n.borderColor),n.alignment&&"Left"!==n.alignment&&this.listBoxFieldPropertyChanged.isAlignmentChanged&&(e.alignment=n.alignment),n.color&&"black"!==n.color&&this.listBoxFieldPropertyChanged.isColorChanged&&(e.color=n.color),n.fontFamily&&"Helvetica"!==n.fontFamily&&this.listBoxFieldPropertyChanged.isFontFamilyChanged&&(e.fontFamily=n.fontFamily),n.fontSize&&10!==n.fontSize&&this.listBoxFieldPropertyChanged.isFontSizeChanged&&(e.fontSize=n.fontSize),n.fontStyle&&this.listBoxFieldPropertyChanged.isFontStyleChanged&&(e.fontStyle=this.getFontStyleName(n.fontStyle,e)),n.name&&this.listBoxFieldPropertyChanged.isNameChanged&&(e.name=n.name),n.tooltip&&this.listBoxFieldPropertyChanged.isToolTipChanged&&(e.tooltip=n.tooltip),n.thickness&&1!==n.thickness&&this.listBoxFieldPropertyChanged.isThicknessChanged&&(e.thickness=n.thickness),n.visibility&&this.listBoxFieldPropertyChanged.isVisibilityChanged&&(e.visibility=n.visibility),!m(n.isPrint)&&this.listBoxFieldPropertyChanged.isPrintChanged&&(e.isPrint=n.isPrint),n.options&&this.listBoxFieldPropertyChanged.isOptionChanged&&(e.options=e.options&&e.options.length>0?e.options:n.options)},e.prototype.updateSignInitialFieldProperties=function(e,t,i,n){var o=this.pdfViewer.initialFieldSettings,s=this.pdfViewer.signatureFieldSettings;t?(!m(o.isReadOnly)&&this.initialFieldPropertyChanged.isReadOnlyChanged&&(e.isReadonly=o.isReadOnly),m(o.isRequired)||!this.initialFieldPropertyChanged.isRequiredChanged||this.pdfViewer.magnificationModule.isFormFieldPageZoomed||(e.isRequired=o.isRequired),o.visibility&&this.initialFieldPropertyChanged.isVisibilityChanged&&!this.pdfViewer.magnificationModule.isFormFieldPageZoomed&&(e.visibility=o.visibility),o.tooltip&&this.initialFieldPropertyChanged.isTooltipChanged&&!this.pdfViewer.magnificationModule.isFormFieldPageZoomed&&(e.tooltip=o.tooltip),!m(o.thickness)&&!0===n&&this.initialFieldPropertyChanged.isThicknessChanged&&(e.thickness=o.thickness),o.name&&this.initialFieldPropertyChanged.isNameChanged&&!this.pdfViewer.magnificationModule.isFormFieldPageZoomed&&(e.name=o.name),m(o.isPrint)||!this.initialFieldPropertyChanged.isPrintChanged||this.pdfViewer.magnificationModule.isFormFieldPageZoomed||(e.isPrint=o.isPrint)):(!m(s.isReadOnly)&&this.signatureFieldPropertyChanged.isReadOnlyChanged&&(e.isReadonly=s.isReadOnly),m(s.isRequired)||!this.signatureFieldPropertyChanged.isRequiredChanged||this.pdfViewer.magnificationModule.isFormFieldPageZoomed||(e.isRequired=s.isRequired),s.visibility&&this.signatureFieldPropertyChanged.isVisibilityChanged&&!this.pdfViewer.magnificationModule.isFormFieldPageZoomed&&(e.visibility=s.visibility),s.tooltip&&this.signatureFieldPropertyChanged.isTooltipChanged&&!this.pdfViewer.magnificationModule.isFormFieldPageZoomed&&(e.tooltip=s.tooltip),!m(s.thickness)&&!0===n&&this.signatureFieldPropertyChanged.isThicknessChanged&&(e.thickness=s.thickness),s.name&&this.signatureFieldPropertyChanged.isNameChanged&&!this.pdfViewer.magnificationModule.isFormFieldPageZoomed&&(e.name=s.name),m(s.isPrint)||!this.signatureFieldPropertyChanged.isPrintChanged||this.pdfViewer.magnificationModule.isFormFieldPageZoomed||(e.isPrint=s.isPrint))},e.prototype.updateSignatureSettings=function(e,t){(t=!m(t)&&t)?(this.initialFieldPropertyChanged.isReadOnlyChanged=!m(e.isReadOnly),this.initialFieldPropertyChanged.isRequiredChanged=!m(e.isRequired),this.initialFieldPropertyChanged.isVisibilityChanged=!m(e.visibility),this.initialFieldPropertyChanged.isTooltipChanged=!m(e.tooltip),this.initialFieldPropertyChanged.isNameChanged=!m(e.name),this.initialFieldPropertyChanged.isPrintChanged=!m(e.isPrint),this.initialFieldPropertyChanged.isThicknessChanged=!m(e.thickness)):(this.signatureFieldPropertyChanged.isReadOnlyChanged=!m(e.isReadOnly),this.signatureFieldPropertyChanged.isRequiredChanged=!m(e.isRequired),this.signatureFieldPropertyChanged.isVisibilityChanged=!m(e.visibility),this.signatureFieldPropertyChanged.isTooltipChanged=!m(e.tooltip),this.signatureFieldPropertyChanged.isNameChanged=!m(e.name),this.signatureFieldPropertyChanged.isPrintChanged=!m(e.isPrint),this.signatureFieldPropertyChanged.isThicknessChanged=!m(e.thickness))},e.prototype.updateTextFieldSettings=function(e){this.textFieldPropertyChanged.isReadOnlyChanged=!m(e.isReadOnly),this.textFieldPropertyChanged.isRequiredChanged=!m(e.isRequired),this.textFieldPropertyChanged.isValueChanged=!m(e.value),this.textFieldPropertyChanged.isBackgroundColorChanged=!m(e.backgroundColor),this.textFieldPropertyChanged.isBorderColorChanged=!m(e.borderColor),this.textFieldPropertyChanged.isAlignmentChanged=!m(e.alignment),this.textFieldPropertyChanged.isColorChanged=!m(e.color),this.textFieldPropertyChanged.isFontFamilyChanged=!m(e.fontFamily),this.textFieldPropertyChanged.isFontSizeChanged=!m(e.fontSize),this.textFieldPropertyChanged.isFontStyleChanged=!m(e.fontStyle),this.textFieldPropertyChanged.isNameChanged=!m(e.name),this.textFieldPropertyChanged.isToolTipChanged=!m(e.tooltip),this.textFieldPropertyChanged.isThicknessChanged=!m(e.thickness),this.textFieldPropertyChanged.isMaxLengthChanged=!m(e.maxLength),this.textFieldPropertyChanged.isVisibilityChanged=!m(e.visibility),this.textFieldPropertyChanged.isPrintChanged=!m(e.isPrint),this.textFieldPropertyChanged.isMultilineChanged=!m(e.isMultiline)},e.prototype.updatePasswordFieldSettings=function(e){this.passwordFieldPropertyChanged.isReadOnlyChanged=!m(e.isReadOnly),this.passwordFieldPropertyChanged.isRequiredChanged=!m(e.isRequired),this.passwordFieldPropertyChanged.isValueChanged=!m(e.value),this.passwordFieldPropertyChanged.isBackgroundColorChanged=!m(e.backgroundColor),this.passwordFieldPropertyChanged.isBorderColorChanged=!m(e.borderColor),this.passwordFieldPropertyChanged.isAlignmentChanged=!m(e.alignment),this.passwordFieldPropertyChanged.isColorChanged=!m(e.color),this.passwordFieldPropertyChanged.isFontFamilyChanged=!m(e.fontFamily),this.passwordFieldPropertyChanged.isFontSizeChanged=!m(e.fontSize),this.passwordFieldPropertyChanged.isFontStyleChanged=!m(e.fontStyle),this.passwordFieldPropertyChanged.isNameChanged=!m(e.name),this.passwordFieldPropertyChanged.isToolTipChanged=!m(e.tooltip),this.passwordFieldPropertyChanged.isThicknessChanged=!m(e.thickness),this.passwordFieldPropertyChanged.isMaxLengthChanged=!m(e.maxLength),this.passwordFieldPropertyChanged.isVisibilityChanged=!m(e.visibility),this.passwordFieldPropertyChanged.isPrintChanged=!m(e.isPrint)},e.prototype.updateCheckBoxFieldSettings=function(e){this.checkBoxFieldPropertyChanged.isReadOnlyChanged=!m(e.isReadOnly),this.checkBoxFieldPropertyChanged.isRequiredChanged=!m(e.isRequired),this.checkBoxFieldPropertyChanged.isBackgroundColorChanged=!m(e.backgroundColor),this.checkBoxFieldPropertyChanged.isBorderColorChanged=!m(e.borderColor),this.checkBoxFieldPropertyChanged.isNameChanged=!m(e.name),this.checkBoxFieldPropertyChanged.isToolTipChanged=!m(e.tooltip),this.checkBoxFieldPropertyChanged.isThicknessChanged=!m(e.thickness),this.checkBoxFieldPropertyChanged.isVisibilityChanged=!m(e.visibility),this.checkBoxFieldPropertyChanged.isPrintChanged=!m(e.isPrint),this.checkBoxFieldPropertyChanged.isCheckedChanged=!m(e.isChecked)},e.prototype.updateRadioButtonFieldSettings=function(e){this.radioButtonFieldPropertyChanged.isReadOnlyChanged=!m(e.isReadOnly),this.radioButtonFieldPropertyChanged.isRequiredChanged=!m(e.isRequired),this.radioButtonFieldPropertyChanged.isBackgroundColorChanged=!m(e.backgroundColor),this.radioButtonFieldPropertyChanged.isBorderColorChanged=!m(e.borderColor),this.radioButtonFieldPropertyChanged.isNameChanged=!m(e.name),this.radioButtonFieldPropertyChanged.isToolTipChanged=!m(e.tooltip),this.radioButtonFieldPropertyChanged.isThicknessChanged=!m(e.thickness),this.radioButtonFieldPropertyChanged.isVisibilityChanged=!m(e.visibility),this.radioButtonFieldPropertyChanged.isPrintChanged=!m(e.isPrint),this.radioButtonFieldPropertyChanged.isSelectedChanged=!m(e.isSelected)},e.prototype.updateDropDownFieldSettings=function(e){this.dropdownFieldPropertyChanged.isReadOnlyChanged=!m(e.isReadOnly),this.dropdownFieldPropertyChanged.isRequiredChanged=!m(e.isRequired),this.dropdownFieldPropertyChanged.isValueChanged=!m(e.value),this.dropdownFieldPropertyChanged.isBackgroundColorChanged=!m(e.backgroundColor),this.dropdownFieldPropertyChanged.isBorderColorChanged=!m(e.borderColor),this.dropdownFieldPropertyChanged.isAlignmentChanged=!m(e.alignment),this.dropdownFieldPropertyChanged.isColorChanged=!m(e.color),this.dropdownFieldPropertyChanged.isFontFamilyChanged=!m(e.fontFamily),this.dropdownFieldPropertyChanged.isFontSizeChanged=!m(e.fontSize),this.dropdownFieldPropertyChanged.isFontStyleChanged=!m(e.fontStyle),this.dropdownFieldPropertyChanged.isNameChanged=!m(e.name),this.dropdownFieldPropertyChanged.isToolTipChanged=!m(e.tooltip),this.dropdownFieldPropertyChanged.isThicknessChanged=!m(e.thickness),this.dropdownFieldPropertyChanged.isVisibilityChanged=!m(e.visibility),this.dropdownFieldPropertyChanged.isPrintChanged=!m(e.isPrint),this.dropdownFieldPropertyChanged.isOptionChanged=!m(e.options)},e.prototype.updateListBoxFieldSettings=function(e){this.listBoxFieldPropertyChanged.isReadOnlyChanged=!m(e.isReadOnly),this.listBoxFieldPropertyChanged.isRequiredChanged=!m(e.isRequired),this.listBoxFieldPropertyChanged.isBackgroundColorChanged=!m(e.backgroundColor),this.listBoxFieldPropertyChanged.isBorderColorChanged=!m(e.borderColor),this.listBoxFieldPropertyChanged.isAlignmentChanged=!m(e.alignment),this.listBoxFieldPropertyChanged.isColorChanged=!m(e.color),this.listBoxFieldPropertyChanged.isFontFamilyChanged=!m(e.fontFamily),this.listBoxFieldPropertyChanged.isFontSizeChanged=!m(e.fontSize),this.listBoxFieldPropertyChanged.isFontStyleChanged=!m(e.fontStyle),this.listBoxFieldPropertyChanged.isNameChanged=!m(e.name),this.listBoxFieldPropertyChanged.isToolTipChanged=!m(e.tooltip),this.listBoxFieldPropertyChanged.isThicknessChanged=!m(e.thickness),this.listBoxFieldPropertyChanged.isVisibilityChanged=!m(e.visibility),this.listBoxFieldPropertyChanged.isPrintChanged=!m(e.isPrint),this.listBoxFieldPropertyChanged.isOptionChanged=!m(e.options)},e.prototype.getFontStyleName=function(e,t){var i="None";return 1===e&&(t.font.isBold=!0,i="Bold"),2===e&&(t.font.isItalic=!0,i="Italic"),3===e&&(t.font.isBold=!0,t.font.isItalic=!0,i="Bold Italic"),4===e&&(t.font.isUnderline=!0,i="Underline"),5===e&&(t.font.isBold=!0,t.font.isUnderline=!0,i="Bold Underline"),6===e&&(t.font.isUnderline=!0,t.font.isItalic=!0,i="Underline Italic"),7===e&&(t.font.isBold=!0,t.font.isItalic=!0,t.font.isUnderline=!0,i="Bold Italic Underline"),8===e&&(t.font.isStrikeout=!0,i="Strikethrough"),9===e&&(t.font.isBold=!0,t.font.isStrikeout=!0,i="Bold Strikethrough"),10===e&&(t.font.isItalic=!0,t.font.isStrikeout=!0,i="Italic Strikethrough"),11===e&&(t.font.isBold=!0,t.font.isItalic=!0,t.font.isStrikeout=!0,i="Bold Italic Strikethrough"),12===e&&(t.font.isUnderline=!0,t.font.isStrikeout=!0,i="Underline Strikethrough"),13===e&&(t.font.isBold=!0,t.font.isUnderline=!0,t.font.isStrikeout=!0,i="Bold Underline Strikethrough"),14===e&&(t.font.isItalic=!0,t.font.isUnderline=!0,t.font.isStrikeout=!0,i="Italic Underline Strikethrough"),15===e&&(t.font.isBold=!0,t.font.isItalic=!0,t.font.isUnderline=!0,t.font.isStrikeout=!0,i="Bold Italic Underline Strikethrough"),i},e.prototype.getAlignment=function(e){var t;"left"===e?t="left":"right"===e?t="right":"center"===e&&(t="center"),this.formFieldAlign=t},e.prototype.getFontStyle=function(e){e.isBold&&(this.formFieldBold="bold"),e.isItalic&&(this.formFieldItalic="italic"),e.isUnderline&&(this.formFieldUnderline="underline"),e.isStrikeout&&(this.formFieldStrikeOut="line-through")},e}(),OS=i(184);function BS(){return(0,OS.jsx)("div",{children:(0,OS.jsx)("div",{className:"control-section",children:(0,OS.jsx)(au,{id:"container",documentPath:"PDF_Succinctly.pdf",serviceUrl:"https://ej2services.syncfusion.com/production/web-services/api/pdfviewer",style:{height:"1000px"},children:(0,OS.jsx)(iu,{services:[Wg,Ug,qg,xb,Tb,ES,DS,NS,FS,LS,Lc,PS]})})})})}e.createRoot(document.getElementById("sample")).render((0,OS.jsx)(BS,{}))}()}();
//# sourceMappingURL=main.a078aa84.js.map